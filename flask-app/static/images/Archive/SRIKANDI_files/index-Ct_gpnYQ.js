var Ed=Object.defineProperty;var Md=(r,s,n)=>s in r?Ed(r,s,{enumerable:!0,configurable:!0,writable:!0,value:n}):r[s]=n;var ae=(r,s,n)=>Md(r,typeof s!="symbol"?s+"":s,n);import{r as a,j as e,a as Ga}from"./react-wD-TYV7g.js";import{a as Kd}from"./react-dom-D1uZcMec.js";import{u as ga,N as cn,a as ha,L as va,b as zd,R as dl,c as dn,d as ul,B as Ud}from"./react-router-dom-xpjHTPq7.js";import{p as Z}from"./prop-types-fmuNmAh5.js";import{s as fs,B as Xa,T as Ca,a as Rs,L as zt,b as Vd,I as Ss,c as Ut,C as Bi,d as On,D as bo,e as gs,A as _o,f as vt,g as Si,S as vi,h as qd,i as Hd,F as yo,j as No,k as Gd,G as w,l as Li,m as wo,n as So,M as Ls,o as Ms,p as Me,q as ys,r as Na,t as br,u as Wd,v as vo,w as Jd,x as Yd,y as _a,z as ya,E as Po,H as Pi,J as Co,K as Qd,N as Xd,O as ht,P as mt,Q as xt,R as Zd,U as Qt,V as eu,W as au,X as su,Y as tu,Z as ru,_ as nu,$ as iu,a0 as lu,a1 as hl,a2 as ml}from"./@mui-CE_rxjvy.js";import{d as Le}from"./react-secure-storage-CBaU51Sj.js";import{c as $i}from"./redux-BFxtlG_c.js";import{S as U}from"./sweetalert2-D5crEIi-.js";import{m as Ri}from"./moment-timezone-DU44Qi9m.js";import{h as oa,m as Ei}from"./moment-YfariCdf.js";import{C as Fr}from"./crypto-js-CwcNGXdZ.js";import{a as Ft}from"./axios-C88pvD_q.js";import"./firebase-DvKusUjF.js";import{f as To,g as ou,a as cu,o as du}from"./@firebase-8m0g6BMT.js";import{C as ms}from"./react-native-crypto-js-CTH33-gZ.js";import{c as uu}from"./chroma-js-puipMWQG.js";import{s as hu}from"./stylis-plugin-rtl-DGbBOjnX.js";import{k as mu,a as xu,C as pu}from"./@emotion-BOWbipqf.js";import{B as Dt,G as gu,F as Fo,a as fu,b as ju,c as ku,d as Va,e as Oa,f as $a,g as Ea,h as is,i as Do,j as bu,k as Ci,l as _u,m as yu,n as zn,o as za,p as Nu,q as $s,r as Un,s as Io,t as wu,T as Su,u as vu,v as Qr,w as pt,x as Bs,y as ts,z as Pu,A as Mi,C as Ki,D as Ks,E as Cu,H as Tu,I as Fu,J as Ao,K as Du,L as zi,M as Ui,N as Vi,O as Iu,P as qi,Q as Hi,R as Jr,S as rt,U as Gi,V as Xs,W as qt,X as nt,Y as Ti,Z as Au,_ as xr,$ as pr,a0 as _r,a1 as Vn,a2 as en,a3 as Yr,a4 as Wi,a5 as Ji,a6 as Ou,a7 as Yi,a8 as Bu,a9 as Lu,aa as $u,ab as Ru,ac as Eu,ad as Oo,ae as Bo,af as Mu,ag as Ku,ah as zu,ai as an,aj as Lo,ak as $o,al as Ro,am as Eo,an as Fi,ao as Uu,ap as Vu,aq as qn,ar as Qi,as as Mo,at as xl,au as qu,av as Hu,aw as Gu,ax as Wu,ay as un,az as Ju,aA as Yu,aB as pl,aC as Qu,aD as Xu}from"./react-icons-kyQ-XutS.js";import{c as fa,a as ze,b as Hn,d as wa,e as Qa,f as vs,g as jr,h as Zu}from"./yup-DuBvAGF_.js";import{b as Bn}from"./react-native-base64-DXA0Gx_s.js";import{F as ca,a as da,b as ce}from"./formik-Bz1iPLF0.js";import{v as eh}from"./uuid-BOvFkHkt.js";import"./buffer-DZfGlsLJ.js";import{B as Ta,Q as ah}from"./react-toastify-Bp5SZ_2W.js";import{S as Gs,C as sh}from"./react-select-CBLL5B77.js";import{c as th}from"./clsx-B-dksMZM.js";import"./react-select-async-paginate-IFqQ1sBA.js";import{d as os}from"./lodash.debounce-DUNAkA88.js";import"./dropzone-sBz9qiWc.js";import{u as sn}from"./react-dropzone-D2Fl6tGb.js";import{C as Ko}from"./react-easy-crop-CF-iLHze.js";import{f as rh}from"./filesize-CcEPj4ar.js";import{R as nh}from"./react-range-picker-BqCBFDcA.js";import{H as Di}from"./html-react-parser-C98Akfjz.js";import{u as gt,a as ds,b as it,Q as ih,c as lh}from"./@tanstack-BBF738JP.js";import"./react-table-DmohPZ-W.js";import{d as _s}from"./dayjs-BcjY7fLy.js";import"./react-flatpickr-DcM7vQ_v.js";import"./flatpickr-CbQ9_9Vq.js";import{z as oh}from"./@onlyoffice-DZCnS8DN.js";import{S as ch}from"./jose-D4ZnXLbt.js";import{E as dh}from"./@tinymce-BPLqXWfj.js";import"./react-quill-DfalJgT3.js";import"./react-chartjs-2-DLEYu426.js";import"./three-DU4T3l1g.js";import"./@three-ts-CvItq0rk.js";import"./@babel-CqqqM6WC.js";import"./scheduler-B6PyXeqF.js";import"./@remix-run-BNv9dIxv.js";import"./react-transition-group-BjkwWUzK.js";import"./dom-helpers-D0mFdbeO.js";import"./@popperjs-CMBiYTiD.js";import"./stylis-Cx79pK4c.js";import"./react-is-D81haKYo.js";import"./murmurhash-js-CNU9u6m8.js";import"./tslib-C0PmCJp6.js";import"./idb-Bn1DMRyg.js";import"./cssjanus-Cp9dX2gU.js";import"./hoist-non-react-statics-DQogQWOa.js";import"./property-expr-DEi1ZLzV.js";import"./tiny-case-BJ7jYKNY.js";import"./toposort-4iTFr-Y2.js";import"./deepmerge-DhIoniG1.js";import"./lodash-es-ClCkCI8n.js";import"./react-fast-compare-EizH_5r7.js";import"./base64-js-D0UyVEDn.js";import"./ieee754-DSYfm7We.js";import"./@floating-ui-Dqirgmo9.js";import"./use-isomorphic-layout-effect-Dppr4odc.js";import"./memoize-one-BdPwpGay.js";import"./@seznam-BGQGdX_c.js";import"./file-selector-BOIZxCBr.js";import"./attr-accept--H1_u311.js";import"./normalize-wheel-B2zREO8q.js";import"./react-property-BFQBAO5L.js";import"./domhandler-Cy3PW0QI.js";import"./domelementtype-AVFTcEpP.js";import"./html-dom-parser-B_bkYeCl.js";import"./style-to-js-DvLdau8K.js";import"./style-to-object-j50dR41t.js";import"./inline-style-parser-D--Rb2MU.js";import"./lodash-CNbUQ0Ja.js";import"./chart.js-CkVXdHX2.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))t(i);new MutationObserver(i=>{for(const l of i)if(l.type==="childList")for(const m of l.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&t(m)}).observe(document,{childList:!0,subtree:!0});function n(i){const l={};return i.integrity&&(l.integrity=i.integrity),i.referrerPolicy&&(l.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?l.credentials="include":i.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function t(i){if(i.ep)return;i.ep=!0;const l=n(i);fetch(i.href,l)}})();const uh=fs(Xa)(({theme:r={},ownerState:s})=>{var b,y,o,F,x,S;const{palette:n={},functions:t={},borders:i={},boxShadows:l={}}=r,{variant:m,bgColor:p,color:B,opacity:K,borderRadius:W,shadow:z}=s,{gradients:T={},grey:L={},white:$={main:"#fff"}}=n,{linearGradient:M}=t,{borderRadius:H={}}=i,V={"grey-100":L[100]||"#f7f7f7","grey-200":L[200]||"#eeeeee","grey-300":L[300]||"#e0e0e0","grey-400":L[400]||"#bdbdbd","grey-500":L[500]||"#9e9e9e","grey-600":L[600]||"#757575","grey-700":L[700]||"#616161","grey-800":L[800]||"#424242","grey-900":L[900]||"#212121"},A=["primary","secondary","info","success","warning","error","dark","light"],G=["transparent","white","black","primary","secondary","info","success","warning","error","light","dark","text","grey-100","grey-200","grey-300","grey-400","grey-500","grey-600","grey-700","grey-800","grey-900"],X=["xs","sm","md","lg","xl","xxl","section"],O=["xs","sm","md","lg","xl","xxl","inset"];let I=p;m==="gradient"?I=A.find(f=>f===p)?M&&((b=T[p])!=null&&b.main)&&((y=T[p])!=null&&y.state)?M(T[p].main,T[p].state):`linear-gradient(310deg, ${((o=T[p])==null?void 0:o.main)||"#fff"}, ${((F=T[p])==null?void 0:F.state)||"#fff"})`:$.main:G.find(f=>f===p)?I=((x=n[p])==null?void 0:x.main)||V[p]||p:I=p;let _=B;G.find(f=>f===B)&&(_=((S=n[B])==null?void 0:S.main)||V[B]||B);let C=W;X.find(f=>f===W)&&(C=H[W]||W);let k=l;return O.find(f=>f===z)&&(k=l[z]||"none"),{opacity:K,background:I,color:_,borderRadius:C,boxShadow:k}}),ie=a.forwardRef(({variant:r="contained",bgColor:s="transparent",color:n="dark",opacity:t=1,borderRadius:i="none",shadow:l="none",...m},p)=>e.jsx(uh,{...m,ref:p,ownerState:{variant:r,bgColor:s,color:n,opacity:t,borderRadius:i,shadow:l}}));ie.propTypes={variant:Z.oneOf(["contained","gradient"]),bgColor:Z.string,color:Z.string,opacity:Z.number,borderRadius:Z.string,shadow:Z.string};const hh=fs(Ca)(({theme:r={},ownerState:s})=>{const{palette:n={},typography:t={},functions:i={}}=r,{color:l,textTransform:m,verticalAlign:p,fontWeight:B,opacity:K,textGradient:W}=s,{gradients:z={},transparent:T={main:"transparent"}}=n,{fontWeightLight:L=300,fontWeightRegular:$=400,fontWeightMedium:M=500,fontWeightBold:H=700}=t,{linearGradient:V}=i,A={light:L,regular:$,medium:M,bold:H},G=()=>{var X,O,I,_,C,k;return{backgroundImage:l!=="inherit"&&l!=="text"&&l!=="white"&&z[l]?V?V((X=z[l])==null?void 0:X.main,(O=z[l])==null?void 0:O.state):`linear-gradient(310deg, ${((I=z[l])==null?void 0:I.main)||"#141727"}, ${((_=z[l])==null?void 0:_.state)||"#3a416f"})`:V?V(((C=z.dark)==null?void 0:C.main)||"#141727",((k=z.dark)==null?void 0:k.state)||"#3a416f"):"linear-gradient(310deg, #141727, #3a416f)",display:"inline-block",WebkitBackgroundClip:"text",WebkitTextFillColor:T.main,position:"relative",zIndex:1}};return{opacity:K,textTransform:m,verticalAlign:p,textDecoration:"none",color:l==="inherit"||!n[l]?"inherit":n[l].main,fontWeight:A[B]&&A[B],...W&&G()}}),le=a.forwardRef(({color:r="dark",fontWeight:s=!1,textTransform:n="none",verticalAlign:t="unset",textGradient:i=!1,opacity:l=1,children:m,...p},B)=>e.jsx(hh,{...p,ref:B,ownerState:{color:r,textTransform:n,verticalAlign:t,fontWeight:s,opacity:l,textGradient:i},children:m}));le.propTypes={color:Z.oneOf(["inherit","primary","secondary","info","success","warning","error","light","dark","text","white"]),fontWeight:Z.oneOf([!1,"light","regular","medium","bold"]),textTransform:Z.oneOf(["none","capitalize","uppercase","lowercase"]),verticalAlign:Z.oneOf(["unset","baseline","sub","super","text-top","text-bottom","middle","top","bottom"]),textGradient:Z.bool,children:Z.node.isRequired,opacity:Z.number};const mh=fs(Rs)(({theme:r={},ownerState:s})=>{const{palette:n={},functions:t={},borders:i={}}=r,{color:l,variant:m,size:p,circular:B,iconOnly:K}=s,{white:W={main:"#fff"},dark:z={main:"#344767"},text:T={main:"#67748e"},transparent:L={main:"transparent"},gradients:$={}}=n,{borderRadius:M={lg:"0.5rem",xl:"0.75rem"}}=i,H=(k,b,y,o)=>`${k[0]}px ${k[1]}px ${b[0]}px ${b[1]}px rgba(${y}, ${o})`,V=(k,b)=>`linear-gradient(310deg, ${k}, ${b})`,A=k=>`${k/16}rem`,G=()=>{var x;const k=n[l]?n[l].main:W.main,b=n[l]?n[l].focus:W.focus,y=n[l]?H([0,0],[0,3.2],n[l].main,.5):H([0,0],[0,3.2],z.main,.5);let o=W.main;l==="white"||!n[l]?o=T.main:l==="light"&&(o=((x=$.dark)==null?void 0:x.state)||"#3a416f");let F=W.main;return l==="white"?F=T.main:(l==="primary"||l==="error"||l==="dark")&&(F=W.main),{background:k,color:o,"&:hover":{backgroundColor:k},"&:focus:not(:hover)":{backgroundColor:b,boxShadow:y},"&:disabled":{backgroundColor:k,color:F}}},X=()=>{const k=l==="white"?rgba(W.main,.1):L.main,b=n[l]?n[l].main:W.main,y=n[l]?H([0,0],[0,3.2],n[l].main,.5):H([0,0],[0,3.2],W.main,.5);let o=n[l]?n[l].main:rgba(W.main,.75);return l==="white"&&(o=rgba(W.main,.75)),{background:k,color:b,borderColor:o,"&:hover":{background:L.main,borderColor:b},"&:focus:not(:hover)":{background:L.main,boxShadow:y},"&:active:not(:hover)":{backgroundColor:b,color:W.main,opacity:.85},"&:disabled":{color:b,borderColor:b}}},O=()=>{var y,o,F,x,S;const k=l==="white"||!$[l]?W.main:V?V(((y=$[l])==null?void 0:y.main)||"#141727",((o=$[l])==null?void 0:o.state)||"#3a416f"):`linear-gradient(310deg, ${((F=$[l])==null?void 0:F.main)||"#141727"}, ${((x=$[l])==null?void 0:x.state)||"#3a416f"})`;let b=W.main;return l==="white"?b=T.main:l==="light"&&(b=((S=$.dark)==null?void 0:S.state)||"#3a416f"),{background:k,color:b,"&:focus:not(:hover)":{boxShadow:"none"},"&:disabled":{background:k,color:b}}},I=()=>{const k=n[l]?n[l].main:W.main,b=n[l]?n[l].focus:W.focus;return{color:k,"&:hover":{color:b},"&:focus:not(:hover)":{color:b}}},_=()=>({borderRadius:M.section}),C=()=>{let k=A(38);p==="small"?k=A(25.4):p==="large"&&(k=A(52));let b=`${A(11)} ${A(11)} ${A(10)}`;return p==="small"?b=A(4.5):p==="large"&&(b=A(16)),{width:k,minWidth:k,height:k,minHeight:k,padding:b,"& .material-icons":{marginTop:0},"&:hover, &:focus, &:active":{transform:"none"}}};return{...m==="contained"&&G(),...m==="outlined"&&X(),...m==="gradient"&&O(),...m==="text"&&I(),...B&&_(),...K&&C()}}),_e=a.forwardRef(({color:r="white",variant:s="contained",size:n="medium",circular:t=!1,iconOnly:i=!1,children:l,...m},p)=>e.jsx(mh,{...m,ref:p,color:"primary",variant:s==="gradient"?"contained":s,size:n,ownerState:{color:r,variant:s,size:n,circular:t,iconOnly:i},children:l}));_e.propTypes={size:Z.oneOf(["small","medium","large"]),variant:Z.oneOf(["text","contained","outlined","gradient"]),color:Z.oneOf(["white","primary","secondary","info","success","warning","error","light","dark"]),circular:Z.bool,iconOnly:Z.bool,children:Z.node.isRequired};class xh extends Ga.Component{constructor(s){super(s),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(s){return{hasError:!0}}componentDidCatch(s,n){this.setState({error:s,errorInfo:n}),console.error("Error caught by boundary:",s,n)}render(){return this.state.hasError?e.jsxs(ie,{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"100vh",p:3,children:[e.jsx(le,{variant:"h3",color:"error",gutterBottom:!0,children:"Something went wrong"}),e.jsxs(ie,{mt:2,mb:4,children:[e.jsx(le,{variant:"body2",color:"text",children:this.state.error&&this.state.error.toString()}),!1]}),e.jsx(_e,{color:"info",onClick:()=>window.location.reload(),children:"Reload Page"})]}):this.props.children}}function ph(r,s){const{palette:n,transitions:t,breakpoints:i,boxShadows:l,borders:m,functions:p}=r,{active:B,transparentSidenav:K}=s,{dark:W,white:z,text:T,transparent:L}=n,{xxl:$}=l,{borderRadius:M}=m,{pxToRem:H}=p;return{background:B&&K?z.main:L.main,color:B?W.main:T.main,display:"flex",alignItems:"center",width:"100%",padding:`${H(10.8)} ${H(12.8)} ${H(10.8)} ${H(16)}`,margin:`0 ${H(16)}`,borderRadius:M.md,cursor:"pointer",userSelect:"none",whiteSpace:"nowrap",boxShadow:B&&K?$:"none",[i.up("xl")]:{boxShadow:()=>B&&K?$:"none",transition:t.create("box-shadow",{easing:t.easing.easeInOut,duration:t.duration.shorter})}}}function gh(r,s){const{palette:n,transitions:t,breakpoints:i,boxShadows:l,borders:m,functions:p}=r,{active:B,transparentSidenav:K,sidenavColor:W}=s,{white:z,info:T,light:L,gradients:$}=n,{md:M}=l,{borderRadius:H}=m,{pxToRem:V}=p;return{background:()=>B?W==="default"?T.main:n[W].main:L.main,minWidth:V(32),minHeight:V(32),borderRadius:H.md,display:"grid",placeItems:"center",boxShadow:M,transition:t.create("margin",{easing:t.easing.easeInOut,duration:t.duration.standard}),[i.up("xl")]:{background:()=>{let A;return B?W==="default"?A=T.main:W==="warning"?A=$.warning.main:A=n[W].main:A=K?z.main:L.main,A}},"& svg, svg g":{fill:B?z.main:$.dark.state}}}const fh=({palette:{white:r,gradients:s}},{active:n})=>({color:n?r.main:s.dark.state});function jh(r,s){const{typography:n,transitions:t,breakpoints:i,functions:l}=r,{miniSidenav:m,transparentSidenav:p,active:B}=s,{size:K,fontWeightMedium:W,fontWeightRegular:z}=n,{pxToRem:T}=l;return{marginLeft:T(12.8),[i.up("xl")]:{opacity:m||m&&p?0:1,maxWidth:m||m&&p?0:"100%",marginLeft:m||m&&p?0:T(12.8),transition:t.create(["opacity","margin"],{easing:t.easing.easeInOut,duration:t.duration.standard})},"& span":{fontWeight:B?W:z,fontSize:K.sm,lineHeight:0}}}function kh(r,s){const{palette:n,typography:t,transitions:i,breakpoints:l,functions:m}=r,{noCollapse:p,transparentSidenav:B,miniSidenav:K,open:W}=s,{dark:z,gradients:T}=n,{size:L}=t,{pxToRem:$,rgba:M}=m;return{fontSize:`${L.md} !important`,fontWeight:700,marginBottom:$(-1),transform:W?"rotate(0)":"rotate(-180deg)",color:W?z.main:M(T.dark.state,.4),transition:i.create(["color","transform","opacity"],{easing:i.easing.easeInOut,duration:i.duration.shorter}),[l.up("xl")]:{display:p||B&&K||K?"none !important":"block !important"}}}const Xi=a.createContext(null);Xi.displayName="SoftUIContext";function bh(r,s){switch(s.type){case"MINI_SIDENAV":return{...r,miniSidenav:s.value};case"TRANSPARENT_SIDENAV":return{...r,transparentSidenav:s.value};case"SIDENAV_COLOR":return{...r,sidenavColor:s.value};case"TRANSPARENT_NAVBAR":return{...r,transparentNavbar:s.value};case"FIXED_NAVBAR":return{...r,fixedNavbar:s.value};case"OPEN_CONFIGURATOR":return{...r,openConfigurator:s.value};case"DIRECTION":return{...r,direction:s.value};case"LAYOUT":return{...r,layout:s.value};default:throw new Error(`Unhandled action type: ${s.type}`)}}function zo({children:r}){const s={miniSidenav:!1,transparentSidenav:!1,sidenavColor:"info",transparentNavbar:!0,fixedNavbar:!1,openConfigurator:!1,direction:"ltr",layout:"dashboard"},[n,t]=a.useReducer(bh,s),i=a.useMemo(()=>[n,t],[n,t]);return e.jsx(Xi.Provider,{value:i,children:r})}function It(){const r=a.useContext(Xi);if(!r)throw new Error("useSoftUIController should be used inside the SoftUIControllerProvider.");return r}zo.propTypes={children:Z.node.isRequired};const kr=(r,s)=>r({type:"MINI_SIDENAV",value:s}),gl=(r,s)=>r({type:"TRANSPARENT_SIDENAV",value:s}),_h=(r,s)=>r({type:"SIDENAV_COLOR",value:s}),yh=(r,s)=>r({type:"TRANSPARENT_NAVBAR",value:s}),Nh=(r,s)=>r({type:"FIXED_NAVBAR",value:s}),wh=(r,s)=>r({type:"OPEN_CONFIGURATOR",value:s}),Sh=(r,s)=>r({type:"LAYOUT",value:s});function Tn({icon:r,name:s,children:n=!1,active:t=!1,noCollapse:i=!1,open:l=!1,...m}){const[p]=It(),{miniSidenav:B,transparentSidenav:K,sidenavColor:W}=p;return e.jsxs(e.Fragment,{children:[e.jsx(zt,{component:"li",children:e.jsxs(ie,{...m,sx:z=>ph(z,{active:t,transparentSidenav:K}),children:[e.jsx(Vd,{sx:z=>gh(z,{active:t,transparentSidenav:K,sidenavColor:W}),children:typeof r=="string"?e.jsx(Ss,{sx:z=>fh(z,{active:t}),children:r}):r}),e.jsx(Ut,{primary:s,sx:z=>jh(z,{miniSidenav:B,transparentSidenav:K,active:t})}),!i&&e.jsx(Ss,{sx:z=>kh(z,{noCollapse:i,transparentSidenav:K,miniSidenav:B,open:l}),children:"expand_less"})]})}),n&&e.jsx(Bi,{in:l,unmountOnExit:!0,children:n})]})}Tn.propTypes={color:Z.oneOf(["primary","secondary","info","success","warning","error","dark"]),icon:Z.node.isRequired,name:Z.string.isRequired,children:Z.node,active:Z.bool,noCollapse:Z.bool,open:Z.bool};function Uo({children:r}){return e.jsx(On,{sx:{pl:2,ml:3},children:r})}Uo.propTypes={children:Z.node.isRequired};const vh={width:"100%",padding:0,cursor:"pointer"};function Ph(r,s){const{palette:n,typography:t,transitions:i,functions:l}=r,{active:m,miniSidenav:p,name:B,nested:K}=s,{dark:W,gradients:z}=n,{size:T,fontWeightMedium:L,fontWeightRegular:$}=t,{pxToRem:M,rgba:H}=l;return{display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%",padding:`${M(7.2)} ${M(16)}`,margin:`0 ${M(16)} 0 ${M(21.6)}`,userSelect:"none",position:"relative","& span":{color:m?W.main:H(z.dark.state,.7),fontWeight:m?L:$,fontSize:T.sm,opacity:p?0:1,transition:i.create(["opacity","color"],{easing:i.easing.easeInOut,duration:i.duration.standard})},"&::before":{content:()=>K?K&&p&&`"${B[0]}"`:p?`"${B[0]}"`:'""',width:()=>p?0:M(m?8:5),height:()=>p?0:M(m?8:5),backgroundColor:m?W.main:H(z.dark.state,.5),color:m?W.main:H(z.dark.state,.5),fontWeight:m?L:$,display:"flex",alignItems:"center",position:"absolute",top:"50%",transform:"translateY(-50%)",left:M(-18),opacity:1,borderRadius:"50%",fontSize:T.sm}}}function Ch(r,s){const{typography:n,transitions:t,functions:i,palette:l}=r,{open:m,miniSidenav:p}=s,{dark:B,gradients:K}=l,{size:W}=n,{pxToRem:z,rgba:T}=i;return{fontSize:`${W.md} !important`,fontWeight:700,marginRight:z(-2.5),transform:()=>m?p?`translateX(${z(-24)}) rotate(0)`:"rotate(0)":p?`translateX(${z(-24)}) rotate(-180deg)`:"rotate(-180deg)",color:m?B.main:T(K.dark.state,.4),transition:t.create(["color","transform"],{easing:t.easing.easeInOut,duration:t.duration.shorter})}}function Vt({name:r,active:s,nested:n,children:t,open:i,hiddenCollapse:l,...m}){const[p]=It(),{miniSidenav:B}=p;return e.jsxs(e.Fragment,{children:[e.jsx(zt,{...m,component:"li",sx:vh,children:e.jsxs(ie,{sx:K=>Ph(K,{active:s,miniSidenav:B,name:r,nested:n}),children:[e.jsx(Ut,{primary:r}),t&&!l&&e.jsx(Ss,{component:"i",sx:K=>Ch(K,{open:i,miniSidenav:B}),children:"expand_less"})]})}),t&&e.jsx(Bi,{in:i,timeout:"auto",unmountOnExit:!0,children:t})]})}Vt.defaultProps={active:!1,nested:!1,children:!1,open:!1};Vt.propTypes={name:Z.string.isRequired,active:Z.bool,nested:Z.bool,children:Z.node,open:Z.bool,hiddenCollapse:Z.bool};const Th=fs(bo)(({theme:r,ownerState:s})=>{const{palette:n,boxShadows:t,transitions:i,breakpoints:l,functions:m}=r,{transparentSidenav:p,miniSidenav:B}=s,K=250,{white:W,transparent:z}=n,{xxl:T}=t,{pxToRem:L}=m;return{"& .MuiDrawer-paper":{boxShadow:T,border:"none",...B?{transform:`translateX(${L(-320)})`,transition:i.create("transform",{easing:i.easing.sharp,duration:i.duration.shorter}),[l.up("xl")]:{backgroundColor:p?z.main:W.main,boxShadow:p?"none":T,marginBottom:p?0:"inherit",left:"0",width:L(96),overflowX:"hidden",transform:"translateX(0)",transition:i.create(["width","background-color"],{easing:i.easing.sharp,duration:i.duration.shorter})}}:{transform:"translateX(0)",transition:i.create("transform",{easing:i.easing.sharp,duration:i.duration.shorter}),[l.up("xl")]:{backgroundColor:p?z.main:W.main,boxShadow:p?"none":T,marginBottom:p?0:"inherit",left:"0",width:K,transform:"translateX(0)",transition:i.create(["width","background-color"],{easing:i.easing.sharp,duration:i.duration.enteringScreen})}}}}});function Fh(r,s){const{functions:n,transitions:t,typography:i,breakpoints:l}=r,{miniSidenav:m}=s,{pxToRem:p}=n,{fontWeightMedium:B}=i;return{ml:.5,fontWeight:B,wordSpacing:p(-1),transition:t.create("opacity",{easing:t.easing.easeInOut,duration:t.duration.standard}),[l.up("xl")]:{opacity:m?0:1}}}const Dh="/assets/logo-navbar-BK4k2Lw5.png",Ih="/assets/favicon-DqkTMqSq.png",Ah={data:[],roles:[],redirect:!1,redirect_login:!1},Oh=(r=Ah,s)=>{switch(s.type){case"SET_DATA":return{...r,data:s.payload};case"SET_ROLES":return{...r,roles:s.payload};case"SET_REDIRECT":return{...r,redirect:s.payload};case"SET_REDIRECT_LOGIN":return{...r,redirect_login:s.payload};default:return r}},Es=$i(Oh),Bh=(r,s)=>{const n=Es.getState().data;let t=!1;if(n){for(const i of n)if(i&&i.nama==r&&i[s]=="Y"){t=!0;break}}return t},ge=(r,s,n=!1,t=!1)=>{if(t==!0)return!0;const i=Bh(r,s);return!i&&n?(Es.dispatch({type:"SET_REDIRECT",payload:!0}),U.fire({title:"Tidak dapat mengakses",html:`Izin "${r} ${s}" tidak ada`,icon:"error"}).then(()=>{}),!1):i},Lh=r=>{if(r.length){let s=!1;for(const n of r)if(n.bypass)s=!0;else if(ge(n.modul,"is_read")){s=!0;break}return s}return!1},Kn=class Kn{};ae(Kn,"serializeObjectToQueryString",(s,n)=>{const t=[];for(const i in s)if(s.hasOwnProperty(i)){const l=s[i],m=n?`${n}[${i}]`:i;typeof l=="object"&&l!==null?t.push(Kn.serializeObjectToQueryString(l,m)):t.push(`${encodeURIComponent(m)}=${encodeURIComponent(l)}`)}return t.join("&")});let Ce=Kn;const Zi=()=>{Le.removeItem("access_token"),Le.removeItem("users"),Le.removeItem("allrole"),Le.removeItem("menu")},$h={apiKey:"AIzaSyBpCsfiMglFEz1h1G8WB3dEZWOSdlOEp1U",authDomain:"srikandi-v3.firebaseapp.com",projectId:"srikandi-v3",storageBucket:"srikandi-v3.firebasestorage.app",messagingSenderId:"202057650463",appId:"1:202057650463:web:9b11992796d241e1f5602a"};To.initializeApp($h);const Rh="BOY0Zy1oT4Gl0KAVHgPtZZnh0c-5UyV5O96XI1ZjymuI0LynN1jkOjzFaF_GJpUkv5d1gHvNDJhrB0tWOIp_idY",Vo=ou(),Ii=To.remoteConfig();Ii.settings={minimumFetchIntervalMillis:6e4};const Ln=async()=>{try{const r=await cu(Vo,{vapidKey:Rh});r?Le.setItem("fcmToken",r):console.log("No registration token available. Request permission to generate one.")}catch(r){console.log("An error occurred while retrieving token. ",r)}};let Fn=null;const Eh=r=>{typeof r=="function"&&(Fn=r),du(Vo,s=>{Fn&&Fn(s)})},Mh=()=>{Fn=null},Kh=Es.getState().redirect_login,zh="https://api.arsip.go.id/user/api/",se=Ft.create({baseURL:"url",headers:{"Content-type":"application/json",Accept:"application/json"}});se.interceptors.request.use(r=>{const s=JSON.parse(Le.getItem("access_token"));return s!==null&&(r.headers.Authorization=`Bearer ${s}`),r});let li=!1,fl=!1;se.interceptors.response.use(async r=>r,async r=>{var s;if(r.response&&(r.response.status===401||((s=r.response.data)==null?void 0:s.message)=="Token kadaluarsa !")){const n=r.config;if(!li){li=!0;try{const t=await Uh().then(i=>{var l,m;return Ln(),(m=(l=i==null?void 0:i.result)==null?void 0:l.authorization)==null?void 0:m.token});if(t)return Le.setItem("access_token",JSON.stringify(t)),n.headers.Authorization=`Bearer ${t}`,await se(n)}catch{Es.dispatch({type:"SET_REDIRECT_LOGIN",payload:!0}),fl=!0}finally{li=!1}}Kh&&fl&&U.fire("Gagal","Sesi anda habis, silahkan login kembali","error").then(function(t){t&&(Es.dispatch({type:"SET_REDIRECT_LOGIN",payload:!1}),Zi())})}return Promise.reject(r)});const Uh=async()=>(await se.post(`${zh}auth/refresh`)).data,Xt="https://api.arsip.go.id/storage/",Vh="https://dp-srikandi.arsip.go.id/show";class qo{constructor(){ae(this,"getFile",async s=>{const n=Ce.serializeObjectToQueryString(s);return await se.get(`${Xt}geturl?${n}`,{headers:{Accept:"*/*"}}).then(l=>l.data)});ae(this,"previewFile",async s=>{const n=Ce.serializeObjectToQueryString(s);return await se.get(`${Xt}geturlpreview?${n}`,{headers:{Accept:"*/*"}}).then(l=>l.data)});ae(this,"copyObject",async s=>await se.post(`${Xt}copyobject`,s,{headers:{"Content-Type":"application/json"}}).then(i=>i));ae(this,"streamFile",async s=>{const n=Ce.serializeObjectToQueryString(s);return await se.get(`${Xt}stream?${n}`,{headers:{Accept:"*/*"}}).then(l=>l.data)});ae(this,"uploadFilePublic",async s=>await se.post(`${Xt}upload`,s,{headers:{"Content-Type":"multipart/form-data"}}).then(i=>i));ae(this,"downSave",async s=>await se.post(`${Xt}downsave`,s,{headers:{"Content-Type":"application/json"}}).then(i=>i.data));ae(this,"getMinioV2",async s=>{const n=Ce.serializeObjectToQueryString(s);return`${Vh}?${n}`})}}const el="srikandi-prod",Ho="srikandi-prod",qh="https://s3.arsip.go.id/",Go="MROe7xJvx5Na3gXFYkhrNAvLr99Bo9iJ6Wj/AjOCLWw=",Hh="R#0j2aB$!2lK%7pN",Da=(r,s,n)=>{var t;return function(){var i=this,l=arguments,m=function(){t=null,n||r.apply(i,l)},p=n&&!t;clearTimeout(t),t=setTimeout(m,s),p&&r.apply(i,l)}},Oe=r=>{if(r){const s=Object.keys(r);if(s.length>0){const n=s[0];return r[n][0]}}return null},jl=r=>{let s=Fr.AES.encrypt(r,Fr.enc.Utf8.parse(Hh),{mode:Fr.mode.ECB,padding:Fr.pad.Pkcs7});return Fr.enc.Base64.stringify(s.ciphertext)},tt=r=>r.toLowerCase().split(" ").map(s=>s.charAt(0).toUpperCase()+s.slice(1)).join(" "),Gh=(r,s)=>r.length>s?r.slice(0,s)+"...":r,Wh=["Minggu","Senin","Selasa","Rabu","Kamis","Jumat","Sabtu"],Jh=["Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","November","Desember"],zs=r=>{if(r){const s=new Date(r),n=Wh[s.getDay()],t=s.getDate(),i=Jh[s.getMonth()],l=s.getFullYear();return`${n}, ${t} ${i} ${l}`}return""},Ns=r=>r?Ri(r).tz("Asia/Jakarta").format("dddd, D MMMM YYYY [pukul] HH:mm"):"",Yh=r=>{if(!r)return"";const s=new Date(r),n={weekday:"long",day:"numeric",month:"long",year:"numeric",timeZone:"UTC"},t={hour:"2-digit",minute:"2-digit",hour12:!1,timeZone:"UTC"},i=new Intl.DateTimeFormat("id-ID",n),l=new Intl.DateTimeFormat("id-ID",t),m=i.format(s),p=l.format(s);return`${m} pukul ${p}`},Qh=r=>r?Ri(r).tz("Asia/Jakarta").format("dddd, D MMMM YYYY"):"",na=(r,s)=>{let n;switch(s){case 1:n={weekday:"long",year:"numeric",month:"long",day:"numeric"};break;case 2:n={year:"numeric",month:"long",day:"numeric"};break;case 3:n={hour:"2-digit",minute:"2-digit",timeZoneName:"short"};break;default:n={weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit",timeZoneName:"short"}}return s===3?new Date(r).toLocaleTimeString("id-ID",n):new Date(r).toLocaleDateString("id-ID",n)},Ht=new qo,Xh=[".jpg",".jpeg",".png",".mp4",".pdf",".xlsx",".xls"],Wo=r=>{const s="."+(r==null?void 0:r.slice((r.lastIndexOf(".")-1>>>0)+2));return!!Xh.includes(s.toLowerCase())},Zh=async(r,s,n,t=null)=>{const i={source_bucket:el,source_file:r,source_folder:s,target_bucket:"public-temp",target_file:n??r,target_folder:t??s},l=await Ht.copyObject(i).then(p=>p);return{full:qh+l.data.bucket+"/"+l.data.folder+"/"+l.data.filename,bucket:l.data.bucket,folder:l.data.folder,filename:l.data.filename,key:l.data.filename.replaceAll(" ",""),url:l.data.url}},Wa=async(r,s,n,t=0,i=null)=>{if(!Gn(r,i))return am(r,s);ka();const l={filename:r,folder:s,bucket:n??el??"srikandi-dev"};!Wo(r)|t?Ht.getFile(l).then(m=>{window.open(m.url,"_blank")}).catch(m=>U.fire({title:"Data tidak ditemukan",icon:"warning"})).finally(()=>U.close()):Ht.previewFile(l).then(m=>{window.open(m.url,"_blank")}).catch(m=>U.fire({title:"Data tidak ditemukan",icon:"warning"})).finally(()=>U.close())},Hs=async(r,s,n,t=0,i=null)=>{if(!Gn(r,i))return Jo(r,s);const l={filename:r,folder:s,bucket:n??el??"srikandi-dev"};return!Wo(r)|t?(await Ht.getFile(l).then(p=>p).catch(p=>console.log({err:p}))).url:(await Ht.previewFile(l).then(p=>p).catch(p=>console.log({err:p}))).url},em=r=>{const s="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";let n="";for(let t=0;t<r;t++){const i=Math.floor(Math.random()*s.length);n+=s.charAt(i)}return n},ka=()=>{U.fire({title:"Mohon Tunggu",text:"Sedang Memproses Data",icon:"info",allowOutsideClick:!1,showConfirmButton:!1,showCancelButton:!1,didOpen:()=>{U.showLoading()}})},Se=(r,s=0,n=",",t=".")=>{const l=new Intl.NumberFormat("en-US",{minimumFractionDigits:s,maximumFractionDigits:s,useGrouping:!0}).format(r).replace(".",n);return t!==","?l.replace(/,/g,t):l},Gn=(r,s=null)=>{const n=/^[a-zA-Z0-9]+\.\w+$/;return/^\d{14}.*\.\w+$/.test(r)||s>"2025-01-01 00:00:00"?!0:(n.test(r),!1)},am=async(r,s,n)=>{ka();const t={file:r,path:s+"/",bucket:Ho},i=await Ht.getMinioV2(t).then(l=>l);window.open(i,"_blank"),U.close()},Jo=async(r,s,n)=>{const t={file:r,path:s+"/",bucket:Ho};return Ht.getMinioV2(t).then(l=>l)},es=(r,s)=>{const n=URL.createObjectURL(r),t=document.createElement("a");t.href=n,t.download=s,document.body.append(t),t.dispatchEvent(new MouseEvent("click",{bubbles:!0,cancelable:!0,view:window})),document.body.removeChild(t)},tn=(r,s={type:"application/pdf"})=>{const n=new Blob([r],s),t=window.URL.createObjectURL(n);window.open(t,"_blank")||alert("Pop-up blocked, please allow pop-ups for this website.")},Ps=r=>{const s=ms.AES.encrypt(r.toString(),Go).toString();return encodeURIComponent(s)},Js=r=>{const n=ms.AES.decrypt(r,Go).toString(ms.enc.Utf8);return decodeURIComponent(n)},sm=r=>{const s=new FormData;for(const[n,t]of Object.entries(r))if(t instanceof Array)for(let i=0;i<t.length;++i)for(const[l,m]of Object.entries(t[i]))if(m instanceof Array)for(const p in m)s.append(`${n}[${i}][${l}][${p}]`,m[p]);else if(m instanceof Object&&!(m instanceof File))for(const[p,B]of Object.entries(m)){let K=B;B||(K=""),s.append(`${n}[${i}][${l}][${p}]`,K)}else s.append(`${n}[${i}][${l}]`,m);else if(t instanceof Object&&!(t instanceof File))for(const[i,l]of Object.entries(t)){let m=l;l||(m=""),s.append(`${n}[${i}]`,m)}else{let i=t;t||(i=""),s.append(n,i)}return s};function Ai({color:r="error",brand:s="",brandName:n,routes:t,...i}){const[l,m]=a.useState(!1),[p,B]=a.useState(!1),[K,W]=It(),{miniSidenav:z,transparentSidenav:T}=K,L=ga(),{pathname:$}=L,M=$.split("/").slice(1)[0],H=$.split("/").slice(1)[1],V=Le.getItem("users"),A=JSON.parse(V),[G,X]=a.useState(null),[O,I]=a.useState(!1),_=()=>kr(W,!0);a.useEffect(()=>{function F(){kr(W,window.innerWidth<1200)}return window.addEventListener("resize",F),F(),()=>window.removeEventListener("resize",F)},[W,L]);const C=F=>{const x=[];return F instanceof Array?F.map(S=>{x.push({modul:S.modul,bypass:S.bypass})}):x.push({modul:F.modul,bypass:F.bypass}),Lh(x)},k=F=>F.map(({name:S,route:f,key:R,href:u,hidden:D})=>u?e.jsx(vt,{href:u,target:"_blank",rel:"noreferrer",sx:{textDecoration:"none"},children:e.jsx(Vt,{name:S,nested:!0})},R):!D&&e.jsx(cn,{to:f,sx:{textDecoration:"none"},children:e.jsx(Vt,{name:S,active:f===$,nested:!0})},R)),b=F=>F.map(({name:x,collapse:S,route:f,href:R,key:u,hiddenCollapse:D,modul:E,bypass:J})=>{let P;return S&&!D?P=e.jsx(Vt,{hiddenCollapse:D,name:x,active:u===H,open:p===x,onClick:()=>B(p===x?!1:x),children:k(S)},u):P=R?e.jsx(vt,{href:R,target:"_blank",rel:"noreferrer",sx:{textDecoration:"none"},children:e.jsx(Vt,{name:x,active:u===H})},u):C({modul:E,bypass:J})?e.jsx(cn,{to:f,sx:{textDecoration:"none"},children:e.jsx(Vt,{name:x,active:u===H})},u):e.jsx(e.Fragment,{}),e.jsx(Uo,{children:P},u)}),y=t.map(({type:F,name:x,icon:S,title:f,collapse:R,noCollapse:u,key:D,href:E,route:J,hidden:P,modul:h,bypass:d},j)=>{let g;return F==="collapse"?E?g=e.jsx(vt,{href:E,target:"_blank",rel:"noreferrer",sx:{textDecoration:"none"},children:e.jsx(Tn,{name:x,icon:S,active:D===M,noCollapse:u})},D):u&&J?g=C({modul:h,bypass:d})&&e.jsx(cn,{to:J,children:e.jsx(Tn,{name:x,icon:S,noCollapse:u,active:D===M,children:R&&R.length?b(R):null})},D):g=C(R)&&e.jsx(Tn,{name:x,icon:S,active:D===M,open:l===D,onClick:()=>m(l===D?!1:D),children:R?b(R):null},D):F==="title"?g=ge(h??"","is_read",!1,d)&&!z&&e.jsx(le,{display:"block",variant:"caption",fontWeight:"bold",textTransform:"uppercase",opacity:.6,pl:3,mt:2,mb:1,ml:1,children:f},D):F==="divider"&&(g=ge(h??"","is_read",!1,d)&&e.jsx(gs,{},`devider-menu-${j}`)),g}),o=async()=>{Hs(A==null?void 0:A.foto,"user-profile").then(F=>{X(F)}).catch(()=>{X(Ih)})};return a.useEffect(()=>{A&&!O&&(o(),I(!0))},[A]),e.jsxs(Th,{...i,variant:"permanent",ownerState:{transparentSidenav:T,miniSidenav:z},children:[e.jsxs(ie,{pt:3,pb:1,px:4,textAlign:"center",children:[e.jsx(ie,{display:{xs:"block",xl:"none"},position:"absolute",top:0,right:0,p:1.625,onClick:_,sx:{cursor:"pointer"},children:e.jsx(le,{variant:"h6",color:"secondary",children:e.jsx(Ss,{sx:{fontWeight:"bold"},children:"close"})})}),e.jsxs(ie,{component:cn,to:"/",display:"flex",alignItems:"center",children:[s&&e.jsx(ie,{component:"img",src:s,alt:"Soft UI Logo",width:"2rem"}),e.jsx(ie,{sx:F=>Fh(F,{miniSidenav:z}),children:e.jsx(le,{component:"h6",variant:"button",fontWeight:"medium",children:e.jsx("img",{src:Dh,width:180,alt:"Logo"})})})]})]}),e.jsxs("div",{className:"py-2 px-4 flex items-start justify-around",children:[e.jsx(_o,{alt:A==null?void 0:A.nama,src:G}),!z&&e.jsxs("div",{className:"title ms-3",children:[e.jsx("div",{className:"text-sm font-bold break-word whitespace-pre-line",children:A==null?void 0:A.nama}),e.jsxs("div",{className:"break-word whitespace-pre-line text-xs font-normal text-gray-500",children:[A==null?void 0:A.desc_jabatan," - ",A==null?void 0:A.desc_unit_kerja," ",e.jsx("br",{})," ",A==null?void 0:A.desc_instansi]})]})]}),e.jsx(gs,{}),e.jsx(On,{children:y})]})}Ai.propTypes={color:Z.oneOf(["primary","secondary","info","success","warning","error","dark"]),brand:Z.string,brandName:Z.string.isRequired,routes:Z.arrayOf(Z.object).isRequired,hiddenCollapse:Z.bool};const tm=fs(bo)(({theme:r,ownerState:s})=>{const{boxShadows:n,functions:t,transitions:i}=r,{openConfigurator:l}=s,m=360,{lg:p}=n,{pxToRem:B}=t,K=()=>({width:m,left:"initial",right:0,transition:i.create("right",{easing:i.easing.sharp,duration:i.duration.short})}),W=()=>({left:"initial",right:B(-350),transition:i.create("all",{easing:i.easing.sharp,duration:i.duration.short})});return{"& .MuiDrawer-paper":{height:"100vh",margin:0,padding:`0 ${B(10)}`,borderRadius:0,boxShadow:p,overflowY:"auto",...l?K():W()}}});function hn(){const[r,s]=It(),{openConfigurator:n,transparentSidenav:t,miniSidenav:i,fixedNavbar:l,sidenavColor:m}=r,[p,B]=a.useState(!1),K=["primary","dark","info","success","warning","error"];a.useEffect(()=>{function H(){return window.innerWidth>1200?B(!1):B(!0)}return window.addEventListener("resize",H),H(),()=>window.removeEventListener("resize",H)},[]);const W=()=>wh(s,!1),z=()=>gl(s,!0),T=()=>gl(s,!1),L=()=>kr(s,!i),$=()=>Nh(s,!l),M=({functions:{pxToRem:H},boxShadows:{buttonBoxShadow:V}})=>({height:H(42),boxShadow:V.main,"&:hover, &:focus":{opacity:1}});return e.jsxs(tm,{variant:"permanent",ownerState:{openConfigurator:n},children:[e.jsxs(ie,{display:"flex",justifyContent:"space-between",alignItems:"baseline",pt:3,pb:.8,px:3,children:[e.jsxs(ie,{children:[e.jsx(le,{variant:"h5",children:"Soft UI Configurator"}),e.jsx(le,{variant:"body2",color:"text",children:"See our dashboard options."})]}),e.jsx(Ss,{sx:({typography:{size:H,fontWeightBold:V},palette:{dark:A}})=>({fontSize:`${H.md} !important`,fontWeight:`${V} !important`,stroke:A.main,strokeWidth:"2px",cursor:"pointer",mt:2}),onClick:W,children:"close"})]}),e.jsx(gs,{}),e.jsxs(ie,{pt:1.25,pb:3,px:3,children:[e.jsxs(ie,{children:[e.jsx(le,{variant:"h6",children:"Sidenav Colors"}),e.jsx(ie,{mb:.5,children:K.map(H=>e.jsx(Si,{sx:({borders:{borderWidth:V},palette:{white:A,dark:G},transitions:X})=>({width:"24px",height:"24px",padding:0,border:`${V[1]} solid ${A.main}`,borderColor:m===H&&G.main,transition:X.create("border-color",{easing:X.easing.sharp,duration:X.duration.shorter}),backgroundImage:({functions:{linearGradient:O},palette:{gradients:I}})=>O(I[H].main,I[H].state),"&:not(:last-child)":{mr:1},"&:hover, &:focus, &:active":{borderColor:G.main}}),onClick:()=>_h(s,H)},H))})]}),e.jsxs(ie,{mt:3,lineHeight:1,children:[e.jsx(le,{variant:"h6",children:"Sidenav Type"}),e.jsx(le,{variant:"button",color:"text",fontWeight:"regular",children:"Choose between 2 different sidenav types."}),e.jsxs(ie,{sx:{display:"flex",mt:2},children:[e.jsx(_e,{color:"info",variant:t?"gradient":"outlined",onClick:z,disabled:p,fullWidth:!0,sx:{mr:1,...M},children:"Transparent"}),e.jsx(_e,{color:"info",variant:t?"outlined":"gradient",onClick:T,disabled:p,fullWidth:!0,sx:M,children:"White"})]})]}),e.jsxs(ie,{mt:3,mb:2,lineHeight:1,children:[e.jsx(le,{variant:"h6",children:"Navbar Fixed"}),e.jsx(vi,{checked:l,onChange:$})]}),e.jsx(gs,{}),e.jsxs(ie,{mt:2,mb:3,lineHeight:1,children:[e.jsx(le,{variant:"h6",children:"Sidenav Mini"}),e.jsx(vi,{checked:i,onChange:L})]}),e.jsx(gs,{}),e.jsxs(ie,{mt:3,mb:2,children:[e.jsx(ie,{mb:2,children:e.jsx(_e,{component:vt,href:"https://www.creative-tim.com/product/soft-ui-dashboard-pro-react",target:"_blank",rel:"noreferrer",color:"info",variant:"gradient",fullWidth:!0,children:"buy now"})}),e.jsx(ie,{mb:2,children:e.jsx(_e,{component:vt,href:"https://www.creative-tim.com/product/soft-ui-dashboard-react",target:"_blank",rel:"noreferrer",color:"dark",variant:"gradient",fullWidth:!0,children:"free download"})}),e.jsx(_e,{component:vt,href:"https://www.creative-tim.com/learning-lab/react/quick-start/soft-ui-dashboard/",target:"_blank",rel:"noreferrer",color:"dark",variant:"outlined",fullWidth:!0,children:"view documentation"})]}),e.jsx(ie,{display:"flex",justifyContent:"center",children:e.jsx("a",{className:"github-button",href:"https://github.com/creativetimofficial/ct-soft-ui-dashboard-pro-react","data-icon":"octicon-star","data-size":"large","data-show-count":"true","aria-label":"Star creativetimofficial/ct-soft-ui-dashboard-pro-react on GitHub",children:"Star"})}),e.jsxs(ie,{mt:3,textAlign:"center",children:[e.jsx(ie,{mb:.5,children:e.jsx(le,{variant:"h6",children:"Thank you for sharing!"})}),e.jsxs(ie,{display:"flex",justifyContent:"center",children:[e.jsx(ie,{mr:1.5,children:e.jsxs(_e,{component:vt,href:"//twitter.com/intent/tweet?text=Check%20Soft%20UI%20Dashboard%20PRO%20React%20made%20by%20%40CreativeTim%20%23webdesign%20%23dashboard%20%23react%20%mui&url=https%3A%2F%2Fwww.creative-tim.com%2Fproduct%2Fsoft-ui-dashboard-pro-react",target:"_blank",rel:"noreferrer",color:"dark",children:[e.jsx(qd,{}),"  Tweet"]})}),e.jsxs(_e,{component:vt,href:"https://www.facebook.com/sharer/sharer.php?u=https://www.creative-tim.com/product/soft-ui-dashboard-pro-react",target:"_blank",rel:"noreferrer",color:"dark",children:[e.jsx(Hd,{}),"  Share"]})]})]})]})]})}const ba={background:{default:"#f8f9fa"},text:{main:"#67748e",focus:"#67748e"},transparent:{main:"#ffffff00"},white:{main:"#ffffff",focus:"#ffffff"},black:{light:"#141414",main:"#000000",focus:"#000000"},primary:{main:"#17c1e8",focus:"#3acaeb"},secondary:{main:"#8392ab",focus:"#96a2b8"},info:{main:"#17c1e8",focus:"#3acaeb"},success:{main:"#82d616",focus:"#95dc39"},warning:{main:"#fbcf33",focus:"#fcd652"},error:{main:"#ea0606",focus:"#c70505"},light:{main:"#e9ecef",focus:"#e9ecef"},dark:{main:"#344767",focus:"#344767"},grey:{100:"#f8f9fa",200:"#e9ecef",300:"#dee2e6",400:"#ced4da",500:"#adb5bd",600:"#6c757d",700:"#495057",800:"#343a40",900:"#212529"},gradients:{primary:{main:"#055eaf",state:"#77c0ff"},secondary:{main:"#627594",state:"#a8b8d8"},info:{main:"#2152ff",state:"#21d4fd"},success:{main:"#17ad37",state:"#98ec2d"},warning:{main:"#f53939",state:"#fbcf33"},error:{main:"#ea0606",state:"#ff667c"},light:{main:"#ced4da",state:"#ebeff4"},dark:{main:"#141727",state:"#3a416f"}},socialMediaColors:{facebook:{main:"#3b5998",dark:"#344e86"},twitter:{main:"#55acee",dark:"#3ea1ec"},instagram:{main:"#125688",dark:"#0e456d"},linkedin:{main:"#0077b5",dark:"#00669c"},pinterest:{main:"#cc2127",dark:"#b21d22"},youtube:{main:"#e52d27",dark:"#d41f1a"},vimeo:{main:"#1ab7ea",dark:"#13a3d2"},slack:{main:"#3aaf85",dark:"#329874"},dribbble:{main:"#ea4c89",dark:"#e73177"},github:{main:"#24292e",dark:"#171a1d"},reddit:{main:"#ff4500",dark:"#e03d00"},tumblr:{main:"#35465c",dark:"#2a3749"}},alertColors:{primary:{main:"#2152ff",state:"#02c6f3",border:"#b9ecf8"},secondary:{main:"#627594",state:"#8ca1cb",border:"#dadee6"},info:{main:"#2152ff",state:"#02c6f3",border:"#b9ecf8"},success:{main:"#17ad37",state:"#84dc14",border:"#daf3b9"},warning:{main:"#f53939",state:"#fac60b",border:"#fef1c2"},error:{main:"#ea0606",state:"#ff3d59",border:"#f9b4b4"},light:{main:"#ced4da",state:"#d1dae6",border:"#f8f9fa"},dark:{main:"#141727",state:"#2c3154",border:"#c2c8d1"}},badgeColors:{primary:{background:"#abe9f7",text:"#08a1c4"},secondary:{background:"#e4e8ed",text:"#5974a2"},info:{background:"#abe9f7",text:"#08a1c4"},success:{background:"#cdf59b",text:"#67b108"},warning:{background:"#fef5d3",text:"#fbc400"},error:{background:"#fc9797",text:"#bd0000"},light:{background:"#ffffff",text:"#c7d3de"},dark:{background:"#8097bf",text:"#1e2e4a"}},inputColors:{borderColor:{main:"#d2d6da",focus:"#35d1f5"},boxShadow:"#81e3f9",error:"#fd5c70",success:"#66d432"},sliderColors:{thumb:{borderColor:"#d9d9d9"}},circleSliderColors:{background:"#d3d3d3"},tabs:{indicator:{boxShadow:"#ddd"}}},Wn={values:{xs:0,sm:576,md:768,lg:992,xl:1200,xxl:1400}};function Ie(r,s=16){return`${r/s}rem`}const{dark:Yo}=ba,Ua={fontFamily:'"Roboto", "Helvetica", "Arial", sans-serif',fontWeightLight:300,fontWeightRegular:400,fontWeightMedium:500,fontWeightBold:700,fontSizeXXS:Ie(10.4),fontSizeXS:Ie(12),fontSizeSM:Ie(14),fontSizeMD:Ie(16),fontSizeLG:Ie(18),fontSizeXL:Ie(20)},Zt={fontFamily:Ua.fontFamily,color:Yo.main,fontWeight:Ua.fontWeightMedium},er={fontFamily:Ua.fontFamily,color:Yo.main,fontWeight:Ua.fontWeightLight,lineHeight:1.2},us={fontFamily:Ua.fontFamily,fontWeightLight:Ua.fontWeightLight,fontWeightRegular:Ua.fontWeightRegular,fontWeightMedium:Ua.fontWeightMedium,fontWeightBold:Ua.fontWeightBold,h1:{fontSize:Ie(48),lineHeight:1.25,...Zt},h2:{fontSize:Ie(36),lineHeight:1.3,...Zt},h3:{fontSize:Ie(30),lineHeight:1.375,...Zt},h4:{fontSize:Ie(24),lineHeight:1.375,...Zt},h5:{fontSize:Ie(20),lineHeight:1.375,...Zt},h6:{fontSize:Ie(16),lineHeight:1.625,...Zt},subtitle1:{fontFamily:Ua.fontFamily,fontSize:Ua.fontSizeXL,fontWeight:Ua.fontWeightRegular,lineHeight:1.625},subtitle2:{fontFamily:Ua.fontFamily,fontSize:Ua.fontSizeMD,fontWeight:Ua.fontWeightMedium,lineHeight:1.6},body1:{fontFamily:Ua.fontFamily,fontSize:Ua.fontSizeXL,fontWeight:Ua.fontWeightRegular,lineHeight:1.625},body2:{fontFamily:Ua.fontFamily,fontSize:Ua.fontSizeMD,fontWeight:Ua.fontWeightRegular,lineHeight:1.6},button:{fontFamily:Ua.fontFamily,fontSize:Ua.fontSizeSM,fontWeight:Ua.fontWeightBold,lineHeight:1.5,textTransform:"uppercase"},caption:{fontFamily:Ua.fontFamily,fontSize:Ua.fontSizeXS,fontWeight:Ua.fontWeightRegular,lineHeight:1.25},overline:{fontFamily:Ua.fontFamily},d1:{fontSize:Ie(80),...er},d2:{fontSize:Ie(72),...er},d3:{fontSize:Ie(64),...er},d4:{fontSize:Ie(56),...er},d5:{fontSize:Ie(48),...er},d6:{fontSize:Ie(40),...er},size:{xxs:Ua.fontSizeXXS,xs:Ua.fontSizeXS,sm:Ua.fontSizeSM,md:Ua.fontSizeMD,lg:Ua.fontSizeLG,xl:Ua.fontSizeXL},lineHeight:{sm:1.25,md:1.5,lg:2}};function al(r){return uu(r).rgb().join(", ")}function cs(r,s){return`rgba(${al(r)}, ${s})`}function as(r=[],s=[],n,t,i=""){const[l,m]=r,[p,B]=s;return`${i} ${Ie(l)} ${Ie(m)} ${Ie(p)} ${Ie(B)} ${cs(n,t)}`}const{black:ws,white:rm,info:nm,inputColors:oi,tabs:im}=ba,Cs={xs:as([0,2],[9,-5],ws.main,.15),sm:as([0,5],[10,0],ws.main,.12),md:`${as([0,4],[6,-1],ws.light,.12)}, ${as([0,2],[4,-1],ws.light,.07)}`,lg:`${as([0,8],[26,-4],ws.light,.15)}, ${as([0,8],[9,-5],ws.light,.06)}`,xl:as([0,23],[45,-11],ws.light,.25),xxl:as([0,20],[27,0],ws.main,.05),inset:as([0,1],[2,0],ws.main,.075,"inset"),navbarBoxShadow:`${as([0,0],[1,1],rm.main,.9,"inset")}, ${as([0,20],[27,0],ws.main,.05)}`,buttonBoxShadow:{main:`${as([0,4],[7,-1],ws.main,.11)}, ${as([0,2],[4,-1],ws.main,.07)}`,stateOf:`${as([0,3],[5,-1],ws.main,.09)}, ${as([0,2],[5,-1],ws.main,.07)}`,stateOfNotHover:as([0,0],[0,3.2],nm.main,.5)},inputBoxShadow:{focus:as([0,0],[0,2],oi.boxShadow,1),error:as([0,0],[0,2],oi.error,.6),success:as([0,0],[0,2],oi.success,.6)},sliderBoxShadow:{thumb:as([0,1],[13,0],ws.main,.2)},tabsBoxShadow:{indicator:as([0,1],[5,1],im.indicator.boxShadow,1)}},{grey:lm}=ba,Ja={borderColor:lm[300],borderWidth:{0:0,1:Ie(1),2:Ie(2),3:Ie(3),4:Ie(4),5:Ie(5)},borderRadius:{xs:Ie(2),sm:Ie(4),md:Ie(8),lg:Ie(12),xl:Ie(16),xxl:Ie(24),section:Ie(160)}},{info:om,dark:cm}=ba,Qo={html:{scrollBehavior:"smooth"},"*, *::before, *::after":{margin:0,padding:0},"a, a:link, a:visited":{textDecoration:"none !important"},"a.link, .link, a.link:link, .link:link, a.link:visited, .link:visited":{color:`${cm.main} !important`,transition:"color 150ms ease-in !important"},"a.link:hover, .link:hover, a.link:focus, .link:focus":{color:`${om.main} !important`}};function ps(r,s,n=310){return`linear-gradient(${n}deg, ${r}, ${s})`}const{white:dm}=ba,{borderRadius:um}=Ja,Xo={styleOverrides:{root:{width:Ie(250),whiteSpace:"nowrap",border:"none"},paper:{width:Ie(250),backgroundColor:cs(dm.main,.8),backdropFilter:`saturate(200%) blur(${Ie(30)})`,height:`calc(100vh - ${Ie(32)})`,margin:Ie(16),borderRadius:um.xl,border:"none"},paperAnchorDockedLeft:{borderRight:"none"}}},Zo={styleOverrides:{padding:{paddingTop:0,paddingBottom:0}}},ec={defaultProps:{disableGutters:!0},styleOverrides:{root:{paddingTop:0,paddingBottom:0}}},ac={styleOverrides:{root:{marginTop:0,marginBottom:0}}},{black:hm,white:mm}=ba,{borderWidth:xm,borderRadius:pm}=Ja,{xxl:gm}=Cs,sc={styleOverrides:{root:{display:"flex",flexDirection:"column",position:"relative",minWidth:0,wordWrap:"break-word",backgroundColor:mm.main,backgroundClip:"border-box",border:`${xm[0]} solid ${cs(hm.main,.125)}`,borderRadius:pm.xl,boxShadow:gm}}},{borderRadius:fm}=Ja,tc={styleOverrides:{root:{borderRadius:fm.xl,margin:`${Ie(16)} ${Ie(16)} 0`},media:{width:"auto"}}},rc={styleOverrides:{root:{marginTop:0,marginBottom:0,padding:`${Ie(8)} ${Ie(24)} ${Ie(24)}`}}},{fontWeightBold:jm,size:km}=us,{borderRadius:bm}=Ja,_m={display:"inline-flex",justifyContent:"center",alignItems:"center",fontSize:km.xs,fontWeight:jm,borderRadius:bm.md,padding:`${Ie(12)} ${Ie(24)}`,lineHeight:1.4,textAlign:"center",textTransform:"uppercase",userSelect:"none",backgroundSize:"150% !important",backgroundPositionX:"25% !important",transition:"all 150ms ease-in","&:hover":{transform:"scale(1.02)"},"&:disabled":{pointerEvent:"none",opacity:.65},"& .material-icons":{fontSize:Ie(15),marginTop:Ie(-2)}},{white:kl,text:ym,info:ci,secondary:di}=ba,{size:bl}=us,{buttonBoxShadow:Ot}=Cs,Dr={base:{backgroundColor:kl.main,minHeight:Ie(40),color:ym.main,boxShadow:Ot.main,padding:`${Ie(12)} ${Ie(24)}`,"&:hover":{backgroundColor:kl.main,boxShadow:Ot.stateOf},"&:focus":{boxShadow:Ot.stateOf},"&:active, &:active:focus, &:active:hover":{opacity:.85,boxShadow:Ot.stateOf},"&:disabled":{boxShadow:Ot.main},"& .material-icon, .material-icons-round, svg":{fontSize:`${Ie(16)} !important`}},small:{minHeight:Ie(32),padding:`${Ie(8)} ${Ie(32)}`,fontSize:bl.xs,"& .material-icon, .material-icons-round, svg":{fontSize:`${Ie(12)} !important`}},large:{minHeight:Ie(47),padding:`${Ie(14)} ${Ie(64)}`,fontSize:bl.sm,"& .material-icon, .material-icons-round, svg":{fontSize:`${Ie(22)} !important`}},primary:{backgroundColor:ci.main,"&:hover":{backgroundColor:ci.main},"&:focus:not(:hover)":{backgroundColor:ci.focus,boxShadow:Ot.stateOfNotHover}},secondary:{backgroundColor:di.main,"&:hover":{backgroundColor:di.main},"&:focus:not(:hover)":{backgroundColor:di.focus,boxShadow:Ot.stateOfNotHover}}},{transparent:Ir,light:_l,info:Nm,secondary:wm}=ba,{size:yl}=us,{buttonBoxShadow:ui}=Cs,Ar={base:{minHeight:Ie(42),color:_l.main,borderColor:_l.main,padding:`${Ie(12)} ${Ie(24)}`,"&:hover":{opacity:.75,backgroundColor:Ir.main},"&:focus:not(:hover)":{boxShadow:ui.stateOfNotHover},"& .material-icon, .material-icons-round, svg":{fontSize:`${Ie(16)} !important`}},small:{minHeight:Ie(34),padding:`${Ie(8)} ${Ie(32)}`,fontSize:yl.xs,"& .material-icon, .material-icons-round, svg":{fontSize:`${Ie(12)} !important`}},large:{minHeight:Ie(49),padding:`${Ie(14)} ${Ie(64)}`,fontSize:yl.sm,"& .material-icon, .material-icons-round, svg":{fontSize:`${Ie(22)} !important`}},primary:{backgroundColor:Ir.main,borderColor:Nm.main,"&:hover":{backgroundColor:Ir.main},"&:focus:not(:hover)":{boxShadow:ui.stateOfNotHover}},secondary:{backgroundColor:Ir.main,borderColor:wm.main,"&:hover":{backgroundColor:Ir.main},"&:focus:not(:hover)":{boxShadow:ui.stateOfNotHover}}},{transparent:ft,info:ar,secondary:hi,grey:Sm}=ba,{size:Nl}=us,Or={base:{backgroundColor:ft.main,height:"max-content",color:ar.main,boxShadow:"none",padding:`${Ie(6)} ${Ie(12)}`,"&:hover":{backgroundColor:ft.main,boxShadow:"none",color:ar.focus},"&:focus":{boxShadow:"none",color:ar.focus},"&:active, &:active:focus, &:active:hover":{opacity:.85,boxShadow:"none"},"&:disabled":{color:Sm[600],boxShadow:"none"},"& .material-icons, .material-icons-round, svg, span":{fontSize:`${Ie(16)} !important`}},small:{fontSize:Nl.xs,"& .material-icons, .material-icons-round, svg, span":{fontSize:`${Ie(12)} !important`}},large:{fontSize:Nl.sm,"& .material-icons, .material-icons-round, svg, span":{fontSize:`${Ie(22)} !important`}},primary:{color:ar.main,backgroundColor:ft.main,"&:hover":{color:ar.focus,backgroundColor:ft.main},"&:focus:not(:hover)":{color:ar.focus,backgroundColor:ft.focus,boxShadow:"none"}},secondary:{color:hi.focus,backgroundColor:ft.main,"&:hover":{color:hi.focus,backgroundColor:ft.main},"&:focus:not(:hover)":{color:hi.focus,backgroundColor:ft.focus,boxShadow:"none"}}},nc={defaultProps:{disableRipple:!0},styleOverrides:{root:{..._m},contained:{...Dr.base},containedSizeSmall:{...Dr.small},containedSizeLarge:{...Dr.large},containedPrimary:{...Dr.primary},containedSecondary:{...Dr.secondary},outlined:{...Ar.base},outlinedSizeSmall:{...Ar.small},outlinedSizeLarge:{...Ar.large},outlinedPrimary:{...Ar.primary},outlinedSecondary:{...Ar.secondary},text:{...Or.base},textSizeSmall:{...Or.small},textSizeLarge:{...Or.large},textPrimary:{...Or.primary},textSecondary:{...Or.secondary}}},{transparent:vm}=ba,ic={styleOverrides:{root:{"&:hover":{backgroundColor:vm.main}}}},{dark:Pm,white:Cm,grey:Tm,inputColors:Fm}=ba,{size:Dm,fontWeightRegular:Im}=us,{borderWidth:Am,borderRadius:Om}=Ja,lc={styleOverrides:{root:{display:"grid !important",placeItems:"center !important",width:"100% !important",height:"auto !important",padding:`${Ie(8)} ${Ie(12)}`,fontSize:`${Dm.sm} !important`,fontWeight:`${Im} !important`,lineHeight:"1.4 !important",color:`${Tm[700]} !important`,backgroundColor:`${Cm.main} !important`,backgroundClip:"padding-box !important",border:`${Am[1]} solid ${Fm.borderColor.main}`,appearance:"none !important",borderRadius:Om.md,transition:"box-shadow 150ms ease, border-color 150ms ease, padding 150ms ease !important"},input:{width:"100% !important",height:`${Ie(22)}`,padding:"0 !important","&::-webkit-input-placeholder":{color:`${Pm.main} !important`}}}},{lg:Bm}=Cs,{size:Lm}=us,{text:$m,white:Rm}=ba,{borderRadius:Em}=Ja,oc={defaultProps:{disableAutoFocusItem:!0},styleOverrides:{paper:{minWidth:Ie(160),boxShadow:Bm,padding:`${Ie(16)} ${Ie(8)}`,fontSize:Lm.sm,color:$m.main,textAlign:"left",backgroundColor:`${Rm.main} !important`,borderRadius:Em.md}}},{light:Mm,text:Km,dark:zm}=ba,{borderRadius:Um}=Ja,{size:Vm}=us,cc={styleOverrides:{root:{minWidth:Ie(160),minHeight:"unset",padding:`${Ie(4.8)} ${Ie(16)}`,borderRadius:Um.md,fontSize:Vm.sm,color:Km.main,transition:"background-color 300ms ease, color 300ms ease","&:hover, &:focus, &.Mui-selected, &.Mui-selected:hover, &.Mui-selected:focus":{backgroundColor:Mm.main,color:zm.main}}}},{white:qm,light:Hm,gradients:Br}=ba,{borderWidth:Gm}=Ja,{md:Wm}=Cs,dc={defaultProps:{disableRipple:!0},styleOverrides:{root:{width:Ie(40),height:Ie(20),margin:`${Ie(4)} 0`,padding:0,borderRadius:Ie(160),transition:"transform 250ms ease-in"},switchBase:{padding:0,top:"50%",transform:`translate(${Ie(2)}, -50%)`,transition:"transform 250ms ease-in-out","&.Mui-checked":{transform:`translate(${Ie(22)}, -50%)`,"& + .MuiSwitch-track":{backgroundColor:`${cs(Br.dark.state,.95)} !important`,borderColor:`${cs(Br.dark.state,.95)} !important`,opacity:1}},"&.Mui-disabled + .MuiSwitch-track":{opacity:"0.3 !important"},"&.Mui-focusVisible .MuiSwitch-thumb":{backgroundImage:ps(Br.info.main,Br.info.state)}},thumb:{width:Ie(16),height:Ie(16),backgroundColor:qm.main,boxShadow:Wm,top:"50%"},track:{backgroundColor:cs(Br.dark.state,.1),border:`${Gm[1]} solid ${Hm.main}`,borderRadius:Ie(160),opacity:1,transition:"background-color 250ms ease, border-color 200ms ease"},checked:{}}},{dark:sr,transparent:mi,white:tr}=ba,uc={styleOverrides:{root:{backgroundColor:mi.main,backgroundImage:`linear-gradient(to right, ${cs(sr.main,0)}, ${cs(sr.main,.5)}, ${cs(sr.main,0)}) !important`,height:Ie(1),margin:`${Ie(16)} 0`,borderBottom:"none",opacity:.25},vertical:{backgroundColor:mi.main,backgroundImage:`linear-gradient(to bottom, ${cs(sr.main,0)}, ${cs(sr.main,.5)}, ${cs(sr.main,0)}) !important`,width:Ie(1),height:"100%",margin:`0 ${Ie(16)}`,borderRight:"none"},light:{backgroundColor:mi.main,backgroundImage:`linear-gradient(to right, ${cs(tr.main,0)}, ${cs(tr.main,.5)}, ${cs(tr.main,0)}) !important`,"&.MuiDivider-vertical":{backgroundImage:`linear-gradient(to bottom, ${cs(tr.main,0)}, ${cs(tr.main,.5)}, ${cs(tr.main,0)}) !important`}}}},{white:Jm}=ba,{xxl:Ym}=Cs,{borderRadius:Qm}=Ja,hc={styleOverrides:{root:{backgroundColor:Jm.main,boxShadow:Ym,borderRadius:Qm.xl}}},{borderRadius:wl}=Ja,mc={styleOverrides:{root:{display:"block",padding:`${Ie(16)} ${Ie(16)} 0  ${Ie(16)}`,borderRadius:`${wl.xl} ${wl.xl} 0 0`}}},{borderWidth:Xm}=Ja,{light:Zm}=ba,xc={styleOverrides:{root:{padding:`${Ie(12)} ${Ie(16)}`,borderBottom:`${Xm[1]} solid ${Zm.main}`}}},{borderRadius:Sl}=Ja,{light:vl}=ba,pc={styleOverrides:{root:{height:Ie(3),borderRadius:Sl.md,overflow:"visible",position:"relative"},colorPrimary:{backgroundColor:vl.main},colorSecondary:{backgroundColor:vl.main},bar:{height:Ie(6),borderRadius:Sl.sm,position:"absolute",transform:`translate(0, ${Ie(-1.5)}) !important`,transition:"width 0.6s ease !important"}}},{grey:ex}=ba,{size:ax}=us,gc={styleOverrides:{li:{lineHeight:0},separator:{fontSize:ax.sm,color:ex[600]}}},{light:sx,white:tx,sliderColors:rx,black:nx,gradients:Pl}=ba,{borderRadius:Cl,borderWidth:ix}=Ja,{sliderBoxShadow:lx}=Cs,fc={styleOverrides:{root:{width:"100%","& .MuiSlider-active, & .Mui-focusVisible":{boxShadow:"none !important"},"& .MuiSlider-valueLabel":{color:nx.main}},rail:{height:Ie(3),backgroundColor:sx.main,borderRadius:Cl.sm},track:{backgroundImage:ps(Pl.info.main,Pl.info.state),height:Ie(6),position:"relative",top:Ie(2),border:"none",borderRadius:Cl.lg,zIndex:1},thumb:{width:Ie(15),height:Ie(15),backgroundColor:tx.main,zIndex:10,boxShadow:lx.thumb,border:`${ix[1]} solid ${rx.thumb.borderColor}`,"&:hover":{boxShadow:"none"}}}},{borderRadius:ox}=Ja,jc={styleOverrides:{root:{transition:"all 200ms ease-in-out"},rounded:{borderRadius:ox.lg},img:{height:"auto"}}},{black:Tl,light:cx}=ba,{size:dx,fontWeightRegular:ux}=us,{borderRadius:hx}=Ja,kc={defaultProps:{arrow:!0,TransitionComponent:yo},styleOverrides:{tooltip:{maxWidth:Ie(200),backgroundColor:Tl.main,color:cx.main,fontSize:dx.sm,fontWeight:ux,textAlign:"center",borderRadius:hx.md,opacity:.7,padding:`${Ie(5)} ${Ie(8)} ${Ie(4)}`},arrow:{color:Tl.main}}},bc={defaultProps:{color:"transparent"},styleOverrides:{root:{boxShadow:"none"}}},{grey:mx,white:xx}=ba,{borderRadius:Fl}=Ja,{tabsBoxShadow:px}=Cs,_c={styleOverrides:{root:{position:"relative",backgroundColor:mx[100],borderRadius:Fl.lg,minHeight:"unset",padding:Ie(4)},flexContainer:{height:"100%",position:"relative",zIndex:10},fixed:{overflow:"unset !important",overflowX:"unset !important"},vertical:{"& .MuiTabs-indicator":{width:"100%"}},indicator:{height:"100%",borderRadius:Fl.md,backgroundColor:xx.main,boxShadow:px.indicator,transition:"all 500ms ease"}}},{size:gx,fontWeightRegular:fx}=us,{borderRadius:jx}=Ja,{dark:kx}=ba,yc={styleOverrides:{root:{display:"flex",alignItems:"center",flexDirection:"row",flex:"1 1 auto",textAlign:"center",maxWidth:"unset !important",minWidth:"unset !important",minHeight:"unset !important",fontSize:gx.md,fontWeight:fx,textTransform:"none",lineHeight:"inherit",padding:Ie(4),borderRadius:jx.md,color:`${kx.main} !important`,opacity:"1 !important","& .material-icons, .material-icons-round":{marginBottom:"0 !important",marginRight:Ie(4)},"& svg":{marginBottom:"0 !important",marginRight:Ie(6)}},labelIcon:{paddingTop:Ie(4)}}},{transparent:bx}=ba,Nc={styleOverrides:{root:{margin:`${Ie(48)} 0`,padding:`0 ${Ie(12)}`,"&.MuiPaper-root":{backgroundColor:bx.main}}}},wc={styleOverrides:{root:{padding:`0 ${Ie(6)}`}}},{dark:Dl}=ba,{borderWidth:_x,borderColor:yx}=Ja,Sc={styleOverrides:{root:{color:yx,transition:"all 200ms linear","&.Mui-active":{color:Dl.main},"&.Mui-completed":{color:Dl.main}},alternativeLabel:{top:"14%",left:"-50%",right:"50%"},line:{borderWidth:`${_x[2]} !important`,borderColor:"currentColor"}}},{size:Nx,fontWeightRegular:xi}=us,{grey:wx,dark:Sx,secondary:vx}=ba,vc={styleOverrides:{label:{marginTop:`${Ie(8)} !important`,fontWeight:xi,fontSize:Nx.md,color:wx[300],"&.Mui-active":{fontWeight:`${xi} !important`,color:`${Sx.main} !important`},"&.Mui-completed":{fontWeight:`${xi} !important`,color:`${vx.main} !important`}}}},{dark:st,white:pi}=ba,{borderWidth:Px,borderColor:Cx}=Ja,Pc={styleOverrides:{root:{background:pi.main,fill:pi.main,stroke:pi.main,strokeWidth:Ie(10),width:Ie(13),height:Ie(13),border:`${Px[2]} solid ${Cx}`,borderRadius:"50%",zIndex:99,transition:"all 200ms linear","&.Mui-active":{background:st.main,fill:st.main,stroke:st.main,borderColor:st.main,boxShadow:as([0,0],[0,2],st.main,1)},"&.Mui-completed":{background:st.main,fill:st.main,stroke:st.main,borderColor:st.main,boxShadow:as([0,0],[0,2],st.main,1)}}}},{transparent:Tx}=ba,Cc={styleOverrides:{select:{display:"grid",alignItems:"center",padding:`0 ${Ie(12)} !important`,"& .Mui-selected":{backgroundColor:Tx.main}},selectMenu:{background:"none",height:"none",minHeight:"none",overflow:"unset"},icon:{display:"none"}}},{dark:Il}=ba,{size:Fx,fontWeightBold:Dx}=us,Tc={styleOverrides:{root:{display:"block",minHeight:Ie(24),marginBottom:Ie(2)},label:{display:"inline-block",fontSize:Fx.sm,fontWeight:Dx,color:Il.main,lineHeight:1,transform:`translateY(${Ie(1)})`,marginLeft:Ie(4),"&.Mui-disabled":{color:Il.main}}}},{dark:Ix}=ba,Fc={styleOverrides:{root:{color:Ix.main}}},{borderWidth:Al,borderColor:Ax}=Ja,{transparent:Bt,gradients:rr,info:Ox}=ba,Dc={styleOverrides:{root:{backgroundPosition:"center",backgroundSize:"contain",backgroundRepeat:"no-repeat",width:Ie(20),height:Ie(20),marginRight:Ie(6),padding:0,color:Bt.main,border:`${Al[1]} solid ${Ax}`,borderRadius:Ie(5.6),transition:"all 250ms ease","&:hover":{backgroundColor:Bt.main},"& .MuiSvgIcon-root":{fill:Bt.main},"&.Mui-focusVisible":{border:`${Al[2]} solid ${Ox.main} !important`}},colorPrimary:{backgroundColor:Bt.main,"&.Mui-checked":{backgroundImage:`url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 -1 22 22'%3e%3cpath fill='none' stroke='%23fff' stroke-linecap='round' stroke-linejoin='round' stroke-width='2.5' d='M6 10l3 3l6-6'/%3e%3c/svg%3e"), ${ps(rr.dark.main,rr.dark.state)}`,borderColor:rr.dark.main},"&:hover":{backgroundColor:Bt.main}},colorSecondary:{backgroundColor:Bt.main,"&.Mui-checked":{backgroundImage:`url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 -1 22 22'%3e%3cpath fill='none' stroke='%23fff' stroke-linecap='round' stroke-linejoin='round' stroke-width='2.5' d='M6 10l3 3l6-6'/%3e%3c/svg%3e"), ${ps(rr.dark.main,rr.dark.state)}`,borderColor:rr.dark.main},"&:hover":{backgroundColor:Bt.main}}}},{borderWidth:Ol,borderColor:Bx}=Ja,{transparent:Lt,gradients:nr,info:Lx}=ba,Ic={styleOverrides:{root:{backgroundPosition:"center",backgroundSize:"contain",backgroundRepeat:"no-repeat",width:Ie(20),height:Ie(20),marginRight:Ie(6),padding:0,color:Lt.main,border:`${Ol[1]} solid ${Bx}`,borderRadius:"50%",transition:"all 250ms ease","&:hover":{backgroundColor:Lt.main},"& .MuiSvgIcon-root":{fill:Lt.main},"&.Mui-focusVisible":{border:`${Ol[2]} solid ${Lx.main} !important`}},colorPrimary:{backgroundColor:Lt.main,"&.Mui-checked":{backgroundImage:`url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' height='15px' width='15px'%3E%3Ccircle cx='50%' cy='50%' r='3' fill='%23fff' /%3E%3C/svg%3E"), ${ps(nr.dark.main,nr.dark.state)}`,borderColor:nr.dark.main},"&:hover":{backgroundColor:Lt.main}},colorSecondary:{backgroundColor:Lt.main,"&.Mui-checked":{backgroundImage:`url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' height='15px' width='15px'%3E%3Ccircle cx='50%' cy='50%' r='3' fill='%23fff' /%3E%3C/svg%3E"), ${ps(nr.dark.main,nr.dark.state)}`,borderColor:nr.dark.main},"&:hover":{backgroundColor:Lt.main}}}},{lg:$x}=Cs,{size:mn}=us,{text:xn,white:gi,transparent:Rx,light:Bl,dark:fi,gradients:Ex}=ba,{borderRadius:Ll}=Ja,Ac={styleOverrides:{popper:{boxShadow:$x,padding:Ie(8),fontSize:mn.sm,color:xn.main,textAlign:"left",backgroundColor:`${gi.main} !important`,borderRadius:Ll.md},paper:{boxShadow:"none",backgroundColor:Rx.main},option:{padding:`${Ie(4.8)} ${Ie(16)}`,borderRadius:Ll.md,fontSize:mn.sm,color:xn.main,transition:"background-color 300ms ease, color 300ms ease","&:hover, &:focus, &.Mui-selected, &.Mui-selected:hover, &.Mui-selected:focus":{backgroundColor:Bl.main,color:fi.main},'&[aria-selected="true"]':{backgroundColor:`${Bl.main} !important`,color:`${fi.main} !important`}},noOptions:{fontSize:mn.sm,color:xn.main},groupLabel:{color:fi.main},loading:{fontSize:mn.sm,color:xn.main},tag:{display:"flex",alignItems:"center",height:"auto",padding:Ie(4),backgroundColor:Ex.dark.state,color:gi.main,"& .MuiChip-label":{lineHeight:1.2,padding:`0 ${Ie(10)} 0 ${Ie(4)}`},"& .MuiSvgIcon-root, & .MuiSvgIcon-root:hover, & .MuiSvgIcon-root:focus":{color:gi.main,marginRight:0}}}},{inputColors:Mx}=ba,{borderWidth:Kx,borderRadius:zx}=Ja,gr={styleOverrides:{root:{display:"flex !important",padding:`${Ie(8)} ${Ie(28)} ${Ie(8)} ${Ie(12)} !important`,border:`${Kx[1]} solid ${Mx.borderColor.main}`,borderRadius:`${zx.md} !important`,"& fieldset":{border:"none"}},input:{height:Ie(22),width:"max-content !important"},inputSizeSmall:{height:Ie(14)}}},{info:Lr,white:$l,gradients:Ux}=ba,Oc={".flatpickr-day:hover, .flatpickr-day:focus, .flatpickr-day.nextMonthDay:hover, .flatpickr-day.nextMonthDay:focus":{background:cs(Lr.main,.28),border:"none"},".flatpickr-day.today":{background:Lr.main,color:$l.main,border:"none","&:hover, &:focus":{background:`${Lr.focus} !important`}},".flatpickr-day.selected, .flatpickr-day.selected:hover, .flatpickr-day.nextMonthDay.selected, .flatpickr-day.nextMonthDay.selected:hover, .flatpickr-day.nextMonthDay.selected:focus":{background:`${Ux.info.state} !important`,color:$l.main,border:"none"},".flatpickr-months .flatpickr-next-month:hover svg, .flatpickr-months .flatpickr-prev-month:hover svg":{color:`${Lr.main} !important`,fill:`${Lr.main} !important`}},{borderRadius:ji}=Ja,{fontWeightMedium:Vx,fontWeightBold:qx,size:Rl}=us,{gradients:hs,transparent:Hx,white:Gx}=ba,{buttonBoxShadow:El}=Cs,Bc={".swal2-container":{zIndex:"9999 !important"},".swal2-popup":{borderRadius:`${ji.xl} !important`,"& .button, & .swal2-confirm":{fontSize:`${Rl.xs} !important`,fontWeight:qx,borderRadius:`${ji.md} !important`,padding:`${Ie(12)} ${Ie(24)}`,margin:Ie(3.75),textAlign:"center",textTransform:"uppercase",userSelect:"none",backgroundSize:"150% !important",backgroundPositionX:"25% !important",transition:"all 150ms ease-in",backgroundImage:`${ps(hs.info.main,hs.info.state)} !important`,backgroundColor:Hx.main,color:Gx.main,height:Ie(40),boxShadow:`${El.main} !important`,border:"none",cursor:"pointer","&:hover, &:focus, &:active":{backgroundImage:`${ps(hs.info.main,hs.info.state)} !important`,boxShadow:`${El.stateOf} !important`},"& .material-icons-round":{fontSize:Rl.sm,marginRight:Ie(4),verticalAlign:"middle"}},"& .button.button-success":{backgroundImage:`${ps(hs.success.main,hs.success.state)} !important`,"&:hover, &:focus, &:active":{backgroundImage:`${ps(hs.success.main,hs.success.state)} !important`}},"& .button.button-error":{backgroundImage:`${ps(hs.error.main,hs.error.state)} !important`,"&:hover, &:focus, &:active":{backgroundImage:`${ps(hs.error.main,hs.error.state)} !important`}},"& .button.button-warning":{backgroundImage:`${ps(hs.warning.main,hs.warning.state)} !important`,"&:hover, &:focus, &:active":{backgroundImage:`${ps(hs.warning.main,hs.warning.state)} !important`}},"& .button.button-secondary":{backgroundImage:`${ps(hs.secondary.main,hs.secondary.state)} !important`,"&:hover, &:focus, &:active":{backgroundImage:`${ps(hs.secondary.main,hs.secondary.state)} !important`}},"& .button-flex":{display:"inline-flex !important",alignItems:"center"},"& a, a:visited":{color:"#545454",textDecoration:"none"},"& .swal2-image":{borderRadius:ji.xl,marginBottom:0},"& .swal2-title":{fontWeight:Vx}}},{values:{sm:Wx,md:Jx,lg:Yx,xl:Qx,xxl:Xx}}=Wn,Zx=`@media (min-width: ${Wx}px)`,ep=`@media (min-width: ${Jx}px)`,ap=`@media (min-width: ${Yx}px)`,sp=`@media (min-width: ${Qx}px)`,tp=`@media (min-width: ${Xx}px)`,$r={paddingRight:`${Ie(24)} !important`,paddingLeft:`${Ie(24)} !important`,marginRight:"auto !important",marginLeft:"auto !important",width:"100% !important",position:"relative"},Lc={[Zx]:{".MuiContainer-root":{...$r,maxWidth:"540px !important"}},[ep]:{".MuiContainer-root":{...$r,maxWidth:"720px !important"}},[ap]:{".MuiContainer-root":{...$r,maxWidth:"960px !important"}},[sp]:{".MuiContainer-root":{...$r,maxWidth:"1140px !important"}},[tp]:{".MuiContainer-root":{...$r,maxWidth:"1320px !important"}}},{transparent:rp}=ba,{lg:np}=Cs,{borderRadius:ip}=Ja,$c={styleOverrides:{paper:{backgroundColor:rp.main,boxShadow:np,padding:Ie(8),borderRadius:ip.lg}}},Rc={defaultProps:{disableRipple:!0}},Ec={defaultProps:{baseClassName:"material-icons-round",fontSize:"inherit"},styleOverrides:{fontSizeInherit:{fontSize:"inherit !important"},fontSizeSmall:{fontSize:`${Ie(20)} !important`},fontSizeLarge:{fontSize:`${Ie(36)} !important`}}},Mc={defaultProps:{fontSize:"inherit"},styleOverrides:{fontSizeInherit:{fontSize:"inherit !important"},fontSizeSmall:{fontSize:`${Ie(20)} !important`},fontSizeLarge:{fontSize:`${Ie(36)} !important`}}},Kc={defaultProps:{underline:"none",color:"inherit"}},{borderRadius:lp}=Ja,{xxl:op}=Cs,zc={styleOverrides:{paper:{borderRadius:lp.lg,boxShadow:op},paperFullScreen:{borderRadius:0}}},{size:cp}=us,Uc={styleOverrides:{root:{padding:Ie(16),fontSize:cp.xl}}},{size:dp}=us,{text:up}=ba,{borderWidth:Ml,borderColor:Kl}=Ja,Vc={styleOverrides:{root:{padding:Ie(16),fontSize:dp.md,color:up.main},dividers:{borderTop:`${Ml[1]} solid ${Kl}`,borderBottom:`${Ml[1]} solid ${Kl}`}}},{size:hp}=us,{text:mp}=ba,qc={styleOverrides:{root:{fontSize:hp.md,color:mp.main}}},Hc={styleOverrides:{root:{padding:Ie(16)}}},xp=No({breakpoints:{...Wn},palette:{...ba},typography:{...us},boxShadows:{...Cs},borders:{...Ja},functions:{boxShadow:as,hexToRgb:al,linearGradient:ps,pxToRem:Ie,rgba:cs},components:{MuiCssBaseline:{styleOverrides:{...Qo,...Oc,...Bc,...Lc}},MuiDrawer:{...Xo},MuiList:{...Zo},MuiListItem:{...ec},MuiListItemText:{...ac},MuiCard:{...sc},MuiCardMedia:{...tc},MuiCardContent:{...rc},MuiButton:{...nc},MuiIconButton:{...ic},MuiInputBase:{...lc},MuiMenu:{...oc},MuiMenuItem:{...cc},MuiSwitch:{...dc},MuiDivider:{...uc},MuiTableContainer:{...hc},MuiTableHead:{...mc},MuiTableCell:{...xc},MuiLinearProgress:{...pc},MuiBreadcrumbs:{...gc},MuiSlider:{...fc},MuiAvatar:{...jc},MuiTooltip:{...kc},MuiAppBar:{...bc},MuiTabs:{..._c},MuiTab:{...yc},MuiStepper:{...Nc},MuiStep:{...wc},MuiStepConnector:{...Sc},MuiStepLabel:{...vc},MuiStepIcon:{...Pc},MuiSelect:{...Cc},MuiFormControlLabel:{...Tc},MuiFormLabel:{...Fc},MuiCheckbox:{...Dc},MuiRadio:{...Ic},MuiAutocomplete:{...Ac},MuiInput:{...gr},MuiOutlinedInput:{...gr},MuiFilledInput:{...gr},MuiPopover:{...$c},MuiButtonBase:{...Rc},MuiIcon:{...Ec},MuiSvgIcon:{...Mc},MuiLink:{...Kc},MuiDialog:{...zc},MuiDialogTitle:{...Uc},MuiDialogContent:{...Vc},MuiDialogContentText:{...qc},MuiDialogActions:{...Hc}}}),pp=No({direction:"rtl",breakpoints:{...Wn},palette:{...ba},typography:{...us},boxShadows:{...Cs},borders:{...Ja},functions:{boxShadow:as,hexToRgb:al,linearGradient:ps,pxToRem:Ie,rgba:cs},components:{MuiCssBaseline:{styleOverrides:{...Qo,...Oc,...Bc,...Lc}},MuiDrawer:{...Xo},MuiList:{...Zo},MuiListItem:{...ec},MuiListItemText:{...ac},MuiCard:{...sc},MuiCardMedia:{...tc},MuiCardContent:{...rc},MuiButton:{...nc},MuiIconButton:{...ic},MuiInputBase:{...lc},MuiMenu:{...oc},MuiMenuItem:{...cc},MuiSwitch:{...dc},MuiDivider:{...uc},MuiTableContainer:{...hc},MuiTableHead:{...mc},MuiTableCell:{...xc},MuiLinearProgress:{...pc},MuiBreadcrumbs:{...gc},MuiSlider:{...fc},MuiAvatar:{...jc},MuiTooltip:{...kc},MuiAppBar:{...bc},MuiTabs:{..._c},MuiTab:{...yc},MuiStepper:{...Nc},MuiStep:{...wc},MuiStepConnector:{...Sc},MuiStepLabel:{...vc},MuiStepIcon:{...Pc},MuiSelect:{...Cc},MuiFormControlLabel:{...Tc},MuiFormLabel:{...Fc},MuiCheckbox:{...Dc},MuiRadio:{...Ic},MuiAutocomplete:{...Ac},MuiInput:{...gr},MuiOutlinedInput:{...gr},MuiFilledInput:{...gr},MuiPopover:{...$c},MuiButtonBase:{...Rc},MuiIcon:{...Ec},MuiSvgIcon:{...Mc},MuiLink:{...Kc},MuiDialog:{...zc},MuiDialogTitle:{...Uc},MuiDialogContent:{...Vc},MuiDialogContentText:{...qc},MuiDialogActions:{...Hc}}});Z.string.isRequired,Z.oneOfType([Z.func,Z.bool]),Z.oneOfType([Z.func,Z.bool]),Z.node,Z.bool,Z.bool;Z.oneOf(["primary","secondary","info","success","warning","error","dark"]),Z.node.isRequired,Z.string.isRequired;Z.oneOfType([Z.bool,Z.object]).isRequired,Z.oneOfType([Z.func,Z.bool,Z.object]).isRequired,Z.string,Z.node.isRequired,Z.objectOf(Z.oneOfType([Z.string,Z.number]));Z.arrayOf(Z.object).isRequired,Z.oneOfType([Z.bool,Z.object]),Z.oneOfType([Z.bool,Z.func]),Z.bool;Z.arrayOf(Z.object).isRequired,Z.oneOfType([Z.bool,Z.object]),Z.oneOfType([Z.bool,Z.func]),Z.bool;Z.arrayOf(Z.object).isRequired,Z.oneOfType([Z.bool,Z.object]),Z.oneOfType([Z.bool,Z.func]),Z.bool;Z.arrayOf(Z.object).isRequired,Z.oneOfType([Z.bool,Z.object]),Z.oneOfType([Z.bool,Z.func]),Z.bool;Z.arrayOf(Z.object).isRequired,Z.oneOfType([Z.bool,Z.object]),Z.oneOfType([Z.bool,Z.func]),Z.bool;Z.arrayOf(Z.object).isRequired,Z.oneOfType([Z.bool,Z.object]).isRequired,Z.oneOfType([Z.func,Z.bool,Z.object]).isRequired;Z.arrayOf(Z.object).isRequired,Z.bool,Z.bool,Z.oneOfType([Z.bool,Z.shape({type:Z.oneOf(["external","internal"]).isRequired,route:Z.string.isRequired,color:Z.oneOf(["primary","secondary","info","success","warning","error","dark","light"]),label:Z.string.isRequired})]);Z.oneOf(["white","light","default"]),Z.node.isRequired;function Gc({color:r,size:s}){return e.jsxs("svg",{width:s,height:s,viewBox:"0 0 45 40",version:"1.1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",children:[e.jsx("title",{children:"shop"}),e.jsx("g",{id:"Basic-Elements",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",children:e.jsx("g",{id:"Rounded-Icons",transform:"translate(-1716.000000, -439.000000)",fill:ba[r]?ba[r].main:ba.dark.main,fillRule:"nonzero",children:e.jsx("g",{id:"Icons-with-opacity",transform:"translate(1716.000000, 291.000000)",children:e.jsxs("g",{id:"shop-",transform:"translate(0.000000, 148.000000)",children:[e.jsx("path",{d:"M46.7199583,10.7414583 L40.8449583,0.949791667 C40.4909749,0.360605034 39.8540131,0 39.1666667,0 L7.83333333,0 C7.1459869,0 6.50902508,0.360605034 6.15504167,0.949791667 L0.280041667,10.7414583 C0.0969176761,11.0460037 -1.23209662e-05,11.3946378 -1.23209662e-05,11.75 C-0.00758042603,16.0663731 3.48367543,19.5725301 7.80004167,19.5833333 L7.81570833,19.5833333 C9.75003686,19.5882688 11.6168794,18.8726691 13.0522917,17.5760417 C16.0171492,20.2556967 20.5292675,20.2556967 23.494125,17.5760417 C26.4604562,20.2616016 30.9794188,20.2616016 33.94575,17.5760417 C36.2421905,19.6477597 39.5441143,20.1708521 42.3684437,18.9103691 C45.1927731,17.649886 47.0084685,14.8428276 47.0000295,11.75 C47.0000295,11.3946378 46.9030823,11.0460037 46.7199583,10.7414583 Z",id:"Path",opacity:"0.598981585"}),e.jsx("path",{d:"M39.198,22.4912623 C37.3776246,22.4928106 35.5817531,22.0149171 33.951625,21.0951667 L33.92225,21.1107282 C31.1430221,22.6838032 27.9255001,22.9318916 24.9844167,21.7998837 C24.4750389,21.605469 23.9777983,21.3722567 23.4960833,21.1018359 L23.4745417,21.1129513 C20.6961809,22.6871153 17.4786145,22.9344611 14.5386667,21.7998837 C14.029926,21.6054643 13.533337,21.3722507 13.0522917,21.1018359 C11.4250962,22.0190609 9.63246555,22.4947009 7.81570833,22.4912623 C7.16510551,22.4842162 6.51607673,22.4173045 5.875,22.2911849 L5.875,44.7220845 C5.875,45.9498589 6.7517757,46.9451667 7.83333333,46.9451667 L19.5833333,46.9451667 L19.5833333,33.6066734 L27.4166667,33.6066734 L27.4166667,46.9451667 L39.1666667,46.9451667 C40.2482243,46.9451667 41.125,45.9498589 41.125,44.7220845 L41.125,22.2822926 C40.4887822,22.4116582 39.8442868,22.4815492 39.198,22.4912623 Z",id:"Path"})]})})})})]})}Gc.defaultProps={color:"dark",size:"16px"};Gc.propTypes={color:Z.oneOf(["primary","secondary","info","success","warning","error","dark","light","white"]),size:Z.oneOfType([Z.number,Z.string])};function Wc({color:r,size:s}){return e.jsxs("svg",{width:s,height:s,viewBox:"0 0 42 42",version:"1.1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",children:[e.jsx("title",{children:"office"}),e.jsx("g",{id:"Basic-Elements",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",children:e.jsx("g",{id:"Rounded-Icons",transform:"translate(-1869.000000, -293.000000)",fill:ba[r]?ba[r].main:ba.dark.main,fillRule:"nonzero",children:e.jsx("g",{id:"Icons-with-opacity",transform:"translate(1716.000000, 291.000000)",children:e.jsxs("g",{id:"office",transform:"translate(153.000000, 2.000000)",children:[e.jsx("path",{d:"M12.25,17.5 L8.75,17.5 L8.75,1.75 C8.75,0.78225 9.53225,0 10.5,0 L31.5,0 C32.46775,0 33.25,0.78225 33.25,1.75 L33.25,12.25 L29.75,12.25 L29.75,3.5 L12.25,3.5 L12.25,17.5 Z",id:"Path",opacity:"0.6"}),e.jsx("path",{d:"M40.25,14 L24.5,14 C23.53225,14 22.75,14.78225 22.75,15.75 L22.75,38.5 L19.25,38.5 L19.25,22.75 C19.25,21.78225 18.46775,21 17.5,21 L1.75,21 C0.78225,21 0,21.78225 0,22.75 L0,40.25 C0,41.21775 0.78225,42 1.75,42 L40.25,42 C41.21775,42 42,41.21775 42,40.25 L42,15.75 C42,14.78225 41.21775,14 40.25,14 Z M12.25,36.75 L7,36.75 L7,33.25 L12.25,33.25 L12.25,36.75 Z M12.25,29.75 L7,29.75 L7,26.25 L12.25,26.25 L12.25,29.75 Z M35,36.75 L29.75,36.75 L29.75,33.25 L35,33.25 L35,36.75 Z M35,29.75 L29.75,29.75 L29.75,26.25 L35,26.25 L35,29.75 Z M35,22.75 L29.75,22.75 L29.75,19.25 L35,19.25 L35,22.75 Z"})]})})})})]})}Wc.defaultProps={color:"dark",size:"16px"};Wc.propTypes={color:Z.oneOf(["primary","secondary","info","success","warning","error","dark","light","white"]),size:Z.oneOfType([Z.number,Z.string])};function gp({color:r="dark",size:s="16px"}){return e.jsxs("svg",{width:s,height:s,viewBox:"0 0 42 42",version:"1.1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",children:[e.jsx("title",{children:"document"}),e.jsx("g",{id:"Basic-Elements",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",children:e.jsx("g",{id:"Rounded-Icons",transform:"translate(-1870.000000, -591.000000)",fill:ba[r]?ba[r].main:ba.dark.main,fillRule:"nonzero",children:e.jsx("g",{id:"Icons-with-opacity",transform:"translate(1716.000000, 291.000000)",children:e.jsxs("g",{id:"document",transform:"translate(154.000000, 300.000000)",children:[e.jsx("path",{d:"M40,40 L36.3636364,40 L36.3636364,3.63636364 L5.45454545,3.63636364 L5.45454545,0 L38.1818182,0 C39.1854545,0 40,0.814545455 40,1.81818182 L40,40 Z",id:"Path",opacity:"0.603585379"}),e.jsx("path",{d:"M30.9090909,7.27272727 L1.81818182,7.27272727 C0.814545455,7.27272727 0,8.08727273 0,9.09090909 L0,41.8181818 C0,42.8218182 0.814545455,43.6363636 1.81818182,43.6363636 L30.9090909,43.6363636 C31.9127273,43.6363636 32.7272727,42.8218182 32.7272727,41.8181818 L32.7272727,9.09090909 C32.7272727,8.08727273 31.9127273,7.27272727 30.9090909,7.27272727 Z M18.1818182,34.5454545 L7.27272727,34.5454545 L7.27272727,30.9090909 L18.1818182,30.9090909 L18.1818182,34.5454545 Z M25.4545455,27.2727273 L7.27272727,27.2727273 L7.27272727,23.6363636 L25.4545455,23.6363636 L25.4545455,27.2727273 Z M25.4545455,20 L7.27272727,20 L7.27272727,16.3636364 L25.4545455,16.3636364 L25.4545455,20 Z",id:"Shape"})]})})})})]})}gp.propTypes={color:Z.oneOf(["primary","secondary","info","success","warning","error","dark","light","white"]),size:Z.oneOfType([Z.number,Z.string])};function Jc({color:r,size:s}){return e.jsxs("svg",{width:s,height:s,viewBox:"0 0 42 42",version:"1.1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",children:[e.jsx("title",{children:"customer-support"}),e.jsx("g",{id:"Basic-Elements",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",children:e.jsx("g",{id:"Rounded-Icons",transform:"translate(-1717.000000, -291.000000)",fill:ba[r]?ba[r].main:ba.dark.main,fillRule:"nonzero",children:e.jsx("g",{id:"Icons-with-opacity",transform:"translate(1716.000000, 291.000000)",children:e.jsxs("g",{id:"customer-support",transform:"translate(1.000000, 0.000000)",children:[e.jsx("path",{className:"color-background",d:"M45,0 L26,0 C25.447,0 25,0.447 25,1 L25,20 C25,20.379 25.214,20.725 25.553,20.895 C25.694,20.965 25.848,21 26,21 C26.212,21 26.424,20.933 26.6,20.8 L34.333,15 L45,15 C45.553,15 46,14.553 46,14 L46,1 C46,0.447 45.553,0 45,0 Z",id:"Path",opacity:"0.59858631"}),e.jsx("path",{d:"M22.883,32.86 C20.761,32.012 17.324,31 13,31 C8.676,31 5.239,32.012 3.116,32.86 C1.224,33.619 0,35.438 0,37.494 L0,41 C0,41.553 0.447,42 1,42 L25,42 C25.553,42 26,41.553 26,41 L26,37.494 C26,35.438 24.776,33.619 22.883,32.86 Z",id:"Path"}),e.jsx("path",{d:"M13,28 C17.432,28 21,22.529 21,18 C21,13.589 17.411,10 13,10 C8.589,10 5,13.589 5,18 C5,22.529 8.568,28 13,28 Z",id:"Path"})]})})})})]})}Jc.defaultProps={color:"dark",size:"16px"};Jc.propTypes={color:Z.oneOf(["primary","secondary","info","success","warning","error","dark","light","white"]),size:Z.oneOfType([Z.number,Z.string])};function Yc({color:r,size:s}){return e.jsx("svg",{width:s,height:s,viewBox:"0 0 42 42",version:"1.1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",children:e.jsx("g",{id:"Basic-Elements",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",children:e.jsx("g",{id:"Rounded-Icons",transform:"translate(-2319.000000, -291.000000)",fill:ba[r]?ba[r].main:ba.dark.main,fillRule:"nonzero",children:e.jsx("g",{id:"Icons-with-opacity",transform:"translate(1716.000000, 291.000000)",children:e.jsxs("g",{id:"box-3d-50",transform:"translate(603.000000, 0.000000)",children:[e.jsx("path",{d:"M22.7597136,19.3090182 L38.8987031,11.2395234 C39.3926816,10.9925342 39.592906,10.3918611 39.3459167,9.89788265 C39.249157,9.70436312 39.0922432,9.5474453 38.8987261,9.45068056 L20.2741875,0.1378125 L20.2741875,0.1378125 C19.905375,-0.04725 19.469625,-0.04725 19.0995,0.1378125 L3.1011696,8.13815822 C2.60720568,8.38517662 2.40701679,8.98586148 2.6540352,9.4798254 C2.75080129,9.67332903 2.90771305,9.83023153 3.10122239,9.9269862 L21.8652864,19.3090182 C22.1468139,19.4497819 22.4781861,19.4497819 22.7597136,19.3090182 Z",id:"Path"}),e.jsx("path",{d:"M23.625,22.429159 L23.625,39.8805372 C23.625,40.4328219 24.0727153,40.8805372 24.625,40.8805372 C24.7802551,40.8805372 24.9333778,40.8443874 25.0722402,40.7749511 L41.2741875,32.673375 L41.2741875,32.673375 C41.719125,32.4515625 42,31.9974375 42,31.5 L42,14.241659 C42,13.6893742 41.5522847,13.241659 41,13.241659 C40.8447549,13.241659 40.6916418,13.2778041 40.5527864,13.3472318 L24.1777864,21.5347318 C23.8390024,21.7041238 23.625,22.0503869 23.625,22.429159 Z",id:"Path",opacity:"0.7"}),e.jsx("path",{d:"M20.4472136,21.5347318 L1.4472136,12.0347318 C0.953235098,11.7877425 0.352562058,11.9879669 0.105572809,12.4819454 C0.0361450918,12.6208008 6.47121774e-16,12.7739139 0,12.929159 L0,30.1875 L0,30.1875 C0,30.6849375 0.280875,31.1390625 0.7258125,31.3621875 L19.5528096,40.7750766 C20.0467945,41.0220531 20.6474623,40.8218132 20.8944388,40.3278283 C20.963859,40.1889789 21,40.0358742 21,39.8806379 L21,22.429159 C21,22.0503869 20.7859976,21.7041238 20.4472136,21.5347318 Z",id:"Path",opacity:"0.7"})]})})})})})}Yc.defaultProps={color:"dark",size:"16px"};Yc.propTypes={color:Z.oneOf(["primary","secondary","info","success","warning","error","dark","light","white"]),size:Z.oneOfType([Z.number,Z.string])};function Qc({color:r,size:s}){return e.jsxs("svg",{width:s,height:s,viewBox:"0 0 42 42",version:"1.1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",children:[e.jsx("title",{children:"spaceship"}),e.jsx("g",{id:"Basic-Elements",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",children:e.jsx("g",{id:"Rounded-Icons",transform:"translate(-1720.000000, -592.000000)",fill:ba[r]?ba[r].main:ba.dark.main,fillRule:"nonzero",children:e.jsx("g",{id:"Icons-with-opacity",transform:"translate(1716.000000, 291.000000)",children:e.jsxs("g",{id:"spaceship",transform:"translate(4.000000, 301.000000)",children:[e.jsx("path",{d:"M39.3,0.706666667 C38.9660984,0.370464027 38.5048767,0.192278529 38.0316667,0.216666667 C14.6516667,1.43666667 6.015,22.2633333 5.93166667,22.4733333 C5.68236407,23.0926189 5.82664679,23.8009159 6.29833333,24.2733333 L15.7266667,33.7016667 C16.2013871,34.1756798 16.9140329,34.3188658 17.535,34.065 C17.7433333,33.98 38.4583333,25.2466667 39.7816667,1.97666667 C39.8087196,1.50414529 39.6335979,1.04240574 39.3,0.706666667 Z M25.69,19.0233333 C24.7367525,19.9768687 23.3029475,20.2622391 22.0572426,19.7463614 C20.8115377,19.2304837 19.9992882,18.0149658 19.9992882,16.6666667 C19.9992882,15.3183676 20.8115377,14.1028496 22.0572426,13.5869719 C23.3029475,13.0710943 24.7367525,13.3564646 25.69,14.31 C26.9912731,15.6116662 26.9912731,17.7216672 25.69,19.0233333 L25.69,19.0233333 Z"}),e.jsx("path",{d:"M1.855,31.4066667 C3.05106558,30.2024182 4.79973884,29.7296005 6.43969145,30.1670277 C8.07964407,30.6044549 9.36054508,31.8853559 9.7979723,33.5253085 C10.2353995,35.1652612 9.76258177,36.9139344 8.55833333,38.11 C6.70666667,39.9616667 0,40 0,40 C0,40 0,33.2566667 1.855,31.4066667 Z",id:"Path"}),e.jsx("path",{d:"M17.2616667,3.90166667 C12.4943643,3.07192755 7.62174065,4.61673894 4.20333333,8.04166667 C3.31200265,8.94126033 2.53706177,9.94913142 1.89666667,11.0416667 C1.5109569,11.6966059 1.61721591,12.5295394 2.155,13.0666667 L5.47,16.3833333 C8.55036617,11.4946947 12.5559074,7.25476565 17.2616667,3.90166667 L17.2616667,3.90166667 Z",id:"color-2",opacity:"0.598539807"}),e.jsx("path",{d:"M36.0983333,22.7383333 C36.9280725,27.5056357 35.3832611,32.3782594 31.9583333,35.7966667 C31.0587397,36.6879974 30.0508686,37.4629382 28.9583333,38.1033333 C28.3033941,38.4890431 27.4704606,38.3827841 26.9333333,37.845 L23.6166667,34.53 C28.5053053,31.4496338 32.7452344,27.4440926 36.0983333,22.7383333 L36.0983333,22.7383333 Z",id:"color-3",opacity:"0.598539807"})]})})})})]})}Qc.defaultProps={color:"dark",size:"16px"};Qc.propTypes={color:Z.oneOf(["primary","secondary","info","success","warning","error","dark","light","white"]),size:Z.oneOfType([Z.number,Z.string])};const Xr="/assets/logo-srikandi-new-3-CXiv1gnc.png",zl="/assets/lembaga-support-5-BDzJAIou.png",Ul="/assets/bse-2024-bId5tlOr.png",ki=fs(Gd)(({theme:r={},ownerState:s})=>{const{palette:n={},boxShadows:t={},functions:i={},typography:l={},borders:m={}}=r,{size:p,error:B,success:K,iconDirection:W,direction:z,disabled:T}=s,{inputColors:L={borderColor:{main:"#d2d6da",focus:"#35d1f5"},error:"#fd5c70",success:"#66d432"},grey:$={200:"#e9ecef"},white:M={main:"#ffffff"},transparent:H={main:"transparent"}}=n,{inputBoxShadow:V="none"}=t,{pxToRem:A=S=>`${S}px`,boxShadow:G=()=>"none"}=i,{size:X={xs:"0.75rem"}}=l,{borderRadius:O={md:"0.5rem"}}=m,I=()=>({fontSize:X.xs,padding:`${A(4)} ${A(12)}`}),_=()=>({padding:A(12)});let C=L.borderColor.focus;B?C=L.error:K&&(C=L.success);let k;(z==="rtl"&&W==="left"||z==="rtl"&&W==="right"||z==="ltr"&&W==="right"||z==="ltr"&&W==="left")&&(k=A(12));let b;(z==="rtl"&&W==="left"||z==="rtl"&&W==="right"||z==="ltr"&&W==="right"||z==="ltr"&&W==="left")&&(b=A(12));let y=G([0,0],[0,2],L.boxShadow,1);B?y=V.error:K&&(y=V.success);const o=()=>({backgroundImage:`url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' fill='none' stroke='%23fd5c70' viewBox='0 0 12 12'%3E%3Ccircle cx='6' cy='6' r='4.5'/%3E%3Cpath stroke-linejoin='round' d='M5.8 3.6h.4L6 6.5z'/%3E%3Ccircle cx='6' cy='8.2' r='.6' fill='%23fd5c70' stroke='none'/%3E%3C/svg%3E")`,backgroundRepeat:"no-repeat",backgroundPosition:`right ${A(12)} center`,backgroundSize:`${A(16)} ${A(16)}`,borderColor:L.error}),F=()=>({backgroundImage:`url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 10 8'%3E%3Cpath fill='%2366d432' d='M2.3 6.73L.6 4.53c-.4-1.04.46-1.4 1.1-.8l1.1 1.4 3.4-3.8c.6-.63 1.6-.27 1.2.7l-4 4.6c-.43.5-.8.4-1.1.1z'/%3E%3C/svg%3E")`,backgroundRepeat:"no-repeat",backgroundPosition:`right ${A(12)} center`,backgroundSize:`${A(16)} ${A(16)}`,borderColor:L.success}),x=()=>{let S=`0 ${O.md} ${O.md} 0`;z==="rtl"&&W==="left"?S=`0 ${O.md} ${O.md} 0`:z==="rtl"&&W==="right"?S=`${O.md} 0 0 ${O.md}`:z==="ltr"&&W==="right"&&(S=`${O.md} 0 0 ${O.md}`);let f;z==="rtl"&&W==="left"?f=0:z==="rtl"&&W==="right"||z==="ltr"&&W==="right"?f=A(12):z==="ltr"&&W==="left"&&(f=0);let R;return z==="rtl"&&W==="left"?R=A(12):z==="rtl"&&W==="right"||z==="ltr"&&W==="right"?R=0:z==="ltr"&&W==="left"&&(R=A(12)),{borderColor:H.main,borderRadius:S,paddingLeft:f,paddingRight:R}};return{backgroundColor:T?`${$[200]} !important`:M.main,pointerEvents:T?"none":"auto",...p==="small"&&I(),...p==="large"&&_(),...B&&o(),...K&&F(),...(W==="left"||W==="right")&&x(),"&.Mui-focused":{borderColor:C,paddingLeft:k,paddingRight:b,boxShadow:y,outline:0},"&.MuiInputBase-multiline":{padding:`${A(10)} ${A(12)}`}}}),Vl=fs("div")(({theme:r={},ownerState:s})=>{const{palette:n={},functions:t={},borders:i={}}=r,{error:l,success:m,disabled:p}=s,{inputColors:B={borderColor:{main:"#d2d6da"},error:"#fd5c70",success:"#66d432"},grey:K={200:"#e9ecef"},white:W={main:"#ffffff"}}=n,{pxToRem:z=M=>`${M}px`}=t,{borderRadius:T={md:"0.5rem"},borderWidth:L={1:"1px"}}=i;let $=B.borderColor.main;return l?$=B.error:m&&($=B.success),{display:"flex",alignItems:"center",backgroundColor:p?K[200]:W.main,border:`${L[1]} solid`,borderRadius:T.md,borderColor:$,"& .MuiInputBase-input":{height:z(20)}}}),ql=fs("div")(({theme:r,ownerState:s})=>{const{palette:n,functions:t}=r,{size:i}=s,{dark:l}=n,{pxToRem:m}=t;return{lineHeight:0,padding:i==="small"?`${m(4)} ${m(10)}`:`${m(8)} ${m(10)}`,width:m(39),height:"100%",color:l.main}}),Hl=fs(Ss)(({theme:r,ownerState:s})=>{const{typography:n}=r,{size:t}=s,{fontWeightBold:i,size:l}=n;return{fontWeight:i,fontSize:t==="small"&&`${l.md} !important`}}),Ye=a.forwardRef(({size:r="medium",icon:s={component:!1,direction:"none"},error:n=!1,success:t=!1,disabled:i=!1,...l},m)=>{let p;const[B]=It(),{direction:K}=B,W=(s==null?void 0:s.direction)||"none";return s!=null&&s.component&&(s==null?void 0:s.direction)==="left"?p=e.jsxs(Vl,{ref:m,ownerState:{error:n,success:t,disabled:i},children:[e.jsx(ql,{ownerState:{size:r},children:e.jsx(Hl,{fontSize:"small",ownerState:{size:r},children:s.component})}),e.jsx(ki,{...l,ownerState:{size:r,error:n,success:t,iconDirection:W,direction:K,disabled:i}})]}):s!=null&&s.component&&(s==null?void 0:s.direction)==="right"?p=e.jsxs(Vl,{ref:m,ownerState:{error:n,success:t,disabled:i},children:[e.jsx(ki,{...l,ownerState:{size:r,error:n,success:t,iconDirection:W,direction:K,disabled:i}}),e.jsx(ql,{ownerState:{size:r},children:e.jsx(Hl,{fontSize:"small",ownerState:{size:r},children:s.component})})]}):p=e.jsx(ki,{...l,ref:m,ownerState:{size:r,error:n,success:t,disabled:i}}),p});Ye.propTypes={size:Z.oneOf(["small","medium","large"]),icon:Z.shape({component:Z.oneOfType([Z.node,Z.bool]),direction:Z.oneOf(["none","left","right"])}),error:Z.bool,success:Z.bool,disabled:Z.bool};const fp=fs(Xa)(({theme:r={},ownerState:s})=>{var V,A,G,X,O,I;const{palette:n={},typography:t={},borders:i={},functions:l={}}=r,{color:m}=s,{white:p={main:"#fff"},alertColors:B={}}=n,{fontSizeRegular:K="0.875rem",fontWeightMedium:W=500}=t,{borderWidth:z={1:"1px"},borderRadius:T={md:"0.5rem"}}=i,{pxToRem:L=_=>`${_}px`,linearGradient:$}=l,M=B[m]?$?$(B[m].main,B[m].state):`linear-gradient(310deg, ${((V=B[m])==null?void 0:V.main)||"#82d616"}, ${((A=B[m])==null?void 0:A.state)||"#98ec2d"})`:$?$(((G=B.info)==null?void 0:G.main)||"#17c1e8",((X=B.info)==null?void 0:X.state)||"#3ce7ff"):"linear-gradient(310deg, #17c1e8, #3ce7ff)",H=B[m]?`${z[1]} solid ${((O=B[m])==null?void 0:O.border)||"#82d616"}`:`${z[1]} solid ${((I=B.info)==null?void 0:I.border)||"#17c1e8"}`;return{display:"flex",justifyContent:"space-between",alignItems:"center",minHeight:L(60),backgroundImage:M,color:p.main,position:"relative",padding:L(16),marginBottom:L(16),border:H,borderRadius:T.md,fontSize:K,fontWeight:W}}),jp=fs("span")(({theme:r})=>{const{palette:s,typography:n,functions:t,transitions:i}=r,{white:l}=s,{size:m,fontWeightMedium:p}=n,{pxToRem:B}=t;return{color:l.main,fontSize:m.xl,padding:`${B(9)} ${B(6)} ${B(8)}`,marginLeft:B(40),fontWeight:p,opacity:.5,cursor:"pointer",lineHeight:0,transition:i.create("opacity",{easing:i.easing.easeInOut,duration:i.duration.shorter}),"&:hover":{opacity:1}}});function Xc({color:r="info",dismissible:s=!1,children:n,...t}){const[i,l]=a.useState("mount"),m=()=>l("fadeOut"),p=(B=!0)=>e.jsx(yo,{in:B,timeout:300,children:e.jsxs(fp,{ownerState:{color:r},...t,children:[e.jsx(ie,{display:"flex",alignItems:"center",color:"white",children:n}),s?e.jsx(jp,{onClick:B?m:null,children:"×"}):null]})});switch(!0){case i==="mount":return p();case i==="fadeOut":return setTimeout(()=>l("unmount"),400),p(!1);default:p();break}return null}Xc.propTypes={color:Z.oneOf(["primary","secondary","info","success","warning","error","light","dark"]),dismissible:Z.bool,children:Z.node.isRequired};const kp=fs(_o)(({theme:r,ownerState:s})=>{const{palette:n,functions:t,typography:i,boxShadows:l}=r,{shadow:m,bgColor:p,size:B}=s,{gradients:K,transparent:W}=n,{pxToRem:z,linearGradient:T}=t,{size:L,fontWeightBold:$}=i,M=p==="transparent"?W.main:T(K[p].main,K[p].state);let H;switch(B){case"xs":H={width:z(24),height:z(24),fontSize:L.xs};break;case"sm":H={width:z(36),height:z(36),fontSize:L.sm};break;case"lg":H={width:z(58),height:z(58),fontSize:L.sm};break;case"xl":H={width:z(74),height:z(74),fontSize:L.md};break;case"xxl":H={width:z(110),height:z(110),fontSize:L.md};break;default:H={width:z(48),height:z(48),fontSize:L.md}}return{background:M,fontWeight:$,boxShadow:l[m],...H}}),bp=a.forwardRef(({bgColor:r="transparent",size:s="md",shadow:n="none",...t},i)=>e.jsx(kp,{ref:i,ownerState:{shadow:n,bgColor:r,size:s},...t}));bp.propTypes={bgColor:Z.oneOf(["transparent","primary","secondary","info","success","warning","error","light","dark"]),size:Z.oneOf(["xs","sm","md","lg","xl","xxl"]),shadow:Z.oneOf(["none","xs","sm","md","lg","xl","xxl","inset"])};Z.string,Z.string,Z.string.isRequired,Z.node.isRequired;const Zc="/assets/background-DZvonMBE.png",ed="/assets/frame-up-CRvBttdj.png",ad="/assets/frame-down-CwzsvYmk.png",jt="https://api.arsip.go.id/user/api/";class sl{constructor(){ae(this,"switchRole",async s=>await se.post(`${jt}auth/switch`,s).then(i=>i));ae(this,"logout",async()=>await se.post(`${jt}auth/logout`).then(t=>t));ae(this,"sendOtp",async s=>await se.post(`${jt}auth/forgot-password`,s).then(i=>i));ae(this,"submitOtp",async s=>await se.post(`${jt}auth/otp`,s).then(i=>i));ae(this,"newPassword",async s=>await se.post(`${jt}auth/new-password`,s).then(i=>i));ae(this,"forgotUsername",async s=>await se.post(`${jt}auth/forgot-username`,s).then(i=>i));ae(this,"generateCaptcha",async s=>await se.post(`${jt}auth/generate-captcha`,s).then(i=>i));ae(this,"validateCaptcha",async s=>await se.post(`${jt}auth/validate-captcha`,s).then(i=>i))}}const _p=/^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#\$%\^&\*])(?=.{8,})/,yp=fa().shape({new_password:ze().required("Kata sandi harus diisi").matches(_p,{message:"Password Lemah"}),confirm_password:ze().required("Konfirmasi kata sandi harus diisi").oneOf([Hn("new_password"),null],"Kata sandi tidak cocok")}),Np=fa().shape({username:ze().required("Nama Pengguna harus diisi"),password:ze().required("Kata Sandi harus diisi")}),de=({error:r,htmlText:s,text:n,required:t})=>e.jsxs("label",{className:`block mb-2 text-base font-semibold text-gray-700 dark:text-gray-500 ${r?"text-red-500 dark:text-red-500":""}`,children:[s||n,!s&&t&&e.jsx("span",{className:"ms-1 text-red-500",children:"*"})]});de.propTypes={error:Z.bool,text:Z.string,htmlText:Z.element,required:Z.bool};const ue=({text:r,error:s})=>s?e.jsx("p",{className:"mt-2 text-sm text-red-600 dark:text-red-500",children:r}):null;ue.propTypes={error:Z.bool,text:Z.string};function rs({color:r,className:s}){const[n,t]=a.useState("border-blue-500");return a.useEffect(()=>{r=="white"?t("border-white"):r=="secondary"&&t("border-slate-500")},[r]),e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"hidden border-white"}),e.jsx("div",{className:"hidden border-blue-500"}),e.jsx("div",{className:"hidden border-green-500"}),e.jsx("div",{className:"hidden border-red-500"}),e.jsx("div",{className:"hidden border-orange-500"}),e.jsx("div",{className:"hidden border-slate-500"}),e.jsx("div",{className:`w-10 h-10 border-t-4 ${n} border-solid rounded-full animate-spin ${s}`})]})}rs.propTypes={color:Z.string,className:Z.string};const Vs="https://api.arsip.go.id/user/api/",Dn=Ft.create({headers:{"Content-Type":"multipart/form-data",Accept:"application/json"}});Dn.interceptors.request.use(async r=>{const s=await JSON.parse(Le.getItem("access_token"));return s!==null&&(r.headers.Authorization=`Bearer ${s}`),r});class Jn{constructor(){ae(this,"getPaging",async s=>{const n=Ce.serializeObjectToQueryString(s);return await se.get(`${Vs}pengguna/user/profile?${n}`).then(l=>l)});ae(this,"post",async s=>await Dn.post(`${Vs}pengguna/user/profile`,s).then(i=>i));ae(this,"put",async s=>await Dn.post(`${Vs}pengguna/user/profile`,s).then(i=>i));ae(this,"delete",async s=>await se.delete(`${Vs}pengguna/user/profile/${s}`).then(i=>i));ae(this,"selectAkses",async s=>{const n=Ce.serializeObjectToQueryString(s);return await se.get(`${Vs}pengguna/role/select?${n}`).then(l=>l)});ae(this,"updatePassword",async s=>await Dn.post(`${Vs}pengguna/user/kata-sandi`,s).then(i=>i));ae(this,"getUpdateData",async s=>{const n=Ce.serializeObjectToQueryString(s);return await se.post(`${Vs}auth/get-update-data?${n}`).then(l=>l)});ae(this,"saveFcmToken",async s=>await se.post(`${Vs}auth/fcm/save`,s).then(i=>i));ae(this,"deleteFcmToken",async s=>await se.post(`${Vs}auth/fcm/delete`,s).then(i=>i));ae(this,"getPagingLog",async s=>{const n=Ce.serializeObjectToQueryString(s);return await se.get(`${Vs}list-logs?${n}`).then(l=>l)});ae(this,"getPagingLogData",async s=>{const n=Ce.serializeObjectToQueryString(s);return await se.get(`${Vs}list-logs?${n}`).then(l=>l)});ae(this,"getPagingLogDataById",async s=>{const n=Ce.serializeObjectToQueryString(s);return await se.get(`${Vs}list-logs-id?${n}`).then(l=>l)})}}const Je=({color:r,text:s,formId:n="",submit:t,onClick:i,size:l="medium",className:m})=>e.jsx(_e,{color:r,type:t&&n?"submit":"button",form:n,variant:"gradient",onClick:i,size:l,className:m,children:e.jsx("div",{className:"flex justify-start",children:t?s:e.jsxs(e.Fragment,{children:[e.jsx(rs,{color:"white",className:"flex-shrink-0 w-3 h-3 me-2"}),"Mohon Tunggu"]})})});Je.propTypes={text:Z.oneOfType([Z.string,Z.node]),color:Z.oneOf(["white","primary","secondary","info","success","warning","error","light","dark"]).isRequired,formId:Z.string,submit:Z.bool.isRequired,onClick:Z.func,size:Z.oneOf(["small","medium","large"]),className:Z.string};const[St,Gl,Wl,Jl,Yl,Ql]=["inputUsername","forgotPassword","forgotUsername","sentUsername","inputCode","inputNewPassword"],wp=({navigate:r,captchaWord:s,getNewCaptchaImageUrl:n,loadingCaptcha:t,currentSection:i,setCurrentSection:l})=>{const m=new sl,p=new Jn,B="https://api.arsip.go.id/user/api/",K="MROe7xJvx5Na3gXFYkhrNAvLr99Bo9iJ6Wj/AjOCLWw=",W="",[z,T]=a.useState(!1),[L,$]=a.useState(!0),[M,H]=a.useState(!1),[V,A]=a.useState(!1),[G,X]=a.useState(!1),[O,I]=a.useState(""),[_,C]=a.useState(""),[k,b]=a.useState(""),[y,o]=a.useState(""),[F,x]=a.useState(""),[S,f]=a.useState(""),[R,u]=a.useState(!1),[D,E]=a.useState(""),[J,P]=a.useState("");let h=60;const[d,j]=a.useState(h),[g,c]=a.useState(""),[v,N]=a.useState(""),Q=a.useRef(),re=a.useRef(),ye={username:"",password:"",fcm_token:Le.getItem("fcmToken")},[xe,fe]=a.useState({new_password:"",confirm_password:""}),[Ge,$e]=a.useState(-1),[Pe,te]=a.useState(""),ne=a.useRef(null);a.useEffect(()=>{let Fe;return Ge>-1&&(Fe=setInterval(function(){h>0&&(h-=1,j(h))},1e3)),()=>clearInterval(Fe)},[Ge,h]);const pe=(Fe,Ke,Qe)=>{Fe.font="28px Arial",Fe.fillStyle="#00000060";const ea=Fe.measureText(Qe).width,ja=(Ke.width-ea)/2,Aa=Ke.height/2+Fe.measureText(Qe).actualBoundingBoxAscent/2;Fe.fillText(Qe,ja,Aa)};a.useEffect(()=>{if(s&&i==St){const Fe=ne.current,Ke=Fe.getContext("2d");Ke.clearRect(0,0,Fe.width,Fe.height),pe(Ke,Fe,s)}},[s,i]);const he=async()=>Pe.length?Pe.toUpperCase()!=s?(H(!0),A("Captcha salah"),te(""),n(),!1):(H(!1),!0):(H(!0),A("Captcha harus diisi"),!1),oe=()=>{let Fe=localStorage.getItem("device_id");return Fe||(Fe=eh(),localStorage.setItem("device_id",Fe)),Fe};a.useEffect(()=>{Le.getItem("fcmToken")||Ln()},[Le.getItem("fcmToken")]);const je=async Fe=>{const Ke=await he(),Qe=jl(oe());Ke&&Fe&&(A(""),X(!0),await Ft.post(B+"auth/login",{...Fe,deviceId:Qe}).then(async ea=>{var ve;let ja=JSON.parse(Bn.decode(ea.data)),Ee=ms.AES.decrypt(ja.value,ms.enc.Base64.parse(K),{iv:ms.enc.Base64.parse(ja.iv)}).toString(ms.enc.Utf8);Ee=Ee.substring(Ee.indexOf("{")),Ee=JSON.parse(Ee),Ee.authorization.token&&(Es.dispatch({type:"SET_REDIRECT_LOGIN",payload:!1}),Le.setItem("access_token",JSON.stringify(Ee.authorization.token)),Le.setItem("users",JSON.stringify(Ee.user)),Le.setItem("allrole",JSON.stringify(Ee.allrole)),Le.setItem("menu",JSON.stringify(Ee.menu)),Ln().then(async()=>{let Ae=Le.getItem("fcmToken");await p.saveFcmToken({fcm_token:Ae,flag:"web"}).catch(Ue=>{})}),Le.getItem("prev_user_id")===((ve=Ee.user)==null?void 0:ve.id)&&Le.getItem("prev_role_id")&&Le.getItem("prev_role_id")!=="undefined"?(await m.switchRole({role:Le.getItem("prev_role_id")}).then(Ue=>{let ma=JSON.parse(Bn.decode(Ue.data)),We=ms.AES.decrypt(ma.value,ms.enc.Base64.parse(K),{iv:ms.enc.Base64.parse(ma.iv)}).toString(ms.enc.Utf8);We=We.substring(We.indexOf("{")),We=JSON.parse(We),We.authorization.token&&(Le.setItem("access_token",JSON.stringify(We.authorization.token)),Le.setItem("users",JSON.stringify(We.user)),Le.setItem("allrole",JSON.stringify(We.allrole)),Le.setItem("menu",JSON.stringify(We.menu)))})).then(()=>{r(Le.getItem("prev_location"),{state:Le.getItem("prev_state")})}):r(W+"/beranda"),Le.removeItem("prev_user_id"),Le.removeItem("prev_location"),Le.removeItem("prev_state"))}).catch(ea=>{var ja,Aa,Ee,ve,Ae,Ue;H(!0),((ja=ea.response)==null?void 0:ja.status)==401?A("Nama Pengguna atau Kata sandi Anda salah!"):((Aa=ea.response)==null?void 0:Aa.status)==403?A(`Terjadi kesalahan mohon refresh halaman 
 atau tekan (CTRL + SHIFT + R)`):(Oe((Ee=ea.response)==null?void 0:Ee.data.result),((ve=ea.response)==null?void 0:ve.status)!=429?A("Terjadi kesalahan"):A((Ue=(Ae=ea.response)==null?void 0:Ae.data)==null?void 0:Ue.message))}).finally(()=>{X(!1),n(),te(""),Q.current.resetForm()}))},Ne=()=>{U.fire({title:"Lupa Kata Sandi?",text:`Kode OTP akan dikirimkan ke email yang sesuai dengan akun ${O}`,icon:"question",showCancelButton:!0,confirmButtonText:"Lanjutkan",cancelButtonText:"Batal",reverseButtons:!0,customClass:{confirmButton:"button button-primary",cancelButton:"button button-secondary"}}).then(Fe=>{Fe.isConfirmed&&(ka(),m.sendOtp({username:O}).then(Ke=>{var Qe,ea;Ke.status==200&&(l(Yl),N((Qe=Ke.data)==null?void 0:Qe.message),c((ea=Ke.data)==null?void 0:ea.result),$e(ja=>ja+1)),U.close()}).catch(Ke=>{var ea,ja;const Qe=Oe(Ke.response.data.result);U.fire("Gagal",Qe??((ja=(ea=Ke.response)==null?void 0:ea.data)==null?void 0:ja.message),"error"),I("")}).finally(()=>{P("")}))})},Re=Fe=>{const Ke=jl(oe());ka(),m.submitOtp({username:O,otp:Fe,deviceId:Ke}).then(Qe=>{Qe.status==200&&(l(Ql),fe({confirm_password:"",new_password:""})),U.close()}).catch(Qe=>{var ja,Aa;const ea=Oe(Qe.response.data.result);U.fire("Gagal",ea??((Aa=(ja=Qe.response)==null?void 0:ja.data)==null?void 0:Aa.message),"error"),P("")})},sa=Fe=>{ka(),m.newPassword({username:O,password:Fe==null?void 0:Fe.new_password,password_confirmation:Fe==null?void 0:Fe.confirm_password}).then(Ke=>{Ke.status==200&&(U.fire("Berhasil","Password berhasil diubah","success"),l(St))}).catch(Ke=>{var ea,ja;const Qe=Oe(Ke.response.data.result);U.fire("Gagal",Qe??((ja=(ea=Ke.response)==null?void 0:ea.data)==null?void 0:ja.message),"error")})},Te=()=>{D&&(ka(),m.forgotUsername({email:D}).then(Fe=>{Fe.status==200&&l(Jl),U.close()}).catch(Fe=>{var Qe,ea,ja,Aa;const Ke=Oe((ea=(Qe=Fe.response)==null?void 0:Qe.data)==null?void 0:ea.result);U.fire("Gagal",Ke||((Aa=(ja=Fe.response)==null?void 0:ja.data)==null?void 0:Aa.message)||(Fe==null?void 0:Fe.message),"error")}))};a.useEffect(()=>{const Fe=Ke=>{Ke.key==="Enter"&&Ke.preventDefault()};return document.addEventListener("keypress",Fe),()=>{document.removeEventListener("keypress",Fe)}},[]),a.useEffect(()=>{Le.getItem("remember")&&I(Le.getItem("remember"))},[Le.getItem("remember")]);const me=e.jsxs(w,{item:!0,xs:12,my:{xs:0,md:5},children:[e.jsx(w,{container:!0,direction:"row",justifyContent:"center",mb:1,display:{xs:"flex",md:"none"},children:e.jsx(w,{item:!0,xs:6,children:e.jsx("img",{src:Xr,alt:"",srcSet:""})})}),e.jsx(w,{container:!0,direction:"row",justifyContent:"center",mb:2,children:e.jsx(w,{item:!0,xs:9,md:12,children:e.jsx(Ca,{variant:"h3",align:"center",children:"LOGIN AKUN"})})}),e.jsx(w,{container:!0,direction:"row",justifyContent:"center",mb:3,children:e.jsx(w,{item:!0,xs:9,md:12,children:e.jsx(ca,{innerRef:Q,initialValues:ye,onSubmit:je,validateOnChange:!0,validationSchema:Np,children:Fe=>{var Ke,Qe,ea,ja,Aa,Ee;return e.jsxs(da,{id:"formLogin",children:[(V||Object.keys(Fe.errors).length>0)&&e.jsx(w,{container:!0,direction:"row",justifyContent:"center",mt:1,children:e.jsx(w,{item:!0,children:e.jsx(Xc,{fontSize:"all",color:"error",children:e.jsxs("ul",{children:[((Ke=Fe.errors)==null?void 0:Ke.username)&&e.jsx("li",{children:(Qe=Fe.errors)==null?void 0:Qe.username}),((ea=Fe.errors)==null?void 0:ea.password)&&e.jsx("li",{children:(ja=Fe.errors)==null?void 0:ja.password}),((Aa=Fe.errors)==null?void 0:Aa.inputCaptcha)&&e.jsx("li",{children:(Ee=Fe.errors)==null?void 0:Ee.inputCaptcha}),V&&e.jsx("li",{children:V})]})})})}),e.jsx(w,{item:!0,mb:3,children:e.jsx(ce,{name:"username",children:({field:ve,meta:Ae})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Nama Pengguna",error:Ae.error&&Ae.touched}),e.jsx(Ye,{...ve,type:"text",placeholder:"Nama Pengguna",error:Ae.error&&Ae.touched}),e.jsx("button",{onClick:()=>l(Wl),className:"text-blue-800 text-left text-xs whitespace-nowrap mt-2",children:"Lupa Nama Pengguna?"})]})})}),e.jsxs(w,{item:!0,mb:3,children:[e.jsx(ce,{name:"password",children:({field:ve,meta:Ae})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Kata Sandi",error:Ae.error&&Ae.touched}),e.jsx(Ye,{...ve,type:R?"text":"password",placeholder:"Kata Sandi",error:Ae.error&&Ae.touched,onKeyPress:Ue=>{Ue.key==="Enter"&&(Fe==null||Fe.handleSubmit())}})]})}),e.jsxs("div",{className:"w-full flex justify-between lg:gap-4 mt-4 ",children:[e.jsx("div",{className:"ml-3",children:e.jsx(Li,{control:e.jsx(wo,{}),checked:R,onChange:()=>u(!R),label:"Lihat Kata Sandi"})}),e.jsx("div",{children:e.jsx("button",{onClick:()=>{l(Gl)},className:"text-blue-800 text-right text-xs whitespace-nowrap",children:"Lupa Kata Sandi?"})})]})]}),e.jsx(w,{item:!0,my:{xs:2},children:t?e.jsx("div",{children:e.jsx(rs,{className:"w-6"})}):e.jsxs("div",{className:"flex gap-2 w-full justify-center",children:[s&&e.jsx("canvas",{ref:ne,width:"130",height:"50"}),e.jsx("div",{children:e.jsx(Dt,{size:"1.5em",color:"#00bcd4",onClick:n,className:"cursor-pointer",title:"Lihat"})})]})}),e.jsx(w,{item:!0,mb:{xs:2},children:e.jsx(Ye,{type:"text",placeholder:"Captcha",value:Pe,onChange:ve=>te(ve.target.value),onKeyPress:ve=>{ve.key==="Enter"&&(Fe==null||Fe.handleSubmit())}})}),e.jsx(w,{item:!0,children:e.jsx(Je,{submit:!G,color:"info",text:"Masuk",className:"w-full",onClick:()=>Fe.handleSubmit()})})]})}})})})]}),ee=e.jsxs(w,{item:!0,xs:12,my:5,px:{xs:"3rem",md:0},children:[e.jsx(w,{container:!0,direction:"row",justifyContent:"center",mb:1,children:e.jsx(w,{item:!0,xs:12,children:e.jsx(Ca,{variant:"h5",align:"center",children:"Mendapatkan Nama Pengguna"})})}),e.jsxs(w,{container:!0,xs:12,direction:"row",justifyContent:"center",mb:3,children:[e.jsx(w,{item:!0,mb:2,children:e.jsxs(Ca,{variant:"caption",align:"justify",sx:{color:"#1D3557"},children:["Untuk mendapatkan Nama Pengguna, masukkan email yang telah terdaftar."," ",e.jsx("b",{children:"Nama Pengguna akan dikirim ke email terkait."})]})}),e.jsx(w,{item:!0,xs:12,mb:3,children:e.jsx(Ye,{type:"email",name:"email",placeholder:"Email",required:!0,onChange:Fe=>E(Fe.target.value),onKeyPress:Fe=>{Fe.key==="Enter"&&Te()}})}),e.jsxs("div",{className:"w-full flex flex-col md:flex-row gap-4 items-center",children:[e.jsx("div",{className:"w-full",children:e.jsx(_e,{variant:"gradient",color:"secondary",fullWidth:!0,onClick:()=>l(St),children:"Kembali"})}),e.jsx("div",{className:"w-full",children:e.jsx(_e,{variant:"gradient",color:"info",fullWidth:!0,disabled:!D,onClick:()=>Te(),children:"Lanjutkan"})})]})]})]}),Y=e.jsxs(w,{item:!0,xs:12,my:5,px:{xs:"3rem",sm:"0px"},children:[e.jsx(w,{container:!0,direction:"row",justifyContent:"center",mb:1,children:e.jsx(w,{item:!0,xs:12,children:e.jsx(Ca,{variant:"h5",align:"center",children:"Nama Pengguna Berhasil Dikirim"})})}),e.jsxs(w,{container:!0,direction:"row",justifyContent:"center",mb:3,children:[e.jsx(w,{item:!0,mb:2,children:e.jsx(Ca,{variant:"caption",align:"justify",sx:{color:"#1D3557"},children:"Silahkan cek email Anda untuk mengetahui Nama Pengguna yang terdaftar."})}),e.jsx("div",{className:"w-full flex flex-col md:flex-row gap-4 items-center",children:e.jsx("div",{className:"w-full",children:e.jsx(_e,{variant:"gradient",color:"secondary",fullWidth:!0,onClick:()=>l(St),children:"Kembali ke Halaman Login"})})})]})]}),ke=e.jsxs(w,{item:!0,xs:12,my:5,px:{xs:"3rem",md:0},children:[e.jsx(w,{container:!0,direction:"row",justifyContent:"center",mb:1,children:e.jsx(w,{item:!0,xs:12,children:e.jsx(Ca,{variant:"h5",align:"center",children:"Lupa Kata Sandi"})})}),e.jsxs(w,{container:!0,xs:12,direction:"row",justifyContent:"center",mb:3,children:[e.jsx(w,{item:!0,mb:2,children:e.jsx(Ca,{variant:"caption",align:"justify",sx:{color:"#1D3557"},children:"Masukkan nama pengguna yang telah terdaftar"})}),e.jsx(w,{item:!0,xs:12,mb:3,children:e.jsx(Ye,{type:"text",name:"username",placeholder:"Nama Pengguna",value:O,onChange:Fe=>I(Fe.target.value),onKeyPress:Fe=>{Fe.key==="Enter"&&Ne()}})}),e.jsxs("div",{className:"w-full flex flex-col md:flex-row gap-4 items-center",children:[e.jsx("div",{className:"w-full",children:e.jsx(_e,{variant:"gradient",color:"secondary",fullWidth:!0,onClick:()=>l(St),children:"Kembali"})}),e.jsx("div",{className:"w-full",children:e.jsx(_e,{variant:"gradient",color:"info",fullWidth:!0,disabled:!O,onClick:()=>Ne(),children:"Lanjutkan"})})]})]})]}),De=e.jsxs(w,{item:!0,xs:12,my:5,px:{xs:"3rem",md:0},children:[e.jsx(w,{container:!0,direction:"row",justifyContent:"center",mb:1,children:e.jsx(w,{item:!0,xs:12,children:e.jsx(Ca,{variant:"h5",align:"center",children:"Masukkan Kode OTP"})})}),e.jsxs(w,{container:!0,direction:"row",justifyContent:"center",mb:3,children:[e.jsx(w,{item:!0,mb:2,children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx(Ca,{variant:"caption",align:"center",sx:{color:"#1D3557"},children:v}),e.jsx(Ca,{variant:"caption",fontWeight:"bold",align:"center",sx:{color:"#1D3557"},children:g})]})}),e.jsx(w,{item:!0,xs:12,mb:2,children:e.jsx(Ye,{type:"tel",name:"code",placeholder:"Masukkan Kode OTP",value:J,onChange:Fe=>P(Fe.target.value),onKeyPress:Fe=>{Fe.key==="Enter"&&Re(Fe.target.value)}})}),d>0?e.jsxs(Ca,{variant:"caption",children:["Tunggu ",e.jsxs("b",{children:[d," detik"]})," lagi untuk kirim ulang kode"]}):e.jsx("button",{onClick:()=>{Ne()},className:"text-blue-800 text-left text-xs whitespace-nowrap",children:"Kirim Ulang Kode"}),e.jsx("div",{className:"w-full flex flex-col md:flex-row gap-4 items-center mt-4",children:e.jsx("div",{className:"w-full",children:e.jsx(_e,{variant:"gradient",color:"info",fullWidth:!0,disabled:!J,onClick:()=>{Re(J)},children:"Lanjutkan"})})})]})]}),ta=e.jsxs(w,{item:!0,xs:12,my:5,px:{xs:"3rem",md:0},children:[e.jsx(w,{container:!0,direction:"row",justifyContent:"center",mb:1,children:e.jsx(w,{item:!0,xs:12,children:e.jsx(Ca,{variant:"h5",align:"center",children:"Masukkan Kata Sandi Baru"})})}),e.jsxs(w,{container:!0,direction:"row",justifyContent:"center",mb:3,children:[e.jsx(w,{item:!0,mb:2,children:e.jsxs("div",{className:"flex flex-col items-center justify-center ",children:[e.jsx(Ca,{variant:"caption",align:"justify",sx:{color:"#1D3557"},mb:1,children:"Buat Kata Sandi baru untuk akun"}),e.jsx(Ca,{variant:"caption",align:"justify",sx:{color:"#1D3557"},children:e.jsx("b",{children:O})})]})}),e.jsx("div",{className:"w-full",children:e.jsx(ca,{innerRef:re,initialValues:xe,onSubmit:sa,validateOnChange:!0,validationSchema:yp,children:Fe=>e.jsxs(da,{id:"formNewPass",children:[e.jsxs("div",{className:"w-full",children:[e.jsx(w,{item:!0,xs:12,mb:3,children:e.jsx(ce,{name:"new_password",children:({field:Ke,form:Qe,meta:ea})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Kata Sandi",required:!0,error:ea.error&&ea.touched}),e.jsx(Ye,{...Ke,type:"password",placeholder:"Masukkan Kata Sandi Baru",error:ea.error&&ea.touched}),e.jsx(ue,{text:ea.error,error:ea.error&&ea.touched})]})})}),e.jsx(w,{item:!0,xs:12,mb:3,children:e.jsx(ce,{name:"confirm_password",children:({field:Ke,form:Qe,meta:ea})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Konfirmasi Kata Sandi",required:!0,error:ea.error&&ea.touched}),e.jsx(Ye,{...Ke,type:"password",placeholder:"Ketik Ulang Kata Sandi Baru",error:ea.error&&ea.touched,onKeyPress:ja=>{ja.key==="Enter"&&(Fe==null||Fe.handleSubmit())}}),e.jsx(ue,{text:ea.error,error:ea.error&&ea.touched})]})})})]}),e.jsx("div",{className:"w-full flex flex-col md:flex-row gap-4 items-center",children:e.jsx(Je,{submit:!0,color:"info",text:"Lanjutkan",className:"w-full",onClick:()=>Fe.handleSubmit()})})]})})})]})]});function Be(Fe){switch(Fe){case St:return me;case Wl:return ee;case Jl:return Y;case Gl:return ke;case Yl:return De;case Ql:return ta;default:return me}}return Be(i)};function Sp(){let r=ha();const s="",[n,t]=a.useState(!1),i=JSON.parse(Le.getItem("access_token")),l=new Date().getFullYear(),[m,p]=a.useState(!1),[B,K]=a.useState(!1),[W,z]=a.useState(""),[T,L]=a.useState(""),[$,M]=a.useState(!1),[H,V]=a.useState(),[A,G,X]=["https://dashboardspbe.layanan.go.id/dashboard/Arsip%20Nasional%20Republik%20Indonesia","https://layanan.arsip.go.id/","https://layanan.arsip.go.id/knowledgebase.php"],O=()=>{window.location.replace(A)},I=()=>{window.location.replace(X)},_=()=>{window.location.replace(G)},C=()=>{r(s+"/privacy-policy")},[k,b]=Ga.useState(null),y=!!k,o=u=>{b(u.currentTarget)},F=()=>{b(null)},x=()=>{i!=null&&r(s+"/beranda")};a.useEffect(()=>{x(),V(St),Zi()},[]),a.useEffect(()=>{if(H==St){f();const u=setInterval(f,12e4);return()=>clearInterval(u)}},[H]);function S(u){let D="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",E="";for(let J=0;J<u;J++)E+=D.charAt(Math.floor(Math.random()*D.length));return E}const f=()=>{K(!0),L(S(5)),K(!1)},R=a.useMemo(()=>e.jsx(wp,{navigate:r,captchaWord:T,getNewCaptchaImageUrl:f,loadingCaptcha:B,currentSection:H,setCurrentSection:V}),[T,B,H]);return e.jsxs("div",{children:[e.jsx(Xa,{sx:{display:{xs:"flex",md:"none"}},children:e.jsx(w,{container:!0,direction:"row",children:e.jsx(w,{item:!0,xs:12,sx:{borderRadius:{xs:0,md:10}},children:e.jsxs(w,{container:!0,sx:{backgroundColor:"#fff",backgroundSize:"100%",borderRadius:{xs:0,md:5},height:"auto"},children:[e.jsxs(w,{container:!0,sx:{backgroundImage:`url(${ed})`,backgroundRepeat:"no-repeat",backgroundSize:{xs:"100% 13rem",md:"100% 9rem"},height:{xs:"13rem",md:"9rem"},borderTopRightRadius:{xs:0,md:10},borderTopLeftRadius:{xs:0,md:10}},children:[e.jsx(w,{container:!0,direction:"row",justifyContent:"flex-end",rowSpacing:0,pr:0,pt:1,children:e.jsx(w,{item:!0,children:e.jsxs(Rs,{variant:"text",size:"large",id:"basic-button","aria-controls":y?"basic-menu":void 0,"aria-haspopup":"true","aria-expanded":y?"true":void 0,onClick:o,children:[e.jsx(So,{color:"light"}),e.jsxs(Ls,{id:"basic-menu",anchorEl:k,open:y,onClose:F,MenuListProps:{"aria-labelledby":"basic-button"},children:[e.jsx(Ms,{onClick:O,children:"Dashboard"}),e.jsx(Ms,{onClick:_,children:"Bantuan"}),e.jsx(Ms,{onClick:F,children:"Login"}),e.jsx(Ms,{onClick:I,children:"Riwayat Pembaruan"}),e.jsx(Ms,{onClick:C,children:"Privasi"})]})]})})}),e.jsx(w,{container:!0,direction:"row",justifyContent:"start",children:e.jsxs(w,{item:!0,children:[e.jsx(w,{children:e.jsx(Ca,{variant:"caption",ml:1,children:"Tim Koordinasi Nasional SRIKANDI"})}),e.jsx(Me,{variant:"outlined",style:{borderTopLeftRadius:0,borderBottomLeftRadius:0,boxShadow:"0px 4px 4px 0px rgba(0, 0, 0, 0.25) inset, 0px 4px 4px 0px rgba(0, 0, 0, 0.25)"},children:e.jsx(w,{item:!0,p:1,xs:12,children:e.jsx("img",{src:zl,alt:"Lembaga Koordinasi",width:215,srcSet:"",className:"object-scale-down"})})})]})}),e.jsx(w,{container:!0,direction:"row"})]}),R,e.jsxs(w,{container:!0,sx:{backgroundImage:`url(${ad})`,bottom:0,backgroundRepeat:"no-repeat",backgroundSize:{xs:"100% 13rem",md:"100% 9rem"},height:{xs:"13rem",md:"9rem"},borderBottomRightRadius:{xs:0,md:10},borderBottomLeftRadius:{xs:0,md:10}},children:[e.jsx(w,{container:!0,direction:"row"}),e.jsx(w,{container:!0,direction:"row",justifyContent:"flex-end",alignItems:"end",children:e.jsxs(w,{container:!0,justifyContent:"flex-end",alignItems:"center",gap:1,paddingRight:3,children:[e.jsx(w,{item:!0,children:e.jsx(Ca,{color:"info.main",variant:"caption",children:"Didukung oleh :"})}),e.jsx("img",{src:Ul,alt:"",width:"120px",srcSet:""})]})}),e.jsx(w,{container:!0,direction:"row",justifyContent:"start",alignItems:"end",ml:1,mb:1,children:e.jsx(w,{item:!0,children:e.jsx(Ca,{fontSize:"0.6rem",color:"#eceff1",children:"Copyright © 2023 Arsip Nasional Republik Indonesia"})})})]})]})})})}),e.jsx(Xa,{sx:{backgroundImage:`url(${Zc})`,backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPositionX:"center",backgroundPositionY:"bottom",width:"100%",height:"100vh",display:{xs:"none",md:"flex"}},px:{xs:2,md:6},pt:2,children:e.jsxs(w,{container:!0,direction:"row",justifyContent:"center",alignItems:"center",children:[e.jsxs(w,{item:!0,md:12,lg:10,container:!0,direction:"row",justifyContent:"between",mb:1,p:{xs:2,md:3},sx:{backgroundColor:"#fff",borderRadius:"30px",boxShadow:"-5px -1px 30px #dedede"},children:[e.jsx(w,{item:!0,xs:12,mb:2,children:e.jsxs(w,{container:!0,direction:"row",justifyContent:"center",children:[e.jsx(w,{item:!0,xs:"auto",mx:3,children:e.jsx(Rs,{href:A,variant:"text",sx:{fontSize:"1.2rem",textTransform:"capitalize",color:"#606060"},children:"Dashboard"})}),e.jsx(w,{item:!0,xs:"auto",mx:3,children:e.jsx(Rs,{href:G,variant:"text",sx:{fontSize:"1.2rem",textTransform:"capitalize",color:"#606060"},children:"Bantuan"})}),e.jsx(w,{item:!0,xs:"auto",mx:3,children:e.jsx(Rs,{href:"/",variant:"text",sx:{fontSize:"1.2rem",textTransform:"capitalize"},children:"Login"})}),e.jsx(w,{item:!0,xs:"auto",mx:3,children:e.jsx(Rs,{href:X,variant:"text",sx:{fontSize:"1.2rem",textTransform:"capitalize",color:"#606060"},children:"Riwayat Pembaruan"})}),e.jsx(w,{item:!0,xs:"auto",mx:3,children:e.jsx(Rs,{onClick:C,variant:"text",sx:{fontSize:"1.2rem",textTransform:"capitalize",color:"#606060"},children:"Privasi"})})]})}),e.jsx(w,{item:!0,md:5,lg:6,xl:7,mb:{xs:3,md:0},container:!0,direction:"row",alignItems:"center",children:e.jsxs(w,{container:!0,direction:"row",justifyContent:"center",children:[e.jsx(w,{item:!0,xs:12,container:!0,direction:"row",justifyContent:"center",mb:3,children:e.jsx(w,{item:!0,xs:7,children:e.jsx("img",{src:Xr,alt:"Logo SRIKANDI",srcSet:Xr})})}),e.jsx(w,{item:!0,xs:10,children:e.jsxs(Ca,{align:"center",fontSize:"15px",children:[e.jsx("b",{children:"SRIKANDI"})," adalah aplikasi umum ",e.jsx("b",{children:"PERTAMA"})," yang ditetapkan berdasarkan Keputusan Menteri Pendayagunaan Aparatur Negara dan Reformasi Birokrasi Nomor 679 Tahun 2020 tentang Aplikasi Umum Bidang Kearsipan Dinamis."]})})]})}),e.jsx(w,{item:!0,md:7,lg:6,xl:5,container:!0,direction:"row",alignItems:"center",justifyContent:{xs:"center",md:"end"},children:e.jsxs(w,{item:!0,container:!0,direction:"row",justifyContent:"end",px:{md:4,lg:5},py:{md:4},xs:12,sx:{borderRadius:"55px",boxShadow:"inset 0 0 5px #818181"},children:[e.jsx(w,{item:!0,xs:12,container:!0,direction:"row",justifyContent:"center",children:e.jsx(w,{item:!0,xs:"auto",children:e.jsx(Ca,{variant:"caption",sx:{color:"#1D3557",textShadow:"0px 4px 4px rgba(0, 0, 0, 0.25)"},children:"Tim Koordinasi Nasional SRIKANDI"})})}),e.jsx(w,{item:!0,xs:12,sx:{display:"flex",alignItems:"center",justifyContent:"center",marginTop:2,marginInline:2},children:e.jsx("img",{src:zl,alt:"",srcSet:"",className:"h-14 object-scale-down"})}),R,e.jsx(w,{item:!0,xs:12,container:!0,direction:"row",justifyContent:"center",children:e.jsx("img",{src:Ul,alt:"",srcSet:"",width:"162px"})})]})})]}),e.jsx(w,{item:!0,xs:12,py:0,children:e.jsxs(Ca,{align:"center",variant:"body2",children:["Copyright © ",l," Arsip Nasional Republik Indonesia"]})}),e.jsx(ys,{open:m,children:e.jsx(Na,{children:e.jsx(br,{color:"error"})})})]})})]})}const vp={data:{}},Pp=(r=vp,s)=>{switch(s.type){case"SET_DATA":return{...r,data:s.payload};default:return r}},sd=$i(Pp);function aa({children:r}){const[s,n]=It(),{miniSidenav:t}=s,{pathname:i,state:l}=ga(),m=ha(),p=Es.getState().redirect,B=Es.getState().redirect_login,K=JSON.parse(Le.getItem("users")),W="",z=new Jn;a.useEffect(()=>{Sh(n,"dashboard"),i!="/profile"&&T()},[i]),a.useEffect(()=>{Le.getItem("access_token")?Es.dispatch({type:"SET_DATA",payload:JSON.parse(Le.getItem("menu"))}):Le.getItem("users")||(Le.setItem("prev_user_id",K==null?void 0:K.id),Le.setItem("prev_location",i),Le.setItem("prev_state",l),Le.setItem("prev_role_id",K==null?void 0:K.role_id),m(W+"/auth/login"))},[Le.getItem("menu")]),a.useEffect(()=>{Le.getItem("access_token")&&Es.dispatch({type:"SET_ROLES",payload:JSON.parse(Le.getItem("allrole"))})},[Le.getItem("allrole")]),a.useEffect(()=>{Le.getItem("access_token")&&sd.dispatch({type:"SET_DATA",payload:JSON.parse(Le.getItem("users"))})},[Le.getItem("users")]),a.useEffect(()=>{p&&(Es.dispatch({type:"SET_REDIRECT",payload:!1}),m(W+"/beranda")),B&&(Es.dispatch({type:"SET_REDIRECT_LOGIN",payload:!1}),Le.setItem("prev_user_id",K==null?void 0:K.id),Le.setItem("prev_location",i),Le.setItem("prev_state",l),Le.setItem("prev_role_id",K==null?void 0:K.role_id),m(W+"/auth/login"))},[p,B]);const T=()=>{if(K)if(K.last_password_updated!==null){const $=new Date(K==null?void 0:K.last_password_updated);$.setMonth($.getMonth()+3),$<new Date&&U.fire("Maaf",`Sistem mendeteksi 3 bulan terakhir kamu belum melakukan perubahan kata sandi 
Mohon untuk memperbarui kata sandi`,"warning").then(function(M){M&&m(W+"/profile",{state:{goTab:"kata-sandi"}})})}else L()},L=async()=>{await z.getUpdateData().then($=>{Le.setItem("users",JSON.stringify($.data.result))}).catch($=>{var H,V;const M=Oe((V=(H=$.response)==null?void 0:H.data)==null?void 0:V.result);console.log("Gagal update data sesi",M)})};return e.jsx(ie,{sx:({breakpoints:$,transitions:M,functions:{pxToRem:H}})=>({p:3,position:"relative",[$.up("xl")]:{marginLeft:H(t?120:274),transition:M.create(["margin-left","margin-right"],{easing:M.easing.easeInOut,duration:M.duration.standard})}}),children:r})}aa.propTypes={children:Z.node.isRequired};function td({icon:r,title:s,route:n,light:t=!1}){const i=n.slice(0,-1);return e.jsx(ie,{mr:{xs:0,xl:8},children:e.jsxs(Wd,{sx:{"& .MuiBreadcrumbs-separator":{color:({palette:{white:l,grey:m}})=>t?l.main:m[600]}},children:[e.jsx(va,{to:"/",children:e.jsx(le,{component:"span",variant:"body2",color:t?"white":"dark",opacity:t?.8:.5,sx:{lineHeight:0},children:e.jsx(Ss,{children:r})})}),i.map(l=>e.jsx(le,{component:"span",variant:"button",fontWeight:"regular",textTransform:"capitalize",color:t?"white":"dark",opacity:t?.8:.5,sx:{lineHeight:0},children:l.replaceAll("-"," ")},l)),e.jsx(le,{variant:"button",fontWeight:"regular",textTransform:"capitalize",color:t?"white":"dark",sx:{lineHeight:0},children:s.replaceAll("-"," ")})]})})}td.propTypes={icon:Z.node.isRequired,title:Z.string.isRequired,route:Z.oneOfType([Z.string,Z.array]).isRequired,light:Z.bool};function Cp(r){const{palette:s,borders:n,transitions:t}=r,{secondary:i,light:l}=s,{borderRadius:m}=n;return{display:"flex",alignItems:"center",width:"100%",color:i.main,py:1,px:2,borderRadius:m.md,transition:t.create("background-color",{easing:t.easing.easeInOut,duration:t.duration.standard}),"&:not(:last-child)":{mb:1.25},"&:hover":{backgroundColor:l.main}}}const Ma=a.forwardRef(({color:r,image:s,title:n,date:t,...i},l)=>e.jsx(Ms,{...i,ref:l,sx:m=>Cp(m),children:e.jsx(ie,{children:e.jsx(le,{variant:"button",textTransform:"capitalize",fontWeight:"regular",children:e.jsx("strong",{children:n})})})}));Ma.defaultProps={color:"dark"};Ma.propTypes={color:Z.oneOf(["primary","secondary","info","success","warning","error","light","dark"]),image:Z.node,title:Z.string,date:Z.string};function Tp(r,s){const{palette:n,boxShadows:t,functions:i,transitions:l,breakpoints:m,borders:p}=r,{transparentNavbar:B,absolute:K,light:W}=s,{dark:z,white:T,text:L,transparent:$}=n,{navbarBoxShadow:M}=t,{rgba:H,pxToRem:V}=i,{borderRadius:A}=p;return{boxShadow:B||K?"none":M,backdropFilter:B||K?"none":`saturate(200%) blur(${V(30)})`,backgroundColor:B||K?`${$.main} !important`:H(T.main,.8),color:()=>{let G;return W?G=T.main:B?G=L.main:G=z.main,G},top:K?0:V(12),minHeight:V(75),display:"grid",alignItems:"center",borderRadius:A.xl,paddingTop:V(8),paddingBottom:V(8),paddingRight:K?V(8):0,paddingLeft:K?V(16):0,"& > *":{transition:l.create("all",{easing:l.easing.easeInOut,duration:l.duration.standard})},"& .MuiToolbar-root":{display:"flex",justifyContent:"space-between",alignItems:"center",[m.up("sm")]:{minHeight:"auto",padding:`${V(4)} ${V(16)}`}}}}const Fp=({breakpoints:r})=>({flexDirection:"column",alignItems:"flex-start",justifyContent:"space-between",pt:.5,pb:.5,[r.up("md")]:{flexDirection:"row",alignItems:"center",paddingTop:"0",paddingBottom:"0"}}),Xl=({breakpoints:r},{isMini:s})=>({display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%",[r.up("md")]:{justifyContent:s?"space-between":"stretch",width:s?"100%":"max-content"},[r.up("xl")]:{justifyContent:"stretch !important",width:"max-content !important"}}),Dp=({typography:{size:r},breakpoints:s})=>({px:.75,"& .material-icons, .material-icons-round":{fontSize:`${r.md} !important`},"& .MuiTypography-root":{display:"none",[s.up("sm")]:{display:"inline-block",lineHeight:1.2,ml:.5}}}),Ip=({breakpoints:r})=>({display:"none !important",cursor:"pointer",[r.up("xl")]:{display:"inline-block !important"}}),Ap=({breakpoints:r})=>({display:"inline-block",lineHeight:0,[r.up("xl")]:{display:"none"}});Z.string.isRequired,Z.string.isRequired;Z.oneOfType([Z.object,Z.func]).isRequired;function la({absolute:r=!1,light:s=!1,isMini:n=!1}){const[t,i]=a.useState(),[l,m]=It(),{miniSidenav:p,transparentNavbar:B,fixedNavbar:K,openConfigurator:W}=l,[z,T]=a.useState(!1),L=ga().pathname.split("/").slice(1),$=sd.getState().data;let M=ha();const H=Es.getState().roles,[V,A]=a.useState(!1),G=new sl,X="MROe7xJvx5Na3gXFYkhrNAvLr99Bo9iJ6Wj/AjOCLWw=",[O,I]=a.useState(!1),_="",C=new Jn,k=async()=>{let u=Le.getItem("fcmToken");await C.deleteFcmToken({fcm_token:u}).then(()=>{Le.removeItem("fcmToken")}).catch(D=>{}),M(_+"/auth/login"),await G.logout(),Zi()},b=async()=>{A(!0)},y=u=>{A(!1)},o=()=>{M(_+"/profile")},F=async u=>{if(u.is_active=="N")return U.fire({title:"Gagal",html:`Role Pengguna <b>${u.desc_role}</b> Non-Aktif`,icon:"error",confirmButtonColor:"#F97316"});U.fire({title:"Konfirmasi",html:`Ganti role pengguna menjadi <b>${u.desc_role}</b>`,icon:"info"}).then(async D=>{D.isConfirmed&&(I(!0),await G.switchRole({role:u.role_id}).then(E=>{let J=JSON.parse(Bn.decode(E.data)),h=ms.AES.decrypt(J.value,ms.enc.Base64.parse(X),{iv:ms.enc.Base64.parse(J.iv)}).toString(ms.enc.Utf8);h=h.substring(h.indexOf("{")),h=JSON.parse(h),h.authorization.token&&(Le.setItem("access_token",JSON.stringify(h.authorization.token)),Le.setItem("users",JSON.stringify(h.user)),Le.setItem("allrole",JSON.stringify(h.allrole)),Le.setItem("menu",JSON.stringify(h.menu)),U.fire({title:"Berhasil",text:"Role Pengguna Berhasil diganti",icon:"success"}),I(!1),M(_+"/beranda"),A(!1),T(!1))}))})};a.useEffect(()=>{i(K?"sticky":"static");function u(){yh(m,K&&window.scrollY===0||!K)}return window.addEventListener("scroll",u),u(),()=>window.removeEventListener("scroll",u)},[m,K]);const x=()=>kr(m,!p),S=u=>T(u.currentTarget),f=()=>T(!1),R=()=>e.jsxs(Ls,{anchorEl:z,anchorReference:null,anchorOrigin:{vertical:"bottom",horizontal:"left"},open:!!z,onClose:f,sx:{mt:2},children:[e.jsx(Ma,{title:"Ubah Hak Akses",onClick:b}),e.jsx(Ma,{title:"Pengaturan Akun",onClick:o}),e.jsx(Ma,{title:"Keluar",onClick:k})]});return e.jsx("div",{children:e.jsxs(vo,{position:r?"absolute":t,color:"inherit",sx:u=>Tp(u,{transparentNavbar:B,absolute:r,light:s}),children:[e.jsxs(Jd,{sx:u=>Fp(u),children:[e.jsxs(ie,{color:"inherit",mb:{xs:1,md:0},sx:u=>Xl(u,{isMini:n}),children:[e.jsx(td,{icon:"home",title:L[L.length-1],route:L,light:s}),e.jsx(Ss,{fontSize:"medium",sx:Ip,onClick:x,children:p?"menu_open":"menu"})]}),n?null:e.jsx(ie,{sx:u=>Xl(u,{isMini:n}),children:e.jsx(Me,{children:e.jsxs(ie,{color:s?"white":"inherit",children:[e.jsxs(Si,{sx:Dp,size:"small",color:"inherit","aria-controls":"notification-menu","aria-haspopup":"true",variant:"contained",onClick:S,children:[e.jsx(gu,{className:"text-3xl me-2"}),e.jsxs("div",{className:"flex justify-around items-end flex-col",children:[e.jsx("span",{className:"cursor-pointer font-medium text-end text-sm tracking-wider max-w-full md:max-w-60 lg:max-w-80 break-words",title:$==null?void 0:$.nama,children:($==null?void 0:$.nama)??""}),e.jsx("span",{className:"cursor-pointer font-medium text-sm tracking-wider text-gray-400",children:($==null?void 0:$.desc_role)??""})]})]}),R(),e.jsx(ys,{onClose:y,open:V,fullWidth:!0,maxWidth:"sm",children:e.jsxs("div",{className:"mx-5 my-5 pb-5 w-Full px-4 shadow-md rounded-lg border-t-2 border-red-400",children:[e.jsx("div",{className:"flex justify-between pb-4",children:e.jsx("p",{className:"font-bold text-xl",children:"Pilih Hak Akses"})}),e.jsx("div",{className:"grid gap-3  grid-cols-1 ",id:"accordion-collapse-body-1",children:H&&H.map((u,D)=>{const E=u.desc_role==($==null?void 0:$.desc_role)?"red":u.is_active=="Y"?"green":"orange";return e.jsxs("span",{children:[e.jsx("span",{className:"hidden text-red-500 hover:shadow-red-400"}),e.jsx("span",{className:"hidden text-green-500 hover:shadow-green-400"}),e.jsx("span",{className:"hidden text-orange-500 hover:shadow-orange-400"}),e.jsxs("span",{onClick:()=>F(u),className:`flex border items-center rounded-md cursor-pointer transition duration-500 shadow-sm hover:shadow-md hover:shadow-${E}-400`,children:[e.jsx("div",{className:"w-16 p-2 shrink-0",children:e.jsx(Fo,{className:`h-12 w-12 text-${E}-500`})}),e.jsxs("div",{className:"p-2",children:[e.jsx("p",{className:"font-semibold text-lg",children:u.desc_role}),e.jsx("span",{className:"text-gray-600",children:u.desc_role==($==null?void 0:$.desc_role)?"Sedang digunakan":u.is_active=="Y"?"Aktif":"Tidak Aktif"})]})]})]},D)})})]})}),e.jsx(Si,{size:"small",color:"inherit",sx:Ap,onClick:x,children:e.jsx(Ss,{className:s?"text-white":"text-dark",children:p?"menu_open":"menu"})})]})})})]}),e.jsx(ys,{open:O,children:e.jsx(Na,{children:e.jsx(br,{color:"error"})})})]})})}la.propTypes={absolute:Z.bool,light:Z.bool,isMini:Z.bool};function ua({company:r,links:s}){const{size:n}=us,t=new Date().getFullYear();return e.jsxs(ie,{width:"100%",display:"flex",flexDirection:{xs:"column",lg:"row"},justifyContent:"space-between",alignItems:"center",px:1.5,children:[e.jsxs(ie,{display:"flex",justifyContent:"center",alignItems:"center",flexWrap:"wrap",color:"text",fontSize:n.sm,px:1.5,children:["Copyright © ",t," Arsip Nasional Republik Indonesia"]}),e.jsx(ie,{component:"ul",sx:({breakpoints:i})=>({display:"flex",flexWrap:"wrap",alignItems:"center",justifyContent:"center",listStyle:"none",mt:3,mb:0,p:0,[i.up("lg")]:{mt:0}})})]})}ua.propTypes={company:Z.objectOf(Z.string),links:Z.arrayOf(Z.object)};const Rr="https://api.arsip.go.id/user/api/";class Op{constructor(){ae(this,"getPaging",async s=>{const n=Ce.serializeObjectToQueryString(s);return await se.get(`${Rr}organisasi/lembaga?${n}`).then(l=>l)});ae(this,"post",async s=>await se.post(`${Rr}organisasi/lembaga`,s).then(i=>i));ae(this,"put",async(s,n)=>await se.put(`${Rr}organisasi/lembaga/${s}`,n).then(l=>l));ae(this,"delete",async s=>await se.delete(`${Rr}organisasi/lembaga/${s}`).then(i=>i));ae(this,"select",async s=>{const n=new URLSearchParams(s).toString();return(await se.get(`${Rr}organisasi/lembaga?${n}`).then(m=>m)).data.result.data})}}const q=({text:r,sortField:s,sortOrder:n,config:t,className:i="",handleClick:l})=>s?e.jsx("th",{scope:"col",className:"px-3 py-3 cursor-pointer max-w-[20rem] flex-wrap",onClick:l,children:e.jsxs("div",{className:`flex items-center ${i}`,children:[r,s!=""&&t.sortField==s?e.jsx("div",{className:"pl-2",children:n==1?e.jsx(fu,{size:"1.5em"}):e.jsx(ju,{size:"1.5em"})}):e.jsx(e.Fragment,{})]})}):e.jsx("th",{scope:"col",className:"px-6 py-3",children:e.jsx("div",{className:`flex items-center max-w-[20rem] flex-wrap ${i}`,children:r})});q.propTypes={text:Z.string,sortField:Z.string,sortOrder:Z.number,config:Z.object,className:Z.string,handleClick:Z.func};const pa=({list:r=null,config:s,handleClick:n})=>(r||(r=[10,25,50,100]),e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-sm font-normal text-gray-600 mb-5 lg:mb-0 me-2",children:"Menampilkan :"}),e.jsx("span",{className:"text-sm font-normal text-gray-500 mb-5 lg:mb-0 ",children:e.jsx("select",{defaultValue:s.rows,onChange:t=>n(t.target.value),className:"bg-gray-50 border !border-gray-300 focus:ring focus:ring-gray-300 text-gray-700 text-sm rounded-lg block w-fit p-1",children:r.map((t,i)=>e.jsx("option",{value:t,children:t},i))})})]}));pa.propTypes={list:Z.array,config:Z.object,handleClick:Z.func};const Bp=fs(_e)(({theme:r,ownerState:s})=>{const{borders:n,functions:t,typography:i,palette:l}=r,{variant:m,paginationSize:p,active:B}=s,{borderColor:K}=n,{pxToRem:W}=t,{fontWeightRegular:z,size:T}=i,{light:L}=l;let $=W(36);return p==="small"?$=W(30):p==="large"&&($=W(46)),{borderColor:K,margin:`0 ${W(2)}`,pointerEvents:B?"none":"auto",fontWeight:z,fontSize:T.sm,width:$,minWidth:$,height:$,minHeight:$,"&:hover, &:focus, &:active":{transform:"none",boxShadow:(m!=="gradient"||m!=="contained")&&"none !important",opacity:"1 !important"},"&:hover":{backgroundColor:L.main,borderColor:K}}}),Zl=a.createContext(),Kt=a.forwardRef(({item:r=!1,variant:s="gradient",color:n="info",size:t="medium",active:i=!1,children:l,...m},p)=>{const B=a.useContext(Zl),K=B?B.size:null,W=a.useMemo(()=>({variant:s,color:n,size:t}),[s,n,t]);return e.jsx(Zl.Provider,{value:W,children:r?e.jsx(Bp,{...m,ref:p,variant:i?B.variant:"outlined",color:i?B.color:"secondary",iconOnly:!0,circular:!0,ownerState:{variant:s,active:i,paginationSize:K},children:l}):e.jsx(ie,{display:"flex",justifyContent:"flex-end",alignItems:"center",sx:{listStyle:"none"},children:l})})});Kt.propTypes={item:Z.bool,variant:Z.oneOf(["gradient","contained"]),color:Z.oneOf(["white","primary","secondary","info","success","warning","error","light","dark"]),size:Z.oneOf(["small","medium","large"]),active:Z.bool,children:Z.node.isRequired};const xa=({currentPage:r,lastPage:s,displayCount:n,variant:t,color:i,handleClick:l})=>{const m=r>1,p=r<s,B=r>=4,K=r+3<=s,W=()=>{const T=[];let L=Math.max(r-Math.floor(n/2),1),$=Math.min(L+n-1,s);$-L+1<n&&(L=Math.max($-n+1,1)),$-L+1<n&&($=Math.min(L+n-1,s));for(let M=L;M<=$;M++)T.push(M);return T},z=W().map(T=>e.jsx(Kt,{item:!0,onClick:()=>l(Number(T)),active:r===T,children:T},T));return e.jsxs(Kt,{variant:t??"gradient",color:i??"info",children:[B&&e.jsx(Kt,{item:!0,onClick:()=>l(1),children:e.jsx(Ss,{sx:{fontWeight:"bold"},children:"keyboard_double_arrow_left"})}),m&&e.jsx(Kt,{item:!0,onClick:()=>l(r-1),children:e.jsx(Ss,{sx:{fontWeight:"bold"},children:"chevron_left"})}),z.length>6?e.jsx(ie,{width:"5rem",mx:1,children:e.jsx(Ye,{inputProps:{type:"number",min:1,max:W().length},value:customizedPageOptions[pageIndex],onChange:(handleInputPagination,handleInputPaginationValue)})}):z,p&&e.jsx(Kt,{item:!0,onClick:()=>l(r+1),children:e.jsx(Ss,{sx:{fontWeight:"bold"},children:"chevron_right"})}),K&&e.jsx(Kt,{item:!0,onClick:()=>l(s),children:e.jsx(Ss,{sx:{fontWeight:"bold"},children:"keyboard_double_arrow_right"})})]})};xa.propTypes={currentPage:Z.number.isRequired,lastPage:Z.number,displayCount:Z.number.isRequired,variant:Z.string,color:Z.string,handleClick:Z.func};function ia(){return e.jsx("div",{className:"relative ",children:e.jsx("div",{className:"absolute inset-y-10 flex items-center justify-center bg-opacity-50 bg-gray-700 w-full h-full",children:e.jsx(rs,{})})})}const Lp=/^[0-9.]*$/,$p=fa().shape({kode:ze().matches(Lp,{message:"Kode hanya dapat berupa angka dan titik"}).required("Kode harus diisi"),nama:ze().required("Nama harus diisi")}),Rp=fs(Yd)(({theme:r,ownerState:s})=>{const{palette:n,typography:t,borders:i,functions:l}=r,{color:m,circular:p,border:B,size:K,indicator:W,variant:z,container:T,children:L}=s,{white:$,dark:M,gradients:H,badgeColors:V}=n,{size:A,fontWeightBold:G}=t,{borderRadius:X,borderWidth:O}=i,{pxToRem:I,linearGradient:_}=l,C={xs:"0.575em 0.775em 0.4em",sm:"0.55em 0.9em",md:"0.75em 1em 0.65em",lg:"0.925em 1.375em 0.85em"},k=K==="xs"?A.xxs:A.xs,b=B?`${O[3]} solid ${$.main}`:"none";let y=K==="xs"?X.sm:X.md;p&&(y=X.section);const o=R=>{let u=I(20),D=I(20);return R==="medium"?(u=I(24),D=I(24)):R==="large"&&(u=I(32),D=I(32)),{width:u,height:D,display:"grid",placeItems:"center",textAlign:"center",borderRadius:"50%",padding:0,border:b}},F=R=>{const u=H[R]?_(H[R].main,H[R].state):_(H.info.main,H.info.state),D=R==="light"?M.main:$.main;return{background:u,color:D}},x=R=>{const u=V[R]?V[R].background:V.info.background;let D=V[R]?V[R].text:V.info.text;return R==="light"&&(D=M.main),{background:u,color:D}},S=()=>({position:"static",marginLeft:I(8),transform:"none",fontSize:I(9)}),f=()=>({position:"relative",transform:"none"});return{"& .MuiBadge-badge":{height:"auto",padding:C[K]||C.xs,fontSize:k,fontWeight:G,textTransform:"uppercase",lineHeight:1,textAlign:"center",whiteSpace:"nowrap",verticalAlign:"baseline",border:b,borderRadius:y,...W&&o(K),...(z==="gradient"||!z)&&F(m),...z==="contained"&&x(m),...!L&&!T&&S(),...T&&f()}}}),be=a.forwardRef(({color:r="info",variant:s="gradient",size:n="sm",circular:t=!1,indicator:i=!1,border:l=!1,container:m=!1,children:p=!1,...B},K)=>e.jsx(Rp,{...B,ownerState:{color:r,variant:s,size:n,circular:t,indicator:i,border:l,container:m,children:p},ref:K,color:"default",children:p}));be.propTypes={color:Z.oneOf(["primary","secondary","info","success","warning","error","light","dark"]),variant:Z.oneOf(["gradient","contained"]),size:Z.oneOf(["xs","sm","md","lg"]),circular:Z.bool,indicator:Z.bool,border:Z.bool,children:Z.node,container:Z.bool};const we=({keyword:r,type:s,onSearch:n,placeholder:t,selectOption:i,isDate:l,defaultValue:m=null})=>{const[p,B]=a.useState(m),K=[{value:"AKTIF",label:e.jsx("div",{children:e.jsx(be,{badgeContent:"AKTIF",color:"success",container:!0})})},{value:"NON-AKTIF",label:e.jsx("div",{children:e.jsx(be,{badgeContent:"NON-AKTIF",color:"error",container:!0})})}];return s=="input"?e.jsxs("div",{className:"flex justify-start items-center",children:[e.jsx(Ye,{onChange:W=>{n(r,W.target.value,W)},type:l?"date":"text",placeholder:`Cari ${t}`}),e.jsx(ku,{className:"h-5 w-5 ms-3 text-red-600 clear-input hidden cursor-pointer",onClick:W=>{n(r,"",W)}})]}):s=="select"?e.jsx(Gs,{placeholder:`Cari ${t}`,isDisabled:s=="select"&&!i,options:s=="status"?K:i,isClearable:!0,isSearchable:!1,className:"w-full z-30",onChange:W=>{B(W),n(r,(W==null?void 0:W.value)??"")},value:p}):e.jsx(sh,{formatCreateLabel:()=>"Cari",placeholder:`Cari ${t}`,isDisabled:s=="select"&&!i,options:s=="status"?K:i,isClearable:!0,className:"w-full z-30",onChange:W=>{B(W),n(r,(W==null?void 0:W.value)??"")},value:p})};we.propTypes={keyword:Z.string.isRequired,type:Z.oneOf(["input","select","status","select-input"]).isRequired,onSearch:Z.func,placeholder:Z.string.isRequired,selectOption:Z.array,isDate:Z.bool};const Fa=({open:r,onClose:s,children:n,height:t="default"})=>{if(r)document.body.style.overflow="hidden";else return document.body.style.overflow="auto",null;return e.jsx("div",{className:`fixed top-0 left-0 w-full h-full bg-black bg-opacity-50 
      flex justify-center items-center z-[1350] overscroll-contain over`,children:e.jsx("div",{className:th({"h-5/6":t==="large","h-max max-h-[80vh]":t==="default"},"bg-white rounded-xl shadow overflow-y-auto w-3/4 lg:w-1/2  flex flex-col justify-between"),children:n})})},Ep=()=>{const r="Referensi Instansi",[s,n]=a.useState(!1);a.useEffect(()=>{n(ge(r,"is_read",!0))},[]);const t=new Op,[i,l]=a.useState(!1),[m,p]=a.useState(null),[B,K]=Ga.useState(!1),[W,z]=a.useState(!1),[T,L]=a.useState("Simpan"),[$,M]=a.useState(""),[H,V]=a.useState(!0),[A,G]=a.useState(null),[X,O]=a.useState({id:0,nama:"",kode:""}),[I,_]=a.useState({total:0,from:1,to:1});let C=[];m==null?C=[]:C=m.map(P=>({kode:P.kode,nama:P.nama,created_at:P.created_at,action:e.jsxs("div",{className:"flex content-start justify-end w-full",children:[ge(r,"is_update")&&e.jsx(Va,{size:"1.5em",color:"#fbcf33",onClick:()=>u(P),className:"me-3 cursor-pointer",title:"Edit"}),e.jsx(Oa,{size:"1.5em",color:"#17c1e8",onClick:()=>D(P),className:"cursor-pointer",title:"View"}),ge(r,"is_delete")&&e.jsx($a,{size:"1.5em",color:"#e62e2d",onClick:()=>E(P),className:"ms-3 cursor-pointer",title:"Hapus"})]})}));const[k,b]=a.useState({page:1,rows:10,sortField:"",sortOrder:null,filters:{kode:{value:""},nama:{value:""}}});a.useEffect(()=>{y()},[k]);const y=async(P=!1)=>{P&&(k.page=1),l(!0),await t.getPaging(k).then(h=>{let d=h.data.result;d.data&&(G(d.last_page),p(d.data),l(!1)),l(!1),_({...I,to:d.to,from:d.from,total:d.total})}).catch(h=>{l(!1),_({...I,to:0,from:!1,total:0})})},o=Da((P,h,d=null)=>{if(d){let g=d.target;for(;g&&g.tagName!=="TD";)g=g.parentNode;if(g&&g.tagName==="TD"){const c=g.querySelector(".clear-input"),v=g.querySelector("input");h?c.classList.remove("hidden"):(c.classList.add("hidden"),v.value="")}}let j={...k};j.filters[P].value=h,j.page=1,b(j)},600),F=P=>{let h={...k};h.page=P,b(h),window.scrollTo({top:0,behavior:"smooth"})},x=P=>{let h={...k};h.rows=P,h.page=1,b(h)},S=P=>{let h={...k};h.sortField=P,k.sortField!=P?k.sortOrder==""&&(h.sortOrder=1):k.sortOrder==1?h.sortOrder=-1:(h.sortOrder="",h.sortField=""),h.page=1,b(h)},f=P=>{V(!1),P.id!==0?t.put(P.id,P).then(h=>{var d,j,g;U.fire((d=h.data)!=null&&d.success?"Berhasil":"Gagal",(j=h.data)==null?void 0:j.message,(g=h.data)!=null&&g.success?"success":"warning"),h.data.success&&(y(!0),J())}).catch(h=>{var j,g;const d=Oe(h.response.data.result);U.fire("Gagal",d??((g=(j=h.response)==null?void 0:j.data)==null?void 0:g.message),"error")}).finally(()=>V(!0)):t.post(P).then(h=>{var d,j,g;U.fire((d=h.data)!=null&&d.success?"Berhasil":"Gagal",(j=h.data)==null?void 0:j.message,(g=h.data)!=null&&g.success?"success":"warning"),h.data.success&&(y(!0),J())}).catch(h=>{var j,g;const d=Oe(h.response.data.result);U.fire("Gagal",d??((g=(j=h.response)==null?void 0:j.data)==null?void 0:g.message),"error")}).finally(()=>V(!0))},R=P=>{K(!0),X.id=0,X.nama="",X.kode="",L("Simpan"),M("Tambah Referensi Instansi"),z(!1)},u=P=>{console.log(P),K(!0),O({id:P.id,kode:P.kode,nama:P.nama}),L("Perbarui"),M("Ubah Referensi Instansi"),z(!1)},D=P=>{K(!0),O({id:P.id,kode:P.kode,nama:P.nama}),M("Lihat Referensi Instansi"),z(!0)},E=P=>{U.fire({title:"Konfirmasi",text:`Data ${P.nama} akan dihapus ?`,icon:"warning",showCancelButton:!0,confirmButtonText:"Hapus",cancelButtonText:"Batal",customClass:{confirmButton:"button button-error",cancelButton:"button button-info"}}).then(h=>{h.isConfirmed&&(ka(),t.delete(P.id).then(d=>{d.status==200&&y(),U.fire("Berhasil","Data Berhasil Dihapus","success")}).catch(d=>{var g,c;const j=Oe(d.response.data.result);U.fire("Gagal",j??((c=(g=d.response)==null?void 0:g.data)==null?void 0:c.message),"error")}))})},J=()=>{K(!1)};return e.jsxs(aa,{children:[e.jsx(la,{}),s&&e.jsxs(e.Fragment,{children:[e.jsx(ie,{pt:6,pb:3,children:e.jsxs(Me,{children:[e.jsx(ie,{px:3,pt:3,lineHeight:1,children:e.jsxs(w,{container:!0,direction:"row",justifyContent:"space-between",alignItems:"center",children:[e.jsx(w,{item:!0,children:e.jsx(le,{variant:"h5",fontWeight:"medium",children:"Daftar Referensi Instansi"})}),ge(r,"is_create")&&e.jsx(w,{item:!0,children:e.jsxs(_e,{variant:"gradient",color:"info",onClick:R,children:[e.jsx(Ea,{size:"1.5em"}),"Tambah Baru"]})})]})}),e.jsx("div",{className:"overflow-auto",children:e.jsxs("div",{className:"table p-10 min-w-full",children:[e.jsx("div",{className:"flex items-center justify-end mb-1",children:e.jsx(pa,{config:k,handleClick:x})}),e.jsxs("table",{className:"w-full text-sm text-left !text-gray-700 dark:text-gray-400 table-bordered",children:[e.jsx("thead",{className:"text-xs text-gray-500 uppercase border-b-2 mb-1",children:e.jsxs("tr",{children:[e.jsx(q,{text:"Kode",sortField:"kode",sortOrder:k.sortOrder,config:k,handleClick:()=>S("kode")}),e.jsx(q,{text:"Nama Instansi",sortField:"nama",sortOrder:k.sortOrder,config:k,handleClick:()=>S("nama")}),e.jsx(q,{text:"Tanggal Dibuat",className:"flex justify-center items-center min-w-[2rem]"}),e.jsx(q,{text:"Aksi",className:"justify-end min-w-[2rem]"})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{className:"border-b border-slate-300",children:[e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"kode",onSearch:o,placeholder:"Kode",type:"input"})}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"nama",onSearch:o,placeholder:"Instansi",type:"input"})}),e.jsx("td",{}),e.jsx("td",{})]}),i?e.jsx("tr",{className:"border-b border-slate-300",children:e.jsx("td",{colSpan:3,children:e.jsx(ia,{})})}):e.jsx(e.Fragment,{}),C.length?C.map((P,h)=>e.jsxs("tr",{className:"border-b border-slate-300",children:[e.jsx("td",{className:"max-w-[20rem] px-6 py-6",children:P.kode}),e.jsx("td",{className:"max-w-[20rem] px-6 py-6",children:P.nama}),e.jsx("td",{className:"max-w-[20rem] px-6 py-6",children:na(P.created_at)}),e.jsxs("td",{className:"px-1 text-right w-[2rem]",children:[" ",P.action," "]})]},h)):e.jsx(e.Fragment,{})]})]}),e.jsxs("nav",{className:"flex items-center justify-between p-4","aria-label":"Table navigation",children:[e.jsx("span",{className:"text-sm text-gray-400",children:I.from&&`Menampilkan ${Se(I.from)} sampai ${Se(I.to)} dari ${Se(I.total)} entri`}),e.jsx(xa,{currentPage:k.page,lastPage:A,displayCount:5,handleClick:F})]})]})})]})}),e.jsx(ua,{}),e.jsx(Fa,{open:B,onClose:J,children:e.jsxs("div",{children:[e.jsx(_a,{children:$}),e.jsx(ca,{initialValues:X,onSubmit:f,validateOnChange:!0,validationSchema:$p,children:e.jsx(da,{id:"form",className:"text-sm",children:e.jsxs("div",{className:"p-5",children:[e.jsx(w,{mt:1,children:e.jsxs(Na,{children:[e.jsx("input",{type:"hidden",name:"id",value:X.id}),e.jsx(ce,{name:"kode",children:({field:P,form:h,meta:d})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Kode",required:!0,error:d.error&&d.touched}),e.jsx(Ye,{...P,type:"text",placeholder:"Kode",error:d.error&&d.touched,disabled:W||T!="Simpan"}),e.jsx(ue,{text:d.error,error:d.error&&d.touched})]})})]})}),e.jsx(w,{mt:1,children:e.jsx(Na,{children:e.jsx(ce,{name:"nama",children:({field:P,form:h,meta:d})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Nama Instansi",required:!0,error:d.error&&d.touched}),e.jsx(Ye,{...P,type:"text",placeholder:"Nama",error:d.error&&d.touched,disabled:W}),e.jsx(ue,{text:d.error,error:d.error&&d.touched})]})})})})]})})}),e.jsx(ya,{children:e.jsxs(e.Fragment,{children:[!W&&e.jsx(Je,{submit:H,color:"success",formId:"form",text:T}),e.jsx(_e,{color:W?"dark":"error",variant:"gradient",onClick:()=>K(!1),children:W?"Tutup":"Batal"})]})})]})}),"e"]})]})},pn="https://api.arsip.go.id/user/api/";class Mp{constructor(){ae(this,"getPaging",async s=>{const n=Ce.serializeObjectToQueryString(s);return await se.get(`${pn}organisasi/jenis-organisasi?${n}`).then(l=>l)});ae(this,"post",async s=>await se.post(`${pn}organisasi/jenis-organisasi`,s).then(i=>i));ae(this,"put",async(s,n)=>await se.put(`${pn}organisasi/jenis-organisasi/${s}`,n).then(l=>l));ae(this,"delete",async s=>await se.delete(`${pn}organisasi/jenis-organisasi/${s}`).then(i=>i))}}const Kp=fa().shape({nama:ze().required("Nama harus diisi"),is_pusat:ze().required("Jenis Instansi harus dipilih")}),zp=()=>{const r="Referensi Jenis Instansi",[s,n]=a.useState(!1);a.useEffect(()=>{n(ge(r,"is_read",!0))},[]);const t=new Mp,[i,l]=a.useState(!1),[m,p]=a.useState(0),[B,K]=a.useState(null),[W,z]=Ga.useState(!1),[T,L]=a.useState(!1),[$,M]=a.useState("Simpan"),[H,V]=a.useState(""),[A,G]=a.useState(!0),[X,O]=a.useState("Jenis Instansi ini adalah Daerah"),[I,_]=a.useState(!1),[C,k]=a.useState(null),[b,y]=a.useState({id:0,nama:"",is_pusat:""}),[o,F]=a.useState({total:0,from:1,to:1});let x=[];B==null?x=[]:x=B.map(N=>({nama:N.nama,is_pusat:N.is_pusat,created_at:N.created_at,action:e.jsxs("div",{className:"flex content-start justify-end w-full",children:[ge(r,"is_update")&&e.jsx(Va,{size:"1.5em",color:"#fbcf33",onClick:()=>d(N),className:"me-3 cursor-pointer",title:"Ubah"}),e.jsx(Oa,{size:"1.5em",color:"#17c1e8",onClick:()=>j(N),className:"cursor-pointer",title:"Lihat"}),ge(r,"is_delete")&&e.jsx($a,{size:"1.5em",color:"#e62e2d",onClick:()=>g(N),className:"ms-3 cursor-pointer",title:"Hapus"})]})}));const[S,f]=a.useState({page:1,rows:10,sortField:"",sortOrder:null,filters:{nama:{value:""},is_pusat:{value:null}}});a.useEffect(()=>{R()},[S]);const R=async(N=!1)=>{N&&(S.page=1),l(!0),await t.getPaging(S).then(Q=>{let re=Q.data.result;re.data&&(k(re.last_page),K(re.data),p(re.total),l(!1)),l(!1),F({...o,to:re.to,from:re.from,total:re.total})}).catch(Q=>{l(!1),F({...o,to:0,from:!1,total:0})})},u=Da((N,Q,re=null)=>{if(console.log(N,Q),re){let xe=re.target;for(;xe&&xe.tagName!=="TD";)xe=xe.parentNode;if(xe&&xe.tagName==="TD"){const fe=xe.querySelector(".clear-input"),Ge=xe.querySelector("input");Q?fe.classList.remove("hidden"):(fe.classList.add("hidden"),Ge.value="")}}let ye={...S};ye.filters[N].value=Q,ye.page=1,f(ye)},600),D=N=>{let Q={...S};Q.page=N,f(Q),window.scrollTo({top:0,behavior:"smooth"})},E=N=>{let Q={...S};Q.rows=N,Q.page=1,f(Q)},J=N=>{let Q={...S};Q.sortField=N,S.sortField!=N?S.sortOrder==""&&(Q.sortOrder=1):S.sortOrder==1?Q.sortOrder=-1:(Q.sortOrder="",Q.sortField=""),Q.page=1,f(Q)},P=N=>{N.is_pusat=="Pusat"?N.is_pusat=!0:N.is_pusat=!1,G(!1),N.id!==0?t.put(N.id,N).then(Q=>{var re,ye,xe;U.fire((re=Q.data)!=null&&re.success?"Berhasil":"Gagal",(ye=Q.data)==null?void 0:ye.message,(xe=Q.data)!=null&&xe.success?"success":"warning"),Q.data.success&&(R(!0),c())}).catch(Q=>{var ye,xe;const re=Oe(Q.response.data.result);U.fire("Gagal",re??((xe=(ye=Q.response)==null?void 0:ye.data)==null?void 0:xe.message),"error")}).finally(()=>G(!0)):t.post(N).then(Q=>{var re,ye,xe;U.fire((re=Q.data)!=null&&re.success?"Berhasil":"Gagal",(ye=Q.data)==null?void 0:ye.message,(xe=Q.data)!=null&&xe.success?"success":"warning"),Q.data.success&&(R(!0),c())}).catch(Q=>{var ye,xe;const re=Oe(Q.response.data.result);U.fire("Gagal",re??((xe=(ye=Q.response)==null?void 0:ye.data)==null?void 0:xe.message),"error")}).finally(()=>G(!0))},h=N=>{z(!0),b.id=0,b.nama="",b.is_pusat="",M("Simpan"),V("Tambah"),L(!1)},d=N=>{z(!0),y({id:N.id,nama:N.nama,is_pusat:N.is_pusat?"Pusat":"Daerah"}),N.is_pusat?O("Jenis Instansi ini adalah Pusat"):O("Jenis Instansi ini adalah Daerah"),M("Perbarui"),V("Ubah"),L(!1)},j=N=>{z(!0),y({id:N.id,nama:N.nama,is_pusat:N.is_pusat?"Pusat":"Daerah"}),N.is_pusat?O("Jenis Instansi ini adalah Pusat"):O("Jenis Instansi ini adalah Daerah"),V("Lihat"),L(!0)},g=N=>{U.fire({title:"Konfirmasi",text:`Data ${N.nama} akan dihapus ?`,icon:"warning",showCancelButton:!0,confirmButtonText:"Hapus",cancelButtonText:"Batal",customClass:{confirmButton:"button button-error",cancelButton:"button button-info"}}).then(Q=>{Q.isConfirmed&&(ka(),t.delete(N.id).then(re=>{re.status==200&&R(),U.fire("Berhasil","Data Berhasil Dihapus","success")}).catch(re=>{var xe,fe;const ye=Oe(re.response.data.result);U.fire("Gagal",ye??((fe=(xe=re.response)==null?void 0:xe.data)==null?void 0:fe.message),"error")}))})},c=()=>{z(!1)},v=[{value:"Pusat",label:e.jsx("div",{children:e.jsx(be,{badgeContent:"Pusat",color:"success",container:!0})})},{value:"Daerah",label:e.jsx("div",{children:e.jsx(be,{badgeContent:"Daerah",color:"error",container:!0})})}];return e.jsxs(aa,{children:[e.jsx(la,{}),s&&e.jsxs(e.Fragment,{children:[e.jsx(ie,{pt:6,pb:3,children:e.jsxs(Me,{children:[e.jsx(ie,{px:3,pt:3,lineHeight:1,children:e.jsxs(w,{container:!0,direction:"row",justifyContent:"space-between",alignItems:"center",children:[e.jsx(w,{item:!0,children:e.jsx(le,{variant:"h5",fontWeight:"medium",children:"Daftar Referensi Jenis Instansi"})}),ge(r,"is_create")&&e.jsx(w,{item:!0,children:e.jsxs(_e,{variant:"gradient",color:"info",onClick:h,children:[e.jsx(Ea,{size:"1.5em"}),"Tambah Baru"]})})]})}),e.jsx("div",{className:"overflow-auto",children:e.jsxs("div",{className:"table p-10 min-w-full",children:[e.jsx("div",{className:"flex items-center justify-end mb-1",children:e.jsx(pa,{config:S,handleClick:E})}),e.jsxs("table",{className:"w-full text-sm text-left !text-gray-700 dark:text-gray-400 table-bordered",children:[e.jsx("thead",{className:"text-xs text-gray-500 uppercase border-b-2 mb-1",children:e.jsxs("tr",{children:[e.jsx(q,{text:"Nama Jenis Instansi",sortField:"nama",sortOrder:S.sortOrder,config:S,handleClick:()=>J("nama")}),e.jsx(q,{text:"Jenis Instansi",sortField:"is_pusat",sortOrder:S.sortOrder,config:S,handleClick:()=>J("is_pusat")}),e.jsx(q,{text:"Tanggal Dibuat",className:"flex justify-center items-center min-w-[2rem]"}),e.jsx(q,{text:"Aksi",className:"justify-end min-w-[2rem]"})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{className:"border-b border-slate-300",children:[e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"nama",onSearch:u,placeholder:"Nama",type:"input"})}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"is_pusat",onSearch:u,placeholder:"Jenis Instansi",type:"select",selectOption:v})}),e.jsx("td",{}),e.jsx("td",{})]}),i?e.jsx("tr",{className:"border-b border-slate-300",children:e.jsx("td",{colSpan:3,children:e.jsx(ia,{})})}):e.jsx(e.Fragment,{}),x.length?x.map((N,Q)=>e.jsxs("tr",{className:"border-b border-slate-300",children:[e.jsx("td",{className:"max-w-[20rem] px-6 py-6",children:N.nama}),e.jsx("td",{className:"max-w-[20rem] px-6 py-6",children:N.is_pusat?e.jsx("p",{className:"text-green-600",children:"Pusat"}):e.jsx("p",{className:"text-red-600",children:"Daerah"})}),e.jsx("td",{className:"max-w-[20rem] px-6 py-6",children:na(N.created_at)}),e.jsxs("td",{className:"px-1 text-right w-[2rem]",children:[" ",N.action," "]})]},Q)):e.jsx(e.Fragment,{})]})]}),e.jsxs("nav",{className:"flex items-center justify-between p-4","aria-label":"Table navigation",children:[e.jsx("span",{className:"text-sm text-gray-400",children:o.from&&`Menampilkan ${Se(o.from)} sampai ${Se(o.to)} dari ${Se(o.total)} entri`}),e.jsx(xa,{currentPage:S.page,lastPage:C,displayCount:5,handleClick:D})]})]})})]})}),e.jsx(ua,{}),e.jsx(Fa,{open:W,onClose:c,children:e.jsxs("div",{children:[e.jsxs(_a,{children:[H," ",r]}),e.jsx(ca,{initialValues:b,onSubmit:P,validateOnChange:!0,validationSchema:Kp,children:e.jsx(da,{id:"form",className:"text-sm",children:e.jsxs("div",{className:"p-5",children:[e.jsx(w,{mt:1,children:e.jsxs(Na,{children:[e.jsx("input",{type:"hidden",name:"id",value:b.id}),e.jsx(ce,{name:"nama",children:({field:N,form:Q,meta:re})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Nama Referensi Jenis Instansi",required:!0,error:re.error&&re.touched}),e.jsx(Ye,{...N,type:"text",placeholder:"Nama",error:re.error&&re.touched,disabled:T}),e.jsx(ue,{text:re.error,error:re.error&&re.touched})]})})]})}),e.jsx(w,{mt:1,children:e.jsx(Na,{children:e.jsx(ce,{name:"is_pusat",children:({field:N,form:Q,meta:re})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Jenis Instansi",required:!0,error:re.error&&re.touched}),e.jsxs("div",{className:"space-x-4 flex flex-row items-center",children:[e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{...N,type:"radio",className:"form-radio  w-4 h-4 text-blue-500 focus:ring-2 focus:ring-blue-500",value:"Pusat",onClick:()=>Q.values.is_pusat=="Pusat",checked:N.value==="Pusat",disabled:T}),e.jsx("span",{className:"text-gray-700",children:"Pusat"})]}),e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{...N,type:"radio",className:"form-radio  w-4 h-4 text-blue-500 focus:ring-2 focus:ring-blue-500",value:"Daerah",onClick:()=>Q.values.is_pusat=="Daerah",disabled:T,checked:N.value==="Daerah"}),e.jsx("span",{className:"text-gray-700",children:"Daerah"})]})]}),e.jsx(ue,{text:re.error,error:re.error&&re.touched})]})})})})]})})}),e.jsx(ya,{children:e.jsxs(e.Fragment,{children:[!T&&e.jsx(Je,{submit:A,color:"success",formId:"form",text:$}),e.jsx(_e,{color:T?"dark":"error",variant:"gradient",onClick:()=>z(!1),children:T?"Tutup":"Batal"})]})})]})})]})]})},Up=(r,s,n)=>{const{dark:t,white:i,text:l,light:m,inputColors:p,gradients:B,transparent:K}=ba,{size:W,fontWeightRegular:z}=us,{borderWidth:T,borderRadius:L}=Ja,{inputBoxShadow:$,lg:M}=Cs;let H,V,A,G;s?(H=p.error,V=p.error):n?(H=p.success,V=p.success):(H=p.borderColor.main,V=p.borderColor.focus),s?A=$.error:n?A=$.success:A=as([0,0],[0,2],p.boxShadow,1),r==="small"?G=Ie(32):r==="large"?G=Ie(48):G=Ie(40);const X=mu`
    from {
      opacity: 0;
      transform: perspective(999px) rotateX(-10deg) translateZ(0) translate3d(0, 0, 0);
    }
    to {
      opacity: 1;
      transform: perspective(999px) rotateX(0deg) translateZ(0) translate3d(0, 0, 5px);
    }
  `;return{control:(O,I)=>({display:"flex",alignItems:"center",width:"100%",height:G,padding:0,fontSize:r==="small"?W.xs:W.sm,fontWeight:z,backgroundColor:K.main,backgroundClip:"padding-box",border:`${T[1]} solid ${p.borderColor.main}`,appearance:"none",borderRadius:L.md,transition:"box-shadow 150ms ease, border-color 150ms ease",cursor:"pointer",borderColor:I.isFocused?V:H,boxShadow:I.isFocused?A:"none"}),valueContainer:()=>({display:"flex",alignItems:"center",width:"100%",height:"max-content",padding:`0 ${Ie(12)}`,color:t.main}),placeholder:()=>({position:"absolute",top:r==="small"?"52%":"51%",transform:"translateY(-50%)",marginLeft:0,marginRight:0,color:t.main,opacity:.5}),singleValue:()=>({position:"absolute",top:r==="small"?"52%":"51%",transform:"translateY(-50%)",color:l.main}),input:()=>({color:t.main,position:"relative",margin:0}),indicatorSeparator:()=>({display:"none"}),dropdownIndicator:(O,I)=>({display:"flex",padding:Ie(12),"& svg":{fill:l.main,width:Ie(14),height:Ie(14),strokeWidth:1,stroke:l.main,transform:I.selectProps.menuIsOpen?"rotate(180deg)":"rotate(0)",transition:"transform 250ms ease"}}),menu:O=>({...O,minWidth:Ie(160),boxShadow:M,padding:`${Ie(16)} ${Ie(8)}`,fontSize:W.sm,color:l.main,textAlign:"left",backgroundColor:i.main,borderRadius:L.md,transformOrigin:"50% 0",animation:`${X} 250ms ease forwards !important`}),menuList:O=>({...O,padding:0}),option:(O,I)=>({...O,position:"relative",minWidth:Ie(160),minHeight:"unset",padding:`${Ie(4.8)} ${Ie(100)} ${Ie(4.8)} ${Ie(16)}`,borderRadius:L.md,fontSize:W.sm,color:l.main,cursor:I.isDisabled?"not-allowed":"pointer",opacity:I.isDisabled?.5:1,userSelect:I.isDisabled?"none":"auto",transition:"background-color 300ms ease, color 300ms ease","&:after":{content:"'Press to select'",display:"block",fontSize:W.xs,position:"absolute",right:Ie(10),top:"52%",color:l.main,opacity:0,transform:"translateY(-50%)",transition:"opacity 300ms ease"},"&:hover, &:focus":{backgroundColor:I.isDisabled?K.main:m.main,color:I.isDisabled?"currentColor":t.main,"&:after":{content:I.isDisabled&&"''",opacity:.5}}}),multiValue:O=>({...O,margin:0,marginRight:Ie(4),borderRadius:L.section,display:"flex",alignItems:"center",backgroundColor:B.dark.state,color:i.main,padding:`${Ie(2)} 0 ${Ie(2)} ${Ie(4)}`,"& div:first-of-type":{color:i.main,paddingTop:Ie(4),paddingBottom:Ie(2)},"& div:last-of-type":{paddingTop:Ie(1.5),opacity:.8,"&:hover":{backgroundColor:K.main,color:i.main}}})}},In=a.forwardRef(({size:r="medium",error:s=!1,success:n=!1,...t},i)=>{const{light:l}=ba;return e.jsx(Gs,{...t,ref:i,styles:Up(r,s,n),theme:m=>({...m,colors:{...m.colors,primary25:l.main,primary:l.main}})})});In.propTypes={size:Z.oneOf(["small","medium","large"]),error:Z.bool,success:Z.bool};const gn="https://api.arsip.go.id/user/api/";class Vp{constructor(){ae(this,"getPaging",async s=>{const n=Ce.serializeObjectToQueryString(s);return await se.get(`${gn}organisasi/instansi?${n}`).then(l=>l)});ae(this,"post",async s=>await se.post(`${gn}organisasi/instansi`,s).then(i=>i));ae(this,"put",async(s,n)=>await se.put(`${gn}organisasi/instansi/${s}`,n).then(l=>l));ae(this,"delete",async s=>await se.delete(`${gn}organisasi/instansi/${s}`).then(i=>i))}}const qp=fa().shape({lembaga_id:wa().required("Data Referensi harus dipilih"),jenis_organisasi_id:wa().required("Jenis Organisasi harus dipilih"),kode:ze().required("Kode harus diisi"),jenis_organisasi_id:wa().required("Jenis Organisasi harus dipilih"),singkatan:ze().required("Singkatan harus diisi"),status:ze().required("Status harus dipilih")}),eo="https://api.arsip.go.id/user/api/",ao="https://api.arsip.go.id/master/api/",so="https://api.arsip.go.id/arsip/api/",to="https://api.arsip.go.id/naskah-keluar/api/",ro="https://api.arsip.go.id/naskah-masuk/api/";class qa{constructor(){ae(this,"select",async(s,n,t,i=!0)=>{let l=eo;t=="master"&&(l=ao),t=="arsip"&&(l=so),t=="nk"&&(l=to),t=="nm"&&(l=ro);const m=Ce.serializeObjectToQueryString(n),B=await se.get(`${l}${s}?${m}`).then(W=>W);return i?B.data.result.data:B.data.result});ae(this,"detail",async(s,n,t="")=>{let i=eo;return t=="master"&&(i=ao),t=="arsip"&&(i=so),t=="nk"&&(i=to),t=="nm"&&(i=ro),(await se.get(`${i}${s}/${n}`).then(B=>B)).data.result})}}const ra=({url:r,selectedData:s,isDisabled:n,callbackChange:t,callbackInputChange:i,keyValue:l,placeholder:m,optionParam:p,className:B,isMulti:K=!1,targetService:W=null,paginate:z=!0,mode:T="",isClearable:L=!0})=>{const $=new qa,[M,H]=a.useState(null),[V,A]=a.useState([]),[G,X]=a.useState(1),[O,I]=a.useState(""),[_,C]=a.useState(!1),[k,b]=a.useState(!1),[y,o]=a.useState(""),F=(u,D=1)=>{var E=k,J=10;O!=u&&(D=1,E=!1),I(u),E||(C(!0),$.select(r,{page:D,rows:J,search:u||"",...p},W,z).then(async P=>{C(!1);const h=P;if(D===1)A(h);else if((h==null?void 0:h.length)>0){var d=[...V,...h];A(d)}else b(!0),X(1)}).catch(P=>{}).finally(()=>C(!1)))},x=(u,D="")=>{I(u),C(!0),$.select(r,{cursor:y,search:u||"",...p},W,!1).then(async E=>{C(!1),o(E==null?void 0:E.next_cursor);const J=E==null?void 0:E.data;let P=[...V,...J];A(P)}).catch(E=>{}).finally(()=>C(!1))};a.useEffect(()=>{s!=null?H(s):H(null)},[s]);const S=u=>{H(u),t(u)},f=async u=>{if(T==="cursor")y&&x();else if(!k){const D=G+1;X(D),F(O,D)}},R=os(async u=>{i&&i(u),(u==null?void 0:u.length)>2&&(T==="cursor"?x(u):F(u))},1e3);return e.jsx(Gs,{cacheOptions:!0,value:M,getOptionValue:u=>u[l[0]],getOptionLabel:u=>u[l[1]],options:V,onChange:S,onInputChange:u=>{b(!1),R(u)},isDisabled:n,isClearable:L,onMenuOpen:os(()=>{(!(V!=null&&V.length)||O!=null&&O.length)&&(I(""),T==="cursor"?x():F())},500),onMenuClose:()=>{b(!1),X(1),A([]),o("")},loadingMessage:()=>"Memuat Data..",noOptionsMessage:()=>"Data tidak ditemukan",placeholder:m,className:`text-sm ${B}`,isMulti:K,targetService:W,isLoading:_,maxMenuHeight:180,menuPortalTarget:document.body,onMenuScrollToBottom:f,styles:{menuPortal:u=>({...u,zIndex:5e3}),option:(u,{data:D})=>({...u,backgroundColor:D!=null&&D.is_update?"#f9b4b4":u.backgroundColor,":before":D!=null&&D.is_update?{content:'"[ PERLU PEMBARUAN ]"',display:"block",fontSize:11,fontWeight:700}:""}),multiValue:(u,{data:D})=>({...u,backgroundColor:D!=null&&D.is_update?"#f9b4b4":u.backgroundColor,alignItems:D!=null&&D.is_update?"center":u.alignItems,display:"flex",":before":D!=null&&D.is_update?{content:'"[ PERLU PEMBARUAN ]"',display:"block",fontSize:11,padding:"4px 0px 4px 4px",fontWeight:700,whiteSpace:"nowrap"}:""})}})};ra.propTypes={url:Z.string.isRequired,selectedData:Z.oneOfType([Z.object,Z.array]),isDisabled:Z.bool,callbackChange:Z.func.isRequired,keyValue:Z.arrayOf(Z.string).isRequired,placeholder:Z.string,optionParam:Z.object,className:Z.string,isMulti:Z.bool,paginate:Z.bool,targetService:Z.string,menuPortalTarget:Z.element};const Ka=({error:r,name:s,value:n,onChange:t,rows:i,cols:l,className:m,placeHolder:p,disabled:B})=>e.jsx("textarea",{name:s,rows:i??4,value:n,onChange:t,cols:l,className:`block p-2.5 text-sm rounded-lg w-full border-2 ${m} ${r?"border focus:ring-red-500 focus:border-red-500 block w-full p-2.5 dark:!text-red-500 dark:placeholder-red-500 dark:border-red-500 bg-red-50 border-red-500 !text-red-900 placeholder-red-700":""}`,placeholder:p,disabled:B});Ka.propTypes={error:Z.bool,name:Z.string.isRequired,value:Z.string,onChange:Z.func.isRequired,rows:Z.number,cols:Z.number,className:Z.string,placeHolder:Z.string,disabled:Z.bool};const Hp=()=>{const r="Daftar Instansi",s=new URLSearchParams(location.search).get("status"),[n,t]=a.useState(!1);a.useEffect(()=>{t(ge(r,"is_read",!0))},[]);const i=new Vp,[l,m]=a.useState(!1),[p,B]=a.useState(null),[K,W]=a.useState(null),[z,T]=a.useState(null),[L,$]=Ga.useState(!1),[M,H]=a.useState(!1),[V,A]=a.useState("Simpan"),[G,X]=a.useState(!0),[O,I]=a.useState(""),[_,C]=a.useState(null),[k,b]=a.useState({id:0,lembaga_id:"",jenis_organisasi_id:"",singkatan:"",alamat:"",status:"AKTIF",usage:0,kode:""}),[y,o]=a.useState({total:0,from:1,to:1});let F=[];p==null?F=[]:F=p.map(c=>{var v;return{id:c.id,nomenklatur_ori:c.nomenklatur_ori,nama:c.nama,jenis_organisasi:(v=c.jenis_organisasi)==null?void 0:v.nama,status:c.status,created_at:c.created_at,action:e.jsxs("div",{className:"flex content-start justify-end w-full",children:[ge(r,"is_update")&&e.jsx(Va,{size:"1.5em",color:"#fbcf33",onClick:()=>h(c),className:"me-3 cursor-pointer",title:"Edit"}),e.jsx(Oa,{size:"1.5em",color:"#17c1e8",onClick:()=>d(c),className:"cursor-pointer",title:"View"}),ge(r,"is_delete")&&e.jsx($a,{size:"1.5em",color:"#e62e2d",onClick:()=>j(c),className:"ms-3 cursor-pointer",title:"Hapus"})]})}});const[x,S]=a.useState({page:1,rows:10,sortField:"",sortOrder:null,filters:{nomenklatur_ori:{value:""},nama:{value:""},"jenis_organisasi.nama":{value:""},status:{value:s||""}}});a.useEffect(()=>{f()},[x]);const f=async(c=!1)=>{c&&(x.page=1),m(!0),await i.getPaging(x).then(v=>{let N=v.data.result;N.data&&(C(N.last_page),B(N.data),m(!1)),m(!1),o({...y,to:N.to,from:N.from,total:N.total})}).catch(v=>{m(!1),o({...y,to:0,from:!1,total:0})})},R=Da((c,v,N=null)=>{if(N){let re=N.target;for(;re&&re.tagName!=="TD";)re=re.parentNode;if(re&&re.tagName==="TD"){const ye=re.querySelector(".clear-input"),xe=re.querySelector("input");v?ye.classList.remove("hidden"):(ye.classList.add("hidden"),xe.value="")}}let Q={...x};Q.filters[c].value=v,Q.page=1,S(Q)},600),u=c=>{let v={...x};v.page=c,S(v),window.scrollTo({top:0,behavior:"smooth"})},D=c=>{let v={...x};v.rows=c,v.page=1,S(v)},E=c=>{let v={...x};v.sortField=c,x.sortField!=c?x.sortOrder==""&&(v.sortOrder=1):x.sortOrder==1?v.sortOrder=-1:(v.sortOrder="",v.sortField=""),v.page=1,S(v)},J=c=>{X(!1),c.id!==0?i.put(c.id,c).then(v=>{var N,Q,re;U.fire((N=v.data)!=null&&N.success?"Berhasil":"Gagal",(Q=v.data)==null?void 0:Q.message,(re=v.data)!=null&&re.success?"success":"warning"),v.data.success&&(f(!0),g())}).catch(v=>{var Q,re;const N=Oe(v.response.data.result);U.fire("Gagal",N??((re=(Q=v.response)==null?void 0:Q.data)==null?void 0:re.message),"error")}).finally(()=>X(!0)):i.post(c).then(v=>{var N,Q,re;U.fire((N=v.data)!=null&&N.success?"Berhasil":"Gagal",(Q=v.data)==null?void 0:Q.message,(re=v.data)!=null&&re.success?"success":"warning"),v.data.success&&(f(!0),g())}).catch(v=>{var Q,re;const N=Oe(v.response.data.result);U.fire("Gagal",N??((re=(Q=v.response)==null?void 0:Q.data)==null?void 0:re.message),"error")}).finally(()=>X(!0))},P=c=>{$(!0),b({id:0,lembaga_id:"",jenis_organisasi_id:"",singkatan:"",alamat:"",status:"AKTIF",usage:0,kode:""}),W([]),T([]),A("Simpan"),I("Tambah"),H(!1)},h=c=>{var v;$(!0),b({id:c.id,lembaga_id:c.lembaga_id,jenis_organisasi_id:c.jenis_organisasi_id,singkatan:c.singkatan,alamat:c.alamat,status:c.status,usage:c.usage,kode:(v=c.lembaga)==null?void 0:v.kode}),c.lembaga&&W(c.lembaga),c.jenis_organisasi&&T(c.jenis_organisasi),A("Perbarui"),I("Ubah"),H(!1)},d=c=>{var v;$(!0),b({id:c.id,lembaga_id:c.lembaga_id,jenis_organisasi_id:c.jenis_organisasi_id,singkatan:c.singkatan,alamat:c.alamat,status:c.status,usage:c.usage,kode:(v=c.lembaga)==null?void 0:v.kode}),c.lembaga&&W(c.lembaga),c.jenis_organisasi&&T(c.jenis_organisasi),I("Lihat"),H(!0)},j=c=>{U.fire({title:"Konfirmasi",text:`Data ${c.nama} akan dihapus ?`,icon:"warning",showCancelButton:!0,confirmButtonText:"Hapus",cancelButtonText:"Batal",customClass:{confirmButton:"button button-error",cancelButton:"button button-info"}}).then(v=>{v.isConfirmed&&(ka(),i.delete(c.id).then(N=>{N.status==200&&f(),U.fire("Berhasil","Data Berhasil Dihapus","success")}).catch(N=>{var re,ye;const Q=Oe(N.response.data.result);U.fire("Gagal",Q??((ye=(re=N.response)==null?void 0:re.data)==null?void 0:ye.message),"error")}))})},g=()=>{$(!1)};return e.jsxs(aa,{children:[e.jsx(la,{}),n&&e.jsxs(e.Fragment,{children:[e.jsx(ie,{pt:6,pb:3,children:e.jsxs(Me,{children:[e.jsx(ie,{px:3,pt:3,lineHeight:1,children:e.jsxs(w,{container:!0,direction:"row",justifyContent:"space-between",alignItems:"center",children:[e.jsx(w,{item:!0,children:e.jsx(le,{variant:"h5",fontWeight:"medium",children:"Daftar Instansi"})}),ge(r,"is_create")&&e.jsx(w,{item:!0,children:e.jsxs(_e,{variant:"gradient",color:"info",onClick:P,children:[e.jsx(Ea,{size:"1.5em"}),"Tambah Baru"]})})]})}),e.jsx("div",{className:"overflow-auto",children:e.jsxs("div",{className:"table p-10 min-w-full",children:[e.jsx("div",{className:"flex items-center justify-end mb-1",children:e.jsx(pa,{config:x,handleClick:D})}),e.jsxs("table",{className:"w-full text-sm text-left !text-gray-700 dark:text-gray-400 table-bordered",children:[e.jsx("thead",{className:"text-xs text-gray-500 uppercase border-b-2 mb-1",children:e.jsxs("tr",{children:[e.jsx(q,{text:"Kode",sortField:"nomenklatur_ori",sortOrder:x.sortOrder,config:x,handleClick:()=>E("nomenklatur_ori")}),e.jsx(q,{text:"Nama Instansi",sortField:"nama",sortOrder:x.sortOrder,config:x,handleClick:()=>E("nama")}),e.jsx(q,{text:"Jenis Instansi",sortField:"jenis_organisasi.nama",sortOrder:x.sortOrder,config:x,handleClick:()=>E("jenis_organisasi.nama")}),e.jsx(q,{text:"Status",sortField:"status",sortOrder:x.sortOrder,config:x,handleClick:()=>E("status")}),e.jsx(q,{text:"Tanggal Dibuat",className:"flex justify-center items-center min-w-[2rem]"}),e.jsx(q,{text:"Aksi",className:"justify-end min-w-[2rem]"})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{className:"border-b border-slate-300",children:[e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx("div",{className:"flex justify-around items-center",children:e.jsx(we,{keyword:"nomenklatur_ori",onSearch:R,placeholder:"Kode",type:"input"})})}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"nama",onSearch:R,placeholder:"Nama",type:"input"})}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"jenis_organisasi.nama",onSearch:R,placeholder:"Jenis Instansi",type:"input"})}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"status",onSearch:R,placeholder:"Kode",type:"status"})}),e.jsx("td",{}),e.jsx("td",{})]}),l?e.jsx("tr",{className:"border-b border-slate-300",children:e.jsx("td",{colSpan:5,children:e.jsx(ia,{})})}):e.jsx(e.Fragment,{}),F.length?F.map((c,v)=>e.jsxs("tr",{className:"border-b border-slate-300",children:[e.jsx("td",{className:"max-w-[20rem] px-6 py-6",children:c.nomenklatur_ori}),e.jsx("td",{className:"max-w-[20rem] px-6 py-6",children:c.nama}),e.jsx("td",{className:"max-w-[20rem] px-6 py-6",children:c.jenis_organisasi}),e.jsx("td",{className:"max-w-[20rem] px-6 py-6",children:c.status==="AKTIF"?e.jsx(be,{badgeContent:"Aktif",color:"success",container:!0}):e.jsx(be,{badgeContent:"Non-Aktif",color:"error",container:!0})}),e.jsx("td",{className:"max-w-[20rem] px-6 py-6",children:na(c.created_at)}),e.jsxs("td",{className:"px-1 text-right w-[2rem]",children:[" ",c.action," "]})]},v)):e.jsx(e.Fragment,{})]})]}),e.jsxs("nav",{className:"flex items-center justify-between p-4","aria-label":"Table navigation",children:[e.jsx("span",{className:"text-sm text-gray-400",children:y.from&&`Menampilkan ${Se(y.from)} sampai ${Se(y.to)} dari ${Se(y.total)} entri`}),e.jsx(xa,{currentPage:x.page,lastPage:_,displayCount:5,handleClick:u})]})]})})]})}),e.jsx(ua,{}),e.jsx(Fa,{open:L,onClose:g,children:e.jsxs("div",{children:[e.jsxs(_a,{children:[O," ",r]}),e.jsx(ca,{initialValues:k,onSubmit:J,validateOnChange:!0,validationSchema:qp,children:e.jsx(da,{id:"form",className:"text-sm",children:e.jsxs("div",{className:"px-5 grid grid-cols-12 mb-10 lg:mb-0",children:[e.jsxs("div",{className:"col-span-12 lg:col-span-6 mb-5 lg:mb-0",children:[e.jsx(w,{mt:1,children:e.jsxs("div",{className:"p-3",children:[e.jsx("input",{type:"hidden",name:"id",value:k.id}),e.jsx(ce,{name:"lembaga_id",children:({field:c,form:v,meta:N})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Referensi Instansi",required:!0,error:N.error&&N.touched}),e.jsx(ra,{url:"organisasi/lembaga/select",isDisabled:M||O!="Tambah",callbackChange:Q=>{v.setFieldValue("lembaga_id",(Q==null?void 0:Q.id)??""),v.setFieldValue("kode",(Q==null?void 0:Q.kode)??"")},selectedData:K,keyValue:["id","nama"],placeholder:"Pilih Instansi...",className:"text-base"}),e.jsx(ue,{text:N.error,error:N.error&&N.touched})]})})]})}),e.jsx(w,{mt:1,children:e.jsx(Na,{children:e.jsx(ce,{name:"kode",children:({field:c,form:v,meta:N})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Kode",required:!0,error:N.error&&N.touched}),e.jsx(Ye,{...c,type:"text",error:N.error&&N.touched,disabled:!0}),e.jsx(ue,{text:N.error,error:N.error&&N.touched})]})})})}),e.jsx(w,{mt:1,children:e.jsx("div",{className:"p-3",children:e.jsx(ce,{name:"jenis_organisasi_id",children:({field:c,form:v,meta:N})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Jenis Instansi",required:!0,error:N.error&&N.touched}),e.jsx(ra,{url:"organisasi/jenis-organisasi/select",isDisabled:M,callbackChange:Q=>{v.setFieldValue("jenis_organisasi_id",(Q==null?void 0:Q.id)??"")},selectedData:z,keyValue:["id","nama"],placeholder:"Pilih Jenis Instansi...",className:"text-base"}),e.jsx(ue,{text:N.error,error:N.error&&N.touched})]})})})})]}),e.jsxs("div",{className:"col-span-12 lg:col-span-6",children:[e.jsx(w,{children:e.jsx(Na,{children:e.jsx(ce,{name:"singkatan",children:({field:c,form:v,meta:N})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Singkatan Instansi",required:!0,error:N.error&&N.touched}),e.jsx(Ye,{...c,type:"text",error:N.error&&N.touched,disabled:M,placeholder:"Singkatan Instansi"}),e.jsx(ue,{text:N.error,error:N.error&&N.touched})]})})})}),e.jsx(w,{mt:1,children:e.jsx(Na,{children:e.jsx(ce,{name:"status",children:({field:c,form:v,meta:N})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Status",required:!0,error:N.error&&N.touched}),e.jsxs("div",{className:"space-x-4 flex items-center",children:[e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{...c,type:"radio",className:"form-radio  w-4 h-4 text-blue-500 focus:ring-2 focus:ring-blue-500",value:"AKTIF",checked:c.value=="AKTIF",disabled:M||O=="Tambah"}),e.jsx("span",{className:"text-gray-700",children:"Aktif"})]}),e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{...c,type:"radio",className:"form-radio  w-4 h-4 text-blue-500 focus:ring-2 focus:ring-blue-500",value:"NON-AKTIF",disabled:M||O=="Tambah",checked:c.value=="NON-AKTIF"}),e.jsx("span",{className:"text-gray-700",children:"Non Aktif"})]})]}),e.jsx(ue,{text:N.error,error:N.error&&N.touched})]})})})}),e.jsx(w,{children:e.jsx(Na,{children:e.jsx(ce,{name:"alamat",children:({field:c,form:v,meta:N})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Alamat Instansi",error:N.error&&N.touched}),e.jsx(Ka,{...c,placeHolder:"Masukan Alamat Instansi..",error:N.error&&N.touched,disabled:M&&O!="Ubah"}),e.jsx(ue,{text:N.error,error:N.error&&N.touched})]})})})})]})]})})}),e.jsx(ya,{children:e.jsxs(e.Fragment,{children:[!M&&e.jsx(Je,{submit:G,color:"success",formId:"form",text:V}),e.jsx(_e,{color:M?"dark":"error",variant:"gradient",onClick:()=>$(!1),children:M?"Tutup":"Batal"})]})})]})})]})]})},Er="https://api.arsip.go.id/user/api/";class Gp{constructor(){ae(this,"getPaging",async s=>{const n=Ce.serializeObjectToQueryString(s);return await se.get(`${Er}organisasi/unit-kerja?${n}`).then(l=>l)});ae(this,"post",async s=>await se.post(`${Er}organisasi/unit-kerja`,s).then(i=>i));ae(this,"put",async(s,n)=>await se.put(`${Er}organisasi/unit-kerja/${s}`,n).then(l=>l));ae(this,"delete",async s=>await se.delete(`${Er}organisasi/unit-kerja/${s}`).then(i=>i));ae(this,"tree",async s=>{const n=Ce.serializeObjectToQueryString(s);return await se.get(`${Er}organisasi/unit-kerja/tree?${n}`).then(l=>l)})}}const Wp=fa().shape({nama:ze().required("Nama Unit Kerja harus diisi"),parent_id:wa().required("Induk Unit Kerja harus dipiilih"),singkatan:ze().required("Singkatan Unit Kerja harus diisi"),status:ze().required("Status harus dipilih")}),tl=({node:r,loadChildrenTree:s,removeChildren:n,treeLoading:t})=>{const i=()=>{r.leaf||(t(r),r.children?(r.isExpanded=!1,n(r),t(r,!1)):(r.isExpanded=!0,s(r).then(()=>{t(r,!1)}).catch(m=>{t(r,!1)})))},l=m=>m.icon=="pi pi-building"?e.jsx(bu,{className:"w-6 h-6 pe-3"}):m.icon=="icon-child"?e.jsx(Ci,{className:"w-7 h-6 pe-3"}):m.icon=="not-icon-child"?e.jsx(_u,{className:"w-7 h-6 pe-3"}):e.jsx(yu,{className:"w-6 h-6 pe-3"});return e.jsxs("div",{className:"",children:[e.jsxs("div",{onClick:i,className:"cursor-pointer hover:border hover:rounded-md px-2 flex items-center justify-start w-full py-1",children:[l(r),r.label??r.nama,r.leaf!==void 0&&!r.leaf&&e.jsx("div",{className:"ps-10",children:r.isExpanded==!1||r.isExpanded==null?e.jsx(is,{className:"w-5 h-5"}):e.jsx(Do,{className:"w-5 h-5"})}),r.isLoading&&e.jsx(rs,{className:"w-5 h-5 ms-4",color:"secondary"})]}),r.isExpanded&&e.jsx("div",{style:{marginLeft:"20px"},children:r.children?r.children.map(m=>e.jsx(tl,{node:m,loadChildrenTree:s,removeChildren:n,treeLoading:t},`tree-node-${r.id}-child-${m.id}`)):null})]})};tl.propTypes={node:Z.object.isRequired,loadChildrenTree:Z.func.isRequired,removeChildren:Z.func.isRequired,treeLoading:Z.func.isRequired};const Yn=({data:r,loadChildrenTree:s,removeChildren:n,treeLoading:t})=>e.jsx("div",{children:r.map(i=>e.jsx(tl,{node:i,loadChildrenTree:s,removeChildren:n,treeLoading:t},`tree-node-${i.id}`))});Yn.propTypes={data:Z.array.isRequired,loadChildrenTree:Z.func.isRequired,removeChildren:Z.func.isRequired,treeLoading:Z.func.isRequired};const Us=[{value:"AKTIF",label:e.jsx("div",{children:e.jsx(be,{badgeContent:"AKTIF",color:"success",container:!0})})},{value:"NON-AKTIF",label:e.jsx("div",{children:e.jsx(be,{badgeContent:"NON-AKTIF",color:"error",container:!0})})}],Jp=[{value:!0,label:e.jsx("div",{children:e.jsx(be,{badgeContent:"YA",color:"success",container:!0})})},{value:!1,label:e.jsx("div",{children:e.jsx(be,{badgeContent:"TIDAK",color:"secondary",container:!0})})}],Yp=[{value:"Ya",label:e.jsx("div",{children:e.jsx(be,{badgeContent:"Ya",color:"success",container:!0})})},{value:"Tidak",label:e.jsx("div",{children:e.jsx(be,{badgeContent:"Tidak",color:"dark",container:!0})})}],Ct=[{value:"BELUM",label:e.jsx("div",{children:e.jsx(be,{badgeContent:"BELUM",color:"warning",container:!0})})},{value:"SUDAH",label:e.jsx("div",{children:e.jsx(be,{badgeContent:"SUDAH",color:"success",container:!0})})}],$n=[{value:"BELUM",label:e.jsx("div",{children:e.jsx(be,{badgeContent:"BELUM",color:"warning",container:!0})})},{value:"SETUJU",label:e.jsx("div",{children:e.jsx(be,{badgeContent:"SETUJU",color:"success",container:!0})})},{value:"DITOLAK",label:e.jsx("div",{children:e.jsx(be,{badgeContent:"DITOLAK",color:"error",container:!0})})}],Rn=[{value:"BELUM",label:e.jsx("div",{children:e.jsx(be,{badgeContent:"BELUM",color:"warning",container:!0})})},{value:"SETUJU",label:e.jsx("div",{children:e.jsx(be,{badgeContent:"SETUJU",color:"success",container:!0})})},{value:"TOLAK",label:e.jsx("div",{children:e.jsx(be,{badgeContent:"DITOLAK",color:"error",container:!0})})}],Tt=[{value:"BELUM",label:e.jsx("div",{children:e.jsx(be,{badgeContent:"BELUM",color:"warning",container:!0})})},{value:"KIRIM",label:e.jsx("div",{children:e.jsx(be,{badgeContent:"TERKIRIM",color:"success",container:!0})})},{value:"BATAL",label:e.jsx("div",{children:e.jsx(be,{badgeContent:"BATAL",color:"error",container:!0})})}],lt=[{value:"BELUM",label:e.jsx("div",{children:e.jsx(be,{badgeContent:"BELUM",color:"warning",container:!0})})},{value:"SUDAH",label:e.jsx("div",{children:e.jsx(be,{badgeContent:"SUDAH",color:"success",container:!0})})}],Ws=[{value:"BELUM",label:e.jsx("div",{children:e.jsx(be,{badgeContent:"TIDAK ADA",color:"secondary",container:!0})})},{value:"SUDAH",label:e.jsx("div",{children:e.jsx(be,{badgeContent:"DIBERKASKAN",color:"success",container:!0})})}],En=[{value:"TUTUP",label:e.jsx("div",{children:e.jsx(be,{badgeContent:"TUTUP",color:"warning",container:!0})})},{value:"BUKA",label:e.jsx("div",{children:e.jsx(be,{badgeContent:"BUKA",color:"success",container:!0})})}],Qp=[{value:"berkas_aktif",label:e.jsx("div",{children:e.jsx(be,{badgeContent:"SRIKANDI",color:"info",container:!0})})},{value:"berkas_mandiri",label:e.jsx("div",{children:e.jsx(be,{badgeContent:"MANDIRI",color:"secondary",container:!0})})}],bi=[{value:"Musnah",label:e.jsx("div",{children:e.jsx(be,{badgeContent:"MUSNAH",color:"primary",container:!0})})},{value:"Permanen",label:e.jsx("div",{children:e.jsx(be,{badgeContent:"PERMANEN",color:"warning",container:!0})})}],Xp=[{value:"USUL",label:e.jsx("div",{children:e.jsx(be,{badgeContent:"USUL",color:"secondary",container:!0})})},{value:"VERIFIKASI",label:e.jsx("div",{children:e.jsx(be,{badgeContent:"VERIFIKASI",color:"info",container:!0})})},{value:"UPLOAD",label:e.jsx("div",{children:e.jsx(be,{badgeContent:"SELESAI",color:"success",container:!0})})}],Zp=[{value:"USUL",label:e.jsx("div",{children:e.jsx(be,{badgeContent:"DIUSUL",color:"secondary",container:!0})})},{value:"VERIFIKASI",label:e.jsx("div",{children:e.jsx(be,{badgeContent:"VERIFIKASI",color:"info",container:!0})})},{value:"UPLOAD",label:e.jsx("div",{children:e.jsx(be,{badgeContent:"SELESAI",color:"success",container:!0})})}],eg=[{value:"USUL",label:e.jsx("div",{children:e.jsx(be,{badgeContent:"DIUSUL",color:"secondary",container:!0})})},{value:"VERIFIKASI",label:e.jsx("div",{children:e.jsx(be,{badgeContent:"VERIFIKASI",color:"info",container:!0})})},{value:"UPLOAD",label:e.jsx("div",{children:e.jsx(be,{badgeContent:"SELESAI",color:"success",container:!0})})}],rd=[{value:"INTERNAL",label:"Internal Srikandi"},{value:"SRIKANDI",label:"Eksternal Srikandi"},{value:"EKSTERNAL",label:"Eksternal Non Srikandi"}],nd=[{value:"Naskah Masuk",label:"Naskah Masuk"},{value:"Naskah Keluar",label:"Naskah Keluar"}],Qn=["DISPOSISI","KOORDINASI","ARAHAN","DISPOSISI SELESAI","KOORDINASI SELESAI","ARAHAN SELESAI","NASKAH TEMBUSAN SELESAI","NASKAH MASUK SELESAI"],ag=[{name:"file_sk",title:"SK Panitia Penilai"},{name:"file_notul",title:"Notula Rapat Panitia Penilai Arsip"},{name:"file_pertimbangan",title:"Surat Pertimbangan Panitia Penilai Arsip"},{name:"file_persetujuan",title:"Surat Persetujuan Tertulis Kepala ANRI"},{name:"file_keputusan",title:"Surat Keputusan Penetapan Pemusnahan"},{name:"file_berita",title:"Berita Acara Pemusnahan Arsip"},{name:"file_daftar",title:"Daftar Arsip yang dimusnahkan"}],sg=[{name:"file_sk",title:"SK Panitia Penilai"},{name:"file_notul",title:"Notula Rapat Panitia Penilai Arsip"},{name:"file_pertimbangan",title:"Surat Pertimbangan Panitia Penilai Arsip"},{name:"file_persetujuan",title:"Surat Persetujuan Tertulis Kepala ANRI"},{name:"file_keputusan",title:"Surat Keputusan Penetapan Penyerahan"},{name:"file_berita",title:"Berita Acara Penyerahan Arsip"},{name:"file_daftar",title:"Daftar Arsip yang dimusnahkan"}],tg=()=>{const r="Unit Kerja",s=ga(),n=new URLSearchParams(s.search).get("status"),[t,i]=a.useState(!1);a.useEffect(()=>{i(ge(r,"is_read",!0))},[]);const l=new Gp,m=JSON.parse(Le.getItem("users")),[p,B]=a.useState(!1),[K,W]=a.useState(null),[z,T]=a.useState([]),[L,$]=Ga.useState(!1),[M,H]=a.useState(!1),[V,A]=a.useState("Simpan"),[G,X]=a.useState(""),[O,I]=a.useState(!0),[_,C]=a.useState(null),[k,b]=a.useState(null),[y,o]=a.useState(!1),[F,x]=a.useState({id:0,nama:"",parent_id:0,singkatan:"",status:"AKTIF",alamat:"",usage:0}),[S,f]=a.useState({total:0,from:1,to:1});let R=[];K==null?R=[]:R=K.map(te=>({nama:te.nama,parent_nama:te.parent_nama,status:te.status,action:e.jsxs("div",{className:"flex flex-row gap-2 items-center justify-center  w-full",children:[ge(r,"is_update")&&m.public_organisasi_id!=te.id&&m.organisasi_id!=te.id&&e.jsx(Va,{size:"1.5em",color:"#fbcf33",onClick:()=>c(te),className:"cursor-pointer",title:"Ubah"}),e.jsx(Oa,{size:"1.5em",color:"#17c1e8",onClick:()=>v(te),className:"cursor-pointer",title:"Lihat"}),ge(r,"is_delete")&&m.public_organisasi_id!=te.id&&m.organisasi_id!=te.id&&e.jsx($a,{size:"1.5em",color:"#e62e2d",onClick:()=>N(te),className:"cursor-pointer",title:"Hapus"})]})}));const[u,D]=a.useState({page:1,rows:10,sortField:"",sortOrder:null,search:"",filters:{nama:{value:""},"parent.nama":{value:""},status:{value:n||""}}});a.useEffect(()=>{E()},[u]);const E=async(te=!1)=>{te&&(u.page=1),B(!0),await l.getPaging({...u,group_role:m.group_role}).then(ne=>{let pe=ne.data.result;pe.data&&(C(pe.last_page),W(pe.data),B(!1)),B(!1),f({...S,to:pe.to,from:pe.from,total:pe.total})}).catch(ne=>{B(!1),f({...S,to:0,from:!1,total:0})})},J=Da((te,ne,pe=null)=>{if(pe){let oe=pe.target;for(;oe&&oe.tagName!=="TD";)oe=oe.parentNode;if(oe&&oe.tagName==="TD"){const je=oe.querySelector(".clear-input"),Ne=oe.querySelector("input");ne?je.classList.remove("hidden"):(je.classList.add("hidden"),Ne.value="")}}let he={...u};he.filters[te].value=ne,he.page=1,D(he)},600),P=te=>{let ne={...u};ne.page=te,D(ne),window.scrollTo({top:0,behavior:"smooth"})},h=te=>{let ne={...u};ne.rows=te,ne.page=1,D(ne)},d=te=>{let ne={...u};ne.sortField=te,u.sortField!=te?u.sortOrder==""&&(ne.sortOrder=1):u.sortOrder==1?ne.sortOrder=-1:(ne.sortOrder="",ne.sortField=""),ne.page=1,D(ne)},j=te=>{I(!1),te.id!==0?l.put(te.id,te).then(ne=>{var pe,he,oe;U.fire((pe=ne.data)!=null&&pe.success?"Berhasil":"Gagal",(he=ne.data)==null?void 0:he.message,(oe=ne.data)!=null&&oe.success?"success":"warning"),ne.data.success&&(E(!0),xe(),Q())}).catch(ne=>{var he,oe;const pe=Oe(ne.response.data.result);U.fire("Gagal",pe??((oe=(he=ne.response)==null?void 0:he.data)==null?void 0:oe.message),"error")}).finally(()=>I(!0)):l.post(te).then(ne=>{var pe,he,oe;U.fire((pe=ne.data)!=null&&pe.success?"Berhasil":"Gagal",(he=ne.data)==null?void 0:he.message,(oe=ne.data)!=null&&oe.success?"success":"warning"),ne.data.success&&(E(!0),xe(),Q())}).catch(ne=>{var he,oe;const pe=Oe(ne.response.data.result);U.fire("Gagal",pe??((oe=(he=ne.response)==null?void 0:he.data)==null?void 0:oe.message),"error")}).finally(()=>I(!0))},g=te=>{$(!0),x({id:0,nama:"",parent_id:"",singkatan:"",status:"AKTIF",alamat:"",usage:0}),T([]),A("Simpan"),X("Tambah"),H(!1)},c=te=>{$(!0),x({id:te.id,nama:te.nama,parent_id:te.parent_id,singkatan:te.singkatan,status:te.status,alamat:te.alamat,usage:0}),T({id:te.parent_id,nama:te.parent_nama}),A("Perbarui"),X("Ubah"),H(!1)},v=te=>{$(!0),x({id:te.id,nama:te.nama,parent_id:te.parent_id,singkatan:te.singkatan,status:te.status,alamat:te.alamat,usage:0}),T({id:te.parent_id,nama:te.parent_nama}),X("Lihat"),H(!0)},N=te=>{U.fire({title:"Konfirmasi",text:`Data ${te.nama} akan dihapus ?`,icon:"warning",showCancelButton:!0,confirmButtonText:"Hapus",cancelButtonText:"Batal",customClass:{confirmButton:"button button-error",cancelButton:"button button-info"}}).then(ne=>{ne.isConfirmed&&(ka(),l.delete(te.id).then(pe=>{pe.status==200&&(E(),xe()),U.fire("Berhasil","Data Berhasil Dihapus","success")}).catch(pe=>{var oe,je;const he=Oe(pe.response.data.result);U.fire("Gagal",he??((je=(oe=pe.response)==null?void 0:oe.data)==null?void 0:je.message),"error")}))})},Q=()=>{$(!1)},[re,ye]=a.useState({type:"root",parent_id:0});a.useEffect(()=>{xe()},[re]);const xe=async()=>{o(!0),await l.tree({...re,group_role:m.group_role}).then(te=>{let ne=te.data.result;b(ne.data)}).catch(te=>{}).finally(()=>o(!1))},fe=async te=>{let ne={};te.type=="root"?ne={type:"data-parent",parent_id:te.id,root_level:te.root_level}:te.type=="data-parent"?ne={type:"data-child",parent_id:te.id,root_level:te.root_level}:ne={type:"data-child",parent_id:te.id,root_level:te.root_level},await l.tree(ne).then(pe=>{const he=[...k],oe=Pe(he,te.id);oe&&(oe.children=pe.data.result.data),b(he)})},Ge=(te,ne=!0)=>{const pe=[...k],he=Pe(pe,te.id);he&&(he.isLoading=ne),b(pe)},$e=te=>{const ne=[...k],pe=Pe(ne,te.id);pe&&(pe.children=null),b(ne)},Pe=(te,ne)=>{for(const pe of te){if(pe.id===ne)return pe;if(pe.children){const he=Pe(pe.children,ne);if(he)return he}}return null};return e.jsxs(aa,{children:[e.jsx(la,{}),t&&e.jsxs(e.Fragment,{children:[e.jsx(ie,{pt:6,pb:3,children:e.jsxs(Me,{children:[e.jsx(ie,{px:3,pt:3,lineHeight:1,children:e.jsxs(w,{container:!0,direction:"row",justifyContent:"space-between",alignItems:"center",children:[e.jsx(w,{item:!0,children:e.jsxs(le,{variant:"h5",fontWeight:"medium",children:["Daftar ",r]})}),ge(r,"is_create")&&e.jsx(w,{item:!0,children:e.jsxs(_e,{variant:"gradient",color:"info",onClick:g,children:[e.jsx(Ea,{size:"1.5em"}),"Tambah Baru"]})})]})}),e.jsx("div",{className:"overflow-auto",children:e.jsxs("div",{className:"table p-10 min-w-full",children:[e.jsx("div",{className:"flex items-center justify-end mb-1",children:e.jsx(pa,{config:u,handleClick:h})}),e.jsxs("table",{className:"w-full text-sm text-left !text-gray-700 dark:text-gray-400 table-bordered",children:[e.jsx("thead",{className:"text-xs text-gray-500 uppercase border-b-2 mb-1",children:e.jsxs("tr",{children:[e.jsx(q,{text:"Nama Unit Kerja",sortField:"nama",sortOrder:u.sortOrder,config:u,handleClick:()=>d("nama")}),e.jsx(q,{text:"Induk Unit Kerja / Satker",sortField:"parent.nama",sortOrder:u.sortOrder,config:u,handleClick:()=>d("parent.nama")}),e.jsx(q,{text:"Status",sortField:"status",sortOrder:u.sortOrder,config:u,handleClick:()=>d("status")}),e.jsx(q,{text:"Aksi",className:"flex justify-center min-w-[2rem]"})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{className:"border-b border-slate-300",children:[e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"nama",onSearch:J,placeholder:"Nama",type:"input"})}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"parent.nama",onSearch:J,placeholder:"Induk Unit Kerja",type:"input"})}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"status",onSearch:J,placeholder:"Status",type:"status",selectOption:Us,defaultValue:Us.find(te=>te.value==n)})}),e.jsx("td",{})]}),p?e.jsx("tr",{children:e.jsx("td",{colSpan:4,children:e.jsx(ia,{})})}):e.jsx(e.Fragment,{}),R.length?R.map((te,ne)=>e.jsxs("tr",{className:"border-b border-slate-300",children:[e.jsx("td",{className:" max-w-[20rem] px-6 py-6",children:te.nama}),e.jsx("td",{className:" max-w-[20rem] px-6 py-6",children:te.parent_nama}),e.jsx("td",{className:"max-w-[20rem] px-6 py-6",children:te.status==="AKTIF"?e.jsx(be,{badgeContent:"Aktif",color:"success",container:!0}):e.jsx(be,{badgeContent:"Non-Aktif",color:"error",container:!0})}),e.jsxs("td",{className:"px-1 text-right w-[2rem]",children:[" ",te.action," "]})]},ne)):e.jsx(e.Fragment,{})]})]}),e.jsxs("nav",{className:"flex items-center justify-between p-4","aria-label":"Table navigation",children:[e.jsx("span",{className:"text-sm text-gray-400",children:S.from&&`Menampilkan ${Se(S.from)} sampai ${Se(S.to)} dari ${Se(S.total)} entri`}),e.jsx(xa,{currentPage:u.page,lastPage:_,displayCount:5,handleClick:P})]})]})})]})}),e.jsx(ie,{pt:6,pb:3,children:e.jsxs(Me,{children:[e.jsx(ie,{px:3,pt:3,children:e.jsx(w,{container:!0,direction:"row",justifyContent:"space-between",alignItems:"center",children:e.jsx(w,{item:!0,children:e.jsxs(le,{variant:"h5",fontWeight:"medium",children:["Bagan ",r]})})})}),e.jsxs("div",{className:"p-8 border",children:[y&&e.jsx("div",{className:"flex w-full justify-center",children:e.jsx(rs,{})}),k&&k.length&&e.jsx(Yn,{data:k,loadChildrenTree:fe,removeChildren:$e,treeLoading:Ge})]})]})}),e.jsx(ua,{}),e.jsx(Fa,{open:L,onClose:Q,children:e.jsxs("div",{children:[e.jsxs(_a,{children:[G," ",r]}),e.jsx(ca,{initialValues:F,onSubmit:j,validateOnChange:!0,validationSchema:Wp,children:e.jsx(da,{id:"form",className:"text-sm",children:e.jsxs("div",{className:"p-5 grid grid-cols-12 mb-10 lg:mb-0",children:[e.jsxs("div",{className:"col-span-12 lg:col-span-6",children:[e.jsx(w,{mt:1,children:e.jsx("div",{className:"p-3",children:e.jsx(ce,{name:"parent_id",children:({field:te,form:ne,meta:pe})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Induk Unit Kerja",required:!0,error:pe.error&&pe.touched}),e.jsx(ra,{url:"organisasi/unit-kerja/select",isDisabled:M,callbackChange:he=>{ne.setFieldValue("parent_id",(he==null?void 0:he.id)??"")},selectedData:z,keyValue:["id","nama"],placeholder:"Pilih Induk Unit Kerja...",className:"text-base",optionParam:{"select-target":"induk-satker",group_role:m.group_role,except:F.id}}),e.jsx(ue,{text:pe.error,error:pe.error&&pe.touched})]})})})}),e.jsx(w,{mt:1,children:e.jsx(Na,{children:e.jsx(ce,{name:"nama",children:({field:te,form:ne,meta:pe})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Nama Unit Kerja",required:!0,error:pe.error&&pe.touched}),e.jsx(Ye,{...te,type:"text",error:pe.error&&pe.touched,disabled:M,placeholder:"Nama Unit Kerja"}),e.jsx(ue,{text:pe.error,error:pe.error&&pe.touched})]})})})}),e.jsx(w,{children:e.jsx(Na,{children:e.jsx(ce,{name:"singkatan",children:({field:te,form:ne,meta:pe})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Singkatan",required:!0,error:pe.error&&pe.touched}),e.jsx(Ye,{...te,type:"text",error:pe.error&&pe.touched,disabled:M,placeholder:"Singkatan"}),e.jsx(ue,{text:pe.error,error:pe.error&&pe.touched})]})})})})]}),e.jsxs("div",{className:"col-span-12 lg:col-span-6 mb-5 lg:mb-0",children:[e.jsx(w,{children:e.jsx(Na,{children:e.jsx(ce,{name:"status",children:({field:te,form:ne,meta:pe})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Status",required:!0,error:pe.error&&pe.touched}),e.jsxs("div",{className:"space-x-4 flex flex-row items-center",children:[e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{...te,type:"radio",className:"form-radio  w-4 h-4 text-blue-500 focus:ring-2 focus:ring-blue-500",value:"AKTIF",checked:te.value=="AKTIF",disabled:M||G=="Tambah"}),e.jsx("span",{className:"text-gray-700",children:"Aktif"})]}),e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{...te,type:"radio",className:"form-radio  w-4 h-4 text-blue-500 focus:ring-2 focus:ring-blue-500",value:"NON-AKTIF",disabled:M||G=="Tambah",checked:te.value=="NON-AKTIF"}),e.jsx("span",{className:"text-gray-700",children:"Non Aktif"})]})]}),e.jsx(ue,{text:pe.error,error:pe.error&&pe.touched})]})})})}),e.jsx(w,{children:e.jsx(Na,{children:e.jsx(ce,{name:"alamat",children:({field:te,form:ne,meta:pe})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Alamat Unit Kerja",required:!1,error:pe.error&&pe.touched}),e.jsx(Ka,{...te,placeHolder:"Masukan Alamat Unit Kerja..",error:pe.error&&pe.touched,disabled:M}),e.jsx(ue,{text:pe.error,error:pe.error&&pe.touched})]})})})})]})]})})}),e.jsx(ya,{children:e.jsxs(e.Fragment,{children:[!M&&e.jsx(Je,{submit:O,color:"success",formId:"form",text:V}),e.jsx(_e,{color:M?"dark":"error",variant:"gradient",onClick:()=>$(!1),children:M?"Tutup":"Batal"})]})})]})})]})]})};fs(Xa)(({theme:r})=>{const{palette:s,typography:n,borders:t,functions:i}=r,{text:l,white:m,dark:p,inputColors:B}=s,{size:K}=n,{borderRadius:W,borderWidth:z}=t,{rgba:T}=i;return{display:"flex",alignItems:"center",border:`${z[1]} solid ${B.borderColor.main} !important`,borderRadius:W.md,"& .dz-default":{margin:"0 auto !important"},"& .dz-default .dz-button":{color:`${l.main} !important`,fontSize:`${K.sm} !important`},"& .dz-preview .dz-details":{color:`${p.main} !important`,opacity:"1 !important","& .dz-size span, & .dz-filename span":{backgroundColor:`${T(m.main,.7)} !important`}},"& .dz-error-message":{display:"none !important"},"& .dz-remove":{color:`${p.main} !important`,textDecoration:"none","&:hover, &:focus":{textDecoration:"none !important"}}}});Z.objectOf(Z.any).isRequired;const _i="https://api.arsip.go.id/user/api/",id=Ft.create({baseURL:"url",headers:{"Content-Type":"multipart/form-data",Accept:"application/json"}});id.interceptors.request.use(async r=>{const s=await JSON.parse(Le.getItem("access_token"));return s!==null&&(r.headers.Authorization=`Bearer ${s}`),r});class ld{constructor(){ae(this,"postUpdate",async s=>await id.post(`${_i}organisasi/logo-instansi`,s).then(i=>i));ae(this,"get",async()=>await se.get(`${_i}organisasi/logo-instansi`).then(t=>t));ae(this,"deleteLogo",async s=>await se.delete(`${_i}organisasi/logo-instansi/${s}`).then(i=>i))}}const rg={flex:1,display:"flex",flexDirection:"column",alignItems:"center",padding:"20px",borderWidth:2,borderRadius:2,borderColor:"#eeeeee",borderStyle:"dashed",backgroundColor:"#fafafa",color:"#bdbdbd",outline:"none",transition:"border .24s ease-in-out",minHeight:"400px",justifyContent:"center"},ng={borderColor:"#2196f3"},ig={borderColor:"#00e676"},lg={borderColor:"#ff1744"},og=({onFileSelected:r,isReset:s})=>{const[n,t]=a.useState(""),[i,l]=a.useState(""),[m,p]=a.useState(!1),[B,K]=a.useState(!1),[W,z]=a.useState(!1),T=a.useCallback(I=>{if(I.length>0){const _=I[0],C=2*1024*1024,k={width:500,height:500};if(_.type.startsWith("image/")&&_.size<=C){const b=new FileReader;b.onload=()=>{const y=new Image;y.src=b.result,y.onload=()=>{y.width<=k.width&&y.height<=k.height?(z(!1),K(!1),t(b.result),l(_.name),r(_)):(p(!0),z(!1),K(!1),l(""),r(null),U.fire("Terjadi Kesalahan","Logo harus memiliki resolusi maksimum 500px lebar dan 500px tinggi.","warning"))}},b.readAsDataURL(_)}else _.type.startsWith("image/")?(z(!1),K(!0),l(""),r(null),U.fire("Terjadi Kesalahan","Ukuran File Maksimal 2MB","warn")):(z(!0),K(!1),l(""),r(null))}else z(!0),K(!1),l(""),r(null)},[]),{acceptedFiles:L,getRootProps:$,getInputProps:M,isFocused:H,isDragAccept:V,isDragReject:A,isDragActive:G}=sn({accept:{"image/png":[".png"]},useFsAccessApi:!1,multiple:!1,onDrop:T}),X=()=>{t(""),l(""),r(null)};a.useMemo(()=>({...rg,...H?ng:{},...V?ig:{},...A?lg:{}}),[H,V,A]);const O=n?{onClick:I=>I.stopPropagation(),onDragEnter:I=>I.stopPropagation()}:{};return a.useEffect(()=>{s&&(t(""),l(""),r(null))},[s]),e.jsxs("section",{className:"container",children:[e.jsxs("div",{...$({className:"dropzone"}),children:[e.jsx("input",{...M()}),A?e.jsx("p",{children:"File Tidak Support"}):B?e.jsx("p",{children:"Ukuran File Maksimal 2MB"}):m?e.jsx("p",{children:"Logo harus memiliki resolusi maksimum 500px lebar dan 500px tinggi."}):W?e.jsx("p",{children:"Hanya Support File Gambar"}):n?e.jsxs("div",{className:"file-preview",...O,children:[e.jsx("button",{className:"remove-button text-end",onClick:X,children:e.jsx(zn,{})}),e.jsx("img",{src:n,alt:"Preview",style:{maxWidth:"100%",maxHeight:"200px"}})]}):e.jsx(Ca,{variant:"body2",color:"text.secondary",children:"Untuk menambahkan gambar, seret dan lepas gambar tersebut ke sini, atau klik untuk memilih file."})]}),e.jsx(Xa,{className:"mt-3",children:i?e.jsxs(w,{children:[e.jsx(Ye,{placeholder:"",id:"file",value:i,readOnly:!0}),e.jsx(_e,{color:"error",className:"me-2 btn btn-sm",onClick:X,children:"Hapus"})]}):null}),e.jsx("div",{className:"form-group",children:e.jsx("div",{className:"mb-3",children:e.jsx(Ca,{variant:"body2",color:"text.secondary",children:"Format yang didukung: PNG Maksimal Ukuran File 2MB"})})})]})},cg=()=>{const r=new ld,[s,n]=a.useState(!0),[t,i]=a.useState(!1),[l,m]=a.useState(null),[p,B]=a.useState(!1),[K,W]=a.useState("Simpan"),[z,T]=a.useState(""),[L,$]=a.useState(null),[M,H]=a.useState(null),[V,A]=a.useState(!1),[G,X]=a.useState(null),[O,I]=a.useState(!1),[_,C]=a.useState({file:null,use_qrcode:!1}),[k,b]=a.useState({total:0,from:1,to:1}),y=async()=>{n(!1),await r.get().then(R=>{const u=R.data.result;$(u);const D={weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit",timeZoneName:"short"},E=new Date(R.data.result.updated_at).toLocaleDateString("id-ID",D);H(E)}).catch(R=>{})},o=R=>{X(R)},F=()=>{if(!L){console.error("Logo tidak ditemukan:",L);return}U.fire({title:"Konfirmasi",text:"Logo Instansi akan dihapus ?",icon:"warning",showCancelButton:!0,confirmButtonText:"Hapus",cancelButtonText:"Batal",customClass:{confirmButton:"button button-error",cancelButton:"button button-info"}}).then(R=>{R.isConfirmed&&(ka(),r.deleteLogo(L.id).then(u=>{u.status===200&&($(null),U.fire("Berhasil","Data Berhasil Dihapus","success").then(()=>{}))}).catch(u=>{var E,J;const D=Oe(u.response.data.result);U.fire("Gagal",D??((J=(E=u.response)==null?void 0:E.data)==null?void 0:J.message),"error")}))})},[x,S]=a.useState({page:1,rows:10,sortField:"",sortOrder:null,filters:{nama:{value:""},is_pusat:{value:null}}});a.useEffect(()=>{y()},[x]),a.useEffect(()=>{L&&(I(L.use_qrcode),C({file:null,use_qrcode:L.use_qrcode}))},[L]);const f=R=>{U.showLoading();const u=new FormData;u.append("file",G),u.append("use_qrcode",R.use_qrcode?"1":"0"),r.postUpdate(u).then(D=>{var E,J,P,h;U.fire((E=D.data)!=null&&E.success?"Berhasil":"Gagal",(J=D.data)==null?void 0:J.message,(P=D.data)!=null&&P.success?"success":"warning"),D.data.success&&((h=D.data)!=null&&h.result&&$(D.data.result),A(!0),y())}).catch(D=>{var E,J,P,h;U.fire("Gagal",(J=(E=D.response)==null?void 0:E.data)!=null&&J.result&&D.response.data.result.length>0?D.response.data.result[0]:(h=(P=D.response)==null?void 0:P.data)==null?void 0:h.message,"error")})};return e.jsxs(aa,{children:[e.jsx(la,{}),e.jsx(ie,{pt:6,pb:3,children:e.jsxs(Me,{children:[e.jsx(ie,{px:3,pt:3,lineHeight:1,children:e.jsx(w,{container:!0,direction:"row",justifyContent:"space-between",alignItems:"center",children:e.jsx(w,{item:!0,children:e.jsx(le,{variant:"h5",fontWeight:"medium",children:"Logo Instansi"})})})}),e.jsx(Xa,{sx:{width:"100%"},children:e.jsxs(w,{container:!0,rowSpacing:1,px:3,columnSpacing:{xs:1,sm:2,md:3},children:[e.jsx(w,{item:!0,xs:12,md:6,p:5,children:L?e.jsxs(Me,{children:[e.jsx(Po,{component:"img",height:"140",image:L==null?void 0:L.url,alt:"Logo Instansi"}),e.jsxs(Pi,{children:[e.jsxs(Ca,{variant:"body2",color:"text.secondary",children:["Terakhir diperbaharui ",M]}),e.jsx("br",{}),e.jsx(_e,{color:"error",className:"me-2 btn btn-sm",onClick:()=>F(),children:"Hapus"})]})]}):e.jsx(Ca,{variant:"body2",color:"text.secondary",children:" Logo Instansi tidak tersedia."})}),e.jsx(w,{item:!0,xs:12,md:6,p:5,children:e.jsx(ca,{initialValues:_,onSubmit:f,enableReinitialize:!0,children:e.jsx(Me,{children:e.jsx(da,{id:"form",className:"text-sm",children:e.jsxs(Pi,{children:[e.jsx(og,{onFileSelected:o,isReset:V}),e.jsx(ce,{name:"use_qrcode",children:({field:R,form:u,meta:D})=>e.jsxs(e.Fragment,{children:[e.jsxs("label",{className:"flex items-top mb-3",children:[e.jsx("input",{type:"checkbox",className:"form-checkbox h-5 w-5 text-indigo-600",onChange:E=>{const J=E.target.checked;u.setFieldValue("use_qrcode",J),I(J)},checked:O,disabled:p}),e.jsx("span",{className:"ml-2 text-gray-700 text-sm cursor-pointer select-none",onClick:()=>{const E=u.values.use_qrcode;u.setFieldValue("use_qrcode",E),I(E)},children:"Tampilkan pada QR Code Penandatangan Naskah"})]}),e.jsx(ue,{text:D.error,error:D.error&&D.touched})]})}),e.jsx(_e,{variant:"gradient",color:"success",type:"submit",fullWidth:!0,mt:3,children:"Simpan"})]})})})})})]})})]})}),e.jsx(ua,{})]})},dg="/assets/logoanri-BXjrhd35.png";function ug({onImageSelected:r}){const s=a.useRef(),n=l=>{if(l.target.files&&l.target.files.length>0){const m=new FileReader;m.readAsDataURL(l.target.files[0]),m.onload=function(p){r(m.result)}}},t=()=>{s.current.click()},i=()=>{const l=document.createElement("a");l.href=dg,l.download="logoanri.png",l.click()};return e.jsxs("div",{children:[e.jsx("input",{type:"file",accept:"image/*",ref:s,onChange:n,style:{display:"none"}}),e.jsx(_e,{color:"info",className:"me-2 btn btn-sm",onClick:t,children:"Pilih Gambar"}),"  ",e.jsx(_e,{color:"success",className:"me-2 btn btn-sm",onClick:i,children:"Download Contoh Gambar"})]})}function hg({image:r,onCropDone:s,onCropCancel:n,aspectRatio:t=6.41/1}){const[i,l]=a.useState({x:0,y:0}),[m,p]=a.useState(1),[B,K]=a.useState(null),W=(z,T)=>{K(T)};return e.jsxs("div",{children:[e.jsx("div",{className:"cropper mb-4",children:e.jsx("div",{className:"flex justify-center ",children:e.jsx(Ko,{image:r,aspect:t,crop:i,zoom:m,onCropChange:l,onZoomChange:p,onCropComplete:W,style:{containerStyle:{width:"100%",height:"300px",backgroundColor:"#fff"}}})})}),e.jsxs("div",{className:"flex flex-col justify-center gap-2",children:[e.jsxs("div",{className:"flex justify-center items-center gap-8",children:[e.jsx(le,{variant:"body",children:"Zoom"}),e.jsx(Co,{color:"primary",value:m,min:1,max:3,step:.1,"aria-label":"Zoom",onChange:(z,T)=>p(T)})]}),e.jsxs("div",{className:"flex justify-center items-center",children:[e.jsx(_e,{color:"secondary",className:"me-2 btn btn-sm",onClick:n,children:"Batal"}),"  ",e.jsx(_e,{color:"info",className:"me-2 btn btn-sm",onClick:()=>{s(B)},children:"Potong"})]})]})]})}const yi="https://api.arsip.go.id/user/api/",od=Ft.create({baseURL:"url",headers:{"Content-Type":"multipart/form-data",Accept:"application/json"}});od.interceptors.request.use(async r=>{const s=await JSON.parse(Le.getItem("access_token"));return s!==null&&(r.headers.Authorization=`Bearer ${s}`),r});class mg{constructor(){ae(this,"postUpdate",async s=>await od.post(`${yi}organisasi/kop-surat`,s).then(i=>i));ae(this,"get",async()=>await se.get(`${yi}organisasi/kop-surat`).then(t=>t));ae(this,"delete",async s=>await se.delete(`${yi}organisasi/kop-surat/${s}`).then(i=>i))}}const xg=()=>{const r=new mg,[s,n]=a.useState(!0),[t,i]=a.useState(!1),[l,m]=a.useState(null),[p,B]=a.useState(!1),[K,W]=a.useState("Simpan"),[z,T]=a.useState(""),[L,$]=a.useState(null),[M,H]=a.useState(null),[V,A]=a.useState(null),[G,X]=a.useState(!1),[O,I]=a.useState(null),[_,C]=a.useState([]),[k,b]=a.useState({file:null}),[y,o]=a.useState({total:0,from:1,to:1}),[F,x]=a.useState(""),[S,f]=a.useState("choose-img"),[R,u]=a.useState(""),D=c=>{x(c),f("crop-img")},E=c=>{const v=document.createElement("canvas");v.width=589,v.height=92;const N=v.getContext("2d");let Q=new Image;Q.src=F,Q.onload=function(){N.drawImage(Q,c.x,c.y,c.width,c.height,0,0,c.width,c.height);const re=v.toDataURL("image/jpeg");u(re),f("img-cropped")}},J=()=>{f("choose-img"),x("")},P=async()=>{n(!1),await r.get().then(c=>{console.log(c);const v=c.data.result;$(v);const N=c.data.result.organisasi_id;A(N);const Q={weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit",timeZoneName:"short"},re=new Date(c.data.result.updated_at).toLocaleDateString("id-ID",Q);H(re)}).catch(c=>{})},[h,d]=a.useState({page:1,rows:10,sortField:"",sortOrder:null,filters:{nama:{value:""},is_pusat:{value:null}}});a.useEffect(()=>{P()},[h]);const j=async c=>{U.showLoading();const v=new FormData,N=await(await fetch(R)).blob();v.append("file",N,"cropped-image.jpg"),r.postUpdate(v).then(Q=>{var re,ye,xe,fe;U.fire((re=Q.data)!=null&&re.success?"Berhasil":"Gagal",(ye=Q.data)==null?void 0:ye.message,(xe=Q.data)!=null&&xe.success?"success":"warning"),Q.data.success&&((fe=Q.data)!=null&&fe.result&&$(Q.data.result),X(!0),P())}).catch(Q=>{var re,ye,xe,fe;U.fire("Gagal",(ye=(re=Q.response)==null?void 0:re.data)!=null&&ye.result&&Q.response.data.result.length>0?Q.response.data.result[0]:(fe=(xe=Q.response)==null?void 0:xe.data)==null?void 0:fe.message,"error")}),f("choose-img"),x("")},g=c=>{if(!c&&!c.id){console.error("Kop tidak ditemukan:",c);return}U.fire({title:"Konfirmasi",text:"Kop Surat akan dihapus ?",icon:"warning",showCancelButton:!0,confirmButtonText:"Hapus",cancelButtonText:"Batal",customClass:{confirmButton:"button button-error",cancelButton:"button button-info"}}).then(v=>{v.isConfirmed&&(ka(),r.delete(c.id).then(N=>{N.status===200&&U.fire("Berhasil","Data Berhasil Dihapus","success").then(()=>{window.location.reload()})}).catch(N=>{var re,ye;const Q=Oe(N.response.data.result);U.fire("Gagal",Q??((ye=(re=N.response)==null?void 0:re.data)==null?void 0:ye.message),"error")}))})};return e.jsxs(aa,{children:[e.jsx(la,{}),e.jsx(ie,{pt:6,pb:3,children:e.jsxs(Me,{children:[e.jsx(ie,{px:3,pt:3,lineHeight:1,children:e.jsx(w,{container:!0,direction:"row",justifyContent:"space-between",alignItems:"center",children:e.jsx(w,{item:!0,children:e.jsx(le,{variant:"h5",fontWeight:"medium",children:"Kop Surat"})})})}),e.jsx(Xa,{sx:{width:"100%"},children:e.jsx(w,{children:e.jsx(w,{children:L?e.jsxs(Me,{children:[e.jsx(Po,{component:"img",height:"140",image:L==null?void 0:L.url,alt:"Kop Surat"}),e.jsxs(Pi,{children:[e.jsxs(Ca,{variant:"body2",color:"text.secondary",children:["Terakhir diperbaharui ",M]}),e.jsx("br",{}),e.jsx(_e,{color:"error",className:"me-2 btn btn-sm",onClick:()=>g(L),children:"Hapus"}),e.jsx("br",{}),e.jsx(Ca,{variant:"body2",color:"text.secondary",children:e.jsx("b",{children:"Format yang didukung: PNG dan JPG Maksimal Ukuran File 2MB"})})]})]}):e.jsx(Ca,{variant:"body2",color:"text.secondary",children:"    Kop Surat tidak tersedia."})})})}),"    ",e.jsx(Xa,{sx:{width:"100%"},children:e.jsx(w,{container:!0,rowSpacing:1,px:3,columnSpacing:{xs:1,sm:2,md:3},children:e.jsx(w,{item:!0,xs:12,p:5,children:e.jsx("div",{children:S==="choose-img"?e.jsx(ug,{onImageSelected:D}):S==="crop-img"?e.jsx(hg,{image:F,onCropDone:E,onCropCancel:J}):e.jsxs("div",{children:[e.jsx("div",{children:e.jsx("img",{src:R,className:"cropped-img",width:100,height:100})}),e.jsx("br",{}),e.jsx("br",{}),e.jsx(_e,{color:"info",className:"me-2 btn btn-sm",onClick:()=>{f("crop-img")},children:"Potong"}),"  ",e.jsx(_e,{color:"warning",className:"me-2 btn btn-sm",onClick:()=>{f("choose-img"),x("")},children:"Gambar Baru"}),"  ",e.jsx(_e,{color:"success",className:"me-2 btn btn-sm",onClick:j,children:"Simpan"})]})})})})})]})}),e.jsx(ua,{})]})},Mr="https://api.arsip.go.id/master/api/";class pg{constructor(){ae(this,"getPaging",async s=>{const n=Ce.serializeObjectToQueryString(s);return await se.get(`${Mr}klasifikasi-keamanan?${n}`).then(l=>l)});ae(this,"post",async s=>await se.post(`${Mr}klasifikasi-keamanan`,s).then(i=>i));ae(this,"put",async(s,n)=>await se.put(`${Mr}klasifikasi-keamanan/${s}`,n).then(l=>l));ae(this,"delete",async s=>await se.delete(`${Mr}klasifikasi-keamanan/${s}`).then(i=>i));ae(this,"select",async s=>{const n=new URLSearchParams(s).toString();return(await se.get(`${Mr}klasifikasi-keamanan?${n}`).then(m=>m)).data.result.data})}}const gg=fa().shape({nama:ze().required("Nama harus diisi")}),fg=()=>{const r="Klasifikasi Keamanan",s=new URLSearchParams(location.search).get("status"),[n,t]=a.useState(!1);a.useEffect(()=>{t(ge(r,"is_read",!0))},[]);const i=new pg,[l,m]=a.useState(!1),[p,B]=a.useState(null),[K,W]=Ga.useState(!1),[z,T]=a.useState(!1),[L,$]=a.useState("Simpan"),[M,H]=a.useState(""),[V,A]=a.useState(!0),[G,X]=a.useState(""),[O,I]=a.useState(null),[_,C]=a.useState({id:0,nama:"",status:""}),[k,b]=a.useState({total:0,from:1,to:1});let y=[];p==null?y=[]:y=p.map(j=>({name:j.nama,status:j.status,created_at:j.created_at,action:e.jsxs("div",{className:"flex justify-center gap-2 items-center w-full",children:[ge(r,"is_update")&&e.jsx(Va,{size:"1.5em",color:"#fbcf33",onClick:()=>J(j),className:"cursor-pointer",title:"Ubah"}),e.jsx(Oa,{size:"1.5em",color:"#17c1e8",onClick:()=>P(j),className:"cursor-pointer",title:"Lihat"}),ge(r,"is_delete")&&e.jsx($a,{size:"1.5em",color:"#e62e2d",onClick:()=>h(j),className:"cursor-pointer",title:"Hapus"})]})}));const[o,F]=a.useState({page:1,rows:10,sortField:"",sortOrder:null,search:"",filters:{nama:{value:""},status:{value:s||""}}});a.useEffect(()=>{x()},[o]);const x=async(j=!1)=>{j&&(o.page=1),m(!0),await i.getPaging(o).then(g=>{let c=g.data.result;c.data&&(I(c.last_page),B(c.data),m(!1)),m(!1),b({...k,to:c.to,from:c.from,total:c.total})}).catch(g=>{m(!1),b({...k,to:0,from:!1,total:0})})};a.useEffect(()=>{Da(S,500),S()},[G]);const S=Da((j,g,c=null)=>{if(c){let N=c.target;for(;N&&N.tagName!=="TD";)N=N.parentNode;if(N&&N.tagName==="TD"){const Q=N.querySelector(".clear-input"),re=N.querySelector("input");g?Q.classList.remove("hidden"):(Q.classList.add("hidden"),re.value="")}}let v={...o};v.filters[j].value=g,v[j]=g,v.page=1,F(v)},600),f=j=>{let g={...o};g.page=j,F(g),window.scrollTo({top:0,behavior:"smooth"})},R=j=>{let g={...o};g.rows=j,g.page=1,F(g)},u=j=>{let g={...o};g.sortField=j,o.sortField!=j?o.sortOrder==""&&(g.sortOrder=1):o.sortOrder==1?g.sortOrder=-1:(g.sortOrder="",g.sortField=""),g.page=1,F(g)},D=j=>{A(!1),j.id!==0?i.put(j.id,j).then(g=>{var c,v,N,Q,re;g.data.success?(U.fire((c=g.data)!=null&&c.success?"Berhasil":"Gagal",(v=g.data)==null?void 0:v.message,(N=g.data)!=null&&N.success?"success":"warning"),x(!0),d()):U.fire("Warning",(Q=g.data)==null?void 0:Q.message,(re=g.data)!=null&&re.success?"success":"warning")}).catch(g=>{var v,N;const c=Oe(g.response.data.result);U.fire("Gagal",c??((N=(v=g.response)==null?void 0:v.data)==null?void 0:N.message),"error")}).finally(()=>A(!0)):i.post(j).then(g=>{var c,v,N;U.fire((c=g.data)!=null&&c.success?"Berhasil":"Gagal",(v=g.data)==null?void 0:v.message,(N=g.data)!=null&&N.success?"success":"warning"),g.data.success&&(x(!0),d())}).catch(g=>{var v,N;console.log(g);const c=Oe(g.response.data.result);U.fire("Gagal",c??((N=(v=g.response)==null?void 0:v.data)==null?void 0:N.message),"error")}).finally(()=>A(!0))},E=j=>{W(!0),_.id=0,_.nama="",_.status="AKTIF",$("Simpan"),H("Tambah Klasifikasi Keamanan"),T(!1)},J=j=>{W(!0),C({id:j.id,nama:j.nama,status:j.status}),$("Perbarui"),H("Ubah Klasifikasi Keamanan"),T(!1)},P=j=>{W(!0),C({id:j.id,nama:j.nama,status:j.status}),H("Lihat Klasifikasi Keamanan"),T(!0)},h=j=>{U.fire({title:"Konfirmasi",text:`Data ${j.nama} akan dihapus ?`,icon:"warning",showCancelButton:!0,confirmButtonText:"Hapus",cancelButtonText:"Batal",customClass:{confirmButton:"button button-error",cancelButton:"button button-info"}}).then(g=>{g.isConfirmed&&(ka(),i.delete(j.id).then(c=>{c.status==200&&x(),U.fire("Berhasil","Data Berhasil Dihapus","success")}).catch(c=>{var N,Q;const v=Oe(c.response.data.result);U.fire("Gagal",v??((Q=(N=c.response)==null?void 0:N.data)==null?void 0:Q.message),"error")}))})},d=()=>{C({id:0,nama:"",status:""}),W(!1)};return e.jsxs(aa,{children:[e.jsx(la,{}),n&&e.jsxs(e.Fragment,{children:[" ",e.jsx(ie,{pt:6,pb:3,children:e.jsxs(Me,{children:[e.jsx(ie,{px:3,pt:3,lineHeight:1,children:e.jsxs(w,{container:!0,direction:"row",justifyContent:"space-between",alignItems:"center",children:[e.jsx(w,{item:!0,children:e.jsx(le,{variant:"h5",fontWeight:"medium",children:"Klasifikasi Keamanan"})}),ge(r,"is_create")&&e.jsx(w,{item:!0,children:e.jsxs(_e,{variant:"gradient",color:"info",onClick:E,children:[e.jsx(Ea,{size:"1.5em"}),"Tambah Baru"]})})]})}),e.jsx("div",{className:"overflow-auto",children:e.jsxs("div",{className:"table p-10 min-w-full",children:[e.jsx("div",{className:"flex justify-end mb-1",children:e.jsx(pa,{config:o,handleClick:R})}),e.jsxs("table",{className:"w-full text-sm text-left !text-gray-700 dark:text-gray-400 table-bordered",children:[e.jsx("thead",{className:"text-xs text-gray-500 uppercase border-b-2 mb-1",children:e.jsxs("tr",{children:[e.jsx(q,{text:"Nama Klasifikasi Keamanan",sortField:"nama",sortOrder:o.sortOrder,config:o,handleClick:()=>u("nama")}),e.jsx(q,{text:"Status",sortField:"status",sortOrder:o.sortOrder,config:o,handleClick:()=>u("status")}),e.jsx(q,{text:"Tanggal Dibuat",className:"flex justify-center items-center min-w-[2rem]"}),e.jsx(q,{text:"Aksi",className:"flex justify-center min-w-[2rem]"})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{className:"border-b border-slate-300",children:[e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"nama",onSearch:S,placeholder:"Nama",type:"input"})}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"status",onSearch:S,placeholder:"Status",type:"status",defaultValue:Us.find(j=>j.value==s)})}),e.jsx("td",{}),e.jsx("td",{})]}),l?e.jsx("tr",{children:e.jsx("td",{colSpan:2,children:e.jsx(ia,{})})}):e.jsx(e.Fragment,{}),y.length?y.map((j,g)=>e.jsxs("tr",{className:"border-b border-slate-300",children:[e.jsx("td",{className:" max-w-[20rem] px-6 py-6",children:j.name}),e.jsx("td",{className:"max-w-[9rem] px-6 py-6",children:j.status==="AKTIF"?e.jsx(be,{badgeContent:"Aktif",color:"success",container:!0}):e.jsx(be,{badgeContent:"Non-Aktif",color:"error",container:!0})}),e.jsx("td",{className:"max-w-[20rem] px-6 py-6",children:na(j.created_at)}),e.jsxs("td",{className:"px-1 text-right w-[2rem]",children:[" ",j.action," "]})]},g)):e.jsx(e.Fragment,{})]})]}),e.jsxs("nav",{className:"flex items-center justify-between p-4","aria-label":"Table navigation",children:[e.jsx("span",{className:"text-sm text-gray-400",children:k.from&&`Menampilkan ${Se(k.from)} sampai ${Se(k.to)} dari ${Se(k.total)} entri`}),e.jsx(xa,{currentPage:o.page,lastPage:O,displayCount:5,handleClick:f})]})]})})]})}),e.jsx(ua,{}),e.jsx(Fa,{open:K,onClose:d,children:e.jsxs("div",{children:[e.jsx(_a,{children:M}),e.jsx(ca,{initialValues:_,onSubmit:D,validateOnChange:!0,validationSchema:gg,children:e.jsx(da,{id:"form",className:"text-sm",children:e.jsx("div",{className:"px-5 pb-5",children:e.jsx(Na,{children:e.jsxs("div",{className:"flex flex-col gap-5",children:[e.jsx("input",{type:"hidden",name:"id",value:_.id}),e.jsx(w,{children:e.jsx(ce,{name:"nama",children:({field:j,form:g,meta:c})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Nama Klasifikasi Keamanan",required:!0,error:c.error&&c.touched}),e.jsx(Ye,{...j,autoFocus:!z,type:"text",placeholder:"Nama Klasifikasi Keamanan",error:c.error&&c.touched,disabled:z}),e.jsx(ue,{text:c.error,error:c.error&&c.touched})]})})}),e.jsx(w,{children:e.jsx(ce,{name:"status",children:({field:j,form:g,meta:c})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Status",required:!0,error:c.error&&c.touched}),e.jsxs("div",{className:"space-x-4 flex flex-row items-center",children:[e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{...j,type:"radio",className:"form-radio  w-4 h-4 text-blue-500 focus:ring-2 focus:ring-blue-500",value:"AKTIF",checked:j.value=="AKTIF",disabled:z}),e.jsx("span",{className:"text-gray-700",children:"Aktif"})]}),e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{...j,type:"radio",className:"form-radio  w-4 h-4 text-blue-500 focus:ring-2 focus:ring-blue-500",value:"NON-AKTIF",disabled:z,checked:j.value=="NON-AKTIF"}),e.jsx("span",{className:"text-gray-700",children:"Non Aktif"})]})]}),e.jsx(ue,{text:c.error,error:c.error&&c.touched})]})})})]})})})})}),e.jsx(ya,{children:e.jsxs(e.Fragment,{children:[!z&&e.jsx(Je,{submit:V,color:"success",formId:"form",text:L}),e.jsx(_e,{color:z?"dark":"error",variant:"gradient",onClick:()=>W(!1),children:z?"Tutup":"Batal"})]})})]})})]})]})},jg=/^[0-9.]*$/;fa().shape({kode_sektor:ze().matches(jg,{message:"Kode Sektor hanya dapat berupa angka dan titik"}).required("Kode Sektor harus diisi"),nama_sektor:ze().required("Nama Sektor harus diisi")});const Kr="https://api.arsip.go.id/master/api/";class kg{constructor(){ae(this,"getPaging",async s=>{const n=Ce.serializeObjectToQueryString(s);return await se.get(`${Kr}penyusutan-akhir?${n}`).then(l=>l)});ae(this,"post",async s=>await se.post(`${Kr}penyusutan-akhir`,s).then(i=>i));ae(this,"put",async(s,n)=>await se.put(`${Kr}penyusutan-akhir/${s}`,n).then(l=>l));ae(this,"delete",async s=>await se.delete(`${Kr}penyusutan-akhir/${s}`).then(i=>i));ae(this,"select",async s=>{const n=new URLSearchParams(s).toString();return(await se.get(`${Kr}penyusutan-akhir?${n}`).then(m=>m)).data.result.data})}}const bg=fa().shape({nama:ze().required("Nama harus diisi")}),_g=()=>{const r="Penyusutan Akhir",s=new URLSearchParams(location.search).get("status"),[n,t]=a.useState(!1);a.useEffect(()=>{t(ge(r,"is_read",!0))},[]);const i=new kg,[l,m]=a.useState(!1),[p,B]=a.useState(0),[K,W]=a.useState(null),[z,T]=Ga.useState(!1),[L,$]=a.useState(!1),[M,H]=a.useState("Simpan"),[V,A]=a.useState(""),[G,X]=a.useState(!0),[O,I]=a.useState(null),[_,C]=a.useState({id:0,nama:"",status:""}),[k,b]=a.useState({total:0,from:1,to:1});let y=[];K==null?y=[]:y=K.map(j=>({nama:j.nama,status:j.status,created_at:j.created_at,action:e.jsxs("div",{className:"flex items-center justify-center gap-2 w-full",children:[ge(r,"is_update")&&e.jsx(Va,{size:"1.5em",color:"#fbcf33",onClick:()=>J(j),className:"cursor-pointer",title:"Ubah"}),e.jsx(Oa,{size:"1.5em",color:"#17c1e8",onClick:()=>P(j),className:"cursor-pointer",title:"Lihat"}),ge(r,"is_delete")&&e.jsx($a,{size:"1.5em",color:"#e62e2d",onClick:()=>h(j),className:"cursor-pointer",title:"Hapus"})]})}));const[o,F]=a.useState({page:1,rows:10,sortField:"",sortOrder:null,filters:{nama:{value:""},status:{value:s||""}}});a.useEffect(()=>{x()},[o]);const x=async(j=!1)=>{j&&(o.page=1),m(!0),await i.getPaging(o).then(g=>{let c=g.data.result;c.data&&(I(c.last_page),W(c.data),m(!1)),m(!1),b({...k,to:c.to,from:c.from,total:c.total})}).catch(g=>{m(!1),b({...k,to:0,from:!1,total:0})})},S=Da((j,g,c=null)=>{if(c){let N=c.target;for(;N&&N.tagName!=="TD";)N=N.parentNode;if(N&&N.tagName==="TD"){const Q=N.querySelector(".clear-input"),re=N.querySelector("input");g?Q.classList.remove("hidden"):(Q.classList.add("hidden"),re.value="")}}let v={...o};v.filters[j].value=g,v.page=1,F(v)},600),f=j=>{let g={...o};g.page=j,F(g),window.scrollTo({top:0,behavior:"smooth"})},R=j=>{let g={...o};g.rows=j,g.page=1,F(g)},u=j=>{let g={...o};g.sortField=j,o.sortField!=j?o.sortOrder==""&&(g.sortOrder=1):o.sortOrder==1?g.sortOrder=-1:(g.sortOrder="",g.sortField=""),g.page=1,F(g)},D=j=>{X(!1),j.id!==0?i.put(j.id,j).then(g=>{var c,v,N;U.fire((c=g.data)!=null&&c.success?"Berhasil":"Gagal",(v=g.data)==null?void 0:v.message,(N=g.data)!=null&&N.success?"success":"warning"),g.data.success&&(x(!0),d())}).catch(g=>{var v,N;const c=Oe(g.response.data.result);U.fire("Gagal",c??((N=(v=g.response)==null?void 0:v.data)==null?void 0:N.message),"error")}).finally(()=>X(!0)):i.post(j).then(g=>{var c,v,N,Q,re;g.data.success?(U.fire((c=g.data)!=null&&c.success?"Berhasil":"Gagal",(v=g.data)==null?void 0:v.message,(N=g.data)!=null&&N.success?"success":"warning"),x(!0),d()):U.fire("Warning",(Q=g.data)==null?void 0:Q.message,(re=g.data)!=null&&re.success?"success":"warning")}).catch(g=>{var v,N;console.log(g);const c=Oe(g.response.data.result);U.fire("Gagal",c??((N=(v=g.response)==null?void 0:v.data)==null?void 0:N.message),"error")}).finally(()=>X(!0))},E=j=>{T(!0),_.id=0,_.nama="",_.status="AKTIF",H("Simpan"),A("Tambah Penyusutan Akhir"),$(!1)},J=j=>{T(!0),C({id:j.id,nama:j.nama,status:j.status}),H("Perbarui"),A("Ubah Penyusutan Akhir"),$(!1)},P=j=>{T(!0),C({id:j.id,nama:j.nama,status:j.status}),A("Lihat Penyusutan Akhir"),$(!0)},h=j=>{U.fire({title:"Konfirmasi",text:`Data ${j.nama} akan dihapus ?`,icon:"warning",showCancelButton:!0,confirmButtonText:"Hapus",cancelButtonText:"Batal",customClass:{confirmButton:"button button-error",cancelButton:"button button-info"}}).then(g=>{g.isConfirmed&&(ka(),i.delete(j.id).then(c=>{c.status==200&&x(),U.fire("Berhasil","Data Berhasil Dihapus","success")}).catch(c=>{var N,Q;const v=Oe(c.response.data.result);U.fire("Gagal",v??((Q=(N=c.response)==null?void 0:N.data)==null?void 0:Q.message),"error")}))})},d=()=>{C({id:0,nama:"",status:""}),T(!1)};return e.jsxs(aa,{children:[e.jsx(la,{}),n&&e.jsxs(e.Fragment,{children:[e.jsx(ie,{pt:6,pb:3,children:e.jsxs(Me,{children:[e.jsx(ie,{px:3,pt:3,lineHeight:1,children:e.jsxs(w,{container:!0,direction:"row",justifyContent:"space-between",alignItems:"center",children:[e.jsx(w,{item:!0,children:e.jsx(le,{variant:"h5",fontWeight:"medium",children:"Penyusutan Akhir"})}),ge(r,"is_create")&&e.jsx(w,{item:!0,children:e.jsxs(_e,{variant:"gradient",color:"info",onClick:E,children:[e.jsx(Ea,{size:"1.5em"}),"Tambah Baru"]})})]})}),e.jsx("div",{className:"overflow-auto",children:e.jsxs("div",{className:"table p-10 min-w-full",children:[e.jsx("div",{className:"flex justify-end mb-1",children:e.jsx(pa,{config:o,handleClick:R})}),e.jsxs("table",{className:"w-full text-sm text-left !text-gray-700 dark:text-gray-400 table-bordered",children:[e.jsx("thead",{className:"text-xs text-gray-500 uppercase border-b-2 mb-1",children:e.jsxs("tr",{children:[e.jsx(q,{text:"Nama Penyusutan Akhir",sortField:"nama",sortOrder:o.sortOrder,config:o,handleClick:()=>u("nama")}),e.jsx(q,{text:"Status",sortField:"status",sortOrder:o.sortOrder,config:o,handleClick:()=>u("status")}),e.jsx(q,{text:"Tanggal Dibuat",className:"flex justify-center items-center min-w-[2rem]"}),e.jsx(q,{text:"Aksi",className:"flex justify-center min-w-[2rem]"})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{className:"border-b border-slate-300",children:[e.jsx("td",{className:"max-w-[20rem] px-2 py-6",children:e.jsx(we,{keyword:"nama",onSearch:S,placeholder:"Nama",type:"input"})}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"status",onSearch:S,placeholder:"Status",type:"status",defaultValue:Us.find(j=>j.value==s)})}),e.jsx("td",{}),e.jsx("td",{})]}),l?e.jsx("tr",{children:e.jsx("td",{colSpan:2,children:e.jsx(ia,{})})}):e.jsx(e.Fragment,{}),y.length?y.map((j,g)=>e.jsxs("tr",{className:"border-b border-slate-300",children:[e.jsx("td",{className:" max-w-[20rem] px-6 py-6",children:j.nama}),e.jsx("td",{className:"max-w-[9rem] px-6 py-6",children:j.status==="AKTIF"?e.jsx(be,{badgeContent:"Aktif",color:"success",container:!0}):e.jsx(be,{badgeContent:"Non-Aktif",color:"error",container:!0})}),e.jsx("td",{className:"max-w-[20rem] px-6 py-6",children:na(j.created_at)}),e.jsxs("td",{className:"px-1 text-right w-[2rem]",children:[" ",j.action," "]})]},g)):e.jsx(e.Fragment,{})]})]}),e.jsxs("nav",{className:"flex items-center justify-between p-4","aria-label":"Table navigation",children:[e.jsx("span",{className:"text-sm text-gray-400",children:k.from&&`Menampilkan ${Se(k.from)} sampai ${Se(k.to)} dari ${Se(k.total)} entri`}),e.jsx(xa,{currentPage:o.page,lastPage:O,displayCount:5,handleClick:f})]})]})})]})}),e.jsx(ua,{}),e.jsx(Fa,{open:z,onClose:d,children:e.jsxs("div",{children:[e.jsx(_a,{children:V}),e.jsx(ca,{initialValues:_,onSubmit:D,validateOnChange:!0,validationSchema:bg,children:e.jsx(da,{id:"form",className:"text-sm",children:e.jsx("div",{className:"px-5 pb-5",children:e.jsx(Na,{children:e.jsxs("div",{className:"flex flex-col gap-5",children:[e.jsx("input",{type:"hidden",name:"id",value:_.id}),e.jsx(w,{children:e.jsx(ce,{name:"nama",children:({field:j,form:g,meta:c})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Nama Penyusutan Akhir",required:!0,error:c.error&&c.touched}),e.jsx(Ye,{...j,autoFocus:!L,type:"text",placeholder:"Nama Penyusutan Akhir",error:c.error&&c.touched,disabled:L}),e.jsx(ue,{text:c.error,error:c.error&&c.touched})]})})}),e.jsx(w,{children:e.jsx(ce,{name:"status",children:({field:j,form:g,meta:c})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Status",required:!0,error:c.error&&c.touched}),e.jsxs("div",{className:"space-x-4 flex flex-row items-center",children:[e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{...j,type:"radio",className:"form-radio  w-4 h-4 text-blue-500 focus:ring-2 focus:ring-blue-500",value:"AKTIF",checked:j.value=="AKTIF",disabled:L}),e.jsx("span",{className:"text-gray-700",children:"Aktif"})]}),e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{...j,type:"radio",className:"form-radio  w-4 h-4 text-blue-500 focus:ring-2 focus:ring-blue-500",value:"NON-AKTIF",disabled:L,checked:j.value=="NON-AKTIF"}),e.jsx("span",{className:"text-gray-700",children:"Non Aktif"})]})]}),e.jsx(ue,{text:c.error,error:c.error&&c.touched})]})})})]})})})})}),e.jsx(ya,{children:e.jsxs(e.Fragment,{children:[!L&&e.jsx(Je,{submit:G,color:"success",formId:"form",text:M}),e.jsx(_e,{color:L?"dark":"error",variant:"gradient",onClick:()=>T(!1),children:L?"Tutup":"Batal"})]})})]})})]})]})},zr="https://api.arsip.go.id/master/api/";class yg{constructor(){ae(this,"getPaging",async s=>{const n=Ce.serializeObjectToQueryString(s);return await se.get(`${zr}kategori-berkas?${n}`).then(l=>l)});ae(this,"post",async s=>await se.post(`${zr}kategori-berkas`,s).then(i=>i));ae(this,"put",async(s,n)=>await se.put(`${zr}kategori-berkas/${s}`,n).then(l=>l));ae(this,"delete",async s=>await se.delete(`${zr}kategori-berkas/${s}`).then(i=>i));ae(this,"select",async s=>{const n=new URLSearchParams(s).toString();return(await se.get(`${zr}kategori-berkas?${n}`).then(m=>m)).data.result.data})}}const Ng=fa().shape({keterangan:ze().required("Keterangan harus diisi")}),wg=()=>{const r="Kategori Berkas",s=new URLSearchParams(location.search).get("status"),[n,t]=a.useState(!1);a.useEffect(()=>{t(ge(r,"is_read",!0))},[]);const i=new yg,[l,m]=a.useState(!1),[p,B]=a.useState(null),[K,W]=Ga.useState(!1),[z,T]=a.useState(!1),[L,$]=a.useState("Simpan"),[M,H]=a.useState(""),[V,A]=a.useState(!0),[G,X]=a.useState(null),[O,I]=a.useState({id:0,keterangan:"",status:""}),[_,C]=a.useState({total:0,from:1,to:1});let k=[];p==null?k=[]:k=p.map(h=>({keterangan:h.keterangan,status:h.status,created_at:h.created_at,action:e.jsxs("div",{className:"flex justify-center items-center gap-2 w-full",children:[ge(r,"is_update")&&e.jsx(Va,{size:"1.5em",color:"#fbcf33",onClick:()=>D(h),className:"cursor-pointer",title:"Ubah"}),e.jsx(Oa,{size:"1.5em",color:"#17c1e8",onClick:()=>E(h),className:"cursor-pointer",title:"Lihat"}),ge(r,"is_delete")&&e.jsx($a,{size:"1.5em",color:"#e62e2d",onClick:()=>J(h),className:"cursor-pointer",title:"Hapus"})]})}));const[b,y]=a.useState({page:1,rows:10,sortField:"",sortOrder:null,filters:{keterangan:{value:""},status:{value:s||""}}});a.useEffect(()=>{o()},[b]);const o=async(h=!1)=>{h&&(b.page=1),m(!0),await i.getPaging(b).then(d=>{let j=d.data.result;j.data&&(X(j.last_page),B(j.data),m(!1)),m(!1),C({..._,to:j.to,from:j.from,total:j.total})}).catch(d=>{m(!1),C({..._,to:0,from:!1,total:0})})},F=Da((h,d,j=null)=>{if(j){let c=j.target;for(;c&&c.tagName!=="TD";)c=c.parentNode;if(c&&c.tagName==="TD"){const v=c.querySelector(".clear-input"),N=c.querySelector("input");d?v.classList.remove("hidden"):(v.classList.add("hidden"),N.value="")}}let g={...b};g.filters[h].value=d,g.page=1,y(g)},600),x=h=>{let d={...b};d.page=h,y(d),window.scrollTo({top:0,behavior:"smooth"})},S=h=>{let d={...b};d.rows=h,d.page=1,y(d)},f=h=>{let d={...b};d.sortField=h,b.sortField!=h?b.sortOrder==""&&(d.sortOrder=1):b.sortOrder==1?d.sortOrder=-1:(d.sortOrder="",d.sortField=""),d.page=1,y(d)},R=h=>{A(!1),h.id!==0?i.put(h.id,h).then(d=>{var j,g,c;U.fire((j=d.data)!=null&&j.success?"Berhasil":"Gagal",(g=d.data)==null?void 0:g.message,(c=d.data)!=null&&c.success?"success":"warning"),d.data.success&&(o(!0),P())}).catch(d=>{var g,c;const j=Oe(d.response.data.result);U.fire("Gagal",j??((c=(g=d.response)==null?void 0:g.data)==null?void 0:c.message),"error")}).finally(()=>A(!0)):i.post(h).then(d=>{var j,g,c,v,N;d.data.success?(U.fire((j=d.data)!=null&&j.success?"Berhasil":"Gagal",(g=d.data)==null?void 0:g.message,(c=d.data)!=null&&c.success?"success":"warning"),o(!0),P()):U.fire("Warning",(v=d.data)==null?void 0:v.message,(N=d.data)!=null&&N.success?"success":"warning")}).catch(d=>{var g,c;const j=Oe(d.response.data.result);U.fire("Gagal",j??((c=(g=d.response)==null?void 0:g.data)==null?void 0:c.message),"error")}).finally(()=>A(!0))},u=h=>{W(!0),O.id=0,O.keterangan="",O.status="AKTIF",$("Simpan"),H("Tambah Kategori Berkas"),T(!1)},D=h=>{W(!0),I({id:h.id,keterangan:h.keterangan,status:h.status}),$("Perbarui"),H("Ubah Kategori Berkas"),T(!1)},E=h=>{W(!0),I({id:h.id,keterangan:h.keterangan,status:h.status}),H("Lihat Kategori Berkas"),T(!0)},J=h=>{U.fire({title:"Konfirmasi",text:`Data ${h.keterangan} akan dihapus ?`,icon:"warning",showCancelButton:!0,confirmButtonText:"Hapus",cancelButtonText:"Batal",customClass:{confirmButton:"button button-error",cancelButton:"button button-info"}}).then(d=>{d.isConfirmed&&(ka(),i.delete(h.id).then(j=>{j.status==200&&o(),U.fire("Berhasil","Data Berhasil Dihapus","success")}).catch(j=>{var c,v;const g=Oe(j.response.data.result);U.fire("Gagal",g??((v=(c=j.response)==null?void 0:c.data)==null?void 0:v.message),"error")}))})},P=()=>{I({id:0,nama:"",status:""}),W(!1)};return e.jsxs(aa,{children:[e.jsx(la,{}),n&&e.jsxs(e.Fragment,{children:[e.jsx(ie,{pt:6,pb:3,children:e.jsxs(Me,{children:[e.jsx(ie,{px:3,pt:3,lineHeight:1,children:e.jsxs(w,{container:!0,direction:"row",justifyContent:"space-between",alignItems:"center",children:[e.jsx(w,{item:!0,children:e.jsx(le,{variant:"h5",fontWeight:"medium",children:"Kategori Berkas"})}),ge(r,"is_create")&&e.jsx(w,{item:!0,children:e.jsxs(_e,{variant:"gradient",color:"info",onClick:u,children:[e.jsx(Ea,{size:"1.5em"}),"Tambah Baru"]})})]})}),e.jsx("div",{className:"overflow-auto",children:e.jsxs("div",{className:"table p-10 min-w-full",children:[e.jsx("div",{className:"flex justify-end mb-1",children:e.jsx(pa,{config:b,handleClick:S})}),e.jsxs("table",{className:"w-full text-sm text-left !text-gray-700 dark:text-gray-400 table-bordered",children:[e.jsx("thead",{className:"text-xs text-gray-500 uppercase border-b-2 mb-1",children:e.jsxs("tr",{children:[e.jsx(q,{text:"Nama Kategori Berkas",sortField:"keterangan",sortOrder:b.sortOrder,config:b,handleClick:()=>f("keterangan")}),e.jsx(q,{text:"Status",sortField:"status",sortOrder:b.sortOrder,config:b,handleClick:()=>f("status")}),e.jsx(q,{text:"Tanggal Dibuat",className:"flex justify-center items-center min-w-[2rem]"}),e.jsx(q,{text:"Aksi",className:"flex justify-center min-w-[2rem]"})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{className:"border-b border-slate-300",children:[e.jsx("td",{className:"max-w-[20rem] px-2 py-6",children:e.jsx(we,{keyword:"keterangan",onSearch:F,placeholder:"Kategori Berkas",type:"input"})}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"status",onSearch:F,placeholder:"Status",type:"status",defaultValue:Us.find(h=>h.value==s)})}),e.jsx("td",{}),e.jsx("td",{})]}),l?e.jsx("tr",{children:e.jsx("td",{colSpan:2,children:e.jsx(ia,{})})}):e.jsx(e.Fragment,{}),k.length?k.map((h,d)=>e.jsxs("tr",{className:"border-b border-slate-300",children:[e.jsx("td",{className:" max-w-[20rem] px-6 py-6",children:h.keterangan}),e.jsx("td",{className:"max-w-[9rem] px-6 py-6",children:h.status==="AKTIF"?e.jsx(be,{badgeContent:"Aktif",color:"success",container:!0}):e.jsx(be,{badgeContent:"Non-Aktif",color:"error",container:!0})}),e.jsx("td",{className:"max-w-[20rem] px-6 py-6",children:na(h.created_at)}),e.jsxs("td",{className:"px-1 text-right w-[2rem]",children:[" ",h.action," "]})]},d)):e.jsx(e.Fragment,{})]})]}),e.jsxs("nav",{className:"flex items-center justify-between p-4","aria-label":"Table navigation",children:[e.jsx("span",{className:"text-sm text-gray-400",children:_.from&&`Menampilkan ${Se(_.from)} sampai ${Se(_.to)} dari ${Se(_.total)} entri`}),e.jsx(xa,{currentPage:b.page,lastPage:G,displayCount:5,handleClick:x})]})]})})]})}),e.jsx(ua,{}),e.jsx(Fa,{open:K,onClose:P,children:e.jsxs("div",{children:[e.jsx(_a,{children:M}),e.jsx(ca,{initialValues:O,onSubmit:R,validateOnChange:!0,validationSchema:Ng,children:e.jsx(da,{id:"form",className:"text-sm",children:e.jsx("div",{className:"px-5 pb-5",children:e.jsx(Na,{children:e.jsxs("div",{className:"flex flex-col gap-5",children:[e.jsx("input",{type:"hidden",name:"id",value:O.id}),e.jsx(w,{children:e.jsx(ce,{name:"keterangan",children:({field:h,form:d,meta:j})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Nama Kategori Berkas",required:!0,error:j.error&&j.touched}),e.jsx(Ye,{...h,autoFocus:!z,type:"text",placeholder:"Nama Kategori Berkas",error:j.error&&j.touched,disabled:z}),e.jsx(ue,{text:j.error,error:j.error&&j.touched})]})})}),e.jsx(w,{children:e.jsx(ce,{name:"status",children:({field:h,form:d,meta:j})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Status",required:!0,error:j.error&&j.touched}),e.jsxs("div",{className:"space-x-4 flex flex-row items-center",children:[e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{...h,type:"radio",className:"form-radio  w-4 h-4 text-blue-500 focus:ring-2 focus:ring-blue-500",value:"AKTIF",checked:h.value=="AKTIF",disabled:z}),e.jsx("span",{className:"text-gray-700",children:"Aktif"})]}),e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{...h,type:"radio",className:"form-radio  w-4 h-4 text-blue-500 focus:ring-2 focus:ring-blue-500",value:"NON-AKTIF",disabled:z,checked:h.value=="NON-AKTIF"}),e.jsx("span",{className:"text-gray-700",children:"Non Aktif"})]})]}),e.jsx(ue,{text:j.error,error:j.error&&j.touched})]})})})]})})})})}),e.jsx(ya,{children:e.jsxs(e.Fragment,{children:[!z&&e.jsx(Je,{submit:V,color:"success",formId:"form",text:L}),e.jsx(_e,{color:z?"dark":"error",variant:"gradient",onClick:()=>W(!1),children:z?"Tutup":"Batal"})]})})]})})]})]})},Ur="https://api.arsip.go.id/master/api/";class Sg{constructor(){ae(this,"getPaging",async s=>{const n=Ce.serializeObjectToQueryString(s);return await se.get(`${Ur}referensi-arsitektur-data?${n}`).then(l=>l)});ae(this,"post",async s=>await se.post(`${Ur}referensi-arsitektur-data`,s).then(i=>i));ae(this,"put",async(s,n)=>await se.put(`${Ur}referensi-arsitektur-data/${s}`,n).then(l=>l));ae(this,"delete",async s=>await se.delete(`${Ur}referensi-arsitektur-data/${s}`).then(i=>i));ae(this,"select",async s=>{const n=new URLSearchParams(s).toString();return(await se.get(`${Ur}referensi-arsitektur-data?${n}`).then(m=>m)).data.result.data})}}const vg=fa().shape({kode_sektor:ze().required("Kode RAD Tingkat 1 Data harus diisi"),nama_sektor:ze().required("RAD Tingkat 1 Data harus diisi")}),Pg=()=>{const r="Referensi Arsiktektur Data",[s,n]=a.useState(!1);a.useEffect(()=>{n(ge(r,"is_read",!0))},[]);const t=new Sg,[i,l]=a.useState(!1),[m,p]=a.useState(null),[B,K]=Ga.useState(!1),[W,z]=a.useState(!1),[T,L]=a.useState("Simpan"),[$,M]=a.useState(""),[H,V]=a.useState(!0),[A,G]=a.useState(null),[X,O]=a.useState({id:0,kode_sektor:"",nama_sektor:""}),[I,_]=a.useState({total:0,from:1,to:1});let C=[];m==null?C=[]:C=m.map(P=>({kode_sektor:P.kode_sektor,nama_sektor:P.nama_sektor,action:e.jsxs("div",{className:"flex content-start justify-end w-full",children:[ge(r,"is_update")&&e.jsx(Va,{size:"1.5em",color:"#fbcf33",onClick:()=>u(P),className:"me-3 cursor-pointer",title:"Ubah"}),e.jsx(Oa,{size:"1.5em",color:"#17c1e8",onClick:()=>D(P),className:"cursor-pointer",title:"Lihat"}),ge(r,"is_delete")&&e.jsx($a,{size:"1.5em",color:"#e62e2d",onClick:()=>E(P),className:"ms-3 cursor-pointer",title:"Hapus"})]})}));const[k,b]=a.useState({page:1,rows:10,sortField:"",search:"",sortOrder:null,filters:{kode_sektor:{value:""},nama_sektor:{value:""}}});a.useEffect(()=>{y()},[k]);const y=async(P=!1)=>{P&&(k.page=1),l(!0),await t.getPaging(k).then(h=>{let d=h.data.result;d.data&&(G(d.last_page),p(d.data),l(!1)),l(!1),_({...I,to:d.to,from:d.from,total:d.total})}).catch(h=>{l(!1),_({...I,to:0,from:!1,total:0})})},o=Da((P,h,d=null)=>{if(d){let g=d.target;for(;g&&g.tagName!=="TD";)g=g.parentNode;if(g&&g.tagName==="TD"){const c=g.querySelector(".clear-input"),v=g.querySelector("input");h?c.classList.remove("hidden"):(c.classList.add("hidden"),v.value="")}}let j={...k};j[P]=h,j.page=1,b(j)},600),F=P=>{let h={...k};h.page=P,b(h),window.scrollTo({top:0,behavior:"smooth"})},x=P=>{let h={...k};h.rows=P,h.page=1,b(h)},S=P=>{let h={...k};h.sortField=P,k.sortField!=P?k.sortOrder==""&&(h.sortOrder=1):k.sortOrder==1?h.sortOrder=-1:(h.sortOrder="",h.sortField=""),h.page=1,b(h)},f=P=>{V(!1),P.id!==0?t.put(P.id,P).then(h=>{var d,j,g;U.fire((d=h.data)!=null&&d.success?"Berhasil":"Gagal",(j=h.data)==null?void 0:j.message,(g=h.data)!=null&&g.success?"success":"warning"),h.data.success&&(y(!0),J())}).catch(h=>{var j,g;const d=Oe(h.response.data.result);U.fire("Gagal",d??((g=(j=h.response)==null?void 0:j.data)==null?void 0:g.message),"error")}).finally(()=>V(!0)):t.post(P).then(h=>{var d,j,g,c,v;h.data.success?(U.fire((d=h.data)!=null&&d.success?"Berhasil":"Gagal",(j=h.data)==null?void 0:j.message,(g=h.data)!=null&&g.success?"success":"warning"),y(!0),J()):U.fire("Warning",(c=h.data)==null?void 0:c.message,(v=h.data)!=null&&v.success?"success":"warning")}).catch(h=>{var j,g;console.log(h);const d=Oe(h.response.data.result);U.fire("Gagal",d??((g=(j=h.response)==null?void 0:j.data)==null?void 0:g.message),"error")}).finally(()=>V(!0))},R=P=>{K(!0),X.id=0,X.kode_sektor="",X.nama_sektor="",L("Simpan"),M("Tambah Referensi Arsitektur Data"),z(!1)},u=P=>{K(!0),O({id:P.id,kode_sektor:P.kode_sektor,nama_sektor:P.nama_sektor}),L("Perbarui"),M("Ubah Referensi Arsitektur Data"),z(!1)},D=P=>{K(!0),O({id:P.id,kode_sektor:P.kode_sektor,nama_sektor:P.nama_sektor}),M("Lihat Arsitektur Data"),z(!0)},E=P=>{U.fire({title:"Konfirmasi",text:`Data ${P.kode_sektor} - ${P.nama_sektor} akan dihapus ?`,icon:"warning",showCancelButton:!0,confirmButtonText:"Hapus",cancelButtonText:"Batal",customClass:{confirmButton:"button button-error",cancelButton:"button button-info"}}).then(h=>{h.isConfirmed&&(ka(),t.delete(P.id).then(d=>{d.status==200&&y(),U.fire("Berhasil","Data Berhasil Dihapus","success")}).catch(d=>{var g,c;const j=Oe(d.response.data.result);U.fire("Gagal",j??((c=(g=d.response)==null?void 0:g.data)==null?void 0:c.message),"error")}))})},J=()=>{O({id:0,kode_sektor:"",nama_sektor:""}),K(!1)};return e.jsxs(aa,{children:[e.jsx(la,{}),s&&e.jsxs(e.Fragment,{children:[e.jsx(ie,{pt:6,pb:3,children:e.jsxs(Me,{children:[e.jsx(ie,{px:3,pt:3,lineHeight:1,children:e.jsxs(w,{container:!0,direction:"row",justifyContent:"space-between",alignItems:"center",children:[e.jsx(w,{item:!0,children:e.jsx(le,{variant:"h5",fontWeight:"medium",children:"Referensi Arsitektur Data"})}),ge(r,"is_read")&&e.jsx(w,{item:!0,children:e.jsxs(_e,{variant:"gradient",color:"info",onClick:R,children:[e.jsx(Ea,{size:"1.5em"}),"Tambah Baru"]})})]})}),e.jsx("div",{className:"overflow-auto",children:e.jsxs("div",{className:"table p-10 min-w-full",children:[e.jsx("div",{className:"flex items-center justify-end mb-1",children:e.jsx(pa,{config:k,handleClick:x})}),e.jsxs("table",{className:"w-full text-sm text-left !text-gray-700 dark:text-gray-400 table-bordered",children:[e.jsx("thead",{className:"text-xs text-gray-500 uppercase border-b-2 mb-1",children:e.jsxs("tr",{children:[e.jsx(q,{text:"Kode RAD Tingkat 1",sortField:"kode_sektor",sortOrder:k.sortOrder,config:k,handleClick:()=>S("kode_sektor")}),e.jsx(q,{text:"RAD Tingkat 1",sortField:"nama_sektor",sortOrder:k.sortOrder,config:k,handleClick:()=>S("nama_sektor")}),e.jsx(q,{text:"Aksi",className:"justify-end"})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{className:"border-b border-slate-300",children:[e.jsx("td",{className:"max-w-[20rem] px-2 py-6",children:e.jsx(we,{keyword:"kode_sektor",onSearch:o,placeholder:"Kode RAD Tingkat 1",type:"input"})}),e.jsx("td",{className:"max-w-[20rem] px-2 py-6",children:e.jsx(we,{keyword:"nama_sektor",onSearch:o,placeholder:"RAD Tingkat 1",type:"input"})}),e.jsx("td",{})]}),i?e.jsx("tr",{children:e.jsx("td",{colSpan:2,children:e.jsx(ia,{})})}):e.jsx(e.Fragment,{}),C.length?C.map((P,h)=>e.jsxs("tr",{className:"border-b border-slate-300",children:[e.jsx("td",{className:" max-w-[20rem] px-6 py-6",children:P.kode_sektor}),e.jsx("td",{className:" max-w-[20rem] px-6 py-6",children:P.nama_sektor}),e.jsxs("td",{className:"px-1 text-right w-[2rem]",children:[" ",P.action," "]})]},h)):e.jsx(e.Fragment,{})]})]}),e.jsxs("nav",{className:"flex items-center justify-between p-4","aria-label":"Table navigation",children:[e.jsx("span",{className:"text-sm text-gray-400",children:I.from&&`Menampilkan ${Se(I.from)} sampai ${Se(I.to)} dari ${Se(I.total)} entri`}),e.jsx(xa,{currentPage:k.page,lastPage:A,displayCount:5,handleClick:F})]})]})})]})}),e.jsx(ua,{}),e.jsx(Fa,{open:B,onClose:J,children:e.jsxs("div",{children:[e.jsx(_a,{children:$}),e.jsx(ca,{initialValues:X,onSubmit:f,validateOnChange:!0,validationSchema:vg,children:e.jsx(da,{id:"form",className:"text-sm",children:e.jsxs("div",{className:"p-5",children:[e.jsx(w,{mt:1,children:e.jsxs(Na,{children:[e.jsx("input",{type:"hidden",name:"id",value:X.id}),e.jsx(ce,{name:"kode_sektor",children:({field:P,form:h,meta:d})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Kode RAD Tingkat 1",required:!0,error:d.error&&d.touched}),e.jsx(Ye,{...P,type:"text",placeholder:"Kode RAD Tingkat 1",error:d.error&&d.touched,disabled:W}),e.jsx(ue,{text:d.error,error:d.error&&d.touched})]})})]})}),e.jsx(w,{mt:1,children:e.jsx(Na,{children:e.jsx(ce,{name:"nama_sektor",children:({field:P,form:h,meta:d})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"RAD Tingkat 1",required:!0,error:d.error&&d.touched}),e.jsx(Ye,{...P,type:"text",placeholder:"RAD Tingkat 1",error:d.error&&d.touched,disabled:W}),e.jsx(ue,{text:d.error,error:d.error&&d.touched})]})})})})]})})}),e.jsx(ya,{children:e.jsxs(e.Fragment,{children:[!W&&e.jsx(Je,{submit:H,color:"success",formId:"form",text:T}),e.jsx(_e,{color:W?"dark":"error",variant:"gradient",onClick:()=>K(!1),children:W?"Tutup":"Batal"})]})})]})})]})]})},Vr="https://api.arsip.go.id/user/api/";class Cg{constructor(){ae(this,"getPaging",async s=>{const n=Ce.serializeObjectToQueryString(s);return await se.get(`${Vr}pengguna/jabatan?${n}`).then(l=>l)});ae(this,"post",async s=>await se.post(`${Vr}pengguna/jabatan`,s).then(i=>i));ae(this,"put",async(s,n)=>await se.put(`${Vr}pengguna/jabatan/${s}`,n).then(l=>l));ae(this,"delete",async s=>await se.delete(`${Vr}pengguna/jabatan/${s}`).then(i=>i));ae(this,"tree",async s=>{const n=Ce.serializeObjectToQueryString(s);return await se.get(`${Vr}pengguna/jabatan/tree?${n}`).then(l=>l)})}}const Tg=fa().shape({nama:ze().required("Nama Jabatan harus diisi"),organisasi_id:wa().required("Instansi harus dipilih"),public_organisasi_id:wa().required("Instansi harus dipilih"),status:ze().required("Status harus dipilih")}),Fg=()=>{const r="Jabatan",s=ga(),n=new URLSearchParams(s.search).get("status"),[t,i]=a.useState(!1);a.useEffect(()=>{i(ge(r,"is_read",!0))},[]);const l=JSON.parse(Le.getItem("users")),m=new Cg,[p,B]=a.useState(!1),[K,W]=a.useState(null),[z,T]=a.useState(null),[L,$]=a.useState(null),[M,H]=a.useState([]),[V,A]=Ga.useState(!1),[G,X]=a.useState(!1),[O,I]=a.useState("Simpan"),[_,C]=a.useState(""),[k,b]=a.useState(null),[y,o]=a.useState(null),[F,x]=a.useState(!1),[S,f]=a.useState(!0),[R,u]=a.useState({id:0,nama:"",organisasi_id:null,parent_id:null,public_organisasi_id:null,status:"AKTIF"}),[D,E]=a.useState({total:0,from:1,to:1});let J=[];K==null?J=[]:J=K.map(oe=>{var je,Ne;return{nama:oe.nama,organisasi_id:oe.organisasi_id,nama_organisasi:(je=oe.organisasi)==null?void 0:je.nama,organisasi:oe.organisasi,public_organisasi_id:oe.public_organisasi_id,public_organisasi:(Ne=oe.public_organisasi)==null?void 0:Ne.nama,status:oe.status,created_at:oe.created_at,action:e.jsxs("div",{className:"flex flex-row gap-2 items-center justify-center w-full",children:[ge(r,"is_update")&&e.jsx(Va,{size:"1.5em",color:"#fbcf33",onClick:()=>re(oe),className:"cursor-pointer",title:"Ubah"}),e.jsx(Oa,{size:"1.5em",color:"#17c1e8",onClick:()=>ye(oe),className:"cursor-pointer",title:"Lihat"}),ge(r,"is_delete")&&e.jsx($a,{size:"1.5em",color:"#e62e2d",onClick:()=>xe(oe),className:"cursor-pointer",title:"Hapus"})]})}});const[P,h]=a.useState({page:1,rows:10,sortField:"",sortOrder:null,search:"",filters:{nama:{value:""},"organisasi.nama":{value:""},"public_organisasi.nama":{value:""},status:{value:n||""},grouprole:{value:l.group_role},organisasi_id:{value:l.organisasi_id},public_organisasi_id:{value:l.public_organisasi_id}}});a.useEffect(()=>{H(l),d()},[P]);const d=async(oe=!1)=>{oe&&(P.page=1),B(!0),await m.getPaging(P).then(je=>{let Ne=je.data.result;Ne.data&&(b(Ne.last_page),W(Ne.data),B(!1)),B(!1),E({...D,to:Ne.to,from:Ne.from,total:Ne.total})}).catch(je=>{B(!1),E({...D,to:0,from:!1,total:0})})},j=Da((oe,je,Ne=null)=>{if(Ne){let sa=Ne.target;for(;sa&&sa.tagName!=="TD";)sa=sa.parentNode;if(sa&&sa.tagName==="TD"){const Te=sa.querySelector(".clear-input"),me=sa.querySelector("input");je?Te.classList.remove("hidden"):(Te.classList.add("hidden"),me.value="")}}let Re={...P};Re.filters[oe].value=je,Re.page=1,h(Re)},600),g=oe=>{let je={...P};je.page=oe,h(je),window.scrollTo({top:0,behavior:"smooth"})},c=oe=>{let je={...P};je.rows=oe,je.page=1,h(je)},v=oe=>{let je={...P};je.sortField=oe,P.sortField!=oe?P.sortOrder==""&&(je.sortOrder=1):P.sortOrder==1?je.sortOrder=-1:(je.sortOrder="",je.sortField=""),je.page=1,h(je)},N=oe=>{f(!1),oe.id!==0?m.put(oe.id,oe).then(je=>{var Ne,Re,sa;U.fire((Ne=je.data)!=null&&Ne.success?"Berhasil":"Gagal",(Re=je.data)==null?void 0:Re.message,(sa=je.data)!=null&&sa.success?"success":"warning"),je.data.success&&(d(!0),Pe(),fe())}).catch(je=>{var Re,sa;const Ne=Oe(je.response.data.result);U.fire("Gagal",Ne??((sa=(Re=je.response)==null?void 0:Re.data)==null?void 0:sa.message),"error")}).finally(()=>f(!0)):m.post(oe).then(je=>{je.data.success?(U.fire("Berhasil",je.data.message,"success"),d(!0),Pe(),fe()):U.fire("Gagal",je.data.message,"warning")}).catch(je=>{var Re,sa;const Ne=Oe(je.response.data.result);U.fire("Gagal",Ne??((sa=(Re=je.response)==null?void 0:Re.data)==null?void 0:sa.message),"error")}).finally(()=>f(!0))},Q=oe=>{A(!0),u({id:0,nama:"",organisasi_id:null,parent_id:null,public_organisasi_id:null,status:"AKTIF"}),T(null),$(null),I("Simpan"),C("Tambah"),X(!1)},re=oe=>{A(!0),u({id:oe.id,nama:oe.nama,organisasi_id:oe.organisasi_id,parent_id:oe.parent_id,public_organisasi_id:oe.public_organisasi_id,status:oe.status}),T(oe.organisasi),$(oe.parent),I("Perbarui"),C("Ubah"),X(!1)},ye=oe=>{A(!0),u({id:oe.id,nama:oe.nama,organisasi_id:oe.organisasi_id,parent_id:oe.parent_id,public_organisasi_id:oe.public_organisasi_id,status:oe.status}),T(oe.organisasi),$(oe.parent),C("Lihat"),X(!0)},xe=oe=>{U.fire({title:"Konfirmasi",text:`Data ${oe.nama} akan dihapus ?`,icon:"warning",showCancelButton:!0,confirmButtonText:"Hapus",cancelButtonText:"Batal",customClass:{confirmButton:"button button-error",cancelButton:"button button-info"}}).then(je=>{je.isConfirmed&&(ka(),m.delete(oe.id).then(Ne=>{Ne.status==200&&(d(),Pe()),U.fire("Berhasil","Data Berhasil Dihapus","success")}).catch(Ne=>{var sa,Te;const Re=Oe(Ne.response.data.result);U.fire("Gagal",Re??((Te=(sa=Ne.response)==null?void 0:sa.data)==null?void 0:Te.message),"error")}))})},fe=()=>{A(!1)},[Ge,$e]=a.useState({type:"instansi",parent_id:0,group_role:l.group_role});a.useEffect(()=>{Pe()},[Ge]);const Pe=async()=>{x(!0),await m.tree(Ge).then(oe=>{let je=oe.data.result;o(je.data)}).catch(oe=>{}).finally(()=>x(!1))},te=async oe=>{let je={};oe.type=="instansi"?je={type:"jabatan-satker",parent_id:oe.id,group_role:l.group_role,jenis:oe.jenis}:oe.type=="jabatan"?je={type:"sub-jabatan",parent_id:oe.id,group_role:l.group_role,jenis:oe.jenis}:je={type:"sub-jabatan",parent_id:oe.id,group_role:l.group_role,jenis:oe.jenis},await m.tree(je).then(Ne=>{const Re=[...y],sa=he(Re,oe.id);sa&&(sa.children=Ne.data.result.data),o(Re)})},ne=(oe,je=!0)=>{const Ne=[...y],Re=he(Ne,oe.id);Re&&(Re.isLoading=je),o(Ne)},pe=oe=>{const je=[...y],Ne=he(je,oe.id);Ne&&(Ne.children=null),o(je)},he=(oe,je)=>{for(const Ne of oe){if(Ne.id===je)return Ne;if(Ne.children){const Re=he(Ne.children,je);if(Re)return Re}}return null};return e.jsxs(aa,{children:[e.jsx(la,{}),t&&e.jsxs(e.Fragment,{children:[e.jsx(ie,{pt:6,pb:3,children:e.jsxs(Me,{children:[e.jsx(ie,{px:3,pt:3,lineHeight:1,children:e.jsxs(w,{container:!0,direction:"row",justifyContent:"space-between",alignItems:"center",children:[e.jsx(w,{item:!0,children:e.jsxs(le,{variant:"h5",fontWeight:"medium",children:["Daftar ",r]})}),ge(r,"is_create")&&e.jsx(w,{item:!0,children:e.jsxs(_e,{variant:"gradient",color:"info",onClick:Q,children:[e.jsx(Ea,{size:"1.5em"}),"Tambah Baru"]})})]})}),e.jsx("div",{className:"overflow-auto",children:e.jsxs("div",{className:"table p-10 min-w-full",children:[e.jsx("div",{className:"flex items-center justify-end mb-1",children:e.jsx(pa,{config:P,handleClick:c})}),e.jsxs("table",{className:"w-full text-sm text-left !text-gray-700 dark:text-gray-400 table-bordered",children:[e.jsx("thead",{className:"text-xs text-gray-500 uppercase border-b-2 mb-1",children:e.jsxs("tr",{children:[e.jsx(q,{text:"Nama Jabatan",sortField:"nama",sortOrder:P.sortOrder,config:P,handleClick:()=>v("nama")}),e.jsx(q,{text:`${l.group_role===1?"Instansi":"Instansi / Unit Kerja"}`,sortField:"organisasi.nama",sortOrder:P.sortOrder,config:P,handleClick:()=>v("organisasi.nama")}),e.jsx(q,{text:"Status",sortField:"status",sortOrder:P.sortOrder,config:P,handleClick:()=>v("status")}),e.jsx(q,{text:"Tanggal Dibuat",className:"flex justify-center items-center min-w-[2rem]"}),e.jsx(q,{text:"Aksi",className:"flex justify-center min-w-[2rem]"})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{className:"border-b border-slate-300",children:[e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"nama",onSearch:j,placeholder:"Nama",type:"input"})}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"organisasi.nama",onSearch:j,placeholder:`${l.group_role===1?"Instansi":"Instansi / Unit Kerja"}`,type:"input"})}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"status",onSearch:j,placeholder:"Status",type:"status",selectOption:Us,defaultValue:Us.find(oe=>oe.value==n)})}),e.jsx("td",{}),e.jsx("td",{})]}),p?e.jsx("tr",{children:e.jsx("td",{colSpan:4,children:e.jsx(ia,{})})}):e.jsx(e.Fragment,{}),J.length?J.map((oe,je)=>e.jsxs("tr",{className:"border-b border-slate-300",children:[e.jsx("td",{className:" max-w-[20rem] px-6 py-6",children:oe.nama}),e.jsx("td",{className:" max-w-[20rem] px-6 py-6",children:oe.nama_organisasi}),e.jsx("td",{className:"max-w-[20rem] px-6 py-6",children:oe.status==="AKTIF"?e.jsx(be,{badgeContent:"Aktif",color:"success",container:!0}):e.jsx(be,{badgeContent:"Non-Aktif",color:"error",container:!0})}),e.jsx("td",{className:"max-w-[20rem] px-6 py-6",children:na(oe.created_at)}),e.jsxs("td",{className:"px-1 text-right w-[2rem]",children:[" ",oe.action," "]})]},je)):e.jsx(e.Fragment,{})]})]}),e.jsxs("nav",{className:"flex items-center justify-between p-4","aria-label":"Table navigation",children:[e.jsx("span",{className:"text-sm text-gray-400",children:D.from&&`Menampilkan ${Se(D.from)} sampai ${Se(D.to)} dari ${Se(D.total)} entri`}),e.jsx(xa,{currentPage:P.page,lastPage:k,displayCount:5,handleClick:g})]})]})})]})}),l.role!=1&&e.jsx(ie,{pt:6,pb:3,children:e.jsxs(Me,{children:[e.jsx(ie,{px:3,pt:3,lineHeight:1,children:e.jsx(w,{container:!0,direction:"row",justifyContent:"space-between",alignItems:"center",children:e.jsx(w,{item:!0,children:e.jsxs(le,{variant:"h5",fontWeight:"medium",children:["Bagan ",r]})})})}),e.jsxs("div",{className:"p-8 border",children:[F&&e.jsx("div",{className:"flex w-full justify-center",children:e.jsx(rs,{})}),y&&y.length&&e.jsx(Yn,{data:y,loadChildrenTree:te,removeChildren:pe,treeLoading:ne})]})]})}),e.jsx(ua,{}),e.jsxs(Fa,{open:V,onClose:fe,children:[e.jsxs("div",{children:[e.jsxs(_a,{children:[_," ",r]}),e.jsx(ca,{initialValues:R,onSubmit:N,validateOnChange:!0,validationSchema:Tg,children:e.jsx(da,{id:"form",className:"text-sm",children:e.jsxs("div",{className:"mb-6 px-2",children:[e.jsx(w,{mt:1,children:e.jsx(Na,{children:e.jsx(ce,{name:"nama",children:({field:oe,form:je,meta:Ne})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Nama Jabatan",required:!0,error:Ne.error&&Ne.touched}),e.jsx(Ye,{...oe,type:"text",placeholder:"Nama Jabatan",error:Ne.error&&Ne.touched,disabled:G}),e.jsx(ue,{text:Ne.error,error:Ne.error&&Ne.touched})]})})})}),e.jsx(w,{mt:1,children:e.jsxs("div",{className:"p-3",children:[e.jsx("input",{type:"hidden",name:"id",value:R.id}),e.jsx(ce,{name:"organisasi_id ",children:({field:oe,form:je,meta:Ne})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:l.group_role===1?"Instansi":"Unit Kerja",required:!0,error:Ne.error&&Ne.touched}),e.jsx(ra,{url:"organisasi/instansi/select2",isDisabled:G||_=="Ubah"&&l.group_role==1,callbackChange:Re=>{je.setFieldValue("organisasi_id",(Re==null?void 0:Re.id)??""),je.setFieldValue("public_organisasi_id",(Re==null?void 0:Re.public_id)??""),je.setFieldValue("parent_id",null),$(null)},selectedData:z,keyValue:["id","nama"],placeholder:`Pilih ${l.group_role===1?"Instansi":"Unit Kerja"}...`,optionParam:{parent_id:(M==null?void 0:M.id)!=1?M==null?void 0:M.public_organisasi_id:null,role:M==null?void 0:M.role,group_role:M==null?void 0:M.group_role},className:"text-base"}),e.jsx(ue,{text:Ne.error,error:Ne.error&&Ne.touched})]})})]})}),(M==null?void 0:M.role)!==1&&e.jsx(w,{mt:1,children:e.jsx("div",{className:"p-3",children:e.jsx(ce,{name:"parent_id",children:({field:oe,form:je,meta:Ne})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Induk Jabatan",required:!1,error:Ne.error&&Ne.touched}),e.jsx(ra,{url:"pengguna/jabatan/select",isDisabled:G||!je.values.organisasi_id,callbackChange:Re=>{je.setFieldValue("parent_id",(Re==null?void 0:Re.id)??""),$(Re)},selectedData:L,keyValue:["id","nama"],placeholder:"Pilih Induk Jabatan...",optionParam:{organisasi_id:je.values.organisasi_id,"select-target":"jabatan",group_role:M==null?void 0:M.group_role,parent_id:je.values.id??null},className:"text-base"}),e.jsx("div",{className:"text-sm text-gray-400",children:e.jsx("em",{children:"Biarkan kosong jika jabatan ini akan dijadikan sebagai induk jabatan"})}),e.jsx(ue,{text:Ne.error,error:Ne.error&&Ne.touched})]})})})}),e.jsx(w,{mt:1,children:e.jsx(Na,{children:e.jsx(ce,{name:"status",children:({field:oe,form:je,meta:Ne})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Status",required:!0,error:Ne.error&&Ne.touched}),e.jsxs("div",{className:"space-x-4 flex flex-row items-center",children:[e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{...oe,type:"radio",className:"form-radio  w-4 h-4 text-blue-500 focus:ring-2 focus:ring-blue-500",value:"AKTIF",checked:oe.value=="AKTIF",disabled:G||_=="Tambah"}),e.jsx("span",{className:"text-gray-700",children:"Aktif"})]}),e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{...oe,type:"radio",className:"form-radio  w-4 h-4 text-blue-500 focus:ring-2 focus:ring-blue-500",value:"NON-AKTIF",disabled:G||_=="Tambah",checked:oe.value=="NON-AKTIF"}),e.jsx("span",{className:"text-gray-700",children:"Non Aktif"})]})]}),e.jsx(ue,{text:Ne.error,error:Ne.error&&Ne.touched})]})})})})]})})})]}),e.jsx(ya,{children:e.jsxs(e.Fragment,{children:[!G&&e.jsx(Je,{submit:S,color:"success",formId:"form",text:O}),e.jsx(_e,{color:G?"dark":"error",variant:"gradient",onClick:()=>A(!1),children:G?"Tutup":"Batal"})]})})]})]})]})},fn="https://api.arsip.go.id/user/api/";class Dg{constructor(){ae(this,"getPaging",async s=>{const n=Ce.serializeObjectToQueryString(s);return await se.get(`${fn}pengguna/grupjabatan?${n}`).then(l=>l)});ae(this,"post",async s=>await se.post(`${fn}pengguna/grupjabatan`,s).then(i=>i));ae(this,"put",async(s,n)=>await se.put(`${fn}pengguna/grupjabatan/${s}`,n).then(l=>l));ae(this,"delete",async s=>await se.delete(`${fn}pengguna/grupjabatan/${s}`).then(i=>i))}}const cd=fa().shape({nama:ze().required("Nama Grup Jabatan harus diisi"),status:ze().required("Status harus dipilih")}),Ig=()=>{const r="Grup Jabatan",[s,n]=a.useState(!1);a.useEffect(()=>{n(ge(r,"is_read",!0))},[]);const t=new Dg,[i,l]=a.useState(!1),[m,p]=a.useState(null),[B,K]=Ga.useState(!1),[W,z]=a.useState(!1),[T,L]=a.useState("Simpan"),[$,M]=a.useState(""),[H,V]=a.useState(null),[A,G]=a.useState(!0),[X,O]=a.useState({id:0,nama:"",status:null}),[I,_]=a.useState({total:0,from:1,to:1});let C=[];m==null?C=[]:C=m.map(P=>({nama:P.nama,status:P.status,created_at:P.created_at,action:e.jsxs("div",{className:"flex content-start justify-end w-full",children:[ge(r,"is_update")&&e.jsx(Va,{size:"1.5em",color:"#fbcf33",onClick:()=>u(P),className:"me-3 cursor-pointer",title:"Ubah"}),e.jsx(Oa,{size:"1.5em",color:"#17c1e8",onClick:()=>D(P),className:"cursor-pointer",title:"Lihat"}),ge(r,"is_delete")&&e.jsx($a,{size:"1.5em",color:"#e62e2d",onClick:()=>E(P),className:"ms-3 cursor-pointer",title:"Hapus"})]})}));const[k,b]=a.useState({page:1,rows:10,sortField:"",sortOrder:null,search:"",filters:{nama:{value:""},status:{value:""}}});a.useEffect(()=>{y()},[k]);const y=async(P=!1)=>{P&&(k.page=1),l(!0),await t.getPaging(k).then(h=>{let d=h.data.result;d.data&&(V(d.last_page),p(d.data),l(!1)),l(!1),_({...I,to:d.to,from:d.from,total:d.total})}).catch(h=>{l(!1),_({...I,to:0,from:!1,total:0})})},o=Da((P,h,d=null)=>{if(d){let g=d.target;for(;g&&g.tagName!=="TD";)g=g.parentNode;if(g&&g.tagName==="TD"){const c=g.querySelector(".clear-input"),v=g.querySelector("input");h?c.classList.remove("hidden"):(c.classList.add("hidden"),v.value="")}}let j={...k};j.filters[P].value=h,j.page=1,b(j)},600),F=P=>{let h={...k};h.page=P,b(h),window.scrollTo({top:0,behavior:"smooth"})},x=P=>{let h={...k};h.rows=P,h.page=1,b(h)},S=P=>{let h={...k};h.sortField=P,k.sortField!=P?k.sortOrder==""&&(h.sortOrder=1):k.sortOrder==1?h.sortOrder=-1:(h.sortOrder="",h.sortField=""),h.page=1,b(h)},f=P=>{G(!1),P.id!==0?t.put(P.id,P).then(h=>{var d,j,g;U.fire((d=h.data)!=null&&d.success?"Berhasil":"Gagal",(j=h.data)==null?void 0:j.message,(g=h.data)!=null&&g.success?"success":"warning"),h.data.success&&(y(!0),J())}).catch(h=>{var j,g;const d=Oe(h.response.data.result);U.fire("Gagal",d??((g=(j=h.response)==null?void 0:j.data)==null?void 0:g.message),"error")}).finally(()=>G(!0)):t.post(P).then(h=>{var d,j,g;U.fire((d=h.data)!=null&&d.success?"Berhasil":"Gagal",(j=h.data)==null?void 0:j.message,(g=h.data)!=null&&g.success?"success":"warning"),h.data.success&&(y(!0),J())}).catch(h=>{var j,g;const d=Oe(h.response.data.result);U.fire("Gagal",d??((g=(j=h.response)==null?void 0:j.data)==null?void 0:g.message),"error")}).finally(()=>G(!0))},R=P=>{K(!0),O({id:0,nama:"",status:"AKTIF"}),L("Simpan"),M("Tambah"),z(!1)},u=P=>{K(!0),O({id:P.id,nama:P.nama,status:P.status}),L("Perbarui"),M("Ubah"),z(!1)},D=P=>{K(!0),O({id:P.id,nama:P.nama,status:P.status}),M("Lihat"),z(!0)},E=P=>{U.fire({title:"Konfirmasi",text:`Data ${P.nama} akan dihapus ?`,icon:"warning",showCancelButton:!0,confirmButtonText:"Hapus",cancelButtonText:"Batal",customClass:{confirmButton:"button button-error",cancelButton:"button button-info"}}).then(h=>{h.isConfirmed&&(ka(),t.delete(P.id).then(d=>{d.status==200&&y(),U.fire("Berhasil","Data Berhasil Dihapus","success")}).catch(d=>{var g,c;const j=Oe(d.response.data.result);U.fire("Gagal",j??((c=(g=d.response)==null?void 0:g.data)==null?void 0:c.message),"error")}))})},J=()=>{O({id:0,nama:"",status:null}),K(!1)};return e.jsxs(aa,{children:[e.jsx(la,{}),s&&e.jsxs(e.Fragment,{children:[e.jsx(ie,{pt:6,pb:3,children:e.jsxs(Me,{children:[e.jsx(ie,{px:3,pt:3,lineHeight:1,children:e.jsxs(w,{container:!0,direction:"row",justifyContent:"space-between",alignItems:"center",children:[e.jsx(w,{item:!0,children:e.jsxs(le,{variant:"h5",fontWeight:"medium",children:["Daftar ",r]})}),ge(r,"is_create")&&e.jsx(w,{item:!0,children:e.jsxs(_e,{variant:"gradient",color:"info",onClick:R,children:[e.jsx(Ea,{size:"1.5em"}),"Tambah Baru"]})})]})}),e.jsx("div",{className:"overflow-auto",children:e.jsxs("div",{className:"table p-10 min-w-full",children:[e.jsx("div",{className:"flex items-center justify-end mb-1",children:e.jsx(pa,{config:k,handleClick:x})}),e.jsxs("table",{className:"w-full text-sm text-left !text-gray-700 dark:text-gray-400 table-bordered",children:[e.jsx("thead",{className:"text-xs text-gray-500 uppercase border-b-2 mb-1",children:e.jsxs("tr",{children:[e.jsx(q,{text:"Nama Grup Jabatan",sortField:"nama",sortOrder:k.sortOrder,config:k,handleClick:()=>S("nama")}),e.jsx(q,{text:"Status",sortField:"status",sortOrder:k.sortOrder,config:k,handleClick:()=>S("status")}),e.jsx(q,{text:"Tanggal Dibuat",className:"flex justify-center items-center min-w-[2rem]"}),e.jsx(q,{text:"Aksi",className:"justify-end min-w-[2rem]"})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{className:"border-b border-slate-300",children:[e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"nama",onSearch:o,placeholder:"Nama",type:"input"})}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"status",onSearch:o,placeholder:"Status",type:"status"})}),e.jsx("td",{}),e.jsx("td",{})]}),i?e.jsx("tr",{children:e.jsx("td",{colSpan:3,children:e.jsx(ia,{})})}):e.jsx(e.Fragment,{}),C.length?C.map((P,h)=>e.jsxs("tr",{className:"border-b border-slate-300",children:[e.jsx("td",{className:" max-w-[20rem] px-6 py-6",children:P.nama}),e.jsx("td",{className:"max-w-[20rem] px-6 py-6",children:P.status==="AKTIF"?e.jsx(be,{badgeContent:"Aktif",color:"success",container:!0}):e.jsx(be,{badgeContent:"Non-Aktif",color:"error",container:!0})}),e.jsx("td",{className:"max-w-[20rem] px-6 py-6",children:na(P.created_at)}),e.jsxs("td",{className:"px-1 text-right w-[2rem]",children:[" ",P.action," "]})]},h)):e.jsx(e.Fragment,{})]})]}),e.jsxs("nav",{className:"flex items-center justify-between p-4","aria-label":"Table navigation",children:[e.jsx("span",{className:"text-sm text-gray-400",children:I.from&&`Menampilkan ${Se(I.from)} sampai ${Se(I.to)} dari ${Se(I.total)} entri`}),e.jsx(xa,{currentPage:k.page,lastPage:H,displayCount:5,handleClick:F})]})]})})]})}),e.jsx(ua,{}),e.jsx(Fa,{open:B,onClose:J,children:e.jsxs("div",{children:[e.jsxs(_a,{children:[$," ",r]}),e.jsx(ca,{initialValues:X,onSubmit:f,validateOnChange:!0,validationSchema:cd,children:e.jsx(da,{id:"form",className:"text-sm",children:e.jsxs("div",{className:"p-5",children:[e.jsx(w,{mt:1,children:e.jsxs("div",{className:"p-3",children:[e.jsx("input",{type:"hidden",name:"id",value:X.id}),e.jsx(ce,{name:"nama",children:({field:P,form:h,meta:d})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Nama Grup Jabatan",required:!0,error:d.error&&d.touched}),e.jsx(Ye,{...P,type:"text",placeholder:"Nama Grup Jabatan",error:d.error&&d.touched,disabled:W}),e.jsx(ue,{text:d.error,error:d.error&&d.touched})]})})]})}),e.jsx(w,{mt:1,children:e.jsx(Na,{children:e.jsx(ce,{name:"status",children:({field:P,form:h,meta:d})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Status",required:!0,error:d.error&&d.touched}),e.jsxs("div",{className:"space-x-4 flex flex-row items-center",children:[e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{...P,type:"radio",className:"form-radio  w-4 h-4 text-blue-500 focus:ring-2 focus:ring-blue-500",value:"AKTIF",checked:P.value=="AKTIF",disabled:W||$=="Tambah"}),e.jsx("span",{className:"text-gray-700",children:"Aktif"})]}),e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{...P,type:"radio",className:"form-radio  w-4 h-4 text-blue-500 focus:ring-2 focus:ring-blue-500",value:"NON-AKTIF",disabled:W||$=="Tambah",checked:P.value=="NON-AKTIF"}),e.jsx("span",{className:"text-gray-700",children:"Non Aktif"})]})]}),e.jsx(ue,{text:d.error,error:d.error&&d.touched})]})})})})]})})}),e.jsx(ya,{children:e.jsxs(e.Fragment,{children:[!W&&e.jsx(Je,{submit:A,color:"success",formId:"form",text:T}),e.jsx(_e,{color:W?"dark":"error",variant:"gradient",onClick:()=>K(!1),children:W?"Tutup":"Batal"})]})})]})})]})]})},jn="https://api.arsip.go.id/master/api/";class Ag{constructor(){ae(this,"getPaging",async s=>{const n=Ce.serializeObjectToQueryString(s);return await se.get(`${jn}tatanaskah/sifat-naskah?${n}`).then(l=>l)});ae(this,"post",async s=>await se.post(`${jn}tatanaskah/sifat-naskah`,s).then(i=>i));ae(this,"put",async(s,n)=>await se.put(`${jn}tatanaskah/sifat-naskah/${s}`,n).then(l=>l));ae(this,"delete",async s=>await se.delete(`${jn}tatanaskah/sifat-naskah/${s}`).then(i=>i))}}const Og=fa().shape({sifat_naskah:ze().required("Nama Sifat Naskah Dinas harus diisi"),status:ze().required("Status harus dipilih")}),Bg=()=>{const r="Sifat Naskah Dinas",s=JSON.parse(Le.getItem("users")),n=ga(),t=new URLSearchParams(n.search).get("status"),[i,l]=a.useState(!1);a.useEffect(()=>{l(ge(r,"is_read",!0))},[]);const m=new Ag,[p,B]=a.useState(!1),[K,W]=a.useState(null),[z,T]=Ga.useState(!1),[L,$]=a.useState(!1),[M,H]=a.useState("Simpan"),[V,A]=a.useState(""),[G,X]=a.useState(!0),[O,I]=a.useState(null),[_,C]=a.useState({id:0,organisasi_id:s==null?void 0:s.organisasi_id,public_organisasi_id:s==null?void 0:s.public_organisasi_id,sifat_naskah:"",status:"AKTIF",is_display:!1}),[k,b]=a.useState({total:0,from:1,to:1});let y=[];K==null?y=[]:y=K.map(j=>({sifat_naskah:j.sifat_naskah,is_display:j.is_display,status:j.status,action:e.jsxs("div",{className:"flex content-start justify-end w-full",children:[ge(r,"is_update")&&e.jsx(Va,{size:"1.5em",color:"#fbcf33",onClick:()=>J(j),className:"me-3 cursor-pointer",title:"Ubah"}),e.jsx(Oa,{size:"1.5em",color:"#17c1e8",onClick:()=>P(j),className:"cursor-pointer",title:"Lihat"}),ge(r,"is_delete")&&e.jsx($a,{size:"1.5em",color:"#e62e2d",onClick:()=>h(j),className:"ms-3 cursor-pointer",title:"Hapus"})]})}));const[o,F]=a.useState({page:1,rows:10,sortField:"",sortOrder:null,search:"",filters:{sifat_naskah:{value:""},is_display:{value:""},status:{value:t||""},organisasi_id:{value:s==null?void 0:s.organisasi_id},public_organisasi_id:{value:s==null?void 0:s.public_organisasi_id}}});a.useEffect(()=>{x()},[o]);const x=async(j=!1)=>{j&&(o.page=1),B(!0),await m.getPaging(o).then(g=>{let c=g.data.result;c.data&&(I(c.last_page),W(c.data),B(!1)),B(!1),b({...k,to:c.to,from:c.from,total:c.total})}).catch(g=>{B(!1),b({...k,to:0,from:!1,total:0})})},S=Da((j,g,c=null)=>{if(c){let N=c.target;for(;N&&N.tagName!=="TD";)N=N.parentNode;if(N&&N.tagName==="TD"){const Q=N.querySelector(".clear-input"),re=N.querySelector("input");g?Q.classList.remove("hidden"):(Q.classList.add("hidden"),re.value="")}}let v={...o};v.filters[j].value=g,v.page=1,F(v)},600),f=j=>{let g={...o};g.page=j,F(g),window.scrollTo({top:0,behavior:"smooth"})},R=j=>{let g={...o};g.rows=j,g.page=1,F(g)},u=j=>{let g={...o};g.sortField=j,g.page=1,o.sortField!=j?o.sortOrder==""&&(g.sortOrder=1):o.sortOrder==1?g.sortOrder=-1:(g.sortOrder="",g.sortField=""),F(g)},D=j=>{X(!1),j.id!==0?m.put(j.id,j).then(g=>{var c,v,N;U.fire((c=g.data)!=null&&c.success?"Berhasil":"Gagal",(v=g.data)==null?void 0:v.message,(N=g.data)!=null&&N.success?"success":"warning"),g.data.success&&(x(!0),d())}).catch(g=>{var v,N;const c=Oe(g.response.data.result);U.fire("Gagal",c??((N=(v=g.response)==null?void 0:v.data)==null?void 0:N.message),"error")}).finally(()=>X(!0)):m.post(j).then(g=>{var c,v,N;U.fire((c=g.data)!=null&&c.success?"Berhasil":"Gagal",(v=g.data)==null?void 0:v.message,(N=g.data)!=null&&N.success?"success":"warning"),g.data.success&&(x(!0),d())}).catch(g=>{var v,N;const c=Oe(g.response.data.result);U.fire("Gagal",c??((N=(v=g.response)==null?void 0:v.data)==null?void 0:N.message),"error")}).finally(()=>X(!0))},E=j=>{T(!0),C({id:0,organisasi_id:s==null?void 0:s.organisasi_id,public_organisasi_id:s==null?void 0:s.public_organisasi_id,sifat_naskah:"",status:"AKTIF",is_display:!1}),H("Simpan"),A("Tambah"),$(!1)},J=j=>{T(!0),C({id:j.id,organisasi_id:j.organisasi_id,public_organisasi_id:j.public_organisasi_id,sifat_naskah:j.sifat_naskah,status:j.status,is_display:j.is_display}),H("Perbarui"),A("Ubah"),$(!1)},P=j=>{T(!0),C({id:j.id,organisasi_id:j.organisasi_id,public_organisasi_id:j.public_organisasi_id,sifat_naskah:j.sifat_naskah,status:j.status,is_display:j.is_display}),A("Lihat"),$(!0)},h=j=>{U.fire({title:"Konfirmasi",text:`Data ${j.sifat_naskah} akan dihapus ?`,icon:"warning",showCancelButton:!0,confirmButtonText:"Hapus",cancelButtonText:"Batal",customClass:{confirmButton:"button button-error",cancelButton:"button button-info"}}).then(g=>{g.isConfirmed&&(ka(),m.delete(j.id).then(c=>{c.status==200&&x(),U.fire("Berhasil","Data Berhasil Dihapus","success")}).catch(c=>{var N,Q;const v=Oe(c.response.data.result);U.fire("Gagal",v??((Q=(N=c.response)==null?void 0:N.data)==null?void 0:Q.message),"error")}))})},d=()=>{T(!1)};return e.jsxs(aa,{children:[e.jsx(la,{}),i&&e.jsxs(e.Fragment,{children:[e.jsx(ie,{pt:6,pb:3,children:e.jsxs(Me,{children:[e.jsx(ie,{px:3,pt:3,lineHeight:1,children:e.jsxs(w,{container:!0,direction:"row",justifyContent:"space-between",alignItems:"center",children:[e.jsx(w,{item:!0,children:e.jsxs(le,{variant:"h5",fontWeight:"medium",children:["Daftar ",r]})}),ge(r,"is_create")&&e.jsx(w,{item:!0,children:e.jsxs(_e,{variant:"gradient",color:"info",onClick:E,children:[e.jsx(Ea,{size:"1.5em"}),"Tambah Baru"]})})]})}),e.jsx("div",{className:"overflow-auto",children:e.jsxs("div",{className:"table p-10 min-w-full",children:[e.jsx("div",{className:"flex items-center justify-end mb-1",children:e.jsx(pa,{config:o,handleClick:R})}),e.jsxs("table",{className:"w-full text-sm text-left !text-gray-700 dark:text-gray-400 table-bordered",children:[e.jsx("thead",{className:"text-xs text-gray-500 uppercase border-b-2 mb-1",children:e.jsxs("tr",{children:[e.jsx(q,{text:"Sifat Naskah",sortField:"sifat_naskah",sortOrder:o.sortOrder,config:o,handleClick:()=>u("sifat_naskah")}),e.jsx(q,{text:"Tampil QR",sortField:"is_display",sortOrder:o.sortOrder,config:o,handleClick:()=>u("is_display")}),e.jsx(q,{text:"Status",sortField:"status",sortOrder:o.sortOrder,config:o,handleClick:()=>u("status")}),e.jsx(q,{text:"Aksi",className:"justify-center min-w-[2rem]"})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{className:"border-b border-slate-300",children:[e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"sifat_naskah",onSearch:S,placeholder:"Sifat Naskah",type:"input"})}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"is_display",onSearch:S,placeholder:"Tampil QR",type:"select",selectOption:Yp})}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"status",onSearch:S,placeholder:"Status",type:"status",defaultValue:Us.find(j=>j.value==t)})}),e.jsx("td",{})]}),p?e.jsx("tr",{children:e.jsx("td",{colSpan:4,children:e.jsx(ia,{})})}):e.jsx(e.Fragment,{}),y.length?y.map((j,g)=>e.jsxs("tr",{className:"border-b border-slate-300",children:[e.jsx("td",{className:" max-w-[20rem] px-6 py-6",children:j.sifat_naskah}),e.jsx("td",{className:"max-w-[20rem] px-6 py-6",children:j.is_display?e.jsx(be,{badgeContent:"Ya",color:"success",container:!0}):e.jsx(be,{badgeContent:"Tidak",color:"dark",container:!0})}),e.jsx("td",{className:"max-w-[20rem] px-6 py-6",children:j.status==="AKTIF"?e.jsx(be,{badgeContent:"Aktif",color:"success",container:!0}):e.jsx(be,{badgeContent:"Non-Aktif",color:"error",container:!0})}),e.jsxs("td",{className:"px-1 text-right w-[2rem]",children:[" ",j.action," "]})]},g)):e.jsx(e.Fragment,{})]})]}),e.jsxs("nav",{className:"flex items-center justify-between p-4","aria-label":"Table navigation",children:[e.jsx("span",{className:"text-sm text-gray-400",children:k.from&&`Menampilkan ${Se(k.from)} sampai ${Se(k.to)} dari ${Se(k.total)} entri`}),e.jsx(xa,{currentPage:o.page,lastPage:O,displayCount:5,handleClick:f})]})]})})]})}),e.jsx(ua,{}),e.jsx(Fa,{open:z,onClose:d,children:e.jsxs("div",{children:[e.jsxs(_a,{children:[V," ",r]}),e.jsx(ca,{initialValues:_,onSubmit:D,validateOnChange:!0,validationSchema:Og,children:e.jsx(da,{id:"form",className:"text-sm",children:e.jsxs("div",{className:"p-5",children:[e.jsx(w,{mt:1,children:e.jsxs("div",{className:"p-3",children:[e.jsx("input",{type:"hidden",name:"id",value:_.id}),e.jsx(ce,{name:"sifat_naskah",children:({field:j,form:g,meta:c})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Nama Sifat Naskah Dinas",required:!0,error:c.error&&c.touched}),e.jsx(Ye,{...j,type:"text",placeholder:"Nama Sifat Naskah Dinas",error:c.error&&c.touched,disabled:L}),e.jsx(ue,{text:c.error,error:c.error&&c.touched})]})})]})}),e.jsx(w,{mt:1,children:e.jsx(Na,{children:e.jsx(ce,{name:"is_display",children:({field:j,form:g,meta:c})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"QR Code",required:!0,error:c.error&&c.touched}),e.jsx(Li,{control:e.jsx(wo,{...j,checked:j.value}),label:"Tampilkan pada QR Code ?",disabled:L}),e.jsx(ue,{text:c.error,error:c.error&&c.touched})]})})})}),e.jsx(w,{mt:1,children:e.jsx(Na,{children:e.jsx(ce,{name:"status",children:({field:j,form:g,meta:c})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Status",required:!0,error:c.error&&c.touched}),e.jsxs("div",{className:"space-x-4 flex flex-row items-center",children:[e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{...j,type:"radio",className:"form-radio  w-4 h-4 text-blue-500 focus:ring-2 focus:ring-blue-500",value:"AKTIF",checked:j.value=="AKTIF",disabled:L||V=="Tambah"}),e.jsx("span",{className:"text-gray-700",children:"Aktif"})]}),e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{...j,type:"radio",className:"form-radio  w-4 h-4 text-blue-500 focus:ring-2 focus:ring-blue-500",value:"NON-AKTIF",disabled:L||V=="Tambah",checked:j.value=="NON-AKTIF"}),e.jsx("span",{className:"text-gray-700",children:"Non Aktif"})]})]}),e.jsx(ue,{text:c.error,error:c.error&&c.touched})]})})})})]})})}),e.jsx(ya,{children:e.jsxs(e.Fragment,{children:[!L&&e.jsx(Je,{submit:G,color:"success",formId:"form",text:M}),e.jsx(_e,{color:L?"dark":"error",variant:"gradient",onClick:()=>T(!1),children:L?"Tutup":"Batal"})]})})]})})]})]})},Lg=fa().shape({jenis_naskah_id:wa().required("Jenis Naskah harus dipilih"),file:Qa().required("File harus di upload").test("fileSize","Maksimal Ukuran File 5 MB",r=>r?r&&r.size<=6e6:!0).test("fileType","File hanya mendukung format .DOC, .DOCX",r=>{const s=["application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document"];return r?r&&s.includes(r.type):!0})}),$g=fa().shape({jenis_naskah_id:wa().required("Jenis Naskah harus dipilih"),file:Qa().test("fileSize","Maksimal Ukuran File 5 MB",r=>r?r&&r.size<=6e6:!0).test("fileType","File hanya mendukung format .DOC, .DOCX",r=>{const s=["application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document"];return r?r&&s.includes(r.type):!0})}),ir="https://api.arsip.go.id/master/api/";class dd{constructor(){ae(this,"getPaging",async s=>{const n=Ce.serializeObjectToQueryString(s);return await se.get(`${ir}template-naskah?${n}`).then(l=>l)});ae(this,"getData",async s=>await se.get(`${ir}template-naskah/index-not-pagination`).then(i=>i));ae(this,"post",async s=>await se.post(`${ir}template-naskah`,s,{headers:{"Content-Type":"multipart/form-data"}}).then(i=>i));ae(this,"put",async(s,n)=>await se.post(`${ir}template-naskah/${s}`,n,{headers:{"Content-Type":"multipart/form-data"}}).then(l=>l));ae(this,"detail",async s=>await se.get(`${ir}template-naskah/${s}`).then(i=>i));ae(this,"delete",async s=>await se.delete(`${ir}template-naskah/${s}`).then(i=>i))}}const ud="/assets/empty-k-q37u9S.jpg",Xn=({name:r,onChange:s,className:n,accept:t,initialFile:i,disabled:l})=>{var B;const m=a.useRef(),p=a.useRef();return a.useEffect(()=>{const K=i??ud,W=m.current,z=p.current;if(W.src=K,W.style.display="inline-block",z.files&&z.files[0]){const T=new FileReader;T.readAsDataURL(z.files[0]),T.onload=function(L){if(L.target){const $=L.target.result;W.src=$||K}}}else W.src=K},[(B=p.current)==null?void 0:B.value]),e.jsxs(e.Fragment,{children:[e.jsx("input",{name:r,ref:p,disabled:l,onChange:s,type:"file",accept:t,className:"text-sm rounded-lg hidden"}),e.jsx("img",{ref:m,onClick:()=>p.current.click(),alt:"image",className:`h-auto max-w-full ${l?"":"cursor-pointer"} rounded-lg ${n}`})]})};Xn.propTypes={name:Z.string,onChange:Z.func,className:Z.string,accept:Z.string,initialFile:Z.string,disabled:Z.bool};const no="/assets/word-BIKimN7e.png",hd=({name:r,onChange:s,className:n,accept:t,initialFile:i,disabled:l})=>{var H;const m=a.useRef(),p=a.useRef(),[B,K]=a.useState(null),[W,z]=a.useState(!!i),[T,L]=a.useState(!1),$=ud,M={words:["application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document",".doc",".docx"]};return a.useEffect(()=>{const V=m.current,A=p.current;if(V.src=$,T)if(W){if(i){const G="."+i.slice((i.lastIndexOf(".")-1>>>0)+2);M.words.includes(G)&&(V.src=no,z(!1)),K(i)}}else V.style.display="inline-block",A.files&&A.files[0]?(K(A.files[0].name),M.words.includes(A.files[0].type)&&(V.src=no)):(V.src=$,K(null));L(!0)},[(H=p.current)==null?void 0:H.value]),e.jsxs(e.Fragment,{children:[e.jsx("input",{name:r,ref:p,disabled:l,onChange:s,type:"file",accept:t,className:"text-sm rounded-lg hidden"}),e.jsx("img",{ref:m,onClick:()=>p.current.click(),alt:"image",className:`h-auto max-w-full ${l?"":"cursor-pointer"} rounded-lg ${n}`}),e.jsx("div",{className:"text-base font-medium underline ps-1 text-gray-500",children:B})]})};hd.propTypes={name:Z.string,onChange:Z.func,className:Z.string,accept:Z.string,initialFile:Z.string,disabled:Z.bool};const Rg=()=>{const r="Template Naskah",[s,n]=a.useState(!1),t=JSON.parse(Le.getItem("users")),i=new dd,l=new qa,m=ga(),p=ha(),[B,K]=a.useState(!1),[W,z]=a.useState(!0),[T,L]=a.useState(null),[$,M]=a.useState({formode:m.state.formode,id:m.state.id,organisasi_id:m.state.organisasi_id,jenis_naskah_id:m.state.jenis_naskah_id,template_naskah:m.state.template_naskah}),H="";a.useEffect(()=>{$.formode=="Lihat"?(n(!0),K(!0),A()):($.formode=="Tambah"&&n(ge(r,"is_create",!0)),$.formode=="Ubah"&&(n(ge(r,"is_update",!0)),A()),K(!1))},[$.formode]);const V=I=>{z(!1),I.id!==0?i.put(I.id,{...I,_method:"PUT"}).then(_=>{var C,k,b;U.fire((C=_.data)!=null&&C.success?"Berhasil":"Gagal",(k=_.data)==null?void 0:k.message,(b=_.data)!=null&&b.success?"success":"warning"),_.data.success&&X()}).catch(_=>{var k,b;const C=Oe(_.response.data.result);U.fire("Gagal",C??((b=(k=_.response)==null?void 0:k.data)==null?void 0:b.message),"error")}).finally(()=>z(!0)):i.post(I).then(_=>{var C,k,b;U.fire((C=_.data)!=null&&C.success?"Berhasil":"Gagal",(k=_.data)==null?void 0:k.message,(b=_.data)!=null&&b.success?"success":"warning"),_.data.success&&X()}).catch(_=>{var k,b;const C=Oe(_.response.data.result);U.fire("Gagal",C??((b=(k=_.response)==null?void 0:k.data)==null?void 0:b.message),"error")}).finally(()=>z(!0))},A=async()=>{await i.detail($.id).then(I=>{$.jenis_naskah_id=I.data.result.jenis_naskah_id,G(I.data.result.jenis_naskah_id)})},G=async I=>{I&&await l.detail("tatanaskah/jenis-naskah",I,"master").then(_=>L(_)).catch(_=>console.log(_))},X=()=>{p(H+"/tata-naskah-dinas/template-naskah")},O="Jika data yang diinput ada lebih dari satu, maka ditambahkan nomor dari angka 1 dan seterusnya.";return e.jsxs(aa,{children:[e.jsx(la,{}),s&&e.jsx(e.Fragment,{children:e.jsx(ie,{pt:6,pb:3,children:e.jsxs(Me,{children:[e.jsx(ie,{px:3,pt:3,lineHeight:1,children:e.jsxs(w,{container:!0,direction:"row",justifyContent:"space-between",alignItems:"center",children:[e.jsx(w,{item:!0,children:e.jsxs(le,{variant:"h5",fontWeight:"medium",children:[$.formode," Template Naskah"]})}),e.jsx(w,{item:!0,children:e.jsxs(_e,{variant:"gradient",color:"secondary",onClick:X,children:[e.jsx(za,{size:"1.5em",className:"me-2"}),"Batal"]})})]})}),e.jsx(ca,{initialValues:$,onSubmit:V,validateOnChange:!0,validationSchema:$.formode=="Tambah"?Lg:$g,children:e.jsxs(da,{id:"form",encType:"multipart/form-data",children:[e.jsx(w,{mt:2,children:e.jsxs("div",{className:"p-6 grid grid-cols-12 mb-10 gap-5 lg:mb-0",children:[e.jsx("div",{className:"col-span-12 lg:col-span-6",children:e.jsxs(w,{children:[e.jsx("input",{type:"hidden",name:"id",value:$.id}),e.jsx(ce,{name:"jenis_naskah_id",children:({field:I,form:_,meta:C})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Jenis Naskah",required:!0,error:C.error&&C.touched}),e.jsx(ra,{...I,url:"tatanaskah/jenis-naskah/select",targetService:"master",isDisabled:B,callbackChange:k=>{_.setFieldValue("jenis_naskah_id",(k==null?void 0:k.id)??""),L(k)},selectedData:T,keyValue:["id","jenis_naskah"],placeholder:"Pilih Jenis Naskah...",className:"text-sm",menuPortalTarget:null,optionParam:{"select-target":"select-jenis-naskah-by-unitkerja",role:t==null?void 0:t.role,public_organisasi_id:t==null?void 0:t.public_organisasi_id}}),e.jsx(ue,{text:C.error,error:C.error&&C.touched})]})})]})}),e.jsx("div",{className:"col-span-12 lg:col-span-6",children:e.jsx(w,{children:e.jsx(ce,{name:"file",children:({field:I,form:_,meta:C})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:`${$.formode=="Tambah"?"Pilih":"Perbaharui"} File Template Naskah`,required:!0,error:C.error&&C.touched}),e.jsx(hd,{...I,onChange:k=>{var b;_.setFieldValue("file",k.currentTarget.files[0]),_.setFieldValue("template_naskah",(b=k.currentTarget.files[0])==null?void 0:b.name)},className:"max-h-[10rem] mb-5",accept:"application/msword, application/vnd.openxmlformats-officedocument.wordprocessingml.document",initialFile:$.template_naskah,disabled:B}),e.jsxs("div",{className:"text-sm ps-1 text-blue-500",children:[e.jsx("p",{children:"Klik gambar untuk pilih file"}),e.jsx("p",{children:"Format yang didukung: .doc, .docx "}),e.jsx("p",{children:"dan maksimum ukuran file 5 MB"})]}),e.jsx(ue,{text:C.error,error:C.error&&C.touched})]})})})})]})}),e.jsx("div",{className:"px-6 py-3 flex justify-end items-center w-full gap-5 mb-10",children:!B&&e.jsx(Je,{submit:W,color:"success",formId:"form",text:$.formode=="Tambah"?"Simpan":"Ubah"})})]})}),e.jsx("div",{className:"overflow-auto",children:e.jsx("div",{className:"table p-10 min-w-full",children:e.jsxs("table",{className:"w-full text-sm text-left !text-gray-700 dark:text-gray-400 table-bordered",children:[e.jsx("thead",{className:"text-xs text-gray-500 uppercase border-b-2 mb-1",children:e.jsxs("tr",{children:[e.jsx(q,{text:"No",className:"flex justify-center"}),e.jsx(q,{text:"Parament"}),e.jsx(q,{text:"Keterangan"})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{className:"border-b border-slate-300",children:[e.jsx("td",{className:" max-w-[9rem] px-6 py-6",children:e.jsx("div",{className:"flex-wrap",children:"1"})}),e.jsx("td",{className:" max-w-[9rem] px-6 py-6",children:e.jsx("div",{className:"flex-wrap",children:"${nomor_naskah}"})}),e.jsx("td",{className:" max-w-[20rem] px-6 py-6",children:e.jsx("div",{className:"flex-wrap",children:"Digunakan untuk mengambil nomor naskah yang dibuat secara otomatis di Srikandi, nomor naskah ini akan disematkan saat proses penandatanganan digital."})})]}),e.jsxs("tr",{className:"border-b border-slate-300",children:[e.jsx("td",{className:" max-w-[9rem] px-6 py-6",children:e.jsx("div",{className:"flex-wrap",children:"2"})}),e.jsx("td",{className:" max-w-[9rem] px-6 py-6",children:e.jsx("div",{className:"flex-wrap",children:"${tanggal_naskah}"})}),e.jsx("td",{className:" max-w-[20rem] px-6 py-6",children:e.jsx("div",{className:"flex-wrap",children:"Digunakan untuk mengambil tanggal dari naskah yang akan dibuat, tanggal ini akan disematkan saat proses penandatanganan digital."})})]}),e.jsxs("tr",{className:"border-b border-slate-300",children:[e.jsx("td",{className:" max-w-[9rem] px-6 py-6",children:e.jsx("div",{className:"flex-wrap",children:"3"})}),e.jsx("td",{className:" max-w-[9rem] px-6 py-6",children:e.jsx("div",{className:"flex-wrap",children:"${hal}"})}),e.jsx("td",{className:" max-w-[20rem] px-6 py-6",children:e.jsx("div",{className:"flex-wrap",children:"Digunakan untuk menyematkan hal yang sudah diisi pada e-form pembuatan naskah."})})]}),e.jsxs("tr",{className:"border-b border-slate-300",children:[e.jsx("td",{className:" max-w-[9rem] px-6 py-6",children:e.jsx("div",{className:"flex-wrap",children:"4"})}),e.jsx("td",{className:" max-w-[9rem] px-6 py-6",children:e.jsx("div",{className:"flex-wrap",children:"${sifat}"})}),e.jsx("td",{className:" max-w-[20rem] px-6 py-6",children:e.jsx("div",{className:"flex-wrap",children:"Digunakan untuk menyematkan sifat naskah yang dipilih pada pengisian e-form pembuatan naskah."})})]}),e.jsxs("tr",{className:"border-b border-slate-300",children:[e.jsx("td",{className:" max-w-[9rem] px-6 py-6",children:e.jsx("div",{className:"flex-wrap",children:"5"})}),e.jsx("td",{className:" max-w-[9rem] px-6 py-6",children:e.jsx("div",{className:"flex-wrap",children:"${nama_tujuan}"})}),e.jsx("td",{className:" max-w-[20rem] px-6 py-6",children:e.jsxs("p",{className:"flex-wrap",children:["Digunakan untuk Menyematkan nama tujuan naskah yang sudah dipilih pada pengisian e-form pembuatan naskah.",e.jsx("br",{}),O]})})]}),e.jsxs("tr",{className:"border-b border-slate-300",children:[e.jsx("td",{className:" max-w-[9rem] px-6 py-6",children:e.jsx("div",{className:"flex-wrap",children:"6"})}),e.jsx("td",{className:" max-w-[9rem] px-6 py-6",children:e.jsx("div",{className:"flex-wrap",children:"${jabatan_tujuan}"})}),e.jsx("td",{className:" max-w-[20rem] px-6 py-6",children:e.jsxs("div",{className:"flex-wrap",children:["Digunakan untuk Menyematkan Jabatan dari tujuan naskah yang sudah dipilih pada pengisian e-form pembuatan naskah.",e.jsx("br",{}),O]})})]}),e.jsxs("tr",{className:"border-b border-slate-300",children:[e.jsx("td",{className:" max-w-[9rem] px-6 py-6",children:e.jsx("div",{className:"flex-wrap",children:"7"})}),e.jsx("td",{className:" max-w-[9rem] px-6 py-6",children:e.jsx("div",{className:"flex-wrap",children:"${instansi_pengirim}"})}),e.jsx("td",{className:" max-w-[20rem] px-6 py-6",children:e.jsxs("div",{className:"flex-wrap",children:["Digunakan untuk Menyematkan Instansi dari Penandatangan naskah yang sudah dipilih pada pengisian e-form pembuatan naskah.",e.jsx("br",{}),O]})})]}),e.jsxs("tr",{className:"border-b border-slate-300",children:[e.jsx("td",{className:" max-w-[9rem] px-6 py-6",children:e.jsx("div",{className:"flex-wrap",children:"8"})}),e.jsx("td",{className:" max-w-[9rem] px-6 py-6",children:e.jsx("div",{className:"flex-wrap",children:"${jabatan_pengirim}"})}),e.jsx("td",{className:" max-w-[20rem] px-6 py-6",children:e.jsxs("div",{className:"flex-wrap",children:["Digunakan untuk Menyematkan jabatan dari Penandatangan naskah yang sudah dipilih pada pengisian e-form pembuatan naskah.",e.jsx("br",{}),O]})})]}),e.jsxs("tr",{className:"border-b border-slate-300",children:[e.jsx("td",{className:" max-w-[9rem] px-6 py-6",children:e.jsx("div",{className:"flex-wrap",children:"9"})}),e.jsx("td",{className:" max-w-[9rem] px-6 py-6",children:e.jsx("div",{className:"flex-wrap",children:"${nama_pengirim}"})}),e.jsx("td",{className:" max-w-[20rem] px-6 py-6",children:e.jsxs("div",{className:"flex-wrap",children:["Digunakan untuk Menyematkan Nama dari Penandatangan naskah yang sudah dipilih pada pengisian e-form pembuatan naskah.",e.jsx("br",{}),O]})})]}),e.jsxs("tr",{className:"border-b border-slate-300",children:[e.jsx("td",{className:" max-w-[9rem] px-6 py-6",children:e.jsx("div",{className:"flex-wrap",children:"10"})}),e.jsx("td",{className:" max-w-[9rem] px-6 py-6",children:e.jsx("div",{className:"flex-wrap",children:"${nip_pengirim}"})}),e.jsx("td",{className:" max-w-[20rem] px-6 py-6",children:e.jsxs("div",{className:"flex-wrap",children:["Digunakan untuk Menyematkan NIP dari Penandatangan naskah yang sudah dipilih pada pengisian e-form pembuatan naskah.",e.jsx("br",{}),O]})})]}),e.jsxs("tr",{className:"border-b border-slate-300",children:[e.jsx("td",{className:" max-w-[9rem] px-6 py-6",children:e.jsx("div",{className:"flex-wrap",children:"11"})}),e.jsx("td",{className:" max-w-[9rem] px-6 py-6",children:e.jsx("div",{className:"flex-wrap",children:"${nik_pengirim}"})}),e.jsx("td",{className:" max-w-[20rem] px-6 py-6",children:e.jsxs("div",{className:"flex-wrap",children:["Digunakan untuk Menyematkan NIK dari Penandatangan naskah yang sudah dipilih pada pengisian e-form pembuatan naskah.",e.jsx("br",{}),O]})})]}),e.jsxs("tr",{className:"border-b border-slate-300",children:[e.jsx("td",{className:" max-w-[9rem] px-6 py-6",children:e.jsx("div",{className:"flex-wrap",children:"12"})}),e.jsx("td",{className:" max-w-[9rem] px-6 py-6",children:e.jsx("div",{className:"flex-wrap",children:"${ttd_pengirim}"})}),e.jsx("td",{className:" max-w-[20rem] px-6 py-6",children:e.jsxs("div",{className:"flex-wrap",children:["Digunakan untuk Menyematkan QRCode Penandatangan naskah.",e.jsx("br",{}),O]})})]})]})]})})})]})})})]})},kn="https://api.arsip.go.id/master/api/";let Eg=class{constructor(){ae(this,"getPaging",async s=>{const n=Ce.serializeObjectToQueryString(s);return await se.get(`${kn}tatanaskah/instruksi?${n}`).then(l=>l)});ae(this,"post",async s=>await se.post(`${kn}tatanaskah/instruksi`,s).then(i=>i));ae(this,"put",async(s,n)=>await se.put(`${kn}tatanaskah/instruksi/${s}`,n).then(l=>l));ae(this,"delete",async s=>await se.delete(`${kn}tatanaskah/instruksi/${s}`).then(i=>i))}};const Mg=fa().shape({keterangan:ze().required("Intruksi Disposisi harus diisi"),status:ze().required("Status harus dipilih")}),Kg=()=>{const r="Instruksi Disposisi",s=JSON.parse(Le.getItem("users")),n=ga(),t=new URLSearchParams(n.search).get("status"),[i,l]=a.useState(!1);a.useEffect(()=>{l(ge(r,"is_read",!0))},[]);const m=new Eg,p=new qa,[B,K]=a.useState(!1),[W,z]=a.useState(null),[T,L]=Ga.useState(!1),[$,M]=a.useState(!1),[H,V]=a.useState("Simpan"),[A,G]=a.useState(""),[X,O]=a.useState(!0),[I,_]=a.useState(null),[C,k]=a.useState(null),[b,y]=a.useState({id:0,organisasi_id:s==null?void 0:s.organisasi_id,public_organisasi_id:s==null?void 0:s.public_organisasi_id,grup_jabatan_id:s==null?void 0:s.grup_jabatan_id,keterangan:"",status:"AKTIF"}),[o,F]=a.useState({total:0,from:1,to:1});let x=[];W==null?x=[]:x=W.map(N=>({keterangan:N.keterangan,grup_jabatan_nama:N.grup_jabatan_nama,status:N.status,action:e.jsxs("div",{className:"flex content-start justify-end w-full",children:[ge(r,"is_update")&&e.jsx(Va,{size:"1.5em",color:"#fbcf33",onClick:()=>d(N),className:"me-3 cursor-pointer",title:"Ubah"}),e.jsx(Oa,{size:"1.5em",color:"#17c1e8",onClick:()=>j(N),className:"cursor-pointer",title:"Lihat"}),ge(r,"is_delete")&&e.jsx($a,{size:"1.5em",color:"#e62e2d",onClick:()=>g(N),className:"ms-3 cursor-pointer",title:"Hapus"})]})}));const[S,f]=a.useState({page:1,rows:10,sortField:"",sortOrder:null,search:"",filters:{keterangan:{value:""},status:{value:t||""},organisasi_id:{value:s==null?void 0:s.organisasi_id},public_organisasi_id:{value:s==null?void 0:s.public_organisasi_id}}});a.useEffect(()=>{R()},[S]);const R=async(N=!1)=>{N&&(S.page=1),K(!0),await m.getPaging(S).then(Q=>{let re=Q.data.result;re.data&&(_(re.last_page),z(re.data),K(!1)),K(!1),F({...o,to:re.to,from:re.from,total:re.total})}).catch(Q=>{K(!1),F({...o,to:0,from:!1,total:0})})},u=Da((N,Q,re=null)=>{if(re){let xe=re.target;for(;xe&&xe.tagName!=="TD";)xe=xe.parentNode;if(xe&&xe.tagName==="TD"){const fe=xe.querySelector(".clear-input"),Ge=xe.querySelector("input");Q?fe.classList.remove("hidden"):(fe.classList.add("hidden"),Ge.value="")}}let ye={...S};ye.filters[N].value=Q,ye.page=1,f(ye)},600),D=N=>{let Q={...S};Q.page=N,f(Q),window.scrollTo({top:0,behavior:"smooth"})},E=N=>{let Q={...S};Q.rows=N,Q.page=1,f(Q)},J=N=>{let Q={...S};Q.sortField=N,Q.page=1,S.sortField!=N?S.sortOrder==""&&(Q.sortOrder=1):S.sortOrder==1?Q.sortOrder=-1:(Q.sortOrder="",Q.sortField=""),f(Q)},P=N=>{O(!1),N.id!==0?m.put(N.id,N).then(Q=>{var re,ye,xe;U.fire((re=Q.data)!=null&&re.success?"Berhasil":"Gagal",(ye=Q.data)==null?void 0:ye.message,(xe=Q.data)!=null&&xe.success?"success":"warning"),Q.data.success&&(R(!0),c())}).catch(Q=>{var ye,xe;const re=Oe(Q.response.data.result);U.fire("Gagal",re??((xe=(ye=Q.response)==null?void 0:ye.data)==null?void 0:xe.message),"error")}).finally(()=>O(!0)):m.post(N).then(Q=>{var re,ye,xe;U.fire((re=Q.data)!=null&&re.success?"Berhasil":"Gagal",(ye=Q.data)==null?void 0:ye.message,(xe=Q.data)!=null&&xe.success?"success":"warning"),Q.data.success&&(R(!0),c())}).catch(Q=>{var ye,xe;const re=Oe(Q.response.data.result);U.fire("Gagal",re??((xe=(ye=Q.response)==null?void 0:ye.data)==null?void 0:xe.message),"error")}).finally(()=>O(!0))},h=N=>{L(!0),y({id:0,organisasi_id:s==null?void 0:s.organisasi_id,public_organisasi_id:s==null?void 0:s.public_organisasi_id,grup_jabatan_id:null,keterangan:"",status:"AKTIF"}),V("Simpan"),G("Tambah"),M(!1)},d=N=>{L(!0),y({id:N.id,organisasi_id:N.organisasi_id,public_organisasi_id:N.public_organisasi_id,grup_jabatan_id:N.grup_jabatan_id,keterangan:N.keterangan,status:N.status}),k(null),v(N.grup_jabatan_id),V("Perbarui"),G("Ubah"),M(!1)},j=N=>{L(!0),y({id:N.id,organisasi_id:N.organisasi_id,public_organisasi_id:N.public_organisasi_id,grup_jabatan_id:N.grup_jabatan_id,keterangan:N.keterangan,status:N.status}),k(null),v(N.grup_jabatan_id),G("Lihat"),M(!0)},g=N=>{U.fire({title:"Konfirmasi",text:`Data ${N.keterangan} akan dihapus ?`,icon:"warning",showCancelButton:!0,confirmButtonText:"Hapus",cancelButtonText:"Batal",customClass:{confirmButton:"button button-error",cancelButton:"button button-info"}}).then(Q=>{Q.isConfirmed&&(ka(),m.delete(N.id).then(re=>{re.status==200&&R(),U.fire("Berhasil","Data Berhasil Dihapus","success")}).catch(re=>{var xe,fe;const ye=Oe(re.response.data.result);U.fire("Gagal",ye??((fe=(xe=re.response)==null?void 0:xe.data)==null?void 0:fe.message),"error")}))})},c=()=>{L(!1)},v=async N=>{N&&await p.detail("pengguna/grupjabatan",N,"").then(Q=>{k(Q)})};return e.jsxs(aa,{children:[e.jsx(la,{}),i&&e.jsxs(e.Fragment,{children:[e.jsx(ie,{pt:6,pb:3,children:e.jsxs(Me,{children:[e.jsx(ie,{px:3,pt:3,lineHeight:1,children:e.jsxs(w,{container:!0,direction:"row",justifyContent:"space-between",alignItems:"center",children:[e.jsx(w,{item:!0,children:e.jsxs(le,{variant:"h5",fontWeight:"medium",children:["Daftar ",r]})}),ge(r,"is_create")&&e.jsx(w,{item:!0,children:e.jsxs(_e,{variant:"gradient",color:"info",onClick:h,children:[e.jsx(Ea,{size:"1.5em"}),"Tambah Baru"]})})]})}),e.jsx("div",{className:"overflow-auto",children:e.jsxs("div",{className:"table p-10 min-w-full",children:[e.jsx("div",{className:"flex items-center justify-end mb-1",children:e.jsx(pa,{config:S,handleClick:E})}),e.jsxs("table",{className:"w-full text-sm text-left !text-gray-700 dark:text-gray-400 table-bordered",children:[e.jsx("thead",{className:"text-xs text-gray-500 uppercase border-b-2 mb-1",children:e.jsxs("tr",{children:[e.jsx(q,{text:"Instruksi Disposisi",sortField:"keterangan",sortOrder:S.sortOrder,config:S,handleClick:()=>J("keterangan")}),e.jsx(q,{text:"Status",sortField:"status",sortOrder:S.sortOrder,config:S,handleClick:()=>J("status")}),e.jsx(q,{text:"Aksi",className:"justify-center min-w-[2rem]"})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{className:"border-b border-slate-300",children:[e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"keterangan",onSearch:u,placeholder:"Instruksi Disposisi",type:"input"})}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"status",onSearch:u,placeholder:"Status",type:"status",defaultValue:Us.find(N=>N.value==t)})}),e.jsx("td",{})]}),B?e.jsx("tr",{children:e.jsx("td",{colSpan:4,children:e.jsx(ia,{})})}):e.jsx(e.Fragment,{}),x.length?x.map((N,Q)=>e.jsxs("tr",{className:"border-b border-slate-300",children:[e.jsx("td",{className:" max-w-[20rem] px-6 py-6",children:N.keterangan}),e.jsx("td",{className:"max-w-[20rem] px-6 py-6",children:N.status==="AKTIF"?e.jsx(be,{badgeContent:"Aktif",color:"success",container:!0}):e.jsx(be,{badgeContent:"Non-Aktif",color:"error",container:!0})}),e.jsxs("td",{className:"px-1 text-right w-[2rem]",children:[" ",N.action," "]})]},Q)):e.jsx(e.Fragment,{})]})]}),e.jsxs("nav",{className:"flex items-center justify-between p-4","aria-label":"Table navigation",children:[e.jsx("span",{className:"text-sm text-gray-400",children:o.from&&`Menampilkan ${Se(o.from)} sampai ${Se(o.to)} dari ${Se(o.total)} entri`}),e.jsx(xa,{currentPage:S.page,lastPage:I,displayCount:5,handleClick:D})]})]})})]})}),e.jsx(ua,{}),e.jsx(Fa,{open:T,onClose:c,children:e.jsxs("div",{children:[e.jsxs(_a,{children:[A," ",r]}),e.jsx(ca,{initialValues:b,onSubmit:P,validateOnChange:!0,validationSchema:Mg,children:e.jsx(da,{id:"form",className:"text-sm",children:e.jsxs("div",{className:"p-5",children:[e.jsx(w,{mt:1,children:e.jsxs("div",{className:"p-3",children:[e.jsx("input",{type:"hidden",name:"id",value:b.id}),e.jsx(ce,{name:"keterangan",children:({field:N,form:Q,meta:re})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Instruksi Disposisi",required:!0,error:re.error&&re.touched}),e.jsx(Ye,{...N,type:"text",placeholder:"Instruksi Disposisi",error:re.error&&re.touched,disabled:$}),e.jsx(ue,{text:re.error,error:re.error&&re.touched})]})})]})}),e.jsx(w,{mt:1,children:e.jsx(Na,{children:e.jsx(ce,{name:"status",children:({field:N,form:Q,meta:re})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Status",required:!0,error:re.error&&re.touched}),e.jsxs("div",{className:"space-x-4 flex flex-row items-center",children:[e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{...N,type:"radio",className:"form-radio  w-4 h-4 text-blue-500 focus:ring-2 focus:ring-blue-500",value:"AKTIF",checked:N.value=="AKTIF",disabled:$||A=="Tambah"}),e.jsx("span",{className:"text-gray-700",children:"Aktif"})]}),e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{...N,type:"radio",className:"form-radio  w-4 h-4 text-blue-500 focus:ring-2 focus:ring-blue-500",value:"NON-AKTIF",disabled:$||A=="Tambah",checked:N.value=="NON-AKTIF"}),e.jsx("span",{className:"text-gray-700",children:"Non Aktif"})]})]}),e.jsx(ue,{text:re.error,error:re.error&&re.touched})]})})})})]})})}),e.jsx(ya,{children:e.jsxs(e.Fragment,{children:[!$&&e.jsx(Je,{submit:X,color:"success",formId:"form",text:H}),e.jsx(_e,{color:$?"dark":"error",variant:"gradient",onClick:()=>L(!1),children:$?"Tutup":"Batal"})]})})]})})]})]})},qr="https://api.arsip.go.id/master/api/";class zg{constructor(){ae(this,"getPaging",async s=>{const n=Ce.serializeObjectToQueryString(s);return await se.get(`${qr}tatanaskah/jenis-naskah?${n}`).then(l=>l)});ae(this,"getData",async s=>await se.get(`${qr}tatanaskah/jenis-naskah/index-not-pagination`).then(i=>i));ae(this,"post",async s=>await se.post(`${qr}tatanaskah/jenis-naskah`,s).then(i=>i));ae(this,"put",async(s,n)=>await se.put(`${qr}tatanaskah/jenis-naskah/${s}`,n).then(l=>l));ae(this,"delete",async s=>await se.delete(`${qr}tatanaskah/jenis-naskah/${s}`).then(i=>i))}}const Ug=fa().shape({jenis_naskah:ze().required("Jenis naskah harus diisi"),is_centralized:ze().required("Tipe Penomoran harus dipilih"),status:ze().required("Status harus dipilih")}),Vg=()=>{const r="Jenis Naskah Dinas",s=ga(),n=new URLSearchParams(s.search).get("status"),[t,i]=a.useState(!1);a.useEffect(()=>{i(ge(r,"is_read",!0))},[]);const l=JSON.parse(Le.getItem("users")),m=new zg,[p,B]=a.useState(!1),[K,W]=a.useState(null),[z,T]=Ga.useState(!1),[L,$]=a.useState(!1),[M,H]=a.useState("Simpan"),[V,A]=a.useState(""),[G,X]=a.useState(!0),[O,I]=a.useState(null),[_,C]=a.useState({id:0,jenis_naskah:"",is_centralized:"Y",organisasi_id:null,public_organisasi_id:null,status:"AKTIF"}),[k,b]=a.useState({total:0,from:1,to:1});let y=[];K==null?y=[]:y=K.map(g=>({jenis_naskah:g.jenis_naskah,is_centralized:g.is_centralized,status:g.status,action:e.jsxs("div",{className:"flex content-start justify-center w-full",children:[ge(r,"is_update")&&e.jsx(Va,{size:"1.5em",color:"#fbcf33",onClick:()=>P(g),className:"me-3 cursor-pointer",title:"Edit"}),e.jsx(Oa,{size:"1.5em",color:"#17c1e8",onClick:()=>h(g),className:"cursor-pointer",title:"View"}),ge(r,"is_delete")&&e.jsx($a,{size:"1.5em",color:"#e62e2d",onClick:()=>d(g),className:"ms-3 cursor-pointer",title:"Hapus"})]})}));const[o,F]=a.useState({page:1,rows:10,sortField:"",sortOrder:null,filters:{jenis_naskah:{value:""},public_organisasi_id:{value:l.public_organisasi_id},organisasi_id:{value:l.organisasi_id},is_centralized:{value:""},status:{value:n||""}}});a.useEffect(()=>{x()},[o]);const x=async(g=!1)=>{g&&(o.page=1),B(!0),await m.getPaging(o).then(c=>{let v=c.data.result;v.data&&(I(v.last_page),W(v.data),B(!1)),B(!1),b({...k,to:v.to,from:v.from,total:v.total})}).catch(c=>{B(!1),b({...k,to:0,from:!1,total:0})})},S=[{value:"Sentralisasi",label:e.jsx("div",{children:e.jsx(be,{badgeContent:"Sentralisasi",color:"info",container:!0})})},{value:"Desentralisasi",label:e.jsx("div",{children:e.jsx(be,{badgeContent:"Desentralisasi",color:"dark",container:!0})})}],f=Da((g,c,v=null)=>{if(v){let Q=v.target;for(;Q&&Q.tagName!=="TD";)Q=Q.parentNode;if(Q&&Q.tagName==="TD"){const re=Q.querySelector(".clear-input"),ye=Q.querySelector("input");c?re.classList.remove("hidden"):(re.classList.add("hidden"),ye.value="")}}let N={...o};N.filters[g].value=c,N.page=1,F(N)},600),R=g=>{let c={...o};c.page=g,F(c),window.scrollTo({top:0,behavior:"smooth"})},u=g=>{let c={...o};c.rows=g,c.page=1,F(c)},D=g=>{let c={...o};c.sortField=g,c.sortOrder=o.sortField!=g?1:o.sortOrder==1?-1:1,c.page=1,F(c)},E=g=>{X(!1),g.id!==0?m.put(g.id,g).then(c=>{var v,N,Q;U.fire((v=c.data)!=null&&v.success?"Berhasil":"Gagal",(N=c.data)==null?void 0:N.message,(Q=c.data)!=null&&Q.success?"success":"warning"),c.data.success&&(x(!0),j())}).catch(c=>{var N,Q;const v=Oe(c.response.data.result);U.fire("Gagal",v??((Q=(N=c.response)==null?void 0:N.data)==null?void 0:Q.message),"error")}).finally(()=>X(!0)):m.post(g).then(c=>{var v,N,Q;U.fire((v=c.data)!=null&&v.success?"Berhasil":"Gagal",(N=c.data)==null?void 0:N.message,(Q=c.data)!=null&&Q.success?"success":"warning"),c.data.success&&(x(!0),j())}).catch(c=>{var N,Q;const v=Oe(c.response.data.result);U.fire("Gagal",v??((Q=(N=c.response)==null?void 0:N.data)==null?void 0:Q.message),"error")}).finally(()=>X(!0))},J=g=>{T(!0),C({id:0,jenis_naskah:"",is_centralized:"",organisasi_id:l.organisasi_id,public_organisasi_id:l.public_organisasi_id,status:"AKTIF"}),H("Simpan"),A("Tambah"),$(!1)},P=g=>{T(!0),C({id:g.id,jenis_naskah:g.jenis_naskah,is_centralized:g.is_centralized,organisasi_id:g.organisasi_id,public_organisasi_id:g.public_organisasi_id,status:g.status}),H("Perbarui"),A("Ubah"),$(!1)},h=g=>{T(!0),C({id:g.id,jenis_naskah:g.jenis_naskah,is_centralized:g.is_centralized,organisasi_id:g.organisasi_id,public_organisasi_id:g.public_organisasi_id,status:g.status}),A("Lihat"),$(!0)},d=g=>{U.fire({title:"Konfirmasi",text:`Data ${g.jenis_naskah} akan dihapus ?`,icon:"warning",showCancelButton:!0,confirmButtonText:"Hapus",cancelButtonText:"Batal",customClass:{confirmButton:"button button-error",cancelButton:"button button-info"}}).then(c=>{c.isConfirmed&&(U.showLoading(),m.delete(g.id).then(v=>{v.status==200&&x(),U.fire("Berhasil","Data Berhasil Dihapus","success")}).catch(v=>{var Q,re;const N=Oe(v.response.data.result);U.fire("Gagal",N??((re=(Q=v.response)==null?void 0:Q.data)==null?void 0:re.message),"error")}))})},j=()=>{T(!1)};return e.jsxs(aa,{children:[e.jsx(la,{}),t&&e.jsxs(e.Fragment,{children:[e.jsx(ie,{pt:6,pb:3,children:e.jsxs(Me,{children:[e.jsx(ie,{px:3,pt:3,lineHeight:1,children:e.jsxs(w,{container:!0,direction:"row",justifyContent:"space-between",alignItems:"center",children:[e.jsx(w,{item:!0,children:e.jsxs(le,{variant:"h5",fontWeight:"medium",children:["Daftar ",r]})}),ge(r,"is_create")&&e.jsx(w,{item:!0,children:e.jsxs(_e,{variant:"gradient",color:"info",onClick:J,children:[e.jsx(Ea,{size:"1.5em"}),"Tambah Baru"]})})]})}),e.jsx("div",{className:"overflow-auto",children:e.jsxs("div",{className:"table p-10 min-w-full",children:[e.jsx("div",{className:"flex items-center justify-end mb-1",children:e.jsx(pa,{config:o,handleClick:u})}),e.jsxs("table",{className:"w-full text-sm text-left !text-gray-700 dark:text-gray-400 table-bordered",children:[e.jsx("thead",{className:"text-xs text-gray-500 uppercase border-b-2 mb-1",children:e.jsxs("tr",{children:[e.jsx(q,{text:"Jenis Naskah",sortField:"jenis_naskah",sortOrder:o.sortOrder,config:o,handleClick:()=>D("jenis_naskah")}),e.jsx(q,{text:"Tipe Naskah",sortField:"is_centralized",sortOrder:o.sortOrder,config:o,handleClick:()=>D("is_centralized")}),e.jsx(q,{text:"Status",sortField:"status",sortOrder:o.sortOrder,config:o,handleClick:()=>D("status")}),e.jsx(q,{text:"Aksi",className:"justify-center min-w-[2rem]"})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{className:"border-b border-slate-300",children:[e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"jenis_naskah",onSearch:f,placeholder:"Jenis Naskah",type:"input"})}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"is_centralized",onSearch:f,placeholder:"Tipe Naskah",type:"select",selectOption:S})}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"status",onSearch:f,placeholder:"Status",type:"status",defaultValue:Us.find(g=>g.value==n)})}),e.jsx("td",{})]}),p?e.jsx("tr",{className:"border-b border-slate-300",children:e.jsx("td",{colSpan:3,children:e.jsx(ia,{})})}):e.jsx(e.Fragment,{}),y.length?y.map((g,c)=>e.jsxs("tr",{className:"border-b border-slate-300",children:[e.jsx("td",{className:"max-w-[20rem] px-6 py-6",children:g.jenis_naskah}),e.jsx("td",{className:"max-w-[20rem] px-6 py-6",children:g.is_centralized=="Y"?e.jsx(be,{badgeContent:"Sentralisasi",color:"info",container:!0}):e.jsx(be,{badgeContent:"Desentralisasi",color:"dark",container:!0})}),e.jsx("td",{className:"max-w-[20rem] px-6 py-6",children:g.status=="AKTIF"?e.jsx(be,{badgeContent:g.status,color:"success",container:!0}):e.jsx(be,{badgeContent:g.status,color:"error",container:!0})}),e.jsxs("td",{className:"px-1 text-right w-[2rem]",children:[" ",g.action," "]})]},c)):e.jsx(e.Fragment,{})]})]}),e.jsxs("nav",{className:"flex items-center justify-between p-4","aria-label":"Table navigation",children:[e.jsx("span",{className:"text-sm text-gray-400",children:k.from&&`Menampilkan ${Se(k.from)} sampai ${Se(k.to)} dari ${Se(k.total)} entri`}),e.jsx(xa,{currentPage:o.page,lastPage:O,displayCount:5,handleClick:R})]})]})})]})}),e.jsx(ua,{}),e.jsx(Fa,{open:z,onClose:j,children:e.jsxs("div",{children:[e.jsxs(_a,{children:[V," ",r]}),e.jsx(ca,{initialValues:_,onSubmit:E,validateOnChange:!0,validationSchema:Ug,children:e.jsx(da,{id:"form",className:"text-sm",children:e.jsxs("div",{className:"p-5",children:[e.jsx(w,{mt:1,children:e.jsx(Na,{children:e.jsx(ce,{name:"jenis_naskah",children:({field:g,form:c,meta:v})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Nama Jenis Naskah",required:!0,error:v.error&&v.touched}),e.jsx(Ye,{...g,type:"text",placeholder:"Nama Jenis Naskah",error:v.error&&v.touched,disabled:L}),e.jsx(ue,{text:v.error,error:v.error&&v.touched})]})})})}),e.jsx(w,{mt:1,children:e.jsx(Na,{children:e.jsx(ce,{name:"is_centralized",children:({field:g,form:c,meta:v})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Tipe Naskah",required:!0,error:v.error&&v.touched}),L?_.is_centralized==="Y"?e.jsx(be,{badgeContent:"Sentralisasi",color:"info",container:!0}):e.jsx(be,{badgeContent:"Desentralisasi",color:"dark",container:!0}):e.jsxs("div",{className:"space-x-4 flex flex-row items-center",children:[e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{...g,type:"radio",className:"form-radio  w-4 h-4 text-blue-500",value:"Y",checked:g.value=="Y",disabled:L}),e.jsx("span",{className:"text-gray-700",children:"Sentralisasi"})]}),e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{...g,type:"radio",className:"form-radio  w-4 h-4 text-blue-500",value:"N",disabled:L,checked:g.value=="N"}),e.jsx("span",{className:"text-gray-700",children:"Desentralisasi"})]})]}),e.jsx(ue,{text:v.error,error:v.error&&v.touched})]})})})}),e.jsx(w,{mt:1,children:e.jsx(Na,{children:e.jsx(ce,{name:"status",children:({field:g,form:c,meta:v})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Status",required:!0,error:v.error&&v.touched}),e.jsxs("div",{className:"space-x-4 flex flex-row items-center",children:[e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{...g,type:"radio",className:"form-radio  w-4 h-4 text-blue-500",value:"AKTIF",checked:g.value=="AKTIF",disabled:L||V=="Tambah"}),e.jsx("span",{className:"text-gray-700",children:"Aktif"})]}),e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{...g,type:"radio",className:"form-radio  w-4 h-4 text-blue-500",value:"NON-AKTIF",disabled:L||V=="Tambah",checked:g.value=="NON-AKTIF"}),e.jsx("span",{className:"text-gray-700",children:"Non Aktif"})]})]}),e.jsx(ue,{text:v.error,error:v.error&&v.touched})]})})})})]})})}),e.jsx(ya,{children:e.jsxs(e.Fragment,{children:[!L&&e.jsx(Je,{submit:G,color:"success",formId:"form",text:M}),e.jsx(_e,{color:L?"dark":"error",variant:"gradient",onClick:()=>T(!1),children:L?"Tutup":"Batal"})]})})]})})]})]})},qg=()=>{const r="Template Naskah",[s,n]=a.useState(!1);a.useEffect(()=>{n(ge(r,"is_read",!0))},[]);const t=JSON.parse(Le.getItem("users")),i=new dd,l=ha(),[m,p]=a.useState(!1),[B,K]=a.useState(null),[W,z]=a.useState(null),T=a.useRef(null),[L,$]=a.useState({total:0,from:1,to:1});let M=[];B==null?M=[]:M=B.map(y=>({id:y.id,jenis_naskah:y.jenis_naskah,ukuran:y.ukuran,nama_file:y.nama_file,status:y.status,template_naskah:y.template_naskah,name_file:y.name_file,folder:y.folder,original_file_name:y.original_file_name,created_at:y.created_at,action:e.jsxs("div",{className:"flex items-center justify-center gap-3 h-full w-full",children:[ge(r,"is_update")&&e.jsx(Va,{size:"1.5em",color:"#fbcf33",onClick:()=>C(y),className:"cursor-pointer",title:"Ubah"}),e.jsx(Oa,{size:"1.5em",color:"#17c1e8",onClick:()=>k(y),className:"cursor-pointer",title:"Lihat"}),ge(r,"is_delete")&&e.jsx($a,{size:"1.5em",color:"#e62e2d",onClick:()=>b(y),className:"cursor-pointer",title:"Hapus"})]})}));const[H,V]=a.useState({page:1,rows:10,sortField:"",sortOrder:null,search:"",public_organisasi_id:t==null?void 0:t.public_organisasi_id,filters:{jenis_naskah:{value:""},ukuran:{value:""},nama_file:{value:""},template_naskah:{value:""}}});a.useEffect(()=>{A()},[H]);const A=async()=>{p(!0),await i.getPaging(H).then(y=>{let o=y.data.result;o.data&&(z(o.last_page),K(o.data),p(!1)),p(!1),$({...L,to:o.to,from:o.from,total:o.total})}).catch(y=>{p(!1),$({...L,to:0,from:!1,total:0})})},G=Da((y,o,F=null)=>{if(F){let S=F.target;for(;S&&S.tagName!=="TD";)S=S.parentNode;if(S&&S.tagName==="TD"){const f=S.querySelector(".clear-input"),R=S.querySelector("input");o?f.classList.remove("hidden"):(f.classList.add("hidden"),R.value="")}}let x={...H};x.filters[y].value=o,x.page=1,V(x)},600),X=y=>{let o={...H};o.page=y,V(o),window.scrollTo({top:0,behavior:"smooth"})},O=y=>{let o={...H};o.rows=y,o.page=1,V(o)},I=y=>{let o={...H};o.sortField=y,H.sortField!=y?H.sortOrder==""&&(o.sortOrder=1):H.sortOrder==1?o.sortOrder=-1:(o.sortOrder="",o.sortField=""),o.page=1,V(o)},_=()=>{l("form",{state:{formode:"Tambah",id:0,organisasi_id:t==null?void 0:t.organisasi_id,jenis_naskah_id:"",file:null}})},C=y=>{l("form",{state:{formode:"Ubah",id:y.id,organisasi_id:t==null?void 0:t.organisasi_id,jenis_naskah_id:y.jenis_naskah_id,template_naskah:y.template_naskah}})},k=y=>{l("form",{state:{formode:"Lihat",id:y.id,organisasi_id:t==null?void 0:t.organisasi_id,jenis_naskah_id:y.jenis_naskah_id,template_naskah:y.template_naskah}})},b=y=>{U.fire({title:"Konfirmasi",text:`Data ${y.jenis_naskah} akan dihapus ?`,icon:"warning",showCancelButton:!0,confirmButtonText:"Hapus",cancelButtonText:"Batal",customClass:{confirmButton:"button button-error",cancelButton:"button button-info"}}).then(o=>{o.isConfirmed&&(ka(),i.delete(y.id).then(F=>{F.status==200&&A(),U.fire("Berhasil","Data Berhasil Dihapus","success")}).catch(F=>{var S,f;const x=Oe(F.response.data.result);U.fire("Gagal",x??((f=(S=F.response)==null?void 0:S.data)==null?void 0:f.message),"error")}))})};return e.jsxs(aa,{children:[e.jsx(la,{}),s&&e.jsx(ie,{pt:6,pb:3,children:e.jsxs(Me,{children:[e.jsx(ie,{px:3,pt:3,lineHeight:1,children:e.jsxs(w,{container:!0,direction:"row",justifyContent:"space-between",alignItems:"center",children:[e.jsx(w,{item:!0,children:e.jsxs(le,{variant:"h5",fontWeight:"medium",children:["Daftar ",r]})}),ge(r,"is_create")&&e.jsx(w,{item:!0,children:e.jsxs(_e,{variant:"gradient",color:"info",onClick:_,children:[e.jsx(Ea,{size:"1.5em"}),"Tambah Baru"]})})]})}),e.jsx("div",{className:"overflow-auto",children:e.jsxs("div",{className:"table p-10 min-w-full",children:[e.jsx("div",{className:"flex items-center justify-end mb-1",children:e.jsx(pa,{config:H,handleClick:O})}),e.jsx("div",{className:"text-slate-600 hidden"}),e.jsx("div",{className:"text-blue-600 hidden"}),e.jsxs("table",{className:"w-full text-sm text-left !text-gray-700 dark:text-gray-400 table-bordered",children:[e.jsx("thead",{className:"text-xs text-gray-500 uppercase border-b-2 mb-1",children:e.jsxs("tr",{children:[e.jsx(q,{text:"Jenis Naskah",sortField:"jenis_naskah",sortOrder:H.sortOrder,config:H,handleClick:()=>I("jenis_naskah")}),e.jsx(q,{text:"Ukuran",sortField:"ukuran",sortOrder:H.sortOrder,config:H,handleClick:()=>I("ukuran")}),e.jsx(q,{text:"Nama File",sortField:"name_file",sortOrder:H.sortOrder,config:H,handleClick:()=>I("name_file")}),e.jsx(q,{text:"File",className:"justify-center"}),e.jsx(q,{text:"Aksi",className:"justify-center min-w-[2rem]"})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{className:"border-b border-slate-300",children:[e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"jenis_naskah",onSearch:G,placeholder:"Jenis Naskah",type:"input"})}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"ukuran",onSearch:G,placeholder:"Ukuran",type:"input"})}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"nama_file",onSearch:G,placeholder:"Nama File",type:"input"})}),e.jsx("td",{}),e.jsx("td",{})]}),m?e.jsx("tr",{children:e.jsx("td",{colSpan:5,children:e.jsx(ia,{})})}):e.jsx(e.Fragment,{}),M.length?M.map((y,o)=>e.jsxs("tr",{className:"border-b border-slate-300",children:[e.jsx("td",{className:" max-w-[9rem] px-6 py-6",children:e.jsx("div",{className:"flex-wrap",children:y.jenis_naskah})}),e.jsx("td",{className:" max-w-[9rem] px-6 py-6",children:e.jsx("div",{className:"flex-wrap",children:y.ukuran})}),e.jsx("td",{className:" max-w-[9rem] px-6 py-6",children:e.jsx("div",{className:"flex-wrap",children:y.original_file_name??y.name_file??y.template_naskah})}),e.jsx("td",{className:" max-w-[9rem] px-6 py-6",children:e.jsx("div",{className:"flex items-center justify-center",children:e.jsx(Nu,{className:`${y.template_naskah?"text-blue-600":"text-slate-600"} h-6 w-6 cursor-pointer`,onClick:()=>{y.template_naskah&&Wa(y.template_naskah,y.folder??"template_naskah_dinas").finally(()=>U.close())}})})}),e.jsxs("td",{className:"px-1 text-right w-[2rem]",children:[" ",y.action," "]})]},o)):e.jsx(e.Fragment,{})]})]}),e.jsxs("nav",{className:"flex items-center justify-between p-4","aria-label":"Table navigation",children:[e.jsx("span",{className:"text-sm text-gray-400",children:L.from&&`Menampilkan ${Se(L.from)} sampai ${Se(L.to)} dari ${Se(L.total)} entri`}),e.jsx(xa,{currentPage:H.page,lastPage:W,displayCount:5,handleClick:X})]})]})})]})}),e.jsx(ua,{}),e.jsx("a",{href:"",className:"hidden",target:"_blank",ref:T})]})},lr="https://api.arsip.go.id/master/api/",md=Ft.create({headers:{"Content-Type":"multipart/form-data",Accept:"application/json"}});md.interceptors.request.use(async r=>{const s=await JSON.parse(Le.getItem("access_token"));return s!==null&&(r.headers.Authorization=`Bearer ${s}`),r});class xd{constructor(){ae(this,"getPaging",async s=>{const n=Ce.serializeObjectToQueryString(s);return await se.get(`${lr}klasifikasi?${n}`).then(l=>l)});ae(this,"post",async s=>await md.post(`${lr}klasifikasi`,s).then(i=>i));ae(this,"put",async(s,n)=>await se.put(`${lr}klasifikasi/${s}`,n).then(l=>l));ae(this,"detail",async s=>await se.get(`${lr}klasifikasi/${s}`).then(i=>i));ae(this,"delete",async s=>await se.delete(`${lr}klasifikasi/${s}`).then(i=>i));ae(this,"tree",async s=>{const n=Ce.serializeObjectToQueryString(s);return await se.get(`${lr}klasifikasi/tree?${n}`).then(l=>l)})}}const Hg=()=>{const r="Klasifikasi",s=ga(),n=new URLSearchParams(s.search).get("status"),[t,i]=a.useState(!1);a.useEffect(()=>{i(ge(r,"is_read",!0))},[]);const l=JSON.parse(Le.getItem("users")),m=new xd,p=ha(),[B,K]=a.useState(!1),[W,z]=a.useState(null),[T,L]=a.useState(!1),[$,M]=a.useState(null),[H,V]=a.useState({total:0,from:1,to:1});let A=[];W==null?A=[]:A=W.map(h=>({organisasi_id:h.organisasi_id,parent_id:h.parent_id,kodefikasi_sektor:h.kodefikasi_sektor,penyusutan_akhir_id:h.penyusutan_akhir_id,klasifikasi_keamanan_id:h.klasifikasi_keamanan_id,kode:h.kode,nama:h.nama,deskripsi:h.deskripsi,retensi_aktif:h.retensi_aktif,keterangan_aktif:h.keterangan_aktif,retensi_inaktif:h.retensi_inaktif,keterangan_inaktif:h.keterangan_inaktif,grup_jabatan_id:h.grup_jabatan_id,pertimbangan:h.pertimbangan,status:h.status,action:e.jsxs("div",{className:"flex items-center justify-center gap-3 h-full w-full",children:[ge(r,"is_update")&&e.jsx(Va,{size:"1.5em",color:"#fbcf33",onClick:()=>y(h),className:"cursor-pointer",title:"Ubah"}),e.jsx(Oa,{size:"1.5em",color:"#17c1e8",onClick:()=>o(h),className:"cursor-pointer",title:"Lihat"}),ge(r,"is_delete")&&e.jsx($a,{size:"1.5em",color:"#e62e2d",onClick:()=>F(h),className:"cursor-pointer",title:"Hapus"})]})}));const[G,X]=a.useState({page:1,rows:10,sortField:"",sortOrder:null,search:"",filters:{nama:{value:""},kode:{value:""},status:{value:n||""},grouprole:{value:l==null?void 0:l.group_role},organisasi_id:{value:l==null?void 0:l.organisasi_id},public_organisasi_id:{value:l==null?void 0:l.public_organisasi_id}}});a.useEffect(()=>{O()},[G]);const O=async()=>{K(!0),await m.getPaging(G).then(h=>{let d=h.data.result;d.data&&(M(d.last_page),z(d.data),K(!1)),K(!1),V({...H,to:d.to,from:d.from,total:d.total})}).catch(h=>{K(!1),V({...H,to:0,from:!1,total:0})})},I=Da((h,d,j=null)=>{if(j){let c=j.target;for(;c&&c.tagName!=="TD";)c=c.parentNode;if(c&&c.tagName==="TD"){const v=c.querySelector(".clear-input"),N=c.querySelector("input");d?v.classList.remove("hidden"):(v.classList.add("hidden"),N.value="")}}let g={...G};g.filters[h].value=d,g.page=1,X(g)},600),_=h=>{let d={...G};d.page=h,X(d),window.scrollTo({top:0,behavior:"smooth"})},C=h=>{let d={...G};d.rows=h,d.page=1,X(d)},k=h=>{let d={...G};d.sortField=h,G.sortField!=h?G.sortOrder==""&&(d.sortOrder=1):G.sortOrder==1?d.sortOrder=-1:(d.sortOrder="",d.sortField=""),X(d)},b=()=>{p("form",{state:{formode:"Tambah",id:0,organisasi_id:l==null?void 0:l.organisasi_id,parent_id:"",kodefikasi_sektor:"",penyusutan_akhir_id:"",klasifikasi_keamanan_id:"",kode:"",nama:"",deskripsi:"",retensi_aktif:"",keterangan_aktif:"",retensi_inaktif:"",keterangan_inaktif:"",grup_jabatan_id:"",pertimbangan:"",status:"AKTIF"}})},y=h=>{p("form",{state:{formode:"Ubah",id:h.id,organisasi_id:h.organisasi_id,parent_id:h.parent_id,kodefikasi_sektor:h.kodefikasi_sektor,penyusutan_akhir_id:h.penyusutan_akhir_id,klasifikasi_keamanan_id:h.klasifikasi_keamanan_id,kode:h.kode,nama:h.nama,deskripsi:h.deskripsi,retensi_aktif:h.retensi_aktif,keterangan_aktif:h.keterangan_aktif,retensi_inaktif:h.retensi_inaktif,keterangan_inaktif:h.keterangan_inaktif,grup_jabatan_id:h.grup_jabatan_id,pertimbangan:h.pertimbangan,status:h.status}})},o=h=>{p("form",{state:{formode:"Lihat",id:h.id,organisasi_id:h.organisasi_id,parent_id:h.parent_id,kodefikasi_sektor:h.kodefikasi_sektor,penyusutan_akhir_id:h.penyusutan_akhir_id,klasifikasi_keamanan_id:h.klasifikasi_keamanan_id,kode:h.kode,nama:h.nama,deskripsi:h.deskripsi,retensi_aktif:h.retensi_aktif,keterangan_aktif:h.keterangan_aktif,retensi_inaktif:h.retensi_inaktif,keterangan_inaktif:h.keterangan_inaktif,grup_jabatan_id:h.grup_jabatan_id,pertimbangan:h.pertimbangan,status:h.status}})},F=h=>{U.fire({title:"Konfirmasi",text:`Data ${h.nama} akan dihapus ?`,icon:"warning",showCancelButton:!0,confirmButtonText:"Hapus",cancelButtonText:"Batal",customClass:{confirmButton:"button button-error",cancelButton:"button button-info"}}).then(d=>{d.isConfirmed&&(ka(),m.delete(h.id).then(j=>{j.status==200&&O(),U.fire("Berhasil","Data Berhasil Dihapus","success")}).catch(j=>{var c,v;const g=Oe(j.response.data.result);U.fire("Gagal",g??((v=(c=j.response)==null?void 0:c.data)==null?void 0:v.message),"error")}))})},[x,S]=a.useState({organisasi_id:l==null?void 0:l.organisasi_id,parent_id:"-"}),[f,R]=a.useState(null);a.useEffect(()=>{u()},[x]);const u=async()=>{L(!0),await m.tree(x).then(h=>{let d=h.data.result;R(d)}).catch(h=>{}).finally(()=>L(!1))},D=async h=>{let d={organisasi_id:l==null?void 0:l.organisasi_id,public_organisasi_id:l==null?void 0:l.public_organisasi_id,parent_id:h.id};await m.tree(d).then(j=>{const g=[...f],c=P(g,h.id);c&&(c.children=j.data.result),R(g)})},E=(h,d=!0)=>{const j=[...f],g=P(j,h.id);g&&(g.isLoading=d),R(j)},J=h=>{const d=[...f],j=P(d,h.id);j&&(j.children=null),R(d)},P=(h,d)=>{for(const j of h){if(j.id===d)return j;if(j.children){const g=P(j.children,d);if(g)return g}}return null};return e.jsxs(aa,{children:[e.jsx(la,{}),t&&e.jsxs(e.Fragment,{children:[e.jsx(ie,{pt:6,pb:3,children:e.jsxs(Me,{children:[e.jsx(ie,{px:3,pt:3,lineHeight:1,children:e.jsxs(w,{container:!0,direction:"row",justifyContent:"space-between",alignItems:"center",children:[e.jsx(w,{item:!0,children:e.jsxs(le,{variant:"h5",fontWeight:"medium",children:["Daftar ",r]})}),ge(r,"is_create")&&e.jsx(w,{item:!0,children:e.jsxs(_e,{variant:"gradient",color:"info",onClick:b,children:[e.jsx(Ea,{size:"1.5em"}),"Tambah Baru"]})})]})}),e.jsx("div",{className:"overflow-auto",children:e.jsxs("div",{className:"table p-10 min-w-full",children:[e.jsx("div",{className:"flex items-center justify-end mb-1",children:e.jsx(pa,{config:G,handleClick:C})}),e.jsxs("table",{className:"w-full text-sm text-left !text-gray-700 dark:text-gray-400 table-bordered",children:[e.jsx("thead",{className:"text-xs text-gray-500 uppercase border-b-2 mb-1",children:e.jsxs("tr",{children:[e.jsx(q,{text:"Kode",sortField:"kode",sortOrder:G.sortOrder,config:G,handleClick:()=>k("kode")}),e.jsx(q,{text:"Nama Klasifikasi",sortField:"nama",sortOrder:G.sortOrder,config:G,handleClick:()=>k("nama")}),e.jsx(q,{text:"Status",sortField:"status",sortOrder:G.sortOrder,config:G,handleClick:()=>k("status")}),e.jsx(q,{text:"Aksi",className:"justify-center min-w-[2rem]"})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{className:"border-b border-slate-300",children:[e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"kode",onSearch:I,placeholder:"Kode",type:"input"})}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"nama",onSearch:I,placeholder:"Nama",type:"input"})}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"status",onSearch:I,placeholder:"Status",type:"status",defaultValue:Us.find(h=>h.value==n)})}),e.jsx("td",{})]}),B?e.jsx("tr",{children:e.jsx("td",{colSpan:4,children:e.jsx(ia,{})})}):e.jsx(e.Fragment,{}),A.length?A.map((h,d)=>e.jsxs("tr",{className:"border-b border-slate-300",children:[e.jsx("td",{className:" max-w-[9rem] px-6 py-6",children:e.jsx("div",{className:"flex-wrap",children:h.kode})}),e.jsx("td",{className:" max-w-[9rem] px-6 py-6",children:e.jsx("div",{className:"flex-wrap",children:h.nama})}),e.jsx("td",{className:"max-w-[9rem] px-6 py-6",children:h.status==="AKTIF"?e.jsx(be,{badgeContent:"Aktif",color:"success",container:!0}):e.jsx(be,{badgeContent:"Non-Aktif",color:"error",container:!0})}),e.jsxs("td",{className:"px-1 text-right w-[2rem]",children:[" ",h.action," "]})]},d)):e.jsx(e.Fragment,{})]})]}),e.jsxs("nav",{className:"flex items-center justify-between p-4","aria-label":"Table navigation",children:[e.jsx("span",{className:"text-sm text-gray-400",children:H.from&&`Menampilkan ${Se(H.from)} sampai ${Se(H.to)} dari ${Se(H.total)} entri`}),e.jsx(xa,{currentPage:G.page,lastPage:$,displayCount:5,handleClick:_})]})]})})]})}),e.jsx(ie,{pt:6,pb:3,children:e.jsxs(Me,{children:[e.jsx(ie,{px:3,pt:3,children:e.jsx(w,{container:!0,direction:"row",justifyContent:"space-between",alignItems:"center",children:e.jsx(w,{item:!0,children:e.jsxs(le,{variant:"h5",fontWeight:"medium",children:["Bagan ",r]})})})}),e.jsxs("div",{className:"p-8 border",children:[T&&e.jsx("div",{className:"flex w-full justify-center",children:e.jsx(rs,{})}),f&&f.length&&e.jsx(Yn,{data:f,loadChildrenTree:D,removeChildren:J,treeLoading:E})]})]})})]}),e.jsx(ua,{})]})},Gg=/^[a-zA-Z0-9.]*$/,Wg=fa().shape({parent_id:wa().required("Induk Klasifikasi harus dipilih"),kode:ze().matches(Gg,{message:"Hanya dapat berupa huruf, angka dan titik"}).required("Kode harus diisi"),nama:ze().required("Nama harus diisi"),retensi_aktif:wa().required("Retensi Aktif harus diisi"),retensi_inaktif:wa().required("Retensi Inaktif harus diisi"),status:ze(),penyusutan_akhir_id:wa().required("Penyusutan Akhir harus dipilih"),grup_jabatan_id:wa().required("Hak Akses Klasifikasi harus dipilih"),klasifikasi_keamanan_id:wa().required("Klasifikasi Keamanan harus dipilih")}),Jg=()=>{const r="Klasifikasi",[s,n]=a.useState(!1),t=JSON.parse(Le.getItem("users")),i=new xd,l=new qa,m=ga(),p=ha(),[B,K]=a.useState(!1),[W,z]=a.useState(!0),[T,L]=a.useState(null),[$,M]=a.useState(null),[H,V]=a.useState(null),[A,G]=a.useState(null),[X,O]=a.useState(null),[I,_]=a.useState({formode:m.state.formode,id:m.state.id,organisasi_id:m.state.organisasi_id,parent_id:m.state.parent_id,kodefikasi_sektor:m.state.kodefikasi_sektor,penyusutan_akhir_id:m.state.penyusutan_akhir_id,penyusutan_akhir_nama:"",klasifikasi_keamanan_id:m.state.klasifikasi_keamanan_id,klasifikasi_keamanan_nama:"",kode:m.state.kode,nama:m.state.nama,deskripsi:m.state.deskripsi,retensi_aktif:m.state.retensi_aktif,keterangan_aktif:m.state.keterangan_aktif,retensi_inaktif:m.state.retensi_inaktif,keterangan_inaktif:m.state.keterangan_inaktif,grup_jabatan_id:m.state.grup_jabatan_id,pertimbangan:m.state.pertimbangan,status:m.state.status}),C="";a.useEffect(()=>{I.formode=="Lihat"?(n(!0),K(!0)):(I.formode=="Tambah"&&n(ge(r,"is_create",!0)),I.formode=="Ubah"&&n(ge(r,"is_update",!0)),K(!1)),I.formode=="Tambah"?(t==null?void 0:t.group_role)!=2:(y(I.parent_id),o(I.penyusutan_akhir_id),F(I.grup_jabatan_id),x(I.klasifikasi_keamanan_id))},[I.formode,I.id]);const k=S=>{z(!1),S.id!==0?i.put(S.id,S).then(f=>{var R,u,D;U.fire((R=f.data)!=null&&R.success?"Berhasil":"Gagal",(u=f.data)==null?void 0:u.message,(D=f.data)!=null&&D.success?"success":"warning"),f.data.success&&b()}).catch(f=>{var u,D;const R=Oe(f.response.data.result);U.fire("Gagal",R??((D=(u=f.response)==null?void 0:u.data)==null?void 0:D.message),"error")}).finally(()=>z(!0)):i.post(S).then(f=>{var R,u,D;U.fire((R=f.data)!=null&&R.success?"Berhasil":"Gagal",(u=f.data)==null?void 0:u.message,(D=f.data)!=null&&D.success?"success":"warning"),f.data.success&&b()}).catch(f=>{var u,D;const R=Oe(f.response.data.result);U.fire("Gagal",R??((D=(u=f.response)==null?void 0:u.data)==null?void 0:D.message),"error")}).finally(()=>z(!0))},b=()=>{p(C+"/klasifikasi-arsip/klasifikasi")},y=async S=>{S===0?L({id:0,kode_nama:"SK - Semua Klasifikasi"}):(S!=null||S!=null)&&await l.detail("klasifikasi",S,"master").then(f=>{L(f)})},o=async S=>{S&&await l.detail("penyusutan-akhir",S,"master").then(f=>{V(f),_(R=>({...R,penyusutan_akhir_nama:f.nama}))})},F=async S=>{S&&await l.detail("pengguna/grupjabatan",S,"").then(f=>{O(f)})},x=async S=>{S&&await l.detail("klasifikasi-keamanan",S,"master").then(f=>{G(f),_(R=>({...R,klasifikasi_keamanan_nama:f.nama}))})};return e.jsxs(aa,{children:[e.jsx(la,{}),s&&e.jsx(e.Fragment,{children:e.jsx(ie,{pt:6,pb:3,children:e.jsxs(Me,{children:[e.jsx(ie,{px:3,pt:3,lineHeight:1,children:e.jsxs(w,{container:!0,direction:"row",justifyContent:"space-between",alignItems:"center",children:[e.jsx(w,{item:!0,children:e.jsxs(le,{variant:"h5",fontWeight:"medium",children:[I.formode," ",r]})}),e.jsx(w,{item:!0,children:e.jsxs(_e,{variant:"gradient",color:"secondary",onClick:b,children:[e.jsx(za,{size:"1.5em",className:"me-2"}),I.formode!="Lihat"?"Batal":"Kembali"]})})]})}),e.jsx(ca,{initialValues:I,onSubmit:k,validateOnChange:!0,validationSchema:Wg,enableReinitialize:!0,children:e.jsxs(da,{id:"form",encType:"multipart/form-data",children:[e.jsx(w,{mt:2,children:e.jsxs("div",{className:"p-6 grid grid-cols-12 mb-10 gap-5 lg:mb-0",children:[e.jsx("div",{className:"col-span-12 ",children:e.jsx(w,{mt:3,children:e.jsx(ce,{name:"parent_id",children:({field:S,form:f,meta:R})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Induk Klasifikasi",required:!0,error:R.error&&R.touched}),e.jsx(ra,{url:"klasifikasi",targetService:"master",isDisabled:B,callbackChange:u=>{f.setFieldValue("parent_id",(u==null?void 0:u.id)??"")},selectedData:T,keyValue:["id","kode_nama"],placeholder:"Pilih Induk Klasifikasi...",className:"text-sm",menuPortalTarget:null,optionParam:{"filters[grouprole][value]":t==null?void 0:t.group_role,"filters[organisasi_id][value]":t==null?void 0:t.organisasi_id,"filters[public_organisasi_id][value]":t==null?void 0:t.public_organisasi_id,dropdown:!0}}),e.jsx(ue,{text:R.error,error:R.error&&R.touched})]})})})}),e.jsx("div",{className:"col-span-12 md:col-span-6",children:e.jsx(w,{mt:3,children:e.jsx(ce,{name:"kode",children:({field:S,form:f,meta:R})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Kode Klasifikasi",required:!0,error:R.error&&R.touched}),e.jsx(Ye,{...S,type:"text",placeholder:"Kode Klasifikasi",error:R.error&&R.touched,disabled:B}),e.jsx(ue,{text:R.error,error:R.error&&R.touched})]})})})}),e.jsx("div",{className:"col-span-12 md:col-span-6 ",children:e.jsx(w,{mt:3,children:e.jsx(ce,{name:"nama",children:({field:S,form:f,meta:R})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Nama Klasifikasi",required:!0,error:R.error&&R.touched}),e.jsx(Ye,{...S,type:"text",placeholder:"Nama Klasifikasi",error:R.error&&R.touched,disabled:B}),e.jsx(ue,{text:R.error,error:R.error&&R.touched})]})})})}),e.jsx("div",{className:"col-span-12",children:e.jsx(w,{mt:3,children:e.jsx(ce,{name:"deskripsi",children:({field:S,form:f,meta:R})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Deskripsi Klasifikasi",error:R.error&&R.touched}),e.jsx(Ka,{...S,placeHolder:"Masukan Deskripsi Klasifikasi..",error:R.error&&R.touched,disabled:B}),e.jsx(ue,{text:R.error,error:R.error&&R.touched})]})})})}),e.jsx("div",{className:"col-span-12 md:col-span-6",children:e.jsx(w,{mt:3,children:e.jsx(ce,{name:"retensi_aktif",children:({field:S,form:f,meta:R})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Retensi Aktif",required:!0,error:R.error&&R.touched}),e.jsx("input",{...S,className:"inputCustom w-full",min:"0",type:"number",placeholder:"Retensi Aktif",error:R.error&&R.touched,disabled:B}),e.jsx(ue,{text:R.error,error:R.error&&R.touched})]})})})}),e.jsx("div",{className:"col-span-12 md:col-span-6",children:e.jsx(w,{mt:3,children:e.jsx(ce,{name:"retensi_inaktif",children:({field:S,form:f,meta:R})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Retensi Inaktif",required:!0,error:R.error&&R.touched}),e.jsx("input",{...S,className:"inputCustom w-full",min:"0",type:"number",placeholder:"Retensi Inaktif",error:R.error&&R.touched,disabled:B}),e.jsx(ue,{text:R.error,error:R.error&&R.touched})]})})})}),e.jsx("div",{className:"col-span-12 md:col-span-6",children:e.jsx(w,{mt:3,children:e.jsx(ce,{name:"keterangan_aktif",children:({field:S,form:f,meta:R})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Keterangan Retensi Aktif",error:R.error&&R.touched}),e.jsx(Ka,{...S,placeHolder:"Masukan Keterangan Retensi Aktif..",error:R.error&&R.touched,disabled:B}),e.jsx(ue,{text:R.error,error:R.error&&R.touched})]})})})}),e.jsx("div",{className:"col-span-12 md:col-span-6 ",children:e.jsx(w,{mt:3,children:e.jsx(ce,{name:"keterangan_inaktif",children:({field:S,form:f,meta:R})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Keterangan Retensi Inaktif",error:R.error&&R.touched}),e.jsx(Ka,{...S,placeHolder:"Masukan Keterangan Retensi Inaktif..",error:R.error&&R.touched,disabled:B}),e.jsx(ue,{text:R.error,error:R.error&&R.touched})]})})})}),e.jsx("div",{className:"col-span-12 md:col-span-6",children:e.jsx(w,{mt:3,children:e.jsx(ce,{name:"penyusutan_akhir_id",children:({field:S,form:f,meta:R})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Penyusutan Akhir",required:!0,error:R.error&&R.touched}),e.jsx(ra,{url:"penyusutan-akhir/select",targetService:"master",isDisabled:B,callbackChange:u=>{f.setFieldValue("penyusutan_akhir_id",(u==null?void 0:u.id)??""),f.setFieldValue("penyusutan_akhir_nama",(u==null?void 0:u.nama)??"")},selectedData:H,keyValue:["id","nama"],placeholder:"Pilih Penyusutan Akhir...",className:"text-sm",menuPortalTarget:null,optionParam:{"select-target":"select-penyusutan"}}),e.jsx(ue,{text:R.error,error:R.error&&R.touched})]})})})}),e.jsx("div",{className:"col-span-12 md:col-span-6 ",children:e.jsx(w,{mt:3,children:e.jsx(ce,{name:"grup_jabatan_id",children:({field:S,form:f,meta:R})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Hak Akses Klasifikasi",required:!0,error:R.error&&R.touched}),e.jsx(ra,{url:"pengguna/grupjabatan/select",isDisabled:B,callbackChange:u=>{f.setFieldValue("grup_jabatan_id",(u==null?void 0:u.id)??"")},selectedData:X,keyValue:["id","nama"],placeholder:"Pilih Hak Akses Klasifikasi...",className:"text-sm",menuPortalTarget:null,optionParam:{"select-target":"select-grup-jabatan"}}),e.jsx(ue,{text:R.error,error:R.error&&R.touched})]})})})}),e.jsx("div",{className:"col-span-12 md:col-span-6",children:e.jsx(w,{mt:3,children:e.jsx(ce,{name:"klasifikasi_keamanan_id",children:({field:S,form:f,meta:R})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Klasifikasi Keamanan",required:!0,error:R.error&&R.touched}),e.jsx(ra,{url:"klasifikasi-keamanan/select",targetService:"master",isDisabled:B,callbackChange:u=>{f.setFieldValue("klasifikasi_keamanan_id",(u==null?void 0:u.id)??""),f.setFieldValue("klasifikasi_keamanan_nama",(u==null?void 0:u.nama)??"")},selectedData:A,keyValue:["id","nama"],placeholder:"Pilih Klasifikasi Keamanan...",className:"text-sm",menuPortalTarget:null,optionParam:{"select-target":"select-klasifikasi-keamanan"}}),e.jsx(ue,{text:R.error,error:R.error&&R.touched})]})})})}),e.jsx("div",{className:"col-span-12 md:col-span-6 ",children:e.jsx(w,{mt:1,children:e.jsx(Na,{children:e.jsx(ce,{name:"status",children:({field:S,form:f,meta:R})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Status",required:!0,error:R.error&&R.touched}),e.jsxs("div",{className:"space-x-4 flex flex-row items-center",children:[e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{...S,type:"radio",className:"form-radio  w-4 h-4 text-blue-500 focus:ring-2 focus:ring-blue-500",value:"AKTIF",checked:S.value=="AKTIF",disabled:B||I.formode=="Tambah"}),e.jsx("span",{className:"text-gray-700",children:"Aktif"})]}),e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{...S,type:"radio",className:"form-radio  w-4 h-4 text-blue-500 focus:ring-2 focus:ring-blue-500",value:"NON-AKTIF",disabled:B||I.formode=="Tambah",checked:S.value=="NON-AKTIF"}),e.jsx("span",{className:"text-gray-700",children:"Non Aktif"})]})]}),e.jsx(ue,{text:R.error,error:R.error&&R.touched})]})})})})}),e.jsx("div",{className:"col-span-12",children:e.jsx(w,{mt:3,children:e.jsx(ce,{name:"pertimbangan",children:({field:S,form:f,meta:R})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Dasar Pertimbangan Klasifikasi",error:R.error&&R.touched}),e.jsx(Ka,{...S,placeHolder:"Masukan Dasar Pertimbangan Klasifikasi..",error:R.error&&R.touched,disabled:B}),e.jsx(ue,{text:R.error,error:R.error&&R.touched})]})})})})]})}),e.jsx("div",{className:"p-3 flex justify-end items-center w-full gap-5 mb-10",children:!B&&e.jsx(Je,{submit:W,color:"success",formId:"form",text:I.formode=="Tambah"?"Simpan":"Ubah"})})]})})]})})})]})},$t="https://api.arsip.go.id/master/api/",pd=Ft.create({headers:{"Content-Type":"multipart/form-data",Accept:"application/json"}});pd.interceptors.request.use(async r=>{const s=await JSON.parse(Le.getItem("access_token"));return s!==null&&(r.headers.Authorization=`Bearer ${s}`),r});class gd{constructor(){ae(this,"getPaging",async s=>{const n=Ce.serializeObjectToQueryString(s);return await se.get(`${$t}tatanaskah/penomoran-otomatis?${n}`).then(l=>l)});ae(this,"post",async s=>await pd.post(`${$t}tatanaskah/penomoran-otomatis`,s).then(i=>i));ae(this,"put",async(s,n)=>await se.put(`${$t}tatanaskah/penomoran-otomatis/${s}`,n).then(l=>l));ae(this,"detail",async s=>await se.get(`${$t}tatanaskah/penomoran-otomatis/${s}`).then(i=>i));ae(this,"delete",async s=>await se.delete(`${$t}tatanaskah/penomoran-otomatis/${s}`).then(i=>i));ae(this,"getNomor",async s=>{const n=Ce.serializeObjectToQueryString(s);return await se.get(`${$t}tatanaskah/penomoran-otomatis/get-only-nomor-final?${n}`).then(l=>l)});ae(this,"downloadExcel",async()=>await se.get(`${$t}tatanaskah/penomoran-otomatis/excel`,{responseType:"blob",headers:{"Content-Type":"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}}).then(t=>t))}}const Yg=()=>{const r="Penomoran Otomatis",[s,n]=a.useState(!1);a.useEffect(()=>{n(ge(r,"is_read",!0))},[]);const t=JSON.parse(Le.getItem("users")),i=new gd,l=ha(),[m,p]=a.useState(!1),[B,K]=a.useState(null),[W,z]=a.useState(!1),[T,L]=a.useState(null),[$,M]=a.useState({total:0,from:1,to:1});let H=[];B==null?H=[]:H=B.map(o=>({id:o.id,organisasi_id:o.organisasi_id,jenis_naskah_id:o.jenis_naskah_id,nomor_urut:o.nomor_urut,jumlah_digit:o.jumlah_digit,reset_nomor:o.reset_nomor,tipe_nomor:o.tipe_nomor,kombinasi_variabel:o.kombinasi_variabel,variabel_1:o.variabel_1,variabel_2:o.variabel_2,variabel_3:o.variabel_3,variabel_4:o.variabel_4,variabel_5:o.variabel_5,jenis_bulan:o.jenis_bulan,desc_jenis_naskah:o.desc_jenis_naskah,action:e.jsxs("div",{className:"flex items-center justify-center gap-3 h-full w-full",children:[ge(r,"is_update")&&e.jsx(Va,{size:"1.5em",color:"#fbcf33",onClick:()=>k(o),className:"cursor-pointer",title:"Ubah"}),ge(r,"is_delete")&&e.jsx($a,{size:"1.5em",color:"#e62e2d",onClick:()=>b(o),className:"cursor-pointer",title:"Hapus"})]})}));const[V,A]=a.useState({page:1,rows:10,sortField:"",sortOrder:1,search:"",public_organisasi_id:t==null?void 0:t.public_organisasi_id,group_role:t==null?void 0:t.group_role,organisasi_id:t==null?void 0:t.organisasi_id,filters:{jenis_naskah:{value:""},kombinasi_variabel:{value:""},jenis_bulan:{value:""},tipe_nomor:{value:""}}});a.useEffect(()=>{G()},[V]);const G=async()=>{p(!0),await i.getPaging(V).then(o=>{let F=o.data.result;F.data&&(L(F.last_page),K(F.data),p(!1)),p(!1),M({...$,to:F.to,from:F.from,total:F.total})}).catch(o=>{p(!1),M({...$,to:0,from:!1,total:0})})},X=Da((o,F,x=null)=>{if(x){let f=x.target;for(;f&&f.tagName!=="TD";)f=f.parentNode;if(f&&f.tagName==="TD"){const R=f.querySelector(".clear-input"),u=f.querySelector("input");F?R.classList.remove("hidden"):(R.classList.add("hidden"),u.value="")}}let S={...V};S.filters[o].value=F,S.page=1,A(S)},600),O=o=>{let F={...V};F.page=o,A(F),window.scrollTo({top:0,behavior:"smooth"})},I=o=>{let F={...V};F.rows=o,F.page=1,A(F)},_=o=>{let F={...V};F.sortField=o,V.sortField!=o?V.sortOrder==""&&(F.sortOrder=1):V.sortOrder==1?F.sortOrder=-1:(F.sortOrder="",F.sortField=""),A(F)},C=()=>{l("form",{state:{formode:"Tambah",id:0,organisasi_id:t==null?void 0:t.organisasi_id,jenis_naskah_id:"",nomor_urut:"",jumlah_digit:0,reset_nomor:"",tipe_nomor:"",kombinasi_variabel:"",variabel_1:"",variabel_2:"",variabel_3:"",variabel_4:"",variabel_5:"",jenis_bulan:"",desc_jenis_naskah:"",jenis_naskah:""}})},k=o=>{l("form",{state:{formode:"Ubah",id:o.id,organisasi_id:o.organisasi_id,jenis_naskah_id:o.jenis_naskah_id,nomor_urut:o.nomor_urut,jumlah_digit:o.jumlah_digit,reset_nomor:o.reset_nomor,tipe_nomor:o.tipe_nomor,kombinasi_variabel:o.kombinasi_variabel,variabel_1:o.variabel_1,variabel_2:o.variabel_2,variabel_3:o.variabel_3,variabel_4:o.variabel_4,variabel_5:o.variabel_5,jenis_bulan:o.jenis_bulan,desc_jenis_naskah:o.desc_jenis_naskah,jenis_naskah:o.jenis_naskah}})},b=o=>{U.fire({title:"Konfirmasi",text:"Apakah Anda yakin ingin menghapus Penomoran Otomatis ini?",icon:"warning",showCancelButton:!0,confirmButtonText:"Hapus",cancelButtonText:"Batal",customClass:{confirmButton:"button button-error",cancelButton:"button button-info"}}).then(F=>{F.isConfirmed&&(ka(),i.delete(o.id).then(x=>{x.status==200&&G(),U.fire("Berhasil","Data Berhasil Dihapus","success")}).catch(x=>{var f,R;const S=Oe(x.response.data.result);U.fire("Gagal",S??((R=(f=x.response)==null?void 0:f.data)==null?void 0:R.message),"error")}))})},y=async()=>{z(!0),await i.downloadExcel().then(o=>{const F=`${oa().format("YYYYMMDDHHmmss")}_Daftar Penomoran Otomatis.xls`;es(o.data,F)}).catch(o=>{console.log({error:o})}).finally(()=>z(!1))};return e.jsxs(aa,{children:[e.jsx(la,{}),s&&e.jsx(ie,{pt:6,pb:3,children:e.jsxs(Me,{children:[e.jsx(ie,{px:3,pt:3,lineHeight:1,children:e.jsxs(w,{container:!0,direction:"row",justifyContent:"space-between",alignItems:"center",children:[e.jsx(w,{item:!0,children:e.jsxs(le,{variant:"h5",fontWeight:"medium",children:["Daftar ",r]})}),e.jsxs("div",{className:"flex items-center gap-2 mt-2 md:mt-0",children:[e.jsx(w,{item:!0,children:e.jsx(Je,{color:"success",text:e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx($s,{size:"1.5em",className:"pe-2"}),"Unduh Daftar"]}),submit:!W,onClick:y,className:"text-sm whitespace-nowrap"})}),ge(r,"is_create")&&e.jsx(w,{item:!0,children:e.jsxs(_e,{variant:"gradient",color:"info",onClick:C,children:[e.jsx(Ea,{size:"1.5em"}),"Tambah Baru"]})})]})]})}),e.jsx("div",{className:"overflow-auto",children:e.jsxs("div",{className:"table p-10 min-w-full",children:[e.jsx("div",{className:"flex items-center justify-end mb-1",children:e.jsx(pa,{config:V,handleClick:I})}),e.jsxs("table",{className:"w-full text-sm text-left !text-gray-700 dark:text-gray-400 table-bordered",children:[e.jsx("thead",{className:"text-xs text-gray-500 uppercase border-b-2 mb-1",children:e.jsxs("tr",{children:[e.jsx(q,{text:"Jenis Naskah",sortField:"jenis_naskah",sortOrder:V.sortOrder,config:V,handleClick:()=>_("jenis_naskah")}),e.jsx(q,{text:"Kombinasi",sortField:"kombinasi_variabel",sortOrder:V.sortOrder,config:V,handleClick:()=>_("kombinasi_variabel")}),e.jsx(q,{text:"Penulisan Bulan",sortField:"jenis_bulan",sortOrder:V.sortOrder,config:V,handleClick:()=>_("jenis_bulan")}),e.jsx(q,{text:"Jenis Penomoran",sortField:"tipe_nomor",sortOrder:V.sortOrder,config:V,handleClick:()=>_("tipe_nomor")}),e.jsx(q,{text:"Aksi",className:"justify-center"})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{className:"border-b border-slate-300",children:[e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"jenis_naskah",onSearch:X,placeholder:"Jenis Naskah",type:"input"})}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"kombinasi_variabel",onSearch:X,placeholder:"Kombinasi",type:"input"})}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"jenis_bulan",onSearch:X,placeholder:"Penulisan Bulan",type:"select",selectOption:[{value:"ROMAWI",label:"ROMAWI"},{value:"ARAB",label:"ARAB"}]})}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"tipe_nomor",onSearch:X,placeholder:"Jenis Penomoran",type:"select",selectOption:[{value:"SURAT KELUAR",label:"SURAT KELUAR"},{value:"AGENDA MASUK",label:"AGENDA MASUK"},{value:"AGENDA KELUAR",label:"AGENDA KELUAR"},{value:"KLASIFIKASI ARSIP",label:"KLASIFIKASI ARSIP"},{value:"BERKAS ARSIP",label:"BERKAS ARSIP"}]})}),e.jsx("td",{})]}),m?e.jsx("tr",{children:e.jsx("td",{colSpan:4,children:e.jsx(ia,{})})}):e.jsx(e.Fragment,{}),H.length?H.map((o,F)=>e.jsxs("tr",{className:"border-b border-slate-300",children:[e.jsx("td",{className:" max-w-[9rem] px-6 py-6",children:e.jsx("div",{className:"flex-wrap",children:o.desc_jenis_naskah})}),e.jsx("td",{className:" max-w-[9rem] px-6 py-6",children:e.jsx("div",{className:"flex-wrap",children:o.kombinasi_variabel})}),e.jsx("td",{className:" max-w-[9rem] px-6 py-6",children:e.jsx("div",{className:"flex-wrap",children:o.jenis_bulan})}),e.jsx("td",{className:" max-w-[9rem] px-6 py-6",children:e.jsx("div",{className:"flex-wrap",children:o.tipe_nomor})}),e.jsx("td",{className:"px-1 text-right",children:o.action})]},F)):e.jsx(e.Fragment,{})]})]}),e.jsxs("nav",{className:"flex items-center justify-between p-4","aria-label":"Table navigation",children:[e.jsx("span",{className:"text-sm text-gray-400",children:$.from&&`Menampilkan ${Se($.from)} sampai ${Se($.to)} dari ${Se($.total)} entri`}),e.jsx(xa,{currentPage:V.page,lastPage:T,displayCount:5,handleClick:O})]})]})})]})}),e.jsx(ua,{})]})},Qg=fa().shape({kombinasi_variabel:ze().required("Kombinasi Variabel harus diisi"),reset_nomor:ze().required("Reset Nomor harus dipilih"),jenis_bulan:ze().required("Jenis Penulisan Bulan harus dipilih"),tipe_nomor:ze().required("Jenis Penomoran harus dipilih"),jenis_naskah_id:wa().required("Jenis Naskah harus dipilih")}),Xg=()=>{const r="Penomoran Otomatis",[s,n]=a.useState(!1),t=JSON.parse(Le.getItem("users")),i=new gd,l=new qa,m=ga(),p=ha(),[B,K]=a.useState(!1),[W,z]=a.useState(!0),[T,L]=a.useState(null),[$,M]=a.useState(!1),[H,V]=a.useState(null),[A,G]=a.useState({formode:m.state.formode,id:m.state.id,organisasi_id:m.state.organisasi_id,jenis_naskah_id:m.state.jenis_naskah_id,nomor_urut:m.state.nomor_urut,jumlah_digit:m.state.jumlah_digit,reset_nomor:m.state.reset_nomor,tipe_nomor:m.state.tipe_nomor,kombinasi_variabel:m.state.kombinasi_variabel,variabel_1:m.state.variabel_1,variabel_2:m.state.variabel_2,variabel_3:m.state.variabel_3,variabel_4:m.state.variabel_4,variabel_5:m.state.variabel_5,jenis_bulan:m.state.jenis_bulan,desc_jenis_naskah:m.state.desc_jenis_naskah,jenis_naskah:m.state.jenis_naskah}),X="";a.useEffect(()=>{A.formode=="Tambah"&&(n(ge(r,"is_create",!0)),G({...A,nomor_urut:1})),A.formode=="Ubah"&&(n(ge(r,"is_update",!0)),C(A.jenis_naskah_id),I())},[A.formode]);const O=b=>{z(!1),b.id!==0?i.put(b.id,b).then(y=>{var o,F,x;U.fire((o=y.data)!=null&&o.success?"Berhasil":"Gagal",(F=y.data)==null?void 0:F.message,(x=y.data)!=null&&x.success?"success":"warning"),y.data.success&&_()}).catch(y=>{var F,x;const o=Oe(y.response.data.result);U.fire("Gagal",o??((x=(F=y.response)==null?void 0:F.data)==null?void 0:x.message),"error")}).finally(()=>z(!0)):i.post(b).then(y=>{var o,F,x;U.fire((o=y.data)!=null&&o.success?"Berhasil":"Gagal",(F=y.data)==null?void 0:F.message,(x=y.data)!=null&&x.success?"success":"warning"),y.data.success&&_()}).catch(y=>{var F,x;const o=Oe(y.response.data.result);U.fire("Gagal",o??((x=(F=y.response)==null?void 0:F.data)==null?void 0:x.message),"error")}).finally(()=>z(!0))},I=()=>{M(!0);const b={id:A.id};i.getNomor(b).then(y=>{y.data.success&&L(y.data.result)}).catch(y=>console.log(y)).finally(()=>M(!1))},_=()=>{p(X+"/tata-naskah-dinas/penomoran-otomatis")},C=async b=>{b&&await l.detail("tatanaskah/jenis-naskah",b,"master").then(y=>{V(y)})},k=[{variable:"KS",description:"Kode Sifat Naskah"},{variable:"K",description:"Klasifikasi"},{variable:"N",description:"Nomor"},{variable:"V",description:"Variabel"},{variable:"M",description:"Bulan"},{variable:"Y",description:"Tahun"},{variable:"S",description:"Singkatan Unit Kerja / Satker"},{variable:"/,-",description:"Pemisah Kode"}];return e.jsxs(aa,{children:[e.jsx(la,{}),s&&e.jsx(e.Fragment,{children:e.jsx(ie,{pt:6,pb:3,children:e.jsxs(Me,{children:[e.jsx(ie,{px:3,pt:3,lineHeight:1,children:e.jsxs(w,{container:!0,direction:"row",justifyContent:"space-between",alignItems:"center",children:[e.jsx(w,{item:!0,children:e.jsxs(le,{variant:"h5",fontWeight:"medium",children:[A.formode," ",r," ",H!=null?H.is_centralized=="Y"?"SENTRALISASI":"DESENTRALISASI":""]})}),e.jsx(w,{item:!0,children:e.jsxs(_e,{variant:"gradient",color:"secondary",onClick:_,children:[e.jsx(za,{size:"1.5em",className:"me-2"}),A.formode!="Lihat"?"Batal":"Kembali"]})})]})}),e.jsxs("div",{className:"flex flex-col-reverse md:flex-row md:justify-between",children:[e.jsx(ca,{initialValues:A,onSubmit:O,validateOnChange:!0,validationSchema:Qg,children:e.jsxs(da,{id:"form",encType:"multipart/form-data",className:"w-full md:w-8/12",children:[e.jsx(w,{mt:2,children:e.jsxs("div",{className:"p-6 grid grid-cols-12 mb-10 gap-5 lg:mb-0",children:[e.jsx("div",{className:"col-span-12 md:col-span-6 ",children:e.jsx(w,{mt:3,children:e.jsx(ce,{name:"nomor_urut",children:({field:b,form:y,meta:o})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Nomor dimulai",required:!1,error:o.error&&o.touched}),e.jsx(Ye,{...b,type:"number",error:o.error&&o.touched,disabled:B}),e.jsx(ue,{text:o.error,error:o.error&&o.touched})]})})})}),e.jsx("div",{className:"col-span-12 md:col-span-6 ",children:e.jsx(w,{mt:3,children:e.jsx(ce,{name:"kombinasi_variabel",children:({field:b,form:y,meta:o})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Kombinasi Variabel",required:!0,error:o.error&&o.touched}),e.jsx(Ye,{...b,type:"text",placeholder:"Format Variabel",error:o.error&&o.touched,disabled:B}),e.jsxs(le,{variant:"caption",children:["Format penulisan:",e.jsx("br",{}),"{KS}-{K}_{N}/{S}/{V1}/{V2}/{V3}/{V4}/{V5}/{M}/{Y}"]}),e.jsx(ue,{text:o.error,error:o.error&&o.touched})]})})})}),e.jsx("div",{className:"col-span-12 md:col-span-6",children:e.jsx(w,{mt:3,children:e.jsx(ce,{name:"reset_nomor",children:({field:b,form:y,meta:o})=>{var F;return e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Reset Nomor",required:!0,error:o.error&&o.touched}),e.jsx(In,{placeholder:((F=y.values)==null?void 0:F.reset_nomor)||"Pilih Reset Nomor...",options:[{value:"TAHUNAN",label:"TAHUNAN"},{value:"BULANAN",label:"BULANAN"}],onChange:x=>{y.setFieldValue("reset_nomor",(x==null?void 0:x.value)??"")}}),e.jsx(ue,{text:o.error,error:o.error&&o.touched})]})}})})}),e.jsx("div",{className:"col-span-12 md:col-span-6 ",children:e.jsx(w,{mt:3,children:e.jsx(ce,{name:"jenis_bulan",children:({field:b,form:y,meta:o})=>{var F;return e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Jenis Penulisan Bulan",required:!0,error:o.error&&o.touched}),e.jsx(In,{placeholder:((F=y.values)==null?void 0:F.jenis_bulan)||"Pilih Jenis Penulisan Bulan...",options:[{value:"ROMAWI",label:"ROMAWI"},{value:"ARAB",label:"ARAB"}],onChange:x=>{y.setFieldValue("jenis_bulan",(x==null?void 0:x.value)??"")}}),e.jsx(ue,{text:o.error,error:o.error&&o.touched})]})}})})}),e.jsx("div",{className:"col-span-12 md:col-span-6 ",children:e.jsx(w,{mt:3,children:e.jsx(ce,{name:"tipe_nomor",children:({field:b,form:y,meta:o})=>{var F;return e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Jenis Penomoran",required:!0,error:o.error&&o.touched}),e.jsx(In,{placeholder:((F=y.values)==null?void 0:F.tipe_nomor)||"Pilih Jenis Penomoran...",options:[{value:"SURAT KELUAR",label:"SURAT KELUAR"}],onChange:x=>{y.setFieldValue("tipe_nomor",(x==null?void 0:x.value)??"")}}),e.jsx(ue,{text:o.error,error:o.error&&o.touched})]})}})})}),e.jsx("div",{className:"col-span-12 md:col-span-6 ",children:e.jsx(w,{mt:3,children:e.jsx(ce,{name:"jenis_naskah_id",children:({field:b,form:y,meta:o})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Jenis Naskah",required:!0,error:o.error&&o.touched}),e.jsx(ra,{...b,url:"tatanaskah/jenis-naskah/select",targetService:"master",isDisabled:B,callbackChange:F=>{y.setFieldValue("jenis_naskah_id",(F==null?void 0:F.id)??""),V(F)},selectedData:H,keyValue:["id","jenis_naskah"],placeholder:"Pilih Jenis Naskah...",className:"text-sm",menuPortalTarget:null,optionParam:{"select-target":"select-jenis-naskah-by-unitkerja",role:t==null?void 0:t.role,public_organisasi_id:t==null?void 0:t.public_organisasi_id}}),e.jsx(ue,{text:o.error,error:o.error&&o.touched})]})})})}),e.jsx("div",{className:"col-span-12 md:col-span-6 ",children:e.jsx(w,{mt:3,children:e.jsx(ce,{name:"variabel_1",children:({field:b,form:y,meta:o})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Variabel 1",required:!1,error:o.error&&o.touched}),e.jsx(Ye,{...b,type:"text",placeholder:"Variabel 1",error:o.error&&o.touched,disabled:B}),e.jsx(ue,{text:o.error,error:o.error&&o.touched})]})})})}),e.jsx("div",{className:"col-span-12 md:col-span-6 ",children:e.jsx(w,{mt:3,children:e.jsx(ce,{name:"variabel_2",children:({field:b,form:y,meta:o})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Variabel 2",required:!1,error:o.error&&o.touched}),e.jsx(Ye,{...b,type:"text",placeholder:"Variabel 2",error:o.error&&o.touched,disabled:B}),e.jsx(ue,{text:o.error,error:o.error&&o.touched})]})})})}),e.jsx("div",{className:"col-span-12 md:col-span-6 ",children:e.jsx(w,{mt:3,children:e.jsx(ce,{name:"variabel_3",children:({field:b,form:y,meta:o})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Variabel 3",required:!1,error:o.error&&o.touched}),e.jsx(Ye,{...b,type:"text",placeholder:"Variabel 3",error:o.error&&o.touched,disabled:B}),e.jsx(ue,{text:o.error,error:o.error&&o.touched})]})})})}),e.jsx("div",{className:"col-span-12 md:col-span-6 ",children:e.jsx(w,{mt:3,children:e.jsx(ce,{name:"variabel_4",children:({field:b,form:y,meta:o})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Variabel 4",required:!1,error:o.error&&o.touched}),e.jsx(Ye,{...b,type:"text",placeholder:"Variabel 4",error:o.error&&o.touched,disabled:B}),e.jsx(ue,{text:o.error,error:o.error&&o.touched})]})})})}),e.jsx("div",{className:"col-span-12 md:col-span-6 ",children:e.jsx(w,{mt:3,children:e.jsx(ce,{name:"variabel_5",children:({field:b,form:y,meta:o})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Variabel 5",required:!1,error:o.error&&o.touched}),e.jsx(Ye,{...b,type:"text",placeholder:"Variabel 5",error:o.error&&o.touched,disabled:B}),e.jsx(ue,{text:o.error,error:o.error&&o.touched})]})})})})]})}),e.jsx("div",{className:"p-3 flex justify-end items-center w-full gap-5 mb-10",children:!B&&e.jsx(Je,{submit:W,color:"success",formId:"form",text:A.formode=="Tambah"?"Simpan":"Ubah"})})]})}),e.jsxs(w,{p:5,children:[e.jsxs("div",{className:"flex gap-2 mb-3",children:[e.jsx(Un,{size:"1.5em"}),e.jsx(le,{variant:"h5",fontWeight:"medium",children:"Keterangan Kombinasi Variabel"})]}),k.map(b=>e.jsxs("div",{className:"flex items-center",children:[e.jsx(Io,{size:"1.0em",className:"me-2",color:"#17ad37"}),e.jsxs(le,{variant:"body2",children:[e.jsx("strong",{children:b.variable})," : ",b.description]})]},b.variable)),A.formode=="Ubah"&&e.jsxs("div",{className:"pt-6 flex flex-col gap-2",children:[e.jsxs("div",{className:"flex justify-between gap-4 items-center border rounded p-5",children:[e.jsx(wu,{color:"#2196f3",size:"3em"}),e.jsxs("div",{className:"text-right",children:[$?e.jsx("div",{className:"flex justify-end items-center p-2",children:e.jsx(rs,{color:"secondary",className:"flex-shrink-0 w-3 h-3"})}):e.jsx("p",{className:"font-semibold text-lg",children:T==null?void 0:T.start_from}),e.jsx(le,{variant:"caption",children:"NOMOR DIMULAI DARI"})]})]}),e.jsxs("div",{className:"flex justify-between gap-4 items-center border rounded p-5",children:[e.jsx(Su,{color:"#009688",size:"3em"}),e.jsxs("div",{className:"text-right",children:[$?e.jsx("div",{className:"flex justify-end items-center p-2",children:e.jsx(rs,{color:"secondary",className:"flex-shrink-0 w-3 h-3"})}):e.jsx("p",{className:"font-semibold text-lg",children:T==null?void 0:T.num_row}),e.jsx(le,{variant:"caption",children:"NASKAH YANG SUDAH MENGGUNAKAN"})]})]}),e.jsxs("div",{className:"flex justify-between gap-4 items-center border rounded p-5",children:[e.jsx(vu,{color:"#ff5722",size:"3em"}),e.jsxs("div",{className:"text-right",children:[$?e.jsx("div",{className:"flex justify-end items-center p-2",children:e.jsx(rs,{color:"secondary",className:"flex-shrink-0 w-3 h-3"})}):e.jsx("p",{className:"font-semibold text-lg",children:T==null?void 0:T.next_num}),e.jsx(le,{variant:"caption",children:"NOMOR SELANJUTNYA"})]})]})]})]})]})]})})})]})};fa().shape({hal:ze().required("Hal harus diisi"),ringkasan:ze().required("Isi Ringkas harus diisi"),sender_user_id:wa().required("Dikirimkan melalui harus dipilih"),jenis_naskah_id:wa().required("Jenis Naskah harus dipilih"),sifat_naskah_id:wa().required("Sifat Naskah harus dipilih"),urgensi_naskah_id:wa().required("Tingkat Urgensi harus dipilih"),klasifikasi_id:wa().required("Klasifikasi harus dipilih"),nomor:ze().required("Nomor Naskah harus diisi"),file:Qa().required("File Naskah Harus Diisi"),verifikators:vs().min(1,"Verifikator harus dipilih").required("Verifikator harus dipilih"),penandatanganans:vs().min(1,"Penandatangan harus dipilih").required("Penandatangan harus dipilih")});const Zg={flex:1,display:"flex",flexDirection:"column",alignItems:"center",padding:"20px",borderWidth:2,borderRadius:2,borderColor:"#eeeeee",borderStyle:"dashed",backgroundColor:"#fafafa",color:"#bdbdbd",outline:"none",transition:"border .24s ease-in-out",minHeight:"200px",justifyContent:"center"},ef={borderColor:"#2196f3"},af={borderColor:"#00e676"},sf={borderColor:"#ff1744"},tf=({onFileSelected:r,isReset:s,desc:n="",descBox:t="",accaptedType:i=[],notifFileTypeError:l="",maxSizePerFileInMb:m=2,form:p=null,error:B=!1})=>{const K=a.useRef(),[W,z]=a.useState(""),[T,L]=a.useState(""),[$,M]=a.useState(""),[H,V]=a.useState(!1),[A,G]=a.useState(!1),X=a.useCallback(S=>{if(S.length>0){const f=S[0];if(i.includes(f.type)&&f.size<=m*1024*1024){G(!1),V(!1);const R=new FileReader;R.onload=()=>{z(R.result)},R.readAsDataURL(f),L(f.name),M(f.size),r(f,p)}else i.includes(f.type)?(G(!1),V(!0),L(""),M(""),r(null,p),U.fire("Terjadi Kesalahan",`Ukuran File Maksimal ${m} MB`,"warning")):(G(!0),V(!1),L(""),M(""),r(null,p))}else G(!0),V(!1),L(""),r(null,p)},[]),{acceptedFiles:O,getRootProps:I,getInputProps:_,isFocused:C,isDragAccept:k,isDragReject:b,isDragActive:y}=sn({accept:{"application/vnd.openxmlformats-officedocument.wordprocessingml.document":[".docx"],"application/pdf":[".pdf"]},multiple:!1,onDrop:X}),o=()=>{z(""),L(""),r(null,p)},F=a.useMemo(()=>({...Zg,...C?ef:{},...k?af:{},...b?sf:{}}),[C,k,b]),x=W?{onClick:S=>S.stopPropagation(),onDragEnter:S=>S.stopPropagation()}:{};return a.useEffect(()=>{s&&(z(""),L(""),r(null,p))},[s]),e.jsxs("section",{className:"container",children:[e.jsxs("div",{...I({style:F}),className:`${B?"!bg-red-100 !border-red-700":""}`,onClick:()=>K.current.click(),children:[e.jsx("input",{..._(),accept:i,ref:K}),b?e.jsx("p",{children:"File Tidak Support"}):H?e.jsxs("p",{children:["Ukuran File Maksimal ",m," MB"]}):A?e.jsx("p",{children:l}):W?e.jsxs("div",{className:"file-preview",...x,children:[T," - ",$," Bytes",e.jsx("button",{className:"remove-button text-end",onClick:o,children:e.jsx(zn,{})})]}):e.jsx(Ca,{variant:"body2",color:"text.secondary",children:t})]}),e.jsx(Xa,{className:"mt-3",children:e.jsx(w,{children:e.jsxs("div",{className:"py-6 flex flex-col lg:flex-row justify-between gap-5 lg:mb-0",children:[e.jsx("div",{className:`w-full ${T?"lg:w-7/12":"lg:w-9/12"} `,children:e.jsx(Ye,{placeholder:"",id:"file",value:T,readOnly:!0})}),e.jsxs("div",{className:`flex flex-row gap-2 w-full ${T?"lg:w-5/12":"lg:w-3/12"}`,children:[T?e.jsx(e.Fragment,{children:e.jsx("div",{className:"lg:w-full",children:e.jsx(_e,{color:"error",className:"me-2 btn btn-sm",onClick:o,children:"Hapus"})})}):null,e.jsx("div",{className:"lg:w-full",children:e.jsx(_e,{className:"me-2 btn btn-sm",color:"success",onClick:()=>K.current.click(),children:"Browse"})})]})]})})}),e.jsx("div",{className:"form-group",children:e.jsx("div",{className:"mb-3",children:e.jsx(Ca,{variant:"body2",color:"text.secondary",children:n})})})]})},rf={flex:1,display:"flex",flexDirection:"column",alignItems:"center",padding:"20px",borderWidth:2,borderRadius:2,borderColor:"#eeeeee",borderStyle:"dashed",backgroundColor:"#fafafa",color:"#bdbdbd",outline:"none",transition:"border .24s ease-in-out",minHeight:"200px",justifyContent:"center"},nf={borderColor:"#2196f3"},lf={borderColor:"#00e676"},of={borderColor:"#ff1744"},at=({onFileSelected:r,isReset:s,descBox:n="",maxSizePerFileInMb:t=5,acceptedType:i=null,form:l=null,error:m=!1})=>{const[p,B]=a.useState([]),K=a.useMemo(()=>i?Object.values(i).flat().join(", "):".JPG .JPEG .PNG .DOC .DOCX .PDF .XLS .XLSX .PPT .PPTX .MP4 .WAV",[i]),W=a.useCallback(I=>{I!=null&&I.length&&B(_=>[..._,...I.map(C=>Object.assign(C,{preview:URL.createObjectURL(C)}))])},[]),{acceptedFiles:z,getRootProps:T,getInputProps:L,isFocused:$,isDragAccept:M,isDragReject:H,isDragActive:V,fileRejections:A}=sn({accept:i??{"image/*":[".jpeg",".png",".jpg"],"application/pdf":[".pdf"],"video/*":[".mp4",".wav"],"application/msword":[".doc"],"application/vnd.openxmlformats-officedocument.wordprocessingml.document":[".docx"],"application/vnd.ms-powerpoint":[".ppt"],"application/vnd.openxmlformats-officedocument.presentationml.presentation":[".pptx"],"application/vnd.ms-excel":[".xls"],"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":[".xlsx"]},multiple:!0,maxFiles:10,maxSize:t*1024*1024,onDrop:W}),G=I=>{B(_=>_.filter(C=>C.name!==I))},X=()=>{B([]),r([],l)},O=a.useMemo(()=>({...rf,...$?nf:{},...M?lf:{},...H?of:{}}),[$,M,H]);return a.useEffect(()=>{s&&(B([]),r([],l))},[s]),a.useEffect(()=>{r(p,l)},[p]),a.useEffect(()=>{var I,_,C;(A==null?void 0:A.length)>0&&U.fire("Terjadi Kesalahan",(C=(_=(I=A[0])==null?void 0:I.errors)==null?void 0:_[0])==null?void 0:C.message,"warning")},[A]),e.jsxs("section",{className:"container",children:[e.jsx("div",{className:"form-group",children:e.jsxs("div",{className:"mb-3",children:[e.jsxs("div",{className:"text-xs ps-1 text-gray-500 mt-1",children:["Format yang didukung: ",K," dan ",e.jsxs("b",{children:["maksimal per file ",t," MB"]})]}),e.jsxs("div",{className:"text-xs ps-1 text-gray-500 mt-1",children:["Mohon memberikan nama file lampiran yang tepat dan benar, tidak menggunakan unsur (titik), (koma), symbol (!@#$%^&* ( ) ) dan ",e.jsx("b",{children:"total seluruh file maksimal 20 MB"})]})]})}),e.jsxs("div",{...T({style:O}),className:`${m?"!bg-red-100 !border-red-700":""}`,children:[e.jsx("input",{...L({id:"multiple-file-dropzone",accept:i?Object.keys(i).join(","):null})}),H?e.jsx("p",{children:"File Tidak Support"}):p.length>0?e.jsx("div",{className:"file-preview",children:e.jsx("ul",{className:"mt-6 flex flex-wrap gap-10",children:p.map(I=>e.jsxs("li",{className:"relative min-h-32 w-44 rounded-md shadow-lg py-2",children:[e.jsx(Qr,{size:"5em",className:"ms-3",title:"Files"}),e.jsx("button",{type:"button",className:"w-7 h-7 border border-secondary-400 bg-secondary-400 rounded-full flex justify-center items-center absolute -top-3 -right-3 hover:bg-white transition-colors",onClick:()=>G(I.name),children:e.jsx(zn,{})}),e.jsx("p",{className:"mt-2 mx-2 text-neutral-500 text-[12px] font-medium truncate",children:I.name}),e.jsx("p",{className:"mt-2 mx-2 text-neutral-500 text-[12px] font-medium truncate",children:rh(I==null?void 0:I.size)})]},I.name))})}):e.jsx(Ca,{variant:"body2",color:"text.secondary",children:n})]}),e.jsx(Xa,{className:"mt-3",children:e.jsx(w,{children:e.jsxs("div",{className:"py-6 flex flex-col md:flex-row justify-between gap-5 lg:mb-0",children:[e.jsx("div",{className:`w-full ${p.length?"md:w-8/12":"md:w-10/12"} `,children:e.jsx(Ye,{placeholder:"",id:"file",value:p.length+" file selected",readOnly:!0})}),p.length>0?e.jsx(e.Fragment,{children:e.jsx("div",{className:"w-full md:w-2/12",children:e.jsx(_e,{color:"error",className:"btn btn-sm w-full",onClick:X,children:"Hapus"})})}):null,e.jsx("div",{className:"w-full md:w-2/12",children:e.jsx(_e,{className:"btn btn-sm w-full",color:"success",onClick:()=>document.getElementById("multiple-file-dropzone").click(),children:"Browse"})})]})})})]})},Rt="https://api.arsip.go.id/naskah-keluar/api/",io="https://api.arsip.go.id/arsip/api/",lo="https://api.arsip.go.id/qr-preview/api/",cf="https://api.arsip.go.id/master/api/",oo="https://api.arsip.go.id/nk-content/api/";class Gt{constructor(){ae(this,"postRegistrasiNaskahKeluar",async s=>await se.post(`${Rt}naskah-dinas/registrasi-naskah-dinas-keluar`,s,{headers:{"Content-Type":"multipart/form-data"}}).then(i=>i));ae(this,"getNomor",async s=>{const n=Ce.serializeObjectToQueryString(s);return await se.get(`${cf}tatanaskah/penomoran-otomatis/get-nomor?${n}`).then(l=>l)});ae(this,"getPaging",async s=>{const n=Ce.serializeObjectToQueryString(s);return await se.get(`${Rt}naskah-dinas/naskah-keluar?${n}`).then(l=>l)});ae(this,"detail",async s=>await se.get(`${Rt}naskah-dinas/log-naskah-keluar/${s}`).then(i=>i.data.result));ae(this,"getContent",async s=>await se.post(`${oo}naskah-dinas/naskah-keluar/get-content-file`,s).then(i=>i.data.result));ae(this,"refreshContent",async s=>await se.post(`${oo}naskah-dinas/naskah-keluar/refresh-content-file`,s).then(i=>i.data.result));ae(this,"postBerkas",async s=>await se.post(`${io}berkas/berkas-naskah`,s).then(i=>i));ae(this,"postBerkasCheck",async s=>await se.post(`${io}berkas/berkas-naskah/store-check`,s).then(i=>i));ae(this,"updatePdf",async s=>await se.post(`${Rt}naskah-dinas/text-editor/update`,s).then(i=>i));ae(this,"getScanning",async s=>{let n=null;return s.startsWith("F_")?n=se.get(`${lo}preview_v2/${s}`):n=se.get(`${lo}preview/${s}`),await n.then(i=>i)});ae(this,"getLaporan",async s=>{const n=Ce.serializeObjectToQueryString(s);return await se.get(`${Rt}laporan/naskah-keluar?${n}`).then(l=>l)});ae(this,"downloadLaporanPdf",async s=>{const n=Ce.serializeObjectToQueryString(s);return await se.get(`${Rt}laporan/naskah-keluar/pdf?${n}`,{responseType:"blob",headers:{"Content-Type":"application/pdf"}}).then(l=>l)});ae(this,"downloadLaporanExcel",async s=>{const n=Ce.serializeObjectToQueryString(s);return await se.get(`${Rt}laporan/naskah-keluar/excel?${n}`,{responseType:"blob",headers:{"Content-Type":"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}}).then(l=>l)})}}const df=()=>{var Re,sa,Te;const r=ha(),s="Registrasi Naskah Keluar",[n,t]=a.useState(!1),i=new Gt,[l,m]=a.useState(!1),[p,B]=a.useState(null),[K,W]=a.useState([]),[z,T]=a.useState(null),[L,$]=a.useState(null),[M,H]=a.useState(null),[V,A]=a.useState([]),[G,X]=a.useState(null),O=JSON.parse(Le.getItem("users")),I=ga(),[_,C]=a.useState(""),[k,b]=a.useState(null),[y,o]=a.useState([]),[F,x]=a.useState(null),[S,f]=a.useState([]),[R,u]=a.useState([]),[D,E]=a.useState(null),[J,P]=a.useState(null),[h,d]=a.useState(null),[j,g]=a.useState(null),[c,v]=a.useState(!1),[N,Q]=a.useState(null),[re,ye]=a.useState([]),[xe,fe]=a.useState(!1),[Ge,$e]=a.useState(!0),[Pe,te]=a.useState({formode:"Tambah",id:"",user_created_nama:"",organisasi_created_nama:"",sender_user_id:null,sender_user_nama:"",jenis_naskah_id:null,jenis_naskah_nama:"",sifat_naskah_id:null,reply_id:"",sifat_naskah_nama:"",urgensi_naskah_id:0,urgensi_naskah_nama:"",hal:"",file:null,ringkasan:"",tujuan_internal_id:[],grup_tujuan_id:0,tembusan_internal_id:[],grup_tembusan_id:0,tujuan_eksternal_id:[],klasifikasi_id:"",klasifikasi_nama:"",verifikators:[],penandatanganans:[],ttd:"TTE",tipe_tte:"VISIBLE",nomor:"",reference:((Re=I.state)==null?void 0:Re.reference)??"",tujuans:[],tembusan:[],lampirans:[],balas:((sa=I.state)==null?void 0:sa.balas)??"",naskah_masuk_id:(Te=I.state)==null?void 0:Te.naskah_masuk_id});a.useEffect(()=>{var me,ee,Y;t(ge(s,"is_read",!0)),Pe!=null&&Pe.balas&&(W({id:(me=Pe==null?void 0:Pe.reference)==null?void 0:me.id,nomor:(ee=Pe==null?void 0:Pe.reference)==null?void 0:ee.nomor_hal}),te({...Pe,reply_id:(Y=Pe==null?void 0:Pe.reference)==null?void 0:Y.id}))},[]);const ne=me=>{var ke,De,ta,Be,Fe,Ke,Qe,ea,ja,Aa;try{const Ee=[...(ke=me.tujuan_internal_id)!=null&&ke.length?me.tujuan_internal_id.map(Xe=>({to_user_id:Xe.to_user_id,jenis:Xe.jenis})):[],...(De=me.tujuan_eksternal_id)!=null&&De.length?me.tujuan_eksternal_id.map(Xe=>({to_user_id:Xe.to_user_id??"",organisasi_id:Xe.organisasi_id??"",nama:Xe.nama??"",jabatan:Xe.jabatan??"",instansi:Xe.instansi??"",nama_pengguna:Xe.nama_pengguna??"",to_jabatan_id:Xe.to_jabatan_id??"",to_organisasi_id:Xe.to_organisasi_id??"",to_public_organisasi_id:Xe.to_public_organisasi_id??"",jenis:Xe.jenis})):[],...(ta=me.tembusan_internal_id)!=null&&ta.length?me.tembusan_internal_id.map(Xe=>({to_user_id:Xe.to_user_id,jenis:Xe.jenis})):[],...(Be=me.tembusan_eksternal_id)!=null&&Be.length?me.tembusan_eksternal_id.map(Xe=>({to_user_id:Xe.to_user_id??"",organisasi_id:Xe.organisasi_id??"",nama:Xe.nama??"",jabatan:Xe.jabatan??"",instansi:Xe.instansi??"",nama_pengguna:Xe.nama_pengguna??"",to_jabatan_id:Xe.to_jabatan_id??"",to_organisasi_id:Xe.to_organisasi_id??"",to_public_organisasi_id:Xe.to_public_organisasi_id??"",jenis:Xe.jenis})):[]],ve=[...me.verifikators.map(Xe=>({user_id:Xe.user_id}))],Ae=[...me.penandatanganans.map(Xe=>({user_id:Xe.pengguna_id,filename:Xe.filename}))],{tujuan_internal_id:Ue,tembusan:ma,tujuan_eksternal_id:La,tembusans:We,tembusan_eksternal_id:qe,...He}=me,Ve={...He,tujuans:Ee,urgensi_naskah_id:0,urgensi_naskah_nama:me.urgensi_naskah_nama,status:"TRANSAKSI",jenis_perkembangan:"ASLI",tipe_tte:me.ttd=="TTE"?me.tipe_tte:"",naskah_masuk_id:me.naskah_masuk_id??0,verifikators:ve,penandatanganans:Ae},Ha="";$e(!1),i.postRegistrasiNaskahKeluar(Ve).then(Xe=>{var xs,Ya,ks;Xe.data.success&&(U.fire((xs=Xe.data)!=null&&xs.success?"Berhasil":"Gagal",(Ya=Xe.data)==null?void 0:Ya.message,(ks=Xe.data)!=null&&ks.success?"success":"warning"),v(!0),Ne(),r(Ha+"/pembuatan-naskah-keluar/log-naskah-keluar"))}).catch(Xe=>{var Ya,ks;const xs=Oe(Xe.response.data.result);U.fire("Gagal",xs??((ks=(Ya=Xe.response)==null?void 0:Ya.data)==null?void 0:ks.message),"error"),$e(!0)}).finally(()=>$e(!0));return;if(N){const Xe=new FormData;Xe.append("reply_id",Ve.reply_id),Xe.append("jenis_naskah_id",Ve.jenis_naskah_id),Xe.append("jenis_naskah_nama",Ve.jenis_naskah_nama),Xe.append("sifat_naskah_id",Ve.sifat_naskah_id),Xe.append("sifat_naskah_nama",Ve.sifat_naskah_nama),Xe.append("urgensi_naskah_id",0),Xe.append("urgensi_naskah_nama",Ve.urgensi_naskah_nama),Xe.append("klasifikasi_id",Ve.klasifikasi_id),Xe.append("klasifikasi_nama",Ve.klasifikasi_nama),Xe.append("nomor",Ve.nomor),Xe.append("hal",Ve.hal),Xe.append("ringkasan",Ve.ringkasan),Xe.append("file",N),Xe.append("grup_tujuan_id",Ve.grup_tujuan_id),Xe.append("ttd",Ve.ttd),Xe.append("tipe_tte",Ve.ttd=="TTE"?Ve.tipe_tte:""),Xe.append("sender_user_id",Ve.sender_user_id),Xe.append("sender_user_nama",Ve.sender_user_nama),Xe.append("status","TRANSAKSI"),Xe.append("organisasi_created_nama",O==null?void 0:O.desc_unit_kerja),Xe.append("public_created_nama",O==null?void 0:O.desc_instansi),Xe.append("jabatan_created_nama",O==null?void 0:O.desc_jabatan),Xe.append("jenis_perkembangan","ASLI"),Xe.append("naskah_masuk_id",Ve.naskah_masuk_id??0);var ee;if(Ve.tujuan_internal_id&&((Fe=Ve.tujuan_internal_id)==null?void 0:Fe.length)>0)for(var Y=0;Y<Ve.tujuan_internal_id.length;Y++)Xe.append(`tujuans[${Y}][to_user_id]`,Ve.tujuan_internal_id[Y].to_user_id),Xe.append(`tujuans[${Y}][jenis]`,Ve.tujuan_internal_id[Y].jenis),ee++;if(Ve.tujuan_eksternal_id&&((Ke=Ve.tujuan_eksternal_id)==null?void 0:Ke.length)>0)for(var Y=0;Y<Ve.tujuan_eksternal_id.length;Y++)Xe.append(`tujuans[${ee}][to_user_id]`,Ve.tujuan_eksternal_id[Y].to_user_id),Xe.append(`tujuans[${ee}][organisasi_id]`,Ve.tujuan_eksternal_id[Y].organisasi_id),Xe.append(`tujuans[${ee}][nama]`,Ve.tujuan_eksternal_id[Y].nama),Xe.append(`tujuans[${ee}][jabatan]`,Ve.tujuan_eksternal_id[Y].jabatan),Xe.append(`tujuans[${ee}][instansi]`,Ve.tujuan_eksternal_id[Y].instansi),Xe.append(`tujuans[${ee}][jenis]`,Ve.tujuan_eksternal_id[Y].jenis),Xe.append(`tujuans[${ee}][nama_pengguna]`,Ve.tujuan_eksternal_id[Y].nama_pengguna),Xe.append(`tujuans[${ee}][nama_organisasi]`,Ve.tujuan_eksternal_id[Y].nama_organisasi),Xe.append(`tujuans[${ee}][to_jabatan_id]`,Ve.tujuan_eksternal_id[Y].to_jabatan_id),Xe.append(`tujuans[${ee}][to_organisasi_id]`,Ve.tujuan_eksternal_id[Y].to_organisasi_id),Xe.append(`tujuans[${ee}][to_public_organisasi_id]`,Ve.tujuan_eksternal_id[Y].to_public_organisasi_id),ee++;if(Ve.tembusan_internal_id&&((Qe=Ve.tembusan_internal_id)==null?void 0:Qe.length)>0)for(var Y=0;Y<Ve.tembusan_internal_id.length;Y++)Xe.append(`tujuans[${ee}][to_user_id]`,Ve.tembusan_internal_id[Y].to_user_id),Xe.append(`tujuans[${ee}][jenis]`,Ve.tembusan_internal_id[Y].jenis),ee++;if(Ve.tembusan_eksternal_id&&((ea=Ve.tembusan_eksternal_id)==null?void 0:ea.length)>0)for(var Y=0;Y<Ve.tembusan_eksternal_id.length;Y++)Xe.append(`tujuans[${ee}][to_user_id]`,Ve.tembusan_eksternal_id[Y].to_user_id),Xe.append(`tujuans[${ee}][organisasi_id]`,Ve.tembusan_eksternal_id[Y].organisasi_id),Xe.append(`tujuans[${ee}][nama]`,Ve.tembusan_eksternal_id[Y].nama),Xe.append(`tujuans[${ee}][jabatan]`,Ve.tembusan_eksternal_id[Y].jabatan),Xe.append(`tujuans[${ee}][instansi]`,Ve.tembusan_eksternal_id[Y].instansi),Xe.append(`tujuans[${ee}][jenis]`,Ve.tembusan_eksternal_id[Y].jenis),Xe.append(`tujuans[${ee}][nama_pengguna]`,Ve.tembusan_eksternal_id[Y].nama_pengguna),Xe.append(`tujuans[${ee}][nama_organisasi]`,Ve.tembusan_eksternal_id[Y].nama_organisasi),Xe.append(`tujuans[${ee}][to_jabatan_id]`,Ve.tembusan_eksternal_id[Y].to_jabatan_id),Xe.append(`tujuans[${ee}][to_organisasi_id]`,Ve.tembusan_eksternal_id[Y].to_organisasi_id),Xe.append(`tujuans[${ee}][to_public_organisasi_id]`,Ve.tembusan_eksternal_id[Y].to_public_organisasi_id),ee++;if(((ja=Ve.verifikator)==null?void 0:ja.length)>0)for(var Y=0;Y<Ve.verifikator.length;Y++)Xe.append(`verifikators[${Y}][user_id]`,Ve.verifikator[Y].user_id);if(((Aa=Ve.penandatanganan)==null?void 0:Aa.length)>0)for(var Y=0;Y<Ve.penandatanganan.length;Y++)Xe.append(`penandatanganans[${Y}][user_id]`,Ve.penandatanganan[Y].pengguna_id),Xe.append(`penandatanganans[${Y}][filename]`,Ve.penandatanganan[Y].filename||null);if((re==null?void 0:re.length)>0)for(var Y=0;Y<re.length;Y++)Xe.append(`lampirans[${Y}][file]`,re[Y]),Xe.append(`lampirans[${Y}][naskah]`,"KELUAR");const xs="";i.postRegistrasiNaskahKeluar(Xe).then(Ya=>{var ks,Pa,Ba;Ya.data.success&&(U.fire((ks=Ya.data)!=null&&ks.success?"Berhasil":"Gagal",(Pa=Ya.data)==null?void 0:Pa.message,(Ba=Ya.data)!=null&&Ba.success?"success":"warning"),v(!0),Ne(),r(xs+"/pembuatan-naskah-keluar/log-naskah-keluar"))}).catch(Ya=>{var Pa,Ba;const ks=Oe(Ya.response.data.result);U.fire("Gagal",ks??((Ba=(Pa=Ya.response)==null?void 0:Pa.data)==null?void 0:Ba.message),"error"),$e(!0)}).finally(()=>$e(!0))}else U.fire("Peringatan","File Naskah Harus Diisi","warn")}catch(Ee){console.log(Ee),$e(!0),U.fire("Peringatan","Terjadi kesalahan, Harap cek kembali input data","warning")}},pe=me=>{var ke;const ee={singkatan_org:(ke=O==null?void 0:O.unit_kerja)==null?void 0:ke.singkatan,jenis_naskah_id:me.values.jenis_naskah_id,sifat_naskah_id:me.values.sifat_naskah_id,klasifikasi_id:me.values.klasifikasi_id,tipe_nomor:"SURAT KELUAR",organisasi_id:me.values.sender_user_id};Object.keys(ee).filter(De=>ee[De]===void 0||ee[De]===null||ee[De]==="").length>0?U.fire({title:"Error",text:"Harap cek kembali input data",icon:"error",cancelButtonText:"OK"}):(fe(!0),i.getNomor(ee).then(De=>{De.data.success&&(me.setFieldValue("nomor",De.data.result),fe(!1))}).catch(De=>{var ta,Be,Fe,Ke,Qe,ea;((ta=De==null?void 0:De.response)==null?void 0:ta.status)==404?U.fire("Gagal",`<p>
              Pastikan <b>Tata Usaha / Sekretaris</b> telah membuat format nomor yang Anda inginkan
            </p>`,"error"):U.fire("Gagal",(Fe=(Be=De.response)==null?void 0:Be.data)!=null&&Fe.result&&((Ke=De.response.data.result)==null?void 0:Ke.length)>0?De.response.data.result[0]:(ea=(Qe=De.response)==null?void 0:Qe.data)==null?void 0:ea.message,"error"),fe(!1)}))},he=(me,ee)=>{Q(me),ee&&ee.setFieldValue("file",me)},oe=(me,ee)=>{ye(me),ee&&ee.setFieldValue("lampirans",me)},je=a.useRef(),Ne=()=>{je.current.resetForm(),B(null),T(null),b(null),o([]),x(null),f([]),u(null),E(null),P(null),d(null),g(null)};return e.jsxs(aa,{children:[e.jsx(la,{}),n&&e.jsx(e.Fragment,{children:e.jsx(ie,{pt:6,pb:3,children:e.jsxs(Me,{children:[e.jsx(ie,{px:3,pt:3,lineHeight:1,children:e.jsx(w,{container:!0,direction:"row",justifyContent:"space-between",alignItems:"center",children:e.jsx(w,{item:!0,children:e.jsx(le,{variant:"h5",fontWeight:"medium",children:"Form Registrasi Naskah Keluar"})})})}),e.jsx(ca,{innerRef:je,initialValues:Pe,onSubmit:ne,validateOnChange:!0,enableReinitialize:!0,children:e.jsxs(da,{id:"form",encType:"multipart/form-data",children:[e.jsxs(w,{mt:2,children:[e.jsxs("div",{className:"px-5",children:[e.jsx(le,{variant:"h6",fontWeight:"medium",children:"Detil Isi Naskah"}),e.jsx("hr",{})]}),e.jsxs("div",{className:"p-6 grid grid-cols-12 mb-10 gap-5 lg:mb-0",children:[e.jsxs("div",{className:"col-span-12 md:col-span-6 ",children:[e.jsx(w,{children:e.jsx(ce,{name:"sender_user_id",children:({field:me,form:ee,meta:Y})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Dikirimkan melalui",required:!0,error:Y.error&&Y.touched}),e.jsx(ra,{url:"tatanaskah/penomoran-otomatis/get-unit-kerja",targetService:"master",isDisabled:l,callbackChange:ke=>{ee.setFieldValue("sender_user_id",(ke==null?void 0:ke.id)??""),ee.setFieldValue("sender_user_nama",(ke==null?void 0:ke.nama)??""),C((ke==null?void 0:ke.id)??""),T(ke),ee.setFieldValue("jenis_naskah_id",""),ee.setFieldValue("jenis_naskah_nama",""),$(null),H(null),ee.setFieldValue("sifat_naskah_id",""),ee.setFieldValue("sifat_naskah_nama",""),X(null),ee.setFieldValue("klasifikasi_id",""),ee.setFieldValue("klasifikasi_nama",""),ee.setFieldValue("nomor","")},selectedData:z,keyValue:["id","nama"],placeholder:"Pilih Unit Kerja...",className:"text-sm",menuPortalTarget:null,optionParam:{public_organisasi_id:O==null?void 0:O.public_organisasi_id},isMulti:!1}),e.jsx(ue,{text:Y.error,error:Y.error&&Y.touched})]})})}),e.jsx(w,{mt:3,children:e.jsx(ce,{name:"jenis_naskah_id",children:({form:me,meta:ee})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Jenis Naskah",required:!0,error:ee.error&&ee.touched}),e.jsx(ra,{url:"tatanaskah/jenis-naskah/select",isDisabled:l,callbackChange:Y=>{me.setFieldValue("jenis_naskah_id",(Y==null?void 0:Y.id)??""),me.setFieldValue("jenis_naskah_nama",(Y==null?void 0:Y.jenis_naskah)??""),$(Y),H(null),me.setFieldValue("sifat_naskah_id",""),me.setFieldValue("sifat_naskah_nama",""),X(null),me.setFieldValue("klasifikasi_id",""),me.setFieldValue("klasifikasi_nama",""),me.setFieldValue("nomor","")},selectedData:L,keyValue:["id","jenis_naskah"],placeholder:"Pilih Jenis Naskah...",className:"text-sm",menuPortalTarget:null,optionParam:{"select-target":"select-jenis-naskah-by-unitkerja",role:O==null?void 0:O.role,unitkerja:_,public_organisasi_id:O==null?void 0:O.public_organisasi_id},isMulti:!1,targetService:"master"}),e.jsx(ue,{text:ee.error,error:ee.error&&ee.touched})]})})}),e.jsx(w,{mt:3,children:e.jsx(ce,{name:"sifat_naskah_id",children:({form:me,meta:ee})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Sifat Naskah",required:!0,error:ee.error&&ee.touched}),e.jsx(ra,{url:"tatanaskah/sifat-naskah/select",isDisabled:l,callbackChange:Y=>{me.setFieldValue("sifat_naskah_id",(Y==null?void 0:Y.id)??""),me.setFieldValue("sifat_naskah_nama",(Y==null?void 0:Y.sifat_naskah)??""),H(Y),X(null),me.setFieldValue("klasifikasi_id",""),me.setFieldValue("klasifikasi_nama",""),me.setFieldValue("nomor","")},selectedData:M,keyValue:["id","sifat_naskah"],placeholder:"Pilih Sifat Naskah...",className:"text-sm",menuPortalTarget:null,optionParam:{"select-target":"select-sifat-naskah-by-unitkerja",role:O==null?void 0:O.role,unitkerja:_,public_organisasi_id:O==null?void 0:O.public_organisasi_id},isMulti:!1,targetService:"master"}),e.jsx(ue,{text:ee.error,error:ee.error&&ee.touched})]})})}),e.jsx(w,{mt:3,children:e.jsx(ce,{name:"klasifikasi_id",children:({field:me,form:ee,meta:Y})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Klasifikasi",required:!0,error:Y.error&&Y.touched}),e.jsx(ra,{url:"klasifikasi/select",isDisabled:l,callbackChange:ke=>{ee.setFieldValue("klasifikasi_id",(ke==null?void 0:ke.id)??""),ee.setFieldValue("klasifikasi_nama",(ke==null?void 0:ke.nama)??""),X(ke),ee.setFieldValue("nomor","")},selectedData:G,keyValue:["id","kode_nama"],placeholder:"Pilih Klasifikasi...",className:"text-sm",menuPortalTarget:null,optionParam:{"select-target":"klasifikasi-by-unitkerja",role:O==null?void 0:O.role,unitkerja:_,organisasi_id:O==null?void 0:O.organisasi_id,public_organisasi_id:O==null?void 0:O.public_organisasi_id},isMulti:!1,targetService:"master"}),e.jsx(ue,{text:Y.error,error:Y.error&&Y.touched})]})})}),e.jsx(w,{mt:3,className:"",children:e.jsx(ce,{name:"nomor",children:({field:me,form:ee,meta:Y})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Nomor Naskah",required:!0,error:Y.error&&Y.touched}),e.jsxs("div",{className:"flex flex-nowrap gap-2",children:[e.jsx(Ye,{...me,type:"text",placeholder:"Masukkan Nomor Naskah...",error:Y.error&&Y.touched,disabled:l}),e.jsx(_e,{color:"info",type:"button",variant:"gradient",size:"small",onClick:()=>!xe&&pe(ee),className:"text-sm whitespace-nowrap",children:e.jsx("div",{className:"flex justify-start",children:xe?e.jsxs(e.Fragment,{children:[e.jsx(rs,{color:"white",className:"flex-shrink-0 w-3 h-3 me-2"}),"Mohon Tunggu"]}):e.jsx(e.Fragment,{children:"Ambil Nomor"})})})]}),e.jsx("div",{className:"text-xs ps-1 text-blue-500 mt-1",children:"INFO: Nomor diatas bersifat sementara, guna untuk penyesuaian file digital."}),e.jsx(ue,{text:Y.error,error:Y.error&&Y.touched})]})})}),e.jsx(w,{mt:3,children:e.jsx(ce,{name:"reply_id",children:({field:me,form:ee,meta:Y})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Nomor Referensi",required:!1,error:Y.error&&Y.touched}),e.jsx(ra,{url:"naskah-dinas/nomor-referensi-keluar/select",isDisabled:l||!!Pe.balas,callbackChange:ke=>{ee.setFieldValue("reply_id",(ke==null?void 0:ke.id)??"")},selectedData:K,keyValue:["id","nomor"],placeholder:"Pilih Nomor Naskah...",className:"text-sm",menuPortalTarget:null,optionParam:{"select-target":"nomor-referensi",user_id:O==null?void 0:O.id,organisasi_id:O==null?void 0:O.organisasi_id},targetService:"nk"}),e.jsx(ue,{text:Y.error,error:Y.error&&Y.touched})]})})})]}),e.jsxs("div",{className:"col-span-12 md:col-span-6 ",children:[e.jsx(w,{children:e.jsx(ce,{name:"hal",children:({field:me,form:ee,meta:Y})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Hal",required:!0,error:Y.error&&Y.touched}),e.jsx(Ka,{...me,placeHolder:"Masukkan Hal..",error:Y.error&&Y.touched,disabled:l,rows:8}),e.jsx(ue,{text:Y.error,error:Y.error&&Y.touched})]})})}),e.jsx(w,{mt:3,children:e.jsx(ce,{name:"ringkasan",children:({field:me,form:ee,meta:Y})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Isi Ringkas",required:!0,error:Y.error&&Y.touched}),e.jsx(Ka,{...me,placeHolder:"Masukkan Isi Ringkas..",error:Y.error&&Y.touched,disabled:l,rows:8}),e.jsx(ue,{text:Y.error,error:Y.error&&Y.touched})]})})}),e.jsx(w,{mt:3,children:e.jsx(ce,{name:"file",children:({field:me,form:ee,meta:Y})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"File naskah",required:!0,error:Y.error&&Y.touched}),e.jsx(tf,{onFileSelected:he,isReset:c,maxSizePerFileInMb:5,desc:"Format yang didukung .DOCX dan .PDF (Maksimal 5 Mb)",descBox:"Untuk menambahkan File, seret dan lepas file tersebut ke sini, atau klik untuk memilih file.",accaptedType:["application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/pdf"],error:Y.error&&Y.touched,form:ee,notifFileTypeError:"File Hanya Support DOCX dan PDF"}),e.jsx(ue,{text:Y.error,error:Y.error&&Y.touched})]})})})]})]}),e.jsxs("div",{className:"px-5",children:[e.jsx(le,{variant:"h6",fontWeight:"medium",children:"LAMPIRAN NASKAH"}),e.jsx("hr",{})]}),e.jsxs("div",{className:"p-6 grid grid-cols-12 mb-10 gap-5 lg:mb-0",children:[e.jsx("div",{className:"col-span-12 md:col-span-12 ",children:e.jsx(w,{children:e.jsx(ce,{name:"lampirans",children:({field:me,form:ee,meta:Y})=>e.jsxs(e.Fragment,{children:[e.jsx(at,{onFileSelected:oe,isReset:c,descBox:"Untuk menambahkan File, seret dan lepas file tersebut ke sini, atau klik untuk memilih file.",maxSizePerFileInMb:5,form:ee}),e.jsx(ue,{text:Y.error,error:Y.error&&Y.touched})]})})})}),e.jsxs("div",{className:"col-span-12 md:col-span-6 ",children:[e.jsxs("div",{className:"px-1",children:[e.jsx(le,{variant:"h6",fontWeight:"medium",children:"TUJUAN UTAMA"}),e.jsx("hr",{})]}),e.jsx(w,{mt:3,children:e.jsx(ce,{name:"grup_tujuan_id",children:({field:me,form:ee,meta:Y})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Grup Tujuan",required:!1,error:Y.error&&Y.touched}),e.jsx(ra,{url:"pengguna/grup-tujuan/select",callbackChange:ke=>{var ta,Be,Fe,Ke,Qe,ea,ja,Aa,Ee,ve,Ae,Ue,ma,La,We;if(o([]),ee.setFieldValue("group_tujuan_id",(ke==null?void 0:ke.id)??0),((ta=ke==null?void 0:ke.daftar_tujuan)==null?void 0:ta.length)>0){let qe=y.map(He=>({...He}));for(var De=0;De<ke.daftar_tujuan.length;De++){let He={id:(Be=ke.daftar_tujuan[De].user)==null?void 0:Be.id,nama_full:`${(Fe=ke.daftar_tujuan[De].user)==null?void 0:Fe.nama} - ${(Ke=ke.daftar_tujuan[De].user)==null?void 0:Ke.desc_jabatan} - ${(Qe=ke.daftar_tujuan[De].user)==null?void 0:Qe.desc_instansi}`,to_user_id:(ea=ke.daftar_tujuan[De].user)==null?void 0:ea.id,organisasi_id:(ja=ke.daftar_tujuan[De].user)==null?void 0:ja.organisasi_id,nama:(Aa=ke.daftar_tujuan[De].user)==null?void 0:Aa.nama,jabatan:(Ee=ke.daftar_tujuan[De].user)==null?void 0:Ee.desc_jabatan,instansi:(ve=ke.daftar_tujuan[De].user)==null?void 0:ve.desc_instansi,jenis:"UTAMA",naskah:"KELUAR",nama_penguna:(Ae=ke.daftar_tujuan[De].user)==null?void 0:Ae.nama,nama_organisasi:(Ue=ke.daftar_tujuan[De].user)==null?void 0:Ue.desc_instansi,to_jabatan_id:(ma=ke.daftar_tujuan[De].user)==null?void 0:ma.jabatan_id,to_organisasi_id:(La=ke.daftar_tujuan[De].user)==null?void 0:La.organisasi_id,to_public_organisasi_id:(We=ke.daftar_tujuan[De].user)==null?void 0:We.public_organisasi_id};(qe==null?void 0:qe.length)>0?qe.findIndex(Ha=>Ha.id===He.id)<0&&(qe.push(He),ee.setFieldValue("tujuan_internal_id",qe)):(qe.push(He),ee.setFieldValue("tujuan_internal_id",qe))}o(qe)}else o([])},selectedData:k,keyValue:["id","nama"],placeholder:"Pilih Grup Tujuan...",className:"text-sm",menuPortalTarget:null,isMulti:!1,optionParam:{organisasi_id:O==null?void 0:O.organisasi_id}}),e.jsx(ue,{text:Y.error,error:Y.error&&Y.touched})]})})}),e.jsx(w,{mt:3,children:e.jsx(ce,{name:"tujuan_internal_id",children:({field:me,form:ee,meta:Y})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Utama (Internal / Eksternal Srikandi)",required:(R==null?void 0:R.length)===0,error:Y.error&&Y.touched}),e.jsx(ra,{url:"pengguna/tujuan/select2",callbackChange:ke=>{const De=Array.from(ke,ta=>ta);ee.setFieldValue("tujuan_internal_id",De.length?De:null),o(De)},selectedData:y,keyValue:["id","nama_full"],placeholder:"Pilih Utama / Tujuan...",className:"text-sm",menuPortalTarget:null,isMulti:!0,optionParam:{"select-target":"utama-internal-dan-srikandi",organisasi_id:O==null?void 0:O.organisasi_id}}),e.jsx(ue,{text:Y.error,error:Y.error&&Y.touched})]})})}),e.jsx(w,{mt:3,children:e.jsx(ce,{name:"tujuan_eksternal_id",children:({field:me,form:ee,meta:Y})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Utama Eksternal Non Srikandi",required:(y==null?void 0:y.length)===0,error:Y.error&&Y.touched}),e.jsx(ra,{url:"pengguna/tujuan/select2",callbackChange:ke=>{const De=Array.from(ke,ta=>ta);ee.setFieldValue("tujuan_eksternal_id",De.length?De:null),u(De)},selectedData:R,keyValue:["id","nama_full"],placeholder:"Pilih Utama / Tujuan...",className:"text-sm",menuPortalTarget:null,isMulti:!0,optionParam:{"select-target":"utama-eksternal",organisasi_id:O==null?void 0:O.organisasi_id}}),e.jsx(ue,{text:Y.error,error:Y.error&&Y.touched})]})})})]}),e.jsxs("div",{className:"col-span-12 md:col-span-6 ",children:[e.jsxs("div",{className:"px-5",children:[e.jsx(le,{variant:"h6",fontWeight:"medium",children:"TUJUAN TEMBUSAN"}),e.jsx("hr",{})]}),e.jsx(w,{mt:3,children:e.jsx(ce,{name:"grup_tembusan_id",children:({field:me,form:ee,meta:Y})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Grup Tembusan",required:!1,error:Y.error&&Y.touched}),e.jsx(ra,{url:"pengguna/grup-tembusan/select",callbackChange:ke=>{var ta,Be,Fe,Ke,Qe,ea,ja,Aa,Ee,ve,Ae,Ue,ma,La,We;if(f([]),ee.setFieldValue("group_tembusan_id",(ke==null?void 0:ke.id)??0),((ta=ke==null?void 0:ke.daftar_tembusan)==null?void 0:ta.length)>0){let qe=S.map(He=>({...He}));for(var De=0;De<ke.daftar_tembusan.length;De++){let He={id:(Be=ke.daftar_tembusan[De].user)==null?void 0:Be.id,nama_full:`${(Fe=ke.daftar_tembusan[De].user)==null?void 0:Fe.nama} - ${(Ke=ke.daftar_tembusan[De].user)==null?void 0:Ke.desc_jabatan} - ${(Qe=ke.daftar_tembusan[De].user)==null?void 0:Qe.desc_instansi}`,to_user_id:(ea=ke.daftar_tembusan[De].user)==null?void 0:ea.id,organisasi_id:(ja=ke.daftar_tembusan[De].user)==null?void 0:ja.organisasi_id,nama:(Aa=ke.daftar_tembusan[De].user)==null?void 0:Aa.nama,jabatan:(Ee=ke.daftar_tembusan[De].user)==null?void 0:Ee.desc_jabatan,instansi:(ve=ke.daftar_tembusan[De].user)==null?void 0:ve.desc_instansi,jenis:"TEMBUSAN",naskah:"KELUAR",nama_penguna:(Ae=ke.daftar_tembusan[De].user)==null?void 0:Ae.nama,nama_organisasi:(Ue=ke.daftar_tembusan[De].user)==null?void 0:Ue.desc_instansi,to_jabatan_id:(ma=ke.daftar_tembusan[De].user)==null?void 0:ma.jabatan_id,to_organisasi_id:(La=ke.daftar_tembusan[De].user)==null?void 0:La.organisasi_id,to_public_organisasi_id:(We=ke.daftar_tembusan[De].user)==null?void 0:We.public_organisasi_id};(qe==null?void 0:qe.length)>0?qe.findIndex(Ha=>Ha.id===He.id)<0&&(qe.push(He),ee.setFieldValue("tembusan_internal_id",qe)):(qe.push(He),ee.setFieldValue("tembusan_internal_id",qe))}f(qe)}else f([])},selectedData:F,keyValue:["id","nama"],placeholder:"Pilih Grup Tembusan...",className:"text-sm",menuPortalTarget:null,isMulti:!1,optionParam:{organisasi_id:O==null?void 0:O.organisasi_id}}),e.jsx(ue,{text:Y.error,error:Y.error&&Y.touched})]})})}),e.jsx(w,{mt:3,children:e.jsx(ce,{name:"tembusan_internal_id",children:({field:me,form:ee,meta:Y})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Tembusan (Internal / Eksternal Srikandi)",required:!1,error:Y.error&&Y.touched}),e.jsx(ra,{url:"pengguna/tembusan/select2",callbackChange:ke=>{const De=Array.from(ke,ta=>ta);ee.setFieldValue("tembusan_internal_id",De.length?De:null),f(De)},selectedData:S,keyValue:["id","nama_full"],placeholder:"",className:"text-sm",menuPortalTarget:null,isMulti:!0,optionParam:{"select-target":"utama-internal-dan-srikandi",organisasi_id:O==null?void 0:O.organisasi_id}}),e.jsx(ue,{text:Y.error,error:Y.error&&Y.touched})]})})}),e.jsx(w,{mt:3,children:e.jsx(ce,{name:"tembusan_eksternal_id",children:({field:me,form:ee,meta:Y})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Tembusan Eksternal Non Srikandi",required:!1,error:Y.error&&Y.touched}),e.jsx(ra,{url:"pengguna/tembusan/select2",callbackChange:ke=>{const De=Array.from(ke,ta=>ta);ee.setFieldValue("tembusan_eksternal_id",De.length?De:null)},selectedData:J,keyValue:["id","nama_full"],placeholder:"",className:"text-sm",menuPortalTarget:null,isMulti:!0,optionParam:{"select-target":"tembusan-eksternal",organisasi_id:O==null?void 0:O.organisasi_id}}),e.jsx(ue,{text:Y.error,error:Y.error&&Y.touched})]})})})]})]}),e.jsxs("div",{className:"col-span-12",children:[e.jsxs("div",{className:"px-5",children:[e.jsx(le,{variant:"h6",fontWeight:"medium",children:"VERIFIKATOR DAN PENANDATANGAN NASKAH"}),e.jsx("hr",{})]}),e.jsxs("div",{className:"p-6 grid grid-cols-12 mb-10 gap-5 lg:mb-0",children:[e.jsx("div",{className:"col-span-12 md:col-span-6 ",children:e.jsx(w,{children:e.jsx(ce,{name:"verifikators",children:({field:me,form:ee,meta:Y})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Verifikator",required:!0,error:Y.error&&Y.touched}),e.jsx(ra,{url:"pengguna/verifikator/select2",callbackChange:ke=>{const De=Array.from(ke,ta=>ta);ee.setFieldValue("verifikators",De.length?De:null)},selectedData:h,keyValue:["id","text"],placeholder:"",className:"text-sm",menuPortalTarget:null,isMulti:!0,optionParam:{"select-target":"verifikator",organisasi_id:O==null?void 0:O.organisasi_id}}),e.jsx(ue,{text:Y.error,error:Y.error&&Y.touched})]})})})}),e.jsx("div",{className:"col-span-12 md:col-span-6 ",children:e.jsx(w,{children:e.jsx(ce,{name:"penandatanganans",children:({field:me,form:ee,meta:Y})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Penandatangan",required:!0,error:Y.error&&Y.touched}),e.jsx(ra,{url:"pengguna/daftar-penandatangan/select2",callbackChange:ke=>{const De=Array.from(ke,ta=>ta);ee.setFieldValue("penandatanganans",De.length?De:null)},selectedData:j,keyValue:["id","text"],placeholder:"",className:"text-sm",menuPortalTarget:null,isMulti:!0,optionParam:{"select-target":"penandatangan",organisasi_id:O==null?void 0:O.organisasi_id}}),e.jsx(ue,{text:Y.error,error:Y.error&&Y.touched})]})})})}),e.jsx("div",{className:"col-span-12 md:col-span-6 ",children:e.jsx(w,{children:e.jsx(ce,{name:"ttd",children:({field:me,form:ee,meta:Y})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Tipe Tanda Tangan",required:!0,error:Y.error&&Y.touched}),e.jsxs("div",{className:"flex flex-row gap-4 mt-4",children:[e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{...me,type:"radio",className:"form-radio  w-4 h-4 text-blue-500 focus:ring-2 focus:ring-blue-500",value:"TTE",checked:me.value=="TTE",disabled:l}),e.jsx("span",{className:"text-gray-700 text-sm",children:"Elektronik"})]}),e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{...me,type:"radio",className:"form-radio  w-4 h-4 text-blue-500 focus:ring-2 focus:ring-blue-500",value:"KONVENSIONAL",disabled:l,checked:me.value=="KONVENSIONAL"}),e.jsx("span",{className:"text-gray-700 text-sm",children:"Konvensional"})]})]}),e.jsx(ue,{text:Y.error,error:Y.error&&Y.touched})]})})})}),e.jsx("div",{className:"col-span-12 md:col-span-6 ",children:e.jsx(w,{children:e.jsx(ce,{name:"tipe_tte",validate:me=>{var Y,ke,De;const ee=(De=(ke=(Y=je==null?void 0:je.current)==null?void 0:Y.values)==null?void 0:ke.penandatanganans)==null?void 0:De.every(ta=>!!ta.filename);if(me=="INVISIBLE"&&!ee)return"Pengguna berikut belum memiliki gambar tandatangan."},children:({field:me,form:ee,meta:Y})=>{var De,ta,Be,Fe,Ke;const ke=(ta=(De=ee.values)==null?void 0:De.penandatanganans)==null?void 0:ta.filter(Qe=>!Qe.filename);return((Be=ee.values)==null?void 0:Be.ttd)=="TTE"&&e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Visual TTE",required:((Fe=ee.values)==null?void 0:Fe.ttd)=="TTE",error:Y.error&&Y.touched}),e.jsxs("div",{className:"flex flex-row gap-4 items-center mt-4",children:[e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{...me,type:"radio",className:"form-radio  w-4 h-4 text-blue-500 focus:ring-2 focus:ring-blue-500",value:"VISIBLE",disabled:l,checked:me.value=="VISIBLE"}),e.jsx("span",{className:"text-gray-700 text-sm",children:"QR Code"})]}),e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{...me,type:"radio",className:"form-radio  w-4 h-4 text-blue-500 focus:ring-2 focus:ring-blue-500",value:"INVISIBLE",checked:me.value=="INVISIBLE",disabled:l}),e.jsx("span",{className:"text-gray-700 text-sm",children:"Spesimen Gambar"})]})]}),e.jsx(ue,{text:Y.error,error:Y.error&&Y.touched}),((Ke=ee.values)==null?void 0:Ke.tipe_tte)=="INVISIBLE"&&(ke==null?void 0:ke.length)>0&&e.jsxs("div",{className:"mt-2 text-sm text-red-600 dark:text-red-500",children:[e.jsx("h3",{className:"mb-2",children:"Mohon upload gambar tandatangan terlebih dahulu:"}),e.jsx("ol",{children:ke==null?void 0:ke.map((Qe,ea)=>e.jsx("li",{children:Qe.text}))})]})]})}})})})]})]})]}),e.jsxs("div",{className:"p-3 flex justify-end items-center w-full gap-5 mb-10",children:[e.jsx(Je,{submit:Ge,color:"success",formId:"form",text:"Simpan"}),e.jsx(_e,{color:"info",onClick:Ne,type:"button",variant:"gradient",children:"Reset"})]})]})})]})})})]})},Za="https://api.arsip.go.id/naskah-keluar/api/",uf="https://api.arsip.go.id/master/api/",hf="https://api.arsip.go.id/user/api/",Ni="https://api.arsip.go.id/texteditor/api/";class Ts{constructor(){ae(this,"getPaging",async s=>{const n=Ce.serializeObjectToQueryString(s);return await se.get(`${Za}log-naskah/log-naskah-keluar?${n}`).then(l=>l)});ae(this,"getDetail",async s=>await se.get(`${Za}naskah-dinas/naskah-keluar/${s}/show`).then(i=>i));ae(this,"update",async(s,n)=>await se.post(`${Za}naskah-dinas/naskah-keluar/${s}/update`,n,{headers:{"Content-Type":"multipart/form-data"}}).then(l=>l));ae(this,"getForward",async s=>{const n=Ce.serializeObjectToQueryString(s);return await se.get(`${Za}naskah-dinas/naskah-keluar/get/current-forward?${n}`).then(l=>l)});ae(this,"getTujuanNaskahMasuk",async s=>await se.get(`${Za}naskah-dinas/naskah-keluar/${s}/tujuan-naskah-masuk`).then(i=>i));ae(this,"deleteNaskah",async s=>{const n=Ce.serializeObjectToQueryString(s);return await se.delete(`${Za}naskah-dinas/naskah-keluar/destroy?${n}`).then(l=>l)});ae(this,"getPagingLampiran",async s=>{const n=Ce.serializeObjectToQueryString(s);return await se.get(`${Za}naskah-dinas/lampiran?${n}`).then(l=>l)});ae(this,"postLampiran",async s=>await se.post(`${Za}naskah-dinas/lampiran`,s,{headers:{"Content-Type":"multipart/form-data"}}).then(i=>i));ae(this,"deleteLampiran",async s=>await se.delete(`${Za}naskah-dinas/lampiran/${s}`).then(i=>i));ae(this,"getPagingTujuan",async s=>{const n=Ce.serializeObjectToQueryString(s);return await se.get(`${Za}naskah-dinas/tujuan-naskah?${n}`).then(l=>l)});ae(this,"postTujuan",async s=>await se.post(`${Za}naskah-dinas/tujuan-naskah`,s).then(i=>i));ae(this,"deleteTujuan",async s=>await se.delete(`${Za}naskah-dinas/tujuan-naskah/${s}`).then(i=>i));ae(this,"getPagingVerifikator",async s=>{const n=Ce.serializeObjectToQueryString(s);return await se.get(`${Za}verifikator-naskah/verifikators?${n}`).then(l=>l)});ae(this,"addVerifikator",async s=>await se.post(`${Za}verifikator-naskah`,s).then(i=>i));ae(this,"postVerifikator",async s=>await se.post(`${Za}verifikator-naskah/update`,s,{headers:{"Content-Type":"multipart/form-data"}}).then(i=>i));ae(this,"deleteVerifikator",async s=>await se.delete(`${Za}verifikator-naskah/${s}`).then(i=>i));ae(this,"currentVerifikator",async s=>{const n=Ce.serializeObjectToQueryString(s);return await se.get(`${Za}verifikator-naskah/current?${n}`).then(l=>l)});ae(this,"getPagingPenandatanganan",async s=>{const n=Ce.serializeObjectToQueryString(s);return await se.get(`${Za}log-naskah/log-naskah-keluar/penandatangan?${n}`).then(l=>l)});ae(this,"addPenandatanganan",async s=>await se.post(`${Za}penandatangan-naskah`,s).then(i=>i));ae(this,"deletePenandatanganan",async s=>await se.delete(`${Za}penandatangan-naskah/${s}`).then(i=>i));ae(this,"currentPenandatangan",async s=>{const n=Ce.serializeObjectToQueryString(s);return await se.get(`${Za}penandatangan-naskah/current?${n}`).then(l=>l)});ae(this,"getPagingMetaData",async s=>{const n=Ce.serializeObjectToQueryString(s);return await se.get(`${hf}pengguna/audit-naskah?${n}`).then(l=>l)});ae(this,"getVersioning",async(s,n)=>{const t=Ce.serializeObjectToQueryString(n);return await se.get(`${Za}naskah-dinas/naskah-keluar/version?${t}`).then(m=>m)});ae(this,"getTimeline",async s=>await se.get(`${Za}naskah-dinas/naskah-keluar/${s}/timeline`).then(i=>i));ae(this,"sending",async(s,n)=>await se.post(`${Za}naskah-dinas/naskah-keluar/${s}/send`,n).then(l=>l));ae(this,"getNomor",async s=>{const n=Ce.serializeObjectToQueryString(s);return await se.get(`${uf}tatanaskah/penomoran-otomatis/get-nomor?${n}`).then(l=>l)});ae(this,"convertDocToPdf",async s=>await se.post("https://api-dev.arsip.go.id/doc-conv/file/upload-and-convert",s,{headers:{"Content-Type":"multipart/form-data"}}).then(i=>i));ae(this,"sendKonseptor",async s=>await se.post(`${Za}forward/scriptwriter`,s).then(i=>i));ae(this,"sendVerifikator",async s=>await se.post(`${Za}forward/update`,s).then(i=>i));ae(this,"finishRevision",async s=>{var n="";return s.from=="verif"?n="-verifikasi":s.from=="ttd"&&(n="-tandatangan"),await se.post(`${Za}naskah-dinas/naskah-keluar/confirm-repair${n}`,s).then(l=>l)});ae(this,"getProgressStepsEditor",async()=>await se.get(`${Ni}text-editor/progress-steps`).then(t=>t));ae(this,"getProgressEditor",async s=>await se.get(`${Ni}text-editor/progress/${s}`).then(i=>i));ae(this,"deleteProgressEditor",async s=>await se.delete(`${Ni}text-editor/progress/${s}`).then(i=>i))}}const mf=a.createContext();function xf(){return a.useContext(mf)}function pf(r,s){const{borders:n}=r,{lastItem:t}=s,{borderWidth:i,borderColor:l}=n;return{"&:after":{content:!t&&"''",position:"absolute",top:"10%",left:"14px",height:"100%",borderRight:`${i[2]} solid ${l}`}}}function gf(r,s){const{palette:n,typography:t,functions:i}=r,{color:l}=s,{gradients:m,transparent:p}=n,{size:B,fontWeightMedium:K}=t,{linearGradient:W}=i;return{position:"absolute",top:"50%",left:"50%",transform:"translate(-52%, -50%)",fontSize:B.xl,fontWeight:K,zIndex:1,backgroundImage:W(m[l].main,m[l].state),WebkitBackgroundClip:"text",WebkitTextFillColor:p.main}}function Zn({color:r="info",badges:s=[],lastItem:n=!1,description:t="",deskripsi:i,children:l=e.jsx(e.Fragment,{}),icon:m,title:p,dateTime:B}){const K=xf(),W=(s||[]).length>0?s.map((z,T)=>{const L=`badge-${T}`;return e.jsx(ie,{mr:T===s.length-1?0:.5,children:e.jsx(be,{color:r,size:"xs",badgeContent:z,container:!0})},L)}):null;return e.jsxs(ie,{position:"relative",sx:z=>pf(z,{lastItem:n}),children:[e.jsx(ie,{bgColor:K?"dark":"white",width:"1.625rem",height:"1.625rem",borderRadius:"50%",position:"absolute",top:"3.25%",left:"2px",zIndex:2,children:e.jsx(Ss,{sx:z=>gf(z,{color:r}),children:m})}),e.jsxs(ie,{ml:5.75,pt:t?.7:.5,lineHeight:0,maxWidth:"30rem",children:[e.jsx(le,{variant:"button",fontWeight:"medium",color:K?"white":"dark",children:p}),e.jsx(ie,{mt:.5,children:e.jsx(le,{variant:"caption",fontWeight:"medium",color:K?"secondary":"text",children:B})}),e.jsxs(ie,{mt:2,mb:1.5,children:[t?e.jsx(le,{variant:"button",fontWeight:"regular",color:"text",children:t}):null,l]}),e.jsxs(ie,{mt:2,mb:1.5,children:[i?e.jsx(le,{variant:"button",fontWeight:"regular",color:"text",sx:{whiteSpace:"normal",textAlign:"justify",wordBreak:"break-word"},children:i}):null,l]}),(s||[]).length>0?e.jsx(ie,{display:"flex",pb:n?1:2,children:W}):null]})]})}Zn.propTypes={color:Z.oneOf(["primary","secondary","info","success","warning","error","dark","light"]),icon:Z.node.isRequired,title:Z.string,dateTime:Z.string.isRequired,description:Z.string,deskripsi:Z.string,badges:Z.arrayOf(Z.oneOfType([Z.string,Z.number])),lastItem:Z.bool,children:Z.element};const fd=({open:r,onClose:s,statusNaskah:n})=>e.jsxs(Fa,{open:r,onClose:s,children:[e.jsxs(_a,{className:"flex items-center gap-4",children:[e.jsx(Un,{size:"1.5em"}),e.jsx(le,{children:"Status Saat Ini"})]}),e.jsx(Na,{sx:{paddingX:"40px",paddingY:"0px"},children:e.jsx(Zn,{color:"success",icon:"circle",title:n==null?void 0:n.status,dateTime:na(n==null?void 0:n.created_at,3),description:`${n==null?void 0:n.nama} - ${n==null?void 0:n.jabatan} - ${n==null?void 0:n.instansi}`,lastItem:!0})}),e.jsx(ya,{children:e.jsx(_e,{color:"secondary",variant:"gradient",onClick:s,children:"Tutup"})})]}),ff=()=>{const r="Log Naskah Keluar",s=new URLSearchParams(location.search).get("statusVerif"),n=new URLSearchParams(location.search).get("statusTT"),t=new URLSearchParams(location.search).get("statusKirim"),i=new URLSearchParams(location.search).get("statusBerkas"),l=JSON.parse(Le.getItem("users")),[m,p]=a.useState(!1);a.useEffect(()=>{p(ge(r,"is_read",!0))},[]);const B=new Ts;ha();const[K,W]=a.useState(!1),[z,T]=a.useState(null),[L,$]=a.useState({total:0,from:1,to:1}),[M,H]=a.useState(!1),[V,A]=a.useState(null),[G,X]=a.useState({page:1,rows:10,user_id:l==null?void 0:l.id,sortField:"",sortOrder:null,filters:{tanggal:{value:""},nomor:{value:""},hal:{value:""},organisasi_created_nama:{value:""},status_verifikator:{value:s||""},status_penandatangan:{value:n||""},status_send:{value:t||""},status_berkas:{value:i||""}}}),[O,I]=a.useState(null);let _=[];z==null?_=[]:_=z.map((f,R)=>{var J,P,h,d;const u=Ps(f==null?void 0:f.id),D={formode:"Ubah",is_forward:f.is_forward,editor:!0,from:"log"},E=Ce.serializeObjectToQueryString(D);return{no:R+L.from,id:f.id,tanggal:f.tanggal,nomor:f.nomor,hal:f.hal,nama_full:`${f.user_created_nama} - ${f.jabatan_created_nama} - ${f.organisasi_created_nama}`,sender_user_nama:f.sender_user_nama,organisasi_created_nama:f.organisasi_created_nama,nama_pengirim:f.user_created_nama,jabatan_pengirim:f.jabatan_pengirim,status_verifikator:e.jsxs("div",{className:"flex flex-col gap-2",children:[!!f.verifikator_belum&&e.jsx(be,{badgeContent:`${f.verifikator_belum} BELUM`,color:"warning",container:!0}),!!f.verifikator_setuju&&e.jsx(be,{badgeContent:`${f.verifikator_setuju} SETUJU`,color:"success",container:!0}),!!f.verifikator_perbaiki&&e.jsx(be,{badgeContent:`${f.verifikator_perbaiki} DIPERBAIKI`,color:"warning",container:!0}),!!f.verifikator_tolak&&e.jsx(be,{badgeContent:`${f.verifikator_tolak} TOLAK`,color:"error",container:!0})]}),status_ttd:e.jsxs("div",{className:"flex flex-col gap-2",children:[!!f.penandatangan_belum&&e.jsx(be,{badgeContent:`${f.penandatangan_belum} BELUM`,color:"warning",container:!0}),!!f.penandatangan_setuju&&e.jsx(be,{badgeContent:`${f.penandatangan_setuju} SETUJU`,color:"success",container:!0}),!!f.penandatangan_perbaiki&&e.jsx(be,{badgeContent:`${f.penandatangan_perbaiki} DIPERBAIKI`,color:"warning",container:!0}),!!f.penandatangan_tolak&&e.jsx(be,{badgeContent:`${f.penandatangan_tolak} TOLAK`,color:"error",container:!0})]}),status_send:e.jsxs(e.Fragment,{children:[((J=f.status_send)==null?void 0:J.status)==="BELUM"&&e.jsx(be,{badgeContent:"BELUM",color:"warning",container:!0}),((P=f.status_send)==null?void 0:P.status)==="KIRIM"&&e.jsx(be,{badgeContent:"TERKIRIM",color:"success",container:!0}),((h=f.status_send)==null?void 0:h.status)==="BATAL"&&e.jsx(be,{badgeContent:"BATAL",color:"error",container:!0})]}),status_berkas:e.jsx(e.Fragment,{children:(d=f.berkas_naskah)!=null&&d.berkas?`${f.berkas_naskah.berkas.nomor} - ${f.berkas_naskah.berkas.nama}`:e.jsx(be,{badgeContent:"TIDAK ADA",color:"secondary",container:!0})}),action:e.jsxs("div",{className:"flex items-center justify-center gap-2 h-full w-full",children:[ge(r,"is_update")&&(f.is_draft||f.is_forward)&&e.jsx(va,{to:`form?id=${u}&${E}`,children:e.jsx(Va,{size:"1.5em",color:"#fbcf33",className:"cursor-pointer",title:"Edit"})}),e.jsx(va,{to:`detail?id=${u}`,children:e.jsx(Oa,{size:"1.5em",color:"#17c1e8",className:"cursor-pointer",title:"View"})}),e.jsx(Un,{size:"1.4em",color:"#344767",onClick:()=>F(f==null?void 0:f.timeline),className:"cursor-pointer",title:"Status Saat Ini"}),ge(r,"is_delete")&&(f.is_draft||f.is_forward)&&e.jsx($a,{size:"1.5em",color:"#e62e2d",onClick:()=>S(f),className:"cursor-pointer",title:"Hapus"})]})}}),a.useEffect(()=>{m&&C()},[G,m]);const C=async(f=!1)=>{f&&(G.page=1),W(!0),await B.getPaging(G).then(R=>{let u=R.data.result;u.data&&(I(u.last_page),T(u.data),W(!1)),W(!1),$({...L,to:u.to,from:u.from,total:u.total})}).catch(R=>{W(!1),$({...L,to:0,from:!1,total:0})})},k=Da((f,R,u=null)=>{if(u){let E=u.target;for(;E&&E.tagName!=="TD";)E=E.parentNode;if(E&&E.tagName==="TD"){const J=E.querySelector(".clear-input"),P=E.querySelector("input");R?J.classList.remove("hidden"):(J.classList.add("hidden"),P.value="")}}let D={...G};D.filters[f].value=R,D.page=1,X(D)},600),b=f=>{let R={...G};R.page=f,X(R),window.scrollTo({top:0,behavior:"smooth"})},y=f=>{let R={...G};R.rows=f,R.page=1,X(R)},o=f=>{let R={...G};R.sortField=f,G.sortField!=f?G.sortOrder==""&&(R.sortOrder=1):G.sortOrder==1?R.sortOrder=-1:(R.sortOrder="",R.sortField=""),R.page=1,X(R)},F=f=>{A(f),H(!0)},x=()=>{H(!1)},S=f=>{U.fire({title:"Konfirmasi",text:`Log Naskah ${f.nomor||"-"} akan dihapus ?`,icon:"warning",showCancelButton:!0,confirmButtonText:"Hapus",cancelButtonText:"Batal",customClass:{confirmButton:"button button-error",cancelButton:"button button-info"}}).then(R=>{R.isConfirmed&&(ka(),B.deleteNaskah({id:f.id}).then(u=>{u.status==200&&C(),U.fire("Berhasil","Data Berhasil Dihapus","success")}).catch(u=>{var E,J;const D=Oe(u.response.data.result);U.fire("Gagal",D??((J=(E=u.response)==null?void 0:E.data)==null?void 0:J.message),"error")}))}).finally(()=>U.close())};return e.jsxs(aa,{children:[e.jsx(la,{}),m&&e.jsxs(e.Fragment,{children:[e.jsx(ie,{pt:6,pb:3,children:e.jsxs(Me,{children:[e.jsx(ie,{px:3,pt:3,lineHeight:1,children:e.jsx(w,{container:!0,direction:"row",justifyContent:"space-between",alignItems:"center",children:e.jsx(w,{item:!0,children:e.jsxs(le,{variant:"h5",fontWeight:"medium",children:["Daftar ",r]})})})}),e.jsx("div",{className:"overflow-auto",children:e.jsxs("div",{className:"table p-10 min-w-full",children:[e.jsx("div",{className:"flex items-center justify-end mb-1",children:e.jsx(pa,{config:G,handleClick:y})}),e.jsxs("table",{className:"w-full text-sm text-left !text-gray-700 dark:text-gray-400 table-bordered",children:[e.jsx("thead",{className:"text-xs text-gray-500 uppercase border-b-2 mb-1",children:e.jsxs("tr",{children:[e.jsx(q,{text:"No",className:"flex justify-center"}),e.jsx(q,{text:"Tanggal Naskah",sortField:"tanggal",sortOrder:G.sortOrder,config:G,handleClick:()=>o("tanggal")}),e.jsx(q,{text:"Nomor Naskah",sortField:"nomor",sortOrder:G.sortOrder,config:G,handleClick:()=>o("nomor")}),e.jsx(q,{text:"Hal",sortField:"hal",sortOrder:G.sortOrder,config:G,handleClick:()=>o("hal")}),e.jsx(q,{text:"Asal Naskah"}),e.jsx(q,{text:"Status Verifikator"}),e.jsx(q,{text:"Status Penandatangan"}),e.jsx(q,{text:"Status Kirim"}),e.jsx(q,{text:"Status Berkas"}),e.jsx(q,{text:"Aksi",className:"flex justify-center min-w-[2rem]"})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{className:"border-b border-slate-300",children:[e.jsx("td",{className:"max-w-[20rem] py-6 px-2"}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"tanggal",onSearch:k,placeholder:"Tanggal Naskah",type:"input",isDate:!0})}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"nomor",onSearch:k,placeholder:"Nomor Naskah",type:"input"})}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"hal",onSearch:k,placeholder:"Hal",type:"input"})}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"organisasi_created_nama",onSearch:k,placeholder:"Asal Naskah",type:"input"})}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"status_verifikator",onSearch:k,placeholder:"Status Verifikator",type:"select",selectOption:$n,defaultValue:$n.find(f=>f.value==s)})}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"status_penandatangan",onSearch:k,placeholder:"Status Penandatangan",type:"select",selectOption:Rn,defaultValue:Rn.find(f=>f.value==n)})}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"status_send",onSearch:k,placeholder:"Status Kirim",type:"select",selectOption:Tt,defaultValue:Tt.find(f=>f.value==t)})}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"status_berkas",onSearch:k,placeholder:"Status Berkas",type:"select-input",selectOption:Ws,defaultValue:Ws.find(f=>f.value==i)})}),e.jsx("td",{})]}),K?e.jsx("tr",{className:"border-b border-slate-300",children:e.jsx("td",{colSpan:10,children:e.jsx(ia,{})})}):e.jsx(e.Fragment,{}),_.length?_.map((f,R)=>e.jsxs("tr",{className:"border-b border-slate-300",children:[e.jsx("td",{className:"px-6 py-6 text-center",children:f.no}),e.jsx("td",{className:"max-w-[10rem] flex-wrap px-6 py-6",children:na(f.tanggal,1)}),e.jsx("td",{className:"max-w-[10rem] flex-wrap px-6 py-6",children:f.nomor||"-"}),e.jsx("td",{className:"max-w-[10rem] flex-wrap px-6 py-6",children:f.hal}),e.jsx("td",{className:"max-w-[10rem] flex-wrap px-6 py-6",children:f.nama_full}),e.jsx("td",{className:"max-w-[10rem] flex-wrap px-6 py-6",children:f.status_verifikator}),e.jsx("td",{className:"max-w-[10rem] flex-wrap px-6 py-6",children:f.status_ttd}),e.jsx("td",{className:"max-w-[10rem] flex-wrap px-6 py-6",children:f.status_send}),e.jsx("td",{className:"max-w-[10rem] flex-wrap px-6 py-6",children:f.status_berkas}),e.jsxs("td",{className:"px-1 w-[2rem]",children:[" ",f.action," "]})]},R)):e.jsx(e.Fragment,{})]})]}),e.jsxs("nav",{className:"flex items-center justify-between p-4","aria-label":"Table navigation",children:[e.jsx("span",{className:"text-sm text-gray-400",children:L.from&&`Menampilkan ${Se(L.from)} sampai ${Se(L.to)} dari ${Se(L.total)} entri`}),e.jsx(xa,{currentPage:G.page,lastPage:O,displayCount:5,handleClick:b})]})]})})]})}),e.jsx(fd,{open:M,onClose:x,statusNaskah:V}),e.jsx(ua,{})]})]})};Z.string,Z.string.isRequired,Z.string,Z.bool,Z.string,Z.func.isRequired,Z.string,Z.string;const jf=fa().shape({instruksi_disposisi:vs().of(wa().required()).min(1,"Instruksi Disposisi harus diisi").required("Instruksi Disposisi harus diisi"),user_id:vs(),another_user_id:vs().test("is-required","Tujuan Lainnya harus diisi, jika Tujuan Disposisi tidak diisi",function(r){const s=this.parent.another_user_id;return this.parent.user_id.length==0&&(!s||s.length==0)?!!r&&r.length>0:!0})}),kf=fa().shape({user_id:vs().of(wa().required()).min(1,"Tujuan Lainnya harus diisi").required("Tujuan Lainnya harus diisi")}),rl=fa().shape({berkas_id:wa().required("Berkas harus dipilih")}),Zs=({onDateSelected:r})=>{const s=({startDate:n,endDate:t})=>e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center gap-2",children:[e.jsx("div",{className:"flex-1 border px-2 py-3 w-full rounded whitespace-nowrap ",children:n?na(n,2):"Pilih Tanggal Mulai"}),e.jsx("p",{className:"text-center",children:" - "}),e.jsx("div",{className:"flex-1 border px-2 py-3 w-full rounded whitespace-nowrap",children:t?na(t,2):"Pilih Tanggal Selesai"})]});return e.jsx(nh,{placeholder:s,onDateSelected:r})},yr=({open:r,onClose:s,berkasForm:n,handleSimpanBerkas:t,setSearchBerkas:i,isSubmit:l})=>e.jsxs(Fa,{open:r,onClose:s,children:[e.jsxs("div",{children:[e.jsxs(_a,{className:"flex items-center gap-2",children:[e.jsx(pt,{size:"1.5em"}),e.jsx(le,{children:" Form Pemberkasan"})]}),e.jsx(ca,{initialValues:n,onSubmit:t,validateOnChange:!0,validationSchema:rl,children:e.jsx(da,{id:"formBerkas",className:"text-sm",children:e.jsx("div",{className:"mb-6 px-2",children:e.jsx(w,{mt:1,children:e.jsx(Na,{children:e.jsx(ce,{name:"berkas_id",children:({field:m,form:p,meta:B})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Berkas",required:!0,error:B.error!=null}),e.jsx(ra,{url:"berkas/berkas-aktif/select-berkas",callbackChange:K=>{K?p.setFieldValue("berkas_id",(K==null?void 0:K.id)??""):p.resetForm()},callbackInputChange:K=>{i(K)},keyValue:["id","nama"],placeholder:"Pilih Berkas...",className:"text-base",targetService:"arsip"}),e.jsx(ue,{text:B.error,error:B.error!=null})]})})})})})})})]}),e.jsx(ya,{children:e.jsxs(e.Fragment,{children:[e.jsx(Je,{submit:l,color:"success",formId:"formBerkas",text:"Simpan"}),e.jsx(_e,{color:"error",variant:"gradient",onClick:s,children:"Batal"})]})})]}),bf=()=>{const r="Naskah Keluar",s=new URLSearchParams(location.search).get("statusVerif"),n=new URLSearchParams(location.search).get("statusTT"),t=new URLSearchParams(location.search).get("statusKirim"),i=new URLSearchParams(location.search).get("statusBerkas"),[l,m]=a.useState(!1);a.useEffect(()=>{m(ge(r,"is_read",!0,!0))},[]);const p=JSON.parse(Le.getItem("users")),B=new Gt;ha();const[K,W]=a.useState(!1),[z,T]=a.useState(null),[L,$]=a.useState(null);a.useRef(null);const[M,H]=a.useState(null),[V,A]=a.useState(null),[G,X]=a.useState(null),[O,I]=a.useState({start_at:"",end_at:""}),[_,C]=a.useState(!0),[k,b]=a.useState(!1),[y,o]=a.useState(!1),[F,x]=a.useState(null),[S,f]=a.useState({total:0,from:1,to:1}),[R,u]=a.useState({berkas_id:null,naskah_id:null,jenis:""}),[D,E]=a.useState("");let J=[];z==null?J=[]:J=z.map((ee,Y)=>{var ke,De;return{no:Y+S.from,id:ee.id,tanggal:ee.tanggal,nomor:ee.nomor,hal:ee.hal,nama_full:`${ee.user_created_nama} - ${ee.jabatan_created_nama} - ${ee.organisasi_created_nama}`,nama_pengirim:ee.user_created_nama,jabatan_pengirim:ee.jabatan_pengirim,instansi_pengirim:ee.organisasi_created_nama,urgensi_naskah_nama:ee.urgensi_naskah_nama,tindak_lanjut:ee.tindak_lanjut,read_status:ee.read_status,berkas:(ke=ee==null?void 0:ee.berkas_naskah)==null?void 0:ke.berkas,verifikator_belum:ee.verifikator_belum,verifikator_setuju:ee.verifikator_setuju,verifikator_tolak:ee.verifikator_tolak,penandatangan_belum:ee.penandatangan_belum,penandatangan_setuju:ee.penandatangan_setuju,penandatangan_tolak:ee.penandatangan_tolak,status_send:ee.status_send,action:e.jsxs("div",{className:"flex items-center justify-center gap-2 h-full w-full",children:[e.jsx(va,{to:`detail?id=${Ps(ee==null?void 0:ee.id)}`,children:e.jsx(Oa,{size:"1.5em",color:"#17c1e8",className:"cursor-pointer",title:"Lihat"})}),e.jsx(Un,{size:"1.4em",color:"#344767",onClick:()=>N(ee==null?void 0:ee.timeline),className:"cursor-pointer",title:"Status Saat Ini"}),!((De=ee==null?void 0:ee.berkas_naskah)!=null&&De.berkas)&&(p==null?void 0:p.group_role)!==4&&e.jsx(pt,{size:"1.5em",color:"#3f51b5",onClick:()=>Q(ee),className:"cursor-pointer",title:"Berkas"})]})}});const[P,h]=a.useState({page:1,rows:10,sortField:"",sortOrder:null,search:"",user_id:p==null?void 0:p.id,group_role:p==null?void 0:p.group_role,organisasi_id:p==null?void 0:p.organisasi_id,public_organisasi_id:p==null?void 0:p.public_organisasi_id,filters:{tanggal:{value:""},nomor:{value:""},hal:{value:""},organisasi_created_nama:{value:""},urgensi_naskah_nama:{value:""},"status_send.status":{value:""},status_berkas:{value:i||""},status_send:{value:t||""},status_verifikator:{value:s||""},status_penandatangan:{value:n||""}}});a.useEffect(()=>{d()},[P]);const d=async()=>{W(!0),await B.getPaging(P).then(ee=>{let Y=ee.data.result;Y.data&&($(Y.last_page),T(Y.data),W(!1)),W(!1),f({...S,to:Y.to,from:Y.from,total:Y.total})}).catch(ee=>{W(!1),f({...S,to:0,from:!1,total:0})})},j=Da((ee,Y,ke=null)=>{if(ke){let ta=ke.target;for(;ta&&ta.tagName!=="TD";)ta=ta.parentNode;if(ta&&ta.tagName==="TD"){const Be=ta.querySelector(".clear-input"),Fe=ta.querySelector("input");Y?Be.classList.remove("hidden"):(Be.classList.add("hidden"),Fe.value="")}}let De={...P};De.filters[ee].value=Y,De.page=1,h(De)},600),g=ee=>{let Y={...P};Y.page=ee,h(Y),window.scrollTo({top:0,behavior:"smooth"})},c=ee=>{let Y={...P};Y.rows=ee,Y.page=1,h(Y)},v=ee=>{let Y={...P};Y.sortField=ee,P.sortField!=ee?P.sortOrder==""&&(Y.sortOrder=1):P.sortOrder==1?Y.sortOrder=-1:(Y.sortOrder="",Y.sortField=""),Y.page=1,h(Y)},N=ee=>{x(ee),o(!0)},Q=ee=>{b(!0),u(Y=>({...Y,naskah_id:ee.id,jenis:"KELUAR"}))},re=ee=>{C(!1),B.postBerkas(ee).then(Y=>{var ke,De,ta;U.fire({icon:(ke=Y.data)!=null&&ke.success?"success":"warning",title:(De=Y.data)!=null&&De.success?"Berhasil":"Gagal",text:(ta=Y.data)==null?void 0:ta.message,showConfirmButton:!1,timer:1500}),Y.data.success&&(d(),xe())}).catch(Y=>{var ke,De,ta,Be;U.fire("Gagal",(De=(ke=Y.response)==null?void 0:ke.data)!=null&&De.result&&Y.response.data.result.length>0?Y.response.data.result[0]:(Be=(ta=Y.response)==null?void 0:ta.data)==null?void 0:Be.message,"error")}).finally(()=>C(!0))},ye=()=>{const Y=`/pembuatan-naskah-keluar/naskah-keluar/laporan?${Ce.serializeObjectToQueryString({start_at:O==null?void 0:O.start_at,end_at:O==null?void 0:O.end_at,jenis_id:(M==null?void 0:M.id)||"",sifat_id:(V==null?void 0:V.id)||"",klasifikasi_id:(G==null?void 0:G.id)||""})}`;window.open(Y,"_blank","noopener,noreferrer")},xe=()=>{b(!1)},fe=()=>{o(!1)},[Ge,$e]=a.useState(!0),[Pe,te]=a.useState(!1),[ne,pe]=a.useState([]),[he,oe]=a.useState([]),je=()=>{te(!1)},Ne=(ee,Y)=>{const{checked:ke}=ee.target;pe(De=>ke?De.length>=10?(U.fire({icon:"warning",title:"Batas Data Cheklist 10",text:"Anda tidak bisa mencentang lebih dari 10 data.",showConfirmButton:!1,timer:1500}),De):[...De,Y]:De.filter(ta=>ta!==Y))},[Re,sa]=a.useState({berkas_id:null,jenis:""}),Te=ee=>{oe(ne),te(!0),sa(Y=>({...Y,jenis:"KELUAR"}))},me=ee=>{$e(!1);const ke={berkas:he.map(De=>({berkas_id:ee.berkas_id,naskah_id:De,jenis:ee.jenis}))};B.postBerkasCheck(ke).then(De=>{var ta,Be,Fe;U.fire({icon:(ta=De.data)!=null&&ta.success?"success":"warning",title:(Be=De.data)!=null&&Be.success?"Berhasil":"Gagal",text:(Fe=De.data)==null?void 0:Fe.message,showConfirmButton:!1,timer:1500}),De.data.success&&(d(),je(),pe([]))}).catch(De=>{var Be,Fe;const ta=Oe(De.response.data.result);U.fire("Gagal",ta??((Fe=(Be=De.response)==null?void 0:Be.data)==null?void 0:Fe.message),"error")}).finally(()=>$e(!0))};return e.jsxs(aa,{children:[e.jsx(la,{}),l&&e.jsx(ie,{pt:6,pb:3,children:e.jsxs(Me,{children:[e.jsxs(ie,{px:3,pt:3,lineHeight:1,children:[e.jsx(w,{container:!0,direction:"row",justifyContent:"space-between",alignItems:"center",className:"mb-5",children:e.jsx(w,{item:!0,children:e.jsxs(le,{variant:"h5",fontWeight:"medium",children:["Daftar ",r]})})}),(p==null?void 0:p.group_role)!==4&&e.jsxs("div",{className:"flex flex-col 2xl:flex-row gap-4 2xl:gap-6 mb-4 2xl:items-center 2xl:justify-between",children:[e.jsx("div",{className:"w-60 2xl:w-1/4",children:e.jsx(le,{variant:"h6",fontWeight:"medium",children:"Buat Laporan"})}),e.jsxs("div",{className:"flex flex-col 2xl:flex-row gap-4",children:[e.jsx(Zs,{onDateSelected:(ee,Y)=>{I(ke=>({...ke,start_at:ee==null?void 0:ee.toISOString(),end_at:Y==null?void 0:Y.toISOString()}))}}),e.jsxs("div",{className:"flex flex-col lg:flex-row gap-2 items-center 2xl:justify-end 2xl:w-10/12",children:[e.jsx(ra,{url:"tatanaskah/jenis-naskah/select",selectedData:M,callbackChange:ee=>H(ee),keyValue:["id","jenis_naskah"],placeholder:"Pilih Jenis Naskah...",className:"text-sm w-full 2xl:w-fit mb-3 lg:mb-0 whitespace-nowrap",optionParam:{"select-target":"select-jenis-naskah-by-instansi",public_organisasi_id:p==null?void 0:p.public_organisasi_id},targetService:"master"}),e.jsx(ra,{url:"tatanaskah/sifat-naskah/select",selectedData:V,keyValue:["id","sifat_naskah"],callbackChange:ee=>A(ee),placeholder:"Pilih Sifat Naskah...",className:"text-sm w-full 2xl:w-fit mb-3 lg:mb-0 whitespace-nowrap",menuPortalTarget:null,optionParam:{"select-target":"select-sifat-naskah-by-unitkerja",public_organisasi_id:p==null?void 0:p.public_organisasi_id},isMulti:!1,targetService:"master"}),e.jsx(ra,{url:"klasifikasi/select",selectedData:G,keyValue:["id","kode_nama"],callbackChange:ee=>X(ee),placeholder:"Pilih Klasifikasi Naskah...",className:"text-sm w-full 2xl:w-fit  mb-3 lg:mb-0 whitespace-nowrap",menuPortalTarget:null,optionParam:{"select-target":"klasifikasi-by-unitkerja",role:p==null?void 0:p.role,organisasi_id:p==null?void 0:p.organisasi_id,public_organisasi_id:p==null?void 0:p.public_organisasi_id},isMulti:!1,targetService:"master"}),ge(r,"is_create",!1,!0)&&e.jsx("div",{className:"w-full lg:w-fit text-right",children:e.jsxs(_e,{variant:"gradient",color:"success",size:"small",onClick:ye,disabled:!O.start_at||!O.end_at,children:[e.jsx(Bs,{size:"2em",className:"pe-2"}),"Tampilkan"]})})]})]})]})]}),(p==null?void 0:p.group_role)!==4&&e.jsx(ie,{px:3,pt:3,lineHeight:1,children:e.jsx(w,{container:!0,justifyContent:"flex-end",alignItems:"flex-start",children:e.jsx(w,{item:!0,children:e.jsxs(_e,{variant:"gradient",color:"info",size:"small",onClick:()=>Te(),children:[e.jsx(Bs,{size:"2em",className:"pe-2"}),"Berkaskan"]})})})}),e.jsx("div",{className:"overflow-auto",children:e.jsxs("div",{className:"table p-10 min-w-full",children:[e.jsx("div",{className:"flex items-center justify-end mb-1",children:e.jsx(pa,{config:P,handleClick:c})}),e.jsxs("table",{className:"w-full text-sm text-left !text-gray-700 dark:text-gray-400 table-bordered",children:[e.jsx("thead",{className:"text-xs text-gray-500 uppercase border-b-2 mb-1",children:e.jsxs("tr",{children:[(p==null?void 0:p.group_role)!==4&&e.jsx(q,{text:"#",className:"flex justify-center"}),e.jsx(q,{text:"No",className:"flex justify-center"}),e.jsx(q,{text:"Tanggal Naskah",sortField:"tanggal",sortOrder:P.sortOrder,config:P,handleClick:()=>v("tanggal")}),e.jsx(q,{text:"Nomor Naskah",sortField:"nomor",sortOrder:P.sortOrder,config:P,handleClick:()=>v("nomor")}),e.jsx(q,{text:"Hal",sortField:"hal",sortOrder:P.sortOrder,config:P,handleClick:()=>v("hal")}),e.jsx(q,{text:"Asal Naskah"}),e.jsx(q,{text:"Status Verifikator"}),e.jsx(q,{text:"Status Penandatanganan"}),e.jsx(q,{text:"Status Kirim"}),e.jsx(q,{text:"Status Berkas"}),e.jsx(q,{text:"Aksi",className:"justify-center min-w-[2rem]"})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{className:"border-b border-slate-300",children:[(p==null?void 0:p.group_role)!==4&&e.jsx("td",{}),e.jsx("td",{}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"tanggal",onSearch:j,placeholder:"Tanggal Naskah",type:"input",isDate:!0})}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"nomor",onSearch:j,placeholder:"Nomor Naskah",type:"input"})}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"hal",onSearch:j,placeholder:"Hal",type:"input"})}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"organisasi_created_nama",onSearch:j,placeholder:"Asal Naskah",type:"input"})}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"status_verifikator",onSearch:j,placeholder:"Status Verifikator",type:"select",selectOption:$n,defaultValue:$n.find(ee=>ee.value==s)})}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"status_penandatangan",onSearch:j,placeholder:"Status Penandatangan",type:"select",selectOption:Rn,defaultValue:Rn.find(ee=>ee.value==n)})}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"status_send",onSearch:j,placeholder:"Status Kirim",type:"select",selectOption:Tt,defaultValue:Tt.find(ee=>ee.value==t)})}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"status_berkas",onSearch:j,placeholder:"Status Berkas",type:"select-input",selectOption:Ws,defaultValue:Ws.find(ee=>ee.value==i)})}),e.jsx("td",{})]}),K?e.jsx("tr",{children:e.jsx("td",{colSpan:10,children:e.jsx(ia,{})})}):e.jsx(e.Fragment,{}),J.length?J.map((ee,Y)=>{var ke,De;return e.jsxs("tr",{className:"border-b border-slate-300",children:[(p==null?void 0:p.group_role)!==4&&e.jsx("td",{className:"px-6 py-6",children:e.jsx("div",{className:"flex justify-center",children:ee.berkas?"":e.jsx("input",{type:"checkbox",className:"form-checkbox h-5 w-5 text-indigo-600",checked:ne.includes(ee.id),onChange:ta=>Ne(ta,ee.id)})})}),e.jsx("td",{className:"px-6 py-6 text-center",children:ee.no}),e.jsx("td",{className:" max-w-[9rem] px-6 py-6",children:e.jsx("div",{className:"flex-wrap",children:zs(ee.tanggal)})}),e.jsx("td",{className:" max-w-[9rem] px-6 py-6",children:e.jsx("div",{className:"flex-wrap",children:ee.nomor})}),e.jsx("td",{className:" max-w-[9rem] px-6 py-6",children:e.jsx("div",{className:"flex-wrap",children:ee.hal})}),e.jsx("td",{className:" max-w-[9rem] px-6 py-6",children:e.jsx("div",{className:"flex-wrap",children:ee.nama_full})}),e.jsx("td",{className:" max-w-[9rem] px-6 py-6 ",children:e.jsxs("div",{className:"flex flex-col gap-2",children:[ee.verifikator_belum?e.jsx(be,{badgeContent:`${ee.verifikator_belum} BELUM`,color:"warning",container:!0}):e.jsx(e.Fragment,{}),ee.verifikator_setuju?e.jsx(be,{badgeContent:`${ee.verifikator_setuju} SETUJU`,color:"success",container:!0}):e.jsx(e.Fragment,{}),ee.verifikator_tolak?e.jsx(be,{badgeContent:`${ee.verifikator_tolak} TOLAK`,color:"error",container:!0}):e.jsx(e.Fragment,{})]})}),e.jsx("td",{className:" max-w-[9rem] px-6 py-6 ",children:e.jsxs("div",{className:"flex flex-col gap-2",children:[ee.penandatangan_belum?e.jsx(be,{badgeContent:`${ee.penandatangan_belum} BELUM`,color:"warning",container:!0}):e.jsx(e.Fragment,{}),ee.penandatangan_setuju?e.jsx(be,{badgeContent:`${ee.penandatangan_setuju} SETUJU`,color:"success",container:!0}):e.jsx(e.Fragment,{}),ee.penandatangan_tolak?e.jsx(be,{badgeContent:`${ee.penandatangan_tolak} TOLAK`,color:"error",container:!0}):e.jsx(e.Fragment,{})]})}),e.jsx("td",{className:" max-w-[9rem] px-6 py-6",children:((ke=ee.status_send)==null?void 0:ke.status)=="KIRIM"?e.jsx(be,{badgeContent:"TERKIRIM",color:"success",container:!0}):((De=ee.status_send)==null?void 0:De.status)=="BELUM"?e.jsx(be,{badgeContent:"BELUM",color:"warning",container:!0}):e.jsx(be,{badgeContent:"BATAL",color:"error",container:!0})}),e.jsx("td",{className:" max-w-[9rem] px-6 py-6",children:ee.berkas?`${ee.berkas.nomor} - ${ee.berkas.nama}`:e.jsx(be,{badgeContent:"TIDAK ADA",color:"secondary",container:!0})}),e.jsxs("td",{className:"px-1 text-right w-[2rem]",children:[" ",ee.action," "]})]},Y)}):e.jsx(e.Fragment,{})]})]}),e.jsxs("nav",{className:"flex items-center justify-between p-4","aria-label":"Table navigation",children:[e.jsx("span",{className:"text-sm text-gray-400",children:S.from&&`Menampilkan ${Se(S.from)} sampai ${Se(S.to)} dari ${Se(S.total)} entri`}),e.jsx(xa,{currentPage:P.page,lastPage:L,displayCount:5,handleClick:g})]})]})})]})}),e.jsx(ua,{}),e.jsx(fd,{open:y,onClose:fe,statusNaskah:F}),e.jsx(yr,{open:k,onClose:xe,berkasForm:R,handleSimpanBerkas:re,setSearchBerkas:E,isSubmit:_}),e.jsxs(Fa,{open:Pe,onClose:je,children:[e.jsxs("div",{children:[e.jsxs(_a,{className:"flex items-center gap-2",children:[e.jsx(pt,{size:"1.5em"}),e.jsx(le,{children:" Form Pemberkasan"})]}),e.jsx(ca,{initialValues:Re,onSubmit:me,validateOnChange:!0,validationSchema:rl,children:e.jsx(da,{id:"formBerkasBox",className:"text-sm",children:e.jsx("div",{className:"mb-6 px-2",children:e.jsx(w,{mt:1,children:e.jsx(Na,{children:e.jsx(ce,{name:"berkas_id",children:({field:ee,form:Y,meta:ke})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Berkas",required:!0,error:ke.error!=null}),e.jsx(ra,{url:"berkas/berkas-aktif/list",callbackChange:De=>{De?Y.setFieldValue("berkas_id",(De==null?void 0:De.id)??""):Y.resetForm()},callbackInputChange:De=>{E(De)},keyValue:["id","nama"],placeholder:"Pilih Berkas...",className:"text-base",targetService:"arsip",menuPortalTarget:null,optionParam:{organisasi_id:p==null?void 0:p.organisasi_id,public_organisasi_id:p==null?void 0:p.public_organisasi_id,group_role_id:p==null?void 0:p.group_role,"filters[status][value]":"BUKA","filters[nama][value]":D}}),e.jsx(ue,{text:ke.error,error:ke.error!=null})]})})})})})})})]}),e.jsx(ya,{children:e.jsxs(e.Fragment,{children:[e.jsx(Je,{submit:Ge,color:"success",formId:"formBerkasBox",text:"Simpan"}),e.jsx(_e,{color:"error",variant:"gradient",onClick:()=>te(!1),children:"Batal"})]})})]})]})},Fs="https://api.arsip.go.id/naskah-masuk/api/";class Nr{constructor(){ae(this,"getPaging",async s=>{const n=Ce.serializeObjectToQueryString(s);return await se.get(`${Fs}log-naskah/log-naskah-masuk?${n}`).then(l=>l)});ae(this,"getDetail",async(s,n)=>{const t=Ce.serializeObjectToQueryString(n);return await se.get(`${Fs}log-naskah/log-naskah-masuk/${s}?${t}`).then(m=>m)});ae(this,"getHistori",async s=>await se.get(`${Fs}histori/naskah-masuk/${s}`).then(i=>i));ae(this,"post",async(s,n)=>await se.post(`${Fs}log-naskah/log-naskah-masuk/${s}/update`,n,{headers:{"Content-Type":"multipart/form-data"}}).then(l=>l));ae(this,"deleteLog",async s=>await se.delete(`${Fs}log-naskah/log-naskah-masuk/${s}`).then(i=>i));ae(this,"getPagingPenerima",async s=>{const n=Ce.serializeObjectToQueryString(s);return await se.get(`${Fs}naskah-dinas/tujuan-naskah?${n}`).then(l=>l)});ae(this,"postPenerima",async s=>await se.post(`${Fs}naskah-dinas/tujuan-naskah`,s).then(i=>i));ae(this,"deletePenerima",async s=>await se.delete(`${Fs}naskah-dinas/tujuan-naskah/${s}`).then(i=>i));ae(this,"getPagingLampiran",async s=>{const n=Ce.serializeObjectToQueryString(s);return await se.get(`${Fs}naskah-dinas/lampiran?${n}`).then(l=>l)});ae(this,"getDetailLampiran",async s=>await se.get(`${Fs}naskah-dinas/lampiran/${s}`).then(i=>i));ae(this,"postLampiran",async s=>await se.post(`${Fs}naskah-dinas/lampiran`,s,{headers:{"Content-Type":"multipart/form-data"}}).then(i=>i));ae(this,"deleteLampiran",async s=>await se.delete(`${Fs}naskah-dinas/lampiran/${s}`).then(i=>i));ae(this,"sending",async s=>await se.post(`${Fs}log-naskah/log-naskah-masuk/sending-letters-masuk/${s}`).then(i=>i));ae(this,"readTindakLanjut",async s=>await se.post(`${Fs}naskah-dinas/disposisi/${s}/read`).then(i=>i))}}const Ds="https://api.arsip.go.id/naskah-masuk/api/",co="https://api.arsip.go.id/arsip/api/";class js{constructor(){ae(this,"postRegistrasiNaskahMasuk",async s=>await se.post(`${Ds}naskah-dinas/registrasi-naskah-dinas-masuk`,s,{headers:{"Content-Type":"multipart/form-data"}}).then(i=>i));ae(this,"getPaging",async s=>{const n=Ce.serializeObjectToQueryString(s);return await se.get(`${Ds}naskah-dinas/naskah-masuk?${n}`).then(l=>l)});ae(this,"detail",async(s,n)=>{const t=Ce.serializeObjectToQueryString(n);return await se.get(`${Ds}log-naskah/log-naskah-masuk/${s}?${t}`).then(m=>m.data.result)});ae(this,"getContent",async s=>await se.post(`${Ds}naskah-dinas/naskah-masuk/get-content-file`,s).then(i=>i.data.result));ae(this,"syncContent",async s=>await se.post(`${Ds}naskah-dinas/naskah-masuk/sync-content-file`,s).then(i=>i.data.result));ae(this,"getHistori",async(s,n)=>{const t=Ce.serializeObjectToQueryString(n);return await se.get(`${Ds}histori/naskah-masuk/${s}?${t}`).then(m=>m)});ae(this,"tindakLanjut",async s=>await se.post(`${Ds}naskah-dinas/tindak-lanjut`,s).then(i=>i));ae(this,"disposisi",async(s,n)=>await se.post(`${Ds}naskah-dinas/naskah-masuk/${s}/tindak-lanjut/disposisi`,n,{headers:{"Content-Type":"multipart/form-data"}}).then(l=>l));ae(this,"deleteDisposisi",async s=>await se.delete(`${Ds}naskah-dinas/tindak-lanjut/${s}`).then(i=>i));ae(this,"tembusanList",async s=>{const n=Ce.serializeObjectToQueryString(s);return await se.get(`${Ds}naskah-dinas/masuk-tembusan?${n}`).then(l=>l)});ae(this,"postBerkas",async s=>await se.post(`${co}berkas/berkas-naskah`,s).then(i=>i));ae(this,"postBerkasCheck",async s=>await se.post(`${co}berkas/berkas-naskah/store-check`,s).then(i=>i));ae(this,"getLaporan",async s=>{const n=Ce.serializeObjectToQueryString(s);return await se.get(`${Ds}laporan/naskah-masuk?${n}`).then(l=>l)});ae(this,"downloadLaporanPdf",async s=>{const n=Ce.serializeObjectToQueryString(s);return await se.get(`${Ds}laporan/naskah-masuk/pdf?${n}`,{responseType:"blob",headers:{"Content-Type":"application/pdf"}}).then(l=>l)});ae(this,"downloadLaporanExcel",async s=>{const n=Ce.serializeObjectToQueryString(s);return await se.get(`${Ds}laporan/naskah-masuk/excel?${n}`,{responseType:"blob",headers:{"Content-Type":"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}}).then(l=>l)});ae(this,"printTindakLanjut",async s=>await se.get(`${Ds}naskah-dinas/tindak-lanjut/print/${s}`,{responseType:"blob",headers:{"Content-Type":"application/pdf"}}).then(i=>i))}}const Wt=({naskah_id:r,refresh:s})=>{const[n,t]=a.useState(!1),i=JSON.parse(Le.getItem("users")),l=new js;ha();const[m,p]=a.useState(!1),[B,K]=a.useState(null),[W,z]=a.useState(null),[T,L]=a.useState({total:0,from:1,to:1});a.useEffect(()=>{r&&t(!0)},[]);let $=[];const M=["DISPOSISI","KOORDINASI","ARAHAN","DISPOSISI SELESAI","KOORDINASI SELESAI","ARAHAN SELESAI","NASKAH TEMBUSAN SELESAI","NASKAH MASUK SELESAI"],H=["DISPOSISI","ARAHAN","KOORDINASI"];B==null?$=[]:$=B.map(k=>{var b,y,o,F;return{id:k.id,tindak_lanjut_id:k.tindak_lanjut_id,user_id:k.user_id,tanggal:k.created_at,organisasi_id:k.organisasi_id,pengirim:M.includes(k.jenis_naskah)?k.pengirim:(b=k.naskah_masuk)==null?void 0:b.nama_pengirim,asal:M.includes(k.jenis_naskah)?k.asal:((y=k.naskah_masuk)==null?void 0:y.nama_pengirim)+" - "+((o=k.naskah_masuk)==null?void 0:o.jabatan_pengirim),histori_tujuan:k.histori_tujuan,jenis_naskah:k.jenis_naskah,pesan:k==null?void 0:k.pesan,visible:!!((k==null?void 0:k.user_id)===(i==null?void 0:i.id)||(k==null?void 0:k.organisasi_id)===(i==null?void 0:i.organisasi_id)||(F=k==null?void 0:k.histori_tujuan)!=null&&F.some(x=>x.user_id===(i==null?void 0:i.id))),histori_lampiran:k.histori_lampiran,created_at:k.created_at,filename:k.file,folder:k.file_path}});const[V,A]=a.useState({page:1,rows:10,sortField:"",sortOrder:null,search:"",filters:{tanggal:{value:""},pengirim:{value:""},asal:{value:""},histori_tujuan:{value:""},jenis_naskah:{value:""},pesan:{value:""},histori_lampiran:{value:""},file_url:{value:""}}});a.useEffect(()=>{r&&G()},[V,!!s,r]);const G=async()=>{p(!0),await l.getHistori(r,V).then(k=>{let b=k.data.result;b.data&&(z(b.last_page),K(b.data),p(!1)),p(!1),L({...T,to:b.to,from:b.from,total:b.total})}).catch(k=>{p(!1),L({...T,to:0,from:!1,total:0})})},X=Da((k,b,y=null)=>{if(y){let F=y.target;for(;F&&F.tagName!=="TD";)F=F.parentNode;if(F&&F.tagName==="TD"){const x=F.querySelector(".clear-input"),S=F.querySelector("input");b?x.classList.remove("hidden"):(x.classList.add("hidden"),S.value="")}}let o={...V};o.filters[k].value=b,o.page=1,A(o)},600),O=k=>{let b={...V};b.page=k,A(b),window.scrollTo({top:0,behavior:"smooth"})},I=k=>{let b={...V};b.rows=k,b.page=1,A(b)},_=k=>{let b={...V};b.sortField=k,V.sortField!=k?V.sortOrder==""&&(b.sortOrder=1):V.sortOrder==1?b.sortOrder=-1:(b.sortOrder="",b.sortField=""),b.page=1,A(b)},C=k=>{U.fire({title:`Print ${tt(k.jenis_naskah)}`,icon:"warning",showCancelButton:!0,reverseButtons:!0,confirmButtonText:"Lanjutkan",cancelButtonText:"Batal",customClass:{confirmButton:"button button-info",cancelButton:"button button-secondary"}}).then(async b=>{b.isConfirmed&&(ka(),await l.printTindakLanjut(k.tindak_lanjut_id).then(y=>{tn(y.data),U.close()}))})};return e.jsx(e.Fragment,{children:n&&e.jsx(w,{mt:2,children:e.jsx("div",{className:"overflow-auto",children:e.jsxs("div",{className:"table min-w-full",children:[e.jsx("div",{className:"flex items-center justify-end mb-1",children:e.jsx(pa,{config:V,handleClick:I})}),e.jsxs("table",{className:"w-full text-sm text-left !text-gray-700 dark:text-gray-400 table-bordered",children:[e.jsx("thead",{className:"text-xs text-gray-500 uppercase border-b-2 mb-1",children:e.jsxs("tr",{children:[e.jsx(q,{text:"Tanggal",sortField:"tanggal",sortOrder:V.sortOrder,config:V,handleClick:()=>_("tanggal")}),e.jsx(q,{text:"Pengirim",sortField:"pengirim",sortOrder:V.sortOrder,config:V,handleClick:()=>_("pengirim")}),e.jsx(q,{text:"Asal",sortField:"asal",sortOrder:V.sortOrder,config:V,handleClick:()=>_("asal")}),e.jsx(q,{text:"Tujuan",sortField:"histori_tujuan",sortOrder:V.sortOrder,config:V,handleClick:()=>_("histori_tujuan")}),e.jsx(q,{text:"Jenis",sortField:"jenis_naskah",sortOrder:V.sortOrder,config:V,handleClick:()=>_("jenis_naskah")}),e.jsx(q,{text:"Hal",sortField:"hal",sortOrder:V.sortOrder,config:V,handleClick:()=>_("hal")}),e.jsx(q,{text:"Lampiran",className:"justify-center"})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{className:"border-b border-slate-300",children:[e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"tanggal",onSearch:X,placeholder:"Tanggal",type:"input",isDate:!0})}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"pengirim",onSearch:X,placeholder:"Pengirim",type:"input"})}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"asal",onSearch:X,placeholder:"Asal",type:"input"})}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"histori_tujuan",onSearch:X,placeholder:"Tujuan",type:"input"})}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"jenis_naskah",onSearch:X,placeholder:"Jenis",type:"input"})}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"pesan",onSearch:X,placeholder:"Pesan",type:"input"})}),e.jsx("td",{})]}),m?e.jsx("tr",{children:e.jsx("td",{colSpan:8,children:e.jsx(ia,{})})}):e.jsx(e.Fragment,{}),$.length?$.map((k,b)=>{var y,o,F,x,S,f,R,u,D;return e.jsxs("tr",{className:"border-b border-slate-300 align-top cursor-default",children:[e.jsx("td",{className:" max-w-[9rem] px-6 py-6",children:e.jsx("div",{className:"flex-wrap",children:Ns(k.tanggal)})}),e.jsx("td",{className:" max-w-[9rem] px-6 py-6",children:e.jsx("div",{className:"flex-wrap",children:k.pengirim})}),e.jsx("td",{className:" max-w-[9rem] px-6 py-6",children:e.jsx("div",{className:"flex-wrap",children:k.asal})}),e.jsx("td",{className:" max-w-[9rem] px-6 py-6",children:e.jsx("div",{className:"flex flex-wrap gap-4",children:!((y=k.histori_tujuan)!=null&&y.length)||(o=k.jenis_naskah)!=null&&o.includes("SELESAI")?"-":e.jsxs(e.Fragment,{children:[!!((x=(F=k.histori_tujuan)==null?void 0:F.filter(E=>E.jenis==="UTAMA"))!=null&&x.length)&&e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("p",{children:e.jsx("b",{children:"UTAMA"})}),k.histori_tujuan.filter(E=>E.jenis==="UTAMA").map(E=>e.jsxs("div",{className:"flex flex-wrap",children:[e.jsx(be,{badgeContent:E.is_read?"SUDAH BACA":"BELUM BACA",color:E.is_read?"success":"warning",container:!0}),e.jsxs("span",{children:[E.nama," - ",E.jabatan]})]},E.id))]}),!!((f=(S=k.histori_tujuan)==null?void 0:S.filter(E=>E.jenis==="TEMBUSAN"))!=null&&f.length)&&e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("p",{children:e.jsx("b",{children:"TEMBUSAN"})}),k.histori_tujuan.filter(E=>E.jenis==="TEMBUSAN").map(E=>e.jsxs("div",{className:"flex flex-wrap",children:[e.jsx(be,{badgeContent:E.is_read?"SUDAH BACA":"BELUM BACA",color:E.is_read?"success":"warning",container:!0}),e.jsxs("span",{children:[E.nama," - ",E.jabatan]})]},E.id))]}),!k.jenis_naskah.includes(" SELESAI")&&!!((u=(R=k.histori_tujuan)==null?void 0:R.filter(E=>E.jenis===null))!=null&&u.length)&&e.jsx("div",{className:"flex flex-col gap-2",children:k.histori_tujuan.filter(E=>E.jenis===null).map(E=>e.jsxs("div",{className:"flex flex-wrap",children:[e.jsx(be,{badgeContent:E.is_read?"SUDAH BACA":"BELUM BACA",color:E.is_read?"success":"warning",container:!0}),e.jsxs("span",{children:[E.nama," - ",E.jabatan]})]},E.id))})]})})}),e.jsxs("td",{className:"max-w-[9rem] px-6 py-6",children:[e.jsx("div",{className:"flex-wrap",children:k.jenis_naskah}),e.jsx("div",{className:"flex justify-center mt-3",children:k.visible&&H.includes(k.jenis_naskah)&&e.jsx(ts,{className:"text-lg text-red-600 cursor-pointer",onClick:()=>C(k)})})]}),e.jsx("td",{className:"max-w-[9rem] px-6 py-6",children:e.jsxs("div",{className:"flex-wrap",children:[k.visible&&k.pesan&&k.pesan.split("||").map((E,J)=>e.jsx("div",{className:"mb-1",children:E},J)),!k.visible&&e.jsx("p",{className:"text-center",children:"***"})]})}),e.jsx("td",{className:" max-w-[9rem] px-6 py-6 ",children:(k==null?void 0:k.user_id)===(i==null?void 0:i.id)||(D=k==null?void 0:k.histori_tujuan)!=null&&D.some(E=>E.user_id===(i==null?void 0:i.id))||(k==null?void 0:k.organisasi_id)===(i==null?void 0:i.organisasi_id)?e.jsx("div",{className:"flex flex-col gap-2",children:k.histori_lampiran.length>0?e.jsx("ul",{className:"flex px-0 gap-2",children:k.histori_lampiran.map(E=>e.jsx("li",{title:E.nama,onClick:()=>Wa(E.file,E.file_path??"lampiran"),className:"hover:underline list-none cursor-pointer break-all text-blue-500",children:e.jsx(Pu,{size:18})},E.id))}):e.jsx(be,{badgeContent:"Tidak ada",color:"secondary",container:!0})}):e.jsx("div",{className:"flex justify-center",children:"***"})})]},k.id)}):e.jsx("tr",{children:e.jsx("td",{colSpan:8,className:"text-sm text-gray-400 text-center py-4",children:"Tidak ada data yang tersedia pada tabel ini"})})]})]}),e.jsxs("nav",{className:"flex items-center justify-between p-4","aria-label":"Table navigation",children:[e.jsx("span",{className:"text-sm text-gray-400",children:T.from&&`Menampilkan ${Se(T.from)} sampai ${Se(T.to)} dari ${Se(T.total)} entri`}),e.jsx(xa,{currentPage:V.page,lastPage:W,displayCount:5,handleClick:O})]})]})})})})};Wt.propTypes={naskah_id:Z.number};const uo="https://api.arsip.go.id/naskah-masuk/api/";class ei{constructor(){ae(this,"getPaging",async s=>{const n=Ce.serializeObjectToQueryString(s);return await se.get(`${uo}naskah-dinas/disposisi/list?${n}`).then(l=>l)});ae(this,"getLogPaging",async s=>{const n=Ce.serializeObjectToQueryString(s);return await se.get(`${uo}naskah-dinas/log-disposisi?${n}`).then(l=>l)})}}const _f=({dataTable:r,loading:s,setRefreshDetail:n,lazyState:t,setLazyState:i})=>{JSON.parse(Le.getItem("users"));const l=new js,[m,p]=a.useState(!1),[B,K]=a.useState(null),[W,z]=a.useState([]),[T,L]=a.useState(null),[$,M]=a.useState({total:0,from:1,to:1});let H=[];B==null?H=[]:H=B==null?void 0:B.map(_=>{var C;return{id:_.id,naskah_masuk_id:_.naskah_masuk_id,jenis:_.jenis,created_at:_.created_at,user_nama:_.user_nama,jabatan_nama:_.jabatan_nama,organisasi_nama:_.organisasi_nama,disposisi:_.disposisi,lampiran:(C=_==null?void 0:_.histori_naskah)==null?void 0:C.histori_lampiran}}),a.useEffect(()=>{r.data&&(L(r.last_page),K(r.data)),M({...$,to:r.to,from:r.from,total:r.total})},[r]);const V=Da((_,C,k=null)=>{if(k){let y=k.target;for(;y&&y.tagName!=="TD";)y=y.parentNode;if(y&&y.tagName==="TD"){const o=y.querySelector(".clear-input"),F=y.querySelector("input");C?o.classList.remove("hidden"):(o.classList.add("hidden"),F.value="")}}let b={...t};b.filters[_].value=C,b.page=1,i(b)},600),A=_=>{let C={...t};C.page=_,i(C),window.scrollTo({top:0,behavior:"smooth"})},G=_=>{let C={...t};C.rows=_,C.page=1,i(C)},X=_=>{let C={...t};C.sortField=_,t.sortField!=_?t.sortOrder==""&&(C.sortOrder=1):t.sortOrder==1?C.sortOrder=-1:(C.sortOrder="",C.sortField=""),C.page=1,i(C)},O=_=>{U.fire({title:"Konfirmasi",text:`Disposisi kepada ${_.user_nama} akan dibatalkan ?`,icon:"warning",showCancelButton:!0,confirmButtonText:"Hapus",cancelButtonText:"Batal",customClass:{confirmButton:"button button-error",cancelButton:"button button-info"}}).then(C=>{C.isConfirmed&&(ka(),l.deleteDisposisi(_.id).then(k=>{k.status&&(U.fire("Berhasil","Disposisi Berhasil Dibatalkan","success"),n(b=>b+1))}).catch(k=>{var y,o;const b=Oe(k.response.data.result);U.fire("Gagal",b??((o=(y=k.response)==null?void 0:y.data)==null?void 0:o.message),"error")}))})},I=_=>{U.fire({title:"Print Disposisi",icon:"warning",showCancelButton:!0,reverseButtons:!0,confirmButtonText:"Lanjutkan",cancelButtonText:"Batal",customClass:{confirmButton:"button button-info",cancelButton:"button button-secondary"}}).then(async C=>{C.isConfirmed&&(ka(),await l.printTindakLanjut(_.id).then(k=>{console.log(k),`${Ei(_.tanggal).format("YYYY-MM-DD")}`,tn(k.data),U.close()}))})};return e.jsx(e.Fragment,{children:e.jsx(w,{mt:2,children:e.jsx("div",{className:"overflow-auto",children:e.jsxs("div",{className:"table min-w-full",children:[e.jsx("div",{className:"flex items-center justify-end mb-1",children:e.jsx(pa,{config:t,handleClick:G})}),e.jsxs("table",{className:"w-full text-sm text-left !text-gray-700 dark:text-gray-400 table-bordered",children:[e.jsx("thead",{className:"text-xs text-gray-500 uppercase border-b-2 mb-1",children:e.jsxs("tr",{children:[e.jsx(q,{text:"Dilakukan Oleh",sortField:"user_nama",sortOrder:t.sortOrder,config:t,handleClick:()=>X("user_nama")}),e.jsx(q,{text:"Kepada",sortField:"kepada",sortOrder:t.sortOrder,config:t,handleClick:()=>X("kepada")}),e.jsx(q,{text:"Pesan Disposisi",sortField:"catatan",sortOrder:t.sortOrder,config:t,handleClick:()=>X("catatan")}),e.jsx(q,{text:"Instruksi / Pesan Tambahan"}),e.jsx(q,{text:"Lampiran",className:"justify-center"}),e.jsx(q,{text:"Tanggal Disposisi",sortField:"created_at",sortOrder:t.sortOrder,config:t,handleClick:()=>X("created_at")}),e.jsx(q,{text:"Batas Waktu",sortField:"tanggal_selesai",sortOrder:t.sortOrder,config:t,handleClick:()=>X("tanggal_selesai")}),e.jsx(q,{text:"Status Baca"}),e.jsx(q,{text:"#",className:"justify-center"})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{className:"border-b border-slate-300",children:[e.jsx("td",{className:"max-w-[20rem] py-6 px-2"}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"kepada",onSearch:V,placeholder:"Kepada",type:"input"})}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"catatan",onSearch:V,placeholder:"Pesan Disposisi / Koordinasi",type:"input"})}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"instruksi",onSearch:V,placeholder:"Intruksi / Pesan Tambahan",type:"input"})}),e.jsx("td",{}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2"}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2"}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2"}),e.jsx("td",{})]}),s?e.jsx("tr",{children:e.jsx("td",{colSpan:9,children:e.jsx(ia,{})})}):e.jsx(e.Fragment,{}),H.length?H.map(_=>{var C;return(C=_.disposisi)==null?void 0:C.map((k,b)=>{var y,o,F,x,S;return e.jsxs("tr",{className:"border-b border-slate-300",children:[e.jsx("td",{className:" max-w-[9rem] px-6 py-6",children:e.jsx("div",{className:"flex-wrap",children:_.user_nama})}),e.jsx("td",{className:"max-w-[9rem] px-6 py-6",children:e.jsx("div",{className:"flex-wrap",children:k.user_nama})}),e.jsx("td",{className:"px-6 py-6",children:e.jsx("div",{className:"flex flex-col",children:k.disposisi_instruksi.length?e.jsxs(e.Fragment,{children:[(y=k.disposisi_instruksi)==null?void 0:y.map(f=>e.jsx("div",{className:"flex flex-col items-center gap-2",children:e.jsxs("div",{className:"flex items-start justify-start gap-2 w-full",children:[e.jsx(Io,{size:"1.5rem",color:"#4caf50",className:"w-5 h-5 flex-shrink-0 "}),e.jsx("p",{className:"text-left",children:f==null?void 0:f.intruksi_nama})]})},f.id)),e.jsx(ts,{className:"text-lg text-red-600 cursor-pointer mt-2",onClick:()=>I(_)})]}):e.jsx(be,{badgeContent:"TIDAK ADA",color:"secondary",container:!0})})}),e.jsx("td",{className:"max-w-[9rem] px-6 py-6",children:((F=(o=k.disposisi_instruksi)==null?void 0:o[0])==null?void 0:F.catatan)||e.jsx(be,{badgeContent:"TIDAK ADA",color:"secondary",container:!0})}),e.jsx("td",{className:"max-w-[9rem] px-6 py-6 flex-wrap",children:((x=_==null?void 0:_.lampiran)==null?void 0:x.length)>0?e.jsx("ul",{children:(S=_==null?void 0:_.lampiran)==null?void 0:S.map(f=>e.jsx("li",{onClick:()=>Wa(f.file,f.file_path??"lampiran"),className:"hover:underline cursor-pointer break-all text-blue-500 mb-2",children:e.jsx("p",{className:"truncate",children:f.nama})},f.id))}):e.jsx("div",{className:"text-center",children:e.jsx(be,{badgeContent:"TIDAK ADA",color:"secondary",container:!0})})}),e.jsx("td",{className:"max-w-[9rem] px-6 py-6",children:e.jsx("div",{className:"flex-wrap",children:na(k.created_at)})}),e.jsx("td",{className:"max-w-[9rem] px-6 py-6",children:e.jsx("div",{className:"flex-wrap",children:na(k.tanggal_selesai)})}),e.jsx("td",{className:"px-6 py-6 text-center",children:k.is_read?e.jsx("div",{className:"flex-wrap",children:e.jsx(be,{badgeContent:"SUDAH",color:"success",container:!0})}):e.jsx("div",{className:"flex-wrap",children:e.jsx(be,{badgeContent:"BELUM",color:"secondary",container:!0})})}),e.jsx("td",{className:"px-6 py-6 flex-wrap",children:!k.is_read&&e.jsx("button",{onClick:()=>O(k),children:e.jsx($a,{size:"1.5em",className:"text-red-700"})})})]},b)})}):e.jsx("tr",{children:e.jsx("td",{colSpan:9,className:"text-sm text-gray-400 text-center py-4",children:"Tidak ada data yang tersedia pada tabel ini"})})]})]}),e.jsxs("nav",{className:"flex items-center justify-between p-4","aria-label":"Table navigation",children:[e.jsx("span",{className:"text-sm text-gray-400",children:$.from&&`Menampilkan ${Se($.from)} sampai ${Se($.to)} dari ${Se($.total)} entri`}),e.jsx(xa,{currentPage:t.page,lastPage:T,displayCount:5,handleClick:A})]})]})})})})},yf=({dataTable:r,loading:s,setRefreshDetail:n,lazyState:t,setLazyState:i})=>{JSON.parse(Le.getItem("users"));const[l,m]=a.useState(!1),[p,B]=a.useState(null),[K,W]=a.useState(null),[z,T]=a.useState({total:0,from:1,to:1});let L=[];p==null?L=[]:L=p.map(A=>({id:A.id,user_nama:A.user_created_nama,kepada:A==null?void 0:A.tujuan,tanggal_balas:A.created_at,action:e.jsx("div",{className:"flex items-center justify-center gap-3 h-full w-full"})})),a.useEffect(()=>{r.data&&(W(r.last_page),B(r.data)),T({...z,to:r.to,from:r.from,total:r.total})},[r]);const $=Da((A,G,X=null)=>{if(X){let I=X.target;for(;I&&I.tagName!=="TD";)I=I.parentNode;if(I&&I.tagName==="TD"){const _=I.querySelector(".clear-input"),C=I.querySelector("input");G?_.classList.remove("hidden"):(_.classList.add("hidden"),C.value="")}}let O={...t};O.filters[A].value=G,O.page=1,i(O)},600),M=A=>{let G={...t};G.page=A,i(G),window.scrollTo({top:0,behavior:"smooth"})},H=A=>{let G={...t};G.rows=A,G.page=1,i(G)},V=A=>{let G={...t};G.sortField=A,t.sortField!=A?t.sortOrder==""&&(G.sortOrder=1):t.sortOrder==1?G.sortOrder=-1:(G.sortOrder="",G.sortField=""),G.page=1,i(G)};return e.jsx(e.Fragment,{children:e.jsx(w,{mt:2,children:e.jsx("div",{className:"overflow-auto",children:e.jsxs("div",{className:"table min-w-full",children:[e.jsx("div",{className:"flex items-center justify-end mb-1",children:e.jsx(pa,{config:t,handleClick:H})}),e.jsxs("table",{className:"w-full text-sm text-left !text-gray-700 dark:text-gray-400 table-bordered",children:[e.jsx("thead",{className:"text-xs text-gray-500 uppercase border-b-2 mb-1",children:e.jsxs("tr",{children:[e.jsx(q,{text:"Dilakukan oleh",sortField:"user_nama",sortOrder:t.sortOrder,config:t,handleClick:()=>V("user_nama")}),e.jsx(q,{text:"Kepada",sortField:"kepada",sortOrder:t.sortOrder,config:t,handleClick:()=>V("kepada")}),e.jsx(q,{text:"Tanggal Balas",sortField:"tanggal_balas",sortOrder:t.sortOrder,config:t,handleClick:()=>V("tanggal_balas")}),e.jsx(q,{text:"Aksi",className:"justify-center"})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{className:"border-b border-slate-300",children:[e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"user_nama",onSearch:$,placeholder:"Dilakukan oleh",type:"input"})}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"kepada",onSearch:$,placeholder:"Kepada",type:"input"})}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"tanggal_balas",onSearch:$,placeholder:"Tanggal Balas",type:"input"})}),e.jsx("td",{})]}),s?e.jsx("tr",{children:e.jsx("td",{colSpan:4,children:e.jsx(ia,{})})}):e.jsx(e.Fragment,{}),L.length?L.map((A,G)=>e.jsxs("tr",{className:"border-b border-slate-300",children:[e.jsx("td",{className:" max-w-[9rem] px-6 py-6",children:e.jsx("div",{className:"flex-wrap",children:A.user_nama})}),e.jsx("td",{className:" max-w-[9rem] px-6 py-6",children:e.jsx("div",{className:"flex-wrap",children:A.kepada})}),e.jsx("td",{className:" max-w-[9rem] px-6 py-6",children:e.jsx("div",{className:"flex-wrap",children:na(A.tanggal_balas)})}),e.jsxs("td",{className:"px-1 text-right w-[2rem]",children:[" ",A.action," "]})]},G)):e.jsx("tr",{children:e.jsx("td",{colSpan:4,className:"text-sm text-gray-400 text-center py-4",children:"Tidak ada data yang tersedia pada tabel ini"})})]})]}),e.jsxs("nav",{className:"flex items-center justify-between p-4","aria-label":"Table navigation",children:[e.jsx("span",{className:"text-sm text-gray-400",children:z.from&&`Menampilkan ${Se(z.from)} sampai ${Se(z.to)} dari ${Se(z.total)} entri`}),e.jsx(xa,{currentPage:t.page,lastPage:K,displayCount:5,handleClick:M})]})]})})})})},Nf=fa().shape({status:ze().required("Status wajib diisi"),deskripsi:ze().notRequired().test("deskripsi-required","Catatan wajib diisi",function(r){return this.parent.status==="SETUJU"||this.parent.status==="DITOLAK"&&r})}),wf="DASHBOARD_PENGUMUMAN",Sf="PENGUMUMAN_SELECT_COLOR",Qs="NASKAH_KELUAR_DETAIL",Zr="NASKAH_KELUAR_DETAIL_VERIFIKATOR",ai="NASKAH_KELUAR_DETAIL_PENANDATANGAN",fr="NASKAH_KELUAR_ACTION_PENANDATANGAN",An="NASKAH_KELUAR_CURRENT_VERIFIKATOR",Pt="NASKAH_KELUAR_CURRENT_PENANDATANGAN",Is="NASKAH_KELUAR_DETAIL_RIWAYAT",As="NASKAH_KELUAR_DETAIL_RIWAYAT_VERSIONING",Os="NASKAH_KELUAR_DETAIL_TIMELINE",rn="NASKAH_KELUAR_DETAIL_PDF",ho="NASKAH_KELUAR_PROGRESS_TEXT_EDITOR",vf="NASKAH_KELUAR_PROGRESS_STEPS_TEXT_EDITOR",Pf="BERKAS_AKTIF_HISTORI",si=({naskahId:r,crud:s=!1})=>{const n=gt(),t=new Ts,i=JSON.parse(Le.getItem("users")),[l,m]=a.useState(!1),[p,B]=a.useState(!0),[K,W]=a.useState(!1),[z,T]=a.useState(!1),[L,$]=a.useState(!1),[M,H]=a.useState(null),[V,A]=a.useState({total:0,from:1,to:1}),[G,X]=a.useState({id:0,user_id:i==null?void 0:i.id,naskah_keluar_id:r,status:"",deskripsi:""}),[O,I]=a.useState({naskah_keluar_id:r,naskah:"MASUK",page:1,rows:10,sortField:"",sortOrder:1,search:"",filters:{pengguna:{value:""},instansi:{value:""},deskripsi:{value:""},status:{value:""}}}),{data:_,isLoading:C,refetch:k}=ds({refetchOnWindowFocus:!1,enabled:!!r&&!!L,queryKey:[Zr,O,r],queryFn:async()=>{try{let J=(await t.getPagingVerifikator(O)).data.result;return A({...V,to:J.to,from:J.from,total:J.total}),H(J.last_page),J.data}catch{return A({...V,to:0,from:!1,total:0}),[]}}}),b=E=>{I(J=>({...J,page:E})),window.scrollTo({top:0,behavior:"smooth"})},y=E=>{I(J=>({...J,rows:E}))},o=E=>{I(J=>{let P=J.sortOrder===1?-1:1;return J.sortField!==E&&(P=1),{...J,sortField:E,sortOrder:P,page:1}})};let F=[];_==null?F=[]:F=_.map((E,J)=>{var P;return{urutan:J+V.from,pengguna:E.nama+" - "+E.jabatan,instansi:E.organisasi_nama&&E.organisasi_nama!=="null"?`${E.organisasi_nama} - ${E.instansi}`:E.instansi,deskripsi:E.deskripsi,user_id:E.user_id,lampiran:E.lampiran,status:E.status==="SETUJU"?e.jsx(be,{badgeContent:"SETUJU",color:"success",container:!0}):E.status==="DITOLAK"?e.jsx(be,{badgeContent:"DITOLAK",color:"error",container:!0}):E.status==="DIPERBAIKI"?e.jsx(be,{badgeContent:"DIPERBAIKI",color:"warning",container:!0}):e.jsx(be,{badgeContent:"BELUM DIPERIKSA",color:"info",container:!0}),action:s&&(i==null?void 0:i.id)===E.user_id?(P=_[J-1])!=null&&P.id&&(_[J-1].status==="BELUM"||!_[J-1].status)?e.jsx(be,{badgeContent:"MENUNGGU GILIRAN",color:"secondary",container:!0}):E.status==="BELUM"||E.status==="DIPERBAIKI"||!E.status?e.jsx(Mi,{size:"1.5em",onClick:()=>R(E),className:"cursor-pointer text-blue-600",title:"Beri tanda tangan"}):e.jsx(e.Fragment,{}):e.jsx(e.Fragment,{})}});const x=os((E,J,P=null)=>{if(P){let h=P.target;for(;h&&h.tagName!=="TD";)h=h.parentNode;if(h&&h.tagName==="TD"){const d=h.querySelector(".clear-input"),j=h.querySelector("input");J?d.classList.remove("hidden"):(d.classList.add("hidden"),j.value="")}}I(h=>({...h,filters:{...h.filters,[E]:{value:J,operator:"like"}},page:1}))},600);a.useEffect(()=>{r&&O.page!==void 0&&k()},[O,r,k]);const S=(E,{setSubmitting:J})=>{const P=E.deskripsi?E.deskripsi.trim():"",h=Array.from(P).length;if(h>200){U.fire({icon:"error",title:"Terlalu Panjang",text:`Catatan tidak boleh lebih dari 200 karakter! (Saat ini: ${h})`,showConfirmButton:!0}),J(!1);return}f(E)},{mutate:f}=it({onMutate:()=>B(!1),mutationFn:E=>t.postVerifikator(E),onSuccess:async E=>{var J,P;E.data.success?(await k(),m(!1),U.fire({icon:"success",title:"Berhasil",text:(J=E.data)==null?void 0:J.message,showConfirmButton:!1,timer:1500}),Ta.loading("Memperbarui Data",{toastId:"update-naskah"}),await n.invalidateQueries({queryKey:[Qs]}),await n.invalidateQueries({queryKey:[An]}),await n.invalidateQueries({queryKey:[Is]}),await n.invalidateQueries({queryKey:[As]}),await n.invalidateQueries({queryKey:[Os]}).then(()=>{Ta.update("update-naskah",{render:"Data berhasil diperbarui",isLoading:!1,closeButton:!0,autoClose:5e3,type:"success",pauseOnFocusLoss:!1})}),W(!0)):U.fire({icon:"warning",title:"Gagal",text:(P=E.data)==null?void 0:P.message,showConfirmButton:!1,timer:1500})},onError:E=>{var P,h;const J=Oe(E.response.data.result);U.fire("Gagal",J??((h=(P=E.response)==null?void 0:P.data)==null?void 0:h.message),"error")},onSettled:()=>B(!0)}),R=E=>{X({id:E.id,user_id:E.user_id,naskah_keluar_id:E.naskah_keluar_id,status:E.status,deskripsi:E.deskripsi}),m(!0)},u=()=>{m(!1)},D=()=>{T(!z),L||$(!0)};return e.jsxs("div",{children:[e.jsxs(w,{container:!0,direction:"row",justifyContent:"space-between",alignItems:"center",className:"pb-6 cursor-pointer",onClick:()=>D(),children:[e.jsxs(w,{item:!0,className:"flex items-center gap-2",children:[e.jsx(Ki,{size:"1.5em"}),e.jsx(le,{variant:"h5",fontWeight:"medium",children:"Daftar Verifikator"})]}),e.jsx(w,{item:!0,children:e.jsx(is,{className:"w-6 h-5 text-gray-500 cursor-pointer"})})]}),e.jsx(w,{children:e.jsx("div",{className:`overflow-x-auto lg:overflow-y-auto lg:max-h-[70vh] ${z?"":"hidden"}`,children:L&&e.jsxs("div",{className:"table px-6 pt-6 min-w-full",children:[e.jsx("div",{className:"flex items-center justify-end mb-1",children:e.jsx(pa,{config:O,handleClick:y})}),e.jsxs("table",{className:"w-full text-sm text-left !text-gray-700 dark:text-gray-400 table-bordered",children:[e.jsx("thead",{className:"text-xs text-gray-500 uppercase border-b-2 mb-1",children:e.jsxs("tr",{children:[e.jsx(q,{text:"Urutan",sortField:"urutan",sortOrder:O.sortOrder,config:O,handleClick:()=>o("urutan")}),e.jsx(q,{text:"Pengguna",sortField:"",sortOrder:O.sortOrder,config:O,handleClick:()=>o("pengguna")}),e.jsx(q,{text:"Unit Kerja / Instansi"}),e.jsx(q,{text:"Catatan",sortField:"hal",sortOrder:O.sortOrder,config:O,handleClick:()=>o("hal")}),e.jsx(q,{text:"Status",sortField:"status",sortOrder:O.sortOrder,config:O,handleClick:()=>o("status")}),s&&e.jsx(q,{text:"Aksi"})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{className:"border-b border-slate-300",children:[e.jsx("td",{className:""}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"pengguna",onSearch:x,placeholder:"Pengguna",type:"input"})}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"instansi",onSearch:x,placeholder:"Unit Kerja / Instansi",type:"input"})}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"deskripsi",onSearch:x,placeholder:"Catatan",type:"input"})}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"status",onSearch:x,placeholder:"Status",type:"input"})}),e.jsx("td",{})]}),C?e.jsx("tr",{className:"border-b border-slate-300",children:e.jsx("td",{colSpan:5,children:e.jsx(ia,{})})}):e.jsx(e.Fragment,{}),F.length?F.map((E,J)=>{var P,h;return e.jsxs("tr",{className:"border-b border-slate-300",children:[e.jsx("td",{className:"max-w-[20rem] px-6 py-6",children:E.urutan}),e.jsx("td",{className:"max-w-[20rem] px-6 py-6",children:E.pengguna}),e.jsx("td",{className:"max-w-[20rem] px-6 py-6",children:E.instansi}),e.jsx("td",{className:"max-w-[20rem] px-6 py-6",children:e.jsxs("div",{children:[e.jsx("p",{children:E.deskripsi||"-"}),!!((P=E==null?void 0:E.lampiran)!=null&&P.length)&&e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"my-2",children:e.jsx("b",{children:"Lampiran: "})}),e.jsx("ul",{className:"flex flex-col gap-2 list-disc",children:(h=E==null?void 0:E.lampiran)==null?void 0:h.map(d=>e.jsx("li",{className:"hover:underline cursor-pointer break-all text-blue-500",onClick:()=>Wa(d.file,d.file_path),children:d.nama},d.id))})]})]})}),e.jsx("td",{className:"max-w-[20rem] px-6 py-6",children:E.status}),s&&e.jsx("td",{className:"max-w-[20rem] px-6 py-6",children:e.jsx("div",{className:"flex justify-center w-full",children:E.action})})]},J)}):e.jsx(e.Fragment,{})]})]}),e.jsxs("nav",{className:"flex items-center justify-between p-4","aria-label":"Table navigation",children:[e.jsx("span",{className:"text-sm text-gray-400",children:V.from&&`Menampilkan ${Se(V.from)} sampai ${Se(V.to)} dari ${Se(V.total)} entri`}),e.jsx(xa,{currentPage:O.page,lastPage:M,displayCount:5,handleClick:b})]})]})})}),e.jsxs(ys,{open:l,onClose:u,fullWidth:!0,maxWidth:"sm",children:[e.jsx(_a,{children:e.jsxs("div",{className:"mx-2 flex items-center gap-2",children:[e.jsx(Ks,{className:"w-6 h-6"}),e.jsx(le,{children:"Form Periksa Naskah"})]})}),e.jsx(ie,{px:3,children:e.jsxs("div",{className:"flex md:items-center gap-2",children:[e.jsx(Cu,{size:20,color:"#ea0606",className:"w-10 md:w-max"}),e.jsx(le,{variant:"body",color:"error",fontWeight:"medium",children:"Mohon periksa kembali naskah sebelum memberikan persetujuan."})]})}),e.jsx(ca,{initialValues:G,onSubmit:S,validateOnChange:!0,validationSchema:Nf,children:e.jsx(da,{id:"formVerif",className:"text-sm",children:e.jsxs("div",{className:"p-2",children:[e.jsx(w,{children:e.jsx(Na,{children:e.jsx(ce,{name:"status",children:({field:E,form:J,meta:P})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Status",required:!0,error:P.error&&P.touched}),e.jsxs("div",{className:"space-x-4 flex flex-row items-center",children:[e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{...E,type:"radio",className:"form-radio  w-4 h-4 text-blue-500 focus:ring-2 focus:ring-blue-500",value:"SETUJU",checked:E.value=="SETUJU",onChange:h=>{J.setFieldValue("status","SETUJU"),X({...G,status:"SETUJU"}),h.target.checked=!0}}),e.jsx("span",{className:"text-gray-700",children:"SETUJU"})]}),e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{...E,type:"radio",className:"form-radio  w-4 h-4 text-blue-500 focus:ring-2 focus:ring-blue-500",value:"DITOLAK",checked:E.value=="DITOLAK",onChange:h=>{J.setFieldValue("status","DITOLAK"),X({...G,status:"DITOLAK"}),h.target.checked=!0}}),e.jsx("span",{className:"text-gray-700",children:"DITOLAK"})]})]}),e.jsx(ue,{text:P.error,error:P.error&&P.touched})]})})})}),e.jsx(w,{children:e.jsxs(Na,{children:[e.jsx(ce,{name:"deskripsi",children:({field:E,form:J,meta:P})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Catatan",required:!0,error:P.error&&P.touched}),e.jsx(Ka,{...E,placeHolder:"Masukan Catatan...",error:P.error&&P.touched}),e.jsx(ue,{text:P.error,error:P.error&&P.touched})]})}),e.jsx("div",{className:"flex md:items-center gap-2",children:e.jsx(le,{variant:"body",sx:{fontSize:"13px",color:"gray"},children:"Maksimal 200 karakter."})})]})}),e.jsx(w,{mb:2,children:e.jsx(Na,{children:e.jsx(ce,{name:"file",children:({field:E,form:J,meta:P})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Lampiran",error:P.error&&P.touched}),e.jsx(at,{onFileSelected:h=>{J.setFieldValue("file",h??"")},isReset:K,descBox:"Untuk menambahkan File, seret dan lepas file tersebut ke sini, atau klik untuk memilih file.",maxSizePerFileInMb:10}),e.jsx(ue,{text:P.error,error:P.error&&P.touched})]})})})})]})})}),e.jsx(ya,{children:e.jsxs(e.Fragment,{children:[e.jsx(Je,{submit:p,color:"success",formId:"formVerif",text:"Simpan"}),e.jsx(_e,{color:"error",variant:"gradient",onClick:()=>m(!1),children:"Batal"})]})})]})]})},Cf=fa().shape({keterangan:ze().required("Keterangan wajib diisi")}),Tf=fa().shape({status:ze().required("Status wajib diisi"),deskripsi:ze().notRequired().test("deskripsi-required","Catatan wajib diisi",function(r){return this.parent.status==="SETUJU"||this.parent.status==="TOLAK"&&r})}),Ff=fa().shape({file:Qa().required("File Harus Diisi")}),Df=fa().shape({nomor:ze().required("Nomor Naskah harus diisi"),nik:wa().required("NIK harus diisi"),key:ze().required("Key Phrase harus diisi")}),If=fa().shape({penandatangan_id:wa().min(1,"Pilih Penandatangan").required("Penandatangan harus dipilih")}),qs="https://api.arsip.go.id/naskah-keluar/api/",Af="https://api.arsip.go.id/master/api/",bn="https://api.arsip.go.id/nk-ttd/api/";class wr{constructor(){ae(this,"getPaging",async s=>{const n=Ce.serializeObjectToQueryString(s);return await se.get(`${qs}penandatangan-naskah/list?${n}`).then(l=>l)});ae(this,"getPagingInDetail",async(s,n)=>{const t=Ce.serializeObjectToQueryString(n);return await se.get(`${qs}penandatangan-naskah/${s}?${t}`).then(m=>m)});ae(this,"getPagingPenandatanganan",async s=>{const n=Ce.serializeObjectToQueryString(s);return await se.get(`${qs}log-naskah/log-naskah-keluar/penandatangan?${n}`).then(l=>l)});ae(this,"getDetailNaskah",async s=>await se.get(`${qs}naskah-dinas/naskah-keluar/${s}/show`).then(i=>i));ae(this,"update",async s=>await se.post(`${qs}penandatangan-naskah/update`,s,{headers:{"Content-Type":"multipart/form-data"}}).then(i=>i));ae(this,"batal",async s=>await se.post(`${qs}penandatangan-naskah/batal`,s).then(i=>i));ae(this,"delete",async s=>await se.delete(`${qs}penandatangan-naskah/${s}`).then(i=>i));ae(this,"cancel",async s=>await se.post(`${qs}penandatangan-naskah/cancel`,s,{headers:{"Content-Type":"multipart/form-data"}}).then(i=>i));ae(this,"send",async s=>await se.post(`${qs}penandatangan-naskah/send-naskah`,s,{headers:{"Content-Type":"multipart/form-data"}}).then(i=>i));ae(this,"signConventional",async s=>await se.post(`${bn}penandatangan-naskah/ttd-konvensional`,s,{headers:{"Content-Type":"multipart/form-data"}}).then(i=>i));ae(this,"signElectronic",async s=>await se.post(`${bn}penandatangan-naskah/ttd-elektronik`,s,{headers:{"Content-Type":"multipart/form-data"}}).then(i=>i));ae(this,"cancelSign",async s=>await se.post(`${bn}penandatangan-naskah/cancel-sign`,s).then(i=>i));ae(this,"getNomorFinal",async s=>{const n=Ce.serializeObjectToQueryString(s);return await se.get(`${Af}tatanaskah/penomoran-otomatis/get-nomor-final?${n}`).then(l=>l)});ae(this,"getPagingLampiran",async s=>{const n=Ce.serializeObjectToQueryString(s);return await se.get(`${qs}naskah-dinas/lampiran?${n}`).then(l=>l)});ae(this,"getPagingVerifikator",async s=>{const n=Ce.serializeObjectToQueryString(s);return await se.get(`${qs}verifikator-naskah/verifikators?${n}`).then(l=>l)});ae(this,"getPagingPenandatanganan",async s=>{const n=Ce.serializeObjectToQueryString(s);return await se.get(`${qs}log-naskah/log-naskah-keluar/penandatangan?${n}`).then(l=>l)});ae(this,"getDownloadNaskahTTD",async s=>await se.get(`${bn}naskah-dinas/naskah-keluar/${s}/download-replace-content`).then(i=>i))}}const Of={flag:{loadingTtd:!1,reloadPdf:!1,loadingNaskah:!1}},Bf=(r=Of,s)=>{switch(s.type){case"SET_FLAG_LOADING_TTD":return{...r,flag:{...r.flag,loadingTtd:s.payload}};case"SET_FLAG_RELOAD_PDF":return{...r,flag:{...r.flag,reloadPdf:s.payload}};case"SET_FLAG_LOADING_NASKAH":return{...r,flag:{...r.flag,loadingNaskah:s.payload}};default:return r}},ut=$i(Bf),ti=({naskahId:r,crud:s=!1,action:n})=>{const t=JSON.parse(Le.getItem("users")),i=gt(),l=new wr,[m,p]=a.useState(!1),[B,K]=a.useState(!1),[W,z]=a.useState(!0),[T,L]=a.useState(!1),[$,M]=a.useState(!1),[H,V]=a.useState(!1),[A,G]=a.useState({id:0,naskah_keluar_id:r,user_id:t==null?void 0:t.id,status:"",deskripsi:""}),[X,O]=a.useState(null),[I,_]=a.useState({total:0,from:1,to:1}),[C,k]=a.useState({naskah_keluar_id:r,user_session_id:t==null?void 0:t.id,page:1,rows:10,sortField:"",sortOrder:1,search:"",filters:{pengguna:{value:""},instansi:{value:""},deskripsi:{value:""},status:{value:""}}}),{data:b,isLoading:y,refetch:o}=ds({refetchOnWindowFocus:!1,enabled:!!r&&!!H,queryKey:[ai,C,r],queryFn:async()=>{try{let v=(await l.getPagingPenandatanganan(C)).data.result;return _({...I,to:v.to,from:v.from,total:v.total}),O(v.last_page),v.data}catch{return _({...I,to:0,from:!1,total:0}),[]}}});let F=b?b.map((c,v)=>{var N,Q,re,ye;return{urutan:v+I.from,pengguna:c.nama+" - "+c.jabatan,instansi:c.unit_kerja&&c.unit_kerja!=="null"?`${c.unit_kerja} - ${c.instansi}`:c.instansi,deskripsi:c.deskripsi,user_id:c.user_id,lampiran:c.lampiran,status:c.status==="SETUJU"?e.jsx(be,{badgeContent:"SETUJU",color:"success",container:!0}):c.status==="TOLAK"?e.jsx(be,{badgeContent:"TOLAK",color:"error",container:!0}):c.status==="DIPERBAIKI"?e.jsx(be,{badgeContent:"DIPERBAIKI",color:"warning",container:!0}):e.jsx(be,{badgeContent:"BELUM",color:"secondary",container:!0}),action:s&&(t==null?void 0:t.id)==c.user_id?(N=b[v-1])!=null&&N.id&&(((Q=b[v-1])==null?void 0:Q.status)=="BELUM"||!((re=b[v-1])!=null&&re.status))||b[v-1]&&!b[v-1].is_signed?e.jsx(be,{badgeContent:"MENUNGGU GILIRAN",color:"secondary",container:!0}):(c.status=="BELUM"||c.status=="DIPERBAIKI")&&!c.do_forward?e.jsx(Mi,{size:"1.5em",onClick:()=>u(c),className:"cursor-pointer text-blue-600",title:"Setuju/tolak tanda tangan"}):c.status==="SETUJU"&&!c.is_signed&&c.urutan=="1"?e.jsx(Tu,{size:"1.5em",onClick:()=>D(c),className:"cursor-pointer text-blue-600",title:"Batalkan penyetujuan tanda tangan"}):(b==null?void 0:b.length)==1&&(c!=null&&c.is_signed)||(b==null?void 0:b.length)>1&&(c!=null&&c.is_signed)&&!((ye=b==null?void 0:b[v+1])!=null&&ye.is_signed)?e.jsx(Fu,{size:"1.5em",onClick:()=>E(c),className:"cursor-pointer text-red-600",title:"Batalkan tanda tangan"}):e.jsx(e.Fragment,{}):e.jsx(e.Fragment,{})}}):[];const x=os((c,v,N=null)=>{if(N){let Q=N.target;for(;Q&&Q.tagName!=="TD";)Q=Q.parentNode;if(Q&&Q.tagName==="TD"){const re=Q.querySelector(".clear-input"),ye=Q.querySelector("input");v?re.classList.remove("hidden"):(re.classList.add("hidden"),ye.value="")}}k(Q=>({...Q,filters:{...Q.filters,[c]:{...Q.filters[c],value:v}},page:1}))},600),S=c=>{k(v=>({...v,page:c}))},f=c=>{k(v=>({...v,rows:c}))},R=c=>{k(v=>{let N=v.sortField!==c?1:v.sortOrder===1?-1:"";return{...v,sortField:N===""?"":c,sortOrder:N,page:1}})};a.useEffect(()=>{r&&C.page!==void 0&&o()},[C,r,o]);const u=c=>{G({id:c.id,naskah_keluar_id:c.naskah_keluar_id,user_id:c.user_id,deskripsi:c.deskripsi,status:""}),K(!0)},D=c=>{U.fire({title:"Batalkan Persetujuan?",icon:"question",showCancelButton:!0,reverseButtons:!0,confirmButtonText:"Ya, Batalkan",cancelButtonText:"Tutup",customClass:{confirmButton:"button button-info",cancelButton:"button button-secondary"}}).then(v=>{v.isConfirmed&&(Ta.loading("Memproses Data",{toastId:"update-naskah"}),J({id:c.id,naskah_keluar_id:c.naskah_keluar_id}))})},E=c=>{U.fire({title:"Batalkan Tandatangan?",icon:"question",showCancelButton:!0,reverseButtons:!0,confirmButtonText:"Ya, Batalkan",cancelButtonText:"Tutup",customClass:{confirmButton:"button button-info",cancelButton:"button button-secondary"}}).then(v=>{v.isConfirmed&&(ka(),d({id:c.id,naskah_keluar_id:c.naskah_keluar_id}))})},{mutate:J}=it({mutationFn:c=>l.batal(c),onSuccess:async c=>{var v,N,Q;(v=c.data)!=null&&v.success?(await o(),U.fire({icon:"success",title:"Berhasil",text:(N=c.data)==null?void 0:N.message,showConfirmButton:!1,timer:1500}),Ta.update("update-naskah",{render:"Memperbarui Data",isLoading:!0}),await i.invalidateQueries({queryKey:[Qs]}),await i.invalidateQueries({queryKey:[fr]}),await i.invalidateQueries({queryKey:[Pt]}),await i.invalidateQueries({queryKey:[Is]}),await i.invalidateQueries({queryKey:[As]}),await i.invalidateQueries({queryKey:[Os]}).then(()=>{Ta.update("update-naskah",{render:"Data berhasil diperbarui",isLoading:!1,closeButton:!0,autoClose:5e3,type:"success",pauseOnFocusLoss:!1})})):(U.fire({icon:"warning",title:"Gagal",text:(Q=c.data)==null?void 0:Q.message,showConfirmButton:!1,timer:1500}),Ta.update("update-naskah",{render:"Terjadi kesalahan, harap coba kembali",isLoading:!1,closeButton:!0,autoClose:5e3,type:"error",pauseOnFocusLoss:!1}))},onError:c=>{var N,Q,re,ye;const v=Oe((Q=(N=c.response)==null?void 0:N.data)==null?void 0:Q.result);U.fire("Gagal",v??((ye=(re=c.response)==null?void 0:re.data)==null?void 0:ye.message),"error"),Ta.update("update-naskah",{render:"Terjadi kesalahan",isLoading:!1,closeButton:!0,autoClose:5e3,type:"error",pauseOnFocusLoss:!1})}}),P=(c,{setSubmitting:v})=>{const N=c.deskripsi?c.deskripsi.trim():"",Q=Array.from(N).length;if(Q>200){U.fire({icon:"error",title:"Terlalu Panjang",text:`Catatan tidak boleh lebih dari 200 karakter! (Saat ini: ${Q})`,showConfirmButton:!0}),v(!1);return}h(c)},{mutate:h}=it({onMutate:()=>z(!1),mutationFn:c=>l.update(c),onSuccess:async c=>{var v,N,Q;(v=c.data)!=null&&v.success?(await o(),K(!1),U.fire({icon:"success",title:"Berhasil",text:(N=c.data)==null?void 0:N.message,showConfirmButton:!1,timer:1500}),ut.dispatch({type:"SET_FLAG_LOADING_TTD",payload:!0}),await i.invalidateQueries({queryKey:[Qs]}),await i.invalidateQueries({queryKey:[fr]}),await i.invalidateQueries({queryKey:[Pt]}),await i.invalidateQueries({queryKey:[Is]}),await i.invalidateQueries({queryKey:[As]}),await i.invalidateQueries({queryKey:[Os]}).then(()=>{}),L(!0)):U.fire({icon:"warning",title:"Gagal",text:(Q=c.data)==null?void 0:Q.message,showConfirmButton:!1,timer:1500})},onError:c=>{var N,Q;const v=Oe(c.response.data.result);U.fire("Gagal",v??((Q=(N=c.response)==null?void 0:N.data)==null?void 0:Q.message),"error"),z(!0)},onSettled:()=>z(!0)}),{mutate:d}=it({mutationFn:c=>l.cancelSign(c),onSuccess:async c=>{var v,N,Q;(v=c.data)!=null&&v.success?(await o(),U.fire({icon:"success",title:"Berhasil",text:(N=c.data)==null?void 0:N.message,showConfirmButton:!1,timer:1500}),Ta.update("update-naskah",{render:"Memperbarui Data",isLoading:!0}),await i.invalidateQueries({queryKey:[Qs]}),await i.invalidateQueries({queryKey:[fr]}),await i.invalidateQueries({queryKey:[Pt]}),await i.invalidateQueries({queryKey:[Is]}),await i.invalidateQueries({queryKey:[As]}),await i.invalidateQueries({queryKey:[Os]}).then(()=>{Ta.update("update-naskah",{render:"Data berhasil diperbarui",isLoading:!1,closeButton:!0,autoClose:5e3,type:"success",pauseOnFocusLoss:!1})})):(U.fire({icon:"warning",title:"Gagal",text:(Q=c.data)==null?void 0:Q.message,showConfirmButton:!1,timer:1500}),Ta.update("update-naskah",{render:"Terjadi kesalahan, harap coba kembali",isLoading:!1,closeButton:!0,autoClose:5e3,type:"error",pauseOnFocusLoss:!1}))},onError:c=>{var N,Q,re,ye;const v=Oe((Q=(N=c.response)==null?void 0:N.data)==null?void 0:Q.result);U.fire("Gagal",v??((ye=(re=c.response)==null?void 0:re.data)==null?void 0:ye.message),"error"),Ta.update("update-naskah",{render:"Terjadi kesalahan",isLoading:!1,closeButton:!0,autoClose:5e3,type:"error",pauseOnFocusLoss:!1})}}),j=()=>{K(!1)},g=()=>{M(!$),H||V(!0)};return e.jsxs("div",{children:[e.jsxs(w,{container:!0,direction:"row",justifyContent:"space-between",alignItems:"center",className:"pb-6 cursor-pointer",onClick:()=>g(),children:[e.jsxs(w,{item:!0,className:"flex items-center gap-2",children:[e.jsx(Ks,{size:"1.5em"}),e.jsx(le,{variant:"h5",fontWeight:"medium",children:"Daftar Penandatangan"})]}),e.jsx(w,{item:!0,children:e.jsx(is,{className:"w-6 h-5 text-gray-500 cursor-pointer"})})]}),e.jsx(w,{children:e.jsx("div",{className:`overflow-x-auto lg:overflow-y-auto lg:max-h-[70vh] ${$?"":"hidden"}`,children:H&&e.jsxs("div",{className:"table px-6 pt-6 min-w-full",children:[e.jsx("div",{className:"flex items-center justify-end mb-1",children:e.jsx(pa,{config:C,handleClick:f})}),e.jsxs("table",{className:"w-full text-sm text-left !text-gray-700 dark:text-gray-400 table-bordered",children:[e.jsx("thead",{className:"text-xs text-gray-500 uppercase border-b-2 mb-1",children:e.jsxs("tr",{children:[e.jsx(q,{text:"Urutan",sortField:"urutan",sortOrder:C.sortOrder,config:C,handleClick:()=>R("urutan")}),e.jsx(q,{text:"Pengguna",sortField:"",sortOrder:C.sortOrder,config:C,handleClick:()=>R("pengguna")}),e.jsx(q,{text:"Unit Kerja / Instansi"}),e.jsx(q,{text:"Catatan",sortField:"deskripsi",sortOrder:C.sortOrder,config:C,handleClick:()=>R("deskripsi")}),e.jsx(q,{text:"Status",sortField:"status",sortOrder:C.sortOrder,config:C,handleClick:()=>R("status")}),s&&e.jsx(q,{text:"Aksi"})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{className:"border-b border-slate-300",children:[e.jsx("td",{className:""}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"pengguna",onSearch:x,placeholder:"Pengguna",type:"input"})}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"instansi",onSearch:x,placeholder:"Unit Kerja / Instansi",type:"input"})}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"deskripsi",onSearch:x,placeholder:"Catatan",type:"input"})}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"status",onSearch:x,placeholder:"Status",type:"input"})}),e.jsx("td",{})]}),y?e.jsx("tr",{className:"border-b border-slate-300",children:e.jsx("td",{colSpan:5,children:e.jsx(ia,{})})}):e.jsx(e.Fragment,{}),F.length?F.map((c,v)=>{var N,Q;return e.jsxs("tr",{className:"border-b border-slate-300",children:[e.jsx("td",{className:"max-w-[20rem] px-6 py-6",children:c.urutan}),e.jsx("td",{className:"max-w-[20rem] px-6 py-6",children:c.pengguna}),e.jsx("td",{className:"max-w-[20rem] px-6 py-6",children:c.instansi}),e.jsx("td",{className:"max-w-[20rem] px-6 py-6",children:e.jsxs("div",{children:[e.jsx("p",{children:c.deskripsi||"-"}),!!((N=c==null?void 0:c.lampiran)!=null&&N.length)&&e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"my-2",children:e.jsx("b",{children:"Lampiran: "})}),e.jsx("ul",{className:"flex flex-col gap-2 list-disc pl-4",children:(Q=c==null?void 0:c.lampiran)==null?void 0:Q.map(re=>e.jsx("li",{children:e.jsx("p",{className:"flex gap-2 items-center hover:underline cursor-pointer break-all text-blue-500",onClick:()=>Wa(re.file,re.file_path),children:re.nama})},re.id))})]})]})}),e.jsx("td",{className:"max-w-[20rem] px-6 py-6",children:c.status}),s&&e.jsx("td",{className:"max-w-[20rem] px-6 py-6",children:e.jsx("div",{className:"flex justify-center w-full",children:c.action})})]},v)}):e.jsx(e.Fragment,{})]})]}),e.jsxs("nav",{className:"flex items-center justify-between p-4","aria-label":"Table navigation",children:[e.jsx("span",{className:"text-sm text-gray-400",children:I.from&&`Menampilkan ${Se(I.from)} sampai ${Se(I.to)} dari ${Se(I.total)} entri`}),e.jsx(xa,{currentPage:C.page,lastPage:X,displayCount:5,handleClick:S})]})]})})}),e.jsxs(Fa,{open:B,onClose:j,children:[e.jsxs("div",{children:[e.jsx(_a,{children:e.jsxs("div",{className:"mx-2 flex items-center gap-2",children:[e.jsx(Ks,{className:"w-6 h-6"}),e.jsx(le,{children:"Form Penandatangan"})]})}),e.jsx(ca,{initialValues:A,onSubmit:P,validateOnChange:!0,validationSchema:Tf,children:e.jsx(da,{id:"formTtd",children:e.jsxs("div",{className:"px-6 py-3 grid grid-cols-1  gap-5",children:[e.jsx(w,{children:e.jsx(ce,{name:"status",children:({field:c,form:v,meta:N})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Status",required:!0,error:N.error&&N.touched}),e.jsxs("div",{className:"space-x-4 flex flex-row items-center mt-4",children:[e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{...c,type:"radio",className:"form-radio  w-4 h-4 text-blue-500 focus:ring-2 focus:ring-blue-500",value:"SETUJU",checked:c.value=="SETUJU",onChange:Q=>{v.setFieldValue("status","SETUJU"),G({...A,status:"SETUJU"}),Q.target.checked=!0}}),e.jsx("span",{className:"text-gray-700 text-sm",children:"SETUJU"})]}),(n==null?void 0:n.urutan)===1?e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{...c,type:"radio",className:"form-radio  w-4 h-4 text-blue-500 focus:ring-2 focus:ring-blue-500",value:"TOLAK",checked:c.value=="TOLAK",onChange:Q=>{v.setFieldValue("status","TOLAK"),G({...A,status:"TOLAK"}),Q.target.checked=!0}}),e.jsx("span",{className:"text-gray-700 text-sm",children:"TOLAK"})]}):e.jsx(e.Fragment,{})]}),e.jsx(ue,{text:N.error,error:N.error&&N.touched})]})})}),e.jsxs(w,{children:[e.jsx(ce,{name:"deskripsi",children:({field:c,form:v,meta:N})=>{var Q;return e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Catatan",required:((Q=v.values)==null?void 0:Q.status)==="TOLAK",error:N.error&&N.touched}),e.jsx(Ka,{...c,placeHolder:"Masukkan catatan...",error:N.error&&N.touched}),e.jsx(ue,{text:N.error,error:N.error&&N.touched})]})}}),e.jsx("div",{className:"flex md:items-center gap-2",children:e.jsx(le,{variant:"body",sx:{fontSize:"13px",color:"gray"},children:"Maksimal 200 karakter."})})]}),e.jsx(w,{children:e.jsx(ce,{name:"file",children:({field:c,form:v,meta:N})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Lampiran",error:N.error&&N.touched}),e.jsx(at,{onFileSelected:Q=>{v.setFieldValue("file",Q??"")},isReset:T,descBox:"Untuk menambahkan File, seret dan lepas file tersebut ke sini, atau klik untuk memilih file.",maxSizePerFileInMb:10}),e.jsx(ue,{text:N.error,error:N.error&&N.touched})]})})})]})})})]}),e.jsx(ya,{children:e.jsxs(e.Fragment,{children:[y?e.jsx(e.Fragment,{children:e.jsx(rs,{})}):e.jsx(Je,{submit:W,color:"success",formId:"formTtd",text:"Kirim"}),e.jsx(_e,{color:"secondary",variant:"gradient",onClick:()=>{K(!1)},children:"Batal"})]})})]})]})};Z.oneOfType([Z.string,Z.number]),Z.node.isRequired,Z.oneOf([!1,"none","asce","desc"]),Z.oneOf(["left","right","center"]);Z.node.isRequired,Z.bool,Z.oneOf(["left","right","center"]);Z.oneOfType([Z.shape({defaultValue:Z.number,entries:Z.arrayOf(Z.number)}),Z.bool]),Z.bool,Z.bool,Z.objectOf(Z.array).isRequired,Z.shape({variant:Z.oneOf(["contained","gradient"]),color:Z.oneOf(["primary","secondary","info","success","warning","error","dark","light"])}),Z.bool,Z.bool;const jd=r=>{const{children:s,value:n,index:t,target:i,naskahId:l,target_meta:m,originalFilePath:p,...B}=r;JSON.parse(Le.getItem("users"));const K=new Ts,W={updated_at:"Waktu Pembaharuan",created_at:"Waktu Pembuatan"},z={naskahdinas:{jenis_naskah_nama:"Jenis Naskah Dinas",sifat_naskah_nama:"Sifat Naskah Dinas",klasifikasi_nama:"Klasifikasi",nomor:"Nomor",ringkasan:"Isi Ringkas",hal:"Hal",status:"Status",ttd:"Tipe Tanda Tangan",user_created_nama:"Pembuat Naskah",organisasi_created_nama:"Instansi Pembuat Naskah",jabatan_created_nama:"Jabatan Pembuat Naskah",jenis_perkembangan:"Jenis Perkembangan",sender_user_nama:"Unit Pengirim Naskah",file:"Naskah Asli",file_convert:"Naskah Perubahan",...W},lampiran:{nama:"Nama File Lampiran",naskah:"Naskah",file:"File",...W},tujuan:{nama:"Nama Tujuan",jabatan:"Jabatan Tujuan",instansi:"Instansi Tujuan",jenis:"Jenis Tujuan",naskah:"Jenis Naskah",...W},verifikator:{nama:"Nama Verifikator",jabatan:"Jabatan Verifikator",instansi:"Instansi Verifikator",...W},penandatangan:{nama:"Nama Penandatangan",jabatan:"Jabatan Penandatangan",instansi:"Instansi Penandatangan",status:"Status Tandatangan",...W},status:{status:"Status Kirim",...W}},[T,L]=a.useState(!1),[$,M]=a.useState(null),[H,V]=a.useState([]),[A,G]=a.useState([]),[X,O]=a.useState([]),[I,_]=a.useState(p),[C,k]=a.useState(null),[b,y]=a.useState({total:0,from:1,to:1}),[o,F]=a.useState({base_id:l,target:m,page:1,rows:10,sortField:"",sortOrder:null,search:"",filters:{search:{value:""}}});let x=[];const{data:S,isLoading:f,refetch:R}=ds({refetchOnWindowFocus:!1,enabled:!!l,queryKey:[Is,i,o],queryFn:(P=!1)=>(P&&(o.page=1),K.getPagingMetaData(o).then(h=>{let d=h.data.result;return y({...b,to:d.to,from:d.from,total:d.total}),M(d.last_page),d.data.auditable_type=="App\\Models\\NaskahKeluar"?_("naskah-keluar"):d.data.auditable_type=="App\\Models\\Lampiran"&&_("lampiran"),d.data}).catch(h=>{y({...b,to:0,from:!1,total:0})}))});S==null?x=[]:x=S.map((P,h)=>({event:P.event,created_at:P.created_at,action:e.jsx("div",{className:"flex justify-center w-full",children:e.jsx(Oa,{size:"1.5em",color:"#17c1e8",onClick:()=>E(P),className:"cursor-pointer",title:"View"})})}));const u=P=>{let h={...o};h.page=P,F(h),window.scrollTo({top:0,behavior:"smooth"})},D=P=>{let h={...o};h.rows=P,F(h)},E=P=>{if(P){var h=null;P.event=="created"?h="Pembuatan":P.event=="updated"?h="Pembaruan":P.event=="deleted"&&(h="Penghapusan"),k(`${h} ${tt(i)}`),U.showLoading();let d=P.new_values!="null"?Object.entries(JSON.parse(P==null?void 0:P.new_values)):[],j=P.old_values!="null"?Object.entries(JSON.parse(P==null?void 0:P.old_values)):[],g=[];P.event=="created"||P.event=="updated"?g=P.new_values!="null"?Object.entries(JSON.parse(P==null?void 0:P.new_values)):[]:P.event=="deleted"&&(g=P.old_values!="null"?Object.entries(JSON.parse(P==null?void 0:P.old_values)):[]),g=g==null?void 0:g.map(c=>(c[0]=="file_path"&&_(c[1]),c[0]=z[i][c[0]],c)).filter(c=>c[0]),d=d==null?void 0:d.map(c=>(c[0]=z[i][c[0]],c)).filter(c=>c[0]),j=j==null?void 0:j.map(c=>(c[0]=z[i][c[0]],c)).filter(c=>c[0]),V(g),O(d),G(j),U.close()}L(!0)},J=()=>{L(!1),G([]),O([]),V([])};return e.jsxs("div",{role:"tabpanel",hidden:n!==t,id:`riwayat-tabpanel-${t}`,"aria-labelledby":`riwayat-tab-${t}`,...B,children:[n===t&&e.jsx(Xa,{children:e.jsx("div",{className:"overflow-auto",children:e.jsxs("div",{className:"table px-6 pt-6 min-w-full",children:[e.jsx("div",{className:"flex items-center justify-end mb-1",children:e.jsx(pa,{config:o,handleClick:D})}),e.jsxs("table",{className:"w-full text-sm text-left !text-gray-700 dark:text-gray-400 table-bordered",children:[e.jsx("thead",{className:"text-xs text-gray-500 uppercase border-b-2 mb-1",children:e.jsxs("tr",{children:[e.jsx(q,{text:"Peristiwa"}),e.jsx(q,{text:"Dilakukan Pada"}),e.jsx(q,{text:"Aksi"})]})}),e.jsxs("tbody",{children:[f?e.jsx("tr",{className:"border-b border-slate-300",children:e.jsx("td",{colSpan:3,children:e.jsx(ia,{})})}):e.jsx(e.Fragment,{}),x.length?x.map((P,h)=>e.jsxs("tr",{className:"border-b border-slate-300",children:[e.jsx("td",{className:"max-w-[20rem] px-6 py-6",children:P.event=="created"?e.jsx(be,{badgeContent:"PEMBUATAN",color:"success",container:!0}):P.event=="updated"?e.jsx(be,{badgeContent:"PEMBARUAN",color:"info",container:!0}):e.jsx(be,{badgeContent:"PENGHAPUSAN",color:"error",container:!0})}),e.jsx("td",{className:"max-w-[20rem] px-6 py-6",children:Ns(P.created_at)}),e.jsx("td",{className:"max-w-[20rem] px-6 py-6",children:P.action})]},h)):e.jsx(e.Fragment,{})]})]}),e.jsxs("nav",{className:"flex items-center justify-between p-4","aria-label":"Table navigation",children:[e.jsx("span",{className:"text-sm text-gray-400",children:b.from&&`Menampilkan ${Se(b.from)} sampai ${Se(b.to)} dari ${Se(b.total)} entri`}),e.jsx(xa,{currentPage:o.page,lastPage:$,displayCount:5,handleClick:u})]})]})})}),e.jsxs(ys,{open:T,onClose:J,fullWidth:!0,maxWidth:"lg",children:[e.jsxs(e.Fragment,{children:[e.jsxs(_a,{children:["Detail Histori ",C," "]}),e.jsx("div",{className:"overflow-auto block",children:e.jsx("div",{className:"table px-6 pt-6 min-w-full",children:e.jsxs("table",{className:"w-full text-sm text-left !text-gray-700 dark:text-gray-400 table-bordered",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"max-w-[10rem] py-3 px-2",children:"Atribut"}),e.jsx("td",{className:"bg-red-700 text-white max-w-[10rem] py-3 px-2",children:"Isian Lama"}),e.jsx("td",{className:"bg-green-700 text-white max-w-[10rem] py-3 px-2",children:"Isian Baru"})]})}),e.jsx("tbody",{children:H.length>0&&H.map((P,h)=>{var j,g;const d=["File","Naskah Asli","Naskah Perubahan"];return e.jsxs("tr",{children:[e.jsx("td",{className:"max-w-[10rem] px-2 py-1 flex-wrap",children:e.jsx("div",{className:"break-all whitespace-pre-line",children:P[0]})}),e.jsx("td",{className:"max-w-[10rem] px-2 py-1 flex-wrap",children:e.jsx("div",{className:"break-all whitespace-pre-line",children:A[h]?e.jsx(e.Fragment,{children:P[1].toString().includes("href=")?e.jsx("div",{className:"text-blue-600 hover:underline",dangerouslySetInnerHTML:{__html:A[h][1]}}):d.includes(P[0])?e.jsx("div",{className:"text-blue-600 hover:underline cursor-pointer",onClick:()=>Wa(A[h][1],I),children:"Lihat"}):e.jsx("p",{children:(j=A==null?void 0:A[h])!=null&&j[1]&&oa(A[h][1],oa.ISO_8601).isValid()?Ns(A[h][1]):A[h][1]})}):e.jsx(e.Fragment,{})})}),e.jsx("td",{className:"max-w-[10rem] px-2 py-1 flex-wrap",children:e.jsx("div",{className:"break-all whitespace-pre-line",children:X[h]?e.jsx(e.Fragment,{children:X[h][1].toString().includes("href=")?e.jsx("div",{className:"text-blue-600 hover:underline",dangerouslySetInnerHTML:{__html:X[h][1]}}):d.includes(P[0])?e.jsx("div",{className:"text-blue-600 hover:underline cursor-pointer",onClick:()=>Wa(X[h][1],I),children:"Lihat"}):e.jsx("p",{children:(g=X==null?void 0:X[h])!=null&&g[1]&&oa(X[h][1],oa.ISO_8601).isValid()?Ns(X[h][1]):X[h][1]})}):e.jsx(e.Fragment,{})})})]},`${P}-${h}`)})})]})})})]}),e.jsx(ya,{children:e.jsx(_e,{color:"secondary",variant:"gradient",onClick:J,children:"Tutup"})})]})]})};jd.propTypes={children:Z.node,index:Z.number.isRequired,value:Z.number.isRequired,target:Z.string.isRequired,naskahId:Z.number.isRequired};const kd=r=>{const{children:s,value:n,index:t,target:i,naskahId:l,refresh:m,...p}=r;JSON.parse(Le.getItem("users"));const B=new Ts,[K,W]=a.useState(!1),[z,T]=a.useState(null),[L,$]=a.useState(null),[M,H]=a.useState({total:0,from:1,to:1}),[V,A]=a.useState({naskah_id:l,page:1,rows:10,sortField:"",sortOrder:null,search:"",filters:{search:{value:""}}}),{data:G,isLoading:X,refetch:O}=ds({refetchOnWindowFocus:!1,enabled:!!l,queryKey:[As,i,V],queryFn:(F=!1)=>(F&&(V.page=1),B.getVersioning(i,V).then(x=>{let S=x.data.result;return H({...M,to:S.to,from:S.from,total:S.total}),T(S.last_page),S.data}).catch(x=>{console.log({error:x}),H({...M,to:0,from:!1,total:0})}))});let I=[];G==null?I=[]:I=G.map((F,x)=>({urutan:F.urutan,created_at:F.created_at,action:e.jsx("div",{className:"flex justify-center w-full",children:e.jsx(Oa,{size:"1.5em",color:"#17c1e8",onClick:()=>y(F),className:"cursor-pointer",title:"View"})})}));const _=F=>{let x={...V};x.page=F,A(x),window.scrollTo({top:0,behavior:"smooth"})},C=F=>{let x={...V};x.rows=F,A(x)},k=F=>{let x={...V};x.sortField=F,V.sortField!=F?V.sortOrder==""&&(x.sortOrder=1):V.sortOrder==1?x.sortOrder=-1:(x.sortOrder="",x.sortField=""),x.page=1,A(x)},b=F=>F.split(".").pop(),y=F=>{U.showLoading(),Hs(F.filename,F.folder).then(x=>{F.url=x,F.extension=b(F.filename),$(F),U.close(),W(!0)}).catch(()=>{U.fire("Gagal","Tidak dapat mengambil dokumen","error")}).finally(()=>U.close())},o=()=>{W(!1),$(null)};return e.jsxs("div",{role:"tabpanel",hidden:n!==t,id:`riwayat-tabpanel-${t}`,"aria-labelledby":`riwayat-tab-${t}`,...p,children:[n===t&&e.jsx(Xa,{children:e.jsx("div",{className:"overflow-auto",children:e.jsxs("div",{className:"table px-6 pt-6 min-w-full",children:[e.jsx("div",{className:"flex items-center justify-end mb-1",children:e.jsx(pa,{config:V,handleClick:C})}),e.jsxs("table",{className:"w-full text-sm text-left !text-gray-700 dark:text-gray-400 table-bordered",children:[e.jsx("thead",{className:"text-xs text-gray-500 uppercase border-b-2 mb-1",children:e.jsxs("tr",{children:[e.jsx(q,{text:"Versi",sortField:"urutan",sortOrder:V.sortOrder,config:V,handleClick:()=>k("urutan")}),e.jsx(q,{text:"Dilakukan pada",sortField:"created_at",sortOrder:V.sortOrder,config:V,handleClick:()=>k("created_at")}),e.jsx(q,{text:"Aksi"})]})}),e.jsxs("tbody",{children:[X?e.jsx("tr",{className:"border-b border-slate-300",children:e.jsx("td",{colSpan:3,children:e.jsx(ia,{})})}):e.jsx(e.Fragment,{}),I.length?I.map((F,x)=>e.jsxs("tr",{className:"border-b border-slate-300",children:[e.jsx("td",{className:"max-w-[20rem] px-6 py-6",children:F.urutan}),e.jsx("td",{className:"max-w-[20rem] px-6 py-6",children:Ns(F.created_at)}),e.jsx("td",{className:"max-w-[20rem] px-6 py-6",children:F.action})]},x)):e.jsx(e.Fragment,{})]})]}),e.jsxs("nav",{className:"flex items-center justify-between p-4","aria-label":"Table navigation",children:[e.jsx("span",{className:"text-sm text-gray-400",children:M.from&&`Menampilkan ${Se(M.from)} sampai ${Se(M.to)} dari ${Se(M.total)} entri`}),e.jsx(xa,{currentPage:V.page,lastPage:z,displayCount:5,handleClick:_})]})]})})}),e.jsxs(ys,{open:K,onClose:o,fullWidth:!0,maxWidth:"lg",children:[e.jsxs(e.Fragment,{children:[e.jsx(_a,{children:"Detail Histori"}),e.jsx("div",{className:"overflow-auto block",children:e.jsx("div",{className:"table px-6 pt-6 min-w-full",children:L&&e.jsxs("table",{className:"w-full text-sm text-left !text-gray-700 dark:text-gray-400 table-bordered",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"max-w-[10rem] py-3 px-2",children:"Atribut"}),e.jsx("td",{className:"max-w-[10rem] py-3 px-2",children:"Isian"})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{className:"max-w-[10rem] px-2 py-1 flex-wrap",children:e.jsx("div",{className:"break-all whitespace-pre-line",children:"User Detail"})}),e.jsx("td",{className:"max-w-[10rem] px-2 py-1 flex-wrap",children:e.jsxs("div",{className:"break-all whitespace-pre-line",children:[L.user_nama," - ",L.user_jabatan," - ",L.user_unit_kerja," -"," ",L.user_instansi]})})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"max-w-[10rem] px-2 py-1 flex-wrap",children:e.jsx("div",{className:"break-all whitespace-pre-line",children:"Versi"})}),e.jsx("td",{className:"max-w-[10rem] px-2 py-1 flex-wrap",children:e.jsxs("div",{className:"break-all whitespace-pre-line",children:["#",L.urutan]})})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"max-w-[10rem] px-2 py-1 flex-wrap",children:e.jsx("div",{className:"break-all whitespace-pre-line",children:"Dokumen"})}),e.jsx("td",{className:"max-w-[10rem] px-2 py-1",children:e.jsxs("a",{target:"_blank",href:L.url,className:"w-full flex",children:["Download",L.extension==="docx"?e.jsx(Ao,{className:"h-6 w-6 cursor-pointer text-blue-600"}):L.extension==="pdf"?e.jsx(Du,{className:"h-6 w-6 cursor-pointer text-blue-600"}):e.jsx("span",{className:"ml-2 text-red-600",children:"Unsupported file"})]})})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"max-w-[10rem] px-2 py-1 flex-wrap",children:e.jsx("div",{className:"break-all whitespace-pre-line",children:"Dilakukan pada"})}),e.jsx("td",{className:"max-w-[10rem] px-2 py-1 flex-wrap",children:e.jsx("div",{className:"break-all whitespace-pre-line",children:Ns(L.created_at)})})]})]})]})})})]}),e.jsx(ya,{children:e.jsx(_e,{color:"secondary",variant:"gradient",onClick:o,children:"Tutup"})})]})]})};kd.propTypes={children:Z.node,index:Z.number.isRequired,value:Z.number.isRequired,target:Z.string.isRequired,naskahId:Z.number.isRequired};const ri=({naskahId:r,naskahFilePath:s})=>{const n=[{label:"Naskah Dinas",icon:e.jsx(Qr,{size:"1.5rem"}),target:"naskahdinas",target_meta:"history-audit",type:"normal"},{label:"Lampiran",icon:e.jsx(Ui,{size:"1.5rem"}),target:"lampiran",target_meta:"history-lampiran",type:"normal"},{label:"Tujuan",icon:e.jsx(Vi,{size:"1.5rem"}),target:"tujuan",target_meta:"history-tujuan",type:"normal"},{label:"Verifikator",icon:e.jsx(Ki,{size:"1.5rem"}),target:"verifikator",target_meta:"history-verifikator",type:"normal"},{label:"Penandatanganan",icon:e.jsx(Ks,{size:"1.5rem"}),target:"penandatangan",target_meta:"history-penandatangan",type:"normal"},{label:"Status Kirim",icon:e.jsx(Iu,{size:"1.5rem"}),target:"status",target_meta:"history-status",type:"normal"},{label:"Versi Dokumen",icon:e.jsx(Ao,{size:"1.5rem"}),target:"status",target_meta:"-",type:"khusus"}],[t,i]=a.useState("horizontal"),[l,m]=a.useState(0),p=(M,H)=>m(H),[B,K]=a.useState(null),[W,z]=a.useState(!1),[T,L]=a.useState(!1);a.useEffect(()=>{function M(){return window.innerWidth<Wn.values.md?i("vertical"):i("horizontal")}return window.addEventListener("resize",M),M(),()=>window.removeEventListener("resize",M)},[t]),a.useEffect(()=>{r&&K(r)},[r]);const $=()=>{z(!W),T||L(!0)};return e.jsxs("div",{children:[e.jsxs(w,{container:!0,direction:"row",justifyContent:"space-between",alignItems:"center",className:"pb-6 cursor-pointer",children:[e.jsxs("div",{className:"flex w-full justify-between",onClick:()=>$(),children:[e.jsxs(w,{item:!0,className:"flex items-center gap-2",children:[e.jsx(zi,{size:"1.5em"}),e.jsx(le,{variant:"h5",fontWeight:"medium",children:"Daftar Riwayat Perubahan Metadata"})]}),e.jsx(w,{item:!0,children:e.jsx(is,{className:"w-6 h-5 text-gray-500 cursor-pointer"})})]}),e.jsx("div",{className:`${W?"":"hidden"}`,children:e.jsx(ie,{display:"flex",justifyContent:"space-between",alignItems:"center",pt:5,children:e.jsx(vo,{position:"static",children:e.jsx(Qd,{orientation:t,value:l,onChange:p,sx:{background:"transparent"},children:n.map((M,H)=>e.jsx(Xd,{label:M.label,icon:M.icon,sx:{marginLeft:H?1:0}},M.label))})})})})]}),e.jsx("div",{className:`overflow-x-auto lg:overflow-y-auto lg:max-h-[70vh] ${W?"":"hidden"}`,children:e.jsx(ie,{mt:1,children:B&&T&&n.map((M,H)=>M.type=="normal"?e.jsx(jd,{value:l,index:H,naskahId:B,target:M.target,target_meta:M.target_meta,originalFilePath:s},M.label):e.jsx(kd,{value:l,index:H,naskahId:B,target:M.target,target_meta:M.target_meta},M.label))})})]})};Z.any.isRequired,Z.bool,Z.node.isRequired;const ni=({naskahId:r,status_send:s})=>{const n=new Ts,[t,i]=a.useState([]),[l,m]=a.useState(!1),[p,B]=a.useState(!1),{data:K,isLoading:W,refetch:z}=ds({refetchOnWindowFocus:!1,enabled:!!r&&!!p,queryKey:[Os,r,s],queryFn:()=>n.getTimeline(r).then($=>{const M=$.data.result,H=Object.entries(M);return(s==null?void 0:s.status)=="KIRIM"&&T(),H}).catch($=>{})}),T=async()=>{await n.getTujuanNaskahMasuk(r).then($=>i($.data.result.tujuan))},L=()=>{m(!l),p||B(!0)};return e.jsxs("div",{children:[e.jsxs(w,{container:!0,direction:"row",justifyContent:"space-between",alignItems:"center",className:"pb-6 cursor-pointer",onClick:()=>L(),children:[e.jsxs(w,{item:!0,className:"flex items-center gap-2",children:[e.jsx(zi,{size:"1.5em"}),e.jsx(le,{variant:"h5",fontWeight:"medium",children:"Linimasa"})]}),e.jsx(w,{item:!0,children:e.jsx(is,{className:"w-6 h-5 text-gray-500 cursor-pointer"})})]}),e.jsxs("div",{className:`overflow-x-auto lg:overflow-y-auto lg:max-h-[70vh] ${l?"":"hidden"}`,children:[W&&e.jsx("div",{className:"flex w-full justify-center my-4",children:e.jsx(rs,{})}),!W&&(K==null?void 0:K.length)>0&&K.map($=>{var V,A;const M=(V=$[0])==null?void 0:V.split("-"),H=new Date(M[2],M[1]-1,M[0]);return e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{children:na(H,1)}),(A=$[1])==null?void 0:A.map((G,X)=>{var I;var O=e.jsx(e.Fragment,{});return G.status==="Dikirim Ke Penerima"&&(O=t.filter(_=>_.jenis=="UTAMA").length||t.filter(_=>_.jenis=="TEMBUSAN").length?e.jsxs("div",{className:"py-3 col-span-12 grid grid-cols-12 gap-0",children:[t.filter(_=>_.jenis=="UTAMA").length?e.jsx("div",{className:"col-span-12 max-h-[70vh] overflow-y-auto",children:e.jsxs("div",{className:"p-1 grid grid-cols-12 mb-2 gap-1 lg:mb-0 text-sm",children:[e.jsx("div",{className:"col-span-12 font-semibold",children:"Utama :"}),t.filter(_=>_.jenis=="UTAMA").map((_,C)=>e.jsxs("div",{className:"col-span-12 flex items-start",children:[e.jsxs("span",{className:"me-5",children:[C+1,". ",e.jsx("b",{children:_.nama})," - ",_.jabatan," - ",_.instansi]}),e.jsx("span",{children:e.jsx(be,{badgeContent:_.is_read?"SUDAH BACA":"BELUM BACA",color:_.is_read?"success":"warning",container:!0})})]},_.id))]})}):e.jsx(e.Fragment,{}),t.filter(_=>_.jenis=="TEMBUSAN").length?e.jsx("div",{className:"col-span-12 max-h-[70vh] overflow-y-auto",children:e.jsxs("div",{className:"p-1 grid grid-cols-12 mb-2 gap-1 lg:mb-0 text-sm",children:[e.jsx("div",{className:"col-span-12 font-semibold",children:"Tembusan :"}),t.filter(_=>_.jenis=="TEMBUSAN").map((_,C)=>e.jsxs("div",{className:"col-span-12 flex items-start",children:[e.jsxs("span",{className:"me-5",children:[C+1,". ",e.jsx("b",{children:_.nama})," - ",_.jabatan," -"," ",_.instansi]}),e.jsx("span",{children:e.jsx(be,{badgeContent:_.is_read?"SUDAH BACA":"BELUM BACA",color:_.is_read?"success":"warning",container:!0})})]},_.id))]})}):e.jsx(e.Fragment,{})]}):e.jsx(e.Fragment,{})),e.jsx(Zn,{color:"success",icon:"circle",title:G.status,dateTime:na(G==null?void 0:G.created_at,3),description:`${G.nama} - ${G.jabatan} - ${G.instansi}`,deskripsi:G.deskripsi,lastItem:X===((I=$[1])==null?void 0:I.length)-1,children:O},X)})]},$[0])})]})]})},ii=({data:r,klasifikasi:s,naskahId:n})=>{var f,R,u,D,E,J,P,h;const[t,i]=a.useState(!1),[l,m]=a.useState(!1),[p,B]=a.useState(null),[K,W]=a.useState(null),[z,T]=a.useState(!1),[L,$]=a.useState([]),[M,H]=a.useState([]),[V,A]=a.useState(!1),G=new Gt,X=new qa,O=ut.getState().flag.reloadPdf;a.useEffect(()=>{n&&r&&y()},[n,r]),a.useEffect(()=>{O&&n&&r&&(ut.dispatch({type:"SET_FLAG_RELOAD_PDF",payload:!1}),b(),y())},[O,r]);const{data:I,isLoading:_,isError:C,refetch:k}=ds({enabled:!1,queryKey:[rn,n],queryFn:()=>G.getContent({id:n}).then(async d=>{const j=d;var g=j.file_convert;r.status_send.status=="KIRIM"&&(g=g.replace("_preview.pdf",".pdf"));const c=await Hs(g,j.file_path??"naskah-keluar",null,0,r.created_at);return B(c),c})}),b=async()=>{const d=await Hs(result.file_convert,result.file_path??"naskah-keluar",null,0,r.created_at);W(d)},y=async()=>{T(!1),Ta.loading("Mengambil File PDF",{toastId:"get-file-pdf"}),await G.getContent({id:n}).then(async d=>{const j=d;var g=j.file_convert;r.status_send.status=="KIRIM"&&(g=g.replace("_preview.pdf",".pdf"));const c=await Hs(g,j.file_path??"naskah-keluar",null,0,r.created_at).catch(v=>Ta.update("get-file-pdf",{render:"Terjadi kesalahan menampilkan file PDF",type:"error",isLoading:!1,pauseOnHover:!0,autoClose:3e3,closeButton:!0}));c?(B(c),Ta.update("get-file-pdf",{render:"File PDF berhasil ditampilkan",type:"success",isLoading:!1,pauseOnHover:!0,pauseOnFocusLoss:!1,autoClose:5e3,closeButton:!0})):(B(c),Ta.update("get-file-pdf",{render:"Terjadi kesalahan menampilkan file PDF",type:"error",isLoading:!1,pauseOnHover:!0,autoClose:5e3,closeButton:!0}))}).catch(d=>{var c,v,N,Q;const g=Oe((v=(c=d.response)==null?void 0:c.data)==null?void 0:v.result)||((Q=(N=d.response)==null?void 0:N.data)==null?void 0:Q.message)||(d==null?void 0:d.message);Ta.update("get-file-pdf",{render:g,type:"error",isLoading:!1,pauseOnHover:!0,autoClose:5e3,closeButton:!0})}).finally(()=>T(!0))},o=async()=>{U.fire({title:"Peringatan",text:"Proses ini akan memperbarui PDF dan mendapatakan koordinat ulang",icon:"warning",reverseButtons:!0,showCancelButton:!0,confirmButtonText:"Oke",cancelButtonText:"Batal",customClass:{confirmButton:"button button-info",cancelButton:"button button-secondary"}}).then(async d=>{d.isConfirmed&&(T(!1),Ta.loading("Memperbarui PDF",{toastId:"refresh-file-pdf"}),await G.refreshContent({id:n}).then(async j=>{const g=j;var c=g.file_convert;r.status_send.status=="KIRIM"&&(c=c.replace("_preview.pdf",".pdf")),await Hs(c,g.file_path??"naskah-keluar",null,0,r.created_at).then(v=>{B(v),Ta.update("refresh-file-pdf",{render:"Berhasil Perbaharui PDF",type:"success",isLoading:!1,pauseOnHover:!0,pauseOnFocusLoss:!1,autoClose:5e3,closeButton:!0})}).catch(v=>{B(null),Ta.update("refresh-file-pdf",{render:"Terjadi kesalahan memperbarui PDF",type:"error",isLoading:!1,pauseOnHover:!0,autoClose:5e3,closeButton:!0})})}).catch(j=>{var v,N,Q,re;const c=Oe((N=(v=j.response)==null?void 0:v.data)==null?void 0:N.result)||((re=(Q=j.response)==null?void 0:Q.data)==null?void 0:re.message)||(j==null?void 0:j.message);Ta.update("refresh-file-pdf",{render:c,type:"error",isLoading:!1,pauseOnHover:!0,autoClose:5e3,closeButton:!0})}).finally(()=>T(!0)))})},F=async()=>{const d={page:1,rows:1e3,naskah_id:n,naskah:"KELUAR","filters[jenis][value]":"UTAMA"};await X.select("naskah-dinas/tujuan-naskah",d,"nk").then(j=>{$(j)}).catch(j=>console.log(j))},x=async()=>{const d={page:1,rows:1e3,naskah_id:n,naskah:"KELUAR","filters[jenis][value]":"TEMBUSAN"};await X.select("naskah-dinas/tujuan-naskah",d,"nk").then(j=>{H(j)}).catch(j=>console.log(j))},S=()=>{m(!l),L.length||(A(!0),F().then(()=>x()).finally(()=>A(!1)))};return e.jsx(ie,{children:e.jsx(Me,{className:"p-5 flex flex-col gap-5",children:e.jsxs(w,{mt:2,children:[e.jsxs("div",{className:"p-3 grid grid-cols-12 mb-10 gap-5 lg:mb-5 text-sm",children:[e.jsxs("div",{className:"col-span-12 md:col-span-4",children:[e.jsx("label",{className:"text-xs",children:"Nomor Referensi"}),e.jsx("div",{className:"font-medium",children:(f=r==null?void 0:r.reply)!=null&&f.nomor?e.jsx("p",{children:(R=r==null?void 0:r.reply)==null?void 0:R.nomor}):e.jsx(be,{badgeContent:"TIDAK ADA",color:"secondary",container:!0})})]}),e.jsxs("div",{className:"col-span-12 md:col-span-4",children:[e.jsx("label",{className:"text-xs",children:"Nomor Naskah"}),e.jsx("div",{className:"font-medium",children:(r==null?void 0:r.nomor)||"-"})]}),e.jsxs("div",{className:"col-span-12 md:col-span-4",children:[e.jsx("label",{className:"text-xs",children:"Tanggal Naskah"}),e.jsx("div",{className:"font-medium",children:zs(r==null?void 0:r.tanggal)})]}),e.jsxs("div",{className:"col-span-12 md:col-span-4",children:[e.jsx("label",{className:"text-xs",children:"Hal"}),e.jsx("div",{className:"font-medium",children:r==null?void 0:r.hal})]}),e.jsxs("div",{className:"col-span-12 md:col-span-4",children:[e.jsx("label",{className:"text-xs",children:"Isi Ringkas"}),e.jsx("div",{className:"font-medium",children:r==null?void 0:r.ringkasan})]}),e.jsxs("div",{className:"col-span-12 md:col-span-4",children:[e.jsx("label",{className:"text-xs",children:"File"}),(r==null?void 0:r.file)&&e.jsxs("button",{onClick:()=>{Wa(r.file,r.file_path??"naskah-keluar",null,0,r.created).finally(()=>U.close())},className:"flex gap-2 items-center text-blue-400 hover:text-blue-600",children:[e.jsx(Qr,{className:"w-6 h-6"}),e.jsx("p",{children:"Lihat"})]})]})]}),e.jsx("div",{className:"col-span-12 mb-10 lg:mb-5 border rounded-md p-3",children:e.jsxs("div",{className:"grid grid-cols-12 gap-0 lg:gap-5 text-sm",children:[e.jsxs("div",{className:"col-span-12 cursor-pointer flex justify-between items-center",onClick:()=>i(!t),children:[e.jsxs("div",{className:"flex justify-start items-center text-blue-500",children:[e.jsx(qi,{className:"w-5 h-4 me-4"}),e.jsx("div",{className:"text-lg",children:"Detail Naskah Dinas"})]}),e.jsx(is,{className:"w-6 h-5 text-gray-500 cursor-pointer"})]}),t&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"py-3 col-span-12 lg:col-span-6",children:[e.jsxs("div",{className:"p-1 grid grid-cols-12 mb-2 gap-0 lg:gap-5 lg:mb-0 text-sm",children:[e.jsx("div",{className:"col-span-12 md:col-span-6",children:"Jenis Naskah"}),e.jsxs("div",{className:"col-span-12 md:col-span-6",children:[e.jsx("span",{className:"hidden md:inline",children:":"})," ",(r==null?void 0:r.jenis_naskah_nama)??"-"]})]}),e.jsxs("div",{className:"p-1 grid grid-cols-12 mb-2 gap-0 lg:gap-5 lg:mb-0 text-sm",children:[e.jsx("div",{className:"col-span-12 md:col-span-6",children:"Sifat Naskah"}),e.jsxs("div",{className:"col-span-12 md:col-span-6",children:[e.jsx("span",{className:"hidden md:inline",children:":"})," ",(r==null?void 0:r.sifat_naskah_nama)??"-"]})]}),e.jsxs("div",{className:"p-1 grid grid-cols-12 mb-2 gap-0 lg:gap-5 lg:mb-0 text-sm",children:[e.jsx("div",{className:"col-span-12 md:col-span-6",children:"Klasifikasi"}),e.jsxs("div",{className:"col-span-12 md:col-span-6",children:[e.jsx("span",{className:"hidden md:inline",children:": "}),(s==null?void 0:s.kode_nama)??"-"]})]}),e.jsxs("div",{className:"p-1 grid grid-cols-12 mb-2 gap-0 lg:gap-5 lg:mb-0 text-sm",children:[e.jsx("div",{className:"col-span-12 md:col-span-6",children:"Tipe Penandatangan"}),e.jsxs("div",{className:"col-span-12 md:col-span-6",children:[e.jsx("span",{className:"hidden md:inline",children:":"})," ",(r==null?void 0:r.ttd)=="TTE"?"Elektronik":"Konvensional"]})]}),(r==null?void 0:r.ttd)=="TTE"&&e.jsxs("div",{className:"p-1 grid grid-cols-12 mb-2 gap-0 lg:gap-5 lg:mb-0 text-sm",children:[e.jsx("div",{className:"col-span-12 md:col-span-6",children:"Tipe TTE"}),e.jsxs("div",{className:"col-span-12 md:col-span-6",children:[e.jsx("span",{className:"hidden md:inline",children:":"})," ",(r==null?void 0:r.tipe_tte)??"-"]})]})]}),e.jsxs("div",{className:"col-span-12 lg:col-span-6",children:[e.jsxs("div",{className:"p-1 grid grid-cols-12 mb-2 gap-1 lg:gap-5 lg:mb-0 text-sm",children:[e.jsx("div",{className:"col-span-12 md:col-span-6",children:"Berkas"}),e.jsx("div",{className:"col-span-12 md:col-span-6",children:(u=r==null?void 0:r.berkas_naskah)!=null&&u.berkas?e.jsxs("p",{children:[e.jsx("span",{className:"hidden md:inline",children:": "})," ",(E=(D=r==null?void 0:r.berkas_naskah)==null?void 0:D.berkas)==null?void 0:E.nomor," -"," ",(P=(J=r==null?void 0:r.berkas_naskah)==null?void 0:J.berkas)==null?void 0:P.nama]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"hidden md:inline",children:":"}),e.jsx(be,{badgeContent:"Belum diberkaskan",color:"warning",container:!0})]})})]}),e.jsxs("div",{className:"p-1 grid grid-cols-12 mb-2 gap-0 lg:gap-5 lg:mb-0 text-sm",children:[e.jsx("div",{className:"col-span-12 md:col-span-6",children:"Diregistrasikan pada"}),e.jsxs("div",{className:"col-span-12 md:col-span-6",children:[e.jsx("span",{className:"hidden md:inline",children:":"})," ",na(r==null?void 0:r.created_at)]})]}),e.jsxs("div",{className:"p-1 grid grid-cols-12 mb-2 gap-0 lg:gap-5 lg:mb-0 text-sm",children:[e.jsx("div",{className:"col-span-12 md:col-span-6",children:"Diregistrasikan oleh"}),e.jsxs("div",{className:"col-span-12 md:col-span-6",children:[e.jsx("span",{className:"hidden md:inline",children:":"})," ",r==null?void 0:r.user_created_nama," -"," ",r==null?void 0:r.jabatan_created_nama," - ",r==null?void 0:r.organisasi_created_nama]})]}),e.jsxs("div",{className:"p-1 grid grid-cols-12 mb-2 gap-0 lg:gap-5 lg:mb-0 text-sm",children:[e.jsx("div",{className:"col-span-12 md:col-span-6",children:"Dikirimkan melalui"}),e.jsxs("div",{className:"col-span-12 md:col-span-6",children:[e.jsx("span",{className:"hidden md:inline",children:":"})," ",(r==null?void 0:r.sender_user_nama)??"-"]})]})]})]})]})}),e.jsx("div",{className:"col-span-12 mb-10 lg:mb-5 border rounded-md p-3",children:e.jsxs("div",{className:"grid grid-cols-12 gap-0 lg:gap-5 text-sm",children:[e.jsxs("div",{className:"col-span-12 cursor-pointer flex justify-between items-center",onClick:S,children:[e.jsxs("div",{className:"flex justify-start items-center text-orange-500",children:[e.jsx(Hi,{className:"w-5 h-4 me-4"}),e.jsx("div",{className:"text-lg",children:"Tujuan"})]}),e.jsx(is,{className:"w-6 h-5 text-gray-500 cursor-pointer"})]}),l&&(V?e.jsx("div",{className:"col-span-12 justify-center flex",children:e.jsx(rs,{className:" w-8 h-8"})}):e.jsxs("div",{className:"py-3 col-span-12 grid grid-cols-12 gap-0",children:[e.jsx("div",{className:"col-span-12 lg:col-span-6 max-h-[70vh] overflow-y-auto",children:e.jsxs("div",{className:"p-1 grid grid-cols-12 mb-2 gap-1 lg:mb-0 text-sm",children:[e.jsx("div",{className:"col-span-12",children:"Utama :"}),L!=null&&L.length?L.map((d,j)=>e.jsx("div",{className:"col-span-12",children:e.jsxs("span",{children:[j+1,". ",e.jsx("b",{children:d.nama})," - ",d.jabatan," - ",d.instansi]})},d.id)):e.jsx(be,{badgeContent:"TIDAK ADA",color:"secondary",container:!0,className:"col-span-12"})]})}),e.jsx("div",{className:"col-span-12 lg:col-span-6 max-h-[70vh] overflow-y-auto",children:e.jsxs("div",{className:"p-1 grid grid-cols-12 mb-2 gap-1 lg:mb-0 text-sm",children:[e.jsx("div",{className:"col-span-12",children:"Tembusan :"}),M!=null&&M.length?M.map((d,j)=>e.jsx("div",{className:"col-span-12",children:e.jsxs("span",{children:[j+1,". ",e.jsx("b",{children:d.nama})," - ",d.jabatan," - ",d.instansi]})},d.id)):e.jsx(be,{badgeContent:"TIDAK ADA",color:"secondary",container:!0,className:"col-span-12"})]})})]}))]})}),e.jsxs("div",{className:"col-span-12 mb-10 lg:mb-5 h-[70vh] border rounded-md p-4",children:[r&&!r.is_signed&&e.jsx("div",{className:"text-right mb-3",children:e.jsx(_e,{color:"info",type:"button",variant:"gradient",size:"small",onClick:()=>z&&o(),className:"text-sm whitespace-nowrap",children:e.jsx("div",{className:"flex justify-start",children:z?e.jsx(e.Fragment,{children:"Perbarui PDF"}):e.jsxs(e.Fragment,{children:[e.jsx(rs,{color:"white",className:"flex-shrink-0 w-3 h-3 me-2"}),"Memproses.."]})})})}),p&&e.jsx("iframe",{className:"w-full h-full",src:`${p}`})]}),e.jsx("hr",{className:"mb-10 lg:mb-5"}),e.jsxs("div",{className:"col-span-12 mb-10 lg:mb-5 text-sm",children:[e.jsxs("div",{className:"text-lg mb-3",children:[((h=r==null?void 0:r.lampirans)==null?void 0:h.length)??"0"," Lampiran"]}),e.jsx("ul",{className:"list-none mb-0",children:r!=null&&r.lampirans&&(r!=null&&r.lampirans.length)?r==null?void 0:r.lampirans.map(d=>e.jsx("li",{className:"relative inline-block me-5",children:e.jsx("div",{className:"card bg-slate-50 py-2 px-3 mt-3 shadow-md rounded-md",children:e.jsxs("div",{className:"flex justify-start items-center",children:[e.jsx(Qr,{className:"w-12 h-11 text-blue-400 me-5"}),e.jsxs("div",{className:"",children:[e.jsx("div",{className:"font-medium",children:d.nama}),d.file&&e.jsx("div",{onClick:()=>Wa(d.file,d.file_path??"lampiran"),target:"_blank",className:"text-blue-400 hover:text-blue-600 cursor-pointer",children:"Lihat"})]})]})})},d.id)):e.jsx(be,{badgeContent:"TIDAK ADA",color:"secondary",container:!0})})]})]})})})},Lf=()=>{var j,g,c,v,N,Q,re,ye;const r=gt(),[s,n]=a.useState(!1),[t,i]=a.useState(!1),l=JSON.parse(Le.getItem("users")),m=new Ts,p=new wr,[B,K]=a.useState(!1),W=new qa,z=ga(),T=ha(),[L,$]=a.useState([]),[M,H]=a.useState(!1),[V,A]=a.useState(-1),[G,X]=a.useState({}),[O,I]=a.useState([]),[_,C]=a.useState(!1),[k,b]=a.useState(!0),[y,o]=a.useState(null),[F,x]=a.useState({id:((j=z.state)==null?void 0:j.id)??null}),S="";a.useEffect(()=>{const fe=new URLSearchParams(z.search).get("id");if(fe&&!F.id){const Ge=Js(fe);x($e=>({...$e,id:Number(Ge)}))}},[z.search]);const{data:f,isLoading:R,refetch:u}=ds({refetchOnWindowFocus:!1,enabled:!!F.id,queryKey:[Qs,F.id],queryFn:()=>m.getDetail(F.id).then(xe=>{var fe,Ge;return h((Ge=(fe=xe==null?void 0:xe.data)==null?void 0:fe.result)==null?void 0:Ge.klasifikasi_id),o(xe.data.result.last_penandatangan),xe.data.result})});a.useEffect(()=>{n(!0),R?Ta.loading("Mengambil data Naskah",{toastId:"load-nk"}):Ta.update("load-nk",{render:"Data naskah berhasil didapatkan",isLoading:!1,closeButton:!0,autoClose:5e3,type:"success",pauseOnFocusLoss:!1})},[R]);const D={user_session_id:l==null?void 0:l.id,naskah_keluar_id:F==null?void 0:F.id},{mutate:E}=it({onMutate:()=>b(!1),mutationFn:()=>p.send(D),onSuccess:async xe=>{await r.invalidateQueries({queryKey:[rn]}),await u().then(()=>{var fe,Ge,$e;K(!1),U.fire({icon:(fe=xe.data)!=null&&fe.success?"success":"warning",title:(Ge=xe.data)!=null&&Ge.success?"Berhasil":"Gagal",text:($e=xe.data)==null?void 0:$e.message})})},onError:xe=>{var Ge,$e;const fe=Oe(xe.response.data.result);U.fire("Gagal",fe??(($e=(Ge=xe.response)==null?void 0:Ge.data)==null?void 0:$e.message),"error")},onSettled:()=>b(!0)}),J=()=>{T(S+"/pembuatan-naskah-keluar/naskah-keluar")},P=async()=>{const xe={page:1,rows:1e3,sortField:"id",sortOrder:1,naskah_id:F.id,naskah:"KELUAR"};H(!0),await W.select("naskah-dinas/tujuan-naskah",xe,"nk").then(fe=>{$(fe)}).finally(()=>H(!1))},h=async xe=>{xe&&await W.detail("klasifikasi",xe,"master").then(fe=>{X(fe)})},d=()=>{K(!1)};return e.jsxs(aa,{children:[e.jsx(la,{}),s&&e.jsxs(e.Fragment,{children:[e.jsxs(ie,{pt:6,pb:3,className:"flex flex-col gap-10",children:[e.jsx(ie,{children:e.jsxs("div",{className:"flex justify-between p-3 items-center",children:[e.jsx(le,{variant:"h5",fontWeight:"medium",children:"Detail Naskah Keluar"}),e.jsxs("div",{className:"flex flex-wrap justify-end gap-3",children:[[2,3].includes(l==null?void 0:l.group_role)&&(y==null?void 0:y.status)=="SETUJU"&&(y==null?void 0:y.is_signed)&&((g=f.status_send)==null?void 0:g.status)==="BELUM"&&e.jsx("div",{children:e.jsxs(_e,{variant:"gradient",color:"error",onClick:()=>setModalBatal(!0),children:[e.jsx(Jr,{size:"1.5em",className:"me-2"}),e.jsx("p",{className:"whitespace-nowrap",children:"Batal Kirim"})]})}),[2,3].includes(l==null?void 0:l.group_role)&&(y==null?void 0:y.status)=="SETUJU"&&(y==null?void 0:y.is_signed)&&((c=f.status_send)==null?void 0:c.status)==="BELUM"&&e.jsx("div",{children:e.jsxs(_e,{variant:"gradient",color:"success",onClick:()=>{K(!B),L.length||P()},children:[e.jsx(rt,{size:"1.5em",className:"me-2"}),e.jsx("p",{className:"whitespace-nowrap",children:"Kirim Naskah"})]})}),e.jsxs(_e,{variant:"gradient",color:"secondary",onClick:J,children:[e.jsx(za,{size:"1.5em",className:"me-2"}),"Kembali"]})]})]})}),[2,3].includes(l==null?void 0:l.group_role)&&(y==null?void 0:y.is_signed)&&(y==null?void 0:y.status)=="SETUJU"&&((v=f.status_send)==null?void 0:v.status)==="BELUM"&&e.jsxs("div",{className:"flex justify-between gap-3 mb-8 p-5 items-center bg-gradient-to-r from-gray-400 to-gray-500 rounded-2xl",children:[e.jsx(Gi,{size:"5em",className:"text-white"}),e.jsxs("div",{children:[e.jsx(le,{variant:"h5",fontWeight:"medium",align:"right",color:"white",children:"Naskah ini belum dikirim"}),e.jsx("div",{className:"text-right",children:e.jsx(le,{variant:"caption",fontWeight:"medium",color:"light",children:"Pastikan Penandatangan naskah ini sudah memberikan Tanda Tangan sesuai dengan Tipe Tanda Tangan"})})]})]}),[2,3].includes(l==null?void 0:l.group_role)&&(y==null?void 0:y.is_signed)&&(y==null?void 0:y.status)=="SETUJU"&&((N=f.status_send)==null?void 0:N.status)==="KIRIM"&&e.jsxs("div",{className:"flex justify-between gap-3 p-5 items-center bg-gradient-to-r from-teal-400 to-teal-500 rounded-2xl",children:[e.jsx(Xs,{size:"5em",className:"text-white"}),e.jsxs("div",{children:[e.jsx(le,{variant:"h5",fontWeight:"medium",align:"right",color:"white",children:"Naskah ini telah dikirim"}),e.jsxs(le,{variant:"caption",fontWeight:"medium",align:"right",color:"light",children:["Pada hari ",na((Q=f==null?void 0:f.status_send)==null?void 0:Q.updated_at)]})]})]}),[2,3].includes(l==null?void 0:l.group_role)&&(y==null?void 0:y.is_signed)&&(y==null?void 0:y.status)=="SETUJU"&&((re=f.status_send)==null?void 0:re.status)==="BATAL"&&e.jsxs("div",{className:"flex justify-between gap-3 mb-8 p-5 items-center bg-gradient-to-r from-red-400 to-red-500 rounded-2xl",children:[e.jsx(Jr,{size:"5em",className:"text-white"}),e.jsxs("div",{children:[e.jsx(le,{variant:"h5",fontWeight:"medium",align:"right",color:"white",children:"Naskah ini dibatalkan"}),e.jsx("div",{className:"text-right",children:e.jsxs(le,{variant:"caption",fontWeight:"medium",color:"light",children:["Karena: ",(ye=f==null?void 0:f.status_send)==null?void 0:ye.keterangan]})})]})]}),e.jsx(ii,{data:f,klasifikasi:G,naskahId:F.id}),e.jsx(Me,{children:e.jsx(ie,{px:3,pt:3,lineHeight:1,children:e.jsx(si,{naskahId:F.id})})}),e.jsx(Me,{children:e.jsx(ie,{px:3,pt:3,lineHeight:1,children:e.jsx(ti,{naskahId:F.id})})}),e.jsx(Me,{children:e.jsx(ie,{px:3,pt:3,lineHeight:1,children:e.jsx(ri,{naskahId:F.id,naskahFilePath:f==null?void 0:f.file_path})})}),e.jsx(Me,{children:e.jsx(ie,{px:3,pt:3,lineHeight:1,children:e.jsx(ni,{naskahId:F.id,status_send:f==null?void 0:f.status_send})})})]}),e.jsx(ua,{}),e.jsxs(Fa,{open:B,onClose:d,children:[e.jsxs("div",{children:[e.jsxs(_a,{className:"flex items-center gap-2 text-teal-600 ",children:[e.jsx(qt,{className:"w-12 h-11 me-5"}),e.jsx(le,{children:"Kirim Naskah"})]}),e.jsxs(w,{px:4,children:[e.jsxs(le,{variant:"body2",children:["Anda akan mengirim Naskah ini dengan nomor ",e.jsx("b",{children:f==null?void 0:f.nomor})," yang akan diterima oleh:"]}),e.jsxs("table",{className:"mt-4 border-none w-full",children:[e.jsx("thead",{className:"text-gray-500 border-b-2 mb-1",children:e.jsxs("tr",{children:[e.jsx("td",{className:"p-2",children:e.jsx(le,{variant:"h6",children:"Kepada"})}),e.jsx("td",{className:"p-2",children:e.jsx(le,{variant:"h6",children:"Jenis"})}),e.jsx("td",{className:"p-2",children:e.jsx(le,{variant:"h6",children:"Unit Kerja / Instansi"})})]})}),e.jsxs("tbody",{children:[t?e.jsx("tr",{className:"border-b border-slate-300",children:e.jsx("td",{colSpan:3,children:e.jsx(ia,{})})}):e.jsx(e.Fragment,{}),L.map(xe=>e.jsxs("tr",{className:"border-b",children:[e.jsxs("td",{className:"p-2",children:[xe.nama," - ",xe.jabatan]}),e.jsx("td",{className:"p-2",children:xe.jenis}),e.jsx("td",{className:"p-2",children:`${xe.unit_kerja} / ${xe.instansi}`})]},xe.id))]})]})]})]}),e.jsx(ya,{children:e.jsxs(e.Fragment,{children:[e.jsx(Je,{submit:k,color:"success",text:"Ya, Kirim",onClick:()=>E(F.id)}),e.jsx(_e,{color:"error",variant:"gradient",onClick:()=>K(!1),children:"Tutup"})]})})]})]})]})},mo="https://api.arsip.go.id/naskah-keluar/api/";class $f{constructor(){ae(this,"getPaging",async s=>{const n=Ce.serializeObjectToQueryString(s);return await se.get(`${mo}verifikator-naskah?${n}`).then(l=>l)});ae(this,"getPagingVerifikators",async s=>{const n=Ce.serializeObjectToQueryString(s);return await se.get(`${mo}verifikator-naskah/verifikators?${n}`).then(l=>l)})}}const Rf=()=>{const r=ga(),s=new URLSearchParams(r.search).get("statusVerif"),[n,t]=a.useState(!1);a.useEffect(()=>{t(ge("Verifikasi Naskah","is_read",!0))},[]);const i=JSON.parse(Le.getItem("users")),l=new $f,[m,p]=a.useState(!1),[B,K]=a.useState(null),[W,z]=a.useState(null),[T,L]=a.useState(null),[$,M]=Ga.useState(!1),[H,V]=a.useState(!1),[A,G]=a.useState("Simpan"),[X,O]=a.useState(""),[I,_]=a.useState(null),[C,k]=a.useState({id:0,lembaga_id:0,jenis_organisasi_id:0,singkatan:"",alamat:"",status:"AKTIF",usage:0,kode:""}),[b,y]=a.useState({total:0,from:1,to:1});ha();let o=[];B==null?o=[]:o=B.map((J,P)=>{var j,g;const h={formode:"Ubah",editor:!0,is_forward:!0,from:"verif"},d=Ce.serializeObjectToQueryString(h);return{no:P+b.from,created_at:J.created_at,nomor:J.nomor,hal:J.hal,tanggal:J.tanggal,jenis_naskah:J.jenis_naskah,asal_naskah:`${J.user_created_nama} - ${J.jabatan_created_nama} - ${J.organisasi_created_nama}`,status:(g=(j=J.verifikator_naskahs)==null?void 0:j.find(c=>c.user_id==(i==null?void 0:i.id)))==null?void 0:g.status,action:e.jsxs("div",{className:"flex content-start justify-center gap-3 w-full",children:[J.verifikator_naskahs.filter(c=>c.is_forward&&c.user_id==(i==null?void 0:i.id)).length?e.jsx(va,{to:`form?id=${Ps(J==null?void 0:J.id)}&${d}`,children:e.jsx(Va,{size:"1.5em",color:"#fbcf33",className:"cursor-pointer",title:"Edit"})}):e.jsx(e.Fragment,{}),e.jsx(va,{to:`detail?id=${Ps(J==null?void 0:J.id)}`,children:e.jsx(Oa,{size:"1.5em",color:"#17c1e8",className:"cursor-pointer",title:"View"})})]})}});const[F,x]=a.useState({page:1,rows:10,sortField:"",sortOrder:null,filters:{tanggal:{value:""},user_session_id:{value:i==null?void 0:i.id},nomor:{value:""},hal:{value:""},organisasi_created_nama:{value:""},tingkat_urgensi:{value:""},status:{value:s??""}}});a.useEffect(()=>{n&&S()},[F,n]);const S=async()=>{p(!0),await l.getPaging(F).then(J=>{let P=J.data.result;P.data&&(_(P.last_page),K(P.data),p(!1)),p(!1),y({...b,to:P.to,from:P.from,total:P.total})}).catch(J=>{p(!1),y({...b,to:0,from:!1,total:0})})},f=os((J,P,h=null)=>{if(h){let j=h.target;for(;j&&j.tagName!=="TD";)j=j.parentNode;if(j&&j.tagName==="TD"){const g=j.querySelector(".clear-input"),c=j.querySelector("input");P?g.classList.remove("hidden"):(g.classList.add("hidden"),c.value="")}}let d={...F};d.filters[J].value=P,d.page=1,x(d)},600),R=J=>{let P={...F};P.page=J,x(P)},u=J=>{let P={...F};P.rows=J,P.page=1,x(P)},D=J=>{let P={...F};P.sortField=J,F.sortField!=J?F.sortOrder==""&&(P.sortOrder=1):F.sortOrder==1?P.sortOrder=-1:(P.sortOrder="",P.sortField=""),x(P)},E=[{value:"BELUM",label:e.jsx("div",{children:e.jsx(be,{badgeContent:"BELUM",color:"secondary",container:!0})})},{value:"SETUJU",label:e.jsx("div",{children:e.jsx(be,{badgeContent:"SETUJU",color:"success",container:!0})})},{value:"DITOLAK",label:e.jsx("div",{children:e.jsx(be,{badgeContent:"DITOLAK",color:"error",container:!0})})},{value:"DIPERBAIKI",label:e.jsx(be,{badgeContent:"DIPERBAIKI",color:"warning",container:!0})}];return e.jsxs(aa,{children:[e.jsx(la,{}),n&&e.jsxs(e.Fragment,{children:[e.jsx(ie,{pt:6,pb:3,children:e.jsxs(Me,{children:[e.jsx(ie,{p:3,lineHeight:1,children:e.jsx(w,{container:!0,direction:"row",justifyContent:"space-between",alignItems:"center",children:e.jsx(w,{item:!0,children:e.jsx(le,{variant:"h5",fontWeight:"medium",children:"Daftar Verifikasi Naskah"})})})}),e.jsx("div",{className:"overflow-auto",children:e.jsxs("div",{className:"table p-10 min-w-full",children:[e.jsx("div",{className:"flex items-center justify-end mb-1",children:e.jsx(pa,{config:F,handleClick:u})}),e.jsxs("table",{className:"w-full text-sm text-left !text-gray-700 dark:text-gray-400 table-bordered",children:[e.jsx("thead",{className:"text-xs text-gray-500 uppercase border-b-2 mb-1",children:e.jsxs("tr",{children:[e.jsx(q,{text:"No",sortField:"",sortOrder:F.sortOrder,config:F,handleClick:()=>D("nomenklatur_ori")}),e.jsx(q,{text:"Tanggal Naskah",sortField:"",sortOrder:F.sortOrder,config:F,handleClick:()=>D("")}),e.jsx(q,{text:"Nomor Naskah"}),e.jsx(q,{text:"Hal"}),e.jsx(q,{text:"Asal Naskah"}),e.jsx(q,{text:"Status"}),e.jsx(q,{text:"Aksi",className:"flex justify-center min-w-[2rem]"})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{className:"border-b border-slate-300",children:[e.jsx("td",{className:"max-w-[20rem] py-6 px-2"}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"tanggal",onSearch:f,placeholder:"Tanggal Naskah",type:"input",isDate:!0})}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"nomor",onSearch:f,placeholder:"Nomor Naskah",type:"input"})}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"hal",onSearch:f,placeholder:"Hal",type:"input"})}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"organisasi_created_nama",onSearch:f,placeholder:"Asal Naskah",type:"input"})}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"status",onSearch:f,placeholder:"Status",type:"select",selectOption:E,defaultValue:E.find(J=>J.value==s)})}),e.jsx("td",{})]}),m?e.jsx("tr",{className:"border-b border-slate-300",children:e.jsx("td",{colSpan:7,children:e.jsx(ia,{})})}):e.jsx(e.Fragment,{}),o.length?o.map((J,P)=>e.jsxs("tr",{className:"border-b border-slate-300",children:[e.jsx("td",{className:"max-w-[20rem] px-6 py-6",children:J.no}),e.jsx("td",{className:"max-w-[20rem] px-6 py-6",children:Ns(J.created_at)}),e.jsx("td",{className:"max-w-[20rem] px-6 py-6",children:J.nomor}),e.jsx("td",{className:"max-w-[20rem] px-6 py-6",children:J.hal}),e.jsx("td",{className:"max-w-[20rem] px-6 py-6",children:J.asal_naskah}),e.jsx("td",{className:"max-w-[20rem] px-6 py-6",children:!J.status||J.status=="BELUM"?e.jsx(be,{badgeContent:"BELUM",color:"secondary",container:!0}):J.status==="SETUJU"?e.jsx(be,{badgeContent:"SETUJU",color:"success",container:!0}):J.status==="DIPERBAIKI"?e.jsx(be,{badgeContent:"DIPERBAIKI",color:"warning",container:!0}):e.jsx(be,{badgeContent:"DITOLAK",color:"error",container:!0})}),e.jsxs("td",{className:"text-right",children:[" ",J.action," "]})]},P)):e.jsx(e.Fragment,{})]})]}),e.jsxs("nav",{className:"flex items-center justify-between p-4","aria-label":"Table navigation",children:[e.jsx("span",{className:"text-sm text-gray-400",children:b.from&&`Menampilkan ${Se(b.from)} sampai ${Se(b.to)} dari ${Se(b.total)} entri`}),e.jsx(xa,{currentPage:F.page,lastPage:I,displayCount:5,handleClick:R})]})]})})]})}),e.jsx(ua,{})]})]})};fa().shape({status:ze().required("Status wajib diisi"),deskripsi:ze().test("deskripsi-required","Catatan wajib diisi",function(r){return this.parent.status==="SETUJU"||this.parent.status==="DITOLAK"&&r!==void 0})});const bd=fa().shape({verifikator_id:wa().min(1,"Pilih Pengguna Verifikator").required("Pengguna Verifikator harus dipilih")}),Ef=()=>{var c;const[r,s]=a.useState(!1),n=gt();a.useEffect(()=>{s(ge("Verifikasi Naskah","is_create",!0))},[]);const[t,i]=a.useState(!1),[l,m]=a.useState(!1),p=JSON.parse(Le.getItem("users")),B=new Ts,[K,W]=a.useState(!1),[z,T]=a.useState(!0),L=new qa,$=ga(),M=ha(),[H,V]=a.useState([]),[A,G]=a.useState({id:((c=$.state)==null?void 0:c.id)??null}),[X,O]=a.useState({}),[I,_]=a.useState(null),[C,k]=a.useState({verifikator_id:null,forward_for:"verifikator",from:"verifikator",user_id:p==null?void 0:p.id,penandatangan_id:null,naskah_keluar_id:A.id}),b="";a.useEffect(()=>{const N=new URLSearchParams($.search).get("id");if(N&&!A.id){const Q=Js(N);G(re=>({...re,id:Number(Q)})),k(re=>({...re,naskah_keluar_id:Number(Q)}))}},[$.search]);const{data:y,isLoading:o,isError:F,refetch:x}=ds({enabled:!!A.id,refetchOnWindowFocus:!1,queryKey:[Qs,A.id],queryFn:()=>B.getDetail(A.id).then(v=>{var N,Q;return h((Q=(N=v==null?void 0:v.data)==null?void 0:N.result)==null?void 0:Q.klasifikasi_id),P(),v.data.result})}),{data:S,isLoading:f,isError:R,refetch:u}=ds({refetchOnWindowFocus:!1,enabled:!!(A!=null&&A.id),queryKey:[An,A.id],queryFn:()=>B.currentVerifikator({naskah_id:A.id}).then(v=>{var Q;return(Q=v.data.result)==null?void 0:Q.current_verif})});a.useEffect(()=>{s(!0),o?Ta.loading("Mengambil data Naskah",{toastId:"load-nk"}):Ta.update("load-nk",{render:"Data naskah berhasil didapatkan",isLoading:!1,closeButton:!0,autoClose:5e3,type:"success",pauseOnFocusLoss:!1}),F&&Ta.update("load-nk",{render:"Terjadi Kesalahan",isLoading:!1,closeButton:!0,type:"error",pauseOnFocusLoss:!1})},[o,F]);const D=async()=>{U.fire({title:"Teruskan ke konseptor",text:"Apakah Anda yakin ingin mengembalikan naskah ini ke konseptor?",icon:"question",showCancelButton:!0,confirmButtonText:"Ya, Teruskan",cancelButtonText:"Batal",customClass:{confirmButton:"button button-info",cancelButton:"button button-error"}}).then(async v=>{if(v.isConfirmed){const N={naskah_keluar_id:A.id,from:"verifikator",user_id:p==null?void 0:p.id};T(!1),U.fire({text:"Harap tunggu, sedang memproses!",icon:"info",showConfirmButton:!1,showCancelButton:!1,allowOutsideClick:!1}),await B.sendKonseptor(N).then(async Q=>{var re,ye;Q.data.success?(_(!1),await x(),await n.invalidateQueries({queryKey:[An]}),U.fire({icon:"success",title:"Berhasil",text:(re=Q.data)==null?void 0:re.message,showConfirmButton:!1,timer:1500}),await n.invalidateQueries({queryKey:[Is]}),await n.invalidateQueries({queryKey:[As]}),await n.invalidateQueries({queryKey:[Os]})):U.fire({icon:"warning",title:"Gagal",text:(ye=Q.data)==null?void 0:ye.message,showConfirmButton:!1,timer:1500})}).catch(Q=>{var ye,xe;const re=Oe(Q.response.data.result);U.fire("Gagal",re??((xe=(ye=Q.response)==null?void 0:ye.data)==null?void 0:xe.message),"error")}).finally(()=>{T(!0),U.close()})}else U.close()})},E=async v=>{v&&(T(!1),U.fire({text:"Harap tunggu, sedang memproses!",icon:"info",showConfirmButton:!1,showCancelButton:!1,allowOutsideClick:!1}),await B.sendVerifikator(v).then(async N=>{var Q,re;N.data.success?(W(!1),_(!1),await x(),await n.invalidateQueries({queryKey:[An]}),U.fire({icon:"success",title:"Berhasil",text:(Q=N.data)==null?void 0:Q.message,showConfirmButton:!1,timer:1500}),await n.invalidateQueries({queryKey:[Zr]}),await n.invalidateQueries({queryKey:[Is]}),await n.invalidateQueries({queryKey:[As]}),await n.invalidateQueries({queryKey:[Os]})):U.fire({icon:"warning",title:"Gagal",text:(re=N.data)==null?void 0:re.message,showConfirmButton:!1,timer:1500})}).catch(N=>{var re,ye;const Q=Oe(N.response.data.result);U.fire("Gagal",Q??((ye=(re=N.response)==null?void 0:re.data)==null?void 0:ye.message),"error")}).finally(()=>{T(!0),U.close()}))},J=()=>{M(b+"/pembuatan-naskah-keluar/verifikasi-naskah")},P=async(v=!1)=>{const N={naskah_id:A==null?void 0:A.id,naskah:"KELUAR",page:1,rows:300};i(!0),await B.getPagingLampiran(N).then(Q=>{let re=Q.data.result.data;re&&(V(re),i(!1)),i(!1)}).catch(Q=>{i(!1)})},h=async v=>{v&&await L.detail("klasifikasi",v,"master").then(N=>{O(N)})},d=()=>{W(!1)},j=v=>{v=="self"||(v=="konsep"?D():v=="verif"&&(W(!0),_(!1)))},g=()=>e.jsxs(Ls,{anchorEl:I,anchorOrigin:{vertical:"bottom",horizontal:"left"},open:!!I,onClose:()=>_(!1),sx:{mt:2,zIndex:10},children:[e.jsx(Ma,{title:"Ke Konseptor",onClick:()=>j("konsep")}),e.jsx(Ma,{title:"Ke Verifikator",onClick:()=>j("verif")})]});return e.jsxs(aa,{children:[e.jsx(la,{}),r&&e.jsxs(e.Fragment,{children:[e.jsxs(ie,{pt:6,pb:3,className:"flex flex-col gap-10",children:[e.jsx(ie,{children:e.jsxs("div",{className:"flex justify-between p-3 items-center",children:[e.jsx(le,{variant:"h5",fontWeight:"medium",children:"Detail Verifikasi Naskah Keluar"}),e.jsxs("div",{className:"flex justify-end ",children:[(S==null?void 0:S.user_id)==(p==null?void 0:p.id)&&(S==null?void 0:S.status)=="DITOLAK"&&!(S!=null&&S.do_forward)&&e.jsx("div",{className:"me-3",children:e.jsxs(ie,{children:[e.jsxs(_e,{variant:"gradient",color:"info",onClick:v=>_(v.currentTarget),children:[e.jsx(nt,{size:"1.5em",className:"me-2"}),"Teruskan"]}),g()]})}),e.jsxs(_e,{variant:"gradient",color:"secondary",onClick:J,children:[e.jsx(za,{size:"1.5em",className:"me-2"}),"Kembali"]})]})]})}),e.jsx(ii,{data:y,klasifikasi:X,lampiran:H,naskahId:A.id}),e.jsx(Me,{children:e.jsx(ie,{px:3,pt:3,lineHeight:1,children:e.jsx(si,{naskahId:A.id,crud:!0})})}),e.jsx(Me,{children:e.jsx(ie,{px:3,pt:3,lineHeight:1,children:e.jsx(ti,{naskahId:A.id})})}),e.jsx(Me,{children:e.jsx(ie,{px:3,pt:3,lineHeight:1,children:e.jsx(ri,{naskahId:A.id,naskahFilePath:y==null?void 0:y.file_path})})}),e.jsx(Me,{children:e.jsx(ie,{px:3,pt:3,lineHeight:1,children:e.jsx(ni,{naskahId:A.id,status_send:y==null?void 0:y.status_send})})})]}),e.jsx(ua,{})]}),e.jsxs(Fa,{open:K,onClose:d,children:[e.jsxs("div",{children:[e.jsxs(_a,{className:"flex items-center gap-2",children:[e.jsx(Ti,{size:"1.5em"}),e.jsx(le,{children:"Form Meneruskan"})]}),e.jsx(ca,{initialValues:C,onSubmit:E,validateOnChange:!0,validationSchema:bd,children:e.jsx(da,{id:"formVerifikator",className:"text-sm",children:e.jsx("div",{className:"mb-6 px-2",children:e.jsx(w,{mt:1,children:e.jsx(Na,{children:e.jsx(ce,{name:"verifikator_id",children:({field:v,form:N,meta:Q})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Verifikator",required:!0,error:Q.error&&Q.touched}),e.jsx(ra,{isDisabled:(S==null?void 0:S.user_id)!=(p==null?void 0:p.id),url:"verifikator-naskah/verifikators/feedback",callbackChange:re=>{re?N.setFieldValue("verifikator_id",(re==null?void 0:re.id)??""):N.resetForm()},keyValue:["id","nama"],placeholder:"Pilih Verifikator...",className:"text-base",targetService:"nk",menuPortalTarget:null,optionParam:{verifikasi_id:S==null?void 0:S.id}}),e.jsx(ue,{text:Q.error,error:Q.error&&Q.touched})]})})})})})})})]}),e.jsx(ya,{children:e.jsxs(e.Fragment,{children:[e.jsx(Je,{submit:z,color:"success",formId:"formVerifikator",text:"Ya, Teruskan"}),e.jsx(_e,{color:"error",variant:"gradient",onClick:()=>W(!1),children:"Batal"})]})})]})]})},Mf=()=>{const r=ga(),s=new URLSearchParams(r.search).get("statusTT"),n=new URLSearchParams(r.search).get("statusKirim"),[t,i]=a.useState(!1),l=JSON.parse(Le.getItem("users"));a.useEffect(()=>{i(ge("Tandatangan Naskah","is_read",!0))},[]);const m=new wr,[p,B]=a.useState(!1),[K,W]=a.useState(null),[z,T]=a.useState(null),[L,$]=a.useState(null),[M,H]=Ga.useState(!1),[V,A]=a.useState(!1),[G,X]=a.useState("Simpan"),[O,I]=a.useState(""),[_,C]=a.useState(null),[k,b]=a.useState({id:0,lembaga_id:0,jenis_organisasi_id:0,singkatan:"",alamat:"",status:"AKTIF",usage:0,kode:""}),[y,o]=a.useState({total:0,from:1,to:1});ha();let F=[];K==null?F=[]:F=K.map((P,h)=>{var g,c,v;const d={formode:"Ubah",editor:!0,is_forward:!0,from:"ttd"},j=Ce.serializeObjectToQueryString(d);return{no:h+y.from,id:P==null?void 0:P.id,tanggal:P.tanggal,nomor:P.nomor,hal:P.hal,asal_naskah:`${P.user_created_nama} - ${P.jabatan_created_nama} - ${P.organisasi_created_nama}`,status_ttd:(c=(g=P.penandatangan_naskahs)==null?void 0:g.find(N=>N.user_id===(l==null?void 0:l.id)))==null?void 0:c.status,status_send:(v=P.status_send)==null?void 0:v.status,action:e.jsxs("div",{className:"flex content-start justify-center gap-3 w-full",children:[P.penandatangan_naskahs.filter(N=>N.is_forward&&N.user_id==(l==null?void 0:l.id)).length?e.jsx(va,{to:`form?id=${Ps(P==null?void 0:P.id)}&${j}`,children:e.jsx(Va,{size:"1.5em",color:"#fbcf33",className:"cursor-pointer",title:"Edit"})}):e.jsx(e.Fragment,{}),e.jsx(va,{to:`detail?id=${Ps(P==null?void 0:P.id)}`,children:e.jsx(Oa,{size:"1.5em",color:"#17c1e8",className:"cursor-pointer",title:"View"})})]})}});const[x,S]=a.useState({page:1,rows:10,sortField:"",sortOrder:null,filters:{tanggal:{value:""},user_session_id:{value:l==null?void 0:l.id},nomor:{value:""},hal:{value:""},asal_naskah:{value:""},status_tt:{value:s??""},status_kirim:{value:n??""}}});a.useEffect(()=>{f()},[x]);const f=async()=>{B(!0),await m.getPaging(x).then(P=>{let h=P.data.result;h.data&&(C(h.last_page),W(h.data),B(!1),o({...y,to:h.to,from:h.from,total:h.total})),B(!1)}).catch(P=>{B(!1),o({...y,to:0,from:!1,total:0})})},R=os((P,h,d=null)=>{if(d){let g=d.target;for(;g&&g.tagName!=="TD";)g=g.parentNode;if(g&&g.tagName==="TD"){const c=g.querySelector(".clear-input"),v=g.querySelector("input");h?c.classList.remove("hidden"):(c.classList.add("hidden"),v.value="")}}let j={...x};j.filters[P].value=h,j.page=1,S(j)},600),u=P=>{let h={...x};h.page=P,S(h)},D=P=>{let h={...x};h.rows=P,h.page=1,S(h)},E=P=>{let h={...x};h.sortField=P,x.sortField!=P?x.sortOrder==""&&(h.sortOrder=1):x.sortOrder==1?h.sortOrder=-1:(h.sortOrder="",h.sortField=""),S(h)},J=[{value:"BELUM",label:e.jsx("div",{children:e.jsx(be,{badgeContent:"BELUM",color:"secondary",container:!0})})},{value:"SETUJU",label:e.jsx("div",{children:e.jsx(be,{badgeContent:"SETUJU",color:"success",container:!0})})},{value:"TOLAK",label:e.jsx("div",{children:e.jsx(be,{badgeContent:"DITOLAK",color:"error",container:!0})})},{value:"DIPERBAIKI",label:e.jsx(be,{badgeContent:"DIPERBAIKI",color:"warning",container:!0})}];return e.jsxs(aa,{children:[e.jsx(la,{}),t&&e.jsxs(e.Fragment,{children:[e.jsx(ie,{pt:6,pb:3,children:e.jsxs(Me,{children:[e.jsx(ie,{p:3,lineHeight:1,children:e.jsx(w,{container:!0,direction:"row",justifyContent:"space-between",alignItems:"center",children:e.jsx(w,{item:!0,children:e.jsx(le,{variant:"h5",fontWeight:"medium",children:"Daftar Tandatangan Naskah"})})})}),e.jsx("div",{className:"overflow-auto",children:e.jsxs("div",{className:"table p-10 min-w-full",children:[e.jsx("div",{className:"flex items-center justify-end mb-1",children:e.jsx(pa,{config:x,handleClick:D})}),e.jsxs("table",{className:"w-full text-sm text-left !text-gray-700 dark:text-gray-400 table-bordered",children:[e.jsx("thead",{className:"text-xs text-gray-500 uppercase border-b-2 mb-1",children:e.jsxs("tr",{children:[e.jsx(q,{text:"No",sortField:"",sortOrder:x.sortOrder,config:x,handleClick:()=>E("nomenklatur_ori")}),e.jsx(q,{text:"Tanggal Naskah"}),e.jsx(q,{text:"Nomor Naskah"}),e.jsx(q,{text:"Hal"}),e.jsx(q,{text:"Asal Naskah"}),e.jsx(q,{text:"Status Penandatangan"}),e.jsx(q,{text:"Status Kirim"}),e.jsx(q,{text:"Aksi",className:"flex justify-center min-w-[2rem]"})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{className:"border-b border-slate-300",children:[e.jsx("td",{className:"max-w-[20rem] py-6 px-2"}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"tanggal",onSearch:R,placeholder:"Tanggal Naskah",type:"input",isDate:!0})}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"nomor",onSearch:R,placeholder:"Nomor Naskah",type:"input"})}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"hal",onSearch:R,placeholder:"Hal",type:"input"})}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"asal_naskah",onSearch:R,placeholder:"Asal Naskah",type:"input"})}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"status_tt",onSearch:R,placeholder:"Status Penandatangan",type:"select",selectOption:J,defaultValue:J.find(P=>P.value==s)})}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"status_kirim",onSearch:R,placeholder:"Status Kirim",type:"select",selectOption:Tt,defaultValue:Tt.find(P=>P.value==n)})}),e.jsx("td",{})]}),p?e.jsx("tr",{className:"border-b border-slate-300",children:e.jsx("td",{colSpan:10,children:e.jsx(ia,{})})}):e.jsx(e.Fragment,{}),F.length?F.map((P,h)=>e.jsxs("tr",{className:"border-b border-slate-300",children:[e.jsx("td",{className:"max-w-[20rem] px-6 py-6",children:P.no}),e.jsx("td",{className:"max-w-[20rem] px-6 py-6",children:na(P.tanggal,1)}),e.jsx("td",{className:"max-w-[20rem] px-6 py-6",children:P.nomor}),e.jsx("td",{className:"max-w-[20rem] px-6 py-6",children:P.hal}),e.jsx("td",{className:"max-w-[20rem] px-6 py-6",children:P.asal_naskah}),e.jsx("td",{className:"max-w-[20rem] px-6 py-6",children:e.jsx("div",{className:"flex flex-col gap-2",children:P.status_ttd==="BELUM"||!P.status_ttd?e.jsx(be,{badgeContent:"BELUM",color:"secondary",container:!0}):P.status_ttd==="SETUJU"?e.jsx(be,{badgeContent:"SETUJU",color:"success",container:!0}):P.status_ttd==="DIPERBAIKI"?e.jsx(be,{badgeContent:"DIPERBAIKI",color:"warning",container:!0}):e.jsx(be,{badgeContent:"DITOLAK",color:"error",container:!0})})}),e.jsx("td",{className:"max-w-[20rem] px-6 py-6",children:P.status_send==="BELUM"?e.jsx(be,{badgeContent:"BELUM",color:"warning",container:!0}):P.status_send==="KIRIM"?e.jsx(be,{badgeContent:"SUDAH",color:"success",container:!0}):e.jsx(be,{badgeContent:"BATAL",color:"error",container:!0})}),e.jsxs("td",{className:"text-right",children:[" ",P.action," "]})]},h)):e.jsx(e.Fragment,{})]})]}),e.jsxs("nav",{className:"flex items-center justify-between p-4","aria-label":"Table navigation",children:[e.jsx("span",{className:"text-sm text-gray-400",children:y.from&&`Menampilkan ${Se(y.from)} sampai ${Se(y.to)} dari ${Se(y.total)} entri`}),e.jsx(xa,{currentPage:x.page,lastPage:_,displayCount:5,handleClick:u})]})]})})]})}),e.jsx(ua,{})]})]})},et=({onFileSelected:r,isReset:s,desc:n="",acceptedType:t=[],notifFileTypeError:i="",maxSizePerFileInMb:l=2,size:m="large",showDeleteButton:p=!0,value:B})=>{const K=a.useRef(),[W,z]=a.useState(""),[T,L]=a.useState(""),[$,M]=a.useState(""),[H,V]=a.useState(!1),[A,G]=a.useState(!1),X=a.useCallback(F=>{if(F.length>0){const x=F[0];if(t.includes(x.type)&&x.size<=l*1024*1024){G(!1),V(!1);const S=new FileReader;S.onload=()=>{z(S.result)},S.readAsDataURL(x),L(x.name),M(x.size),r(x)}else t.includes(x.type)?(G(!1),V(!0),L(""),M(""),r(null)):(G(!0),V(!1),L(""),M(""),r(null))}else G(!0),V(!1),L(""),r(null)},[]),{acceptedFiles:O,getRootProps:I,getInputProps:_,isFocused:C,isDragAccept:k,isDragReject:b,isDragActive:y}=sn({multiple:!1,onDrop:X}),o=()=>{z(""),L(""),r(null)};return a.useEffect(()=>{s&&(z(""),L(""),r(null))},[s]),e.jsxs("section",{className:"container",children:[e.jsx("input",{..._(),accept:t,ref:K}),e.jsx("div",{className:"text-red-500",children:b?e.jsx("p",{children:"File Tidak Support"}):H?e.jsxs("p",{children:["Ukuran File Maksimal ",l," MB"]}):A?e.jsx("p",{children:i}):null}),e.jsx(Xa,{className:"my-3",children:e.jsx(w,{children:e.jsxs("div",{className:"",children:[e.jsxs("div",{className:`flex ${m==="small"?"flex-row gap-2":"flex-col gap-5 "} w-full`,children:[e.jsx("div",{className:"w-full",children:e.jsx(Ye,{placeholder:"",id:"file",value:B||T,readOnly:!0})}),e.jsxs("div",{className:"flex items-center gap-2 justify-between",children:[m=="large"&&e.jsx("div",{children:e.jsx(Ca,{variant:"body2",color:"text.secondary",children:n})}),e.jsxs("div",{className:"flex gap-2 items-center",children:[p&&T?e.jsx(e.Fragment,{children:e.jsx("div",{className:"",children:e.jsx(_e,{color:"error",className:"me-2 btn btn-sm",onClick:o,type:"button",children:"Hapus"})})}):null,e.jsx("div",{className:"",children:e.jsx(_e,{className:"me-2 btn btn-sm",color:"success",onClick:()=>K.current.click(),type:"button",children:"Browse"})})]})]})]}),m=="small"&&n&&e.jsx("div",{children:e.jsx(Ca,{variant:"body2",color:"text.secondary",children:n})})]})})})]})},Kf=({naskahId:r})=>{const s=JSON.parse(Le.getItem("users")),n=gt(),t=new wr,[i,l]=a.useState(!0),[m,p]=a.useState(!0),[B,K]=a.useState({naskah_keluar_id:r,user_id:s==null?void 0:s.id,file:""}),W=async L=>{L&&(l(!1),await t.signConventional(L).then(async $=>{var M;if($.data.success){try{ut.dispatch({type:"SET_FLAG_RELOAD_PDF",payload:!0})}catch{await n.invalidateQueries({queryKey:[rn]})}Ta.loading("Memperbarui Data",{toastId:"update-naskah"}),await n.invalidateQueries({queryKey:[fr]}),await n.invalidateQueries({queryKey:[ai]}),await n.invalidateQueries({queryKey:[Qs]}).then(()=>{Ta.update("update-naskah",{render:"Data berhasil diperbarui",isLoading:!1,closeButton:!0,autoClose:5e3,type:"success",pauseOnFocusLoss:!1})}),await n.invalidateQueries({queryKey:[Is]}),await n.invalidateQueries({queryKey:[As]}),await n.invalidateQueries({queryKey:[Os]})}else U.fire({icon:"error",title:"Gagal",text:(M=$.data)==null?void 0:M.message})}).catch($=>{var H,V;const M=Oe($.response.data.result);U.fire("Gagal",M??((V=(H=$.response)==null?void 0:H.data)==null?void 0:V.message),"error")}).finally(()=>{l(!0)}))},z=async()=>{r&&(p(!1),await t.getDownloadNaskahTTD(r).then(L=>{var $,M;if(L.data.success){const H=($=L.data)==null?void 0:$.result;Wa(H==null?void 0:H.filename,H==null?void 0:H.folder,H==null?void 0:H.bucket)}else U.fire({icon:"error",title:"Gagal",text:(M=L.data)==null?void 0:M.message})}).catch(L=>{var M,H;const $=Oe(L.response.data.result);U.fire("Gagal",$??((H=(M=L.response)==null?void 0:M.data)==null?void 0:H.message),"error")}).finally(()=>p(!0)))},T=["Unduh file PDF dibawah ini","Lakukan penandatangan secara konvensional",`Unggah ulang file dengan format PDF yang sudah diberi tandatangan secara
    konvensional`,"Klik tombol Simpan"];return e.jsxs("div",{children:[e.jsx(w,{container:!0,direction:"row",justifyContent:"space-between",alignItems:"center",children:e.jsxs(w,{item:!0,className:"flex items-center gap-2",children:[e.jsx(Ks,{size:"1.5em"}),e.jsx(le,{variant:"h5",fontWeight:"medium",children:"Form Tanda Tangan Konvensional"})]})}),e.jsx(w,{mt:2,pb:4,children:e.jsxs("div",{className:"grid grid-cols-6 gap-4",children:[e.jsxs("div",{className:"col-span-6",children:[e.jsx("p",{className:"mb-4 leading-normal",children:"Tata cara penandatanganan secara Konvensional"}),e.jsx("ol",{children:T.map((L,$)=>e.jsx("li",{className:"mb-1.5 leading-normal",children:L},$))})]}),e.jsxs("div",{className:"col-span-6 flex flex-col md:flex-row gap-2 justify-between md:items-center mb-10",children:[e.jsxs("div",{className:"md:w-3/12 ",children:[e.jsx(le,{className:"mb-2",variant:"h6",children:"Unduh File PDF"}),e.jsx(Je,{submit:m,color:"info",onClick:z,text:e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx(Au,{}),"file pdf"]})})]}),e.jsx("div",{className:"md:w-9/12",children:e.jsx(ca,{initialValues:B,onSubmit:W,validateOnChange:!0,validationSchema:Ff,children:e.jsx(da,{id:"formTtd",encType:"multipart/form-data",children:e.jsx("div",{className:" grid grid-cols-1 gap-5",children:e.jsx(w,{mt:3,children:e.jsx(ce,{name:"file",children:({field:L,form:$,meta:M})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Unggah File",required:!0,error:M.error&&M.touched}),e.jsx(et,{onFileSelected:H=>{$.setFieldValue("file",H??"")},maxSizePerFileInMb:10,desc:"Format yang didukung: .PDF (Maksimal 10 MB)",acceptedType:["application/pdf"],notifFileTypeError:"File Hanya Support PDF"}),e.jsx(ue,{text:M.error,error:M.error&&M.touched})]})})})})})})})]}),e.jsx("div",{className:"col-span-6 text-right",children:e.jsx(Je,{submit:i,color:"success",formId:"formTtd",text:"Simpan"})})]})})]})},zf=({naskahId:r,data:s,action:n})=>{const t=JSON.parse(Le.getItem("users")),i=gt(),l=new wr,m=new qa,[p,B]=a.useState(!1),[K,W]=a.useState(!1),[z,T]=a.useState(!1),[L,$]=a.useState(!1),[M,H]=a.useState(!1),[V,A]=a.useState(!1),[G,X]=a.useState(!0),[O,I]=a.useState(null),[_,C]=a.useState({naskah_keluar_id:r,user_id:t==null?void 0:t.id,penandatangan_id:n==null?void 0:n.id,file:"",nomor:(n==null?void 0:n.urutan)>1||n.is_canceled?s==null?void 0:s.nomor:null,nik:t==null?void 0:t.nik,key:"1"});a.useEffect(()=>{s!=null&&s.sender_user_id&&o(s==null?void 0:s.sender_user_id)},[s]);const k=F=>{F&&U.fire({title:"Konfirmasi",text:"Mohon pastikan naskah sudah benar. Apakah Anda yakin ingin menandatangani naskah?",icon:"warning",showCancelButton:!0,confirmButtonText:"Ya, Tandatangani",cancelButtonText:"Batal",customClass:{confirmButton:"button button-success",cancelButton:"button button-info"}}).then(x=>{x.isConfirmed?b(F):U.close()})},b=async F=>{F&&(X(!1),T(!0),l.signElectronic(F).then(async x=>{var S;if(x.data.success){try{ut.dispatch({type:"SET_FLAG_RELOAD_PDF",payload:!0})}catch{await i.invalidateQueries({queryKey:[rn]})}Ta.loading("Memperbarui Data",{toastId:"update-naskah"}),await i.invalidateQueries({queryKey:[fr]}),await i.invalidateQueries({queryKey:[ai]}),await i.invalidateQueries({queryKey:[Qs]}).then(()=>{Ta.update("update-naskah",{render:"Data berhasil diperbarui",isLoading:!1,closeButton:!0,autoClose:5e3,type:"success",pauseOnFocusLoss:!1})}),await i.invalidateQueries({queryKey:[Is]}),await i.invalidateQueries({queryKey:[As]}),await i.invalidateQueries({queryKey:[Os]})}else U.fire({icon:"error",title:"Gagal",text:(S=x.data)==null?void 0:S.message})}).catch(x=>{var f,R;const S=Oe(x.response.data.result);U.fire("Gagal",S??((R=(f=x.response)==null?void 0:f.data)==null?void 0:R.message),"error")}).finally(()=>{T(!1),X(!0)}))},y=F=>{var S;A(!0);const x={singkatan_org:(S=s==null?void 0:s.detail_user_created)==null?void 0:S.singkatan_unit_kerja,sender_user_id:s==null?void 0:s.sender_user_id,organisasi_id:s==null?void 0:s.sender_user_id,jenis_naskah_id:s==null?void 0:s.jenis_naskah_id,sifat_naskah_id:s==null?void 0:s.sifat_naskah_id,klasifikasi_id:s==null?void 0:s.klasifikasi_id};l.getNomorFinal(x).then(f=>{f.data.success&&F.setFieldValue("nomor",f.data.result)}).catch(f=>{var R,u,D;if(((R=f==null?void 0:f.response)==null?void 0:R.status)==404)U.fire("Gagal",`<p>
              Pastikan <b>Tata Usaha / Sekretaris</b> telah membuat format nomor yang Anda inginkan
            </p>`,"error");else{const E=Oe(f.response.data.result);U.fire("Gagal",E??((D=(u=f.response)==null?void 0:u.data)==null?void 0:D.message),"error")}}).finally(()=>A(!1))},o=async F=>{F&&await m.detail("organisasi/instansi",F,"").then(x=>{I(x)})};return a.useEffect(()=>{C(F=>({...F,nomor:(n==null?void 0:n.urutan)>1||n.is_canceled?s==null?void 0:s.nomor:null,key:""}))},[n]),e.jsxs("div",{children:[e.jsx(w,{container:!0,direction:"row",justifyContent:"space-between",alignItems:"center",children:e.jsxs(w,{item:!0,className:"flex items-center gap-2",children:[e.jsx(Ks,{size:"1.5em"}),e.jsx(le,{variant:"h5",fontWeight:"medium",children:"Form TTE (Tanda Tangan Elektronik)"})]})}),e.jsx(w,{mt:2,pb:4,children:e.jsxs("div",{className:"grid grid-cols-1",children:[e.jsx("div",{className:" items-center mb-10",children:e.jsx(ca,{initialValues:_,onSubmit:F=>{(n==null?void 0:n.urutan)==1?k(F):b(F)},validateOnChange:!0,validationSchema:Df,enableReinitialize:!0,children:e.jsx(da,{id:"formTte",encType:"multipart/form-data",children:e.jsxs("div",{className:"grid grid-cols-6 gap-2",children:[e.jsx(w,{mt:3,className:"col-span-6",children:e.jsx(ce,{name:"nomor",children:({field:F,form:x,meta:S})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Nomor Naskah",required:!0,error:S.error&&S.touched}),e.jsxs("div",{className:"flex flex-nowrap gap-2",children:[e.jsx(Ye,{...F,type:"text",placeholder:"Masukkan nomor naskah",error:S.error&&S.touched,disabled:(n==null?void 0:n.urutan)>1||(n==null?void 0:n.is_canceled)==!0}),(n==null?void 0:n.urutan)<2&&!n.is_canceled&&e.jsx(Je,{color:"info",text:"Ambil Nomor",submit:!V,onClick:()=>y(x),size:"small",className:"text-sm whitespace-nowrap"})]}),(n==null?void 0:n.urutan)<2&&!n.is_canceled&&e.jsxs("div",{className:"text-xs ps-1 text-blue-500 mt-1",children:["Pastikan terdapat ",e.jsx("b",{children:"Nomor Naskah"})," yang tercantum, jika tidak ada klik tombol ",e.jsx("b",{children:"Ambil Nomor"})]}),e.jsx(ue,{text:S.error,error:S.error&&S.touched})]})})}),e.jsx(w,{mt:3,className:"col-span-4",children:e.jsx(ce,{name:"nik",children:({field:F,form:x,meta:S})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Nomor Induk Kependudukan",required:!0,error:S.error&&S.touched}),e.jsx(Ye,{...F,type:"text",placeholder:"Masukkan NIK..",error:S.error&&S.touched,disabled:!0}),e.jsx(ue,{text:S.error,error:S.error&&S.touched})]})})}),e.jsx(w,{mt:3,className:"col-span-2",children:e.jsx("div",{className:"relative",children:e.jsx(ce,{name:"key",children:({field:F,form:x,meta:S})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Key Phrase",required:!0,error:S.error&&S.touched}),e.jsx(Ye,{...F,type:L?"text":"password",placeholder:"Masukan Key Phrase",error:S.error&&S.touched}),e.jsxs("div",{className:"absolute top-11 right-0 pr-7 flex items-center text-sm leading-5",children:[e.jsx(xr,{onClick:()=>$(!1),className:`text-xl cursor-pointer ${L?"block":"hidden"}`}),e.jsx(pr,{onClick:()=>$(!0),className:`text-xl cursor-pointer ${L?"hidden":"block"}`})]}),e.jsx(ue,{text:S.error,error:S.error&&S.touched})]})})})})]})})})}),e.jsx("div",{className:"text-right",children:e.jsx(Je,{submit:G,color:"success",formId:"formTte",text:"Tandatangani"})})]})})]})},Uf=()=>{var Ae,Ue,ma,La,We,qe,He,Ve,Ha,Xe,xs,Ya,ks;const r=gt(),[s,n]=a.useState(!1),[t,i]=a.useState(!1),[l,m]=a.useState(!1),p=JSON.parse(Le.getItem("users")),B=new wr,K=new Ts,W=new Gt,[z,T]=a.useState(!1),[L,$]=a.useState(!1),[M,H]=a.useState(!1),[V,A]=a.useState(!1),[G,X]=a.useState(!1),O=new qa,I=ga(),_=ha(),[C,k]=a.useState([]),[b,y]=a.useState(!1),[o,F]=a.useState([]),[x,S]=a.useState({id:((Ae=I.state)==null?void 0:Ae.id)??null}),[f,R]=a.useState({}),[u,D]=a.useState(null),[E,J]=a.useState(!0),P=ut.getState().flag.loadingTtd,h=ut.getState().flag.loadingNaskah,[d,j]=a.useState({user_session_id:p==null?void 0:p.id,naskah_keluar_id:x==null?void 0:x.id,keterangan:""}),[g,c]=a.useState({verifikator_id:null,forward_for:"verifikator",user_id:p==null?void 0:p.id,penandatangan_id:null,naskah_keluar_id:x.id}),v="";a.useEffect(()=>{const Ba=new URLSearchParams(I.search).get("id");if(Ba&&!x.id){const Sa=Js(Ba);S(Ra=>({...Ra,id:Number(Sa)})),j(Ra=>({...Ra,naskah_keluar_id:Number(Sa)})),c(Ra=>({...Ra,naskah_keluar_id:Number(Sa)}))}},[I.search]);const{data:N,isLoading:Q,isError:re,refetch:ye}=ds({refetchOnWindowFocus:!1,enabled:!!x.id,queryKey:[Qs,x.id],queryFn:()=>B.getDetailNaskah(x.id).then(Pa=>{var Ba,Sa;return De((Sa=(Ba=Pa==null?void 0:Pa.data)==null?void 0:Ba.result)==null?void 0:Sa.klasifikasi_id),Pa.data.result})});a.useEffect(()=>{n(!0),Q?Ta.loading("Mengambil data Naskah",{toastId:"load-nk"}):Ta.update("load-nk",{render:"Data naskah berhasil didapatkan",isLoading:!1,closeButton:!0,autoClose:5e3,type:"success",pauseOnFocusLoss:!1}),re&&Ta.update("load-nk",{render:"Terjadi Kesalahan",isLoading:!1,closeButton:!0,type:"error",pauseOnFocusLoss:!1})},[Q,re]),a.useEffect(()=>{x.id&&ke()},[x.id]);const{data:xe,isLoading:fe,isError:Ge,refetch:$e}=ds({enabled:!!x.id&&!!L,queryKey:[rn,x.id,L],queryFn:()=>W.getContent({id:x.id}).then(async Pa=>{const Ba=Pa;return await Hs(Ba.file_convert,Ba.file_path??"naskah-keluar",null,0,N.created_at)})}),{data:Pe,isLoading:te,isError:ne,refetch:pe}=ds({refetchOnWindowFocus:!1,enabled:!!(x!=null&&x.id),queryKey:[Pt,x.id],queryFn:()=>K.currentPenandatangan({naskah_keluar_id:x.id}).then(Pa=>{var Sa;return(Sa=Pa.data.result)==null?void 0:Sa.current_verif})}),{data:he,isLoading:oe,isError:je,refetch:Ne}=ds({refetchOnWindowFocus:!1,enabled:!!x.id,queryKey:[fr,x.id],queryFn:()=>B.getPagingPenandatanganan({naskah_keluar_id:x.id,rows:100}).then(Pa=>{var Sa,Ra,bs;return((bs=(Ra=(Sa=Pa.data)==null?void 0:Sa.result)==null?void 0:Ra.data)==null?void 0:bs.filter(At=>At.user_id==(p==null?void 0:p.id)))[0]})});a.useEffect(()=>{P&&(Ta.loading("Memperbarui Data",{toastId:"update-data"}),ye(),Ne().then(()=>{Ta.update("update-data",{render:"Data berhasil diperbarui",isLoading:!1,closeButton:!0,autoClose:5e3,type:"success",pauseOnFocusLoss:!1}),ut.dispatch({type:"SET_FLAG_LOADING_TTD",payload:!1})}))},[P]),a.useEffect(()=>{h&&(Ta.loading("Memperbarui Data",{toastId:"update-naskah"}),Ne(),ye().then(()=>{Ta.update("update-naskah",{render:"Data berhasil diperbarui",isLoading:!1,closeButton:!0,autoClose:5e3,type:"success",pauseOnFocusLoss:!1}),ut.dispatch({type:"SET_FLAG_LOADING_NASKAH",payload:!1})}))},[h]);const Re=async()=>{const Pa={user_session_id:p==null?void 0:p.id,naskah_keluar_id:x==null?void 0:x.id};x!=null&&x.id&&(J(!1),await B.send(Pa).then(async Ba=>{var Sa,Ra;Ba.data.success?(await r.invalidateQueries({queryKey:[Qs]}),await r.invalidateQueries({queryKey:[Pt]}),T(!1),U.fire({icon:"success",title:"Berhasil",text:(Sa=Ba.data)==null?void 0:Sa.message,showConfirmButton:!1,timer:1500}),await r.invalidateQueries({queryKey:[Is]}),await r.invalidateQueries({queryKey:[As]}),await r.invalidateQueries({queryKey:[Os]})):U.fire({icon:"warning",title:"Gagal",text:(Ra=Ba.data)==null?void 0:Ra.message,showConfirmButton:!1,timer:1500})}).catch(Ba=>{var Ra,bs;const Sa=Oe(Ba.response.data.result);U.fire("Gagal",Sa??((bs=(Ra=Ba.response)==null?void 0:Ra.data)==null?void 0:bs.message),"error")}).finally(()=>{J(!0)}))},sa=async Pa=>{Pa&&(m(!0),await B.cancel(Pa).then(async Ba=>{var Sa,Ra;Ba.data.success?(Ke(),await ye(),await r.invalidateQueries({queryKey:[Pt]}),U.fire({icon:"success",title:"Berhasil",text:(Sa=Ba.data)==null?void 0:Sa.message,showConfirmButton:!1,timer:1500}),await r.invalidateQueries({queryKey:[Is]}),await r.invalidateQueries({queryKey:[As]}),await r.invalidateQueries({queryKey:[Os]})):U.fire({icon:"warning",title:"Gagal",text:(Ra=Ba.data)==null?void 0:Ra.message,showConfirmButton:!1,timer:1500})}).catch(Ba=>{var Ra,bs;const Sa=Oe(Ba.response.data.result);U.fire("Gagal",Sa??((bs=(Ra=Ba.response)==null?void 0:Ra.data)==null?void 0:bs.message),"error")}).finally(()=>m(!1)))},Te=async()=>{U.fire({title:"Teruskan ke konseptor",text:"Apakah Anda yakin ingin mengembalikan naskah ini ke konseptor?",icon:"question",showCancelButton:!0,confirmButtonText:"Ya, Teruskan",cancelButtonText:"Batal",customClass:{confirmButton:"button button-info",cancelButton:"button button-error"}}).then(async Pa=>{if(Pa.isConfirmed){const Ba={naskah_keluar_id:x.id,from:"penandatangan",user_id:p==null?void 0:p.id};J(!1),U.fire({text:"Harap tunggu, sedang memproses!",icon:"info",showConfirmButton:!1,showCancelButton:!1,allowOutsideClick:!1}),await K.sendKonseptor(Ba).then(async Sa=>{var Ra;Sa.data.success?(ye(),await Ne(),await r.invalidateQueries({queryKey:[Pt]}),await r.invalidateQueries({queryKey:[Is]}),await r.invalidateQueries({queryKey:[As]}),await r.invalidateQueries({queryKey:[Os]})):U.fire({icon:"warning",title:"Gagal",text:(Ra=Sa.data)==null?void 0:Ra.message,showConfirmButton:!1,timer:1500})}).catch(Sa=>{var bs,At;const Ra=Oe(Sa.response.data.result);U.fire("Gagal",Ra??((At=(bs=Sa.response)==null?void 0:bs.data)==null?void 0:At.message),"error")}).finally(()=>{J(!0),U.close()})}else U.close()})},me=async Pa=>{const Ba={forward_for:Pa.verifikator_id?"verifikator":"penandatangan",verifikator_id:Pa.verifikator_id,penandatangan_id:Pa.penandatangan_id,from:"penandatangan",user_id:p==null?void 0:p.id,naskah_keluar_id:x.id};Ba.naskah_keluar_id&&(J(!1),ea(),Qe(),U.fire({text:"Harap tunggu, sedang memproses!",icon:"info",showConfirmButton:!1,showCancelButton:!1,allowOutsideClick:!1}),await K.sendVerifikator(Ba).then(async Sa=>{var Ra,bs;Sa.data.success?(D(!1),await ye(),await Ne(),await r.invalidateQueries({queryKey:[Pt]}),U.fire({icon:"success",title:"Berhasil",text:(Ra=Sa.data)==null?void 0:Ra.message,showConfirmButton:!1,timer:1500}),await r.invalidateQueries({queryKey:[Zr]}),await r.invalidateQueries({queryKey:[ai]}),await r.invalidateQueries({queryKey:[Is]}),await r.invalidateQueries({queryKey:[As]}),await r.invalidateQueries({queryKey:[Os]})):U.fire({icon:"warning",title:"Gagal",text:(bs=Sa.data)==null?void 0:bs.message,showConfirmButton:!1,timer:1500})}).catch(Sa=>{var bs,At;const Ra=Oe(Sa.response.data.result);U.fire("Gagal",Ra??((At=(bs=Sa.response)==null?void 0:bs.data)==null?void 0:At.message),"error")}).finally(()=>{J(!0),U.close()}))},ee=()=>{_(v+"/pembuatan-naskah-keluar/tandatangan-naskah")},Y=async()=>{const Pa={page:1,rows:1e3,sortField:"id",sortOrder:1,naskah_id:x.id,naskah:"KELUAR"};y(!0),await O.select("naskah-dinas/tujuan-naskah",Pa,"nk").then(Ba=>{k(Ba)}).finally(()=>y(!1))},ke=async(Pa=!1)=>{const Ba={naskah_id:x==null?void 0:x.id,naskah:"KELUAR",page:1,rows:300};i(!0),await B.getPagingLampiran(Ba).then(Sa=>{let Ra=Sa.data.result.data;Ra&&(F(Ra),i(!1)),i(!1)}).catch(Sa=>{console.log({error:Sa}),i(!1)})},De=async Pa=>{Pa&&await O.detail("klasifikasi",Pa,"master").then(Ba=>{R(Ba)})},ta=()=>{T(!z),C.length||Y()},Be=()=>{T(!1)},Fe=()=>{$(!1)},Ke=()=>{H(!1)},Qe=()=>{A(!1)},ea=()=>{X(!1)},ja=Pa=>{Pa=="self"||(Pa=="konsep"?Te():Pa=="verif"?(A(!0),D(!1)):Pa=="ttd"&&(X(!0),D(!1)))},Aa=()=>e.jsxs(Ls,{anchorEl:u,anchorOrigin:{vertical:"bottom",horizontal:"left"},open:!!u,onClose:()=>D(!1),sx:{mt:2,zIndex:10},children:[e.jsx(Ma,{title:"Ke Konseptor",onClick:()=>ja("konsep")}),e.jsx(Ma,{title:"Ke Verifikator",onClick:()=>ja("verif")}),e.jsx(Ma,{title:"Ke Penandatangan",onClick:()=>ja("ttd")})]}),Ee=e.jsxs(w,{px:4,height:"100%",children:[e.jsx(le,{variant:"body2",children:"Apakah Anda yakin ingin mengirim Naskah berikut?"}),fe?e.jsx("div",{className:"flex flex-col items-center justify-center h-full",children:e.jsx(rs,{})}):xe&&e.jsx("iframe",{className:"w-full h-full pt-3 pb-12 md:py-5",src:`${xe}`})]}),ve=e.jsxs(w,{px:4,children:[e.jsxs(le,{variant:"body2",children:["Apakah Anda yakin akan mengirim Naskah dengan nomor ",e.jsx("b",{children:N==null?void 0:N.nomor})," yang akan diterima oleh:"]}),e.jsxs("table",{className:"mt-4 border-none w-full",children:[e.jsx("thead",{className:"text-gray-500 border-b-2 mb-1",children:e.jsxs("tr",{children:[e.jsx("td",{className:"p-2",children:e.jsx(le,{variant:"h6",children:"Kepada"})}),e.jsx("td",{className:"p-2",children:e.jsx(le,{variant:"h6",children:"Jenis"})}),e.jsx("td",{className:"p-2",children:e.jsx(le,{variant:"h6",children:"Unit Kerja / Instansi"})})]})}),e.jsxs("tbody",{children:[b?e.jsx("tr",{className:"border-b border-slate-300",children:e.jsx("td",{colSpan:3,children:e.jsx(ia,{})})}):e.jsx(e.Fragment,{}),C.map(Pa=>e.jsxs("tr",{className:"border-b",children:[e.jsxs("td",{className:"p-2",children:[Pa.nama," - ",Pa.jabatan]}),e.jsx("td",{className:"p-2",children:Pa.jenis}),e.jsx("td",{className:"p-2",children:`${!Pa.nama_organisasi||Pa.nama_organisasi=="null"?"":Pa.nama_organisasi} / ${Pa.instansi}`})]},Pa.id))]})]})]});return e.jsxs(aa,{children:[e.jsx(la,{}),s&&e.jsxs(e.Fragment,{children:[e.jsxs(ie,{pt:6,pb:3,className:"flex flex-col gap-10",children:[e.jsx(ie,{children:e.jsxs("div",{className:"flex justify-between p-3 items-center",children:[e.jsx(le,{variant:"h5",fontWeight:"medium",children:"Detail Penandatangan Naskah Keluar"}),e.jsxs("div",{className:"flex flex-wrap justify-end gap-3",children:[((Ue=N==null?void 0:N.last_penandatangan)==null?void 0:Ue.status)=="SETUJU"&&((ma=N==null?void 0:N.last_penandatangan)==null?void 0:ma.is_signed)&&((La=N.status_send)==null?void 0:La.status)==="BELUM"&&e.jsx("div",{children:e.jsxs(_e,{variant:"gradient",color:"error",onClick:()=>H(!0),children:[e.jsx(Jr,{size:"1.5em",className:"me-2"}),e.jsx("p",{className:"whitespace-nowrap",children:"Batal Kirim"})]})}),((We=N==null?void 0:N.last_penandatangan)==null?void 0:We.status)=="SETUJU"&&((qe=N==null?void 0:N.last_penandatangan)==null?void 0:qe.is_signed)&&((He=N.status_send)==null?void 0:He.status)==="BELUM"&&e.jsx("div",{children:e.jsxs(_e,{variant:"gradient",color:"success",onClick:()=>$(!0),children:[e.jsx(rt,{size:"1.5em",className:"me-2"}),e.jsx("p",{className:"whitespace-nowrap",children:"Kirim Naskah"})]})}),(Pe==null?void 0:Pe.user_id)==(p==null?void 0:p.id)&&(Pe==null?void 0:Pe.status)=="TOLAK"&&!(Pe!=null&&Pe.do_forward)&&e.jsx("div",{className:"me-3",children:e.jsxs(ie,{children:[e.jsxs(_e,{variant:"gradient",color:"info",onClick:Pa=>D(Pa.currentTarget),children:[e.jsx(nt,{size:"1.5em",className:"me-2"}),"Teruskan"]}),Aa()]})}),e.jsxs(_e,{variant:"gradient",color:"secondary",onClick:ee,children:[e.jsx(za,{size:"1.5em",className:"me-2"}),"Kembali"]})]})]})}),(N==null?void 0:N.last_penandatangan.id)==(he==null?void 0:he.id)&&(he==null?void 0:he.status)=="SETUJU"&&(he==null?void 0:he.is_signed)&&((Ve=N.status_send)==null?void 0:Ve.status)==="BELUM"&&e.jsxs("div",{className:"flex justify-between gap-3 mb-8 p-5 items-center bg-gradient-to-r from-gray-400 to-gray-500 rounded-2xl",children:[e.jsx(Gi,{size:"5em",className:"text-white"}),e.jsxs("div",{children:[e.jsx(le,{variant:"h5",fontWeight:"medium",align:"right",color:"white",children:"Naskah ini belum dikirim"}),e.jsx("div",{className:"text-right",children:e.jsx(le,{variant:"caption",fontWeight:"medium",color:"light",children:"Pastikan Penandatangan naskah ini sudah memberikan Tanda Tangan sesuai dengan Tipe Tanda Tangan"})})]})]}),(N==null?void 0:N.last_penandatangan.id)==(he==null?void 0:he.id)&&(he==null?void 0:he.status)=="SETUJU"&&(he==null?void 0:he.is_signed)&&((Ha=N.status_send)==null?void 0:Ha.status)==="KIRIM"&&e.jsxs("div",{className:"flex justify-between gap-3 p-5 items-center bg-gradient-to-r from-teal-400 to-teal-500 rounded-2xl",children:[e.jsx(Xs,{size:"5em",className:"text-white"}),e.jsxs("div",{children:[e.jsx(le,{variant:"h5",fontWeight:"medium",align:"right",color:"white",children:"Naskah ini telah dikirim"}),e.jsxs(le,{variant:"caption",fontWeight:"medium",align:"right",color:"light",children:["Pada hari ",na((Xe=N==null?void 0:N.status_send)==null?void 0:Xe.updated_at)]})]})]}),(N==null?void 0:N.last_penandatangan.id)==(he==null?void 0:he.id)&&(he==null?void 0:he.status)=="SETUJU"&&(he==null?void 0:he.is_signed)&&((xs=N.status_send)==null?void 0:xs.status)==="BATAL"&&e.jsxs("div",{className:"flex justify-between gap-3 mb-8 p-5 items-center bg-gradient-to-r from-red-400 to-red-500 rounded-2xl",children:[e.jsx(Jr,{size:"5em",className:"text-white"}),e.jsxs("div",{children:[e.jsx(le,{variant:"h5",fontWeight:"medium",align:"right",color:"white",children:"Naskah ini dibatalkan"}),e.jsx("div",{className:"text-right",children:e.jsxs(le,{variant:"caption",fontWeight:"medium",color:"light",children:["Karena: ",(Ya=N==null?void 0:N.status_send)==null?void 0:Ya.keterangan]})})]})]}),e.jsx(ii,{data:N,klasifikasi:f,lampiran:o,naskahId:x.id}),e.jsx(Me,{children:e.jsx(ie,{px:3,pt:3,lineHeight:1,children:e.jsx(si,{naskahId:x.id})})}),e.jsx(Me,{children:e.jsx(ie,{px:3,pt:3,lineHeight:1,children:e.jsx(ti,{naskahId:x.id,crud:((ks=N==null?void 0:N.status_send)==null?void 0:ks.status)=="BELUM",action:he})})}),(he==null?void 0:he.status)=="SETUJU"&&!(he!=null&&he.is_signed)?e.jsx(e.Fragment,{children:(N==null?void 0:N.ttd)!="TTE"?e.jsx(Me,{children:e.jsx(ie,{px:3,pt:3,lineHeight:1,children:e.jsx(Kf,{naskahId:x.id})})}):e.jsx(Me,{children:e.jsx(ie,{px:3,pt:3,lineHeight:1,children:e.jsx(zf,{naskahId:x.id,data:N,action:he})})})}):e.jsx(e.Fragment,{}),e.jsx(Me,{children:e.jsx(ie,{px:3,pt:3,lineHeight:1,children:e.jsx(ri,{naskahId:x.id,naskahFilePath:N==null?void 0:N.file_path})})}),e.jsx(Me,{children:e.jsx(ie,{px:3,pt:3,lineHeight:1,children:e.jsx(ni,{naskahId:x.id,status_send:N==null?void 0:N.status_send})})})]}),e.jsx(ua,{})]}),e.jsxs(Fa,{open:L,onClose:Fe,height:"large",children:[e.jsxs(_a,{className:"flex items-center gap-2 text-teal-600 ",children:[e.jsx(qt,{className:"w-12 h-11 me-5"}),e.jsx(le,{children:"Kirim Naskah"})]}),Ee,e.jsx(ya,{children:e.jsxs(e.Fragment,{children:[e.jsx(_e,{color:"success",variant:"gradient",onClick:()=>{Fe(),ta()},children:"Ya, Lanjutkan"}),e.jsx(_e,{color:"error",variant:"gradient",onClick:Fe,children:"Tutup"})]})})]}),e.jsxs(Fa,{open:z,onClose:Be,children:[e.jsxs(_a,{className:"flex items-center gap-2 text-teal-600 ",children:[e.jsx(qt,{className:"w-12 h-11 me-5"}),e.jsx(le,{children:"Kirim Naskah"})]}),ve,e.jsx(ya,{children:e.jsxs(e.Fragment,{children:[e.jsx(Je,{submit:E,color:"success",text:"Ya, Kirim",onClick:Re}),e.jsx(_e,{color:"error",variant:"gradient",onClick:Be,children:"Tutup"})]})})]}),e.jsxs(Fa,{open:M,onClose:Ke,children:[e.jsxs("div",{children:[e.jsxs(_a,{className:"flex items-center gap-2 text-red-600 ",children:[e.jsx(Jr,{className:"w-6 h-6 me-2"}),e.jsx(le,{children:"Batal Kirim"})]}),e.jsx(ca,{initialValues:d,onSubmit:sa,validateOnChange:!0,validationSchema:Cf,children:e.jsx(da,{id:"formBatal",encType:"multipart/form-data",children:e.jsx("div",{className:"p-6 grid grid-cols-1 mb-10 gap-5",children:e.jsx(w,{children:e.jsx(ce,{name:"keterangan",children:({field:Pa,form:Ba,meta:Sa})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Dibatalkan karena",required:!0,error:Sa.error&&Sa.touched}),e.jsx(Ka,{...Pa,placeHolder:"Masukkan keterangan..",error:Sa.error&&Sa.touched,rows:8}),e.jsx(ue,{text:Sa.error,error:Sa.error&&Sa.touched})]})})})})})})]}),e.jsx(ya,{children:e.jsxs(e.Fragment,{children:[e.jsx(Je,{submit:!l,color:"success",formId:"formBatal",text:"Ya, Batalkan"}),e.jsx(_e,{color:"secondary",variant:"gradient",onClick:Ke,children:"Tutup"})]})})]}),e.jsxs(Fa,{open:V,onClose:Qe,children:[e.jsxs("div",{children:[e.jsxs(_a,{className:"flex items-center gap-2",children:[e.jsx(Ti,{size:"1.5em"}),e.jsx(le,{children:"Form Meneruskan"})]}),e.jsx(ca,{initialValues:g,onSubmit:me,validateOnChange:!0,validationSchema:bd,children:e.jsx(da,{id:"formVerifikator",className:"text-sm",children:e.jsx("div",{className:"mb-6 px-2",children:e.jsx(w,{mt:1,children:e.jsx(Na,{children:e.jsx(ce,{name:"verifikator_id",children:({field:Pa,form:Ba,meta:Sa})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Verifikator",required:!0,error:Sa.error&&Sa.touched}),e.jsx(ra,{url:"verifikator-naskah/verifikators",callbackChange:Ra=>{Ra?Ba.setFieldValue("verifikator_id",(Ra==null?void 0:Ra.id)??""):Ba.resetForm()},keyValue:["id","nama"],placeholder:"Pilih Verifikator...",className:"text-base",targetService:"nk",menuPortalTarget:null,optionParam:{naskah_keluar_id:x.id}}),e.jsx(ue,{text:Sa.error,error:Sa.error&&Sa.touched})]})})})})})})})]}),e.jsx(ya,{children:e.jsxs(e.Fragment,{children:[e.jsx(Je,{submit:E,color:"success",formId:"formVerifikator",text:"Ya, Teruskan"}),e.jsx(_e,{color:"error",variant:"gradient",onClick:Qe,children:"Batal"})]})})]}),e.jsxs(Fa,{open:G,onClose:ea,children:[e.jsxs("div",{children:[e.jsxs(_a,{className:"flex items-center gap-2",children:[e.jsx(Ti,{size:"1.5em"}),e.jsx(le,{children:"Form Meneruskan"})]}),e.jsx(ca,{initialValues:g,onSubmit:me,validateOnChange:!0,validationSchema:If,children:e.jsx(da,{id:"formPenandatangan",className:"text-sm",children:e.jsx("div",{className:"mb-6 px-2",children:e.jsx(w,{mt:1,children:e.jsx(Na,{children:e.jsx(ce,{name:"penandatangan_id",children:({field:Pa,form:Ba,meta:Sa})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Penandatangan",required:!0,error:Sa.error&&Sa.touched}),e.jsx(ra,{url:"log-naskah/log-naskah-keluar/penandatangan/feedback",callbackChange:Ra=>{Ra?Ba.setFieldValue("penandatangan_id",(Ra==null?void 0:Ra.id)??""):Ba.resetForm()},keyValue:["id","nama"],placeholder:"Pilih Penandatangan...",className:"text-base",targetService:"nk",menuPortalTarget:null,optionParam:{naskah_keluar_id:x.id}}),e.jsx(ue,{text:Sa.error,error:Sa.error&&Sa.touched})]})})})})})})})]}),e.jsx(ya,{children:e.jsxs(e.Fragment,{children:[e.jsx(Je,{submit:E,color:"success",formId:"formPenandatangan",text:"Ya, Teruskan"}),e.jsx(_e,{color:"error",variant:"gradient",onClick:ea,children:"Batal"})]})})]})]})},Vf=()=>{const r="Naskah Keluar",s=ga(),n=new URLSearchParams(s.search).get("start_at"),t=new URLSearchParams(s.search).get("end_at"),i=new URLSearchParams(s.search).get("jenis_id"),l=new URLSearchParams(s.search).get("sifat_id"),m=new URLSearchParams(s.search).get("klasifikasi_id"),[p,B]=a.useState(!1);a.useEffect(()=>{B(ge(r,"is_read",!0,!0)),F(i),x(l),S(m)},[]);const K=new Gt,W=new qa,[z,T]=a.useState(!1),[L,$]=a.useState(null),[M,H]=a.useState(null),[V,A]=a.useState(null),[G,X]=a.useState(null),[O,I]=a.useState(!1),[_,C]=a.useState(!1);let k=[];L==null?k=[]:k=L.map((u,D)=>({no:D+1,tanggal:u.tanggal,nomor:u.nomor,hal:u.hal,organisasi_created_nama:u.organisasi_created_nama,urgensi_naskah_nama:u.urgensi_naskah_nama,sender_user_nama:u.sender_user_nama,jenis_naskah_nama:u.jenis_naskah_nama}));const[b,y]=a.useState({start_at:n,end_at:t,jenis_id:i,sifat_id:l,klasifikasi_id:m});a.useEffect(()=>{o()},[b]);const o=async()=>{T(!0),await K.getLaporan(b).then(u=>{let D=u.data.result;D&&($(D),T(!1)),T(!1)}).catch(u=>{T(!1)})},F=async u=>{u&&await W.detail("tatanaskah/jenis-naskah",u,"master").then(D=>{H(D)})},x=async u=>{u&&await W.detail("tatanaskah/sifat-naskah",u,"master").then(D=>{A(D)})},S=async u=>{u&&await W.detail("klasifikasi",u,"master").then(D=>{X(D)})},f=async()=>{I(!0),await K.downloadLaporanPdf(b).then(u=>{const D=`Laporan Naskah Keluar_${(M==null?void 0:M.jenis_naskah)||"Semua Jenis"}_${(V==null?void 0:V.sifat_naskah)||"Semua Sifat"}_${(G==null?void 0:G.nama)||"Semua Klasifikasi"}_${oa(b==null?void 0:b.start_at).format("YYYY-MM-DD")}-${oa(b==null?void 0:b.end_at).format("YYYY-MM-DD")}.pdf`;es(u.data,D)}).catch(u=>{console.log({error:u})}).finally(()=>I(!1))},R=async()=>{C(!0),await K.downloadLaporanExcel(b).then(u=>{const D=`Laporan Naskah Keluar_${(M==null?void 0:M.jenis_naskah)||"Semua Jenis"}_${(V==null?void 0:V.sifat_naskah)||"Semua Sifat"}_${(G==null?void 0:G.nama)||"Semua Klasifikasi"}_${oa(b==null?void 0:b.start_at).format("YYYY-MM-DD")}-${oa(b==null?void 0:b.end_at).format("YYYY-MM-DD")}.xls`;es(u.data,D)}).catch(u=>{console.log({error:u})}).finally(()=>C(!1))};return e.jsx(e.Fragment,{children:e.jsxs(aa,{children:[p&&e.jsx(ie,{pt:6,pb:3,children:e.jsxs(Me,{children:[e.jsxs("div",{className:"flex gap-2 m-4",children:[e.jsx(Je,{color:"error",text:e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx(ts,{size:"2em",className:"pe-2"}),"PDF"]}),submit:!O,onClick:f,size:"small",className:"text-sm whitespace-nowrap"}),e.jsx(Je,{color:"success",text:e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx($s,{size:"2em",className:"pe-2"}),"Excel"]}),submit:!_,onClick:R,size:"small",className:"text-sm whitespace-nowrap"})]}),e.jsxs(ie,{px:3,pt:3,lineHeight:1,className:"flex flex-col items-center justify-center",children:[e.jsx("div",{className:"mb-3 text-center",children:e.jsxs(le,{variant:"h3",fontWeight:"medium",children:["Daftar ",r]})}),e.jsxs(le,{variant:"h5",fontWeight:"medium",children:[na(n,2)," - ",na(t,2)]}),e.jsxs(le,{variant:"h6",fontWeight:"medium",children:["Jenis: ",(M==null?void 0:M.jenis_naskah)||"Semua"]}),e.jsxs(le,{variant:"h6",fontWeight:"medium",children:["Sifat: ",(V==null?void 0:V.sifat_naskah)||"Semua"]}),e.jsxs(le,{variant:"h6",fontWeight:"medium",children:["Klasifikasi: ",(G==null?void 0:G.nama)||"Semua"]})]}),e.jsx("div",{className:"overflow-auto",children:e.jsxs("div",{className:"table p-10 min-w-full",children:[e.jsxs("table",{className:"w-full text-sm text-left !text-gray-700 dark:text-gray-400 table-bordered",children:[e.jsx("thead",{className:"text-xs text-gray-500 uppercase border-b-2 mb-1",children:e.jsxs("tr",{children:[e.jsx(q,{text:"No",className:"flex justify-center"}),e.jsx(q,{text:"Tanggal Naskah"}),e.jsx(q,{text:"Nomor Naskah"}),e.jsx(q,{text:"Hal"}),e.jsx(q,{text:"Dikirim Melalui Unit"}),e.jsx(q,{text:"Jenis Naskah"})]})}),e.jsxs("tbody",{children:[z?e.jsx("tr",{children:e.jsx("td",{colSpan:9,children:e.jsx(ia,{})})}):e.jsx(e.Fragment,{}),k.length?k.map((u,D)=>e.jsxs("tr",{className:"border-b border-slate-300",children:[e.jsx("td",{className:"px-6 py-6 text-center",children:u.no}),e.jsx("td",{className:" max-w-[9rem] px-6 py-6",children:e.jsx("div",{className:"flex-wrap",children:zs(u.tanggal)})}),e.jsx("td",{className:" max-w-[9rem] px-6 py-6",children:e.jsx("div",{className:"flex-wrap",children:u.nomor})}),e.jsx("td",{className:" max-w-[9rem] px-6 py-6",children:e.jsx("div",{className:"flex-wrap",children:u.hal})}),e.jsx("td",{className:" max-w-[9rem] px-6 py-6",children:e.jsx("div",{className:"flex-wrap",children:u.sender_user_nama})}),e.jsx("td",{className:" max-w-[9rem] px-6 py-6",children:e.jsx("div",{className:"flex-wrap",children:u.jenis_naskah_nama})})]},D)):e.jsx(e.Fragment,{})]})]}),e.jsx("nav",{className:"flex items-center justify-between p-4","aria-label":"Table navigation",children:e.jsxs("span",{className:"text-sm text-gray-400",children:["Menampilkan ",L==null?void 0:L.length," entri"]})})]})})]})}),e.jsx(ua,{})]})})},qf=fa().shape({nama_pengirim:ze().required("Nama Pengirim harus diisi"),jabatan_pengirim:ze().required("Jabatan Pengirim harus dipilih"),instansi_pengirim:ze().required("Instansi Pengirim harus dipilih"),jenis_naskah_id:wa().min(1,"Pilih Jenis Naskah").required("Jenis Naskah harus dipilih"),sifat_naskah_id:wa().min(1,"Pilih Sifat Naskah").required("Sifat Naskah harus dipilih"),nomor:ze().required("Nomor Naskah Pengirim harus dipilih"),tanggal:jr().required("Tanggal Harus Di pilih"),received_at:jr().required("Tanggal Harus Di pilih"),hal:ze().required("Hal harus diisi"),ringkasan:ze().required("Isi Ringkas harus diisi"),file:Qa().required("File Naskah Harus Diisi"),tembusans:vs(),tujuans:vs().test("is-required","Tujuan harus diisi, jika Tembusan tidak diisi",function(r){const s=this.parent.tujuans;return this.parent.tembusans.length==0&&(!s||s.length==0)?!!r&&r.length>0:!0})}),Hf={flex:1,display:"flex",flexDirection:"column",alignItems:"center",padding:"20px",borderWidth:2,borderRadius:2,borderColor:"#eeeeee",borderStyle:"dashed",backgroundColor:"#fafafa",color:"#bdbdbd",outline:"none",transition:"border .24s ease-in-out",minHeight:"200px",justifyContent:"center"},Gf={borderColor:"#2196f3"},Wf={borderColor:"#00e676"},Jf={borderColor:"#ff1744"},nl=({onFileSelected:r,isReset:s,desc:n="",descBox:t="",accaptedType:i=[],notifFileTypeError:l="",maxSizePerFileInMb:m=2,form:p=null,error:B=!1})=>{const K=a.useRef(),[W,z]=a.useState(""),[T,L]=a.useState(""),[$,M]=a.useState(""),[H,V]=a.useState(!1),[A,G]=a.useState(!1),X=a.useCallback(S=>{if(S.length>0){const f=S[0];if(i.includes(f.type)&&f.size<=m*1024*1024){G(!1),V(!1);const R=new FileReader;R.onload=()=>{z(R.result)},R.readAsDataURL(f),L(f.name),M(f.size),r(f,p)}else i.includes(f.type)?(G(!1),V(!0),L(""),M(""),r(null,p),U.fire("Terjadi Kesalahan",`Ukuran File Maksimal ${m} MB`,"warning")):(G(!0),V(!1),L(""),M(""),r(null,p))}else G(!0),V(!1),L(""),r(null,p)},[]),{acceptedFiles:O,getRootProps:I,getInputProps:_,isFocused:C,isDragAccept:k,isDragReject:b,isDragActive:y}=sn({accept:{"application/pdf":[".pdf"]},multiple:!1,onDrop:X}),o=()=>{z(""),L(""),r(null,p)},F=a.useMemo(()=>({...Hf,...C?Gf:{},...k?Wf:{},...b?Jf:{}}),[C,k,b]),x=W?{onClick:S=>S.stopPropagation(),onDragEnter:S=>S.stopPropagation()}:{};return a.useEffect(()=>{s&&(z(""),L(""),r(null,p))},[s]),e.jsxs("section",{className:"container",children:[e.jsxs("div",{...I({style:F}),className:`${B?"!bg-red-100 !border-red-700":""}`,children:[e.jsx("input",{..._(),accept:i,ref:K}),b?e.jsx("p",{children:"File Tidak Support"}):H?e.jsxs("p",{children:["Ukuran File Maksimal ",m," MB"]}):A?e.jsx("p",{children:l}):W?e.jsxs("div",{className:"file-preview",...x,children:[T," - ",$," Bytes",e.jsx("button",{className:"remove-button text-end",onClick:o,children:e.jsx(zn,{})})]}):e.jsx(Ca,{variant:"body2",color:"text.secondary",children:t})]}),e.jsx(Xa,{className:"mt-3",children:e.jsx(w,{children:e.jsxs("div",{className:"py-6 flex flex-col md:flex-row justify-between gap-5 lg:mb-0",children:[e.jsx("div",{className:`w-full ${T?"md:w-7/12":"md:w-9/12"} `,children:e.jsx(Ye,{placeholder:"",id:"file",value:T,readOnly:!0})}),T?e.jsx(e.Fragment,{children:e.jsx("div",{className:"w-full md:w-2/12",children:e.jsx(_e,{color:"error",className:"btn btn-sm w-full",onClick:o,children:"Hapus"})})}):null,e.jsx("div",{className:"w-full md:w-3/12",children:e.jsx(_e,{className:"btn btn-sm w-full",color:"success",onClick:()=>K.current.click(),children:"Browse"})})]})})}),e.jsx("div",{className:"form-group",children:e.jsx("div",{className:"mb-3",children:e.jsx(Ca,{variant:"body2",color:"text.secondary",children:n})})})]})},Yf=()=>{const r=ha(),s="Registrasi Naskah Masuk",[n,t]=a.useState(!1),i=JSON.parse(Le.getItem("users")),l=new js,[m,p]=a.useState(null),[B,K]=a.useState([]),[W,z]=a.useState(!1),[T,L]=a.useState(!0),[$,M]=a.useState({nama_pengirim:"",jabatan_pengirim:"",instansi_pengirim:"",jenis_naskah_id:0,sifat_naskah_id:0,nomor:"",reply_id:0,tanggal:null,received_at:null,hal:"",ringkasan:"",group_tujuan_id:0,group_tembusan_id:0,file:null,tujuans:[],tembusans:[],lampirans:[]}),[H,V]=a.useState(null),[A,G]=a.useState(null),[X,O]=a.useState(null),[I,_]=a.useState(null),[C,k]=a.useState(null),[b,y]=a.useState([]),[o,F]=a.useState([]);a.useEffect(()=>{t(ge(s,"is_read",!0))},[]);const x=(D,E)=>{p(D),E&&E.setFieldValue("file",D)},S=(D,E)=>{K(D),E&&E.setFieldValue("lampirans",D)},f=D=>{const E=[...D.tujuans.map(j=>({to_user_id:j.from_group?j.to_user_id:j.id,jenis:"UTAMA"})),...D.tembusans.map(j=>({to_user_id:j.id,jenis:"TEMBUSAN"}))],{tembusans:J,...P}=D,h={...P,tujuans:E,urgensi_naskah_id:1,jenis_naskah_nama:H?H.jenis_naskah:"",sifat_naskah_nama:A?A.sifat_naskah:"",urgensi_naskah_nama:"SEGERA",ttd:"KONVENSIONAL",status:"TRANSAKSI",jenis_perkembangan:"ASLI",tipe_naskah:"Naskah Masuk",sender_user_id:i==null?void 0:i.id,user_created_id:i==null?void 0:i.id,user_created_nama:i==null?void 0:i.nama,organisasi_created_id:i==null?void 0:i.organisasi_id,organisasi_created_nama:i==null?void 0:i.instansi.nama,jabatan_created_id:i==null?void 0:i.jabatan.id,jabatan_created_nama:i==null?void 0:i.desc_jabatan,tanggal:_s(D.tanggal).format(),received_at:_s(D.received_at).format()};L(!1);const d="";l.postRegistrasiNaskahMasuk(h).then(j=>{var g,c,v;j.data.success&&(U.fire((g=j.data)!=null&&g.success?"Berhasil":"Gagal",(c=j.data)==null?void 0:c.message,(v=j.data)!=null&&v.success?"success":"warning"),z(!0),u(),r(d+"/penerimaan-naskah-masuk/log-naskah-masuk"))}).catch(j=>{var c,v;const g=Oe(j.response.data.result);U.fire("Gagal",g??((v=(c=j.response)==null?void 0:c.data)==null?void 0:v.message),"error"),L(!0)}).finally(()=>L(!0))},R=a.useRef(),u=()=>{R.current.resetForm(),z(!0),p(null),K(null),V(null),G(null),O(null),_(null),k(null),F(null),y(null)};return e.jsxs(aa,{children:[e.jsx(la,{}),n&&e.jsxs(e.Fragment,{children:[e.jsx(ie,{pt:6,pb:3,children:e.jsxs(Me,{children:[e.jsx(ie,{px:3,pt:3,lineHeight:1,children:e.jsx(w,{container:!0,direction:"row",justifyContent:"space-between",alignItems:"center",children:e.jsx(w,{item:!0,children:e.jsx(le,{variant:"h5",fontWeight:"medium",children:"Form Registrasi Naskah Masuk"})})})}),e.jsx(ca,{innerRef:R,initialValues:$,onSubmit:f,validateOnChange:!0,validationSchema:qf,children:e.jsxs(da,{id:"form",encType:"multipart/form-data",children:[e.jsx(w,{children:e.jsxs("div",{className:"p-6 grid grid-cols-12 mb-10 gap-5 lg:mb-0",children:[e.jsx("div",{className:"col-span-12 md:col-span-12",children:e.jsxs(w,{item:!0,children:[e.jsx(le,{variant:"body2",fontWeight:"medium",children:"IDENTITAS PENGIRIM NASKAH"}),e.jsx(gs,{})]})}),e.jsx("div",{className:"col-span-12 md:col-span-4",children:e.jsx(w,{children:e.jsx(ce,{name:"nama_pengirim",children:({field:D,meta:E})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Nama Pengirim",required:!0,error:E.error&&E.touched}),e.jsx(Ye,{...D,type:"text",placeholder:"Masukkan Nama Pengirim...",error:E.error&&E.touched}),e.jsx(ue,{text:E.error,error:E.error&&E.touched})]})})})}),e.jsx("div",{className:"col-span-12 md:col-span-4",children:e.jsx(w,{children:e.jsx(ce,{name:"jabatan_pengirim",children:({field:D,meta:E})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Jabatan Pengirim",required:!0,error:E.error&&E.touched}),e.jsx(Ye,{...D,type:"text",placeholder:"Masukkan Jabatan Pengirim...",error:E.error&&E.touched}),e.jsx(ue,{text:E.error,error:E.error&&E.touched})]})})})}),e.jsx("div",{className:"col-span-12 md:col-span-4",children:e.jsx(w,{children:e.jsx(ce,{name:"instansi_pengirim",children:({field:D,meta:E})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Instansi Pengirim",required:!0,error:E.error&&E.touched}),e.jsx(Ye,{...D,type:"text",placeholder:"Masukkan Instansi Pengirim...",error:E.error&&E.touched}),e.jsx(ue,{text:E.error,error:E.error&&E.touched})]})})})})]})}),e.jsx(w,{children:e.jsxs("div",{className:"p-6 grid grid-cols-12 mb-10 gap-5 lg:mb-0",children:[e.jsx("div",{className:"col-span-12 md:col-span-12",children:e.jsxs(w,{item:!0,children:[e.jsx(le,{variant:"body2",fontWeight:"medium",children:"DETIL ISI NASKAH"}),e.jsx(gs,{})]})}),e.jsxs("div",{className:"col-span-12 md:col-span-6",children:[e.jsx(w,{mb:2,children:e.jsx(ce,{name:"jenis_naskah_id",children:({field:D,form:E,meta:J})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Jenis Naskah",required:!0,error:J.error&&J.touched}),e.jsx(ra,{url:"tatanaskah/jenis-naskah/select",callbackChange:P=>{E.setFieldValue("jenis_naskah_id",(P==null?void 0:P.id)??0),V(P)},selectedData:H,keyValue:["id","jenis_naskah"],placeholder:"Pilih Jenis Naskah...",className:"text-sm",menuPortalTarget:null,isMulti:!1,optionParam:{"select-target":"select-jenis-naskah-by-instansi",public_organisasi_id:i==null?void 0:i.public_organisasi_id},targetService:"master"}),e.jsx(ue,{text:J.error,error:J.error&&J.touched})]})})}),e.jsx(w,{mb:2,children:e.jsx(ce,{name:"sifat_naskah_id",children:({field:D,form:E,meta:J})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Sifat Naskah",required:!0,error:J.error&&J.touched}),e.jsx(ra,{url:"tatanaskah/sifat-naskah/select",callbackChange:P=>{E.setFieldValue("sifat_naskah_id",(P==null?void 0:P.id)??0),G(P)},selectedData:A,keyValue:["id","sifat_naskah"],placeholder:"Pilih Sifat Naskah...",className:"text-sm",menuPortalTarget:null,isMulti:!1,optionParam:{"select-target":"select-sifat-naskah-by-unitkerja",public_organisasi_id:i==null?void 0:i.public_organisasi_id},targetService:"master"}),e.jsx(ue,{text:J.error,error:J.error&&J.touched})]})})}),e.jsx(w,{mb:2,children:e.jsx(ce,{name:"nomor",children:({field:D,meta:E})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Nomor Naskah",required:!0,error:E.error&&E.touched}),e.jsx(Ye,{...D,type:"text",placeholder:"Masukkan Nomor Naskah...",error:E.error&&E.touched}),e.jsx(ue,{text:E.error,error:E.error&&E.touched})]})})}),e.jsx(w,{mb:2,children:e.jsx(ce,{name:"tanggal",children:({field:D,form:E,meta:J})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Tanggal Naskah",required:!0,error:J.error&&J.touched}),e.jsx(ht,{dateAdapter:mt,children:e.jsx(xt,{value:_s(D.value),onChange:P=>{E.setFieldValue("tanggal",P)},format:"DD/MM/YYYY"})}),e.jsx(ue,{text:J.error,error:J.error&&J.touched})]})})}),e.jsx(w,{mb:2,children:e.jsx(ce,{name:"received_at",children:({field:D,form:E,meta:J})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Tanggal Diterima",required:!0,error:J.error&&J.touched}),e.jsx(ht,{dateAdapter:mt,children:e.jsx(xt,{value:_s(D.value),onChange:P=>E.setFieldValue("received_at",P),format:"DD/MM/YYYY"})}),e.jsx(ue,{text:J.error,error:J.error&&J.touched})]})})})]}),e.jsxs("div",{className:"col-span-12 md:col-span-6",children:[e.jsx(w,{mb:2,children:e.jsx(ce,{name:"hal",children:({field:D,meta:E})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Hal",required:!0,error:E.error&&E.touched}),e.jsx(Ka,{...D,placeHolder:"Masukkan Hal...",error:E.error&&E.touched}),e.jsx(ue,{text:E.error,error:E.error&&E.touched})]})})}),e.jsx(w,{mb:2,children:e.jsx(ce,{name:"ringkasan",children:({field:D,meta:E})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Isi Ringkas",required:!0,error:E.error&&E.touched}),e.jsx(Ka,{...D,rows:8,placeHolder:"Masukkan Isi Ringkas...",error:E.error&&E.touched}),e.jsx(ue,{text:E.error,error:E.error&&E.touched})]})})}),e.jsx(w,{mb:2,children:e.jsx(ce,{name:"file",children:({field:D,form:E,meta:J})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"File Naskah",required:!0,error:J.error&&J.touched}),e.jsx(nl,{onFileSelected:x,isReset:W,form:E,error:J.error&&J.touched,desc:e.jsxs(e.Fragment,{children:["Format yang didukung: .PDF ",e.jsx("br",{})," Ukuran File Maksimal 5MB"]}),descBox:"Untuk menambahkan File, seret dan lepas file tersebut ke sini, atau klik untuk memilih file.",accaptedType:["application/pdf"],notifFileTypeError:"File Hanya Support PDF",maxSizePerFileInMb:5}),e.jsx(ue,{text:J.error,error:J.error&&J.touched})]})})})]})]})}),e.jsx(w,{children:e.jsxs("div",{className:"p-6 grid grid-cols-12 mb-10 gap-5 lg:mb-0",children:[e.jsx("div",{className:"col-span-12 md:col-span-12",children:e.jsxs(w,{item:!0,children:[e.jsx(le,{variant:"body2",fontWeight:"medium",children:"LAMPIRAN NASKAH"}),e.jsx(gs,{})]})}),e.jsx("div",{className:"col-span-12 md:col-span-12",children:e.jsx(w,{mb:2,children:e.jsx(ce,{name:"lampiran",children:({field:D,form:E,meta:J})=>e.jsxs(e.Fragment,{children:[e.jsx(at,{onFileSelected:S,isReset:W,form:E,maxSizePerFileInMb:5,descBox:"Untuk menambahkan File, seret dan lepas file tersebut ke sini, atau klik untuk memilih file."}),e.jsx(ue,{text:J.error,error:J.error&&J.touched})]})})})})]})}),e.jsx(w,{children:e.jsxs("div",{className:"p-6 grid grid-cols-12 mb-10 gap-5 lg:mb-0",children:[e.jsx("div",{className:"col-span-12 md:col-span-12",children:e.jsxs(w,{item:!0,children:[e.jsx(le,{variant:"body2",fontWeight:"medium",children:"TUJUAN UTAMA"}),e.jsx(gs,{})]})}),e.jsxs("div",{className:"col-span-12 grid grid-cols-1 md:grid-rows-2 md:grid-flow-col md:grid-cols-2 gap-5",children:[e.jsx("div",{className:"",children:e.jsx(w,{mb:2,children:e.jsx(ce,{name:"group_tujuan_id",children:({field:D,form:E,meta:J})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Grup Tujuan",required:!1,error:J.error&&J.touched}),e.jsx(ra,{url:"pengguna/grup-tujuan/select",callbackChange:P=>{var d,j,g,c,v,N,Q,re,ye,xe,fe,Ge,$e,Pe,te;if(E.setFieldValue("group_tujuan_id",(P==null?void 0:P.id)??0),((d=P==null?void 0:P.daftar_tujuan)==null?void 0:d.length)>0){let ne=b.map(pe=>({...pe}));for(var h=0;h<P.daftar_tujuan.length;h++){let pe={id:(j=P.daftar_tujuan[h].user)==null?void 0:j.id,nama_full:`${(g=P.daftar_tujuan[h].user)==null?void 0:g.nama} - ${(c=P.daftar_tujuan[h].user)==null?void 0:c.desc_jabatan} - ${(v=P.daftar_tujuan[h].user)==null?void 0:v.desc_instansi}`,to_user_id:(N=P.daftar_tujuan[h].user)==null?void 0:N.id,organisasi_id:(Q=P.daftar_tujuan[h].user)==null?void 0:Q.organisasi_id,nama:(re=P.daftar_tujuan[h].user)==null?void 0:re.nama,jabatan:(ye=P.daftar_tujuan[h].user)==null?void 0:ye.desc_jabatan,instansi:(xe=P.daftar_tujuan[h].user)==null?void 0:xe.desc_instansi,jenis:"UTAMA",naskah:"MASUK",nama_pengguna:(fe=P.daftar_tujuan[h].user)==null?void 0:fe.nama,nama_organisasi:(Ge=P.daftar_tujuan[h].user)==null?void 0:Ge.desc_instansi,to_jabatan_id:($e=P.daftar_tujuan[h].user)==null?void 0:$e.jabatan_id,to_organisasi_id:(Pe=P.daftar_tujuan[h].user)==null?void 0:Pe.organisasi_id,to_public_organisasi_id:(te=P.daftar_tujuan[h].user)==null?void 0:te.public_organisasi_id,from_group:!0};(ne==null?void 0:ne.length)>0?ne.findIndex(oe=>oe.id===pe.id)<0&&ne.push(pe):ne.push(pe)}y(ne),E.setFieldValue("tujuans",ne)}else y([])},selectedData:I,keyValue:["id","nama"],placeholder:"Pilih Grup Tujuan...",className:"text-sm",menuPortalTarget:null,isMulti:!1,optionParam:{organisasi_id:i==null?void 0:i.organisasi_id}}),e.jsx(ue,{text:J.error,error:J.error&&J.touched})]})})})}),e.jsx("div",{className:"",children:e.jsx(w,{mb:2,children:e.jsx(ce,{name:"tujuans",children:({field:D,form:E,meta:J})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Utama",required:!0,error:J.touched&&J.error}),e.jsx(ra,{url:"pengguna/tujuan/tujuan-internal",callbackChange:P=>{E.setFieldValue("tujuans",P)},selectedData:D.value,keyValue:["id","nama_full"],placeholder:"Pilih Utama / Tujuan...",className:"text-sm",menuPortalTarget:null,isMulti:!0,optionParam:{public_organisasi_id:i==null?void 0:i.public_organisasi_id}}),J.touched&&J.error&&e.jsx(ue,{text:J.error,error:!0})]})})})}),e.jsx("div",{className:"",children:e.jsx(w,{mb:2,children:e.jsx(ce,{name:"group_tembusan_id",children:({field:D,form:E,meta:J})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Grup Tembusan",required:!1,error:J.error&&J.touched}),e.jsx(ra,{url:"pengguna/grup-tembusan/select",callbackChange:P=>{var d,j,g,c,v,N,Q,re,ye,xe,fe,Ge,$e,Pe,te;if(F([]),E.setFieldValue("group_tembusan_id",(P==null?void 0:P.id)??0),((d=P==null?void 0:P.daftar_tembusan)==null?void 0:d.length)>0){let ne=o.map(pe=>({...pe}));for(var h=0;h<P.daftar_tembusan.length;h++){let pe={id:(j=P.daftar_tembusan[h].user)==null?void 0:j.id,nama_full:`${(g=P.daftar_tembusan[h].user)==null?void 0:g.nama} - ${(c=P.daftar_tembusan[h].user)==null?void 0:c.desc_jabatan} - ${(v=P.daftar_tembusan[h].user)==null?void 0:v.desc_instansi}`,to_user_id:(N=P.daftar_tembusan[h].user)==null?void 0:N.id,organisasi_id:(Q=P.daftar_tembusan[h].user)==null?void 0:Q.organisasi_id,nama:(re=P.daftar_tembusan[h].user)==null?void 0:re.nama,jabatan:(ye=P.daftar_tembusan[h].user)==null?void 0:ye.desc_jabatan,instansi:(xe=P.daftar_tembusan[h].user)==null?void 0:xe.desc_instansi,naskah:"MASUK",nama_penguna:(fe=P.daftar_tembusan[h].user)==null?void 0:fe.nama,nama_organisasi:(Ge=P.daftar_tembusan[h].user)==null?void 0:Ge.desc_instansi,to_jabatan_id:($e=P.daftar_tembusan[h].user)==null?void 0:$e.jabatan_id,to_organisasi_id:(Pe=P.daftar_tembusan[h].user)==null?void 0:Pe.organisasi_id,to_public_organisasi_id:(te=P.daftar_tembusan[h].user)==null?void 0:te.public_organisasi_id,from_group:!0};(ne==null?void 0:ne.length)>0?ne.findIndex(oe=>oe.id===pe.id)<0&&ne.push(pe):ne.push(pe)}F(ne),E.setFieldValue("tembusans",ne)}else F([])},selectedData:C,keyValue:["id","nama"],placeholder:"Pilih Grup Tembusan...",className:"text-sm",menuPortalTarget:null,isMulti:!1,optionParam:{organisasi_id:i==null?void 0:i.organisasi_id}}),e.jsx(ue,{text:J.error,error:J.error&&J.touched})]})})})}),e.jsx("div",{className:"",children:e.jsx(w,{mb:2,children:e.jsx(ce,{name:"tembusans",children:({field:D,form:E,meta:J})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Tembusan",required:!1,error:J.error&&J.touched}),e.jsx(ra,{url:"pengguna/tujuan/tujuan-internal",callbackChange:P=>{E.setFieldValue("tembusans",P)},selectedData:o,keyValue:["id","nama_full"],placeholder:"Pilih Tembusan...",className:"text-sm",menuPortalTarget:null,isMulti:!0,optionParam:{public_organisasi_id:i==null?void 0:i.public_organisasi_id}}),e.jsx(ue,{text:J.error,error:J.error})]})})})})]})]})}),e.jsxs("div",{className:"p-3 flex justify-end items-center w-full gap-5 mb-10",children:[e.jsx(Je,{submit:T,color:"success",formId:"form",text:"Simpan"}),e.jsx(_e,{color:"info",onClick:u,type:"button",variant:"gradient",children:"Reset"})]})]})})]})}),e.jsx(ua,{})]})]})},Qf=()=>{const r="Log Naskah Masuk",s=new URLSearchParams(location.search).get("statusKirim"),n=new URLSearchParams(location.search).get("statusBerkas"),t=JSON.parse(Le.getItem("users")),[i,l]=a.useState(!1);a.useEffect(()=>{l(ge(r,"is_read",!0))},[]);const m=new Nr;ha();const[p,B]=a.useState(!1),[K,W]=a.useState(null),[z,T]=a.useState({total:0,from:1,to:1}),[L,$]=a.useState({page:1,rows:10,sortField:"",sortOrder:null,user_id:t==null?void 0:t.id,filters:{tanggal:{value:""},nomor:{value:""},hal:{value:""},instansi_pengirim:{value:""},urgensi_naskah_nama:{value:""},"status_send.status":{value:s||""},status_berkas:{value:n||""}}}),[M,H]=a.useState(null);let V=[];K==null?V=[]:V=K.map((C,k)=>{var y,o,F,x;const b=Ps(C==null?void 0:C.id);return{no:k+z.from,id:C.id,tanggal:C.tanggal,nomor:C.nomor,hal:C.hal,nama_pengirim:C.nama_pengirim,jabatan_pengirim:C.jabatan_pengirim,instansi_pengirim:C.instansi_pengirim,status_kirim:(y=C.status_send)==null?void 0:y.status,berkas:(o=C==null?void 0:C.berkas_naskah)==null?void 0:o.berkas,action:e.jsxs("div",{className:"flex items-center justify-center gap-3 w-full",children:[ge(r,"is_update")&&((F=C.status_send)==null?void 0:F.status)!=="KIRIM"&&e.jsx(va,{to:`form?id=${b}&formode=Ubah`,children:e.jsx(Va,{size:"1.5em",color:"#fbcf33",className:"cursor-pointer",title:"Edit"})}),e.jsx(va,{to:`detail?id=${b}`,children:e.jsx(Oa,{size:"1.5em",color:"#17c1e8",className:"cursor-pointer",title:"View"})}),ge(r,"is_delete")&&((x=C.status_send)==null?void 0:x.status)!=="KIRIM"&&e.jsx($a,{size:"1.5em",color:"#e62e2d",onClick:()=>_(C),className:"cursor-pointer",title:"Hapus"})]})}}),a.useEffect(()=>{A()},[L]);const A=async(C=!1)=>{C&&(L.page=1),B(!0),await m.getPaging(L).then(k=>{let b=k.data.result;b.data&&(H(b.last_page),W(b.data),B(!1)),B(!1),T({...z,to:b.to,from:b.from,total:b.total})}).catch(k=>{B(!1),T({...z,to:0,from:!1,total:0})})},G=Da((C,k,b=null)=>{if(b){let o=b.target;for(;o&&o.tagName!=="TD";)o=o.parentNode;if(o&&o.tagName==="TD"){const F=o.querySelector(".clear-input"),x=o.querySelector("input");k?F.classList.remove("hidden"):(F.classList.add("hidden"),x.value="")}}let y={...L};y.filters[C].value=k,y.page=1,$(y)},600),X=C=>{let k={...L};k.page=C,$(k),window.scrollTo({top:0,behavior:"smooth"})},O=C=>{let k={...L};k.rows=C,k.page=1,$(k)},I=C=>{let k={...L};k.sortField=C,L.sortField!=C?L.sortOrder==""&&(k.sortOrder=1):L.sortOrder==1?k.sortOrder=-1:(k.sortOrder="",k.sortField=""),k.page=1,$(k)},_=C=>{U.fire({title:"Konfirmasi",text:`Log Naskah ${C.nomor} akan dihapus ?`,icon:"warning",showCancelButton:!0,confirmButtonText:"Hapus",cancelButtonText:"Batal",customClass:{confirmButton:"button button-error",cancelButton:"button button-info"}}).then(k=>{k.isConfirmed&&(ka(),m.deleteLog(C.id).then(b=>{b.status==200&&A(),U.fire("Berhasil","Data Berhasil Dihapus","success")}).catch(b=>{var o,F;const y=Oe(b.response.data.result);U.fire("Gagal",y??((F=(o=b.response)==null?void 0:o.data)==null?void 0:F.message),"error")}))})};return e.jsxs(aa,{children:[e.jsx(la,{}),i&&e.jsxs(e.Fragment,{children:[e.jsx(ie,{pt:6,pb:3,children:e.jsxs(Me,{children:[e.jsx(ie,{px:3,pt:3,lineHeight:1,children:e.jsx(w,{container:!0,direction:"row",justifyContent:"space-between",alignItems:"center",children:e.jsx(w,{item:!0,children:e.jsxs(le,{variant:"h5",fontWeight:"medium",children:["Daftar ",r]})})})}),e.jsx("div",{className:"overflow-auto",children:e.jsxs("div",{className:"table p-10 min-w-full",children:[e.jsx("div",{className:"flex items-center justify-end mb-1",children:e.jsx(pa,{config:L,handleClick:O})}),e.jsxs("table",{className:"w-full text-sm text-left !text-gray-700 dark:text-gray-400 table-bordered",children:[e.jsx("thead",{className:"text-xs text-gray-500 uppercase border-b-2 mb-1",children:e.jsxs("tr",{children:[e.jsx(q,{text:"No",config:L}),e.jsx(q,{text:"Tanggal Naskah",sortField:"tanggal",sortOrder:L.sortOrder,config:L,handleClick:()=>I("tanggal")}),e.jsx(q,{text:"Nomor Naskah",sortField:"nomor",sortOrder:L.sortOrder,config:L,handleClick:()=>I("nomor")}),e.jsx(q,{text:"Hal",sortField:"hal",sortOrder:L.sortOrder,config:L,handleClick:()=>I("hal")}),e.jsx(q,{text:"Asal Naskah"}),e.jsx(q,{text:"Status Kirim"}),e.jsx(q,{text:"Status Berkas"}),e.jsx(q,{text:"Aksi",className:"flex justify-center min-w-[2rem]"})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{className:"border-b border-slate-300",children:[e.jsx("td",{}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"tanggal",onSearch:G,placeholder:"Tanggal Naskah",type:"input",isDate:!0})}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"nomor",onSearch:G,placeholder:"Nomor Naskah",type:"input"})}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"hal",onSearch:G,placeholder:"Hal",type:"input"})}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"instansi_pengirim",onSearch:G,placeholder:"Instansi Pengirim",type:"input"})}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"status_send.status",onSearch:G,placeholder:"Status Kirim",type:"select",selectOption:Tt,defaultValue:Tt.find(C=>C.value==s)})}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"status_berkas",onSearch:G,placeholder:"Status Berkas",type:"select-input",selectOption:Ws,defaultValue:Ws.find(C=>C.value==n)})}),e.jsx("td",{})]}),p?e.jsx("tr",{className:"border-b border-slate-300",children:e.jsx("td",{colSpan:8,children:e.jsx(ia,{})})}):e.jsx(e.Fragment,{}),V.length?V.map((C,k)=>e.jsxs("tr",{className:"border-b border-slate-300",children:[e.jsx("td",{className:"max-w-[10rem] flex-wrap px-6 py-6",children:C.no}),e.jsx("td",{className:"max-w-[10rem] flex-wrap px-6 py-6",children:na(C.tanggal,1)}),e.jsx("td",{className:"max-w-[10rem] flex-wrap px-6 py-6",children:C.nomor}),e.jsx("td",{className:"max-w-[10rem] flex-wrap px-6 py-6",children:C.hal}),e.jsxs("td",{className:"max-w-[10rem] flex-wrap px-6 py-6",children:[C.nama_pengirim," - ",C.jabatan_pengirim," -"," ",C.instansi_pengirim]}),e.jsx("td",{className:"max-w-[10rem] flex-wrap px-6 py-6",children:C.status_kirim=="KIRIM"?e.jsx(be,{badgeContent:"TERKIRIM",color:"success",container:!0}):C.status_kirim=="BELUM"?e.jsx(be,{badgeContent:"BELUM",color:"warning",container:!0}):e.jsx(be,{badgeContent:"BATAL",color:"error",container:!0})}),e.jsx("td",{className:"max-w-[10rem] flex-wrap px-6 py-6",children:e.jsx("div",{className:"flex-wrap",children:C.berkas?`${C.berkas.nomor} - ${C.berkas.nama}`:e.jsx(be,{badgeContent:"TIDAK ADA",color:"secondary",container:!0})})}),e.jsxs("td",{className:"px-1 text-right w-[2rem]",children:[" ",C.action," "]})]},k)):e.jsx(e.Fragment,{})]})]}),e.jsxs("nav",{className:"flex items-center justify-between p-4","aria-label":"Table navigation",children:[e.jsx("span",{className:"text-sm text-gray-400",children:z.from&&`Menampilkan ${Se(z.from)} sampai ${Se(z.to)} dari ${Se(z.total)} entri`}),e.jsx(xa,{currentPage:L.page,lastPage:M,displayCount:5,handleClick:X})]})]})})]})}),e.jsx(ua,{})]})]})},_d=fa().shape({nama_pengirim:ze().required("Nama Pengirim harus diisi"),jabatan_pengirim:ze().required("Jabatan Pengirim harus dipilih"),instansi_pengirim:ze().required("Instansi Pengirim harus dipilih"),jenis_naskah_id:wa().min(1,"Pilih Jenis Naskah").required("Jenis Naskah harus dipilih"),sifat_naskah_id:wa().min(1,"Pilih Sifat Naskah").required("Sifat Naskah harus dipilih"),nomor:ze().required("Nomor Naskah Pengirim harus dipilih"),tanggal:jr().required("Tanggal Harus Di pilih"),received_at:jr().required("Tanggal Harus Di pilih"),hal:ze().required("Hal harus diisi"),ringkasan:ze().required("Isi Ringkas harus diisi")}),yd=fa().shape({to_user_id:wa().min(1,"Pilih Pengguna Tujuan").required("Pengguna Tujuan harus dipilih")}),Xf=({modul:r,visibleview:s,open:n,setOpen:t,formValue:i})=>{const l=new Nr,[m,p]=a.useState(!1),[B,K]=a.useState([]),[W,z]=a.useState(null),[T,L]=a.useState({}),[$,M]=a.useState(!1),[H,V]=a.useState(!0),[A,G]=a.useState({total:0,from:1,to:1});let X=[];B==null?X=[]:X=B==null?void 0:B.map(x=>({nama:x.nama,ditambahkan:x.created_at,file:x.file,file_path:x.file_path,created_at:x.created_at,action:e.jsx("div",{className:"flex items-center justify-center gap-3 w-full",children:!s&&ge(r,"is_delete")&&e.jsx($a,{size:"1.5em",color:"#e62e2d",onClick:()=>o(x),className:"cursor-pointer",title:"Hapus"})})}));const[O,I]=a.useState({page:1,rows:10,sortField:"",sortOrder:null,naskah_id:i.id,naskah:"MASUK",search:"",filters:{name:{value:""}}});a.useEffect(()=>{i.id&&_()},[i.id]);const _=async(x=!1)=>{x&&(O.page=1),p(!0),await l.getPagingLampiran(O).then(S=>{let f=S.data.result;f.data&&(z(f.last_page),K(f.data),p(!1)),p(!1),G({...A,to:f.to,from:f.from,total:f.total})}).catch(S=>{console.log({error:S}),S.response.status==404&&K([]),p(!1),G({...A,to:0,from:!1,total:0})}).finally(()=>p(!1))};os((x,S,f=null)=>{if(f){let u=f.target;for(;u&&u.tagName!=="TD";)u=u.parentNode;if(u&&u.tagName==="TD"){const D=u.querySelector(".clear-input"),E=u.querySelector("input");S?D.classList.remove("hidden"):(D.classList.add("hidden"),E.value="")}}let R={...O};R.filters[x].value=S,R.page=1,I(R)},600);const C=x=>{let S={...O};S.page=x,I(S),window.scrollTo({top:0,behavior:"smooth"})},k=x=>{let S={...O};S.rows=x,S.page=1,I(S)},b=x=>{let S={...O};S.sortField=x,O.sortField!=x?O.sortOrder==""&&(S.sortOrder=1):O.sortOrder==1?S.sortOrder=-1:(S.sortOrder="",S.sortField=""),S.page=1,I(S)},y=x=>{if(T){V(!1);const f=new FormData;if(f.append("naskah_id",Number(x.id)),T.length>0)for(var S=0;S<T.length;S++)f.append(`lampirans[${S}][file]`,T[S]),f.append(`lampirans[${S}][naskah]`,"MASUK");f.append("file_path",x.file_path),l.postLampiran(f).then(R=>{var u,D,E;U.fire((u=R.data)!=null&&u.success?"Berhasil":"Gagal",(D=R.data)==null?void 0:D.message,(E=R.data)!=null&&E.success?"success":"warning"),R.data.success&&(_(!0),F())}).catch(R=>{var D,E;const u=Oe(R.response.data.result);U.fire("Gagal",u??((E=(D=R.response)==null?void 0:D.data)==null?void 0:E.message),"error")}).finally(()=>V(!0))}},o=x=>{U.fire({title:"Konfirmasi",text:`Data ${x.nama} akan dihapus ?`,icon:"warning",showCancelButton:!0,confirmButtonText:"Hapus",cancelButtonText:"Batal",customClass:{confirmButton:"button button-error",cancelButton:"button button-info"}}).then(S=>{S.isConfirmed&&(ka(),l.deleteLampiran(x.id).then(f=>{f.status==200&&_(),U.fire("Berhasil","Data Berhasil Dihapus","success")}).catch(f=>{var u,D;const R=Oe(f.response.data.result);U.fire("Gagal",R??((D=(u=f.response)==null?void 0:u.data)==null?void 0:D.message),"error")}))})},F=()=>{t(!1)};return e.jsxs(e.Fragment,{children:[e.jsxs(w,{container:!0,direction:"row",justifyContent:"space-between",alignItems:"center",children:[e.jsxs(w,{item:!0,className:"flex items-center gap-2",children:[e.jsx(Ui,{size:"1.5em"}),e.jsx(le,{variant:"h5",fontWeight:"medium",children:"Lampiran"})]}),e.jsx(w,{item:!0,children:e.jsxs(_e,{variant:"gradient",color:"info",onClick:()=>t(!0),children:[e.jsx(Ea,{size:"1.5em",className:"me-2"}),"Tambah"]})})]})," ",e.jsxs(w,{children:[e.jsx("div",{className:"overflow-auto",children:e.jsxs("div",{className:"table px-6 pt-6 min-w-full",children:[e.jsx("div",{className:"flex justify-end mb-1",children:e.jsx(pa,{config:O,handleClick:k})}),e.jsxs("table",{className:"w-full text-sm text-left !text-gray-700 dark:text-gray-400 table-bordered",children:[e.jsx("thead",{className:"text-xs text-gray-500 uppercase border-b-2 mb-1",children:e.jsxs("tr",{children:[e.jsx(q,{text:"File",sortField:"nama",sortOrder:O.sortOrder,config:O,handleClick:()=>b("nama")}),e.jsx(q,{text:"Ditambahkan Pada",sortField:"created_at",sortOrder:O.sortOrder,config:O,handleClick:()=>b("created_at")}),e.jsx(q,{text:"Aksi",className:"justify-center min-w-[2rem]"})]})}),e.jsxs("tbody",{children:[m?e.jsx("tr",{children:e.jsx("td",{colSpan:5,children:e.jsx(ia,{})})}):e.jsx(e.Fragment,{}),X.length?X.map((x,S)=>e.jsxs("tr",{className:"border-b border-slate-300",children:[e.jsx("td",{className:" max-w-[20rem] px-6 py-6",children:e.jsx("div",{onClick:()=>Wa(x.file,x.file_path??"lampiran"),className:"cursor-pointer hover:underline",children:x.nama})}),e.jsx("td",{className:" max-w-[20rem] px-6 py-6",children:na(x.ditambahkan)}),e.jsxs("td",{className:"px-1 text-right w-[2rem]",children:[" ",x.action," "]})]},S)):e.jsx(e.Fragment,{})]})]}),e.jsxs("nav",{className:"flex items-center justify-between p-4","aria-label":"Table navigation",children:[e.jsx("span",{className:"text-sm text-gray-400",children:A.from&&`Menampilkan ${Se(A.from)} sampai ${Se(A.to)} dari ${Se(A.total)} entri`}),e.jsx(xa,{currentPage:O.page,lastPage:W,displayCount:5,handleClick:C})]})]})}),e.jsxs(Fa,{open:n,onClose:F,children:[e.jsxs("div",{children:[e.jsx(_a,{children:"Tambah Lampiran Baru"}),e.jsx(ca,{initialValues:i,onSubmit:y,validateOnChange:!0,validationSchema:_d,children:e.jsx(da,{id:"formLampiran",className:"text-sm",children:e.jsx("div",{className:"mb-6 px-4",children:e.jsx(w,{mb:2,children:e.jsx(ce,{name:"file",children:({field:x,form:S,meta:f})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Lampiran",required:!0,error:f.error&&f.touched}),e.jsx(at,{onFileSelected:R=>{S.setFieldValue("file",R),L(R)},isReset:$,maxSizePerFileInMb:5,descBox:"Untuk menambahkan File, seret dan lepas file tersebut ke sini, atau klik untuk memilih file."}),e.jsx(ue,{text:f.error,error:f.error&&f.touched})]})})})})})})]}),e.jsx(ya,{children:e.jsxs(e.Fragment,{children:[!s&&e.jsx(Je,{submit:H,color:"success",formId:"formLampiran",text:"Simpan"}),e.jsx(_e,{color:s?"dark":"error",variant:"gradient",onClick:()=>t(!1),children:s?"Tutup":"Batal"})]})})]})]})]})},Zf=({modul:r,visibleview:s,formValue:n,user:t})=>{const i=new Nr,[l,m]=a.useState(!1),[p,B]=a.useState([]),[K,W]=a.useState(null),[z,T]=a.useState({}),[L,$]=a.useState(!1),[M,H]=a.useState(null),[V,A]=a.useState(!1),[G,X]=a.useState(!1),[O,I]=a.useState(!0),[_,C]=a.useState({naskah_id:n.id,to_user_id:0,organisasi_id:0,nama:"",jabatan:"",instansi:"",jenis:"",naskah:"MASUK",nama_pengguna:"",nama_organisasi:"",to_jabatan_id:0,to_organisasi_id:0,to_public_organisasi_id:0}),[k,b]=a.useState({total:0,from:1,to:1});let y=[];p==null?y=[]:y=p.map(d=>({nama_jabatan:d.nama_jabatan,jenis:d.jenis,ditambahkan:d.created_at,action:e.jsx("div",{className:"flex items-center justify-center gap-3 w-full",children:!s&&ge(r,"is_delete")&&e.jsx($a,{size:"1.5em",color:"#e62e2d",onClick:()=>E(d),className:"cursor-pointer",title:"Hapus"})})}));const[o,F]=a.useState({naskah_id:n.id,naskah:"MASUK",page:1,rows:10,sortField:"",sortOrder:null,search:"",filters:{nama_jabatan:{value:""},jenis:{value:""}}});a.useEffect(()=>{n.id&&x()},[o]);const x=async(d=!1)=>{d&&(o.page=1),m(!0),await i.getPagingPenerima(o).then(j=>{let g=j.data.result;g.data&&(B(g.data),m(!1)),m(!1),b({...k,to:g.to,from:g.from,total:g.total})}).catch(j=>{console.log({error:j}),m(!1),b({...k,to:0,from:!1,total:0})})},S=os((d,j,g=null)=>{if(g){let v=g.target;for(;v&&v.tagName!=="TD";)v=v.parentNode;if(v&&v.tagName==="TD"){const N=v.querySelector(".clear-input"),Q=v.querySelector("input");j?N.classList.remove("hidden"):(N.classList.add("hidden"),Q.value="")}}let c={...o};c.filters[d].value=j,c.page=1,F(c)},600),f=d=>{let j={...o};j.page=d,F(j),window.scrollTo({top:0,behavior:"smooth"})},R=d=>{let j={...o};j.rows=d,j.page=1,F(j)},u=d=>{let j={...o};j.sortField=d,o.sortField!=d?o.sortOrder==""&&(j.sortOrder=1):o.sortOrder==1?j.sortOrder=-1:(j.sortOrder="",j.sortField=""),j.page=1,F(j)},D=d=>{I(!1),i.postPenerima(d).then(j=>{var g,c,v;U.fire((g=j.data)!=null&&g.success?"Berhasil":"Gagal",(c=j.data)==null?void 0:c.message,(v=j.data)!=null&&v.success?"success":"warning"),j.data.success&&(x(!0),J())}).catch(j=>{var g,c,v,N;console.log(j),U.fire("Gagal",(c=(g=j.response)==null?void 0:g.data)!=null&&c.result&&j.response.data.result.length>0?j.response.data.result[0]:(N=(v=j.response)==null?void 0:v.data)==null?void 0:N.message,"error")}).finally(()=>I(!0))},E=d=>{U.fire({title:"Konfirmasi",text:`Data ${d.nama} akan dihapus ?`,icon:"warning",showCancelButton:!0,confirmButtonText:"Hapus",cancelButtonText:"Batal",customClass:{confirmButton:"button button-error",cancelButton:"button button-info"}}).then(j=>{j.isConfirmed&&(ka(),i.deletePenerima(d.id).then(g=>{g.status==200&&x(),U.fire("Berhasil","Data Berhasil Dihapus","success")}).catch(g=>{var v,N;const c=getDynamicError(g.response.data.result);U.fire("Gagal",c??((N=(v=g.response)==null?void 0:v.data)==null?void 0:N.message),"error")}))})},J=()=>{A(!1)},P=d=>{X(!1),A(!0),H(d),C({naskah_id:n.id,to_user_id:0,organisasi_id:0,nama:"",jabatan:"",instansi:"",jenis:d,naskah:"MASUK",nama_pengguna:"",nama_organisasi:"",to_jabatan_id:0,to_organisasi_id:0,to_public_organisasi_id:0})},h=()=>e.jsxs(Ls,{anchorEl:G,anchorOrigin:{vertical:"top",horizontal:"right"},open:!!G,onClose:()=>X(!1),sx:{mt:7,left:"-3rem",zIndex:10},children:[e.jsx(Ma,{title:"Utama",onClick:()=>P("UTAMA")}),e.jsx(Ma,{title:"Tembusan",onClick:()=>P("TEMBUSAN")})]});return e.jsxs(e.Fragment,{children:[e.jsxs(w,{container:!0,direction:"row",justifyContent:"space-between",alignItems:"center",children:[e.jsxs(w,{item:!0,className:"flex items-center gap-2",children:[e.jsx(Vi,{size:"1.5em"}),e.jsx(le,{variant:"h5",fontWeight:"medium",children:"Penerima"})]}),e.jsx(w,{item:!0,children:e.jsxs(ie,{children:[e.jsxs(_e,{variant:"gradient",color:"info",onClick:d=>X(d.currentTarget),children:[e.jsx(Ea,{size:"1.5em",className:"me-2"}),"Tambah"]}),h()]})})]}),e.jsxs(w,{children:[e.jsx("div",{className:"overflow-auto",children:e.jsxs("div",{className:"table px-6 pt-6 min-w-full",children:[e.jsx("div",{className:"flex justify-end mb-1",children:e.jsx(pa,{config:o,handleClick:R})}),e.jsxs("table",{className:"w-full text-sm text-left !text-gray-700 dark:text-gray-400 table-bordered",children:[e.jsx("thead",{className:"text-xs text-gray-500 uppercase border-b-2 mb-1",children:e.jsxs("tr",{children:[e.jsx(q,{text:"Kepada",sortField:"nama_jabatan",sortOrder:o.sortOrder,config:o,handleClick:()=>u("nama_jabatan")}),e.jsx(q,{text:"Jenis",sortField:"jenis",sortOrder:o.sortOrder,config:o,handleClick:()=>u("jenis")}),e.jsx(q,{text:"Ditambahkan Pada",sortField:"created_at",sortOrder:o.sortOrder,config:o,handleClick:()=>u("created_at")}),e.jsx(q,{text:"Aksi",className:"justify-center min-w-[2rem]"})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{className:"border-b border-slate-300",children:[e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"nama_jabatan",onSearch:S,placeholder:"Kepada",type:"input"})}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"jenis",onSearch:S,placeholder:"Jenis",type:"input"})}),e.jsx("td",{}),e.jsx("td",{})]}),l?e.jsx("tr",{children:e.jsx("td",{colSpan:5,children:e.jsx(ia,{})})}):e.jsx(e.Fragment,{}),y.length?y.map((d,j)=>e.jsxs("tr",{className:"border-b border-slate-300",children:[e.jsx("td",{className:" max-w-[20rem] px-6 py-6",children:d.nama_jabatan}),e.jsx("td",{className:" max-w-[20rem] px-6 py-6",children:d.jenis}),e.jsx("td",{className:" max-w-[20rem] px-6 py-6",children:na(d.ditambahkan)}),e.jsxs("td",{className:"px-1 text-right w-[2rem]",children:[" ",d.action," "]})]},j)):e.jsx(e.Fragment,{})]})]}),e.jsxs("nav",{className:"flex items-center justify-between p-4","aria-label":"Table navigation",children:[e.jsx("span",{className:"text-sm text-gray-400",children:k.from&&`Menampilkan ${Se(k.from)} sampai ${Se(k.to)} dari ${Se(k.total)} entri`}),e.jsx(xa,{currentPage:o.page,lastPage:K,displayCount:5,handleClick:f})]})]})}),e.jsxs(Fa,{open:V,onClose:J,children:[e.jsxs("div",{children:[e.jsxs(_a,{children:[" Tambah Tujuan ",M=="UTAMA"?"Utama":"Tembusan"," Baru"]}),e.jsx(ca,{initialValues:_,onSubmit:D,validateOnChange:!0,validationSchema:yd,children:e.jsx(da,{id:"formPengguna",className:"text-sm",children:e.jsx("div",{className:"mb-6 px-2",children:e.jsx(w,{mt:1,children:e.jsx(Na,{children:e.jsx(ce,{name:"to_user_id",children:({field:d,form:j,meta:g})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Kepada",required:!0,error:g.error&&g.touched}),e.jsx(ra,{url:"pengguna/tujuan/tujuan-internal",isDisabled:s,callbackChange:c=>{var v,N,Q,re;c?(j.setFieldValue("to_user_id",(c==null?void 0:c.id)??""),j.setFieldValue("organisasi_id",(c==null?void 0:c.organisasi_id)??""),j.setFieldValue("nama",(c==null?void 0:c.nama)??""),j.setFieldValue("jabatan",((v=c==null?void 0:c.jabatan)==null?void 0:v.nama)??""),j.setFieldValue("instansi",((N=c==null?void 0:c.jabatan)==null?void 0:N.desc_organisasi)??""),j.setFieldValue("nama_pengguna",(c==null?void 0:c.username)??""),j.setFieldValue("nama_organisasi",((Q=c==null?void 0:c.jabatan)==null?void 0:Q.desc_organisasi)??""),j.setFieldValue("to_jabatan_id",((re=c==null?void 0:c.jabatan)==null?void 0:re.id)??""),j.setFieldValue("to_organisasi_id",(c==null?void 0:c.organisasi_id)??""),j.setFieldValue("to_public_organisasi_id",(c==null?void 0:c.public_organisasi_id)??"")):j.resetForm()},keyValue:["id","nama_full"],placeholder:"Pilih Tujuan...",className:"text-base",menuPortalTarget:null,optionParam:{public_organisasi_id:t==null?void 0:t.public_organisasi_id}}),e.jsx(ue,{text:g.error,error:g.error&&g.touched})]})})})})})})})]}),e.jsx(ya,{children:e.jsxs(e.Fragment,{children:[!s&&e.jsx(Je,{submit:O,color:"success",formId:"formPengguna",text:"Simpan"}),e.jsx(_e,{color:s?"dark":"error",variant:"gradient",onClick:()=>A(!1),children:s?"Tutup":"Batal"})]})})]})]})]})},ej=()=>{var J,P;const r="Log Naskah Masuk",[s,n]=a.useState(!1),[t,i]=a.useState(!1),l=JSON.parse(Le.getItem("users")),m=new Nr,p=new qa,B=ga(),K=ha();a.useRef();const[W,z]=a.useState(!1),[T,L]=a.useState(null),[$,M]=a.useState(!0),[H,V]=a.useState(null),[A,G]=a.useState(null),[X,O]=a.useState(null),[I,_]=a.useState(!1),[C,k]=a.useState({}),[b,y]=a.useState(!1),[o,F]=a.useState({formode:((J=B.state)==null?void 0:J.formode)??null,id:((P=B.state)==null?void 0:P.id)??null,user_created_nama:l==null?void 0:l.nama,organisasi_created_nama:l==null?void 0:l.desc_organisasi}),x="";a.useEffect(()=>{const h=new URLSearchParams(B.search),d=h.get("id");if(d&&!o.id){const j=Js(d);F(g=>({...g,id:Number(j),formode:h.get("formode")}))}},[B.search]),a.useEffect(()=>{o.formode=="Tambah"&&n(ge(r,"is_create",!0)),o.formode=="Ubah"&&o.id&&(U.showLoading(),S().then(()=>{n(ge(r,"is_update",!0))}))},[o.formode,o.id]);const S=async()=>{await m.getDetail(o.id).then(h=>{let d=h.data.result;d&&(F(j=>({...j,...d})),D(d.sifat_naskah_id),u(d.jenis_naskah_id).finally(()=>U.close()))}).catch(h=>{var j,g;const d=Oe(h.response.data.result);U.fire("Gagal",d??((g=(j=h.response)==null?void 0:j.data)==null?void 0:g.message),"error")})},f=async h=>{M(!1);const d=new FormData;Object.keys(h).forEach(j=>{d.append(j,h[j]??"")}),C&&d.append("file",C),d.append("jabatan_created_nama",l==null?void 0:l.desc_jabatan),d.append("updated_at",new Date),d.append("tanggal",_s(h.tanggal).format()),d.append("received_at",_s(h.received_at).format()),m.post(o.id,d).then(j=>{var g,c,v;j.data.success&&(U.fire((g=j.data)!=null&&g.success?"Berhasil":"Gagal",(c=j.data)==null?void 0:c.message,(v=j.data)!=null&&v.success?"success":"warning"),K(x+"/penerimaan-naskah-masuk/log-naskah-masuk"))}).catch(j=>{var c,v;const g=Oe(j.response.data.result);U.fire("Gagal",g??((v=(c=j.response)==null?void 0:c.data)==null?void 0:v.message),"error")}).finally(()=>M(!0))},R=()=>{K(x+"/penerimaan-naskah-masuk/log-naskah-masuk")},u=async h=>{h&&await p.detail("tatanaskah/jenis-naskah",h,"master").then(d=>{V(d)})},D=async h=>{h&&await p.detail("tatanaskah/sifat-naskah",h,"master").then(d=>{G(d)})},E=h=>{k(h)};return e.jsxs(aa,{children:[e.jsx(la,{}),s&&e.jsx(e.Fragment,{children:e.jsxs(ie,{pt:6,pb:3,className:"flex flex-col gap-10",children:[e.jsxs(Me,{children:[e.jsx(ie,{px:3,pt:3,lineHeight:1,children:e.jsxs(w,{container:!0,direction:"row",justifyContent:"space-between",alignItems:"center",children:[e.jsx(w,{item:!0,children:e.jsxs(le,{variant:"h5",fontWeight:"medium",children:[o.formode," ",r]})}),e.jsx(w,{item:!0,children:e.jsxs(_e,{variant:"gradient",color:"secondary",onClick:R,children:[e.jsx(za,{size:"1.5em",className:"me-2"}),o.formode!="Lihat"?"Batal":"Kembali"]})})]})}),e.jsx(ca,{initialValues:o,onSubmit:f,validateOnChange:!0,validationSchema:_d,enableReinitialize:!0,children:e.jsxs(da,{id:"form",encType:"multipart/form-data",children:[e.jsx(w,{children:e.jsxs("div",{className:"p-6 grid grid-cols-12 mb-10 gap-5 lg:mb-0",children:[e.jsx("div",{className:"col-span-12 md:col-span-12",children:e.jsxs(w,{item:!0,children:[e.jsx(le,{color:"secondary",variant:"body2",fontWeight:"medium",children:"IDENTITAS PENGIRIM NASKAH"}),e.jsx(gs,{})]})}),e.jsx("div",{className:"col-span-12 md:col-span-4",children:e.jsx(w,{children:e.jsx(ce,{name:"nama_pengirim",children:({field:h,meta:d})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Nama Pengirim",required:!0,error:d.error&&d.touched}),e.jsx(Ye,{...h,type:"text",placeholder:"Masukkan Nama Pengirim...",error:d.error&&d.touched}),e.jsx(ue,{text:d.error,error:d.error&&d.touched})]})})})}),e.jsx("div",{className:"col-span-12 md:col-span-4",children:e.jsx(w,{children:e.jsx(ce,{name:"jabatan_pengirim",children:({field:h,meta:d})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Jabatan Pengirim",required:!0,error:d.error&&d.touched}),e.jsx(Ye,{...h,type:"text",placeholder:"Masukkan Jabatan Pengirim...",error:d.error&&d.touched}),e.jsx(ue,{text:d.error,error:d.error&&d.touched})]})})})}),e.jsx("div",{className:"col-span-12 md:col-span-4",children:e.jsx(w,{children:e.jsx(ce,{name:"instansi_pengirim",children:({field:h,meta:d})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Instansi Pengirim",required:!0,error:d.error&&d.touched}),e.jsx(Ye,{...h,type:"text",placeholder:"Masukkan Instansi Pengirim...",error:d.error&&d.touched}),e.jsx(ue,{text:d.error,error:d.error&&d.touched})]})})})})]})}),e.jsx(w,{children:e.jsxs("div",{className:"p-6 grid grid-cols-12 mb-10 gap-5 lg:mb-0",children:[e.jsx("div",{className:"col-span-12 md:col-span-12",children:e.jsxs(w,{item:!0,children:[e.jsx(le,{color:"secondary",variant:"body2",fontWeight:"medium",children:"DETAIL ISI NASKAH"}),e.jsx(gs,{})]})}),e.jsxs("div",{className:"col-span-12 md:col-span-6",children:[e.jsx(w,{mb:2,children:e.jsx(ce,{name:"jenis_naskah_id",children:({field:h,form:d,meta:j})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Jenis Naskah",required:!0,error:j.error&&j.touched}),e.jsx(ra,{url:"tatanaskah/jenis-naskah/select",callbackChange:g=>{d.setFieldValue("jenis_naskah_id",(g==null?void 0:g.id)??0),V(g)},selectedData:H,keyValue:["id","jenis_naskah"],placeholder:"Pilih Jenis Naskah...",className:"text-sm",menuPortalTarget:null,isMulti:!1,optionParam:{"select-target":"select-jenis-naskah"},targetService:"master"}),e.jsx(ue,{text:j.error,error:j.error&&j.touched})]})})}),e.jsx(w,{mb:2,children:e.jsx(ce,{name:"sifat_naskah_id",children:({field:h,form:d,meta:j})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Sifat Naskah",required:!0,error:j.error&&j.touched}),e.jsx(ra,{url:"tatanaskah/sifat-naskah/select",callbackChange:g=>{d.setFieldValue("sifat_naskah_id",(g==null?void 0:g.id)??0),G(g)},selectedData:A,keyValue:["id","sifat_naskah"],placeholder:"Pilih Sifat Naskah...",className:"text-sm",menuPortalTarget:null,isMulti:!1,optionParam:{"select-target":"select-sifat-naskah"},targetService:"master"}),e.jsx(ue,{text:j.error,error:j.error&&j.touched})]})})}),e.jsx(w,{mb:2,children:e.jsx(ce,{name:"nomor",children:({field:h,meta:d})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Nomor Naskah",required:!0,error:d.error&&d.touched}),e.jsx(Ye,{...h,type:"text",placeholder:"Masukkan Nomor Naskah...",error:d.error&&d.touched}),e.jsx(ue,{text:d.error,error:d.error&&d.touched})]})})}),e.jsx(w,{mb:2,children:e.jsx(ce,{name:"reply_id",children:({field:h,form:d,meta:j})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Nomor Referensi",required:!1,error:j.error&&j.touched}),e.jsx(ra,{url:"naskah-dinas/naskah-masuk/nomor-referensi/select",callbackChange:g=>{d.setFieldValue("reply_id",(g==null?void 0:g.id)??0),O(g)},selectedData:X,keyValue:["id","nomor_hal"],placeholder:"Pilih Nomor Referensi...",className:"text-sm",menuPortalTarget:null,isMulti:!1,optionParam:{user_id:l==null?void 0:l.id},targetService:"nm"}),e.jsx(ue,{text:j.error,error:j.error&&j.touched})]})})}),e.jsx(w,{mb:2,children:e.jsx(ce,{name:"tanggal",children:({field:h,form:d,meta:j})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Tanggal Naskah",required:!0,error:j.error&&j.touched}),e.jsx(ht,{dateAdapter:mt,children:e.jsx(xt,{value:_s(h.value),onChange:g=>{d.setFieldValue("tanggal",g)},format:"DD/MM/YYYY"})}),e.jsx(ue,{text:j.error,error:j.error&&j.touched})]})})}),e.jsx(w,{mb:2,children:e.jsx(ce,{name:"received_at",children:({field:h,form:d,meta:j})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Tanggal Diterima",required:!0,error:j.error&&j.touched}),e.jsx(ht,{dateAdapter:mt,children:e.jsx(xt,{value:_s(h.value),onChange:g=>{d.setFieldValue("received_at",g)},format:"DD/MM/YYYY"})}),e.jsx(ue,{text:j.error,error:j.error&&j.touched})]})})})]}),e.jsxs("div",{className:"col-span-12 md:col-span-6",children:[e.jsx(w,{mb:2,children:e.jsx(ce,{name:"hal",children:({field:h,meta:d})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Hal",required:!0,error:d.error&&d.touched}),e.jsx(Ka,{...h,placeHolder:"Masukkan Hal...",error:d.error&&d.touched}),e.jsx(ue,{text:d.error,error:d.error&&d.touched})]})})}),e.jsx(w,{mb:2,children:e.jsx(ce,{name:"ringkasan",children:({field:h,meta:d})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Isi Ringkas",required:!0,error:d.error&&d.touched}),e.jsx(Ka,{...h,rows:8,placeHolder:"Masukkan Isi Ringkas...",error:d.error&&d.touched}),e.jsx(ue,{text:d.error,error:d.error&&d.touched})]})})}),e.jsx(w,{mb:2,children:e.jsx(ce,{name:"file",children:({field:h,form:d,meta:j})=>{var g,c;return e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"File Naskah",required:!0,error:j.error&&j.touched}),e.jsx("a",{href:(g=o.file_url)==null?void 0:g.url,target:"_blank",className:"text-blue-500 mb-4",children:(c=o.file_url)==null?void 0:c.filename}),e.jsx(et,{onFileSelected:v=>{E(v)},isReset:b,desc:"Format yang didukung: .PDF dan maksimum ukuran file 5 MB",descBox:"Untuk menambahkan File, seret dan lepas file tersebut ke sini, atau klik untuk memilih file.",acceptedType:["application/pdf"],notifFileTypeError:"File Hanya Support PDF",maxSizePerFileInMb:5}),e.jsx(ue,{text:j.error,error:j.error&&j.touched})]})}})})]})]})}),e.jsx("div",{className:"p-3 flex justify-end items-center w-full gap-5 mb-10",children:!W&&e.jsx(Je,{submit:$,color:"success",formId:"form",text:o.formode=="Tambah"?"Simpan":"Ubah"})})]})})]}),e.jsx(Me,{children:e.jsx(ie,{px:3,pt:3,lineHeight:1,children:e.jsx(Xf,{modul:r,visibleview:W,open:I,setOpen:_,formValue:o})})}),e.jsx(Me,{children:e.jsx(ie,{px:3,pt:3,lineHeight:1,children:e.jsx(Zf,{modul:r,visibleview:W,formValue:o,user:l})})})]})})]})},Sr=({data:r,category:s="nonlog",naskahId:n})=>{var S,f,R,u,D,E,J,P,h;const t=JSON.parse(Le.getItem("users")),i=new qa,[l,m]=a.useState(!1),[p,B]=a.useState(!1),[K,W]=a.useState([]),[z,T]=a.useState(!1),[L,$]=a.useState(null),[M,H]=a.useState([]),[V,A]=a.useState([]),[G,X]=a.useState({}),[O,I]=a.useState(!1),_=new js;a.useEffect(()=>{n&&r&&C()},[n,r]),a.useEffect(()=>{r!=null&&r.reply_id&&b(),r!=null&&r.klasifikasi_id&&y(r.klasifikasi_id)},[r]);const C=async()=>{Ta.loading("Mengambil File PDF",{toastId:"get-file-pdf"}),T(!1),await _.getContent({id:n}).then(async d=>{const j=d,g=await Hs(j.file,j.file_path??"naskah-masuk",null,0,r.created_at);g?($(g),Ta.update("get-file-pdf",{render:"File PDF berhasil ditampilkan",type:"success",isLoading:!1,pauseOnHover:!0,pauseOnFocusLoss:!1,autoClose:5e3,closeButton:!0})):(console.log(g),Ta.update("get-file-pdf",{render:"Terjadi kesalahan menampilkan file PDF",type:"error",isLoading:!1,pauseOnHover:!0,autoClose:5e3,closeButton:!0}))}).catch(d=>{console.log(d),Ta.update("get-file-pdf",{render:"Terjadi kesalahan menampilkan file PDF",type:"error",isLoading:!1,pauseOnHover:!0,autoClose:5e3,closeButton:!0})}).finally(()=>T(!0))},k=async()=>{U.fire({title:"Peringatan",text:"Proses ini akan sinkronisasi ulang nomor dan file pdf dari naskah keluar",icon:"warning",reverseButtons:!0,showCancelButton:!0,confirmButtonText:"Oke",cancelButtonText:"Batal",customClass:{confirmButton:"button button-info",cancelButton:"button button-secondary"}}).then(async d=>{d.isConfirmed&&(T(!1),Ta.loading("Memperbarui PDF",{toastId:"refresh-file-pdf"}),await _.syncContent({id:n}).then(async j=>{window.location.reload()}).catch(j=>{var v,N,Q,re;const c=getDynamicError((N=(v=j.response)==null?void 0:v.data)==null?void 0:N.result)||((re=(Q=j.response)==null?void 0:Q.data)==null?void 0:re.message)||(j==null?void 0:j.message);Ta.update("refresh-file-pdf",{render:c,type:"error",isLoading:!1,pauseOnHover:!0,autoClose:5e3,closeButton:!0})}).finally(()=>T(!0)))})},b=async()=>{const d={"select-target":"nomor-referensi",user_id:t==null?void 0:t.id,organisasi_id:t==null?void 0:t.organisasi_id},j=await i.select("naskah-dinas/nomor-referensi-keluar/select",d,"arsip").then(g=>g);if(j.length){const g=j.filter(c=>c.id==(r==null?void 0:r.reply_id));W(g[0])}},y=async d=>{d&&await i.detail("klasifikasi",d,"master").then(j=>{X(j)})},o=async()=>{const d={page:1,rows:1e3,naskah_id:n,naskah:"MASUK","filters[jenis][value]":"UTAMA"};await i.select("naskah-dinas/tujuan-naskah",d,"nm").then(j=>{H(j)}).catch(j=>console.log(j))},F=async()=>{const d={page:1,rows:1e3,naskah_id:n,naskah:"MASUK","filters[jenis][value]":"TEMBUSAN"};await i.select("naskah-dinas/tujuan-naskah",d,"nm").then(j=>{A(j)}).catch(j=>console.log(j))},x=()=>{B(!p),M.length||(I(!0),o().then(()=>F()).finally(()=>I(!1)))};return e.jsx(ie,{pt:6,pb:3,children:e.jsxs(Me,{className:"p-5",children:[e.jsx("div",{className:"text-sm",children:"Naskah Masuk dari:"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-16 h-16 flex-shrink-0 rounded-full bg-green-400"}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg",children:[r==null?void 0:r.nama_pengirim," - ",r==null?void 0:r.jabatan_pengirim]}),e.jsx("p",{children:r==null?void 0:r.instansi_pengirim})]})]}),e.jsxs(w,{mt:2,children:[e.jsxs("div",{className:"p-3 grid grid-cols-12 mb-10 gap-5 lg:mb-5 text-sm",children:[e.jsxs("div",{className:"col-span-12 md:col-span-4",children:[e.jsx("label",{className:"text-xs",children:"Nomor Referensi"}),e.jsx("div",{className:"font-medium",children:(S=r==null?void 0:r.reply)!=null&&S.nomor?r.reply.nomor:e.jsx(be,{badgeContent:"TIDAK ADA",color:"secondary",container:!0})})]}),e.jsxs("div",{className:"col-span-12 md:col-span-4",children:[e.jsx("label",{className:"text-xs",children:"Nomor Naskah"}),e.jsx("div",{className:"font-medium",children:r==null?void 0:r.nomor})]}),e.jsxs("div",{className:"col-span-12 md:col-span-4",children:[e.jsx("label",{className:"text-xs",children:"Tanggal Naskah"}),e.jsx("div",{className:"font-medium",children:zs(r==null?void 0:r.tanggal)})]}),e.jsxs("div",{className:"col-span-12 md:col-span-4",children:[e.jsx("label",{className:"text-xs",children:"Hal"}),e.jsx("div",{className:"font-medium",children:r==null?void 0:r.hal})]}),e.jsxs("div",{className:"col-span-12 md:col-span-4",children:[e.jsx("label",{className:"text-xs",children:"Isi Ringkas"}),e.jsx("div",{className:"font-medium",children:r==null?void 0:r.ringkasan})]})]}),e.jsx("div",{className:"col-span-12 mb-10 lg:mb-5 border rounded-md px-3",children:e.jsxs("div",{className:"p-1 grid grid-cols-12 mb-5 gap-0 lg:gap-5 lg:mb-0 text-sm",children:[e.jsxs("div",{className:"col-span-12 cursor-pointer my-2 flex justify-between items-center",onClick:()=>m(!l),children:[e.jsxs("div",{className:"flex justify-start items-center text-blue-500",children:[e.jsx(qi,{className:"w-5 h-4 me-4"}),e.jsx("div",{className:"text-lg",children:"Detail Naskah Dinas"})]}),e.jsx(is,{className:"w-6 h-5 text-gray-500 cursor-pointer"})]}),l&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"col-span-12 lg:col-span-6",children:[e.jsxs("div",{className:"p-1 grid grid-cols-12 mb-2 gap-0 lg:gap-5 lg:mb-0 text-sm",children:[e.jsx("div",{className:"col-span-12 md:col-span-6",children:"Jenis Naskah"}),e.jsxs("div",{className:"col-span-12 md:col-span-6",children:[e.jsx("span",{className:"hidden md:inline",children:":"})," ",(r==null?void 0:r.jenis_naskah_nama)??"-"]})]}),e.jsxs("div",{className:"p-1 grid grid-cols-12 mb-2 gap-0 lg:gap-5 lg:mb-0 text-sm",children:[e.jsx("div",{className:"col-span-12 md:col-span-6",children:"Sifat Naskah"}),e.jsxs("div",{className:"col-span-12 md:col-span-6",children:[e.jsx("span",{className:"hidden md:inline",children:":"})," ",(r==null?void 0:r.sifat_naskah_nama)??"-"]})]}),e.jsxs("div",{className:"p-1 grid grid-cols-12 mb-2 gap-0 lg:gap-5 lg:mb-0 text-sm",children:[e.jsx("div",{className:"col-span-12 md:col-span-6",children:"Klasifikasi"}),e.jsxs("div",{className:"col-span-12 md:col-span-6",children:[e.jsx("span",{className:"hidden md:inline",children:":"})," ",(G==null?void 0:G.kode_nama)??"-"]})]}),e.jsxs("div",{className:"p-1 grid grid-cols-12 mb-2 gap-0 lg:gap-5 lg:mb-0 text-sm",children:[e.jsx("div",{className:"col-span-12 md:col-span-6",children:"Tipe Penandatangan"}),e.jsxs("div",{className:"col-span-12 md:col-span-6",children:[e.jsx("span",{className:"hidden md:inline",children:":"})," ",(r==null?void 0:r.ttd)??"-"]})]})]}),e.jsxs("div",{className:"col-span-12 lg:col-span-6",children:[e.jsxs("div",{className:"p-1 grid grid-cols-12 mb-2 gap-0 lg:gap-5 lg:mb-0 text-sm",children:[e.jsx("div",{className:"col-span-12 md:col-span-6",children:"Berkas"}),e.jsx("div",{className:"col-span-12 md:col-span-6",children:(f=r==null?void 0:r.berkas_naskah)!=null&&f.berkas?e.jsxs("p",{children:[e.jsx("span",{className:"hidden md:inline",children:": "}),(u=(R=r==null?void 0:r.berkas_naskah)==null?void 0:R.berkas)==null?void 0:u.nomor," -"," ",(E=(D=r==null?void 0:r.berkas_naskah)==null?void 0:D.berkas)==null?void 0:E.nama]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"hidden md:inline",children:":"}),e.jsx("span",{className:"bg-orange-500 text-white p-1 ms-0 ps-2 md:ms-1 rounded-md",children:"Belum diberkaskan"})]})})]}),e.jsxs("div",{className:"p-1 grid grid-cols-12 mb-2 gap-0 lg:gap-5 lg:mb-0 text-sm",children:[e.jsx("div",{className:"col-span-12 md:col-span-6",children:"Diterima pada"}),e.jsxs("div",{className:"col-span-12 md:col-span-6",children:[e.jsx("span",{className:"hidden md:inline",children:":"})," ",Qh(r==null?void 0:r.received_at)]})]}),s=="log"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"p-1 grid grid-cols-12 mb-2 gap-0 lg:gap-5 lg:mb-0 text-sm",children:[e.jsx("div",{className:"col-span-12 md:col-span-6",children:"Diregistrasikan pada"}),e.jsxs("div",{className:"col-span-12 md:col-span-6",children:[e.jsx("span",{className:"hidden md:inline",children:":"})," ",Ns(r==null?void 0:r.created_at)]})]}),e.jsxs("div",{className:"p-1 grid grid-cols-12 mb-2 gap-0 lg:gap-5 lg:mb-0 text-sm",children:[e.jsx("div",{className:"col-span-12 md:col-span-6",children:"Diregistrasikan oleh"}),e.jsxs("div",{className:"col-span-12 md:col-span-6",children:[e.jsx("span",{className:"hidden md:inline",children:":"})," ",r==null?void 0:r.user_created_nama," -"," ",r==null?void 0:r.jabatan_created_nama," - ",r==null?void 0:r.organisasi_created_nama]})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"p-1 grid grid-cols-12 mb-2 gap-0 lg:gap-5 lg:mb-0 text-sm",children:[e.jsx("div",{className:"col-span-12 md:col-span-6",children:"Dibaca pada"}),e.jsxs("div",{className:"col-span-12 md:col-span-6",children:[e.jsx("span",{className:"hidden md:inline",children:":"})," ",Ns((J=r==null?void 0:r.status_send)==null?void 0:J.updated_at)]})]}),e.jsxs("div",{className:"p-1 grid grid-cols-12 mb-2 gap-0 lg:gap-5 lg:mb-0 text-sm",children:[e.jsx("div",{className:"col-span-12 md:col-span-6",children:"Dibaca setelah"}),e.jsxs("div",{className:"col-span-12 md:col-span-6",children:[e.jsx("span",{className:"hidden md:inline",children:":"})," ",r==null?void 0:r.read_time]})]})]})]})]})]})}),e.jsx("div",{className:"col-span-12 mb-10 lg:mb-5 border rounded-md px-3",children:e.jsxs("div",{className:"p-1 grid grid-cols-12 mb-5 gap-0 lg:gap-5 lg:mb-0 text-sm",children:[e.jsxs("div",{className:"col-span-12 cursor-pointer my-2 flex justify-between items-center",onClick:x,children:[e.jsxs("div",{className:"flex justify-start items-center text-orange-500",children:[e.jsx(Hi,{className:"w-5 h-4 me-4"}),e.jsx("div",{className:"text-lg",children:"Penerima"})]}),e.jsx(is,{className:"w-6 h-5 text-gray-500 cursor-pointer"})]}),p&&(O?e.jsx("div",{className:"col-span-12 justify-center flex",children:e.jsx(rs,{className:" w-8 h-8"})}):e.jsxs("div",{className:"col-span-12 grid grid-cols-12 gap-0",children:[e.jsx("div",{className:"col-span-12 lg:col-span-6 max-h-[70vh] overflow-y-auto",children:e.jsxs("div",{className:"p-1 grid grid-cols-12 mb-2 gap-1 lg:mb-0 text-sm",children:[e.jsx("div",{className:"col-span-12",children:"Utama :"}),M.map((d,j)=>e.jsx("div",{className:"col-span-12",children:e.jsxs("span",{children:[j+1,". ",e.jsx("b",{children:d.nama})," - ",d.jabatan," - ",d.instansi]})},d.id))]})}),e.jsx("div",{className:"col-span-12 lg:col-span-6 max-h-[70vh] overflow-y-auto",children:e.jsxs("div",{className:"p-1 grid grid-cols-12 mb-2 gap-1 lg:mb-0 text-sm",children:[e.jsx("div",{className:"col-span-12",children:"Tembusan :"}),V.length?V.map((d,j)=>e.jsx("div",{className:"col-span-12",children:e.jsxs("span",{children:[j+1,". ",e.jsx("b",{children:d.nama})," - ",d.jabatan," - ",d.instansi]})},d.id)):e.jsx("div",{className:"col-span-12",children:e.jsx(be,{badgeContent:"TIDAK ADA",color:"secondary",container:!0})})]})})]}))]})}),e.jsxs("div",{className:"col-span-12 mb-10 lg:mb-5 h-[70vh] border rounded-md p-4",children:[r&&r.naskah_keluar&&(r.file!=((P=r.naskah_keluar)==null?void 0:P.file_convert)||r.nomor!=r.naskah_keluar.nomor)&&e.jsx("div",{className:"text-right mb-3",children:e.jsx(_e,{color:"info",type:"button",variant:"gradient",size:"small",onClick:()=>z&&k(),className:"text-sm whitespace-nowrap",children:e.jsx("div",{className:"flex justify-start",children:z?e.jsx(e.Fragment,{children:"Perbarui PDF"}):e.jsxs(e.Fragment,{children:[e.jsx(rs,{color:"white",className:"flex-shrink-0 w-3 h-3 me-2"}),"Memproses.."]})})})}),L&&e.jsx("iframe",{className:"w-full h-full",src:`${L}`})]}),e.jsx("hr",{className:"mb-10 lg:mb-5"}),e.jsxs("div",{className:"col-span-12 mb-10 lg:mb-5 text-sm",children:[e.jsxs("div",{className:"text-lg mb-3",children:[((h=r==null?void 0:r.lampirans)==null?void 0:h.length)??"0"," Lampiran"]}),e.jsx("ul",{className:"list-none mb-0",children:r!=null&&r.lampirans&&r.lampirans.length?r.lampirans.map(d=>e.jsx("li",{className:"relative inline-block me-5",children:e.jsx("div",{className:"card bg-slate-50 py-2 px-3 mt-3 shadow-md rounded-md",children:e.jsxs("div",{className:"flex justify-start items-center",children:[e.jsx(Qr,{className:"w-12 h-11 text-blue-400 me-5"}),e.jsxs("div",{className:"",children:[e.jsx("div",{className:"font-medium",children:d.nama}),d.file&&e.jsx("div",{onClick:()=>Wa(d.file,d.file_path??"lampiran"),target:"_blank",className:"text-blue-400 hover:text-blue-600 cursor-pointer",children:"Lihat"})]})]})})},d.id)):e.jsx(e.Fragment,{})})]})]})]})})},aj=({dataTable:r,loading:s,setRefreshDetail:n,lazyState:t,setLazyState:i})=>{JSON.parse(Le.getItem("users"));const l=new js,[m,p]=a.useState(!1),[B,K]=a.useState(null),[W,z]=a.useState([]),[T,L]=a.useState(null),[$,M]=a.useState({total:0,from:1,to:1});let H=[];B==null?H=[]:H=B==null?void 0:B.map(_=>{var C;return{id:_.id,naskah_masuk_id:_.naskah_masuk_id,jenis:_.jenis,created_at:_.created_at,user_nama:_.user_nama,jabatan_nama:_.jabatan_nama,organisasi_nama:_.organisasi_nama,disposisi:_.disposisi,catatan:_.catatan,lampiran:(C=_==null?void 0:_.histori_naskah)==null?void 0:C.histori_lampiran}}),a.useEffect(()=>{r.data&&(L(r.last_page),K(r.data)),M({...$,to:r.to,from:r.from,total:r.total})},[r]);const V=Da((_,C,k=null)=>{if(k){let y=k.target;for(;y&&y.tagName!=="TD";)y=y.parentNode;if(y&&y.tagName==="TD"){const o=y.querySelector(".clear-input"),F=y.querySelector("input");C?o.classList.remove("hidden"):(o.classList.add("hidden"),F.value="")}}let b={...t};b.filters[_].value=C,b.page=1,i(b)},600),A=_=>{let C={...t};C.page=_,i(C),window.scrollTo({top:0,behavior:"smooth"})},G=_=>{let C={...t};C.rows=_,C.page=1,i(C)},X=_=>{let C={...t};C.sortField=_,t.sortField!=_?t.sortOrder==""&&(C.sortOrder=1):t.sortOrder==1?C.sortOrder=-1:(C.sortOrder="",C.sortField=""),C.page=1,i(C)},O=_=>{U.fire({title:"Konfirmasi",text:`Koordinasi kepada ${_.user_nama} akan dibatalkan ?`,icon:"warning",showCancelButton:!0,confirmButtonText:"Hapus",cancelButtonText:"Batal",customClass:{confirmButton:"button button-error",cancelButton:"button button-info"}}).then(C=>{C.isConfirmed&&(ka(),l.deleteDisposisi(_==null?void 0:_.id).then(k=>{k.status&&(U.fire("Berhasil","Koordinasi Berhasil Dibatalkan","success"),n(b=>b+1))}).catch(k=>{var y,o;const b=Oe(k.response.data.result);U.fire("Gagal",b??((o=(y=k.response)==null?void 0:y.data)==null?void 0:o.message),"error")}))})},I=_=>{U.fire({title:"Print Koordinasi",icon:"warning",showCancelButton:!0,reverseButtons:!0,confirmButtonText:"Lanjutkan",cancelButtonText:"Batal",customClass:{confirmButton:"button button-info",cancelButton:"button button-secondary"}}).then(async C=>{C.isConfirmed&&(ka(),await l.printTindakLanjut(_.id).then(k=>{`${Ei(_.tanggal).format("YYYY-MM-DD")}`,tn(k.data),U.close()}))})};return e.jsx(e.Fragment,{children:e.jsx(w,{mt:2,children:e.jsx("div",{className:"overflow-auto",children:e.jsxs("div",{className:"table min-w-full",children:[e.jsx("div",{className:"flex items-center justify-end mb-1",children:e.jsx(pa,{config:t,handleClick:G})}),e.jsxs("table",{className:"w-full text-sm text-left !text-gray-700 dark:text-gray-400 table-bordered",children:[e.jsx("thead",{className:"text-xs text-gray-500 uppercase border-b-2 mb-1",children:e.jsxs("tr",{children:[e.jsx(q,{text:"Dilakukan Oleh"}),e.jsx(q,{text:"Kepada",sortField:"kepada",sortOrder:t.sortOrder,config:t,handleClick:()=>X("kepada")}),e.jsx(q,{text:"Pesan Koordinasi",sortField:"catatan",sortOrder:t.sortOrder,config:t,handleClick:()=>X("catatan")}),e.jsx(q,{text:"Lampiran",className:"justify-center"}),e.jsx(q,{text:"Tanggal Koordinasi",sortField:"created_at",sortOrder:t.sortOrder,config:t,handleClick:()=>X("created_at")}),e.jsx(q,{text:"Batas Waktu",sortField:"tanggal_selesai",sortOrder:t.sortOrder,config:t,handleClick:()=>X("tanggal_selesai")}),e.jsx(q,{text:"Status Baca"}),e.jsx(q,{text:"#",className:"justify-center"})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{className:"border-b border-slate-300",children:[e.jsx("td",{className:"max-w-[20rem] py-6 px-2"}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"kepada",onSearch:V,placeholder:"Kepada",type:"input"})}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"catatan",onSearch:V,placeholder:"Pesan Koordinasi",type:"input"})}),e.jsx("td",{}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2"}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2"}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2"}),e.jsx("td",{})]}),s?e.jsx("tr",{children:e.jsx("td",{colSpan:8,children:e.jsx(ia,{})})}):e.jsx(e.Fragment,{}),H.length?H.map(_=>{var C;return(C=_.disposisi)==null?void 0:C.map((k,b)=>{var y,o;return e.jsxs("tr",{className:"border-b border-slate-300",children:[e.jsx("td",{className:" max-w-[9rem] px-6 py-6",children:e.jsx("div",{className:"flex-wrap",children:_.user_nama})}),e.jsx("td",{className:"max-w-[9rem] px-6 py-6",children:e.jsx("div",{className:"flex-wrap",children:k.user_nama})}),e.jsx("td",{className:"px-6 py-6",children:e.jsx("div",{className:"flex flex-col",children:_.catatan?e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("p",{children:_.catatan})}),e.jsx(ts,{className:"text-lg text-red-600 cursor-pointer mt-2",onClick:()=>I(_)})]}):e.jsx(be,{badgeContent:"TIDAK ADA",color:"secondary",container:!0})})}),e.jsx("td",{className:"max-w-[9rem] px-6 py-6 flex-wrap",children:((y=_==null?void 0:_.lampiran)==null?void 0:y.length)>0?e.jsx("ul",{children:(o=_==null?void 0:_.lampiran)==null?void 0:o.map(F=>e.jsx("li",{onClick:()=>Wa(F.file,F.file_path??"lampiran"),className:"hover:underline cursor-pointer break-all text-blue-500 mb-2",children:e.jsx("p",{className:"truncate",children:F.nama})},F.id))}):e.jsx("div",{className:"text-center",children:e.jsx(be,{badgeContent:"TIDAK ADA",color:"secondary",container:!0})})}),e.jsx("td",{className:"max-w-[9rem] px-6 py-6",children:e.jsx("div",{className:"flex-wrap",children:na(k.created_at)})}),e.jsx("td",{className:"max-w-[9rem] px-6 py-6",children:e.jsx("div",{className:"flex-wrap",children:na(k.tanggal_selesai)})}),e.jsx("td",{className:"px-6 py-6 text-center",children:k.is_read?e.jsx("div",{className:"flex-wrap",children:e.jsx(be,{badgeContent:"SUDAH",color:"success",container:!0})}):e.jsx("div",{className:"flex-wrap",children:e.jsx(be,{badgeContent:"BELUM",color:"secondary",container:!0})})}),e.jsx("td",{className:"px-6 py-6 flex-wrap",children:!k.is_read&&e.jsx("button",{onClick:()=>O(k),children:e.jsx($a,{size:"1.5em",className:"text-red-700"})})})]},b)})}):e.jsx("tr",{children:e.jsx("td",{colSpan:9,className:"text-sm text-gray-400 text-center py-4",children:"Tidak ada data yang tersedia pada tabel ini"})})]})]}),e.jsxs("nav",{className:"flex items-center justify-between p-4","aria-label":"Table navigation",children:[e.jsx("span",{className:"text-sm text-gray-400",children:$.from&&`Menampilkan ${Se($.from)} sampai ${Se($.to)} dari ${Se($.total)} entri`}),e.jsx(xa,{currentPage:t.page,lastPage:T,displayCount:5,handleClick:A})]})]})})})})},sj=({dataTable:r,loading:s,setRefreshDetail:n,lazyState:t,setLazyState:i})=>{JSON.parse(Le.getItem("users"));const l=new js,[m,p]=a.useState(!1),[B,K]=a.useState(null),[W,z]=a.useState([]),[T,L]=a.useState(null),[$,M]=a.useState({total:0,from:1,to:1});let H=[];B==null?H=[]:H=B==null?void 0:B.map(_=>{var C;return{id:_.id,naskah_masuk_id:_.naskah_masuk_id,jenis:_.jenis,created_at:_.created_at,user_nama:_.user_nama,jabatan_nama:_.jabatan_nama,organisasi_nama:_.organisasi_nama,disposisi:_.disposisi,catatan:_.catatan,lampiran:(C=_==null?void 0:_.histori_naskah)==null?void 0:C.histori_lampiran}}),a.useEffect(()=>{r.data&&(L(r.last_page),K(r.data)),M({...$,to:r.to,from:r.from,total:r.total})},[r]);const V=Da((_,C,k=null)=>{if(k){let y=k.target;for(;y&&y.tagName!=="TD";)y=y.parentNode;if(y&&y.tagName==="TD"){const o=y.querySelector(".clear-input"),F=y.querySelector("input");C?o.classList.remove("hidden"):(o.classList.add("hidden"),F.value="")}}let b={...t};b.filters[_].value=C,b.page=1,i(b)},600),A=_=>{let C={...t};C.page=_,i(C),window.scrollTo({top:0,behavior:"smooth"})},G=_=>{let C={...t};C.rows=_,C.page=1,i(C)},X=_=>{let C={...t};C.sortField=_,t.sortField!=_?t.sortOrder==""&&(C.sortOrder=1):t.sortOrder==1?C.sortOrder=-1:(C.sortOrder="",C.sortField=""),C.page=1,i(C)},O=_=>{U.fire({title:"Konfirmasi",text:`Arahan kepada ${_.user_nama} akan dibatalkan ?`,icon:"warning",showCancelButton:!0,confirmButtonText:"Hapus",cancelButtonText:"Batal",customClass:{confirmButton:"button button-error",cancelButton:"button button-info"}}).then(C=>{C.isConfirmed&&(ka(),l.deleteDisposisi(_==null?void 0:_.id).then(k=>{k.status&&(U.fire("Berhasil","Arahan Berhasil Dibatalkan","success"),n(b=>b+1))}).catch(k=>{var y,o;const b=Oe(k.response.data.result);U.fire("Gagal",b??((o=(y=k.response)==null?void 0:y.data)==null?void 0:o.message),"error")}))})},I=_=>{U.fire({title:"Print Arahan",icon:"warning",showCancelButton:!0,reverseButtons:!0,confirmButtonText:"Lanjutkan",cancelButtonText:"Batal",customClass:{confirmButton:"button button-info",cancelButton:"button button-secondary"}}).then(async C=>{C.isConfirmed&&(ka(),await l.printTindakLanjut(_.id).then(k=>{console.log(k),`${Ei(_.tanggal).format("YYYY-MM-DD")}`,tn(k.data),U.close()}))})};return e.jsx(e.Fragment,{children:e.jsx(w,{mt:2,children:e.jsx("div",{className:"overflow-auto",children:e.jsxs("div",{className:"table min-w-full",children:[e.jsx("div",{className:"flex items-center justify-end mb-1",children:e.jsx(pa,{config:t,handleClick:G})}),e.jsxs("table",{className:"w-full text-sm text-left !text-gray-700 dark:text-gray-400 table-bordered",children:[e.jsx("thead",{className:"text-xs text-gray-500 uppercase border-b-2 mb-1",children:e.jsxs("tr",{children:[e.jsx(q,{text:"Dilakukan Oleh"}),e.jsx(q,{text:"Kepada",sortField:"kepada",sortOrder:t.sortOrder,config:t,handleClick:()=>X("kepada")}),e.jsx(q,{text:"Pesan Arahan",sortField:"catatan",sortOrder:t.sortOrder,config:t,handleClick:()=>X("catatan")}),e.jsx(q,{text:"Lampiran",className:"justify-center"}),e.jsx(q,{text:"Tanggal Arahan",sortField:"created_at",sortOrder:t.sortOrder,config:t,handleClick:()=>X("created_at")}),e.jsx(q,{text:"Batas Waktu",sortField:"tanggal_selesai",sortOrder:t.sortOrder,config:t,handleClick:()=>X("tanggal_selesai")}),e.jsx(q,{text:"Status Baca"}),e.jsx(q,{text:"#",className:"justify-center"})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{className:"border-b border-slate-300",children:[e.jsx("td",{className:"max-w-[20rem] py-6 px-2"}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"kepada",onSearch:V,placeholder:"Kepada",type:"input"})}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"catatan",onSearch:V,placeholder:"Pesan Arahan",type:"input"})}),e.jsx("td",{}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2"}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2"}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2"}),e.jsx("td",{})]}),s?e.jsx("tr",{children:e.jsx("td",{colSpan:9,children:e.jsx(ia,{})})}):e.jsx(e.Fragment,{}),H.length?H.map(_=>{var C;return(C=_.disposisi)==null?void 0:C.map((k,b)=>{var y,o;return e.jsxs("tr",{className:"border-b border-slate-300",children:[e.jsx("td",{className:" max-w-[9rem] px-6 py-6",children:e.jsx("div",{className:"flex-wrap",children:_.user_nama})}),e.jsx("td",{className:"max-w-[9rem] px-6 py-6",children:e.jsx("div",{className:"flex-wrap",children:k.user_nama})}),e.jsx("td",{className:"px-6 py-6",children:e.jsx("div",{className:"flex flex-col",children:_.catatan?e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("p",{children:_.catatan})}),e.jsx(ts,{className:"text-lg text-red-600 cursor-pointer mt-2",onClick:()=>I(_)})]}):e.jsx(be,{badgeContent:"TIDAK ADA",color:"secondary",container:!0})})}),e.jsx("td",{className:"max-w-[9rem] px-6 py-6 flex-wrap",children:((y=_==null?void 0:_.lampiran)==null?void 0:y.length)>0?e.jsx("ul",{children:(o=_==null?void 0:_.lampiran)==null?void 0:o.map(F=>e.jsx("li",{onClick:()=>Wa(F.file,F.file_path??"lampiran"),className:"hover:underline cursor-pointer break-all text-blue-500 mb-2",children:e.jsx("p",{className:"truncate",children:F.nama})},F.id))}):e.jsx("div",{className:"text-center",children:e.jsx(be,{badgeContent:"TIDAK ADA",color:"secondary",container:!0})})}),e.jsx("td",{className:"max-w-[9rem] px-6 py-6",children:e.jsx("div",{className:"flex-wrap",children:na(k.created_at)})}),e.jsx("td",{className:"max-w-[9rem] px-6 py-6",children:e.jsx("div",{className:"flex-wrap",children:na(k.tanggal_selesai)})}),e.jsx("td",{className:"px-6 py-6 text-center",children:k.is_read?e.jsx("div",{className:"flex-wrap",children:e.jsx(be,{badgeContent:"SUDAH",color:"success",container:!0})}):e.jsx("div",{className:"flex-wrap",children:e.jsx(be,{badgeContent:"BELUM",color:"secondary",container:!0})})}),e.jsx("td",{className:"px-6 py-6 flex-wrap",children:!k.is_read&&e.jsx("button",{onClick:()=>O(k),children:e.jsx($a,{size:"1.5em",className:"text-red-700"})})})]},b)})}):e.jsx("tr",{children:e.jsx("td",{colSpan:9,className:"text-sm text-gray-400 text-center py-4",children:"Tidak ada data yang tersedia pada tabel ini"})})]})]}),e.jsxs("nav",{className:"flex items-center justify-between p-4","aria-label":"Table navigation",children:[e.jsx("span",{className:"text-sm text-gray-400",children:$.from&&`Menampilkan ${Se($.from)} sampai ${Se($.to)} dari ${Se($.total)} entri`}),e.jsx(xa,{currentPage:t.page,lastPage:T,displayCount:5,handleClick:A})]})]})})})})},vr=({naskahId:r,naskahNomor:s,otherTable:n,setOtherTable:t,refresh:i,setRefresh:l})=>{const m=JSON.parse(Le.getItem("users")),p=new ei,B=new Gt,[K,W]=a.useState({}),[z,T]=a.useState(0),[L,$]=a.useState(!1),[M,H]=a.useState({page:1,rows:10,sortField:"",sortOrder:null,role_id:m==null?void 0:m.role,group_role:m==null?void 0:m.group_role,user_id:m==null?void 0:m.id,organisasi_id:m==null?void 0:m.organisasi_id,public_organisasi_id:m==null?void 0:m.public_organisasi_id,jenis:"DISPOSISI",filters:{nomor:{value:""},hal:{value:""},kepada:{value:""},catatan:{value:""},instruksi:{value:""},id_naskah_masuk:{value:r}}}),[V,A]=a.useState({}),[G,X]=a.useState(0),[O,I]=a.useState(!1),[_,C]=a.useState({page:1,rows:10,sortField:"",sortOrder:null,role_id:m==null?void 0:m.role,group_role:m==null?void 0:m.group_role,user_id:m==null?void 0:m.id,organisasi_id:m==null?void 0:m.organisasi_id,public_organisasi_id:m==null?void 0:m.public_organisasi_id,jenis:"KOORDINASI",filters:{nomor:{value:""},hal:{value:""},kepada:{value:""},catatan:{value:""},instruksi:{value:""},id_naskah_masuk:{value:r}}}),[k,b]=a.useState({}),[y,o]=a.useState(0),[F,x]=a.useState(!1),[S,f]=a.useState({page:1,rows:10,sortField:"",sortOrder:null,role_id:m==null?void 0:m.role,group_role:m==null?void 0:m.group_role,user_id:m==null?void 0:m.id,organisasi_id:m==null?void 0:m.organisasi_id,public_organisasi_id:m==null?void 0:m.public_organisasi_id,jenis:"ARAHAN",filters:{nomor:{value:""},hal:{value:""},kepada:{value:""},catatan:{value:""},instruksi:{value:""},id_naskah_masuk:{value:r}}}),[R,u]=a.useState({}),[D,E]=a.useState(0),[J,P]=a.useState(!1),[h,d]=a.useState({page:1,rows:10,sortField:"",sortOrder:null,search:"",user_id:m==null?void 0:m.id,group_role:m==null?void 0:m.group_role,organisasi_id:m==null?void 0:m.organisasi_id,public_organisasi_id:m==null?void 0:m.public_organisasi_id,filters:{jenis_naskah:{value:""},ukuran:{value:""},nama_file:{value:""},template_naskah:{value:""},reference:{value:s}}});a.useEffect(()=>{r&&j()},[M,i,r]),a.useEffect(()=>{r&&g()},[_,i,r]),a.useEffect(()=>{r&&c()},[S,i,r]),a.useEffect(()=>{s&&v()},[h,i,s]);const j=async(N=!1)=>{N&&(M.page=1),$(!0),await p.getLogPaging(M).then(Q=>{var ye,xe;let re=Q.data.result;if(re.data){let fe=(xe=(ye=re.data)==null?void 0:ye.reduce((Ge,$e)=>Ge.concat($e==null?void 0:$e.disposisi),[]))==null?void 0:xe.length;T(fe),W(re)}}).catch(Q=>{}).finally(()=>$(!1))},g=async(N=!1)=>{N&&(_.page=1),I(!0),await p.getLogPaging(_).then(Q=>{var ye,xe;let re=Q.data.result;if(re.data){let fe=(xe=(ye=re.data)==null?void 0:ye.reduce((Ge,$e)=>Ge.concat($e==null?void 0:$e.disposisi),[]))==null?void 0:xe.length;X(fe),A(re)}}).catch(Q=>{}).finally(()=>I(!1))},c=async(N=!1)=>{N&&(S.page=1),x(!0),await p.getLogPaging(S).then(Q=>{var ye,xe;let re=Q.data.result;if(re.data){let fe=(xe=(ye=re.data)==null?void 0:ye.reduce((Ge,$e)=>Ge.concat($e==null?void 0:$e.disposisi),[]))==null?void 0:xe.length;o(fe),b(re)}}).catch(Q=>{}).finally(()=>x(!1))},v=async(N=!1)=>{N&&(h.page=1),P(!0),await B.getPaging({...h,filters:{...h.filters,reference:s}}).then(Q=>{let re=Q.data.result;re.data&&(E(re.total),u(re))}).catch(Q=>{}).finally(()=>P(!1))};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"p-4 text-base",children:e.jsxs("div",{className:"flex justify-center",children:[e.jsxs("div",{className:`w-1/2 text-center py-2 flex justify-center items-center cursor-pointer ${n=="disposisi"?"border-b-2 border-red-500":""}`,onClick:()=>t("disposisi"),children:["Disposisi (",z,") ",e.jsx(nt,{className:"ms-1 w-5 h-4"})]}),e.jsxs("div",{className:`w-1/2 text-center py-2 flex justify-center items-center cursor-pointer ${n=="koordinasi"?"border-b-2 border-red-500":""}`,onClick:()=>t("koordinasi"),children:["Koordinasi (",G,") ",e.jsx(nt,{className:"ms-1 w-5 h-4"})]}),e.jsxs("div",{className:`w-1/2 text-center py-2 flex justify-center items-center cursor-pointer ${n=="arahan"?"border-b-2 border-red-500":""}`,onClick:()=>t("arahan"),children:["Arahan (",y,") ",e.jsx(nt,{className:"ms-1 w-5 h-4"})]})]})}),e.jsx(e.Fragment,{children:n=="disposisi"?e.jsx(_f,{dataTable:K,loading:L,setRefreshDetail:l,lazyState:M,setLazyState:H}):n=="koordinasi"?e.jsx(aj,{dataTable:V,loading:O,setRefreshDetail:l,lazyState:_,setLazyState:C}):n=="arahan"?e.jsx(sj,{dataTable:k,loading:F,setRefreshDetail:l,lazyState:S,setLazyState:f}):e.jsx(yf,{dataTable:R,loading:J,setRefreshDetail:l,lazyState:h,setLazyState:d})})]})},tj=()=>{var E,J,P,h;const r="Log Naskah Masuk",[s,n]=a.useState(!1),t=new Nr,[i,l]=a.useState(!1),m=new qa,p=ga(),B=ha(),[K,W]=a.useState(!1),[z,T]=a.useState("disposisi"),[L,$]=a.useState(!0),[M,H]=a.useState([]),[V,A]=a.useState([]),[G,X]=a.useState([]),[O,I]=a.useState(null),[_,C]=a.useState({id:((E=p.state)==null?void 0:E.id)??null}),[k,b]=a.useState(-1),[y,o]=a.useState(!0),F="";a.useEffect(()=>{const j=new URLSearchParams(p.search).get("id");if(j){const g=Js(j);C(c=>({...c,id:Number(g)}))}},[p.search]),a.useEffect(()=>{_.id&&(U.showLoading(),n(!0),f(_.id).then(()=>{U.close()}))},[_.id,k]);const x=async d=>{d&&(o(!1),await t.sending(d).then(j=>{var g,c,v;U.fire((g=j.data)!=null&&g.success?"Berhasil":"Gagal",(c=j.data)==null?void 0:c.message,(v=j.data)!=null&&v.success?"success":"warning"),j.data.success&&(l(!1),f(_.id),b(N=>N+1))}).catch(j=>{var c,v;const g=Oe(j.response.data.result);U.fire("Gagal",g??((v=(c=j.response)==null?void 0:c.data)==null?void 0:v.message),"error")}).finally(()=>o(!0)))},S=()=>{B(F+"/penerimaan-naskah-masuk/log-naskah-masuk")},f=async d=>{(d!=null||d!=null)&&await t.getDetail(d).then(j=>{I(j.data.result)})},R=async()=>{const d={page:1,rows:1e3,naskah_id:_.id,naskah:"MASUK","filters[jenis][value]":"UTAMA"};await m.select("naskah-dinas/tujuan-naskah",d,"nm").then(j=>{H(j)})},u=async()=>{const d={page:1,rows:1e3,naskah_id:_.id,naskah:"MASUK","filters[jenis][value]":"TEMBUSAN"};await m.select("naskah-dinas/tujuan-naskah",d,"nm").then(j=>{A(j)})},D=()=>{l(!i),M.length||(X(!0),R().then(()=>u()).finally(()=>X(!1)))};return e.jsxs(aa,{children:[e.jsx(la,{}),s&&e.jsxs(e.Fragment,{children:[e.jsx(ie,{pt:6,pb:3,children:e.jsxs("div",{className:"flex justify-between p-3 items-center",children:[e.jsxs(le,{variant:"h5",fontWeight:"medium",children:["Detail ",r]}),e.jsxs("div",{className:"flex justify-end ",children:[O&&((J=O.status_send)==null?void 0:J.status)!="KIRIM"&&e.jsx("div",{className:"me-3",children:e.jsxs(_e,{variant:"gradient",color:"success",onClick:D,children:[e.jsx(rt,{size:"1.5em",className:"me-2"}),"Kirim Naskah"]})}),e.jsxs(_e,{variant:"gradient",color:"secondary",onClick:S,children:[e.jsx(za,{size:"1.5em",className:"me-2"}),"Kembali"]})]})]})}),((P=O==null?void 0:O.status_send)==null?void 0:P.status)=="KIRIM"&&e.jsxs("div",{className:"flex justify-between gap-3 mb-8 p-5 items-center bg-gradient-to-r from-teal-400 to-teal-500 rounded-2xl",children:[e.jsx(Xs,{size:"5em",className:"text-white"}),e.jsxs("div",{children:[e.jsx(le,{variant:"h5",fontWeight:"medium",align:"right",color:"white",children:"Naskah ini telah dikirim"}),e.jsxs(le,{variant:"caption",fontWeight:"medium",align:"right",color:"light",children:["Pada hari ",na((h=O==null?void 0:O.status_send)==null?void 0:h.updated_at)]})]})]}),e.jsx(Sr,{data:O,category:"log",naskahId:_.id}),e.jsx(ie,{pb:3,children:e.jsxs(Me,{className:"p-5",children:[e.jsx("div",{className:"text-base flex justify-end mb-3",children:e.jsx(is,{className:"w-6 h-5 text-gray-500 cursor-pointer",onClick:()=>W(!K)})}),K&&e.jsx(vr,{naskahId:_==null?void 0:_.id,naskahNomor:O==null?void 0:O.nomor,otherTable:z,setOtherTable:T,refresh:k,setRefresh:b})]})}),e.jsx(ie,{pb:3,children:e.jsxs(Me,{className:"p-5",children:[e.jsxs("div",{className:"text-base flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex justify-start",children:[e.jsx(_r,{className:"w-6 h-5 me-3"}),e.jsx("span",{children:"Histori Naskah"})]}),e.jsx(is,{className:"w-6 h-5 text-gray-500 cursor-pointer",onClick:()=>$(!L)})]}),L&&e.jsx(Wt,{naskah_id:_.id,refresh:k})]})}),e.jsxs(Fa,{open:i,onClose:D,children:[e.jsxs("div",{children:[e.jsxs(_a,{className:"flex items-center gap-2 text-teal-600 ",children:[e.jsx(qt,{className:"w-12 h-11 me-5"}),e.jsx(le,{children:"Kirim Naskah"})]}),e.jsxs(w,{px:4,children:[e.jsxs(le,{variant:"body2",children:["Anda akan mengirim Naskah ini dengan nomor ",e.jsx("b",{children:O==null?void 0:O.nomor})," yang akan diterima oleh:"]}),e.jsxs("table",{className:"mt-4 border-none w-full",children:[e.jsx("thead",{className:"text-gray-500 border-b-2 mb-1",children:e.jsxs("tr",{children:[e.jsx("td",{className:"p-2",children:e.jsx(le,{variant:"h6",children:"Jenis Tujuan"})}),e.jsx("td",{className:"p-2",children:e.jsx(le,{variant:"h6",children:"Kepada"})})]})}),e.jsxs("tbody",{children:[G?e.jsx("tr",{className:"",children:e.jsx("td",{colSpan:2,children:e.jsx(ia,{})})}):e.jsx(e.Fragment,{}),M.map(d=>e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"p-2",children:"UTAMA"}),e.jsxs("td",{className:"p-2",children:[d.nama_pengguna," - ",d.jabatan]})]},d.id)),V.map(d=>e.jsxs("tr",{children:[e.jsx("td",{className:"p-2",children:"TEMBUSAN"}),e.jsxs("td",{className:"p-2",children:[d.nama_pengguna," - ",d.jabatan]})]},d.id))]})]})]})]}),e.jsx(ya,{children:e.jsxs(e.Fragment,{children:[e.jsx(Je,{submit:y,color:"success",text:"Ya, Kirim",onClick:()=>x(_.id)}),e.jsx(_e,{color:"error",variant:"gradient",onClick:D,children:"Tutup"})]})})]})]})]})};Z.objectOf(Z.any);const rj=()=>{const r="Naskah Masuk",s=ga(),n=new URLSearchParams(s.search).get("statusBaca"),t=new URLSearchParams(s.search).get("statusTL"),i=new URLSearchParams(s.search).get("statusBerkas"),[l,m]=a.useState(!1);a.useEffect(()=>{m(ge(r,"is_read",!0,!0))},[]);const p=JSON.parse(Le.getItem("users")),B=new js;ha();const[K,W]=a.useState(!1),[z,T]=a.useState(null),[L,$]=a.useState(null);a.useRef(null);const[M,H]=a.useState(null),[V,A]=a.useState(null),[G,X]=a.useState({start_at:"",end_at:""}),[O,I]=a.useState(!0),[_,C]=a.useState(!1),[k,b]=a.useState({total:0,from:1,to:1}),[y,o]=a.useState({berkas_id:null,naskah_id:null,jenis:""}),[F,x]=a.useState("");let S=[];z==null?S=[]:S=z.map((he,oe)=>{var je,Ne,Re,sa,Te;return{no:oe+k.from,id:he.id,tanggal:he.tanggal,nomor:he.nomor,hal:he.hal,berkas:(je=he==null?void 0:he.berkas_naskah)==null?void 0:je.berkas,nama_pengirim:he.nama_pengirim,jabatan_pengirim:he.jabatan_pengirim,instansi_pengirim:he.instansi_pengirim,organisasi_created_nama:he.organisasi_created_nama,urgensi_naskah_nama:he.urgensi_naskah_nama,tindak_lanjut:(Ne=he.tindak_lanjut)==null?void 0:Ne.filter(me=>me.user_id==(p==null?void 0:p.id)),read_status:he.read_status,berkas_id:(sa=(Re=he==null?void 0:he.berkas_naskah)==null?void 0:Re.berkas)==null?void 0:sa.id,action:e.jsxs("div",{className:"flex items-center justify-center gap-3 h-full w-full",children:[e.jsx(va,{to:`detail?id=${Ps(he==null?void 0:he.id)}`,children:e.jsx(Oa,{size:"1.5em",color:"#17c1e8",className:"cursor-pointer",title:"Lihat"})}),!((Te=he==null?void 0:he.berkas_naskah)!=null&&Te.berkas)&&(p==null?void 0:p.group_role)!==4&&e.jsx(pt,{size:"1.5em",color:"#3f51b5",onClick:()=>d(he),className:"cursor-pointer",title:"Berkas"})]})}});const[f,R]=a.useState({page:1,rows:10,sortField:"",sortOrder:null,search:"",user_id:p==null?void 0:p.id,group_role:p==null?void 0:p.group_role,organisasi_id:p==null?void 0:p.organisasi_id,public_organisasi_id:p==null?void 0:p.public_organisasi_id,filters:{tanggal:{value:""},nomor:{value:""},hal:{value:""},instansi_pengirim:{value:""},urgensi_naskah_nama:{value:""},"status_send.status":{value:""},status_berkas:{value:i||""},status_tindak:{value:t||""},status_baca:{value:n||""}}});a.useEffect(()=>{u()},[f]);const u=async()=>{W(!0),await B.getPaging(f).then(he=>{let oe=he.data.result;oe.data&&($(oe.last_page),T(oe.data),W(!1)),W(!1),b({...k,to:oe.to,from:oe.from,total:oe.total})}).catch(he=>{W(!1),b({...k,to:0,from:!1,total:0})})},D=Da((he,oe,je=null)=>{if(je){let Re=je.target;for(;Re&&Re.tagName!=="TD";)Re=Re.parentNode;if(Re&&Re.tagName==="TD"){const sa=Re.querySelector(".clear-input"),Te=Re.querySelector("input");oe?sa.classList.remove("hidden"):(sa.classList.add("hidden"),Te.value="")}}let Ne={...f};Ne.filters[he].value=oe,Ne.page=1,R(Ne)},600),E=he=>{let oe={...f};oe.page=he,R(oe),window.scrollTo({top:0,behavior:"smooth"})},J=he=>{let oe={...f};oe.rows=he,oe.page=1,R(oe)},P=he=>{let oe={...f};oe.sortField=he,f.sortField!=he?f.sortOrder==""&&(oe.sortOrder=1):f.sortOrder==1?oe.sortOrder=-1:(oe.sortOrder="",oe.sortField=""),oe.page=1,R(oe)},h=()=>{const oe=`/penerimaan-naskah-masuk/naskah-dinas-masuk/laporan?${Ce.serializeObjectToQueryString({start_at:G==null?void 0:G.start_at,end_at:G==null?void 0:G.end_at,jenis_id:(M==null?void 0:M.id)||"",sifat_id:(V==null?void 0:V.id)||""})}`;window.open(oe,"_blank","noopener,noreferrer")},d=he=>{C(!0),o(oe=>({...oe,naskah_id:he.id,jenis:"MASUK"}))},j=he=>{I(!1),B.postBerkas(he).then(oe=>{var je,Ne,Re;U.fire({icon:(je=oe.data)!=null&&je.success?"success":"warning",title:(Ne=oe.data)!=null&&Ne.success?"Berhasil":"Gagal",text:(Re=oe.data)==null?void 0:Re.message,showConfirmButton:!1,timer:1500}),oe.data.success&&(u(),g())}).catch(oe=>{var je,Ne,Re,sa;U.fire("Gagal",(Ne=(je=oe.response)==null?void 0:je.data)!=null&&Ne.result&&oe.response.data.result.length>0?oe.response.data.result[0]:(sa=(Re=oe.response)==null?void 0:Re.data)==null?void 0:sa.message,"error")}).finally(()=>I(!0))},g=()=>{C(!1)},[c,v]=a.useState(!0),[N,Q]=a.useState(!1),[re,ye]=a.useState([]),[xe,fe]=a.useState([]),Ge=()=>{Q(!1)},$e=(he,oe)=>{const{checked:je}=he.target;ye(Ne=>je?Ne.length>=10?(U.fire({icon:"warning",title:"Batas Data Cheklist 10",text:"Anda tidak bisa mencentang lebih dari 10 data.",showConfirmButton:!1,timer:1500}),Ne):[...Ne,oe]:Ne.filter(Re=>Re!==oe))},[Pe,te]=a.useState({berkas_id:null,jenis:""}),ne=he=>{fe(re),Q(!0),te(oe=>({...oe,jenis:"MASUK"}))},pe=he=>{v(!1);const je={berkas:xe.map(Ne=>({berkas_id:he.berkas_id,naskah_id:Ne,jenis:he.jenis}))};B.postBerkasCheck(je).then(Ne=>{var Re,sa,Te;U.fire({icon:(Re=Ne.data)!=null&&Re.success?"success":"warning",title:(sa=Ne.data)!=null&&sa.success?"Berhasil":"Gagal",text:(Te=Ne.data)==null?void 0:Te.message,showConfirmButton:!1,timer:1500}),Ne.data.success&&(u(),Ge(),ye([]))}).catch(Ne=>{var sa,Te;const Re=Oe(Ne.response.data.result);U.fire("Gagal",Re??((Te=(sa=Ne.response)==null?void 0:sa.data)==null?void 0:Te.message),"error")}).finally(()=>v(!0))};return e.jsxs(aa,{children:[e.jsx(la,{}),l&&e.jsx(ie,{pt:6,pb:3,children:e.jsxs(Me,{children:[e.jsxs(ie,{px:3,pt:3,lineHeight:1,children:[e.jsx(w,{container:!0,direction:"row",justifyContent:"space-between",alignItems:"center",className:"mb-5",children:e.jsx(w,{item:!0,children:e.jsxs(le,{variant:"h5",fontWeight:"medium",children:["Daftar ",r]})})}),(p==null?void 0:p.group_role)!==4&&e.jsxs("div",{className:"flex flex-col 2xl:flex-row gap-4 2xl:gap-6 mb-4 2xl:items-center 2xl:justify-between",children:[e.jsx("div",{className:"w-60 2xl:w-1/4",children:e.jsx(le,{variant:"h6",fontWeight:"medium",children:"Buat Laporan"})}),e.jsxs("div",{className:"flex flex-col lg:flex-row gap-2 items-center 2xl:justify-end 2xl:w-3/4",children:[e.jsx(Zs,{onDateSelected:(he,oe)=>{X(je=>({...je,start_at:he==null?void 0:he.toISOString(),end_at:oe==null?void 0:oe.toISOString()}))}}),e.jsx(ra,{url:"tatanaskah/jenis-naskah/select",selectedData:M,callbackChange:he=>H(he),keyValue:["id","jenis_naskah"],placeholder:"Pilih Jenis Naskah...",className:"text-sm w-full 2xl:w-fit mb-3 lg:mb-0 whitespace-nowrap",optionParam:{"select-target":"select-jenis-naskah-by-instansi",public_organisasi_id:p==null?void 0:p.public_organisasi_id},targetService:"master"}),e.jsx(ra,{url:"tatanaskah/sifat-naskah/select",selectedData:V,keyValue:["id","sifat_naskah"],callbackChange:he=>A(he),placeholder:"Pilih Sifat Naskah...",className:"text-sm w-full 2xl:w-fit mb-3 lg:mb-0 whitespace-nowrap",menuPortalTarget:null,optionParam:{"select-target":"select-sifat-naskah-by-unitkerja",public_organisasi_id:p==null?void 0:p.public_organisasi_id},isMulti:!1,targetService:"master"}),ge(r,"is_create",!1,!0)&&e.jsx("div",{item:!0,className:"w-full lg:w-fit text-right",children:e.jsxs(_e,{variant:"gradient",color:"success",size:"small",onClick:h,disabled:!G.start_at||!G.end_at,children:[e.jsx(Bs,{size:"2em",className:"pe-2"}),"Tampilkan"]})})]})]})]}),(p==null?void 0:p.group_role)!==4&&e.jsx(ie,{px:3,pt:3,lineHeight:1,children:e.jsx(w,{container:!0,justifyContent:"flex-end",alignItems:"flex-start",children:e.jsx(w,{item:!0,children:e.jsxs(_e,{variant:"gradient",color:"info",size:"small",onClick:()=>ne(),children:[e.jsx(Bs,{size:"2em",className:"pe-2"}),"Berkaskan"]})})})}),e.jsx("div",{className:"overflow-auto",children:e.jsxs("div",{className:"table p-10 min-w-full",children:[e.jsx("div",{className:"flex items-center justify-end mb-1",children:e.jsx(pa,{config:f,handleClick:J})}),e.jsxs("table",{className:"w-full text-sm text-left !text-gray-700 dark:text-gray-400 table-bordered",children:[e.jsx("thead",{className:"text-xs text-gray-500 uppercase border-b-2 mb-1",children:e.jsxs("tr",{children:[(p==null?void 0:p.group_role)!==4&&e.jsx(q,{text:"#",className:"flex justify-center"}),e.jsx(q,{text:"No",className:"flex justify-center"}),e.jsx(q,{text:"Tanggal Naskah",sortField:"tanggal",sortOrder:f.sortOrder,config:f,handleClick:()=>P("tanggal")}),e.jsx(q,{text:"Nomor Naskah",sortField:"nomor",sortOrder:f.sortOrder,config:f,handleClick:()=>P("nomor")}),e.jsx(q,{text:"Hal",sortField:"hal",sortOrder:f.sortOrder,config:f,handleClick:()=>P("hal")}),e.jsx(q,{text:"Asal Naskah"}),(p==null?void 0:p.group_role)==4&&e.jsx(q,{text:"Status Tindak Lanjut"}),e.jsx(q,{text:"Status Baca"}),(p==null?void 0:p.group_role)!==4&&e.jsx(q,{text:"Status Berkas"}),e.jsx(q,{text:"Aksi",className:"justify-center min-w-[2rem]"})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{className:"border-b border-slate-300",children:[(p==null?void 0:p.group_role)!==4&&e.jsx("td",{}),e.jsx("td",{}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"tanggal",onSearch:D,placeholder:"Tanggal Naskah",type:"input",isDate:!0})}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"nomor",onSearch:D,placeholder:"Nomor Naskah",type:"input"})}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"hal",onSearch:D,placeholder:"Hal",type:"input"})}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"instansi_pengirim",onSearch:D,placeholder:"Instansi Pengirim",type:"input"})}),(p==null?void 0:p.group_role)==4&&e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"status_tindak",onSearch:D,placeholder:"Status Tindak Lanjut",type:"select",selectOption:lt,defaultValue:lt.find(he=>he.value==t)})}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"status_baca",onSearch:D,placeholder:"Status Baca",type:"select",selectOption:Ct,defaultValue:Ct.find(he=>he.value==n)})}),(p==null?void 0:p.group_role)!==4&&e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"status_berkas",onSearch:D,placeholder:"Status Berkas",type:"select-input",selectOption:Ws,defaultValue:Ws.find(he=>he.value==i)})}),e.jsx("td",{})]}),K?e.jsx("tr",{children:e.jsx("td",{colSpan:9,children:e.jsx(ia,{})})}):e.jsx(e.Fragment,{}),S.length?S.map((he,oe)=>{var je;return e.jsxs("tr",{className:"border-b border-slate-300",children:[(p==null?void 0:p.group_role)!==4&&e.jsx("td",{className:"px-6 py-6",children:e.jsx("div",{className:"flex justify-center",children:he.berkas?"":e.jsx("input",{type:"checkbox",className:"form-checkbox h-5 w-5 text-indigo-600",checked:re.includes(he.id),onChange:Ne=>$e(Ne,he.id)})})}),e.jsx("td",{className:"px-6 py-6",children:e.jsx("div",{className:"flex justify-center",children:he.no})}),e.jsx("td",{className:" max-w-[9rem] px-6 py-6",children:e.jsx("div",{className:"flex-wrap",children:zs(he.tanggal)})}),e.jsx("td",{className:" max-w-[9rem] px-6 py-6",children:e.jsx("div",{className:"flex-wrap",children:he.nomor})}),e.jsx("td",{className:" max-w-[9rem] px-6 py-6",children:e.jsx("div",{className:"flex-wrap",children:he.hal})}),e.jsx("td",{className:" max-w-[9rem] px-6 py-6",children:e.jsxs("div",{className:"flex-wrap",children:[he.nama_pengirim," - ",he.jabatan_pengirim," -"," ",he.instansi_pengirim]})}),(p==null?void 0:p.group_role)==4&&e.jsx("td",{className:" max-w-[9rem] px-6 py-6",children:e.jsx("div",{className:"flex-wrap",children:(je=he.tindak_lanjut)!=null&&je.length?e.jsx(be,{badgeContent:"SUDAH",color:"success",container:!0}):e.jsx(be,{badgeContent:"BELUM",color:"warning",container:!0})})}),e.jsx("td",{className:" max-w-[9rem] px-6 py-6",children:he.read_status?e.jsx(be,{badgeContent:"SUDAH",color:"success",container:!0}):e.jsx(be,{badgeContent:"BELUM",color:"warning",container:!0})}),(p==null?void 0:p.group_role)!==4&&e.jsx("td",{className:" max-w-[9rem] px-6 py-6",children:e.jsx("div",{className:"flex-wrap",children:he.berkas?`${he.berkas.nomor} - ${he.berkas.nama}`:e.jsx(be,{badgeContent:"TIDAK ADA",color:"secondary",container:!0})})}),e.jsxs("td",{className:"px-1 text-right w-[2rem]",children:[" ",he.action," "]})]},oe)}):e.jsx(e.Fragment,{})]})]}),e.jsxs("nav",{className:"flex items-center justify-between p-4","aria-label":"Table navigation",children:[e.jsx("span",{className:"text-sm text-gray-400",children:k.from&&`Menampilkan ${Se(k.from)} sampai ${Se(k.to)} dari ${Se(k.total)} entri`}),e.jsx(xa,{currentPage:f.page,lastPage:L,displayCount:5,handleClick:E})]})]})})]})}),e.jsx(ua,{}),e.jsx(yr,{open:_,onClose:g,berkasForm:y,handleSimpanBerkas:j,setSearchBerkas:x,isSubmit:O}),e.jsxs(Fa,{open:N,onClose:Ge,children:[e.jsxs("div",{children:[e.jsxs(_a,{className:"flex items-center gap-2",children:[e.jsx(pt,{size:"1.5em"}),e.jsx(le,{children:" Form Pemberkasan"})]}),e.jsx(ca,{initialValues:Pe,onSubmit:pe,validateOnChange:!0,validationSchema:rl,children:e.jsx(da,{id:"formBerkasBox",className:"text-sm",children:e.jsx("div",{className:"mb-6 px-2",children:e.jsx(w,{mt:1,children:e.jsx(Na,{children:e.jsx(ce,{name:"berkas_id",children:({field:he,form:oe,meta:je})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Berkas",required:!0,error:je.error!=null}),e.jsx(ra,{url:"berkas/berkas-aktif/list",callbackChange:Ne=>{Ne?oe.setFieldValue("berkas_id",(Ne==null?void 0:Ne.id)??""):oe.resetForm()},callbackInputChange:Ne=>{x(Ne)},keyValue:["id","nama"],placeholder:"Pilih Berkas...",className:"text-base",targetService:"arsip",menuPortalTarget:null,optionParam:{organisasi_id:p==null?void 0:p.organisasi_id,public_organisasi_id:p==null?void 0:p.public_organisasi_id,group_role_id:p==null?void 0:p.group_role,"filters[status][value]":"BUKA","filters[nama][value]":F}}),e.jsx(ue,{text:je.error,error:je.error!=null})]})})})})})})})]}),e.jsx(ya,{children:e.jsxs(e.Fragment,{children:[e.jsx(Je,{submit:c,color:"success",formId:"formBerkasBox",text:"Simpan"}),e.jsx(_e,{color:"error",variant:"gradient",onClick:()=>Q(!1),children:"Batal"})]})})]})]})},nj=()=>{var c,v;const r="Naskah Masuk",[s,n]=a.useState(!1),t=JSON.parse(Le.getItem("users")),[i,l]=a.useState(null),[m,p]=a.useState(!1),B=new js,K=ga(),W=ha(),[z,T]=a.useState(!1),[L,$]=a.useState("disposisi"),[M,H]=a.useState(!1),[V,A]=a.useState(!1),[G,X]=a.useState([]),[O,I]=a.useState([]),[_,C]=a.useState([]),[k,b]=a.useState(null),[y,o]=a.useState(!1),[F,x]=a.useState(-1),[S,f]=a.useState(!0),[R,u]=a.useState({id:((c=K.state)==null?void 0:c.id)??null}),D="";a.useEffect(()=>{const Q=new URLSearchParams(K.search).get("id");if(Q){const re=Js(Q);u(ye=>({...ye,id:Number(re)}))}},[K.search]),a.useEffect(()=>{R.id&&t&&(n(!0),U.close(),Ta.loading("Mengambil data Naskah",{toastId:"load-nk"}),P(R.id).then(()=>{Ta.update("load-nk",{render:"Data naskah berhasil didapatkan",isLoading:!1,closeButton:!0,autoClose:5e3,type:"success",pauseOnFocusLoss:!1})}))},[R.id,F]);const E=async()=>{const N={naskah_masuk_id:R.id,user_id:t==null?void 0:t.id,jenis:"NASKAH MASUK SELESAI"};U.fire({title:"Perhatian",text:"Apabila Naskah Ini Ditindak Selesai Maka Naskah Ini Tidak Dapat Dilanjuti",icon:"warning",showCancelButton:!0,confirmButtonText:"Selesai",cancelButtonText:"Batal",customClass:{confirmButton:"button button-error",cancelButton:"button button-info"}}).then(async Q=>{Q.isConfirmed?(f(!1),await B.tindakLanjut(N).then(re=>{var ye,xe,fe;U.fire((ye=re.data)!=null&&ye.success?"Berhasil":"Gagal",(xe=re.data)==null?void 0:xe.message,(fe=re.data)!=null&&fe.success?"success":"warning"),re.data.success&&W(D+"/penerimaan-naskah-masuk/naskah-dinas-masuk")}).catch(re=>{var xe,fe;const ye=Oe(re.response.data.result);U.fire("Gagal",ye??((fe=(xe=re.response)==null?void 0:xe.data)==null?void 0:fe.message),"error")}).finally(()=>f(!0))):U.close()})},J=()=>{var N;(N=K.state)!=null&&N.from?W(K.state.from):W("..",{relative:"path"})},P=async N=>{if(N!=null||N!=null){const Q={baca:"BACA",tujuan_type:"UTAMA"};await B.detail(N,Q).then(re=>{var Ge,$e,Pe,te,ne;b(re);const ye=($e=(Ge=re.tindak_lanjut)==null?void 0:Ge.filter(pe=>pe.user_id==t.id))==null?void 0:$e.some(pe=>pe.jenis=="SELESAI"),fe=!(((Pe=re==null?void 0:re.berkas_naskah)==null?void 0:Pe.berkas)&&((ne=(te=re==null?void 0:re.berkas_naskah)==null?void 0:te.berkas)==null?void 0:ne.status)==="TUTUP")&&t.group_role==4&&!ye;o(fe)})}},h=N=>{var Q;N=="self"?W(D+"/pembuatan-naskah-keluar/registrasi-naskah-keluar",{state:{reference:{nomor:k==null?void 0:k.nomor,id:k==null?void 0:k.id,nomor_hal:`${k==null?void 0:k.nomor} - ${k==null?void 0:k.hal}`},naskah_masuk_id:R.id,balas:!0}}):N=="selesai"?p(!0):N!="self"&&W(D+"/penerimaan-naskah-masuk/naskah-dinas-masuk/form",{state:{mode:N,id:R.id,back:"/penerimaan-naskah-masuk/naskah-dinas-masuk/detail",file_url:k==null?void 0:k.file_url,from:(Q=K.state)==null?void 0:Q.from}})},d=()=>e.jsxs(Ls,{anchorEl:i,anchorOrigin:{vertical:"bottom",horizontal:"left"},open:!!i,onClose:()=>l(!1),sx:{mt:2,zIndex:10},children:[e.jsx(Ma,{title:"Saya Balas",onClick:()=>h("self")}),e.jsx(Ma,{title:"Disposisi",onClick:()=>h("disposisi")}),e.jsx(Ma,{title:"Koordinasi",onClick:()=>h("koordinasi")}),e.jsx(Ma,{title:"Arahan",onClick:()=>h("arahan")}),e.jsx(Ma,{title:"Selesai",onClick:()=>h("selesai")})]}),j=()=>{p(!1)},g=()=>{H(!M),V||A(!0)};return e.jsxs(aa,{children:[e.jsx(la,{}),s&&e.jsxs(e.Fragment,{children:[e.jsx(ie,{pt:6,pb:1,children:e.jsxs("div",{className:"flex justify-between p-3 items-center",children:[e.jsxs(le,{variant:"h5",fontWeight:"medium",children:["Detail ",r]}),e.jsxs("div",{className:"flex justify-end ",children:[y?e.jsx("div",{className:"me-3",children:e.jsxs(ie,{children:[e.jsxs(_e,{variant:"gradient",color:"error",onClick:N=>l(N.currentTarget),children:[e.jsx(nt,{size:"1.5em",className:"me-2"}),"Tindak Lanjut"]}),d()]})}):e.jsx(e.Fragment,{}),e.jsxs(_e,{variant:"gradient",color:"secondary",onClick:J,children:[e.jsx(za,{size:"1.5em",className:"me-2"}),"Kembali"]})]})]})}),((v=k==null?void 0:k.berkas)==null?void 0:v.status)=="TUTUP"&&e.jsxs("div",{className:"flex justify-between gap-3 mb-8 p-5 items-center bg-gradient-to-r from-teal-400 to-teal-500 rounded-2xl",children:[e.jsx(Vn,{size:"5em",className:"text-white"}),e.jsx("div",{children:e.jsxs(le,{variant:"body2",fontWeight:"medium",align:"right",color:"white",children:["Naskah ini telah diberkaskan dengan status ",e.jsx("b",{children:"DITUTUP"}),", maka Anda tidak bisa melakukan aksi ",e.jsx("b",{children:"tindak lanjut"}),"."]})})]}),e.jsx(Sr,{data:k,naskahId:R.id}),e.jsx(ie,{pb:3,children:e.jsxs(Me,{className:"p-5 cursor-pointer",children:[e.jsxs("div",{className:"text-base flex items-center justify-between my-2",onClick:()=>T(!z),children:[e.jsxs("div",{className:"flex justify-start",children:[e.jsx(en,{className:"w-6 h-5 me-3"}),e.jsx("span",{children:"Tindak Lanjut"})]}),e.jsx(is,{className:"w-6 h-5 text-gray-500 cursor-pointer"})]}),z&&k&&e.jsx(vr,{naskahId:R==null?void 0:R.id,naskahNomor:k==null?void 0:k.nomor,otherTable:L,setOtherTable:$,refresh:F,setRefresh:x})]})}),e.jsx(ie,{pb:3,children:e.jsxs(Me,{className:"p-5 cursor-pointer",children:[e.jsxs("div",{onClick:()=>g(),className:"text-base flex items-center justify-between my-2",children:[e.jsxs("div",{className:"flex justify-start",children:[e.jsx(_r,{className:"w-6 h-5 me-3"}),e.jsx("span",{children:"Histori Naskah"})]}),e.jsx(is,{className:"w-6 h-5 text-gray-500 cursor-pointer"})]}),e.jsx("div",{className:M?"inline":"hidden",children:(R==null?void 0:R.id)&&V&&e.jsx(Wt,{naskah_id:R.id,refresh:F})})]})}),e.jsx(ua,{}),e.jsxs(Fa,{open:m,onClose:j,children:[e.jsxs("div",{children:[e.jsxs(_a,{className:"flex items-center gap-2 text-teal-600 ",children:[e.jsx(qt,{className:"w-12 h-11 me-5"}),e.jsx(le,{children:"Selesaikan"})]}),e.jsx(w,{px:4,children:e.jsxs(le,{variant:"body2",children:["Anda akan menyelesaikan Naskah dengan nomor ",k==null?void 0:k.nomor]})})]}),e.jsx(ya,{children:e.jsxs(e.Fragment,{children:[e.jsx(Je,{submit:S,color:"success",text:"Ya, Selesai",onClick:()=>E()}),e.jsx(_e,{color:"error",variant:"gradient",onClick:()=>p(!1),children:"Tutup"})]})})]})]})]})},ij=()=>{var N,Q,re,ye,xe,fe,Ge;const r="Naskah Masuk",[s,n]=a.useState(!1),t=JSON.parse(Le.getItem("users")),i=new js,l=new Nr,m=new qa,p=ga(),B=ha(),[K,W]=a.useState(!1),[z,T]=a.useState([]),[L,$]=a.useState([]),[M,H]=a.useState([]),[V,A]=a.useState(!1),[G,X]=a.useState(null),[O,I]=a.useState([]),[_,C]=a.useState([]),[k,b]=a.useState([]),[y,o]=a.useState(!1),[F,x]=a.useState(""),[S,f]=a.useState(!0),R="",[u,D]=a.useState(null),E=()=>{const $e=new Date;$e.setHours(0,0,0,0);const Pe=$e.getFullYear(),te=String($e.getMonth()+1).padStart(2,"0"),ne=String($e.getDate()).padStart(2,"0"),pe=String($e.getHours()).padStart(2,"0"),he=String($e.getMinutes()).padStart(2,"0");return`${Pe}-${te}-${ne}T${pe}:${he}`},[J,P]=a.useState({formode:((N=p.state)==null?void 0:N.mode)??null,back:((Q=p.state)==null?void 0:Q.back)??null,id:((re=p.state)==null?void 0:re.id)??null,user_created:{id:t==null?void 0:t.id,nik:t==null?void 0:t.nik,nama:t==null?void 0:t.nama,jabatan_id:t==null?void 0:t.jabatan_id,organisasi_id:t==null?void 0:t.organisasi_id,public_organisasi_id:t==null?void 0:t.public_organisasi_id,desc_jabatan:t==null?void 0:t.desc_jabatan,desc_instansi:t==null?void 0:t.desc_instansi},user_id:[],jenis:(xe=(ye=p.state)==null?void 0:ye.mode)==null?void 0:xe.toUpperCase(),file_url:(fe=p.state)==null?void 0:fe.file_url,date:E(),tindak_lanjut_id:((Ge=p.state)==null?void 0:Ge.tindak_lanjut_id)??null});a.useEffect(()=>{J.formode&&J.id&&J.back&&(n(!0),A(!1),U.showLoading(),h(J.id).then(()=>{J.formode=="disposisi"&&(g(J.id),c(J.id))}),U.close())},[J.formode]);const h=async $e=>{($e!=null||$e!=null)&&await l.getDetail($e).then(async Pe=>{const te=Pe.data.result,ne=await Hs(te.file,te.file_path??"naskah-masuk",null,0,te.created_at).catch(pe=>{U.fire("Gagal","Terjadi kesalahan saat mengambil file PDF","error")});x(ne)})},d=async $e=>{f(!1),await i.disposisi(J.id,$e).then(Pe=>{var te,ne,pe;U.fire((te=Pe.data)!=null&&te.success?"Berhasil":"Gagal",(ne=Pe.data)==null?void 0:ne.message,(pe=Pe.data)!=null&&pe.success?"success":"warning"),Pe.data.success&&(J.formode=="disposisi"?B(R+"/penerimaan-naskah-masuk/log-disposisi"):J.formode=="koordinasi"?B(R+"/penerimaan-naskah-masuk/log-koordinasi"):J.formode=="arahan"&&B(R+"/penerimaan-naskah-masuk/log-arahan"))}).catch(Pe=>{var ne,pe;const te=Oe(Pe.response.data.result);U.fire("Gagal",te??((pe=(ne=Pe.response)==null?void 0:ne.data)==null?void 0:pe.message),"error")}).finally(()=>f(!0))},j=()=>{var $e;B(J.back,{state:{id:J.id,from:($e=p.state)==null?void 0:$e.from}})},g=async $e=>{const Pe={public_organisasi_id:t==null?void 0:t.public_organisasi_id,organisasi_id:t==null?void 0:t.organisasi_id,user_id:t==null?void 0:t.id,jabatan_parent_id:t==null?void 0:t.jabatan.id,sortField:"nama",sortOrder:1,rows:300,"select-target":"disposisi"};await m.select("pengguna/tujuan/tindak-lanjut",Pe).then(te=>{$(te)})},c=async $e=>{const Pe={filters:{public_organisasi_id:{value:t==null?void 0:t.public_organisasi_id},organisasi_id:{value:t==null?void 0:t.organisasi_id}},page:1,rows:1e3};await m.select("tatanaskah/instruksi/select",Pe,"master").then(te=>{H(te)})},v=$e=>{I($e)};return e.jsxs(aa,{children:[e.jsx(la,{}),s&&e.jsxs(e.Fragment,{children:[e.jsx(ie,{pt:6,pb:1,children:e.jsxs("div",{className:"flex justify-between p-3 items-center",children:[e.jsxs(le,{variant:"h5",fontWeight:"medium",children:["Form ",tt(J.formode)," ",r]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs(_e,{variant:"gradient",color:"secondary",onClick:j,children:[e.jsx(za,{size:"1.5em",className:"me-2"}),"Kembali"]})})]})}),e.jsx(ie,{pt:6,pb:3,children:e.jsx(Me,{className:"p-5",children:e.jsx(w,{mt:2,children:e.jsx("div",{className:"mb-10 lg:mb-5 border rounded-md px-3",children:e.jsxs("div",{className:"p-1 grid grid-cols-12 mb-10 gap-0 lg:gap-5 lg:mb-0 text-sm",children:[e.jsx("div",{className:"col-span-12 cursor-pointer",onClick:()=>W(!K),children:e.jsxs("div",{className:"flex justify-start items-center text-red-500",children:[e.jsx(ts,{className:"w-5 h-4 me-4"}),e.jsx("div",{className:"text-lg",children:"Lihat Dokumen"})]})}),K&&F&&e.jsx("div",{className:"col-span-12 h-[70vh]",children:e.jsx("iframe",{className:"w-full h-full",src:`${F}#toolbar=0`})})]})})})})}),e.jsx(ie,{pb:3,children:e.jsx(Me,{className:"p-5",children:e.jsx(w,{mt:2,children:e.jsx(ca,{initialValues:J,onSubmit:d,validateOnChange:!0,validationSchema:J.formode==="disposisi"?jf:kf,enableReinitialize:!0,children:e.jsxs(da,{id:"form",encType:"multipart/form-data",children:[e.jsxs("div",{className:"p-1 grid grid-cols-12 mb-10 gap-4 xl:gap-5 lg:mb-0 text-sm",children:[e.jsx("div",{className:"col-span-12 lg:col-span-6",children:e.jsxs("div",{className:"p-1 grid grid-cols-12 gap-0 xl:gap-3",children:[J.formode==="disposisi"?e.jsx("div",{className:"col-span-12 mb-5",children:e.jsx(ce,{name:"parent_id",children:({field:$e,form:Pe,meta:te})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Grup Disposisi",required:!1,error:te.error}),e.jsx(ra,{url:"pengguna/grup-disposisi",isDisabled:V,callbackChange:ne=>{var he,oe;if(D(ne),Pe.setFieldValue("parent_id",(ne==null?void 0:ne.id)??""),((he=ne==null?void 0:ne.daftar_tujuan_disposisi)==null?void 0:he.length)>0){let je=z.map(Ne=>({...Ne}));for(var pe=0;pe<ne.daftar_tujuan_disposisi.length;pe++){let Ne={id:ne.daftar_tujuan_disposisi[pe].user_id,nama_full:`${(oe=ne.daftar_tujuan_disposisi[pe])==null?void 0:oe.user_nama} - ${ne.daftar_tujuan_disposisi[pe].jabatan_nama} - ${ne.daftar_tujuan_disposisi[pe].organisasi_nama}`};(je==null?void 0:je.length)>0?je.findIndex(sa=>sa.id===Ne.id)<0&&(je.push(Ne),Pe.setFieldValue(`another_user_id[${pe}]`,Ne.id??"")):(je.push(Ne),Pe.setFieldValue(`another_user_id[${pe}]`,Ne.id??""))}T(je),Pe.setFieldValue("tujuan_lainnya",je)}else T([])},selectedData:u,keyValue:["id","nama"],placeholder:"Pilih Grup Disposisi...",className:"text-sm",menuPortalTarget:null,optionParam:{"filters[grouprole][value]":t==null?void 0:t.group_role,"filters[organisasi_id][value]":t==null?void 0:t.organisasi_id,"filters[public_organisasi_id][value]":t==null?void 0:t.public_organisasi_id}}),e.jsx(ue,{text:te.error,error:te.error})]})})}):e.jsx(e.Fragment,{}),J.formode==="disposisi"&&e.jsxs("div",{className:"col-span-12 mb-5",children:[e.jsx(de,{text:`Tujuan ${tt(J.formode)}`,required:!0}),e.jsx("div",{className:"p-1 grid grid-cols-12 gap-3 text-sm max-h-[20vh] md:max-h-[30vh] overflow-y-auto mb-3",children:L.map(($e,Pe)=>e.jsx("div",{className:"col-span-12",children:e.jsx(ce,{name:"user_id_temp",children:({field:te,form:ne,meta:pe})=>e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{...te,type:"checkbox",value:$e.id,className:"form-checkbox h-5 w-5 text-indigo-600 flex-shrink-0",onClick:he=>{var oe=_;he.target.checked?oe=[...oe,$e.id]:oe=oe.filter(je=>je!==$e.id),oe.map((je,Ne)=>ne.setFieldValue(`user_id[${Ne}]`,je)),C(oe)}}),e.jsx("label",{className:"ml-2 text-gray-700",children:$e.nama_full})]})})})},$e.id))}),e.jsx("hr",{})]}),J.formode==="disposisi"?e.jsx("div",{className:"col-span-12",children:e.jsx(ce,{name:"another_user_id",children:({field:$e,form:Pe,meta:te})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Tujuan Lainnya",required:!0,error:te.error}),e.jsx(ra,{url:"pengguna/tujuan/tindak-lanjut",isDisabled:V,callbackChange:ne=>{Pe.setFieldValue("another_user_id",[]);const pe=Array.from(ne,he=>he);pe.length>0&&pe.map((he,oe)=>{Pe.setFieldValue(`another_user_id[${oe}]`,he.id??"")}),T(pe)},selectedData:z,keyValue:["id","nama_full"],placeholder:"Pilih Tujuan Lainnya...",className:"text-sm",menuPortalTarget:null,optionParam:{public_organisasi_id:t==null?void 0:t.public_organisasi_id,organisasi_id:t==null?void 0:t.organisasi_id,"select-target":"lainnya"},isMulti:!0}),e.jsx(ue,{text:te.error,error:te.error})]})})}):e.jsx("div",{className:"col-span-12",children:e.jsx(ce,{name:"user_id",children:({field:$e,form:Pe,meta:te})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:`Tujuan ${tt(J.formode)}`,required:!0,error:te.error}),e.jsx(ra,{url:"pengguna/tujuan/tindak-lanjut",isDisabled:V,callbackChange:ne=>{Pe.setFieldValue("user_id",[]);const pe=Array.from(ne,he=>he);pe.length>0&&pe.map((he,oe)=>{Pe.setFieldValue(`user_id[${oe}]`,he.id??"")}),T(pe)},selectedData:z,keyValue:["id","nama_full"],placeholder:`Pilih Tujuan ${tt(J.formode)} ...`,className:"text-sm",menuPortalTarget:null,optionParam:{public_organisasi_id:t==null?void 0:t.public_organisasi_id,organisasi_id:t==null?void 0:t.organisasi_id,"select-target":J.formode},isMulti:!0}),e.jsx(ue,{text:te.error,error:te.error})]})})})]})}),e.jsx("div",{className:"col-span-12 lg:col-span-6",children:e.jsxs("div",{className:"p-1 grid grid-cols-12 mb-10 gap-0 xl:gap-3",children:[J.formode==="disposisi"?e.jsxs("div",{className:"col-span-12 mb-5",children:[e.jsx(de,{text:`Instruksi ${tt(J.formode)}`,required:!0}),e.jsx(ce,{name:"instruksi_disposisi",children:({field:$e,form:Pe,meta:te})=>e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"p-1 grid grid-cols-12 gap-3 text-sm mb-6",children:M.map((ne,pe)=>e.jsx("div",{className:"col-span-12",children:e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{...$e,type:"checkbox",value:ne.id,className:"form-checkbox h-5 w-5 text-indigo-600",onClick:he=>{var oe=k;he.target.checked?oe=[...oe,ne.id]:oe=oe.filter(je=>je!==ne.id),Pe.setFieldValue("instruksi_disposisi",oe),b(oe)}}),e.jsx("label",{className:"ml-2 text-gray-700",children:ne.keterangan})]})})},ne.id))}),e.jsx(ue,{text:te.error,error:te.error})]})}),e.jsx("hr",{})]}):e.jsx(e.Fragment,{}),e.jsx("div",{className:"col-span-12 mb-5",children:e.jsx(ce,{name:"catatan",children:({field:$e,form:Pe,meta:te})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:J.formode=="disposisi"?"Instruksi Tambahan":`Pesan ${tt(J.formode)}`,error:te.error}),e.jsx(Ka,{...$e,placeHolder:J.formode=="disposisi"?"Masukkan Instruksi Tambahan...":`Masukkan Pesan ${tt(J.formode)}... (optional)`,error:te.error,disabled:V}),J.formode=="disposisi"&&e.jsxs("p",{className:"text-gray-400 text-xs mt-2",children:["Diisi apabila dari pilihan ",e.jsx("b",{children:"Instruksi Disposisi"})," di atas belum mencakup detail instruksi yang diinginkan"]}),e.jsx(ue,{text:te.error,error:te.error})]})})}),e.jsx("div",{className:"col-span-12 mb-5",children:e.jsx(ce,{name:"date",children:({field:$e,form:Pe,meta:te})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Batas Waktu",error:te.error}),e.jsx("input",{...$e,className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring focus:border-blue-500",type:"datetime-local",id:"date-input"}),e.jsx(ue,{text:te.error,error:te.error})]})})})]})}),e.jsx("div",{className:"col-span-12",children:e.jsx(w,{mb:2,children:e.jsx(ce,{name:"lampirans",children:({field:$e,form:Pe,meta:te})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Lampiran",error:te.error}),e.jsx(at,{onFileSelected:ne=>{v(ne),Pe.setFieldValue("lampirans",ne)},isReset:y,maxSizePerFileInMb:5,descBox:"Untuk menambahkan File, seret dan lepas file tersebut ke sini, atau klik untuk memilih file."}),e.jsx(ue,{text:te.error,error:te.error})]})})})})]}),e.jsx("div",{className:"p-3 flex justify-end items-center w-full gap-5 mb-10",children:!V&&e.jsx(Je,{submit:S,color:"success",formId:"form",text:"Simpan"})})]})})})})})]})]})},lj=()=>{const r="Daftar Tembusan",s=new URLSearchParams(location.search).get("statusBaca"),n=new URLSearchParams(location.search).get("statusTL"),[t,i]=a.useState(!1);a.useEffect(()=>{i(ge(r,"is_read",!0,!0))},[]);const l=JSON.parse(Le.getItem("users")),m=new js;ha();const[p,B]=a.useState(!1),[K,W]=a.useState(null),[z,T]=a.useState(null);a.useRef(null);const[L,$]=a.useState(null),[M,H]=a.useState(null),[V,A]=a.useState(!0),[G,X]=a.useState(!1),[O,I]=a.useState({total:0,from:1,to:1}),[_,C]=a.useState({berkas_id:null,naskah_id:null,jenis:""}),[k,b]=a.useState("");let y=[];K==null?y=[]:y=K.map((h,d)=>{var j,g,c;return{no:d+O.from,id:h.id,tanggal:h.tanggal,nomor:h.nomor,hal:h.hal,nama_pengirim:h.nama_pengirim,jabatan_pengirim:h.jabatan_pengirim,instansi_pengirim:h.instansi_pengirim,organisasi_created_nama:h.organisasi_created_nama,urgensi_naskah_nama:h.urgensi_naskah_nama,tindak_lanjut:(j=h.tindak_lanjut)==null?void 0:j.filter(v=>v.user_id==(l==null?void 0:l.id)),read_status:h.read_status,berkas:(g=h==null?void 0:h.berkas_naskah)==null?void 0:g.berkas,action:e.jsxs("div",{className:"flex items-center justify-center gap-3 h-full w-full",children:[e.jsx(va,{to:`detail?id=${Ps(h==null?void 0:h.id)}`,children:e.jsx(Oa,{size:"1.5em",color:"#17c1e8",className:"cursor-pointer",title:"Lihat"})}),!((c=h==null?void 0:h.berkas_naskah)!=null&&c.berkas)&&(l==null?void 0:l.group_role)!==4&&e.jsx(pt,{size:"1.5em",color:"#3f51b5",onClick:()=>D(h),className:"cursor-pointer",title:"Berkas"})]})}});const[o,F]=a.useState({page:1,rows:10,sortField:"",sortOrder:null,search:"",user_id:l==null?void 0:l.id,group_role:l==null?void 0:l.group_role,organisasi_id:l==null?void 0:l.organisasi_id,filters:{tanggal:{value:""},nomor:{value:""},hal:{value:""},instansi_pengirim:{value:""},urgensi_naskah_nama:{value:""},"status_send.status":{value:""},status_tindak:{value:n||""},status_baca:{value:s||""}}});a.useEffect(()=>{x()},[o]);const x=async()=>{B(!0),await m.tembusanList(o).then(h=>{let d=h.data.result;d.data&&(T(d.last_page),W(d.data),B(!1)),B(!1),I({...O,to:d.to,from:d.from,total:d.total})}).catch(h=>{B(!1),I({...O,to:0,from:!1,total:0})})},S=Da((h,d,j=null)=>{if(j){let c=j.target;for(;c&&c.tagName!=="TD";)c=c.parentNode;if(c&&c.tagName==="TD"){const v=c.querySelector(".clear-input"),N=c.querySelector("input");d?v.classList.remove("hidden"):(v.classList.add("hidden"),N.value="")}}let g={...o};g.filters[h].value=d,g.page=1,F(g)},600),f=h=>{let d={...o};d.page=h,F(d),window.scrollTo({top:0,behavior:"smooth"})},R=h=>{let d={...o};d.rows=h,d.page=1,F(d)},u=h=>{let d={...o};d.sortField=h,o.sortField!=h?o.sortOrder==""&&(d.sortOrder=1):o.sortOrder==1?d.sortOrder=-1:(d.sortOrder="",d.sortField=""),d.page=1,F(d)},D=h=>{X(!0),C(d=>({...d,naskah_id:h.id,jenis:"MASUK"}))},E=h=>{A(!1),m.postBerkas(h).then(d=>{var j,g,c;U.fire({icon:(j=d.data)!=null&&j.success?"success":"warning",title:(g=d.data)!=null&&g.success?"Berhasil":"Gagal",text:(c=d.data)==null?void 0:c.message,showConfirmButton:!1,timer:1500}),d.data.success&&(x(),P())}).catch(d=>{var j,g,c,v;U.fire("Gagal",(g=(j=d.response)==null?void 0:j.data)!=null&&g.result&&d.response.data.result.length>0?d.response.data.result[0]:(v=(c=d.response)==null?void 0:c.data)==null?void 0:v.message,"error")}).finally(()=>A(!0))},J=[{value:"BELUM",label:e.jsx("div",{children:e.jsx(be,{badgeContent:"BELUM",color:"secondary",container:!0})})},{value:"SUDAH",label:e.jsx("div",{children:e.jsx(be,{badgeContent:"SUDAH",color:"success",container:!0})})}],P=()=>{X(!1)};return e.jsxs(aa,{children:[e.jsx(la,{}),t&&e.jsx(ie,{pt:6,pb:3,children:e.jsxs(Me,{children:[e.jsxs(ie,{px:3,pt:3,lineHeight:1,children:[e.jsx(w,{container:!0,direction:"row",justifyContent:"space-between",alignItems:"center",className:"mb-5",children:e.jsx(w,{item:!0,children:e.jsx(le,{variant:"h5",fontWeight:"medium",children:"Daftar Naskah Tembusan"})})}),e.jsx("div",{className:"hidden",children:e.jsxs(w,{container:!0,direction:"row",justifyContent:{md:"end",xs:"center"},alignItems:"center",columnSpacing:2,children:[e.jsx(w,{item:!0,className:"w-full md:w-auto",children:e.jsx("input",{type:"date",className:"border rounded-lg p-2 px-4 focus:outline-none focus:ring focus:border-blue-300 text-sm w-full md:w-auto mb-3 lg:mb-0"})}),e.jsx(w,{item:!0,className:"w-full md:w-auto",children:e.jsx(ra,{url:"organisasi/jenis-organisasi/select",selectedData:L,callbackChange:h=>S("jenis_naskah",h==null?void 0:h.value),keyValue:["id","nama"],placeholder:"Cari Jenis Naskah...",className:"text-sm w-full md:w-auto mb-3 lg:mb-0"})}),e.jsx(w,{item:!0,className:"w-full md:w-auto",children:e.jsx(ra,{url:"tatanaskah/sifat-naskah/select",selectedData:M,keyValue:["id","sifat_naskah"],callbackChange:h=>S("sifat_naskah",h==null?void 0:h.value),placeholder:"Pilih Sifat Naskah...",className:"text-sm w-full md:w-auto mb-3 lg:mb-0",menuPortalTarget:null,optionParam:{"select-target":"select-sifat-naskah-by-unitkerja",role:l==null?void 0:l.role,unitkerja:l==null?void 0:l.organisasi_id},isMulti:!1,targetService:"master"})}),ge(r,"is_create",!1,!0)&&e.jsx(w,{item:!0,children:e.jsx("div",{className:"mb-3 lg:mb-0",children:e.jsxs(_e,{variant:"gradient",color:"success",size:"small",children:[e.jsx(Bs,{size:"2em",className:"pe-2"}),"Tampilkan"]})})})]})})]}),e.jsx("div",{className:"overflow-auto",children:e.jsxs("div",{className:"table p-10 min-w-full",children:[e.jsx("div",{className:"flex items-center justify-end mb-1",children:e.jsx(pa,{config:o,handleClick:R})}),e.jsxs("table",{className:"w-full text-sm text-left !text-gray-700 dark:text-gray-400 table-bordered",children:[e.jsx("thead",{className:"text-xs text-gray-500 uppercase border-b-2 mb-1",children:e.jsxs("tr",{children:[e.jsx(q,{text:"No",className:"flex justify-center"}),e.jsx(q,{text:"Tanggal Naskah",sortField:"tanggal",sortOrder:o.sortOrder,config:o,handleClick:()=>u("tanggal")}),e.jsx(q,{text:"Nomor Naskah",sortField:"nomor",sortOrder:o.sortOrder,config:o,handleClick:()=>u("nomor")}),e.jsx(q,{text:"Hal",sortField:"hal",sortOrder:o.sortOrder,config:o,handleClick:()=>u("hal")}),e.jsx(q,{text:"Asal Naskah",sortField:"instansi_pengirim",sortOrder:o.sortOrder,config:o,handleClick:()=>u("instansi_pengirim")}),(l==null?void 0:l.group_role)==4&&e.jsx(q,{text:"Status Tindak Lanjut",sortField:"status_tindak",sortOrder:o.sortOrder,config:o,handleClick:()=>u("status_tindak")}),e.jsx(q,{text:"Status Baca"}),(l==null?void 0:l.group_role)!==4&&e.jsx(q,{text:"Status Berkas",sortField:"status_berkas",sortOrder:o.sortOrder,config:o,handleClick:()=>u("status_berkas")}),e.jsx(q,{text:"Aksi",className:"justify-center min-w-[2rem]"})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{className:"border-b border-slate-300",children:[e.jsx("td",{}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"tanggal",onSearch:S,placeholder:"Tanggal Naskah",type:"input",isDate:!0})}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"nomor",onSearch:S,placeholder:"Nomor Naskah",type:"input"})}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"hal",onSearch:S,placeholder:"Hal",type:"input"})}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"instansi_pengirim",onSearch:S,placeholder:"Instansi Pengirim",type:"input"})}),(l==null?void 0:l.group_role)==4&&e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"status_tindak",onSearch:S,placeholder:"Status Tindak Lanjut",type:"select",selectOption:lt,defaultValue:lt.find(h=>h.value==n)})}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"status_baca",onSearch:S,placeholder:"Status Baca",type:"select",selectOption:J,defaultValue:J.find(h=>h.value==s)})}),(l==null?void 0:l.group_role)!==4&&e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"status_berkas",onSearch:S,placeholder:"Status Berkas",type:"select-input",selectOption:Ws})}),e.jsx("td",{})]}),p?e.jsx("tr",{children:e.jsx("td",{colSpan:7,children:e.jsx(ia,{})})}):e.jsx(e.Fragment,{}),y.length?y.map((h,d)=>{var j;return e.jsxs("tr",{className:"border-b border-slate-300",children:[e.jsx("td",{className:"px-6 py-6 text-center",children:h.no}),e.jsx("td",{className:" max-w-[9rem] px-6 py-6",children:e.jsx("div",{className:"flex-wrap",children:zs(h.tanggal)})}),e.jsx("td",{className:" max-w-[9rem] px-6 py-6",children:e.jsx("div",{className:"flex-wrap",children:h.nomor})}),e.jsx("td",{className:" max-w-[9rem] px-6 py-6",children:e.jsx("div",{className:"flex-wrap",children:h.hal})}),e.jsx("td",{className:" max-w-[9rem] px-6 py-6",children:e.jsxs("div",{className:"flex-wrap",children:[h.nama_pengirim," - ",h.jabatan_pengirim," -"," ",h.instansi_pengirim]})}),(l==null?void 0:l.group_role)==4&&e.jsx("td",{className:" max-w-[9rem] px-6 py-6",children:e.jsx("div",{className:"flex-wrap",children:(j=h.tindak_lanjut)!=null&&j.length?e.jsx(be,{badgeContent:"SUDAH",color:"success",container:!0}):e.jsx(be,{badgeContent:"BELUM",color:"warning",container:!0})})}),e.jsx("td",{className:" max-w-[9rem] px-6 py-6",children:h.read_status?e.jsx(be,{badgeContent:"SUDAH BACA",color:"success",container:!0}):e.jsx(be,{badgeContent:"BELUM BACA",color:"secondary",container:!0})}),(l==null?void 0:l.group_role)!==4&&e.jsx("td",{className:" max-w-[9rem] px-6 py-6",children:e.jsx("div",{className:"flex-wrap",children:h.berkas?`${h.berkas.nomor} - ${h.berkas.nama}`:e.jsx(be,{badgeContent:"TIDAK ADA",color:"secondary",container:!0})})}),e.jsxs("td",{className:"px-1 text-right w-[2rem]",children:[" ",h.action," "]})]},d)}):e.jsx(e.Fragment,{})]})]}),e.jsxs("nav",{className:"flex items-center justify-between p-4","aria-label":"Table navigation",children:[e.jsx("span",{className:"text-sm text-gray-400",children:O.from&&`Menampilkan ${Se(O.from)} sampai ${Se(O.to)} dari ${Se(O.total)} entri`}),e.jsx(xa,{currentPage:o.page,lastPage:z,displayCount:5,handleClick:f})]})]})})]})}),e.jsx(ua,{}),e.jsx(yr,{open:G,onClose:P,berkasForm:_,handleSimpanBerkas:E,setSearchBerkas:b,isSubmit:V})]})},oj=()=>{var g;const[r,s]=a.useState(!1),n=JSON.parse(Le.getItem("users")),[t,i]=a.useState(null),[l,m]=a.useState(!1),p=new js,B=new qa,K=ga(),W=ha(),[z,T]=a.useState(!1),[L,$]=a.useState("disposisi"),[M,H]=a.useState(!1),[V,A]=a.useState(!1),[G,X]=a.useState([]),[O,I]=a.useState([]),[_,C]=a.useState(null),[k,b]=a.useState(!1),[y,o]=a.useState(-1),[F,x]=a.useState(!0),[S,f]=a.useState({id:((g=K.state)==null?void 0:g.id)??null}),R="";a.useEffect(()=>{const v=new URLSearchParams(K.search).get("id");if(v){const N=Js(v);f(Q=>({...Q,id:Number(N)}))}},[K.search]),a.useEffect(()=>{S.id&&n&&(s(!0),Ta.loading("Mengambil data Naskah",{toastId:"load-nk"}),E(S.id).then(()=>{J(),Ta.update("load-nk",{render:"Data naskah berhasil didapatkan",isLoading:!1,closeButton:!0,autoClose:5e3,type:"success",pauseOnFocusLoss:!1})}))},[S.id,y]);const u=async()=>{const c={naskah_masuk_id:S.id,user_id:n==null?void 0:n.id,jenis:"NASKAH TEMBUSAN SELESAI"};U.fire({title:"Perhatian",text:"Apabila Naskah Ini Ditindak Selesai Maka Naskah Ini Tidak Dapat Dilanjuti",icon:"warning",showCancelButton:!0,confirmButtonText:"Selesai",cancelButtonText:"Batal",customClass:{confirmButton:"button button-error",cancelButton:"button button-info"}}).then(async v=>{v.isConfirmed?(x(!1),await p.tindakLanjut(c).then(N=>{var Q,re,ye;U.fire((Q=N.data)!=null&&Q.success?"Berhasil":"Gagal",(re=N.data)==null?void 0:re.message,(ye=N.data)!=null&&ye.success?"success":"warning"),N.data.success&&W(R+"/penerimaan-naskah-masuk/naskah-dinas-masuk")}).catch(N=>{var re,ye;const Q=Oe(N.response.data.result);U.fire("Gagal",Q??((ye=(re=N.response)==null?void 0:re.data)==null?void 0:ye.message),"error")}).finally(()=>x(!0))):U.close()})},D=()=>{W(R+"/penerimaan-naskah-masuk/naskah-tembusan")},E=async c=>{if(c!=null||c!=null){const v={baca:"BACA",tujuan_type:"TEMBUSAN"};await p.detail(c,v).then(N=>{C(N),X(N.tindak_lanjut.filter(Q=>Q.user_id==n.id))})}},J=async()=>{const c={page:1,rows:1e3,naskah_id:S.id,naskah:"MASUK","filters[jenis][value]":"TEMBUSAN"};await B.select("naskah-dinas/tujuan-naskah",c,"nm").then(v=>{I(v)})},P=c=>{c=="self"?W(R+"/pembuatan-naskah-keluar/registrasi-naskah-keluar",{state:{reference:{nomor:_==null?void 0:_.nomor,id:_==null?void 0:_.id,nomor_hal:`${_==null?void 0:_.nomor} - ${_==null?void 0:_.hal}`},naskah_masuk_id:S.id,balas:!0}}):c=="selesai"?m(!0):c!="self"&&W(R+"/penerimaan-naskah-masuk/naskah-dinas-masuk/form",{state:{mode:c,id:S.id,back:"/penerimaan-naskah-masuk/naskah-dinas-masuk/detail"}})},h=()=>e.jsxs(Ls,{anchorEl:t,anchorOrigin:{vertical:"bottom",horizontal:"left"},open:!!t,onClose:()=>i(!1),sx:{mt:2,zIndex:10},children:[e.jsx(Ma,{title:"Saya Balas",onClick:()=>P("self")}),e.jsx(Ma,{title:"Disposisi",onClick:()=>P("disposisi")}),e.jsx(Ma,{title:"Koordinasi",onClick:()=>P("koordinasi")}),e.jsx(Ma,{title:"Arahan",onClick:()=>P("arahan")}),e.jsx(Ma,{title:"Selesai",onClick:()=>P("selesai")})]}),d=()=>{m(!1)},j=()=>{H(!M),V||A(!0)};return a.useEffect(()=>{const c=O.filter(v=>v.to_user_id===(n==null?void 0:n.id));if(c&&c.length)if(G[0]){const v=G[0];if(v.jenis=="DISPOSISI"||v.jenis=="KOORDINASI"||v.jenis=="BALAS")b(!0);else if(v.jenis=="ARAHAN"){const N=v.disposisi.filter(Q=>Q.status=="SELESAI");b(!!N)}}else b(!0);else{const v=G.map(N=>N.disposisi.filter(Q=>Q.user_id=n==null?void 0:n.id));v&&v.length?b(!0):b(!1)}},[O]),e.jsxs(aa,{children:[e.jsx(la,{}),r&&e.jsxs(e.Fragment,{children:[e.jsx(ie,{pt:6,pb:1,children:e.jsxs("div",{className:"flex justify-between p-3 items-center",children:[e.jsx(le,{variant:"h5",fontWeight:"medium",children:"Detail Naskah Tembusan"}),e.jsxs("div",{className:"flex justify-end ",children:[k&&e.jsx("div",{className:"me-3",children:e.jsxs(ie,{children:[e.jsxs(_e,{variant:"gradient",color:"error",onClick:c=>i(c.currentTarget),children:[e.jsx(nt,{size:"1.5em",className:"me-2"}),"Tindak Lanjut"]}),h()]})}),e.jsxs(_e,{variant:"gradient",color:"secondary",onClick:D,children:[e.jsx(za,{size:"1.5em",className:"me-2"}),"Kembali"]})]})]})}),e.jsx(Sr,{data:_,naskahId:S.id}),e.jsx(ie,{pb:3,children:e.jsxs(Me,{className:"p-5 cursor-pointer",children:[e.jsxs("div",{onClick:()=>T(!z),className:"text-base flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex justify-start",children:[e.jsx(en,{className:"w-6 h-5 me-3"}),e.jsx("span",{children:"Tindak Lanjut"})]}),e.jsx(is,{className:"w-6 h-5 text-gray-500 cursor-pointer"})]}),z&&e.jsx(vr,{naskahId:S==null?void 0:S.id,naskahNomor:_==null?void 0:_.nomor,otherTable:L,setOtherTable:$,refresh:y,setRefresh:o})]})}),e.jsx(ie,{pb:3,children:e.jsxs(Me,{className:"p-5 cursor-pointer",children:[e.jsxs("div",{onClick:()=>j(),className:"text-base flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex justify-start",children:[e.jsx(_r,{className:"w-6 h-5 me-3"}),e.jsx("span",{children:"Histori Naskah"})]}),e.jsx(is,{className:"w-6 h-5 text-gray-500 cursor-pointer"})]}),e.jsx("div",{className:M?"inline":"hidden",children:(S==null?void 0:S.id)&&V&&e.jsx(Wt,{naskah_id:S.id,refresh:y})})]})}),e.jsx(ua,{}),e.jsxs(Fa,{open:l,onClose:d,children:[e.jsxs("div",{children:[e.jsxs(_a,{className:"flex items-center gap-2 text-teal-600 ",children:[e.jsx(qt,{className:"w-12 h-11 me-5"}),e.jsx(le,{children:"Selesaikan"})]}),e.jsx(w,{px:4,children:e.jsxs(le,{variant:"body2",children:["Anda akan menyelesaikan Naskah dengan nomor ",_==null?void 0:_.nomor]})})]}),e.jsx(ya,{children:e.jsxs(e.Fragment,{children:[e.jsx(Je,{submit:F,color:"success",text:"Ya, Selesai",onClick:()=>u()}),e.jsx(_e,{color:"error",variant:"gradient",onClick:()=>m(!1),children:"Tutup"})]})})]})]})]})},cj=()=>{const r="Naskah Masuk",s=ga(),n=new URLSearchParams(s.search).get("start_at"),t=new URLSearchParams(s.search).get("end_at"),i=new URLSearchParams(s.search).get("jenis_id"),l=new URLSearchParams(s.search).get("sifat_id"),[m,p]=a.useState(!1);a.useEffect(()=>{p(ge(r,"is_read",!0,!0)),b(i),y(l)},[]);const B=new js,K=new qa,[W,z]=a.useState(!1),[T,L]=a.useState(null),[$,M]=a.useState(null),[H,V]=a.useState(null),[A,G]=a.useState(!1),[X,O]=a.useState(!1);let I=[];T==null?I=[]:I=T.map((x,S)=>({no:S+1,tanggal:x.tanggal,nomor:x.nomor,hal:x.hal,nama_pengirim:x.nama_pengirim,jabatan_pengirim:x.jabatan_pengirim,instansi_pengirim:x.instansi_pengirim,organisasi_created_nama:x.organisasi_created_nama,urgensi_naskah_nama:x.urgensi_naskah_nama}));const[_,C]=a.useState({start_at:n,end_at:t,jenis_id:i,sifat_id:l});a.useEffect(()=>{k()},[_]);const k=async()=>{z(!0),await B.getLaporan(_).then(x=>{let S=x.data.result;S&&(L(S),z(!1)),z(!1)}).catch(x=>{z(!1)})},b=async x=>{x&&await K.detail("tatanaskah/jenis-naskah",x,"master").then(S=>{M(S)})},y=async x=>{x&&await K.detail("tatanaskah/sifat-naskah",x,"master").then(S=>{V(S)})},o=async()=>{G(!0),await B.downloadLaporanPdf(_).then(x=>{const S=`Laporan Naskah Masuk_${($==null?void 0:$.jenis_naskah)||"Semua Jenis"}_${(H==null?void 0:H.sifat_naskah)||"Semua Sifat"}_${oa(_==null?void 0:_.start_at).format("YYYY-MM-DD")}-${oa(_==null?void 0:_.end_at).format("YYYY-MM-DD")}.pdf`;es(x.data,S)}).catch(x=>{console.log({error:x})}).finally(()=>G(!1))},F=async()=>{O(!0),await B.downloadLaporanExcel(_).then(x=>{const S=`Laporan Naskah Masuk_${($==null?void 0:$.jenis_naskah)||"Semua Jenis"}_${(H==null?void 0:H.sifat_naskah)||"Semua Sifat"}_${oa(_==null?void 0:_.start_at).format("YYYY-MM-DD")}-${oa(_==null?void 0:_.end_at).format("YYYY-MM-DD")}.xls`;es(x.data,S)}).catch(x=>{console.log({error:x})}).finally(()=>O(!1))};return e.jsx(e.Fragment,{children:e.jsxs(aa,{children:[m&&e.jsx(ie,{pt:6,pb:3,children:e.jsxs(Me,{children:[e.jsxs("div",{className:"flex gap-2 m-4",children:[e.jsx(Je,{color:"error",text:e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx(ts,{size:"2em",className:"pe-2"}),"PDF"]}),submit:!A,onClick:o,size:"small",className:"text-sm whitespace-nowrap"}),e.jsx(Je,{color:"success",text:e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx($s,{size:"2em",className:"pe-2"}),"Excel"]}),submit:!X,onClick:F,size:"small",className:"text-sm whitespace-nowrap"})]}),e.jsxs(ie,{px:3,pt:3,lineHeight:1,className:"flex flex-col items-center justify-center",children:[e.jsx("div",{className:"mb-3 text-center",children:e.jsxs(le,{variant:"h3",fontWeight:"medium",children:["Daftar ",r]})}),e.jsxs(le,{variant:"h5",fontWeight:"medium",children:[na(n,2)," - ",na(t,2)]}),e.jsxs(le,{variant:"h6",fontWeight:"medium",children:["Jenis: ",($==null?void 0:$.jenis_naskah)||"Semua"]}),e.jsxs(le,{variant:"h6",fontWeight:"medium",children:["Sifat: ",(H==null?void 0:H.sifat_naskah)||"Semua"]})]}),e.jsx("div",{className:"overflow-auto",children:e.jsxs("div",{className:"table p-10 min-w-full",children:[e.jsxs("table",{className:"w-full text-sm text-left !text-gray-700 dark:text-gray-400 table-bordered",children:[e.jsx("thead",{className:"text-xs text-gray-500 uppercase border-b-2 mb-1",children:e.jsxs("tr",{children:[e.jsx(q,{text:"No",className:"flex justify-center"}),e.jsx(q,{text:"Tanggal Naskah"}),e.jsx(q,{text:"Nomor Naskah"}),e.jsx(q,{text:"Hal"}),e.jsx(q,{text:"Asal Naskah"})]})}),e.jsxs("tbody",{children:[W?e.jsx("tr",{children:e.jsx("td",{colSpan:9,children:e.jsx(ia,{})})}):e.jsx(e.Fragment,{}),I.length?I.map((x,S)=>e.jsxs("tr",{className:"border-b border-slate-300",children:[e.jsx("td",{className:"px-6 py-6 text-center",children:x.no}),e.jsx("td",{className:" max-w-[9rem] px-6 py-6",children:e.jsx("div",{className:"flex-wrap",children:zs(x.tanggal)})}),e.jsx("td",{className:" max-w-[9rem] px-6 py-6",children:e.jsx("div",{className:"flex-wrap",children:x.nomor})}),e.jsx("td",{className:" max-w-[9rem] px-6 py-6",children:e.jsx("div",{className:"flex-wrap",children:x.hal})}),e.jsx("td",{className:" max-w-[9rem] px-6 py-6",children:e.jsxs("div",{className:"flex-wrap",children:[x.nama_pengirim," - ",x.jabatan_pengirim," -"," ",x.instansi_pengirim]})})]},S)):e.jsx(e.Fragment,{})]})]}),e.jsx("nav",{className:"flex items-center justify-between p-4","aria-label":"Table navigation",children:e.jsxs("span",{className:"text-sm text-gray-400",children:["Menampilkan ",T==null?void 0:T.length," entri"]})})]})})]})}),e.jsx(ua,{})]})})},wi="https://api.arsip.go.id/naskah-masuk/api/";class Pr{constructor(){ae(this,"getPaging",async s=>{const n=Ce.serializeObjectToQueryString(s);return await se.get(`${wi}naskah-dinas/disposisi/list?${n}`).then(l=>l)});ae(this,"detail",async s=>await se.get(`${wi}naskah-dinas/disposisi/${s}/show`).then(i=>i.data.result));ae(this,"postPenyelesaian",async s=>await se.post(`${wi}naskah-dinas/penyelesaian`,s,{headers:{"Content-Type":"multipart/form-data"}}).then(i=>i))}}const dj=()=>{const r="Disposisi",s=ga(),n=new URLSearchParams(s.search).get("statusBaca"),t=new URLSearchParams(s.search).get("statusTL"),[i,l]=a.useState(!1);a.useEffect(()=>{l(ge(r,"is_read",!0,!0))},[]);const m=JSON.parse(Le.getItem("users")),p=new Pr,B=new js;ha();const[K,W]=a.useState(!1),[z,T]=a.useState(null),[L,$]=a.useState(null),[M,H]=a.useState(!1),[V,A]=a.useState(!0),[G,X]=a.useState({total:0,from:1,to:1}),[O,I]=a.useState({berkas_id:null,naskah_id:null,jenis:""}),[_,C]=a.useState("");let k=[];z==null?k=[]:k=z.map((u,D)=>{var h,d,j,g,c,v,N,Q,re,ye,xe,fe,Ge,$e,Pe,te,ne,pe,he,oe,je;const E=((h=u.tindak_lanjut.naskah_masuk.tindak_lanjut)==null?void 0:h.some(Ne=>Ne.user_id==m.id))||u.status==="SUDAH SELESAI",J={disposisi_id:u.id,tindak_lanjut_id:u==null?void 0:u.tindak_lanjut_id,status:u.status},P=Ce.serializeObjectToQueryString(J);return{no:D+G.from,id:u.id,berkas:(j=(d=u.tindak_lanjut.naskah_masuk)==null?void 0:d.berkas_naskah)==null?void 0:j.berkas,tanggal_disposisi:e.jsxs("div",{className:"flex-wrap",children:[e.jsxs("p",{children:["Tanggal disposisi: ",na((g=u.tindak_lanjut)==null?void 0:g.created_at)]}),e.jsxs("p",{children:["Batas: ",e.jsx("b",{children:na(u.tanggal_selesai)})]})]}),tanggal_naskah_masuk:e.jsxs("div",{className:"flex-wrap",children:[e.jsxs("p",{children:["Tanggal naskah: ",zs((v=(c=u.tindak_lanjut)==null?void 0:c.naskah_masuk)==null?void 0:v.tanggal)]}),e.jsxs("p",{children:["Nomor naskah: ",e.jsx("b",{children:(Q=(N=u.tindak_lanjut)==null?void 0:N.naskah_masuk)==null?void 0:Q.nomor})]})]}),uraian:e.jsxs("div",{className:"text-sm",children:[e.jsxs("div",{className:"",children:["Dari : ",(ye=(re=u.tindak_lanjut)==null?void 0:re.naskah_masuk)==null?void 0:ye.nama_pengirim," -"," ",(fe=(xe=u.tindak_lanjut)==null?void 0:xe.naskah_masuk)==null?void 0:fe.jabatan_pengirim," -"," ",($e=(Ge=u.tindak_lanjut)==null?void 0:Ge.naskah_masuk)==null?void 0:$e.instansi_pengirim]}),e.jsxs("div",{className:"",children:["Hal : ",e.jsx("b",{children:(te=(Pe=u.tindak_lanjut)==null?void 0:Pe.naskah_masuk)==null?void 0:te.hal})]})]}),instruksi:e.jsx(e.Fragment,{children:u.disposisi_instruksi.map(Ne=>e.jsxs("div",{className:"flex items-start justify-start space-x-2 text-sm",children:[e.jsx(Yr,{className:"text-lg text-green-500 flex-shrink-0"}),e.jsx("span",{className:"",children:Ne.intruksi_nama})]},Ne==null?void 0:Ne.id))}),instruksi_tambahan:e.jsx(e.Fragment,{children:(ne=u==null?void 0:u.tindak_lanjut)!=null&&ne.catatan?(pe=u==null?void 0:u.tindak_lanjut)==null?void 0:pe.catatan:e.jsx(be,{badgeContent:"TIDAK ADA",color:"secondary",container:!0})}),status_tindak_lanjut:e.jsx("div",{className:"flex-wrap",children:E?e.jsx(be,{badgeContent:"SUDAH",color:"success",container:!0}):e.jsx(be,{badgeContent:"BELUM",color:"warning",container:!0})}),status_baca:e.jsx("div",{className:"flex-wrap",children:u!=null&&u.is_read?e.jsx(be,{badgeContent:"SUDAH",color:"success",container:!0}):e.jsx(be,{badgeContent:"BELUM",color:"warning",container:!0})}),action:e.jsxs("div",{className:"flex items-center justify-center gap-3 w-full",children:[e.jsx(va,{to:`detail?naskah_id=${Ps((he=u==null?void 0:u.tindak_lanjut)==null?void 0:he.naskah_masuk_id)}&${P}`,children:e.jsx(Oa,{size:"1.5em",color:"#17c1e8",className:"cursor-pointer",title:"View"})}),!((je=(oe=u.tindak_lanjut.naskah_masuk)==null?void 0:oe.berkas_naskah)!=null&&je.berkas)&&(m==null?void 0:m.group_role)!==4&&e.jsx(pt,{size:"1.5em",color:"#3f51b5",onClick:()=>R(u),className:"cursor-pointer",title:"Berkas"})]})}});const[b,y]=a.useState({page:1,rows:10,sortField:"",sortOrder:null,search:"",role_id:m==null?void 0:m.role,group_role:m==null?void 0:m.group_role,user_id:m==null?void 0:m.id,organisasi_id:m==null?void 0:m.organisasi_id,public_organisasi_id:m==null?void 0:m.public_organisasi_id,tindak_lanjut_jenis:"DISPOSISI",disposisi_jenis:"MASUK",filters:{tanggal_disposisi:{value:""},tanggal_naskah:{value:""},uraian:{value:""},instruksi:{value:""},catatan:{value:""},status_baca:{value:n||""},status_tindak_lanjut:{value:t||""},status_berkas:{value:""}}});a.useEffect(()=>{o()},[b]);const o=async()=>{W(!0),await p.getPaging(b).then(u=>{let D=u.data.result;D.data&&($(D.last_page),T(D.data),W(!1)),W(!1),X({...G,to:D.to,from:D.from,total:D.total})}).catch(u=>{W(!1),X({...G,to:0,from:!1,total:0})})},F=Da((u,D,E=null)=>{if(E){let P=E.target;for(;P&&P.tagName!=="TD";)P=P.parentNode;if(P&&P.tagName==="TD"){const h=P.querySelector(".clear-input"),d=P.querySelector("input");D?h.classList.remove("hidden"):(h.classList.add("hidden"),d.value="")}}let J={...b};J.filters[u].value=D,J.page=1,y(J)},600),x=u=>{let D={...b};D.page=u,y(D),window.scrollTo({top:0,behavior:"smooth"})},S=u=>{let D={...b};D.rows=u,D.page=1,y(D)},f=u=>{A(!1),B.postBerkas(u).then(D=>{var E,J,P;U.fire({icon:(E=D.data)!=null&&E.success?"success":"warning",title:(J=D.data)!=null&&J.success?"Berhasil":"Gagal",text:(P=D.data)==null?void 0:P.message,showConfirmButton:!1,timer:1500}),D.data.success&&(o(),H(!1))}).catch(D=>{var E,J,P,h;U.fire("Gagal",(J=(E=D.response)==null?void 0:E.data)!=null&&J.result&&D.response.data.result.length>0?D.response.data.result[0]:(h=(P=D.response)==null?void 0:P.data)==null?void 0:h.message,"error")}).finally(()=>A(!0))},R=u=>{H(!0),I(D=>({...D,naskah_id:u.tindak_lanjut.naskah_masuk.id,jenis:"MASUK"}))};return e.jsxs(aa,{children:[e.jsx(la,{}),i&&e.jsx(ie,{pt:6,pb:3,children:e.jsxs(Me,{children:[e.jsx(ie,{px:3,pt:3,lineHeight:1,children:e.jsx(w,{container:!0,direction:"row",justifyContent:"space-between",alignItems:"center",className:"mb-5",children:e.jsx(w,{item:!0,children:e.jsxs(le,{variant:"h5",fontWeight:"medium",children:["Daftar Naskah ",r]})})})}),e.jsx("div",{className:"overflow-auto",children:e.jsxs("div",{className:"table p-10 min-w-full",children:[e.jsx("div",{className:"flex items-center justify-end mb-1",children:e.jsx(pa,{config:b,handleClick:S})}),e.jsxs("table",{className:"w-full text-sm text-left !text-gray-700 dark:text-gray-400 table-bordered",children:[e.jsx("thead",{className:"text-xs text-gray-500 uppercase border-b-2 mb-1",children:e.jsxs("tr",{children:[e.jsx(q,{text:"No",className:"flex justify-center"}),e.jsx(q,{text:"Tanggal Disposisi"}),e.jsx(q,{text:"Tanggal Naskah Masuk"}),e.jsx(q,{text:"Uraian Informasi"}),e.jsx(q,{text:"Instruksi"}),e.jsx(q,{text:"Instruksi Tambahan"}),e.jsx(q,{text:"Status Tindak Lanjut"}),e.jsx(q,{text:"Status Baca"}),(m==null?void 0:m.group_role)!==4&&e.jsx(q,{text:"Status Berkas"}),e.jsx(q,{text:"Aksi",className:"justify-center min-w-[2rem]"})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{className:"border-b border-slate-300",children:[e.jsx("td",{}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"tanggal_selesai",onSearch:F,placeholder:"Tanggal Disposisi",type:"input",isDate:!0})}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"tanggal_naskah",onSearch:F,placeholder:"Tanggal Naskah Masuk",type:"input"})}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"uraian",onSearch:F,placeholder:"Uraian Informasi",type:"input"})}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"instruksi",onSearch:F,placeholder:"Instruksi",type:"input"})}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"catatan",onSearch:F,placeholder:"Instruksi Tambahan",type:"input"})}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"status_tindak_lanjut",onSearch:F,placeholder:"Status Tindak Lanjut",type:"select",selectOption:lt,defaultValue:lt.find(u=>u.value==t)})}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"status_baca",onSearch:F,placeholder:"Status Baca",type:"select",selectOption:Ct,defaultValue:Ct.find(u=>u.value==n)})}),(m==null?void 0:m.group_role)!==4&&e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"status_berkas",onSearch:F,placeholder:"Status Berkas",type:"select-input",selectOption:Ws})}),e.jsx("td",{})]}),K?e.jsx("tr",{children:e.jsx("td",{colSpan:10,children:e.jsx(ia,{})})}):e.jsx(e.Fragment,{}),k.length?k.map((u,D)=>e.jsxs("tr",{className:"border-b border-slate-300",children:[e.jsx("td",{className:"px-6 py-6 text-center",children:u.no}),e.jsx("td",{className:" max-w-[9rem] px-6 py-6",children:u.tanggal_disposisi}),e.jsx("td",{className:" max-w-[9rem] px-6 py-6",children:u.tanggal_naskah_masuk}),e.jsx("td",{className:" max-w-[20rem] px-6 py-6",children:e.jsx("div",{className:"flex-wrap",children:u.uraian})}),e.jsx("td",{className:"px-6 py-6",children:e.jsx("div",{className:"flex-wrap",children:u.instruksi})}),e.jsx("td",{className:" max-w-[9rem] px-6 py-6",children:u.instruksi_tambahan}),e.jsx("td",{className:" max-w-[9rem] px-6 py-6",children:u.status_tindak_lanjut}),e.jsx("td",{className:" max-w-[9rem] px-6 py-6",children:u.status_baca}),(m==null?void 0:m.group_role)!==4&&e.jsx("td",{className:" max-w-[9rem] px-6 py-6",children:e.jsx("div",{className:"flex-wrap",children:u.berkas?`${u.berkas.nomor} - ${u.berkas.nama}`:e.jsx(be,{badgeContent:"TIDAK ADA",color:"secondary",container:!0})})}),e.jsx("td",{children:u.action})]},D)):e.jsx(e.Fragment,{})]})]}),e.jsxs("nav",{className:"flex items-center justify-between p-4","aria-label":"Table navigation",children:[e.jsx("span",{className:"text-sm text-gray-400",children:G.from&&`Menampilkan ${Se(G.from)} sampai ${Se(G.to)} dari ${Se(G.total)} entri`}),e.jsx(xa,{currentPage:b.page,lastPage:L,displayCount:5,handleClick:x})]})]})})]})}),e.jsx(ua,{}),e.jsx(yr,{open:M,onClose:()=>H(!1),berkasForm:O,handleSimpanBerkas:f,setSearchBerkas:C,isSubmit:V})]})},il=fa().shape({keterangan:ze().required("Keterangan harus diisi")}),ll=fa().shape({pengguna_id:wa().required("Pengguna harus dipilih")}),uj=()=>{var ne,pe,he,oe;const r="Disposisi",[s,n]=a.useState(!1),t=JSON.parse(Le.getItem("users")),[i,l]=a.useState(null),[m,p]=a.useState(!1),[B,K]=a.useState(!1),W=new Pr,z=new js,T=ga(),L=ha(),[$,M]=a.useState(!1),[H,V]=a.useState("disposisi"),[A,G]=a.useState(!1),[X,O]=a.useState(!1),[I,_]=a.useState(!1),[C,k]=a.useState([]),[b,y]=a.useState(!1),[o,F]=a.useState(null),[x,S]=a.useState({id:(ne=T.state)==null?void 0:ne.naskah_id,disposisi_id:(pe=T.state)==null?void 0:pe.disposisi_id,tindak_lanjut_id:(he=T.state)==null?void 0:he.tindak_lanjut_id,status:(oe=T.state)==null?void 0:oe.status}),[f,R]=a.useState(-1),[u,D]=a.useState(!1),[E,J]=a.useState(!0),[P,h]=a.useState({id:x.id,disposisi_id:x.disposisi_id,keterangan:"",file:[],jenis:"DISPOSISI SELESAI"}),[d,j]=a.useState({id:x.id,pengguna_id:-1}),g="",c=new URLSearchParams(T.search),v=c.get("naskah_id");a.useEffect(()=>{if(v&&!x.id){const je=Js(v);S({id:Number(je),disposisi_id:c.get("disposisi_id"),tindak_lanjut_id:c.get("tindak_lanjut_id"),status:c.get("status")}),h(Ne=>({...Ne,id:Number(je),disposisi_id:c.get("disposisi_id")})),j(Ne=>({...Ne,id:Number(je)}))}},[T.search]),a.useEffect(()=>{x.id&&(n(!0),Ta.loading("Mengambil data Naskah",{toastId:"load-nk"}),xe(x.disposisi_id),U.close(),ye(x.id).then(()=>{Ta.update("load-nk",{render:"Data naskah berhasil didapatkan",isLoading:!1,closeButton:!0,autoClose:5e3,type:"success",pauseOnFocusLoss:!1})}))},[x.id,f]);const N=()=>{$e()},Q=async je=>{U.fire({title:"Perhatian",text:"Apakah Anda yakin ingin menyelesaikan disposisi ini?",icon:"warning",showCancelButton:!0,confirmButtonText:"Ya",cancelButtonText:"Batal",customClass:{confirmButton:"button button-error",cancelButton:"button button-info"}}).then(async Ne=>{Ne.isConfirmed?(J(!1),await W.postPenyelesaian(je).then(Re=>{var sa,Te,me;Re.data.success&&(U.fire((sa=Re.data)!=null&&sa.success?"Berhasil":"Gagal",(Te=Re.data)==null?void 0:Te.message,(me=Re.data)!=null&&me.success?"success":"warning"),D(!0),L(g+"/penerimaan-naskah-masuk/disposisi"))}).catch(Re=>{var Te,me;const sa=Oe(Re.response.data.result);U.fire("Gagal",sa??((me=(Te=Re.response)==null?void 0:Te.data)==null?void 0:me.message),"error")}).finally(()=>J(!0))):U.close()})},re=()=>{L(g+"/penerimaan-naskah-masuk/disposisi")},ye=async je=>{if(je!=null||je!=null){const Ne={baca:"BACA",disposisi_id:x.disposisi_id};await z.detail(je,Ne).then(Re=>{var me,ee,Y;F(Re);const Te=!(((me=Re==null?void 0:Re.berkas_naskah)==null?void 0:me.berkas)&&((Y=(ee=Re==null?void 0:Re.berkas_naskah)==null?void 0:ee.berkas)==null?void 0:Y.status)==="TUTUP")&&(t==null?void 0:t.group_role)==4;_(Te)})}},xe=async je=>{(je!=null||je!=null)&&await W.detail(je).then(Ne=>{y((Ne==null?void 0:Ne.status)=="SUDAH SELESAI")})},fe=je=>{je=="self"?L(g+"/pembuatan-naskah-keluar/registrasi-naskah-keluar",{state:{reference:{nomor:o==null?void 0:o.nomor,id:o==null?void 0:o.id,nomor_hal:`${o==null?void 0:o.nomor} - ${o==null?void 0:o.hal}`},naskah_masuk_id:x.id,balas:!0}}):je=="selesai"?p(!0):je!="self"&&L(g+"/penerimaan-naskah-masuk/naskah-dinas-masuk/form",{state:{mode:je,id:x.id,tindak_lanjut_id:x.tindak_lanjut_id,back:`/penerimaan-naskah-masuk/disposisi/detail${T.search}`,file_url:o==null?void 0:o.file_url}})},Ge=()=>e.jsxs(Ls,{anchorEl:i,anchorOrigin:{vertical:"bottom",horizontal:"left"},open:!!i,onClose:()=>l(!1),sx:{mt:2,zIndex:10},children:[e.jsx(Ma,{title:"Saya Balas",onClick:()=>fe("self")}),e.jsx(Ma,{title:"Disposisi",onClick:()=>fe("disposisi")}),e.jsx(Ma,{title:"Koordinasi",onClick:()=>fe("koordinasi")}),e.jsx(Ma,{title:"Arahan",onClick:()=>fe("arahan")})]}),$e=()=>{p(!1)},Pe=()=>{K(!1)},te=()=>{G(!A),X||O(!0)};return e.jsxs(aa,{children:[e.jsx(la,{}),s&&e.jsxs(e.Fragment,{children:[e.jsx(ie,{pt:6,pb:1,children:e.jsxs("div",{className:"flex justify-between p-3 items-center",children:[e.jsxs(le,{variant:"h5",fontWeight:"medium",children:["Detail ",r]}),e.jsxs("div",{className:"flex flex-col md:flex-row justify-end text-right gap-3",children:[I&&!b&&e.jsxs(e.Fragment,{children:[e.jsx("div",{children:e.jsxs(_e,{variant:"gradient",color:"success",onClick:()=>K(!0),children:[e.jsx(Xs,{size:"1.5em",className:"me-2"}),"Penyelesaian Disposisi"]})}),e.jsx("div",{children:e.jsxs(ie,{children:[e.jsxs(_e,{variant:"gradient",color:"error",onClick:je=>l(je.currentTarget),children:[e.jsx(nt,{size:"1.5em",className:"me-2"}),"Tindak Lanjut"]}),Ge()]})})]}),e.jsxs(_e,{variant:"gradient",color:"secondary",onClick:re,children:[e.jsx(za,{size:"1.5em",className:"me-2"}),"Kembali"]})]})]})}),e.jsx(Sr,{data:o,naskahId:x.id}),e.jsx(ie,{pb:3,children:e.jsxs(Me,{className:"p-5 cursor-pointer",children:[e.jsxs("div",{onClick:()=>M(!$),className:"text-base flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex justify-start",children:[e.jsx(en,{className:"w-6 h-5 me-3"}),e.jsx("span",{children:"Tindak Lanjut"})]}),e.jsx(is,{className:"w-6 h-5 text-gray-500 cursor-pointer"})]}),$&&e.jsx(vr,{naskahId:x==null?void 0:x.id,naskahNomor:o==null?void 0:o.nomor,otherTable:H,setOtherTable:V,refresh:f,setRefresh:R})]})}),e.jsx(ie,{pb:3,children:e.jsxs(Me,{className:"p-5 cursor-pointer",children:[e.jsxs("div",{onClick:()=>te(),className:"text-base flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex justify-start",children:[e.jsx(_r,{className:"w-6 h-5 me-3"}),e.jsx("span",{children:"Histori Naskah"})]}),e.jsx(is,{className:"w-6 h-5 text-gray-500 cursor-pointer"})]}),e.jsx("div",{className:A?"inline":"hidden",children:(x==null?void 0:x.id)&&X&&e.jsx(Wt,{naskah_id:x.id,refresh:f})})]})}),e.jsx(ua,{}),e.jsxs(Fa,{open:m,onClose:$e,children:[e.jsxs("div",{children:[e.jsxs(_a,{className:"flex items-center gap-2 text-teal-600 ",children:[e.jsx(Wi,{className:"w-8 h-8 me-5"}),e.jsx(le,{children:"Form Dibalaskan Oleh"})]}),e.jsx(ca,{initialValues:d,onSubmit:N,validateOnChange:!0,validationSchema:ll,children:e.jsx(da,{id:"formDibalaskan",className:"text-sm",children:e.jsx("div",{className:"px-4",children:e.jsx(w,{mb:2,children:e.jsx(ce,{name:"pengguna_id",children:({field:je,form:Ne,meta:Re})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Pengguna",required:!0,error:Re.error&&Re.touched}),e.jsx(ra,{url:"naskah-dinas/naskah-masuk/nomor-referensi/select",callbackChange:sa=>{Ne.setFieldValue("pengguna",(sa==null?void 0:sa.id)??0)},keyValue:["id","nomor_hal"],placeholder:"Pilih Sekretaris / Tata Usaha",className:"text-sm",menuPortalTarget:null,isMulti:!1,optionParam:{user_id:t==null?void 0:t.id},targetService:"nm"}),e.jsx(ue,{text:Re.error,error:Re.error&&Re.touched})]})})})})})})]}),e.jsx(ya,{children:e.jsxs(e.Fragment,{children:[e.jsx(_e,{color:"success",type:"submit",variant:"gradient",form:"formDibalaskan",children:"Ya, Selesai"}),e.jsx(_e,{color:"error",variant:"gradient",onClick:()=>p(!1),children:"Tutup"})]})})]}),e.jsxs(ys,{open:B,onClose:Pe,fullWidth:!0,maxWidth:"xl",children:[e.jsxs("div",{className:"p-3",children:[e.jsxs(_a,{className:"flex items-center gap-4 text-teal-600",children:[e.jsx(Xs,{className:"w-8 h-8"}),e.jsx(le,{children:"Form Penyelesaian"})]}),e.jsx(ca,{initialValues:P,onSubmit:Q,validateOnChange:!0,validationSchema:il,enableReinitialize:!0,children:e.jsx(da,{id:"formPenyelesaian",className:"text-sm",children:e.jsxs("div",{className:"px-4",children:[e.jsx(w,{mb:2,children:e.jsx(ce,{name:"keterangan",children:({field:je,meta:Ne})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Keterangan",required:!0,error:Ne.error&&Ne.touched}),e.jsx(Ka,{...je,rows:5,placeHolder:"Masukkan Keterangan Penyelesaian...",error:Ne.error&&Ne.touched}),e.jsx(ue,{text:Ne.error,error:Ne.error&&Ne.touched})]})})}),e.jsx(w,{mb:2,children:e.jsx(ce,{name:"file",children:({field:je,form:Ne,meta:Re})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Lampiran",error:Re.error&&Re.touched}),e.jsx(at,{onFileSelected:sa=>{Ne.setFieldValue("file",sa??"")},isReset:u,descBox:"Untuk menambahkan File, seret dan lepas file tersebut ke sini, atau klik untuk memilih file."}),e.jsx(ue,{text:Re.error,error:Re.error&&Re.touched})]})})}),e.jsxs("p",{children:["Penyelesaian hanya bisa dilakukan ",e.jsx("u",{children:"1 kali"})," maka Anda tidak dapat"," ",e.jsx("b",{children:"mengedit"})," maupun ",e.jsx("b",{children:"menghapus"})," kembali"]})]})})})]}),e.jsx(ya,{children:e.jsxs(e.Fragment,{children:[e.jsx(Je,{submit:E,color:"success",formId:"formPenyelesaian",text:"Simpan"}),e.jsx(_e,{color:"error",variant:"gradient",onClick:Pe,children:"Batal"})]})})]})]})]})},hj=()=>{const r="Arahan Masuk",s=ga(),n=new URLSearchParams(s.search).get("statusBaca"),t=new URLSearchParams(s.search).get("statusTL"),[i,l]=a.useState(!1);a.useEffect(()=>{l(ge(r,"is_read",!0,!0))},[]);const m=JSON.parse(Le.getItem("users")),p=new Pr,B=new js;ha();const[K,W]=a.useState(!1),[z,T]=a.useState(null),[L,$]=a.useState(null),[M,H]=a.useState(!1),[V,A]=a.useState(!0),[G,X]=a.useState({total:0,from:1,to:1}),[O,I]=a.useState({berkas_id:null,naskah_id:null,jenis:""}),[_,C]=a.useState("");let k=[];z==null?k=[]:k=z.map((u,D)=>{var h,d,j,g,c,v,N,Q,re,ye,xe,fe,Ge,$e,Pe,te,ne,pe;const E=((h=u.tindak_lanjut.naskah_masuk.tindak_lanjut)==null?void 0:h.some(he=>he.user_id==m.id))||u.status==="SUDAH SELESAI",J={disposisi_id:u.id,tindak_lanjut_id:u==null?void 0:u.tindak_lanjut_id,status:u.status},P=Ce.serializeObjectToQueryString(J);return{no:D+G.from,id:u.id,tanggal_disposisi:(d=u.tindak_lanjut)==null?void 0:d.created_at,tanggal_naskah_masuk:(g=(j=u.tindak_lanjut)==null?void 0:j.naskah_masuk)==null?void 0:g.tanggal,berkas:(v=(c=u.tindak_lanjut.naskah_masuk)==null?void 0:c.berkas_naskah)==null?void 0:v.berkas,uraian:e.jsxs("div",{className:"text-sm",children:[e.jsxs("div",{className:"",children:["Dari : ",(Q=(N=u.tindak_lanjut)==null?void 0:N.naskah_masuk)==null?void 0:Q.nama_pengirim," -"," ",(ye=(re=u.tindak_lanjut)==null?void 0:re.naskah_masuk)==null?void 0:ye.jabatan_pengirim," -"," ",(fe=(xe=u.tindak_lanjut)==null?void 0:xe.naskah_masuk)==null?void 0:fe.instansi_pengirim]}),e.jsxs("div",{className:"",children:["Hal : ",e.jsx("b",{children:($e=(Ge=u.tindak_lanjut)==null?void 0:Ge.naskah_masuk)==null?void 0:$e.hal})]})]}),instruksi:(Pe=u.tindak_lanjut)==null?void 0:Pe.catatan,status_tindak_lanjut:E,status_baca:u.is_read,action:e.jsxs("div",{className:"flex items-center justify-center gap-3 w-full",children:[e.jsx(va,{to:`detail?naskah_id=${Ps((te=u==null?void 0:u.tindak_lanjut)==null?void 0:te.naskah_masuk_id)}&${P}`,children:e.jsx(Oa,{size:"1.5em",color:"#17c1e8",className:"cursor-pointer",title:"View"})}),!((pe=(ne=u.tindak_lanjut.naskah_masuk)==null?void 0:ne.berkas_naskah)!=null&&pe.berkas)&&(m==null?void 0:m.group_role)!==4&&e.jsx(pt,{size:"1.5em",color:"#3f51b5",onClick:()=>R(u),className:"cursor-pointer",title:"Berkas"})]})}});const[b,y]=a.useState({page:1,rows:10,sortField:"",sortOrder:null,search:"",role_id:m==null?void 0:m.role,group_role:m==null?void 0:m.group_role,user_id:m==null?void 0:m.id,organisasi_id:m==null?void 0:m.organisasi_id,tindak_lanjut_jenis:"ARAHAN",disposisi_jenis:"MASUK",filters:{tanggal_disposisi:{value:""},tanggal_naskah:{value:""},uraian:{value:""},catatan:{value:""},status_baca:{value:n||""},status_tindak_lanjut:{value:t||""},status_berkas:{value:""}}});a.useEffect(()=>{o()},[b]);const o=async()=>{W(!0),await p.getPaging(b).then(u=>{let D=u.data.result;D.data&&($(D.last_page),T(D.data),W(!1)),W(!1),X({...G,to:D.to,from:D.from,total:D.total})}).catch(u=>{W(!1),X({...G,to:0,from:!1,total:0})})},F=Da((u,D,E=null)=>{if(E){let P=E.target;for(;P&&P.tagName!=="TD";)P=P.parentNode;if(P&&P.tagName==="TD"){const h=P.querySelector(".clear-input"),d=P.querySelector("input");D?h.classList.remove("hidden"):(h.classList.add("hidden"),d.value="")}}let J={...b};J.filters[u].value=D,J.page=1,y(J)},600),x=u=>{let D={...b};D.page=u,y(D),window.scrollTo({top:0,behavior:"smooth"})},S=u=>{let D={...b};D.rows=u,D.page=1,y(D)},f=u=>{A(!1),B.postBerkas(u).then(D=>{var E,J,P;U.fire({icon:(E=D.data)!=null&&E.success?"success":"warning",title:(J=D.data)!=null&&J.success?"Berhasil":"Gagal",text:(P=D.data)==null?void 0:P.message,showConfirmButton:!1,timer:1500}),D.data.success&&(o(),H(!1))}).catch(D=>{var E,J,P,h;U.fire("Gagal",(J=(E=D.response)==null?void 0:E.data)!=null&&J.result&&D.response.data.result.length>0?D.response.data.result[0]:(h=(P=D.response)==null?void 0:P.data)==null?void 0:h.message,"error")}).finally(()=>A(!0))},R=u=>{H(!0),I(D=>({...D,naskah_id:u.tindak_lanjut.naskah_masuk.id,jenis:"MASUK"}))};return e.jsxs(aa,{children:[e.jsx(la,{}),i&&e.jsx(ie,{pt:6,pb:3,children:e.jsxs(Me,{children:[e.jsx(ie,{px:3,pt:3,lineHeight:1,children:e.jsx(w,{container:!0,direction:"row",justifyContent:"space-between",alignItems:"center",className:"mb-5",children:e.jsx(w,{item:!0,children:e.jsx(le,{variant:"h5",fontWeight:"medium",children:"Daftar Naskah Arahan"})})})}),e.jsx("div",{className:"overflow-auto",children:e.jsxs("div",{className:"table p-10 min-w-full",children:[e.jsx("div",{className:"flex items-center justify-end mb-1",children:e.jsx(pa,{config:b,handleClick:S})}),e.jsxs("table",{className:"w-full text-sm text-left !text-gray-700 dark:text-gray-400 table-bordered",children:[e.jsx("thead",{className:"text-xs text-gray-500 uppercase border-b-2 mb-1",children:e.jsxs("tr",{children:[e.jsx(q,{text:"No",className:"flex justify-center"}),e.jsx(q,{text:"Tanggal Arahan"}),e.jsx(q,{text:"Tanggal Naskah Masuk"}),e.jsx(q,{text:"Uraian Informasi"}),e.jsx(q,{text:"Instruksi"}),e.jsx(q,{text:"Status Tindak Lanjut"}),e.jsx(q,{text:"Status Baca"}),(m==null?void 0:m.group_role)!==4&&e.jsx(q,{text:"Status Berkas"}),e.jsx(q,{text:"Aksi",className:"justify-center min-w-[2rem]"})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{className:"border-b border-slate-300",children:[e.jsx("td",{}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"tanggal_selesai",onSearch:F,placeholder:"Tanggal Disposisi",type:"input",isDate:!0})}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"tanggal_naskah",onSearch:F,placeholder:"Tanggal Naskah Masuk",type:"input"})}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"uraian",onSearch:F,placeholder:"Uraian Informasi",type:"input"})}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"catatan",onSearch:F,placeholder:"Instruksi",type:"input"})}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"status_tindak_lanjut",onSearch:F,placeholder:"Status Tindak Lanjut",selectOption:lt,defaultValue:lt.find(u=>u.value==t)})}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"status_baca",onSearch:F,placeholder:"Status Baca",type:"select",selectOption:Ct,defaultValue:Ct.find(u=>u.value==n)})}),(m==null?void 0:m.group_role)!==4&&e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"status_berkas",onSearch:F,placeholder:"Status Berkas",type:"select-input",selectOption:Ws})}),e.jsx("td",{})]}),K?e.jsx("tr",{children:e.jsx("td",{colSpan:9,children:e.jsx(ia,{})})}):e.jsx(e.Fragment,{}),k.length?k.map((u,D)=>e.jsxs("tr",{className:"border-b border-slate-300",children:[e.jsx("td",{className:"px-6 py-6 text-center",children:u.no}),e.jsx("td",{className:" max-w-[9rem] px-6 py-6",children:e.jsx("div",{className:"flex-wrap",children:zs(u.tanggal_disposisi)})}),e.jsx("td",{className:" max-w-[9rem] px-6 py-6",children:e.jsx("div",{className:"flex-wrap",children:zs(u.tanggal_naskah_masuk)})}),e.jsx("td",{className:" max-w-[20rem] px-6 py-6",children:e.jsx("div",{className:"flex-wrap",children:u.uraian})}),e.jsx("td",{className:" max-w-[9rem] px-6 py-6",children:u.instruksi??"-"}),e.jsx("td",{className:" max-w-[9rem] px-6 py-6",children:e.jsx("div",{className:"flex-wrap",children:u.status_tindak_lanjut?e.jsx(be,{badgeContent:"SUDAH",color:"success",container:!0}):e.jsx(be,{badgeContent:"BELUM",color:"warning",container:!0})})}),e.jsx("td",{className:" max-w-[9rem] px-6 py-6",children:e.jsx("div",{className:"flex-wrap",children:u.status_baca?e.jsx(be,{badgeContent:"SUDAH",color:"success",container:!0}):e.jsx(be,{badgeContent:"BELUM",color:"warning",container:!0})})}),(m==null?void 0:m.group_role)!==4&&e.jsx("td",{className:" max-w-[9rem] px-6 py-6",children:e.jsx("div",{className:"flex-wrap",children:u.berkas?`${u.berkas.nomor} - ${u.berkas.nama}`:e.jsx(be,{badgeContent:"TIDAK ADA",color:"secondary",container:!0})})}),e.jsx("td",{children:u.action})]},D)):e.jsx(e.Fragment,{})]})]}),e.jsxs("nav",{className:"flex items-center justify-between p-4","aria-label":"Table navigation",children:[e.jsx("span",{className:"text-sm text-gray-400",children:G.from&&`Menampilkan ${Se(G.from)} sampai ${Se(G.to)} dari ${Se(G.total)} entri`}),e.jsx(xa,{currentPage:b.page,lastPage:L,displayCount:5,handleClick:x})]})]})})]})}),e.jsx(ua,{}),e.jsx(yr,{open:M,onClose:()=>H(!1),berkasForm:O,handleSimpanBerkas:f,setSearchBerkas:C,isSubmit:V})]})},mj=()=>{var Pe,te,ne,pe;const r="Arahan Masuk",[s,n]=a.useState(!1),t=JSON.parse(Le.getItem("users")),[i,l]=a.useState(null),[m,p]=a.useState(!1),[B,K]=a.useState(!1),W=new js,z=new Pr,T=ga(),L=ha(),[$,M]=a.useState(!1),[H,V]=a.useState("arahan"),[A,G]=a.useState(!1),[X,O]=a.useState(!1),[I,_]=a.useState(!1),[C,k]=a.useState(!0),[b,y]=a.useState(null),[o,F]=a.useState({id:(Pe=T.state)==null?void 0:Pe.naskah_id,disposisi_id:(te=T.state)==null?void 0:te.disposisi_id,tindak_lanjut_id:(ne=T.state)==null?void 0:ne.tindak_lanjut_id,status:(pe=T.state)==null?void 0:pe.status}),[x,S]=a.useState(-1),[f,R]=a.useState(!1),[u,D]=a.useState(!0),[E,J]=a.useState({id:o.id,disposisi_id:o.disposisi_id,keterangan:"",file:[],jenis:"ARAHAN SELESAI"}),[P,h]=a.useState({id:o.id,pengguna_id:-1}),d="",j=new URLSearchParams(T.search),g=j.get("naskah_id");a.useEffect(()=>{if(g&&!o.id){const he=Js(g);F({id:Number(he),disposisi_id:j.get("disposisi_id"),tindak_lanjut_id:j.get("tindak_lanjut_id"),status:j.get("status")}),J(oe=>({...oe,id:Number(he),disposisi_id:j.get("disposisi_id")})),h(oe=>({...oe,id:Number(he)}))}},[T.search]),a.useEffect(()=>{o.id&&(n(!0),U.close(),Ta.loading("Mengambil data Naskah",{toastId:"load-nk"}),re(o.disposisi_id),Q(o.id).then(()=>{Ta.update("load-nk",{render:"Data naskah berhasil didapatkan",isLoading:!1,closeButton:!0,autoClose:5e3,type:"success",pauseOnFocusLoss:!1})}))},[o.id,x]);const c=()=>{fe()},v=async he=>{U.fire({title:"Perhatian",text:"Apakah Anda yakin ingin menyelesaikan arahan ini?",icon:"warning",showCancelButton:!0,confirmButtonText:"Ya",cancelButtonText:"Batal",customClass:{confirmButton:"button button-error",cancelButton:"button button-info"}}).then(async oe=>{oe.isConfirmed?(D(!1),await z.postPenyelesaian(he).then(je=>{var Ne,Re,sa;U.fire((Ne=je.data)!=null&&Ne.success?"Berhasil":"Gagal",(Re=je.data)==null?void 0:Re.message,(sa=je.data)!=null&&sa.success?"success":"warning"),je.data.success&&(R(!0),L(d+"/penerimaan-naskah-masuk/arahan"))}).catch(je=>{var Re,sa;const Ne=Oe(je.response.data.result);U.fire("Gagal",Ne??((sa=(Re=je.response)==null?void 0:Re.data)==null?void 0:sa.message),"error")}).finally(()=>D(!0))):U.close()})},N=()=>{L(d+"/penerimaan-naskah-masuk/arahan")},Q=async he=>{if(he!=null||he!=null){const oe={baca:"BACA",disposisi_id:o.disposisi_id};await W.detail(he,oe).then(je=>{var sa,Te,me;y(je);const Re=!(((sa=je==null?void 0:je.berkas_naskah)==null?void 0:sa.berkas)&&((me=(Te=je==null?void 0:je.berkas_naskah)==null?void 0:Te.berkas)==null?void 0:me.status)==="TUTUP")&&(t==null?void 0:t.group_role)==4;_(Re)})}},re=async he=>{(he!=null||he!=null)&&await z.detail(he).then(oe=>{k((oe==null?void 0:oe.status)=="SUDAH SELESAI")})},ye=he=>{he=="self"?L(d+"/pembuatan-naskah-keluar/registrasi-naskah-keluar",{state:{reference:{nomor:b==null?void 0:b.nomor,id:b==null?void 0:b.id,nomor_hal:`${b==null?void 0:b.nomor} - ${b==null?void 0:b.hal}`},naskah_masuk_id:o.id,balas:!0}}):he=="selesai"?p(!0):he!="self"&&L(d+"/penerimaan-naskah-masuk/naskah-dinas-masuk/form",{state:{mode:he,id:o.id,tindak_lanjut_id:o.tindak_lanjut_id,back:`/penerimaan-naskah-masuk/arahan/detail${T.search}`}})},xe=()=>e.jsxs(Ls,{anchorEl:i,anchorOrigin:{vertical:"bottom",horizontal:"left"},open:!!i,onClose:()=>l(!1),sx:{mt:2,zIndex:10},children:[e.jsx(Ma,{title:"Saya Balas",onClick:()=>ye("self")}),e.jsx(Ma,{title:"Disposisi",onClick:()=>ye("disposisi")}),e.jsx(Ma,{title:"Koordinasi",onClick:()=>ye("koordinasi")}),e.jsx(Ma,{title:"Arahan",onClick:()=>ye("arahan")})]}),fe=()=>{p(!1)},Ge=()=>{K(!1)},$e=()=>{G(!A),X||O(!0)};return e.jsxs(aa,{children:[e.jsx(la,{}),s&&e.jsxs(e.Fragment,{children:[e.jsx(ie,{pt:6,pb:1,children:e.jsxs("div",{className:"flex justify-between p-3 items-center",children:[e.jsxs(le,{variant:"h5",fontWeight:"medium",children:["Detail ",r]}),e.jsxs("div",{className:"flex flex-col md:flex-row justify-end text-right gap-3",children:[I&&!C&&e.jsxs(e.Fragment,{children:[e.jsx("div",{children:e.jsxs(_e,{variant:"gradient",color:"success",onClick:()=>K(!0),children:[e.jsx(Xs,{size:"1.5em",className:"me-2"}),"Penyelesaian Arahan"]})}),e.jsx("div",{children:e.jsxs(ie,{children:[e.jsxs(_e,{variant:"gradient",color:"error",onClick:he=>l(he.currentTarget),children:[e.jsx(nt,{size:"1.5em",className:"me-2"}),"Tindak Lanjut"]}),xe()]})})]}),e.jsxs(_e,{variant:"gradient",color:"secondary",onClick:N,children:[e.jsx(za,{size:"1.5em",className:"me-2"}),"Kembali"]})]})]})}),e.jsx(Sr,{data:b,naskahId:o.id}),e.jsx(ie,{pb:3,children:e.jsxs(Me,{className:"p-5 cursor-pointer",children:[e.jsxs("div",{onClick:()=>M(!$),className:"text-base flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex justify-start",children:[e.jsx(en,{className:"w-6 h-5 me-3"}),e.jsx("span",{children:"Tindak Lanjut"})]}),e.jsx(is,{className:"w-6 h-5 text-gray-500 cursor-pointer"})]}),$&&e.jsx(vr,{naskahId:o==null?void 0:o.id,naskahNomor:b==null?void 0:b.nomor,otherTable:H,setOtherTable:V,refresh:x,setRefresh:S})]})}),e.jsx(ie,{pb:3,children:e.jsxs(Me,{className:"p-5 cursor-pointer",children:[e.jsxs("div",{onClick:()=>$e(),className:"text-base flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex justify-start",children:[e.jsx(_r,{className:"w-6 h-5 me-3"}),e.jsx("span",{children:"Histori Naskah"})]}),e.jsx(is,{className:"w-6 h-5 text-gray-500 cursor-pointer"})]}),e.jsx("div",{className:A?"inline":"hidden",children:(o==null?void 0:o.id)&&X&&e.jsx(Wt,{naskah_id:o.id,refresh:x})})]})}),e.jsx(ua,{}),e.jsxs(Fa,{open:m,onClose:fe,children:[e.jsxs("div",{children:[e.jsxs(_a,{className:"flex items-center gap-2 text-teal-600 ",children:[e.jsx(Wi,{className:"w-8 h-8 me-5"}),e.jsx(le,{children:"Form Dibalaskan Oleh"})]}),e.jsx(ca,{initialValues:P,onSubmit:c,validateOnChange:!0,validationSchema:ll,children:e.jsx(da,{id:"formDibalaskan",className:"text-sm",children:e.jsx("div",{className:"px-4",children:e.jsx(w,{mb:2,children:e.jsx(ce,{name:"pengguna_id",children:({field:he,form:oe,meta:je})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Pengguna",required:!0,error:je.error&&je.touched}),e.jsx(ra,{url:"naskah-dinas/naskah-masuk/nomor-referensi/select",callbackChange:Ne=>{oe.setFieldValue("pengguna",(Ne==null?void 0:Ne.id)??0)},keyValue:["id","nomor_hal"],placeholder:"Pilih Sekretaris / Tata Usaha",className:"text-sm",menuPortalTarget:null,isMulti:!1,optionParam:{user_id:t==null?void 0:t.id},targetService:"nm"}),e.jsx(ue,{text:je.error,error:je.error&&je.touched})]})})})})})})]}),e.jsx(ya,{children:e.jsxs(e.Fragment,{children:[e.jsx(_e,{color:"success",type:"submit",variant:"gradient",form:"formDibalaskan",children:"Ya, Selesai"}),e.jsx(_e,{color:"error",variant:"gradient",onClick:()=>p(!1),children:"Tutup"})]})})]}),e.jsxs(ys,{open:B,onClose:Ge,fullWidth:!0,maxWidth:"xl",children:[e.jsxs("div",{className:"p-3",children:[e.jsxs(_a,{className:"flex items-center gap-4 text-teal-600",children:[e.jsx(Xs,{className:"w-8 h-8"}),e.jsx(le,{children:"Form Penyelesaian"})]}),e.jsx(ca,{initialValues:E,onSubmit:v,validateOnChange:!0,validationSchema:il,enableReinitialize:!0,children:e.jsx(da,{id:"formPenyelesaian",className:"text-sm",children:e.jsxs("div",{className:"px-4",children:[e.jsx(w,{mb:2,children:e.jsx(ce,{name:"keterangan",children:({field:he,meta:oe})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Keterangan",required:!0,error:oe.error&&oe.touched}),e.jsx(Ka,{...he,rows:5,placeHolder:"Masukkan Keterangan Penyelesaian...",error:oe.error&&oe.touched}),e.jsx(ue,{text:oe.error,error:oe.error&&oe.touched})]})})}),e.jsx(w,{mb:2,children:e.jsx(ce,{name:"file",children:({field:he,form:oe,meta:je})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Lampiran",error:je.error&&je.touched}),e.jsx(at,{onFileSelected:Ne=>{oe.setFieldValue("file",Ne??[])},isReset:f,descBox:"Untuk menambahkan File, seret dan lepas file tersebut ke sini, atau klik untuk memilih file."}),e.jsx(ue,{text:je.error,error:je.error&&je.touched})]})})}),e.jsxs("p",{children:["Penyelesaian hanya bisa dilakukan ",e.jsx("u",{children:"1 kali"})," maka Anda tidak dapat"," ",e.jsx("b",{children:"mengedit"})," maupun ",e.jsx("b",{children:"menghapus"})," kembali"]})]})})})]}),e.jsx(ya,{children:e.jsxs(e.Fragment,{children:[e.jsx(Je,{submit:u,color:"success",formId:"formPenyelesaian",text:"Simpan"}),e.jsx(_e,{color:"error",variant:"gradient",onClick:Ge,children:"Batal"})]})})]})]})]})},xj=()=>{const r="Naskah Koordinasi Masuk",s=ga(),n=new URLSearchParams(s.search).get("statusBaca"),t=new URLSearchParams(s.search).get("statusTL"),[i,l]=a.useState(!1);a.useEffect(()=>{l(ge(r,"is_read",!0,!0))},[]);const m=JSON.parse(Le.getItem("users")),p=new Pr,B=new js;ha();const[K,W]=a.useState(!1),[z,T]=a.useState(null),[L,$]=a.useState(null),[M,H]=a.useState(!1),[V,A]=a.useState(!0),[G,X]=a.useState({total:0,from:1,to:1}),[O,I]=a.useState({berkas_id:null,naskah_id:null,jenis:""}),[_,C]=a.useState("");let k=[];z==null?k=[]:k=z.map((u,D)=>{var h,d,j,g,c,v,N,Q,re,ye,xe,fe,Ge,$e,Pe,te,ne,pe;const E=((h=u.tindak_lanjut.naskah_masuk.tindak_lanjut)==null?void 0:h.some(he=>he.user_id==m.id))||u.status==="SUDAH SELESAI",J={disposisi_id:u.id,tindak_lanjut_id:u==null?void 0:u.tindak_lanjut_id,status:u.status},P=Ce.serializeObjectToQueryString(J);return{no:D+G.from,id:u.id,tanggal_disposisi:(d=u.tindak_lanjut)==null?void 0:d.created_at,tanggal_naskah_masuk:(g=(j=u.tindak_lanjut)==null?void 0:j.naskah_masuk)==null?void 0:g.tanggal,berkas:(v=(c=u.tindak_lanjut.naskah_masuk)==null?void 0:c.berkas_naskah)==null?void 0:v.berkas,uraian:e.jsxs("div",{className:"text-sm",children:[e.jsxs("div",{className:"",children:["Dari : ",(Q=(N=u.tindak_lanjut)==null?void 0:N.naskah_masuk)==null?void 0:Q.nama_pengirim," -"," ",(ye=(re=u.tindak_lanjut)==null?void 0:re.naskah_masuk)==null?void 0:ye.jabatan_pengirim," -"," ",(fe=(xe=u.tindak_lanjut)==null?void 0:xe.naskah_masuk)==null?void 0:fe.instansi_pengirim]}),e.jsxs("div",{className:"",children:["Hal : ",e.jsx("b",{children:($e=(Ge=u.tindak_lanjut)==null?void 0:Ge.naskah_masuk)==null?void 0:$e.hal})]})]}),instruksi:(Pe=u.tindak_lanjut)==null?void 0:Pe.catatan,status_tindak_lanjut:E,status_baca:u.is_read,action:e.jsxs("div",{className:"flex items-center justify-center gap-3 w-full",children:[e.jsx(va,{to:`detail?naskah_id=${Ps((te=u==null?void 0:u.tindak_lanjut)==null?void 0:te.naskah_masuk_id)}&${P}`,children:e.jsx(Oa,{size:"1.5em",color:"#17c1e8",className:"cursor-pointer",title:"View"})}),!((pe=(ne=u.tindak_lanjut.naskah_masuk)==null?void 0:ne.berkas_naskah)!=null&&pe.berkas)&&(m==null?void 0:m.group_role)!==4&&e.jsx(pt,{size:"1.5em",color:"#3f51b5",onClick:()=>R(u),className:"cursor-pointer",title:"Berkas"})]})}});const[b,y]=a.useState({page:1,rows:10,sortField:"",sortOrder:null,search:"",role_id:m==null?void 0:m.role,group_role:m==null?void 0:m.group_role,user_id:m==null?void 0:m.id,organisasi_id:m==null?void 0:m.organisasi_id,tindak_lanjut_jenis:"KOORDINASI",disposisi_jenis:"MASUK",filters:{tanggal_disposisi:{value:""},tanggal_naskah:{value:""},uraian:{value:""},catatan:{value:""},status_baca:{value:n||""},status_tindak_lanjut:{value:t||""},status_berkas:{value:""}}});a.useEffect(()=>{o()},[b]);const o=async()=>{W(!0),await p.getPaging(b).then(u=>{let D=u.data.result;D.data&&($(D.last_page),T(D.data),W(!1)),W(!1),X({...G,to:D.to,from:D.from,total:D.total})}).catch(u=>{W(!1),X({...G,to:0,from:!1,total:0})})},F=Da((u,D,E=null)=>{if(E){let P=E.target;for(;P&&P.tagName!=="TD";)P=P.parentNode;if(P&&P.tagName==="TD"){const h=P.querySelector(".clear-input"),d=P.querySelector("input");D?h.classList.remove("hidden"):(h.classList.add("hidden"),d.value="")}}let J={...b};J.filters[u].value=D,J.page=1,y(J)},600),x=u=>{let D={...b};D.page=u,y(D),window.scrollTo({top:0,behavior:"smooth"})},S=u=>{let D={...b};D.rows=u,D.page=1,y(D)},f=u=>{A(!1),B.postBerkas(u).then(D=>{var E,J,P;U.fire({icon:(E=D.data)!=null&&E.success?"success":"warning",title:(J=D.data)!=null&&J.success?"Berhasil":"Gagal",text:(P=D.data)==null?void 0:P.message,showConfirmButton:!1,timer:1500}),D.data.success&&(o(),H(!1))}).catch(D=>{var E,J,P,h;U.fire("Gagal",(J=(E=D.response)==null?void 0:E.data)!=null&&J.result&&D.response.data.result.length>0?D.response.data.result[0]:(h=(P=D.response)==null?void 0:P.data)==null?void 0:h.message,"error")}).finally(()=>A(!0))},R=u=>{H(!0),I(D=>({...D,naskah_id:u.tindak_lanjut.naskah_masuk.id,jenis:"MASUK"}))};return e.jsxs(aa,{children:[e.jsx(la,{}),i&&e.jsx(ie,{pt:6,pb:3,children:e.jsxs(Me,{children:[e.jsx(ie,{px:3,pt:3,lineHeight:1,children:e.jsx(w,{container:!0,direction:"row",justifyContent:"space-between",alignItems:"center",className:"mb-5",children:e.jsx(w,{item:!0,children:e.jsx(le,{variant:"h5",fontWeight:"medium",children:"Daftar Naskah Koordinasi"})})})}),e.jsx("div",{className:"overflow-auto",children:e.jsxs("div",{className:"table p-10 min-w-full",children:[e.jsx("div",{className:"flex items-center justify-end mb-1",children:e.jsx(pa,{config:b,handleClick:S})}),e.jsxs("table",{className:"w-full text-sm text-left !text-gray-700 dark:text-gray-400 table-bordered",children:[e.jsx("thead",{className:"text-xs text-gray-500 uppercase border-b-2 mb-1",children:e.jsxs("tr",{children:[e.jsx(q,{text:"No",className:"flex justify-center"}),e.jsx(q,{text:"Tanggal Koordinasi"}),e.jsx(q,{text:"Tanggal Naskah Masuk"}),e.jsx(q,{text:"Uraian Informasi"}),e.jsx(q,{text:"Instruksi"}),e.jsx(q,{text:"Status Tindak Lanjut"}),e.jsx(q,{text:"Status Baca"}),(m==null?void 0:m.group_role)!==4&&e.jsx(q,{text:"Status Berkas"}),e.jsx(q,{text:"Aksi",className:"justify-center min-w-[2rem]"})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{className:"border-b border-slate-300",children:[e.jsx("td",{}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"tanggal_selesai",onSearch:F,placeholder:"Tanggal Disposisi",type:"input",isDate:!0})}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"tanggal_naskah",onSearch:F,placeholder:"Tanggal Naskah Masuk",type:"input"})}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"uraian",onSearch:F,placeholder:"Uraian Informasi",type:"input"})}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"catatan",onSearch:F,placeholder:"Instruksi",type:"input"})}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"status_tindak_lanjut",onSearch:F,placeholder:"Status Tindak Lanjut",type:"select",selectOption:lt,defaultValue:lt.find(u=>u.value==t)})}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"status_baca",onSearch:F,placeholder:"Status Baca",type:"select",selectOption:Ct,defaultValue:Ct.find(u=>u.value==n)})}),(m==null?void 0:m.group_role)!==4&&e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"status_berkas",onSearch:F,placeholder:"Status Berkas",type:"select-input",selectOption:Ws})}),e.jsx("td",{})]}),K?e.jsx("tr",{children:e.jsx("td",{colSpan:9,children:e.jsx(ia,{})})}):e.jsx(e.Fragment,{}),k.length?k.map((u,D)=>e.jsxs("tr",{className:"border-b border-slate-300",children:[e.jsx("td",{className:"px-6 py-6 text-center",children:u.no}),e.jsx("td",{className:" max-w-[9rem] px-6 py-6",children:e.jsx("div",{className:"flex-wrap",children:zs(u.tanggal_disposisi)})}),e.jsx("td",{className:" max-w-[9rem] px-6 py-6",children:e.jsx("div",{className:"flex-wrap",children:zs(u.tanggal_naskah_masuk)})}),e.jsx("td",{className:" max-w-[20rem] px-6 py-6",children:e.jsx("div",{className:"flex-wrap",children:u.uraian})}),e.jsx("td",{className:" max-w-[9rem] px-6 py-6",children:u.instruksi??"-"}),e.jsx("td",{className:" max-w-[9rem] px-6 py-6",children:e.jsx("div",{className:"flex-wrap",children:u.status_tindak_lanjut?e.jsx(be,{badgeContent:"SUDAH",color:"success",container:!0}):e.jsx(be,{badgeContent:"BELUM",color:"warning",container:!0})})}),e.jsx("td",{className:" max-w-[9rem] px-6 py-6",children:e.jsx("div",{className:"flex-wrap",children:u.status_baca?e.jsx(be,{badgeContent:"SUDAH",color:"success",container:!0}):e.jsx(be,{badgeContent:"BELUM",color:"warning",container:!0})})}),(m==null?void 0:m.group_role)!==4&&e.jsx("td",{className:" max-w-[9rem] px-6 py-6",children:e.jsx("div",{className:"flex-wrap",children:u.berkas?`${u.berkas.nomor} - ${u.berkas.nama}`:e.jsx(be,{badgeContent:"TIDAK ADA",color:"secondary",container:!0})})}),e.jsx("td",{children:u.action})]},D)):e.jsx(e.Fragment,{})]})]}),e.jsxs("nav",{className:"flex items-center justify-between p-4","aria-label":"Table navigation",children:[e.jsx("span",{className:"text-sm text-gray-400",children:G.from&&`Menampilkan ${Se(G.from)} sampai ${Se(G.to)} dari ${Se(G.total)} entri`}),e.jsx(xa,{currentPage:b.page,lastPage:L,displayCount:5,handleClick:x})]})]})})]})}),e.jsx(ua,{}),e.jsx(yr,{open:M,onClose:()=>H(!1),berkasForm:O,handleSimpanBerkas:f,setSearchBerkas:C,isSubmit:V})]})},pj=()=>{var Pe,te,ne,pe;const r="Naskah Koordinasi Masuk",[s,n]=a.useState(!1),t=JSON.parse(Le.getItem("users")),[i,l]=a.useState(null),[m,p]=a.useState(!1),[B,K]=a.useState(!1),W=new js,z=new Pr,T=ga(),L=ha(),[$,M]=a.useState(!1),[H,V]=a.useState("koordinasi"),[A,G]=a.useState(!1),[X,O]=a.useState(!1),[I,_]=a.useState(!1),[C,k]=a.useState(!0),[b,y]=a.useState(null),[o,F]=a.useState({id:(Pe=T.state)==null?void 0:Pe.naskah_id,disposisi_id:(te=T.state)==null?void 0:te.disposisi_id,tindak_lanjut_id:(ne=T.state)==null?void 0:ne.tindak_lanjut_id,status:(pe=T.state)==null?void 0:pe.status}),[x,S]=a.useState(-1),[f,R]=a.useState(!1),[u,D]=a.useState(!0),[E,J]=a.useState({id:o.id,disposisi_id:o.disposisi_id,keterangan:"",file:"",jenis:"KOORDINASI SELESAI"}),[P,h]=a.useState({id:o.id,pengguna_id:-1}),d="",j=new URLSearchParams(T.search),g=j.get("naskah_id");a.useEffect(()=>{if(g&&!o.id){const he=Js(g);F({id:Number(he),disposisi_id:j.get("disposisi_id"),tindak_lanjut_id:j.get("tindak_lanjut_id"),status:j.get("status")}),J(oe=>({...oe,id:Number(he),disposisi_id:j.get("disposisi_id")})),h(oe=>({...oe,id:Number(he)}))}},[T.search]),a.useEffect(()=>{o.id&&(n(!0),Ta.loading("Mengambil data Naskah",{toastId:"load-nk"}),re(o.disposisi_id),U.close(),Q(o.id).then(()=>{Ta.update("load-nk",{render:"Data naskah berhasil didapatkan",isLoading:!1,closeButton:!0,autoClose:5e3,type:"success",pauseOnFocusLoss:!1})}))},[o.id,x]);const c=()=>{fe()},v=async he=>{U.fire({title:"Perhatian",text:"Apakah Anda yakin ingin menyelesaikan koordinasi ini?",icon:"warning",showCancelButton:!0,confirmButtonText:"Ya",cancelButtonText:"Batal",customClass:{confirmButton:"button button-error",cancelButton:"button button-info"}}).then(async oe=>{oe.isConfirmed?(D(!1),await z.postPenyelesaian(he).then(je=>{var Ne,Re,sa;U.fire((Ne=je.data)!=null&&Ne.success?"Berhasil":"Gagal",(Re=je.data)==null?void 0:Re.message,(sa=je.data)!=null&&sa.success?"success":"warning"),je.data.success&&(R(!0),L(d+"/penerimaan-naskah-masuk/koordinasi"))}).catch(je=>{var Re,sa;const Ne=Oe(je.response.data.result);U.fire("Gagal",Ne??((sa=(Re=je.response)==null?void 0:Re.data)==null?void 0:sa.message),"error")}).finally(()=>D(!0))):U.close()})},N=()=>{L(d+"/penerimaan-naskah-masuk/koordinasi")},Q=async he=>{if(he!=null||he!=null){const oe={baca:"BACA",disposisi_id:o.disposisi_id};await W.detail(he,oe).then(je=>{var sa,Te,me;y(je);const Re=!(((sa=je==null?void 0:je.berkas_naskah)==null?void 0:sa.berkas)&&((me=(Te=je==null?void 0:je.berkas_naskah)==null?void 0:Te.berkas)==null?void 0:me.status)==="TUTUP")&&(t==null?void 0:t.group_role)==4;_(Re)})}},re=async he=>{(he!=null||he!=null)&&await z.detail(he).then(oe=>{k((oe==null?void 0:oe.status)=="SUDAH SELESAI")})},ye=he=>{he=="self"?L(d+"/pembuatan-naskah-keluar/registrasi-naskah-keluar",{state:{reference:{nomor:b==null?void 0:b.nomor,id:b==null?void 0:b.id,nomor_hal:`${b==null?void 0:b.nomor} - ${b==null?void 0:b.hal}`},naskah_masuk_id:o.id,balas:!0}}):he=="selesai"?p(!0):he!="self"&&L(d+"/penerimaan-naskah-masuk/naskah-dinas-masuk/form",{state:{mode:he,id:o.id,tindak_lanjut_id:o.tindak_lanjut_id,back:`/penerimaan-naskah-masuk/koordinasi/detail${T.search}`}})},xe=()=>e.jsxs(Ls,{anchorEl:i,anchorOrigin:{vertical:"bottom",horizontal:"left"},open:!!i,onClose:()=>l(!1),sx:{mt:2,zIndex:10},children:[e.jsx(Ma,{title:"Saya Balas",onClick:()=>ye("self")}),e.jsx(Ma,{title:"Disposisi",onClick:()=>ye("disposisi")}),e.jsx(Ma,{title:"Koordinasi",onClick:()=>ye("koordinasi")}),e.jsx(Ma,{title:"Arahan",onClick:()=>ye("arahan")})]}),fe=()=>{p(!1)},Ge=()=>{K(!1)},$e=()=>{G(!A),X||O(!0)};return e.jsxs(aa,{children:[e.jsx(la,{}),s&&e.jsxs(e.Fragment,{children:[e.jsx(ie,{pt:6,pb:1,children:e.jsxs("div",{className:"flex justify-between p-3 items-center",children:[e.jsxs(le,{variant:"h5",fontWeight:"medium",children:["Detail ",r]}),e.jsxs("div",{className:"flex flex-col md:flex-row justify-end text-right gap-3",children:[I&&!C&&e.jsxs(e.Fragment,{children:[e.jsx("div",{children:e.jsxs(_e,{variant:"gradient",color:"success",onClick:()=>K(!0),children:[e.jsx(Xs,{size:"1.5em",className:"me-2"}),"Penyelesaian Koordinasi"]})}),e.jsx("div",{children:e.jsxs(ie,{children:[e.jsxs(_e,{variant:"gradient",color:"error",onClick:he=>l(he.currentTarget),children:[e.jsx(nt,{size:"1.5em",className:"me-2"}),"Tindak Lanjut"]}),xe()]})})]}),e.jsxs(_e,{variant:"gradient",color:"secondary",onClick:N,children:[e.jsx(za,{size:"1.5em",className:"me-2"}),"Kembali"]})]})]})}),e.jsx(Sr,{data:b,naskahId:o.id}),e.jsx(ie,{pb:3,children:e.jsxs(Me,{className:"p-5 cursor-pointer",children:[e.jsxs("div",{onClick:()=>M(!$),className:"text-base flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex justify-start",children:[e.jsx(en,{className:"w-6 h-5 me-3"}),e.jsx("span",{children:"Tindak Lanjut"})]}),e.jsx(is,{className:"w-6 h-5 text-gray-500 cursor-pointer"})]}),$&&e.jsx(vr,{naskahId:o==null?void 0:o.id,naskahNomor:b==null?void 0:b.nomor,otherTable:H,setOtherTable:V,refresh:x,setRefresh:S})]})}),e.jsx(ie,{pb:3,children:e.jsxs(Me,{className:"p-5 cursor-pointer",children:[e.jsxs("div",{onClick:()=>$e(),className:"text-base flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex justify-start",children:[e.jsx(_r,{className:"w-6 h-5 me-3"}),e.jsx("span",{children:"Histori Naskah"})]}),e.jsx(is,{className:"w-6 h-5 text-gray-500 cursor-pointer"})]}),e.jsx("div",{className:A?"inline":"hidden",children:(o==null?void 0:o.id)&&X&&e.jsx(Wt,{naskah_id:o.id,refresh:x})})]})}),e.jsx(ua,{}),e.jsxs(Fa,{open:m,onClose:fe,children:[e.jsxs("div",{children:[e.jsxs(_a,{className:"flex items-center gap-2 text-teal-600 ",children:[e.jsx(Wi,{className:"w-8 h-8 me-5"}),e.jsx(le,{children:"Form Dibalaskan Oleh"})]}),e.jsx(ca,{initialValues:P,onSubmit:c,validateOnChange:!0,validationSchema:ll,children:e.jsx(da,{id:"formDibalaskan",className:"text-sm",children:e.jsx("div",{className:"px-4",children:e.jsx(w,{mb:2,children:e.jsx(ce,{name:"pengguna_id",children:({field:he,form:oe,meta:je})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Pengguna",required:!0,error:je.error&&je.touched}),e.jsx(ra,{url:"naskah-dinas/naskah-masuk/nomor-referensi/select",callbackChange:Ne=>{oe.setFieldValue("pengguna",(Ne==null?void 0:Ne.id)??0)},keyValue:["id","nomor_hal"],placeholder:"Pilih Sekretaris / Tata Usaha",className:"text-sm",menuPortalTarget:null,isMulti:!1,optionParam:{user_id:t==null?void 0:t.id},targetService:"nm"}),e.jsx(ue,{text:je.error,error:je.error&&je.touched})]})})})})})})]}),e.jsx(ya,{children:e.jsxs(e.Fragment,{children:[e.jsx(_e,{color:"success",type:"submit",variant:"gradient",form:"formDibalaskan",children:"Ya, Selesai"}),e.jsx(_e,{color:"error",variant:"gradient",onClick:()=>p(!1),children:"Tutup"})]})})]}),e.jsxs(ys,{open:B,onClose:Ge,fullWidth:!0,maxWidth:"xl",children:[e.jsxs("div",{className:"p-3",children:[e.jsxs(_a,{className:"flex items-center gap-4 text-teal-600",children:[e.jsx(Xs,{className:"w-8 h-8"}),e.jsx(le,{children:"Form Penyelesaian"})]}),e.jsx(ca,{initialValues:E,onSubmit:v,validateOnChange:!0,validationSchema:il,enableReinitialize:!0,children:e.jsx(da,{id:"formPenyelesaian",className:"text-sm",children:e.jsxs("div",{className:"px-4",children:[e.jsx(w,{mb:2,children:e.jsx(ce,{name:"keterangan",children:({field:he,meta:oe})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Keterangan",required:!0,error:oe.error&&oe.touched}),e.jsx(Ka,{...he,rows:5,placeHolder:"Masukkan Keterangan Penyelesaian...",error:oe.error&&oe.touched}),e.jsx(ue,{text:oe.error,error:oe.error&&oe.touched})]})})}),e.jsx(w,{mb:2,children:e.jsx(ce,{name:"file",children:({field:he,form:oe,meta:je})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Lampiran",error:je.error&&je.touched}),e.jsx(at,{onFileSelected:Ne=>{oe.setFieldValue("file",Ne??"")},isReset:f,descBox:"Untuk menambahkan File, seret dan lepas file tersebut ke sini, atau klik untuk memilih file."}),e.jsx(ue,{text:je.error,error:je.error&&je.touched})]})})}),e.jsxs("p",{children:["Penyelesaian hanya bisa dilakukan ",e.jsx("u",{children:"1 kali"})," maka Anda tidak dapat"," ",e.jsx("b",{children:"mengedit"})," maupun ",e.jsx("b",{children:"menghapus"})," kembali"]})]})})})]}),e.jsx(ya,{children:e.jsxs(e.Fragment,{children:[e.jsx(Je,{submit:u,color:"success",formId:"formPenyelesaian",text:"Simpan"}),e.jsx(_e,{color:"error",variant:"gradient",onClick:Ge,children:"Batal"})]})})]})]})]})},gj=()=>{const r="Naskah Koordinasi Keluar",s=JSON.parse(Le.getItem("users")),[n,t]=a.useState(!1);a.useEffect(()=>{t(ge(r,"is_read",!0))},[]);const i=new ei;ha();const[l,m]=a.useState(!1),[p,B]=a.useState(null),[K,W]=a.useState({total:0,from:1,to:1}),[z,T]=a.useState({page:1,rows:10,sortField:"",sortOrder:null,role_id:s==null?void 0:s.role,group_role:s==null?void 0:s.group_role,user_id:s==null?void 0:s.id,organisasi_id:s==null?void 0:s.organisasi_id,public_organisasi_id:s==null?void 0:s.public_organisasi_id,jenis:"KOORDINASI",filters:{nomor:{value:""},hal:{value:""},kepada:{value:""},catatan:{value:""}}}),[L,$]=a.useState(null);let M=[];p==null?M=[]:M=p.map((O,I)=>{var _,C,k,b,y,o,F,x;return{no:I+K.from,id:O.id,tanggal_disposisi:(_=O.disposisi[0])==null?void 0:_.created_at,batas_waktu:(C=O.disposisi[0])==null?void 0:C.tanggal_selesai,nomor:(k=O.naskah_masuk)==null?void 0:k.nomor,hal:(b=O.naskah_masuk)==null?void 0:b.hal,uraian:(y=O.naskah_masuk)==null?void 0:y.uraian,instruksi:(o=O.disposisi[0])==null?void 0:o.disposisi_instruksi,intruksi_tambahan:O.catatan,disposisi:O.disposisi,created_at:O.created_at,lampiran:(F=O==null?void 0:O.histori_naskah)==null?void 0:F.histori_lampiran,action:e.jsx("div",{className:"flex items-center justify-center gap-3 w-full",children:e.jsx(va,{to:`/penerimaan-naskah-masuk/naskah-dinas-masuk/detail?id=${Ps((x=O.naskah_masuk)==null?void 0:x.id)}`,state:{from:window.location.pathname},children:e.jsx(Oa,{size:"1.5em",color:"#17c1e8",className:"cursor-pointer",title:"View"})})})}}),a.useEffect(()=>{H()},[z]);const H=async(O=!1)=>{O&&(z.page=1),m(!0),await i.getLogPaging(z).then(I=>{let _=I.data.result;_.data&&($(_.last_page),B(_.data),m(!1)),m(!1),W({...K,to:_.to,from:_.from,total:_.total})}).catch(I=>{m(!1),W({...K,to:0,from:!1,total:0})})},V=Da((O,I,_=null)=>{if(_){let k=_.target;for(;k&&k.tagName!=="TD";)k=k.parentNode;if(k&&k.tagName==="TD"){const b=k.querySelector(".clear-input"),y=k.querySelector("input");I?b.classList.remove("hidden"):(b.classList.add("hidden"),y.value="")}}let C={...z};C.filters[O].value=I,C.page=1,T(C)},600),A=O=>{let I={...z};I.page=O,T(I),window.scrollTo({top:0,behavior:"smooth"})},G=O=>{let I={...z};I.rows=O,I.page=1,T(I)},X=O=>{let I={...z};I.sortField=O,z.sortField!=O?z.sortOrder==""&&(I.sortOrder=1):z.sortOrder==1?I.sortOrder=-1:(I.sortOrder="",I.sortField=""),I.page=1,T(I)};return e.jsxs(aa,{children:[e.jsx(la,{}),n&&e.jsxs(e.Fragment,{children:[e.jsx(ie,{pt:6,pb:3,children:e.jsxs(Me,{children:[e.jsx(ie,{px:3,pt:3,lineHeight:1,children:e.jsx(w,{container:!0,direction:"row",justifyContent:"space-between",alignItems:"center",children:e.jsx(w,{item:!0,children:e.jsx(le,{variant:"h5",fontWeight:"medium",children:"Daftar Log Naskah Koordinasi"})})})}),e.jsx("div",{className:"overflow-auto",children:e.jsxs("div",{className:"table p-10 min-w-full",children:[e.jsx("div",{className:"flex items-center justify-end mb-1",children:e.jsx(pa,{config:z,handleClick:G})}),e.jsxs("table",{className:"w-full text-sm text-left !text-gray-700 dark:text-gray-400 table-bordered",children:[e.jsx("thead",{className:"text-xs text-gray-500 uppercase border-b-2 mb-1",children:e.jsxs("tr",{children:[e.jsx(q,{text:"No",config:z}),e.jsx(q,{text:"Nomor Naskah"}),e.jsx(q,{text:"Hal"}),e.jsx(q,{text:"Kepada"}),e.jsx(q,{text:"Pesan",sortField:"catatan",sortOrder:z.sortOrder,config:z,handleClick:()=>X("catatan")}),e.jsx(q,{text:"Lampiran",className:"flex justify-center"}),e.jsx(q,{text:"Tanggal Koordinasi"}),e.jsx(q,{text:"Batas Waktu"}),e.jsx(q,{text:"Aksi",className:"flex justify-center min-w-[2rem]"})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{className:"border-b border-slate-300",children:[e.jsx("td",{}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"nomor",onSearch:V,placeholder:"Nomor Naskah",type:"input"})}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"hal",onSearch:V,placeholder:"Hal",type:"input"})}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"kepada",onSearch:V,placeholder:"Kepada",type:"input"})}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"catatan",onSearch:V,placeholder:"Instruksi",type:"input"})}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2"}),e.jsx("td",{}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2"}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2"}),e.jsx("td",{})]}),l?e.jsx("tr",{className:"border-b border-slate-300",children:e.jsx("td",{colSpan:9,children:e.jsx(ia,{})})}):e.jsx(e.Fragment,{}),M.length?M.map((O,I)=>{var _,C;return e.jsxs("tr",{className:"border-b border-slate-300 align-top",children:[e.jsx("td",{className:"max-w-[10rem] flex-wrap px-6 py-6",children:O.no}),e.jsx("td",{className:"max-w-[10rem] flex-wrap px-6 py-6",children:O.nomor}),e.jsx("td",{className:"max-w-[10rem] flex-wrap px-6 py-6",children:O.hal}),e.jsx("td",{className:"max-w-[10rem] flex-wrap px-6 py-6",children:(_=O.disposisi)!=null&&_.length?O.disposisi.map((k,b)=>e.jsx("div",{className:"mb-1",children:e.jsxs(e.Fragment,{children:["> "+(k==null?void 0:k.user_nama)+" - "+(k==null?void 0:k.jabatan_nama)+" - "+(k==null?void 0:k.organisasi_nama),e.jsx("br",{})]})},k==null?void 0:k.id)):e.jsx(be,{badgeContent:"TIDAK ADA",color:"secondary",container:!0})}),e.jsx("td",{className:"max-w-[10rem] flex-wrap px-6 py-6",children:O.intruksi_tambahan?O.intruksi_tambahan:e.jsx(be,{badgeContent:"TIDAK ADA",color:"secondary",container:!0})}),e.jsx("td",{className:"max-w-[10rem] flex-wrap px-2 py-6",children:((C=O==null?void 0:O.lampiran)==null?void 0:C.length)>0?e.jsx("ul",{children:O.lampiran.map(k=>e.jsx("li",{onClick:()=>Wa(k.file,k.file_path??"lampiran"),className:"hover:underline cursor-pointer break-all mb-2 list-none",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-6",children:e.jsx(Ji,{className:"text-red-600 h-6 w-6 cursor-pointer"})}),e.jsx("p",{className:"truncate",children:k.nama})]})},k.id))}):e.jsx("div",{className:"text-center",children:e.jsx(be,{badgeContent:"TIDAK ADA",color:"secondary",container:!0})})}),e.jsx("td",{className:" max-w-[9rem] px-6 py-6",children:e.jsx("div",{className:"flex-wrap",children:Ns(O.tanggal_disposisi)})}),e.jsx("td",{className:" max-w-[9rem] px-6 py-6",children:e.jsx("div",{className:"flex-wrap",children:Ns(O.batas_waktu)})}),e.jsxs("td",{className:"px-1 py-6 text-right w-[2rem]",children:[" ",O.action," "]})]},I)}):e.jsx(e.Fragment,{})]})]}),e.jsxs("nav",{className:"flex items-center justify-between p-4","aria-label":"Table navigation",children:[e.jsx("span",{className:"text-sm text-gray-400",children:K.from&&`Menampilkan ${Se(K.from)} sampai ${Se(K.to)} dari ${Se(K.total)} entri`}),e.jsx(xa,{currentPage:z.page,lastPage:L,displayCount:5,handleClick:A})]})]})})]})}),e.jsx(ua,{})]})]})},fj=()=>{const r="Arahan Keluar",s=JSON.parse(Le.getItem("users")),[n,t]=a.useState(!1);a.useEffect(()=>{t(ge(r,"is_read",!0))},[]);const i=new ei;ha();const[l,m]=a.useState(!1),[p,B]=a.useState(null),[K,W]=a.useState({total:0,from:1,to:1}),[z,T]=a.useState({page:1,rows:10,sortField:"",sortOrder:null,role_id:s==null?void 0:s.role,group_role:s==null?void 0:s.group_role,user_id:s==null?void 0:s.id,organisasi_id:s==null?void 0:s.organisasi_id,public_organisasi_id:s==null?void 0:s.public_organisasi_id,jenis:"ARAHAN",filters:{nomor:{value:""},hal:{value:""},kepada:{value:""},catatan:{value:""}}}),[L,$]=a.useState(null);let M=[];p==null?M=[]:M=p.map((O,I)=>{var _,C,k,b,y,o,F,x;return{no:I+K.from,id:O.id,tanggal_disposisi:(_=O.disposisi[0])==null?void 0:_.created_at,batas_waktu:(C=O.disposisi[0])==null?void 0:C.tanggal_selesai,nomor:(k=O.naskah_masuk)==null?void 0:k.nomor,hal:(b=O.naskah_masuk)==null?void 0:b.hal,uraian:(y=O.naskah_masuk)==null?void 0:y.uraian,instruksi:(o=O.disposisi[0])==null?void 0:o.disposisi_instruksi,intruksi_tambahan:O.catatan,disposisi:O.disposisi,lampiran:(F=O==null?void 0:O.histori_naskah)==null?void 0:F.histori_lampiran,action:e.jsx("div",{className:"flex items-center justify-center gap-3 w-full",children:e.jsx(va,{to:`/penerimaan-naskah-masuk/naskah-dinas-masuk/detail?id=${Ps((x=O.naskah_masuk)==null?void 0:x.id)}`,state:{from:window.location.pathname},children:e.jsx(Oa,{size:"1.5em",color:"#17c1e8",className:"cursor-pointer",title:"View"})})})}}),a.useEffect(()=>{H()},[z]);const H=async(O=!1)=>{O&&(z.page=1),m(!0),await i.getLogPaging(z).then(I=>{let _=I.data.result;_.data&&($(_.last_page),B(_.data),m(!1)),m(!1),W({...K,to:_.to,from:_.from,total:_.total})}).catch(I=>{m(!1),W({...K,to:0,from:!1,total:0})})},V=Da((O,I,_=null)=>{if(_){let k=_.target;for(;k&&k.tagName!=="TD";)k=k.parentNode;if(k&&k.tagName==="TD"){const b=k.querySelector(".clear-input"),y=k.querySelector("input");I?b.classList.remove("hidden"):(b.classList.add("hidden"),y.value="")}}let C={...z};C.filters[O].value=I,C.page=1,T(C)},600),A=O=>{let I={...z};I.page=O,T(I),window.scrollTo({top:0,behavior:"smooth"})},G=O=>{let I={...z};I.rows=O,I.page=1,T(I)},X=O=>{let I={...z};I.sortField=O,z.sortField!=O?z.sortOrder==""&&(I.sortOrder=1):z.sortOrder==1?I.sortOrder=-1:(I.sortOrder="",I.sortField=""),I.page=1,T(I)};return e.jsxs(aa,{children:[e.jsx(la,{}),n&&e.jsxs(e.Fragment,{children:[e.jsx(ie,{pt:6,pb:3,children:e.jsxs(Me,{children:[e.jsx(ie,{px:3,pt:3,lineHeight:1,children:e.jsx(w,{container:!0,direction:"row",justifyContent:"space-between",alignItems:"center",children:e.jsx(w,{item:!0,children:e.jsx(le,{variant:"h5",fontWeight:"medium",children:"Daftar Log Naskah Arahan"})})})}),e.jsx("div",{className:"overflow-auto",children:e.jsxs("div",{className:"table p-10 min-w-full",children:[e.jsx("div",{className:"flex items-center justify-end mb-1",children:e.jsx(pa,{config:z,handleClick:G})}),e.jsxs("table",{className:"w-full text-sm text-left !text-gray-700 dark:text-gray-400 table-bordered",children:[e.jsx("thead",{className:"text-xs text-gray-500 uppercase border-b-2 mb-1",children:e.jsxs("tr",{children:[e.jsx(q,{text:"No",config:z}),e.jsx(q,{text:"Nomor Naskah"}),e.jsx(q,{text:"Hal"}),e.jsx(q,{text:"Kepada"}),e.jsx(q,{text:"Pesan",sortField:"catatan",sortOrder:z.sortOrder,config:z,handleClick:()=>X("catatan")}),e.jsx(q,{text:"Lampiran",className:"flex justify-center"}),e.jsx(q,{text:"Tanggal Arahan"}),e.jsx(q,{text:"Batas Waktu"}),e.jsx(q,{text:"Aksi",className:"flex justify-center min-w-[2rem]"})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{className:"border-b border-slate-300",children:[e.jsx("td",{}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"nomor",onSearch:V,placeholder:"Nomor Naskah",type:"input"})}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"hal",onSearch:V,placeholder:"Hal",type:"input"})}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"kepada",onSearch:V,placeholder:"Kepada",type:"input"})}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"catatan",onSearch:V,placeholder:"Instruksi",type:"input"})}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2"}),e.jsx("td",{}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2"}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2"}),e.jsx("td",{})]}),l?e.jsx("tr",{className:"border-b border-slate-300",children:e.jsx("td",{colSpan:9,children:e.jsx(ia,{})})}):e.jsx(e.Fragment,{}),M.length?M.map((O,I)=>{var _,C;return e.jsxs("tr",{className:"border-b border-slate-300 align-top",children:[e.jsx("td",{className:"max-w-[10rem] flex-wrap px-6 py-6",children:O.no}),e.jsx("td",{className:"max-w-[10rem] flex-wrap px-6 py-6",children:O.nomor}),e.jsx("td",{className:"max-w-[10rem] flex-wrap px-6 py-6",children:O.hal}),e.jsx("td",{className:"max-w-[10rem] flex-wrap px-6 py-6",children:(_=O.disposisi)!=null&&_.length?O.disposisi.map((k,b)=>e.jsx("div",{className:"mb-1",children:e.jsxs(e.Fragment,{children:["> "+(k==null?void 0:k.user_nama)+" - "+(k==null?void 0:k.jabatan_nama)+" - "+(k==null?void 0:k.organisasi_nama),e.jsx("br",{})]})},k==null?void 0:k.id)):e.jsx(be,{badgeContent:"TIDAK ADA",color:"secondary",container:!0})}),e.jsx("td",{className:"max-w-[10rem] flex-wrap px-6 py-6",children:O.intruksi_tambahan?O.intruksi_tambahan:e.jsx(be,{badgeContent:"TIDAK ADA",color:"secondary",container:!0})}),e.jsx("td",{className:"max-w-[10rem] flex-wrap px-2 py-6",children:((C=O==null?void 0:O.lampiran)==null?void 0:C.length)>0?e.jsx("ul",{children:O.lampiran.map(k=>e.jsx("li",{onClick:()=>Wa(k.file,k.file_path??"lampiran"),className:"hover:underline cursor-pointer break-all mb-2 list-none",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-6",children:e.jsx(Ji,{className:"text-red-600 h-6 w-6 cursor-pointer"})}),e.jsx("p",{className:"truncate",children:k.nama})]})},k.id))}):e.jsx("div",{className:"text-center",children:e.jsx(be,{badgeContent:"TIDAK ADA",color:"secondary",container:!0})})}),e.jsx("td",{className:" max-w-[9rem] px-6 py-6",children:e.jsx("div",{className:"flex-wrap",children:Ns(O.tanggal_disposisi)})}),e.jsx("td",{className:" max-w-[9rem] px-6 py-6",children:e.jsx("div",{className:"flex-wrap",children:Ns(O.batas_waktu)})}),e.jsxs("td",{className:"py-6 px-1 text-right w-[2rem]",children:[" ",O.action," "]})]},I)}):e.jsx(e.Fragment,{})]})]}),e.jsxs("nav",{className:"flex items-center justify-between p-4","aria-label":"Table navigation",children:[e.jsx("span",{className:"text-sm text-gray-400",children:K.from&&`Menampilkan ${Se(K.from)} sampai ${Se(K.to)} dari ${Se(K.total)} entri`}),e.jsx(xa,{currentPage:z.page,lastPage:L,displayCount:5,handleClick:A})]})]})})]})}),e.jsx(ua,{})]})]})},jj=()=>{const r="Naskah Disposisi Keluar",s=JSON.parse(Le.getItem("users")),[n,t]=a.useState(!1);a.useEffect(()=>{t(ge(r,"is_read",!0))},[]);const i=new ei;ha();const[l,m]=a.useState(!1),[p,B]=a.useState(null),[K,W]=a.useState({total:0,from:1,to:1}),[z,T]=a.useState({page:1,rows:10,sortField:"",sortOrder:null,role_id:s==null?void 0:s.role,group_role:s==null?void 0:s.group_role,user_id:s==null?void 0:s.id,organisasi_id:s==null?void 0:s.organisasi_id,public_organisasi_id:s==null?void 0:s.public_organisasi_id,jenis:"DISPOSISI",filters:{nomor:{value:""},hal:{value:""},kepada:{value:""},catatan:{value:""},instruksi:{value:""}}}),[L,$]=a.useState(null);let M=[];p==null?M=[]:M=p.map((O,I)=>{var _,C,k,b,y,o,F,x;return{no:I+K.from,id:O.id,tanggal_disposisi:(_=O.disposisi[0])==null?void 0:_.created_at,batas_waktu:(C=O.disposisi[0])==null?void 0:C.tanggal_selesai,nomor:(k=O.naskah_masuk)==null?void 0:k.nomor,hal:(b=O.naskah_masuk)==null?void 0:b.hal,uraian:(y=O.naskah_masuk)==null?void 0:y.uraian,instruksi:(o=O.disposisi[0])==null?void 0:o.disposisi_instruksi,intruksi_tambahan:O.catatan,disposisi:O.disposisi,created_at:O.created_at,lampiran:(F=O==null?void 0:O.histori_naskah)==null?void 0:F.histori_lampiran,action:e.jsx("div",{className:"flex items-center justify-center gap-3 w-full",children:e.jsx(va,{to:`/penerimaan-naskah-masuk/naskah-dinas-masuk/detail?id=${Ps((x=O.naskah_masuk)==null?void 0:x.id)}`,state:{from:window.location.pathname},children:e.jsx(Oa,{size:"1.5em",color:"#17c1e8",className:"cursor-pointer",title:"View"})})})}}),a.useEffect(()=>{H()},[z]);const H=async(O=!1)=>{O&&(z.page=1),m(!0),await i.getLogPaging(z).then(I=>{let _=I.data.result;_.data&&($(_.last_page),B(_.data),m(!1)),m(!1),W({...K,to:_.to,from:_.from,total:_.total})}).catch(I=>{m(!1),W({...K,to:0,from:!1,total:0})})},V=Da((O,I,_=null)=>{if(_){let k=_.target;for(;k&&k.tagName!=="TD";)k=k.parentNode;if(k&&k.tagName==="TD"){const b=k.querySelector(".clear-input"),y=k.querySelector("input");I?b.classList.remove("hidden"):(b.classList.add("hidden"),y.value="")}}let C={...z};C.filters[O].value=I,C.page=1,T(C)},600),A=O=>{let I={...z};I.page=O,T(I),window.scrollTo({top:0,behavior:"smooth"})},G=O=>{let I={...z};I.rows=O,I.page=1,T(I)},X=O=>{let I={...z};I.sortField=O,z.sortField!=O?z.sortOrder==""&&(I.sortOrder=1):z.sortOrder==1?I.sortOrder=-1:(I.sortOrder="",I.sortField=""),I.page=1,T(I)};return e.jsxs(aa,{children:[e.jsx(la,{}),n&&e.jsxs(e.Fragment,{children:[e.jsx(ie,{pt:6,pb:3,children:e.jsxs(Me,{children:[e.jsx(ie,{px:3,pt:3,lineHeight:1,children:e.jsx(w,{container:!0,direction:"row",justifyContent:"space-between",alignItems:"center",children:e.jsx(w,{item:!0,children:e.jsx(le,{variant:"h5",fontWeight:"medium",children:"Daftar Log Naskah Diposisi"})})})}),e.jsx("div",{className:"overflow-auto",children:e.jsxs("div",{className:"table p-10 min-w-full",children:[e.jsx("div",{className:"flex items-center justify-end mb-1",children:e.jsx(pa,{config:z,handleClick:G})}),e.jsxs("table",{className:"w-full text-sm text-left !text-gray-700 dark:text-gray-400 table-bordered",children:[e.jsx("thead",{className:"text-xs text-gray-500 uppercase border-b-2 mb-1",children:e.jsxs("tr",{children:[e.jsx(q,{text:"No",config:z}),e.jsx(q,{text:"Nomor Naskah"}),e.jsx(q,{text:"Hal"}),e.jsx(q,{text:"Kepada"}),e.jsx(q,{text:"Instruksi"}),e.jsx(q,{text:"Instruksi Tambahan",sortField:"catatan",sortOrder:z.sortOrder,config:z,handleClick:()=>X("catatan")}),e.jsx(q,{text:"Lampiran",className:"flex justify-center"}),e.jsx(q,{text:"Tanggal Disposisi"}),e.jsx(q,{text:"Batas Waktu"}),e.jsx(q,{text:"Aksi",className:"flex justify-center min-w-[2rem]"})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{className:"border-b border-slate-300",children:[e.jsx("td",{}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"nomor",onSearch:V,placeholder:"Nomor Naskah",type:"input"})}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"hal",onSearch:V,placeholder:"Hal",type:"input"})}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"kepada",onSearch:V,placeholder:"Kepada",type:"input"})}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"instruksi",onSearch:V,placeholder:"Instruksi",type:"input"})}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"catatan",onSearch:V,placeholder:"Instruksi Tambahan",type:"input"})}),e.jsx("td",{}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2"}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2"}),e.jsx("td",{})]}),l?e.jsx("tr",{className:"border-b border-slate-300",children:e.jsx("td",{colSpan:10,children:e.jsx(ia,{})})}):e.jsx(e.Fragment,{}),M.length?M.map((O,I)=>{var _,C,k;return e.jsxs("tr",{className:"border-b border-slate-300 align-top",children:[e.jsx("td",{className:"max-w-[10rem] flex-wrap px-6 py-6",children:O.no}),e.jsx("td",{className:"max-w-[10rem] flex-wrap px-6 py-6",children:O.nomor}),e.jsx("td",{className:"max-w-[10rem] flex-wrap px-6 py-6",children:O.hal}),e.jsx("td",{className:"max-w-[10rem] flex-wrap px-6 py-6",children:(_=O.disposisi)!=null&&_.length?O.disposisi.map((b,y)=>e.jsx("div",{className:"mb-1",children:e.jsxs(e.Fragment,{children:["> "+(b==null?void 0:b.user_nama)+" - "+(b==null?void 0:b.jabatan_nama)+" - "+(b==null?void 0:b.organisasi_nama),e.jsx("br",{})]})},b==null?void 0:b.id)):e.jsx(be,{badgeContent:"TIDAK ADA",color:"secondary",container:!0})}),e.jsx("td",{className:"px-6 py-6",children:(C=O.instruksi)!=null&&C.length?O.instruksi.map(b=>e.jsxs("div",{className:"flex items-start justify-start space-x-2 text-sm",children:[e.jsx(Yr,{className:"text-lg text-green-500 flex-shrink-0"}),e.jsx("span",{className:"",children:b.intruksi_nama})]},b.id)):e.jsx(be,{badgeContent:"TIDAK ADA",color:"secondary",container:!0})}),e.jsx("td",{className:"max-w-[10rem] flex-wrap px-6 py-6",children:O.intruksi_tambahan?O.intruksi_tambahan:e.jsx(be,{badgeContent:"TIDAK ADA",color:"secondary",container:!0})}),e.jsx("td",{className:"max-w-[10rem] flex-wrap px-2 py-6",children:((k=O==null?void 0:O.lampiran)==null?void 0:k.length)>0?e.jsx("ul",{children:O.lampiran.map(b=>e.jsx("li",{onClick:()=>Wa(b.file,b.file_path??"lampiran"),className:"hover:underline cursor-pointer break-all mb-2 list-none",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-6",children:e.jsx(Ji,{className:"text-red-600 h-6 w-6 cursor-pointer"})}),e.jsx("p",{className:"truncate",children:b.nama})]})},b.id))}):e.jsx("div",{className:"text-center",children:e.jsx(be,{badgeContent:"TIDAK ADA",color:"secondary",container:!0})})}),e.jsx("td",{className:" max-w-[9rem] px-6 py-6",children:e.jsx("div",{className:"flex-wrap",children:Ns(O.tanggal_disposisi)})}),e.jsx("td",{className:" max-w-[9rem] px-6 py-6",children:e.jsx("div",{className:"flex-wrap",children:Ns(O.batas_waktu)})}),e.jsxs("td",{className:"py-6 px-1 text-right w-[2rem]",children:[" ",O.action," "]})]},I)}):e.jsx(e.Fragment,{})]})]}),e.jsxs("nav",{className:"flex items-center justify-between p-4","aria-label":"Table navigation",children:[e.jsx("span",{className:"text-sm text-gray-400",children:K.from&&`Menampilkan ${Se(K.from)} sampai ${Se(K.to)} dari ${Se(K.total)} entri`}),e.jsx(xa,{currentPage:z.page,lastPage:L,displayCount:5,handleClick:A})]})]})})]})}),e.jsx(ua,{})]})]})},_n="https://api.arsip.go.id/user/api/";class kj{constructor(){ae(this,"getPaging",async s=>{const n=Ce.serializeObjectToQueryString(s);return await se.get(`${_n}pengguna/tipe?${n}`).then(l=>l)});ae(this,"post",async s=>await se.post(`${_n}pengguna/tipe`,s).then(i=>i));ae(this,"put",async(s,n)=>await se.put(`${_n}pengguna/tipe/${s}`,n).then(l=>l));ae(this,"delete",async s=>await se.delete(`${_n}pengguna/tipe/${s}`).then(i=>i))}}const bj=()=>{const r="Tipe Pengguna",[s,n]=a.useState(!1);a.useEffect(()=>{n(ge(r,"is_read",!0))},[]);const t=new kj,[i,l]=a.useState(!1),[m,p]=a.useState(null),[B,K]=Ga.useState(!1),[W,z]=a.useState(!1),[T,L]=a.useState("Simpan"),[$,M]=a.useState(""),[H,V]=a.useState(null),[A,G]=a.useState(!0),[X,O]=a.useState({id:0,nama:"",status:null}),[I,_]=a.useState({total:0,from:1,to:1});let C=[];m==null?C=[]:C=m.map(P=>({nama:P.nama,status:P.status,created_at:P.created_at,action:e.jsxs("div",{className:"flex content-start justify-end w-full",children:[ge(r,"is_update")&&e.jsx(Va,{size:"1.5em",color:"#fbcf33",onClick:()=>u(P),className:"me-3 cursor-pointer",title:"Ubah"}),e.jsx(Oa,{size:"1.5em",color:"#17c1e8",onClick:()=>D(P),className:"cursor-pointer",title:"Lihat"}),ge(r,"is_delete")&&e.jsx($a,{size:"1.5em",color:"#e62e2d",onClick:()=>E(P),className:"ms-3 cursor-pointer",title:"Hapus"})]})}));const[k,b]=a.useState({page:1,rows:10,sortField:"",sortOrder:null,search:"",filters:{nama:{value:""},status:{value:""}}});a.useEffect(()=>{y()},[k]);const y=async(P=!1)=>{P&&(k.page=1),l(!0),await t.getPaging(k).then(h=>{let d=h.data.result;d.data&&(V(d.last_page),p(d.data),l(!1)),l(!1),_({...I,to:d.to,from:d.from,total:d.total})}).catch(h=>{l(!1),_({...I,to:0,from:!1,total:0})})},o=Da((P,h,d=null)=>{if(d){let g=d.target;for(;g&&g.tagName!=="TD";)g=g.parentNode;if(g&&g.tagName==="TD"){const c=g.querySelector(".clear-input"),v=g.querySelector("input");h?c.classList.remove("hidden"):(c.classList.add("hidden"),v.value="")}}let j={...k};j.filters[P].value=h,j.page=1,b(j)},600),F=P=>{let h={...k};h.page=P,b(h),window.scrollTo({top:0,behavior:"smooth"})},x=P=>{let h={...k};h.rows=P,h.page=1,b(h)},S=P=>{let h={...k};h.sortField=P,k.sortField!=P?k.sortOrder==""&&(h.sortOrder=1):k.sortOrder==1?h.sortOrder=-1:(h.sortOrder="",h.sortField=""),h.page=1,b(h)},f=P=>{G(!1),P.id!==0?t.put(P.id,P).then(h=>{var d,j,g;U.fire((d=h.data)!=null&&d.success?"Berhasil":"Gagal",(j=h.data)==null?void 0:j.message,(g=h.data)!=null&&g.success?"success":"warning"),h.data.success&&(y(!0),J())}).catch(h=>{var j,g;const d=Oe(h.response.data.result);U.fire("Gagal",d??((g=(j=h.response)==null?void 0:j.data)==null?void 0:g.message),"error")}).finally(()=>G(!0)):t.post(P).then(h=>{var d,j,g;U.fire((d=h.data)!=null&&d.success?"Berhasil":"Gagal",(j=h.data)==null?void 0:j.message,(g=h.data)!=null&&g.success?"success":"warning"),h.data.success&&(y(!0),J())}).catch(h=>{var j,g;const d=Oe(h.response.data.result);U.fire("Gagal",d??((g=(j=h.response)==null?void 0:j.data)==null?void 0:g.message),"error")}).finally(()=>G(!0))},R=P=>{K(!0),O({id:0,nama:"",status:"AKTIF"}),L("Simpan"),M("Tambah"),z(!1)},u=P=>{K(!0),O({id:P.id,nama:P.nama,status:P.status}),L("Perbarui"),M("Ubah"),z(!1)},D=P=>{K(!0),O({id:P.id,nama:P.nama,status:P.status}),M("Lihat"),z(!0)},E=P=>{U.fire({title:"Konfirmasi",text:`Data ${P.nama} akan dihapus ?`,icon:"warning",showCancelButton:!0,confirmButtonText:"Hapus",cancelButtonText:"Batal",customClass:{confirmButton:"button button-error",cancelButton:"button button-info"}}).then(h=>{h.isConfirmed&&(ka(),t.delete(P.id).then(d=>{d.status==200&&y(),U.fire("Berhasil","Data Berhasil Dihapus","success")}).catch(d=>{var g,c;const j=Oe(d.response.data.result);U.fire("Gagal",j??((c=(g=d.response)==null?void 0:g.data)==null?void 0:c.message),"error")}))})},J=()=>{O({id:0,nama:"",status:null}),K(!1)};return e.jsxs(aa,{children:[e.jsx(la,{}),s&&e.jsxs(e.Fragment,{children:[e.jsx(ie,{pt:6,pb:3,children:e.jsxs(Me,{children:[e.jsx(ie,{px:3,pt:3,lineHeight:1,children:e.jsxs(w,{container:!0,direction:"row",justifyContent:"space-between",alignItems:"center",children:[e.jsx(w,{item:!0,children:e.jsxs(le,{variant:"h5",fontWeight:"medium",children:["Daftar ",r]})}),ge(r,"is_create")&&e.jsx(w,{item:!0,children:e.jsxs(_e,{variant:"gradient",color:"info",onClick:R,children:[e.jsx(Ea,{size:"1.5em"}),"Tambah Baru"]})})]})}),e.jsx("div",{className:"overflow-auto",children:e.jsxs("div",{className:"table p-10 min-w-full",children:[e.jsx("div",{className:"flex items-center justify-end mb-1",children:e.jsx(pa,{config:k,handleClick:x})}),e.jsxs("table",{className:"w-full text-sm text-left !text-gray-700 dark:text-gray-400 table-bordered",children:[e.jsx("thead",{className:"text-xs text-gray-500 uppercase border-b-2 mb-1",children:e.jsxs("tr",{children:[e.jsx(q,{text:"Nama Tipe Pengguna",sortField:"nama",sortOrder:k.sortOrder,config:k,handleClick:()=>S("nama")}),e.jsx(q,{text:"Status",sortField:"status",sortOrder:k.sortOrder,config:k,handleClick:()=>S("status")}),e.jsx(q,{text:"Tanggal Dibuat",className:"flex justify-center items-center min-w-[2rem]"}),e.jsx(q,{text:"Aksi",className:"justify-end min-w-[2rem]"})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{className:"border-b border-slate-300",children:[e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"nama",onSearch:o,placeholder:"Nama",type:"input"})}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"status",onSearch:o,placeholder:"Status",type:"status"})}),e.jsx("td",{}),e.jsx("td",{})]}),i?e.jsx("tr",{children:e.jsx("td",{colSpan:3,children:e.jsx(ia,{})})}):e.jsx(e.Fragment,{}),C.length?C.map((P,h)=>e.jsxs("tr",{className:"border-b border-slate-300",children:[e.jsx("td",{className:" max-w-[20rem] px-6 py-6",children:P.nama}),e.jsx("td",{className:"max-w-[20rem] px-6 py-6",children:P.status==="AKTIF"?e.jsx(be,{badgeContent:"Aktif",color:"success",container:!0}):e.jsx(be,{badgeContent:"Non-Aktif",color:"error",container:!0})}),e.jsx("td",{className:"max-w-[20rem] px-6 py-6",children:na(P.created_at)}),e.jsxs("td",{className:"px-1 text-right w-[2rem]",children:[" ",P.action," "]})]},h)):e.jsx(e.Fragment,{})]})]}),e.jsxs("nav",{className:"flex items-center justify-between p-4","aria-label":"Table navigation",children:[e.jsx("span",{className:"text-sm text-gray-400",children:I.from&&`Menampilkan ${Se(I.from)} sampai ${Se(I.to)} dari ${Se(I.total)} entri`}),e.jsx(xa,{currentPage:k.page,lastPage:H,displayCount:5,handleClick:F})]})]})})]})}),e.jsx(ua,{}),e.jsx(Fa,{open:B,onClose:J,children:e.jsxs("div",{children:[e.jsxs(_a,{children:[$," ",r]}),e.jsx(ca,{initialValues:X,onSubmit:f,validateOnChange:!0,validationSchema:cd,children:e.jsx(da,{id:"form",className:"text-sm",children:e.jsxs("div",{className:"p-5",children:[e.jsx(w,{mt:1,children:e.jsxs("div",{className:"p-3",children:[e.jsx("input",{type:"hidden",name:"id",value:X.id}),e.jsx(ce,{name:"nama",children:({field:P,form:h,meta:d})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Nama Tipe Pengguna",required:!0,error:d.error&&d.touched}),e.jsx(Ye,{...P,type:"text",placeholder:"Nama Tipe Pengguna",error:d.error&&d.touched,disabled:W}),e.jsx(ue,{text:d.error,error:d.error&&d.touched})]})})]})}),e.jsx(w,{mt:1,children:e.jsx(Na,{children:e.jsx(ce,{name:"status",children:({field:P,form:h,meta:d})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Status",required:!0,error:d.error&&d.touched}),e.jsxs("div",{className:"space-x-4 flex flex-row items-center",children:[e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{...P,type:"radio",className:"form-radio  w-4 h-4 text-blue-500 focus:ring-2 focus:ring-blue-500",value:"AKTIF",checked:P.value=="AKTIF",disabled:W||$=="Tambah"}),e.jsx("span",{className:"text-gray-700",children:"Aktif"})]}),e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{...P,type:"radio",className:"form-radio  w-4 h-4 text-blue-500 focus:ring-2 focus:ring-blue-500",value:"NON-AKTIF",disabled:W||$=="Tambah",checked:P.value=="NON-AKTIF"}),e.jsx("span",{className:"text-gray-700",children:"Non Aktif"})]})]}),e.jsx(ue,{text:d.error,error:d.error&&d.touched})]})})})})]})})}),e.jsx(ya,{children:e.jsxs(e.Fragment,{children:[!W&&e.jsx(Je,{submit:A,color:"success",formId:"form",text:T}),e.jsx(_e,{color:W?"dark":"error",variant:"gradient",onClick:()=>K(!1),children:W?"Tutup":"Batal"})]})})]})})]})]})},or="https://api.arsip.go.id/user/api/",Oi=Ft.create({headers:{"Content-Type":"multipart/form-data",Accept:"application/json"}});Oi.interceptors.request.use(async r=>{const s=await JSON.parse(Le.getItem("access_token"));return s!==null&&(r.headers.Authorization=`Bearer ${s}`),r});class Nd{constructor(){ae(this,"getPaging",async s=>{const n=Ce.serializeObjectToQueryString(s);return await se.get(`${or}pengguna/user?${n}`).then(l=>l)});ae(this,"post",async s=>await Oi.post(`${or}pengguna/user`,s).then(i=>i));ae(this,"put",async(s,n)=>await Oi.post(`${or}pengguna/user/${s}`,n).then(l=>l));ae(this,"delete",async s=>await se.delete(`${or}pengguna/user/${s}`).then(i=>i));ae(this,"selectAkses",async s=>{const n=Ce.serializeObjectToQueryString(s);return await se.get(`${or}pengguna/role/select?${n}`).then(l=>l)});ae(this,"detailWithRoles",async s=>await se.get(`${or}pengguna/user/detail?id=${s}`).then(i=>i))}}const _j=()=>{const r="Daftar Pengguna",s=ga(),n=new URLSearchParams(s.search).get("status"),[t,i]=a.useState(!1);a.useEffect(()=>{i(ge(r,"is_read",!0))},[]);const l=JSON.parse(Le.getItem("users")),m=new Nd,p=ha(),[B,K]=a.useState(!1),[W,z]=a.useState(null),[T,L]=a.useState(null),[$,M]=a.useState({total:0,from:1,to:1});let H=[];W==null?H=[]:H=W.map(o=>{var F,x,S;return{nama:o.nama,email:o.email,username:o.username,nama_instansi:(F=o.instansi)==null?void 0:F.nama,nama_uk:(x=o.unit_kerja)==null?void 0:x.nama,nama_jabatan:(S=o.jabatan)==null?void 0:S.nama,status:o.status,user_role:o.user_role,created_at:o.created_at,action:e.jsxs("div",{className:"flex flex-row items-center justify-center gap-2 h-full w-full",children:[ge(r,"is_update")&&!((l==null?void 0:l.group_role)==2&&o.id==(l==null?void 0:l.id))&&e.jsx(Va,{size:"1.5em",color:"#fbcf33",onClick:()=>k(o),className:"cursor-pointer",title:"Ubah"}),e.jsx(Oa,{size:"1.5em",color:"#17c1e8",onClick:()=>b(o),className:"cursor-pointer",title:"Lihat"}),ge(r,"is_delete")&&!((l==null?void 0:l.group_role)==2&&o.id==(l==null?void 0:l.id))&&e.jsx($a,{size:"1.5em",color:"#e62e2d",onClick:()=>y(o),className:"cursor-pointer",title:"Hapus"})]})}});const[V,A]=a.useState({page:1,rows:10,sortField:"",sortOrder:null,search:"",filters:{nama:{value:""},email:{value:""},username:{value:""},"instansi.nama":{value:""},"jabatan.nama":{value:""},user_role:{value:""},status:{value:n||""},grouprole:{value:l==null?void 0:l.group_role},organisasi_id:{value:l==null?void 0:l.organisasi_id},public_organisasi_id:{value:l==null?void 0:l.public_organisasi_id}}});a.useEffect(()=>{G()},[V]);const G=async()=>{K(!0),await m.getPaging(V).then(o=>{let F=o.data.result;F.data&&(L(F.last_page),z(F.data),K(!1)),K(!1),M({...$,to:F.to,from:F.from,total:F.total})}).catch(o=>{K(!1),M({...$,to:0,from:!1,total:0})})},X=Da((o,F,x=null)=>{if(x){let f=x.target;for(;f&&f.tagName!=="TD";)f=f.parentNode;if(f&&f.tagName==="TD"){const R=f.querySelector(".clear-input"),u=f.querySelector("input");F?R.classList.remove("hidden"):(R.classList.add("hidden"),u.value="")}}let S={...V};S.filters[o].value=F,S.page=1,A(S)},600),O=o=>{let F={...V};F.page=o,A(F),window.scrollTo({top:0,behavior:"smooth"})},I=o=>{let F={...V};F.rows=o,F.page=1,A(F)},_=o=>{let F={...V};F.sortField=o,V.sortField!=o?V.sortOrder==""&&(F.sortOrder=1):V.sortOrder==1?F.sortOrder=-1:(F.sortOrder="",F.sortField=""),F.page=1,A(F)},C=()=>{p("form",{state:{formode:"Tambah",id:0,nomor_induk:"",nik:"",nama:"",telepon:"",username:"",email:"",password:"",confirmPassword:"",foto:"",check:[],status:"AKTIF",notif_wa:!1,notif_email:!1,role_id:null,organisasi_id:null,public_organisasi_id:(l==null?void 0:l.role_id)>1?l==null?void 0:l.public_organisasi_id:null,grup_jabatan_id:null,tipe_pengguna_id:null,jabatan_id:null,organisasi:null,jabatan:null}})},k=o=>{p("form",{state:{formode:"Ubah",id:o.id,nomor_induk:o.nomor_induk,nik:o.nik,nama:o.nama,telepon:o.telepon,username:o.username,email:o.email,password:"",confirmPassword:"",check:o.check,status:o.status,foto:"",notif_wa:o.notif_wa,notif_email:o.notif_email,role_id:o.role_id,organisasi_id:o.organisasi_id,public_organisasi_id:o.public_organisasi_id,grup_jabatan_id:o.grup_jabatan_id,tipe_pengguna_id:o.tipe_pengguna_id,jabatan_id:o.jabatan_id,organisasi:o.unit_kerja,public_organisasi:o.instansi,jabatan:o.jabatan}})},b=o=>{p("form",{state:{formode:"Lihat",id:o.id,nomor_induk:o.nomor_induk,nik:o.nik,nama:o.nama,telepon:o.telepon,username:o.username,email:o.email,password:"",confirmPassword:"",check:o.check,status:o.status,foto:"",notif_wa:o.notif_wa,notif_email:o.notif_email,role_id:o.role_id,organisasi_id:o.organisasi_id,public_organisasi_id:o.public_organisasi_id,grup_jabatan_id:o.grup_jabatan_id,tipe_pengguna_id:o.tipe_pengguna_id,jabatan_id:o.jabatan_id,organisasi:o.unit_kerja,public_organisasi:o.instansi,jabatan:o.jabatan}})},y=o=>{U.fire({title:"Konfirmasi",text:`Data ${o.nama} akan dihapus ?`,icon:"warning",showCancelButton:!0,confirmButtonText:"Hapus",cancelButtonText:"Batal",customClass:{confirmButton:"button button-error",cancelButton:"button button-info"}}).then(F=>{F.isConfirmed&&(ka(),m.delete(o.id).then(x=>{x.status==200&&G(),U.fire("Berhasil","Data Berhasil Dihapus","success")}).catch(x=>{var f,R;const S=Oe(x.response.data.result);U.fire("Gagal",S??((R=(f=x.response)==null?void 0:f.data)==null?void 0:R.message),"error")}))})};return e.jsxs(aa,{children:[e.jsx(la,{}),t&&e.jsx(ie,{pt:6,pb:3,children:e.jsxs(Me,{children:[e.jsx(ie,{px:3,pt:3,lineHeight:1,children:e.jsxs(w,{container:!0,direction:"row",justifyContent:"space-between",alignItems:"center",children:[e.jsx(w,{item:!0,children:e.jsx(le,{variant:"h5",fontWeight:"medium",children:"Daftar Pengguna"})}),ge(r,"is_create")&&e.jsx(w,{item:!0,children:e.jsxs(_e,{variant:"gradient",color:"info",onClick:C,children:[e.jsx(Ea,{size:"1.5em"}),"Tambah Baru"]})})]})}),e.jsx("div",{className:"overflow-auto",children:e.jsxs("div",{className:"table p-10 min-w-full",children:[e.jsx("div",{className:"flex items-center justify-end mb-1",children:e.jsx(pa,{config:V,handleClick:I})}),e.jsxs("table",{className:"w-full text-sm text-left !text-gray-700 dark:text-gray-400 table-bordered",children:[e.jsx("thead",{className:"text-xs text-gray-500 uppercase border-b-2 mb-1",children:e.jsxs("tr",{children:[e.jsx(q,{text:"Hak Akses"}),e.jsx(q,{text:"Nama Lengkap",sortField:"nama",sortOrder:V.sortOrder,config:V,handleClick:()=>_("users.nama")}),e.jsx(q,{text:"Instansi / Unit Kerja"}),e.jsx(q,{text:"Jabatan"}),e.jsx(q,{text:"Status",sortField:"status",sortOrder:V.sortOrder,config:V,handleClick:()=>_("status")}),e.jsx(q,{text:"Tanggal Dibuat",className:"flex justify-center items-center min-w-[2rem]"}),e.jsx(q,{text:"Aksi",className:"flex justify-center min-w-[2rem]"})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{className:"border-b border-slate-300",children:[e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"user_role",onSearch:X,placeholder:"Hak Akses",type:"input"})}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"nama",onSearch:X,placeholder:"Nama",type:"input"})}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"instansi.nama",onSearch:X,placeholder:"Nama Instansi",type:"input"})}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"jabatan.nama",onSearch:X,placeholder:"Nama Jabatan",type:"input"})}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"status",onSearch:X,placeholder:"Status",type:"status",selectOption:Us,defaultValue:Us.find(o=>o.value==n)})}),e.jsx("td",{}),e.jsx("td",{})]}),B?e.jsx("tr",{children:e.jsx("td",{colSpan:8,children:e.jsx(ia,{})})}):e.jsx(e.Fragment,{}),H.length?H.map((o,F)=>e.jsxs("tr",{className:"border-b border-slate-300",children:[e.jsx("td",{className:"max-w-[9rem] px-6 py-6",children:o.user_role.map((x,S)=>e.jsxs("span",{children:[x.desc_role,S<o.user_role.length-1?", ":""]},S))}),e.jsx("td",{className:" max-w-[9rem] px-6 py-6",children:e.jsx("div",{className:"flex-wrap",children:o.nama})}),e.jsxs("td",{className:" max-w-[9rem] px-6 py-6",children:[o.nama_instansi," ",o.nama_uk&&` / ${o.nama_uk}`," "]}),e.jsx("td",{className:" max-w-[9rem] px-6 py-6",children:o.nama_jabatan}),e.jsx("td",{className:"max-w-[9rem] px-6 py-6",children:o.status==="AKTIF"?e.jsx(be,{badgeContent:"Aktif",color:"success",container:!0}):e.jsx(be,{badgeContent:"Non-Aktif",color:"error",container:!0})}),e.jsx("td",{className:"max-w-[20rem] px-6 py-6",children:na(o.created_at)}),e.jsxs("td",{className:"px-1 text-right w-[2rem]",children:[" ",o.action," "]})]},F)):e.jsx(e.Fragment,{})]})]}),e.jsxs("nav",{className:"flex items-center justify-between p-4","aria-label":"Table navigation",children:[e.jsx("span",{className:"text-sm text-gray-400",children:$.from&&`Menampilkan ${Se($.from)} sampai ${Se($.to)} dari ${Se($.total)} entri`}),e.jsx(xa,{currentPage:V.page,lastPage:T,displayCount:5,handleClick:O})]})]})})]})}),e.jsx(ua,{})]})},wd=/^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#\$%\^&\*])(?=.{8,})/,Mn=/^\d+(\.\d+)?$/,Sd=/^[a-zA-Z0-9.]*$/,yj=fa().shape({nomor_induk:ze().matches(Sd,{message:"NIP hanya dapat berupa huruf, angka dan titik"}).required("Nomor Induk Pegawai harus diisi"),nik:ze().matches(Mn,{message:"NIK harus berupa angka"}).required("NIK harus diisi"),nama:ze().required("Nama Lengkap harus diisi"),telepon:ze().matches(Mn,{message:"Nomor Seluler harus berupa angka"}).required("Nomor Seluler harus diisi"),username:ze().required("Nama Pengguna harus diisi"),email:ze().email("Email tidak valid").required("Email harus diisi"),password:ze().required("Kata Sandi Wajib Diisi").matches(wd,{message:"Password Lemah"}),confirmPassword:ze().required("Konfirmasi kata sandi").oneOf([Hn("password")],"Password tidak sama"),role_id:vs().min(1,"Hak Akses harus dipilih").required("Hak Akses wajib dipilih"),organisasi_id:wa().required("Instansi harus dipilih"),jabatan_id:wa().required("Jabatan harus diisi"),grup_jabatan_id:wa().required("Grup Jabatan harus dipilih"),tipe_pengguna_id:wa().required("Tipe Pengguna harus dipilih")}),Nj=fa().shape({nomor_induk:ze().matches(Sd,{message:"NIP hanya dapat berupa huruf, angka dan titik"}).required("Nomor Induk Pegawai harus diisi"),nik:ze().matches(Mn,{message:"NIK harus berupa angka"}).required("NIK harus diisi"),nama:ze().required("Nama Lengkap harus diisi"),telepon:ze().matches(Mn,{message:"Nomor Seluler harus berupa angka"}).required("Nomor Seluler harus diisi"),username:ze().required("Nama Pengguna harus diisi"),email:ze().email("Email tidak valid").required("Email harus diisi"),password:ze().matches(wd,{message:"Password Lemah"}),confirmPassword:ze().oneOf([Hn("password")],"Password tidak sama"),role_id:vs().min(1,"Hak Akses harus dipilih").required("Hak Akses wajib dipilih"),organisasi_id:wa().required("Instansi harus dipilih"),jabatan_id:wa().required("Jabatan harus diisi"),grup_jabatan_id:wa().required("Grup Jabatan harus dipilih"),tipe_pengguna_id:wa().required("Tipe Pengguna harus dipilih")}),wj=()=>{const r="Daftar Pengguna",[s,n]=a.useState(!1),t=JSON.parse(Le.getItem("users")),i=new Nd,l=new qa,m=ga(),p=ha(),[B,K]=a.useState(!1),[W,z]=a.useState(null),[T,L]=a.useState(null),[$,M]=a.useState(null),[H,V]=a.useState(!1),[A,G]=a.useState(!1),[X,O]=a.useState(null),[I,_]=a.useState(null),[C,k]=a.useState(null),[b,y]=a.useState(!1),[o,F]=a.useState(null),[x,S]=a.useState(!1),[f,R]=a.useState(null),[u,D]=a.useState(null),[E,J]=a.useState(!1),[P,h]=a.useState(!0),[d,j]=a.useState({formode:m.state.formode,id:m.state.id,nomor_induk:m.state.nomor_induk,nik:m.state.nik,nama:m.state.nama,telepon:m.state.telepon,username:m.state.username,email:m.state.email,password:m.state.password,confirmPassword:m.state.confirmPassword,role_id:m.state.role_id,organisasi_id:m.state.organisasi_id,public_organisasi_id:m.state.public_organisasi_id,jabatan_id:m.state.jabatan_id,grup_jabatan_id:m.state.grup_jabatan_id,tipe_pengguna_id:m.state.tipe_pengguna_id,foto:m.state.foto,send_outside:"NO",check:m.state.check||[],status:m.state.status,notif_wa:m.state.notif_wa,notif_email:m.state.notif_email,organisasi:m.state.organisasi,public_organisasi:m.state.public_organisasi,jabatan:m.state.jabatan}),g="";a.useEffect(()=>{d.formode=="Lihat"?(n(!0),K(!0)):(d.formode=="Tambah"&&n(ge(r,"is_create",!0)),d.formode=="Ubah"&&n(ge(r,"is_update",!0))),d.formode=="Tambah"?((t==null?void 0:t.group_role)>1&&(d.public_organisasi_id=t==null?void 0:t.public_organisasi_id),(t==null?void 0:t.group_role)!=2&&re(),S(!0)):(U.showLoading(),$e().then(()=>{S(!0)}),L(m.state.public_organisasi),z(m.state.organisasi),M(m.state.jabatan),ye(),xe())},[d.formode]),a.useEffect(()=>{I&&Q(d.formode).then(()=>U.close())},[I]);const c=Pe=>{h(!1),Pe.id!==0?i.post(Pe).then(te=>{var ne,pe,he;U.fire((ne=te.data)!=null&&ne.success?"Berhasil":"Gagal",(pe=te.data)==null?void 0:pe.message,(he=te.data)!=null&&he.success?"success":"warning"),te.data.success&&v()}).catch(te=>{var pe,he;const ne=Oe(te.response.data.result);U.fire("Gagal",ne??((he=(pe=te.response)==null?void 0:pe.data)==null?void 0:he.message),"error")}).finally(()=>h(!0)):i.post(Pe).then(te=>{var ne,pe,he;U.fire((ne=te.data)!=null&&ne.success?"Berhasil":"Gagal",(pe=te.data)==null?void 0:pe.message,(he=te.data)!=null&&he.success?"success":"warning"),te.data.success&&v()}).catch(te=>{var pe,he;const ne=Oe(te.response.data.result);U.fire("Gagal",ne??((he=(pe=te.response)==null?void 0:pe.data)==null?void 0:he.message),"error")}).finally(()=>h(!0))},v=()=>{p(g+"/pengguna/daftar-pengguna")},N=async(Pe,te=!1)=>{O(Pe);const ne=[];y(!1),Pe.map(pe=>{var he;if(pe.flag_remark){const oe=(he=I==null?void 0:I.user_role)==null?void 0:he.filter(je=>je.send_outside=="YES").length;ne.push({id:pe.id,label:pe.flag_remark,default:oe}),te&&Ge(pe.id,oe)}}),(t==null?void 0:t.group_role)>1&&ne.length>0&&(k(ne),y(!0),U.close())},Q=async Pe=>{Pe!="Tambah"&&await i.selectAkses({"select-target":"role-pengguna-selected",search:"",iduser:d.id}).then(te=>{let ne=te.data.result;ne&&(j(pe=>({...pe,role_id:ne})),N(ne,!0))})},re=async()=>{},ye=async()=>{d.grup_jabatan_id&&await l.detail("pengguna/grupjabatan",d.grup_jabatan_id).then(Pe=>{R(Pe)})},xe=async()=>{d.tipe_pengguna_id&&await l.detail("pengguna/tipe",d.tipe_pengguna_id).then(Pe=>{D(Pe)})},fe=(Pe,te,ne)=>{const{name:pe,checked:he}=Pe.target;te.setFieldValue("check",{...te.values.check,[pe]:he?"YES":"NO"})},Ge=(Pe,te)=>{j(ne=>({...ne,check:{...ne.check,[`send_outside_${Pe}`]:te?"YES":"NO"}}))},$e=async()=>{await i.detailWithRoles(d.id).then(Pe=>{_(Pe.data.result),Pe.data.result.foto&&Hs(Pe.data.result.foto,"user-profile").then(te=>{F(te)})})};return e.jsxs(aa,{children:[e.jsx(la,{}),s&&e.jsxs(e.Fragment,{children:[e.jsx(ie,{pt:6,pb:3,children:e.jsxs(Me,{children:[e.jsx(ie,{px:3,pt:3,lineHeight:1,children:e.jsxs(w,{container:!0,direction:"row",justifyContent:"space-between",alignItems:"center",children:[e.jsx(w,{item:!0,children:e.jsxs(le,{variant:"h5",fontWeight:"medium",children:[d.formode," Pengguna"]})}),e.jsx(w,{item:!0,children:e.jsxs(_e,{variant:"gradient",color:"secondary",onClick:v,children:[e.jsx(za,{size:"1.5em",className:"me-2"}),d.formode!="Lihat"?"Batal":"Kembali"]})})]})}),e.jsx(ca,{initialValues:d,onSubmit:c,validateOnChange:!0,validationSchema:d.formode=="Tambah"?yj:Nj,enableReinitialize:!0,children:e.jsxs(da,{id:"form",encType:"multipart/form-data",children:[e.jsx(w,{mt:2,children:e.jsxs("div",{className:"p-6 grid grid-cols-12 mb-10 gap-5 lg:mb-0",children:[e.jsxs("div",{className:"col-span-12 md:col-span-6 ",children:[e.jsxs(w,{children:[e.jsx("input",{type:"hidden",name:"id",value:d.id}),e.jsx(ce,{name:"nomor_induk",children:({field:Pe,form:te,meta:ne})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Nomor Induk Pegawai",required:!0,error:ne.error&&ne.touched}),e.jsx(Ye,{...Pe,type:"text",placeholder:"Nomor Induk Pegawai",error:ne.error&&ne.touched,disabled:B}),e.jsx(ue,{text:ne.error,error:ne.error&&ne.touched})]})})]}),e.jsx(w,{mt:3,children:e.jsx(ce,{name:"nik",children:({field:Pe,form:te,meta:ne})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"NIK",required:!0,error:ne.error&&ne.touched}),e.jsx(Ye,{...Pe,type:"tel",placeholder:"NIK",error:ne.error&&ne.touched,disabled:B}),e.jsx(ue,{text:ne.error,error:ne.error&&ne.touched})]})})}),e.jsx(w,{mt:3,children:e.jsx(ce,{name:"nama",children:({field:Pe,form:te,meta:ne})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Nama Lengkap",required:!0,error:ne.error&&ne.touched}),e.jsx(Ye,{...Pe,type:"text",placeholder:"Nama Lengkap",error:ne.error&&ne.touched,disabled:B}),e.jsx(ue,{text:ne.error,error:ne.error&&ne.touched})]})})}),e.jsx(w,{mt:3,children:e.jsx(ce,{name:"telepon",children:({field:Pe,form:te,meta:ne})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Nomor Seluler",required:!0,error:ne.error&&ne.touched}),e.jsx(Ye,{...Pe,type:"tel",placeholder:"Nomor Seluler",error:ne.error&&ne.touched,disabled:B}),e.jsx(ue,{text:ne.error,error:ne.error&&ne.touched})]})})}),e.jsx(w,{mt:3,children:e.jsx(ce,{name:"username",children:({field:Pe,form:te,meta:ne})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Nama Pengguna",required:!0,error:ne.error&&ne.touched}),e.jsx(Ye,{...Pe,type:"text",placeholder:"Nama Pengguna",error:ne.error&&ne.touched,disabled:B}),e.jsx(ue,{text:ne.error,error:ne.error&&ne.touched})]})})}),e.jsx(w,{mt:3,children:e.jsx(ce,{name:"email",children:({field:Pe,form:te,meta:ne})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Email",required:!0,error:ne.error&&ne.touched}),e.jsx(Ye,{...Pe,type:"text",placeholder:"Email",error:ne.error&&ne.touched,disabled:B}),e.jsx(ue,{text:ne.error,error:ne.error&&ne.touched})]})})}),e.jsx(w,{mt:3,children:e.jsx("div",{className:"relative",children:e.jsx(ce,{name:"password",children:({field:Pe,form:te,meta:ne})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Kata Sandi",required:!0,error:ne.error&&ne.touched}),e.jsx(Ye,{...Pe,type:H?"text":"password",placeholder:"Kata Sandi",error:ne.error&&ne.touched,disabled:B}),e.jsxs("div",{className:"absolute top-11 right-0 pr-10 flex items-center text-sm leading-5",children:[e.jsx(xr,{onClick:()=>V(!1),className:`text-xl ${H?"block":"hidden"}`}),e.jsx(pr,{onClick:()=>V(!0),className:`text-xl ${H?"hidden":"block"}`})]}),e.jsxs("div",{className:"text-xs ps-1 text-blue-500 mt-1",children:[d.formode=="Ubah"?e.jsx("div",{className:"",children:"Biarkan kosong apabila tidak ingin mengubah kata sandi"}):"","Kata sandi harus terdiri dari setidaknya satu angka, satu huruf kecil, satu huruf besar, satu simbol dari (!, @, #, $, %, ^, & atau *) dan memiliki panjang minimal 8 karakter."]}),e.jsx(ue,{text:ne.error,error:ne.error&&ne.touched})]})})})}),e.jsx(w,{mt:3,children:e.jsx("div",{className:"relative",children:e.jsx(ce,{name:"confirmPassword",children:({field:Pe,form:te,meta:ne})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Konfirmasi Kata Sandi",required:!0,error:ne.error&&ne.touched}),e.jsx(Ye,{...Pe,type:A?"text":"password",placeholder:"Konfirmasi Kata Sandi",error:ne.error&&ne.touched,disabled:B}),e.jsxs("div",{className:"absolute top-11 right-0 pr-10 flex items-center text-sm leading-5",children:[e.jsx(xr,{onClick:()=>G(!1),className:`text-xl ${A?"block":"hidden"}`}),e.jsx(pr,{onClick:()=>G(!0),className:`text-xl ${A?"hidden":"block"}`})]}),e.jsx(ue,{text:ne.error,error:ne.error&&ne.touched})]})})})})]}),e.jsxs("div",{className:"col-span-12 md:col-span-6 ",children:[e.jsx(w,{children:e.jsx(ce,{name:"role_id",children:({field:Pe,form:te,meta:ne})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Hak Akses",required:!0,error:ne.error&&ne.touched}),e.jsx(ra,{url:"pengguna/role/select",isDisabled:B,callbackChange:pe=>{const he=Array.from(pe,oe=>oe);te.setFieldValue("role_id",he.length?he:null),N(he)},selectedData:X,keyValue:["id","name"],placeholder:"Pilih Hak Akses...",className:"text-sm",menuPortalTarget:null,optionParam:{"select-target":"role-pengguna",group_role:t==null?void 0:t.group_role},isMulti:!0}),e.jsx(ue,{text:ne.error,error:ne.error&&ne.touched})]})})}),e.jsx(w,{mt:3,children:e.jsx(Na,{children:b&&C&&C.length&&e.jsx(e.Fragment,{children:C.map((Pe,te)=>e.jsx("div",{children:e.jsx(ce,{name:`send_outside_${Pe.id}`,children:({field:ne,form:pe,meta:he})=>e.jsxs(e.Fragment,{children:[e.jsxs("label",{className:"flex items-top",children:[e.jsx("input",{...ne,type:"checkbox",className:"form-checkbox h-5 w-5 text-indigo-600 flex-shrink-0",onClick:oe=>{fe(oe,pe,Pe.label)},defaultChecked:Pe.default,disabled:B}),e.jsx("span",{className:"ml-2 text-gray-700 text-sm cursor-pointer select-none",onClick:()=>{pe.setFieldValue(`send_outside_${Pe.id}`,!ne.value)},children:Pe.label})]}),e.jsx(ue,{text:he.error,error:he.error&&he.touched})]})})},`send_outside_${te}`))})})}),(t==null?void 0:t.group_role)<3&&e.jsxs(e.Fragment,{children:[(t==null?void 0:t.group_role)==1&&e.jsx(w,{mt:3,children:e.jsx(ce,{name:"public_organisasi_id",children:({field:Pe,form:te,meta:ne})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Instansi",required:!0,error:ne.error&&ne.touched}),e.jsx(ra,{url:"organisasi/instansi/select2",isDisabled:B,callbackChange:pe=>{te.setFieldValue("public_organisasi_id",(pe==null?void 0:pe.public_id)??""),(t==null?void 0:t.group_role)==1?te.setFieldValue("organisasi_id",pe==null?void 0:pe.id):te.setFieldValue("organisasi_id",null),te.setFieldValue("jabatan_id",null),te.setFieldValue("grup_jabatan_id",null),te.setFieldValue("tipe_pengguna_id",null),M(null),R(null),D(null),z(null)},selectedData:T,keyValue:["id","nama"],placeholder:"Pilih Instansi...",className:"text-sm",menuPortalTarget:null,optionParam:{parent_id:null,role:t==null?void 0:t.role,group_role:t==null?void 0:t.group_role}}),e.jsx(ue,{text:ne.error,error:ne.error&&ne.touched})]})})}),(t==null?void 0:t.group_role)==2&&e.jsx(w,{mt:3,children:e.jsx(ce,{name:"organisasi_id",children:({field:Pe,form:te,meta:ne})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Unit Kerja",required:!0,error:ne.error&&ne.touched}),e.jsx(ra,{url:"organisasi/instansi/select2",isDisabled:B||!te.values.public_organisasi_id,callbackChange:pe=>{te.setFieldValue("organisasi_id",(pe==null?void 0:pe.id)??""),te.setFieldValue("jabatan_id",null),te.setFieldValue("grup_jabatan_id",null),te.setFieldValue("tipe_pengguna_id",null),M(null),R(null),D(null),z(null)},selectedData:W,keyValue:["id","nama"],placeholder:"Pilih Unit Kerja...",className:"text-sm",menuPortalTarget:null,optionParam:{parent_id:te.values.public_organisasi_id,group_role:t==null?void 0:t.group_role}}),e.jsx(ue,{text:ne.error,error:ne.error&&ne.touched})]})})})]}),(t==null?void 0:t.group_role)>2&&e.jsx(w,{mt:3,children:e.jsx(ce,{name:"organisasi_id",children:({field:Pe,form:te,meta:ne})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Unit Kerja",required:!0,error:ne.error&&ne.touched}),e.jsx(ra,{url:"organisasi/instansi/select2",isDisabled:B,callbackChange:pe=>{te.setFieldValue("organisasi_id",(pe==null?void 0:pe.id)??null),te.setFieldValue("public_organisasi_id",(pe==null?void 0:pe.public_id)??null),te.setFieldValue("jabatan_id",null),te.setFieldValue("grup_jabatan_id",null),te.setFieldValue("tipe_pengguna_id",null),z(null),M(null),R(null),D(null)},selectedData:W,keyValue:["id","nama"],placeholder:"Pilih Unit Kerja...",className:"text-sm",menuPortalTarget:null,optionParam:{parent_id:te.values.public_organisasi_id,group_role:t==null?void 0:t.group_role}}),e.jsx(ue,{text:ne.error,error:ne.error&&ne.touched})]})})}),e.jsx(w,{mt:3,children:e.jsx(ce,{name:"jabatan_id",children:({field:Pe,form:te,meta:ne})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Jabatan",required:!0,error:ne.error&&ne.touched}),e.jsx(ra,{url:"pengguna/jabatan/select",isDisabled:B||!te.values.organisasi_id,callbackChange:pe=>{te.setFieldValue("jabatan_id",(pe==null?void 0:pe.id)??""),M(pe)},selectedData:$,keyValue:["id","nama"],placeholder:"Pilih Jabatan...",className:"text-sm",menuPortalTarget:null,optionParam:{organisasi_id:te.values.organisasi_id??"","select-target":"jabatan-pengguna",parent_id:null}}),e.jsx(ue,{text:ne.error,error:ne.error&&ne.touched})]})})}),e.jsx(w,{mt:3,children:e.jsx(ce,{name:"grup_jabatan_id",children:({field:Pe,form:te,meta:ne})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Grup Jabatan",required:!0,error:ne.error&&ne.touched}),e.jsx(ra,{url:"pengguna/grupjabatan/select",isDisabled:B||!te.values.organisasi_id,callbackChange:pe=>{te.setFieldValue("grup_jabatan_id",(pe==null?void 0:pe.id)??""),R(pe)},selectedData:f,keyValue:["id","nama"],placeholder:"Pilih Grup Jabatan...",className:"text-sm",menuPortalTarget:null,optionParam:{organisasi_id:te.values.organisasi_id==null?"":te.values.organisasi_id,"select-target":"select-grup-jabatan"}}),e.jsx(ue,{text:ne.error,error:ne.error&&ne.touched})]})})}),e.jsx(w,{mt:3,children:e.jsx(ce,{name:"tipe_pengguna_id",children:({field:Pe,form:te,meta:ne})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Tipe Pengguna",required:!0,error:ne.error&&ne.touched}),e.jsx(ra,{url:"pengguna/tipe/select",isDisabled:B||!te.values.organisasi_id,callbackChange:pe=>{te.setFieldValue("tipe_pengguna_id",(pe==null?void 0:pe.id)??""),D(pe)},selectedData:u,keyValue:["id","nama"],placeholder:"Pilih Tipe Pengguna...",className:"text-sm",menuPortalTarget:null,optionParam:{organisasi_id:te.values.organisasi_id==null?"":te.values.organisasi_id,"filters[nama][value]":"","filters[status][value]":"AKTIF"}}),e.jsx(ue,{text:ne.error,error:ne.error&&ne.touched})]})})}),x&&e.jsx(w,{mt:3,children:e.jsx(ce,{name:"file",children:({field:Pe,form:te,meta:ne})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Foto",required:!1,error:ne.error&&ne.touched}),e.jsx(Xn,{...Pe,onChange:pe=>{var oe;if(((oe=pe.currentTarget.files[0])==null?void 0:oe.size)>2*1024*1024)return U.fire("Terjadi Kesalahan","Ukuran File Maksimal 2MB","warning"),!0;te.setFieldValue("foto",pe.currentTarget.files[0])},className:"max-h-[20rem] mb-5",accept:".jpg,.jpeg,.png",initialFile:o,disabled:B}),e.jsx("div",{className:"text-xs ps-5 text-blue-500",children:"Format yang didukung: .jpg .jpeg .png"}),e.jsx(ue,{text:ne.error,error:ne.error&&ne.touched})]})})}),e.jsx(w,{mt:1,children:e.jsx(Na,{children:e.jsx(ce,{name:"status",children:({field:Pe,form:te,meta:ne})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Status",required:!0,error:ne.error&&ne.touched}),e.jsxs("div",{className:"space-y-1 flex flex-col items-start",children:[e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{...Pe,type:"radio",className:"form-radio  w-4 h-4 text-blue-500 focus:ring-2 focus:ring-blue-500",value:"AKTIF",checked:Pe.value=="AKTIF",disabled:B||d.formode=="Tambah"}),e.jsx("span",{className:"text-gray-700",children:"Aktif"})]}),e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{...Pe,type:"radio",className:"form-radio  w-4 h-4 text-blue-500 focus:ring-2 focus:ring-blue-500",value:"NON-AKTIF",disabled:B||d.formode=="Tambah",checked:Pe.value=="NON-AKTIF"}),e.jsx("span",{className:"text-gray-700",children:"Non Aktif"})]})]}),e.jsx(ue,{text:ne.error,error:ne.error&&ne.touched})]})})})})]})]})}),e.jsx("div",{className:"p-3 flex justify-end items-center w-full gap-5 mb-10",children:!B&&d.formode!="Lihat"&&e.jsx(Je,{submit:P,color:"success",formId:"form",text:d.formode=="Tambah"?"Simpan":"Ubah"})})]})})]})}),e.jsx(ys,{open:E,children:e.jsx(Na,{children:e.jsx(br,{color:"error"})})})]})]})},yn="https://api.arsip.go.id/user/api/";class vd{constructor(){ae(this,"getPaging",async s=>{const n=Ce.serializeObjectToQueryString(s);return await se.get(`${yn}pengguna/role?${n}`).then(l=>l)});ae(this,"post",async s=>await se.post(`${yn}pengguna/rolemenu`,s).then(i=>i));ae(this,"put",async(s,n)=>await se.put(`${yn}pengguna/rolemenu/${s}`,n).then(l=>l));ae(this,"delete",async s=>await se.delete(`${yn}pengguna/role/${s}`).then(i=>i))}}const Sj=()=>{const r="Hak Akses",[s,n]=a.useState(!1);a.useEffect(()=>{n(ge(r,"is_read",!0))},[]);const t=new vd,i=ha(),[l,m]=a.useState(!1),[p,B]=a.useState(null),[K,W]=a.useState(null),[z,T]=a.useState({total:0,from:1,to:1});let L=[];p==null?L=[]:L=p.map(k=>{var b;return{name:k.name,guard_name:k.guard_name,group_name:(b=k.group_role)==null?void 0:b.nama,status:k.status,group_role:k.group_role,created_at:k.created_at,action:e.jsxs("div",{className:"flex content-start justify-end w-full",children:[ge(r,"is_update")&&e.jsx(Va,{size:"1.5em",color:"#fbcf33",onClick:()=>I(k),className:"me-3 cursor-pointer",title:"Ubah"}),e.jsx(Oa,{size:"1.5em",color:"#17c1e8",onClick:()=>_(k),className:"cursor-pointer",title:"Lihat"}),ge(r,"is_delete")&&e.jsx($a,{size:"1.5em",color:"#e62e2d",onClick:()=>C(k),className:"ms-3 cursor-pointer",title:"Hapus"})]})}});const[$,M]=a.useState({page:1,rows:10,sortField:"",sortOrder:null,search:"",filters:{name:{value:""},guard_name:{value:""},"group_role.nama":{value:""},tag:{value:""},status:{value:""}}});a.useEffect(()=>{H()},[$]);const H=async()=>{m(!0),await t.getPaging($).then(k=>{let b=k.data.result;b.data&&(W(b.last_page),B(b.data),m(!1)),m(!1),T({...z,to:b.to,from:b.from,total:b.total})}).catch(k=>{m(!1),T({...z,to:0,from:!1,total:0})})},V=Da((k,b,y=null)=>{if(y){let F=y.target;for(;F&&F.tagName!=="TD";)F=F.parentNode;if(F&&F.tagName==="TD"){const x=F.querySelector(".clear-input"),S=F.querySelector("input");b?x.classList.remove("hidden"):(x.classList.add("hidden"),S.value="")}}let o={...$};o.filters[k].value=b,o.page=1,M(o)},600),A=k=>{let b={...$};b.page=k,M(b),window.scrollTo({top:0,behavior:"smooth"})},G=k=>{let b={...$};b.rows=k,b.page=1,M(b)},X=k=>{let b={...$};b.sortField=k,$.sortField!=k?$.sortOrder==""&&(b.sortOrder=1):$.sortOrder==1?b.sortOrder=-1:(b.sortOrder="",b.sortField=""),M(b)},O=()=>{i("form",{state:{formode:"Tambah",id:0,name:"",group_role:null,status:"AKTIF",flag_remark:null}})},I=k=>{i("form",{state:{formode:"Ubah",id:k.id,name:k.name,group_role:k.group_role.id,group_role_object:k.group_role,flag_remark:k.flag_remark,status:k.status}})},_=k=>{i("form",{state:{formode:"Lihat",id:k.id,name:k.name,group_role:k.group_role.id,group_role_object:k.group_role,flag_remark:k.flag_remark,status:k.status}})},C=k=>{U.fire({title:"Konfirmasi",text:`Data ${k.name} akan dihapus ?`,icon:"warning",showCancelButton:!0,confirmButtonText:"Hapus",cancelButtonText:"Batal",customClass:{confirmButton:"button button-error",cancelButton:"button button-info"}}).then(b=>{b.isConfirmed&&(ka(),t.delete(k.id).then(y=>{y.status==200&&H(),U.fire("Berhasil","Data Berhasil Dihapus","success")}).catch(y=>{var F,x;const o=Oe(y.response.data.result);U.fire("Gagal",o??((x=(F=y.response)==null?void 0:F.data)==null?void 0:x.message),"error")}))})};return e.jsxs(aa,{children:[e.jsx(la,{}),s&&e.jsxs(e.Fragment,{children:[e.jsx(ie,{pt:6,pb:3,children:e.jsxs(Me,{children:[e.jsx(ie,{px:3,pt:3,lineHeight:1,children:e.jsxs(w,{container:!0,direction:"row",justifyContent:"space-between",alignItems:"center",children:[e.jsx(w,{item:!0,children:e.jsxs(le,{variant:"h5",fontWeight:"medium",children:["Daftar ",r]})}),ge(r,"is_create")&&e.jsx(w,{item:!0,children:e.jsxs(_e,{variant:"gradient",color:"info",onClick:O,children:[e.jsx(Ea,{size:"1.5em"}),"Tambah Baru"]})})]})}),e.jsx("div",{className:"overflow-auto",children:e.jsxs("div",{className:"table p-10 min-w-full",children:[e.jsx("div",{className:"flex items-center justify-end mb-1",children:e.jsx(pa,{config:$,handleClick:G})}),e.jsxs("table",{className:"w-full text-sm text-left !text-gray-700 dark:text-gray-400 table-bordered",children:[e.jsx("thead",{className:"text-xs text-gray-500 uppercase border-b-2 mb-1",children:e.jsxs("tr",{children:[e.jsx(q,{text:"Nama Hak Akses",sortField:"nama",sortOrder:$.sortOrder,config:$,handleClick:()=>X("nama")}),e.jsx(q,{text:"Grup Hak Akses",sortField:"group_role.nama",sortOrder:$.sortOrder,config:$,handleClick:()=>X("nama")}),e.jsx(q,{text:"Status",sortField:"status",sortOrder:$.sortOrder,config:$,handleClick:()=>X("status")}),e.jsx(q,{text:"Tanggal Dibuat",className:"flex justify-center items-center min-w-[2rem]"}),e.jsx(q,{text:"Aksi",className:"flex justify-center min-w-[2rem]"})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{className:"border-b border-slate-300",children:[e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"name",onSearch:V,placeholder:"Nama Hak Akses",type:"input"})}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"group_role.nama",onSearch:V,placeholder:"Grup Hak Akses",type:"input"})}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"status",onSearch:V,placeholder:"Status",type:"status"})}),e.jsx("td",{}),e.jsx("td",{})]}),l?e.jsx("tr",{children:e.jsx("td",{colSpan:4,children:e.jsx(ia,{})})}):e.jsx(e.Fragment,{}),L.length?L.map((k,b)=>e.jsxs("tr",{className:"border-b border-slate-300",children:[e.jsx("td",{className:" max-w-[20rem] px-6 py-6",children:k.name}),e.jsx("td",{className:" max-w-[20rem] px-6 py-6",children:k.group_name}),e.jsx("td",{className:"max-w-[20rem] px-6 py-6",children:k.status==="AKTIF"?e.jsx(be,{badgeContent:"Aktif",color:"success",container:!0}):e.jsx(be,{badgeContent:"Non-Aktif",color:"error",container:!0})}),e.jsx("td",{className:"max-w-[20rem] px-6 py-6",children:na(k.created_at)}),e.jsxs("td",{className:"px-1 text-right w-[2rem]",children:[" ",k.action," "]})]},b)):e.jsx(e.Fragment,{})]})]}),e.jsxs("nav",{className:"flex items-center justify-between p-4","aria-label":"Table navigation",children:[e.jsx("span",{className:"text-sm text-gray-400",children:z.from&&`Menampilkan ${Se(z.from)} sampai ${Se(z.to)} dari ${Se(z.total)} entri`}),e.jsx(xa,{currentPage:$.page,lastPage:K,displayCount:5,handleClick:A})]})]})})]})}),e.jsx(ua,{})]})]})},vj=fa().shape({name:ze().required("Nama Hak Akses Wajib Diisi"),status:ze().required("Status Harus Dipilih")}),Pj=()=>{const r="Hak Akses",[s,n]=a.useState(!1),t=JSON.parse(Le.getItem("users")),i=new sl,l=new vd,m=new qa,p=ga(),B=ha(),[K,W]=a.useState(!1),[z,T]=a.useState(!1),[L,$]=a.useState(null),[M,H]=a.useState(null),[V,A]=a.useState(null),[G,X]=a.useState([]),[O,I]=a.useState(null),[_,C]=a.useState(null),[k,b]=a.useState(!0),[y,o]=a.useState({formode:p.state.formode,id:p.state.id,name:p.state.name,group_role:p.state.group_role,group_role_object:p.state.group_role_object,status:p.state.status,flag_remark:p.state.flag_remark,akses:[]}),[F,x]=a.useState([{name:"Create"},{name:"Read"},{name:"Update"},{name:"Delete"},{name:"Download"}]),S="";a.useEffect(()=>{W(!0),u().then(()=>{R().then(()=>{W(!1)})}),y.formode=="Lihat"?(n(!0),T(!0)):(y.formode=="Tambah"&&n(ge(r,"is_create",!0)),y.formode=="Ubah"&&(n(ge(r,"is_update",!0)),g(y.group_role)),T(!1))},[y.formode]);const f=c=>{b(!1),c.id!==0?l.put(c.id,c).then(v=>{var N,Q,re,ye;W(!1),U.fire((N=v.data)!=null&&N.success?"Berhasil":"Gagal",(Q=v.data)==null?void 0:Q.message,(re=v.data)!=null&&re.success?"success":"warning"),(ye=v.data)!=null&&ye.success&&P().then(()=>{D()})}).catch(v=>{var Q,re;W(!1);const N=Oe(v.response.data.result);U.fire("Gagal",N??((re=(Q=v.response)==null?void 0:Q.data)==null?void 0:re.message),"error")}).finally(()=>b(!0)):l.post(c).then(v=>{var N,Q,re,ye;W(!1),U.fire((N=v.data)!=null&&N.success?"Berhasil":"Gagal",(Q=v.data)==null?void 0:Q.message,(re=v.data)!=null&&re.success?"success":"warning"),(ye=v.data)!=null&&ye.success&&P().then(()=>{D()}).finally(()=>b(!0))}).catch(v=>{var Q,re;W(!1);const N=Oe(v.response.data.result);U.fire("Gagal",N??((re=(Q=v.response)==null?void 0:Q.data)==null?void 0:re.message),"error")})},R=async()=>{await m.select("pengguna/menu",{},null,!1).then(c=>{const v=c.filter(re=>re.path_url==null||re.path_url=="#"),N=c.filter(re=>re.path_url!=null&&re.path_url!="#"),Q=[];v.forEach(re=>{j(N,re.id)||(re.is_header==="N"?(re.childerns=c.filter(ye=>ye.parent_id===re.id),Q.push(re)):re.is_header==="Y"&&(re.childerns=[],Q.push(re)))}),$(Q)})},u=async()=>{const c={role:y.id};await m.select("pengguna/rolemenu",c,null,!1).then(v=>{H(v);const N=v.reduce((Q,re)=>{const ye={};return re.is_create==="Y"&&(ye[`create_${re.id}`]=!0),re.is_read==="Y"&&(ye[`read_${re.id}`]=!0),re.is_update==="Y"&&(ye[`update_${re.id}`]=!0),re.is_delete==="Y"&&(ye[`delete_${re.id}`]=!0),re.is_download==="Y"&&(ye[`download_${re.id}`]=!0),{...Q,...ye}},[]);o({...y,akses:N})})},D=()=>{B(S+"/pengguna/daftar-hak-akses")},E=(c,v,N,Q)=>{if(M&&M.length){let re=M.find(ye=>{if(v==="create")return ye.id===c&&ye.is_create==="Y";if(v==="read")return ye.id===c&&ye.is_read==="Y";if(v==="update")return ye.id===c&&ye.is_update==="Y";if(v==="delete")return ye.id===c&&ye.is_delete==="Y";if(v==="download")return ye.id===c&&ye.is_download==="Y"});return e.jsx("input",{className:"w-7 h-7",value:"Y",...Q,type:"checkbox",defaultChecked:re!=null,onChange:ye=>J(ye,N),disabled:y.formode==="Lihat"})}else return e.jsx("input",{className:"w-7 h-7",value:"Y",type:"checkbox",...Q,onChange:re=>J(re,N),disabled:y.formode==="Lihat"})},J=(c,v)=>{const{name:N,checked:Q}=c.target;v.setFieldValue("akses",{...v.values.akses,[N]:Q})},P=async()=>{y.formode=="Ubah"&&y.id==(t==null?void 0:t.role_id)&&(W(!0),await i.switchRole({role:t==null?void 0:t.role_id}).then(c=>{let v=JSON.parse(Bn.decode(c.data)),Q=ms.AES.decrypt(v.value,ms.enc.Base64.parse(KEY_BE),{iv:ms.enc.Base64.parse(v.iv)}).toString(ms.enc.Utf8);Q=Q.substring(Q.indexOf("{")),Q=JSON.parse(Q),Q.authorization.token&&(Le.removeItem("menu"),Le.setItem("menu",JSON.stringify(Q.menu)),W(!1))}))},h=c=>{const v=G.findIndex(N=>N.id===c.id);X([]),X([c]),v!==-1&&X([])},d=c=>G.length?G.some(v=>{if(v.id===c.id)return!0}):!1,j=(c,v)=>c.length?c.some(N=>{if(N.id===v)return!0}):!1,g=async c=>{try{const v={group_role_id:c},N=await m.select("pengguna/groupflag/select",v,null,!1);if(Array.isArray(N)&&N.length>0){const re=N.map(ye=>({value:ye.id,label:ye.flag_remark}));I(re),C(re.find(ye=>ye.value===y.flag_remark)||null)}else console.error("Data yang diterima bukan array atau kosong:",N),I([]),C(null)}catch{I([])}};return e.jsxs(aa,{children:[e.jsx(la,{}),s&&e.jsx("div",{className:"h-screen",children:e.jsx(ie,{pt:6,pb:3,children:e.jsxs(Me,{children:[e.jsx(ie,{px:3,pt:3,lineHeight:1,children:e.jsxs(w,{container:!0,direction:"row",justifyContent:"space-between",alignItems:"center",children:[e.jsx(w,{item:!0,children:e.jsxs(le,{variant:"h5",fontWeight:"medium",children:[y.formode," ",r]})}),e.jsx(w,{item:!0,children:e.jsxs(_e,{variant:"gradient",color:"secondary",onClick:D,children:[e.jsx(za,{size:"1.5em",className:"me-2"}),"Batal"]})})]})}),e.jsx(ca,{initialValues:y,onSubmit:f,validateOnChange:!0,validationSchema:vj,enableReinitialize:!0,children:e.jsxs(da,{id:"form",className:"text-sm",children:[e.jsx(w,{mt:2,children:e.jsxs("div",{className:"p-6 grid grid-cols-12 mb-10 gap-5 lg:mb-0",children:[e.jsx("div",{className:"col-span-12 md:col-span-6 ",children:e.jsx(w,{mt:3,children:e.jsx(ce,{name:"group_role",children:({field:c,form:v,meta:N})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Grup Hak Akses",required:!0,error:N.error&&N.touched}),e.jsx(ra,{url:"pengguna/rolemenu/gruprole",isDisabled:z,callbackChange:Q=>{v.setFieldValue("group_role",(Q==null?void 0:Q.id)??""),v.setFieldValue("check",null),g(Q==null?void 0:Q.id),C(null)},selectedData:y.group_role_object,keyValue:["id","nama"],placeholder:"Pilih Grup Hak Akses...",className:"text-sm",menuPortalTarget:null}),e.jsx(ue,{text:N.error,error:N.error&&N.touched})]})})})}),e.jsx("div",{className:"col-span-12 md:col-span-6",children:e.jsx(w,{mt:1,children:e.jsx("div",{className:"p-3 text-sm",children:e.jsx(ce,{name:"flag_remark",children:({field:c,form:v,meta:N})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Flag",required:!1,error:N.error&&N.touched}),e.jsx(Gs,{placeholder:"Pilih Flag",isDisabled:z||!O,options:O,value:_,isClearable:!0,isSearchable:!1,className:"w-full z-30",onChange:Q=>{v.setFieldValue("flag_remark",Q==null?void 0:Q.value),C(Q)}}),e.jsx(ue,{text:N.error,error:N.error&&N.touched})]})})})})}),e.jsx("div",{className:"col-span-12 md:col-span-6",children:e.jsx(w,{mt:3,children:e.jsx(ce,{name:"name",children:({field:c,form:v,meta:N})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Nama Hak Akses",required:!0,error:N.error&&N.touched}),e.jsx(Ye,{...c,type:"text",placeholder:"Nama Hak Akses",error:N.error&&N.touched,disabled:z}),e.jsx(ue,{text:N.error,error:N.error&&N.touched})]})})})}),e.jsx("div",{className:"col-span-12 md:col-span-6",children:e.jsx(w,{mt:1,children:e.jsx(Na,{children:e.jsx(ce,{name:"status",children:({field:c,form:v,meta:N})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Status",required:!0,error:N.error&&N.touched}),e.jsxs("div",{className:"space-x-4 flex flex-row items-center",children:[e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{...c,type:"radio",className:"form-radio  w-4 h-4 text-blue-500 focus:ring-2 focus:ring-blue-500",value:"AKTIF",checked:c.value=="AKTIF",disabled:z||y.formode=="Tambah"}),e.jsx("span",{className:"text-gray-700",children:"Aktif"})]}),e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{...c,type:"radio",className:"form-radio  w-4 h-4 text-blue-500 focus:ring-2 focus:ring-blue-500",value:"NON-AKTIF",disabled:z||y.formode=="Tambah",checked:c.value=="NON-AKTIF"}),e.jsx("span",{className:"text-gray-700",children:"Non Aktif"})]})]}),e.jsx(ue,{text:N.error,error:N.error&&N.touched})]})})})})})]})}),e.jsx("div",{className:"hidden"}),e.jsx("div",{className:"px-6",children:e.jsx("div",{className:"overflow-y-auto overflow-y-contain h-[30rem] border-2",children:e.jsxs("table",{className:"relative table p-10 min-w-full w-full text-sm text-left !text-gray-700 dark:text-gray-400 table-bordered shadow-lg",children:[e.jsx("thead",{className:"sticky top-0 text-xs text-gray-500 uppercase mb-1",children:e.jsxs("tr",{className:"bg-slate-200",children:[e.jsx("th",{className:"p-4 text-base text-center max-w-[10rem]",children:"Menu / Sub Menu"}),F.map((c,v)=>e.jsx("th",{className:"p-4 text-base text-center",children:c.name},`role-${v}-${c.name}`))]})}),e.jsx("tbody",{children:L&&L.length>0&&L.map((c,v)=>e.jsxs(Ga.Fragment,{children:[e.jsx("tr",{className:`p-4 text-base ${c.childerns.length?"cursor-pointer hover:bg-slate-100":""}`,onClick:()=>h(c),children:e.jsx("td",{className:"p-4 text-base",colSpan:6,children:e.jsxs("div",{className:`flex justify-between font-semibold ${c.is_header==="Y"?"":"ps-4"}`,children:[e.jsx("span",{children:c.nama}),c.childerns.length?e.jsx(e.Fragment,{children:d(c)?e.jsx(Do,{className:"w-6 h-6"}):e.jsx(is,{className:"w-6 h-6"})}):e.jsx(e.Fragment,{})]})})},`${c.id}-${v}-notHeader`),c.childerns&&c.childerns.map(N=>e.jsxs("tr",{className:`p-4 text-base ${d(c)?"":"hidden"}`,children:[e.jsx("td",{className:"p-4 text-base",children:e.jsx("div",{className:"ps-8",children:N.nama})}),F.map((Q,re)=>e.jsxs("td",{className:"text-center",children:[Q.name==="Create"&&e.jsx(ce,{name:`create_${N.id}`,children:({field:ye,form:xe,meta:fe})=>E(N.id,"create",xe,ye)}),Q.name==="Read"&&e.jsx(ce,{name:`read_${N.id}`,children:({field:ye,form:xe,meta:fe})=>E(N.id,"read",xe,ye)}),Q.name==="Update"&&e.jsx(ce,{name:`update_${N.id}`,children:({field:ye,form:xe,meta:fe})=>E(N.id,"update",xe,ye)}),Q.name==="Delete"&&e.jsx(ce,{name:`delete_${N.id}`,children:({field:ye,form:xe,meta:fe})=>E(N.id,"delete",xe,ye)}),Q.name==="Download"&&e.jsx(ce,{name:`download_${N.id}`,children:({field:ye,form:xe,meta:fe})=>E(N.id,"download",xe,ye)})]},`role-${v}-${Q.name}`))]},`${N.id}-${v}-normal`))]},c==null?void 0:c.id))})]})})}),e.jsx("div",{className:"p-3 flex justify-end items-center w-full gap-5 mb-10",children:!z&&e.jsx(Je,{submit:k,color:"success",formId:"form",text:y.formode=="Tambah"?"Simpan":"Ubah"})})]})})]})})}),e.jsx(ys,{open:K,children:e.jsx(Na,{children:e.jsx(br,{color:"error"})})})]})},kt="https://api.arsip.go.id/user/api/";class Pd{constructor(){ae(this,"getPaging",async s=>{const n=Ce.serializeObjectToQueryString(s);return await se.get(`${kt}pengguna/grup-tujuan?${n}`).then(l=>l)});ae(this,"post",async s=>await se.post(`${kt}pengguna/grup-tujuan`,s).then(i=>i));ae(this,"put",async(s,n)=>await se.put(`${kt}pengguna/grup-tujuan/${s}`,n).then(l=>l));ae(this,"delete",async s=>await se.delete(`${kt}pengguna/grup-tujuan/${s}`).then(i=>i));ae(this,"getPagingPengguna",async s=>{const n=Ce.serializeObjectToQueryString(s);return await se.get(`${kt}pengguna/grup-tujuan/pengguna?${n}`).then(l=>l)});ae(this,"getPagingDaftarTujuan",async s=>{const n=Ce.serializeObjectToQueryString(s);return await se.get(`${kt}pengguna/grup-tujuan/index-daftar-tujuan?${n}`).then(l=>l)});ae(this,"postDaftarTujuan",async s=>await se.post(`${kt}pengguna/grup-tujuan/store-daftar-tujuan`,s).then(i=>i));ae(this,"deleteDaftarTujuan",async s=>await se.delete(`${kt}pengguna/grup-tujuan/destroy-daftar-tujuan/${s}`).then(i=>i))}}const nn=fa().shape({nama:ze().required("Nama harus diisi")}),Cd=fa().shape({penggunas:vs().min(1,"Pilih Pengguna Tujuan").required("Pengguna Tujuan harus dipilih")}),Cj=()=>{const r="Grup Tujuan Naskah",[s,n]=a.useState(!1);a.useEffect(()=>{n(ge(r,"is_read",!0))},[]);const t=JSON.parse(Le.getItem("users")),i=new Pd,l=ha(),[m,p]=a.useState(!1),[B,K]=a.useState(null),[W,z]=Ga.useState(!1),[T,L]=a.useState(!1),[$,M]=a.useState("Simpan"),[H,V]=a.useState(""),[A,G]=a.useState(null),[X,O]=a.useState(null),[I,_]=a.useState(!0),[C,k]=a.useState({id:0,organisasi_id:t==null?void 0:t.organisasi_id,public_organisasi_id:t==null?void 0:t.public_organisasi_id,nama:"",deskripsi:"",penggunas:[],daftar_tujuan:[]}),[b,y]=a.useState({total:0,from:1,to:1});let o=[];B==null?o=[]:o=B.map(g=>{var c;return{nama:g.nama,deskripsi:g.deskripsi,jumlah_tujuan:((c=g.daftar_tujuan)==null?void 0:c.length)??0,dibuat:g.created_at,action:e.jsxs("div",{className:"flex items-center justify-center gap-3 w-full",children:[ge(r,"is_update")&&e.jsx(Va,{size:"1.5em",color:"#fbcf33",onClick:()=>P(g),className:"cursor-pointer",title:"Ubah"}),e.jsx(Oa,{size:"1.5em",color:"#17c1e8",onClick:()=>h(g),className:"cursor-pointer",title:"Lihat"}),ge(r,"is_delete")&&e.jsx($a,{size:"1.5em",color:"#e62e2d",onClick:()=>d(g),className:"cursor-pointer",title:"Hapus"})]})}});const[F,x]=a.useState({page:1,rows:10,sortField:"",sortOrder:null,search:"",public_organisasi_id:t==null?void 0:t.public_organisasi_id,group_role:t==null?void 0:t.group_role,organisasi_id:t==null?void 0:t.organisasi_id,filters:{nama:{value:""},jumlah_tujuan:{value:""},deskripsi:{value:""},created_at:{value:""},organisasi_id:{value:t==null?void 0:t.organisasi_id},public_organisasi_id:{value:t==null?void 0:t.public_organisasi_id}}});a.useEffect(()=>{S()},[F]);const S=async(g=!1)=>{g&&(F.page=1),p(!0),await i.getPaging(F).then(c=>{let v=c.data.result;v.data&&(G(v.last_page),K(v.data),p(!1)),p(!1),y({...b,to:v.to,from:v.from,total:v.total})}).catch(c=>{p(!1),y({...b,to:0,from:!1,total:0})})},f=Da((g,c,v=null)=>{if(v){let Q=v.target;for(;Q&&Q.tagName!=="TD";)Q=Q.parentNode;if(Q&&Q.tagName==="TD"){const re=Q.querySelector(".clear-input"),ye=Q.querySelector("input");c?re.classList.remove("hidden"):(re.classList.add("hidden"),ye.value="")}}let N={...F};N.filters[g].value=c,N.page=1,x(N)},600),R=g=>{let c={...F};c.page=g,x(c),window.scrollTo({top:0,behavior:"smooth"})},u=g=>{let c={...F};c.rows=g,c.page=1,x(c)},D=g=>{let c={...F};c.sortField=g,F.sortField!=g?F.sortOrder==""&&(c.sortOrder=1):F.sortOrder==1?c.sortOrder=-1:(c.sortOrder="",c.sortField=""),c.page=1,x(c)},E=g=>{_(!1),g.id!==0?i.put(g.id,g).then(c=>{var v,N,Q;U.fire((v=c.data)!=null&&v.success?"Berhasil":"Gagal",(N=c.data)==null?void 0:N.message,(Q=c.data)!=null&&Q.success?"success":"warning"),c.data.success&&(S(!0),j())}).catch(c=>{var N,Q;const v=Oe(c.response.data.result);U.fire("Gagal",v??((Q=(N=c.response)==null?void 0:N.data)==null?void 0:Q.message),"error")}).finally(()=>_(!0)):i.post(g).then(c=>{var v,N,Q;U.fire((v=c.data)!=null&&v.success?"Berhasil":"Gagal",(N=c.data)==null?void 0:N.message,(Q=c.data)!=null&&Q.success?"success":"warning"),c.data.success&&(S(!0),j())}).catch(c=>{var N,Q;const v=Oe(c.response.data.result);U.fire("Gagal",v??((Q=(N=c.response)==null?void 0:N.data)==null?void 0:Q.message),"error")}).finally(()=>_(!0))},J=g=>{z(!0),k({id:0,organisasi_id:t==null?void 0:t.organisasi_id,public_organisasi_id:t==null?void 0:t.public_organisasi_id,penggunas:[],daftar_tujuan:[],nama:"",deskripsi:""}),M("Simpan"),V("Tambah"),O(""),L(!1)},P=g=>{l("form",{state:{formode:"Ubah",id:g.id,organisasi_id:g.organisasi_id,public_organisasi_id:g.public_organisasi_id,penggunas:g.penggunas,daftar_tujuan:g.daftar_tujuan,nama:g.nama,deskripsi:g.deskripsi,created_at:g.created_at}})},h=g=>{l("form",{state:{formode:"Lihat",id:g.id,organisasi_id:g.organisasi_id,public_organisasi_id:g.public_organisasi_id,penggunas:g.penggunas,daftar_tujuan:g.daftar_tujuan,nama:g.nama,deskripsi:g.deskripsi,created_at:g.created_at}})},d=g=>{U.fire({title:"Konfirmasi",text:`Data ${g.nama} akan dihapus ?`,icon:"warning",showCancelButton:!0,confirmButtonText:"Hapus",cancelButtonText:"Batal",customClass:{confirmButton:"button button-error",cancelButton:"button button-info"}}).then(c=>{c.isConfirmed&&(ka(),i.delete(g.id).then(v=>{v.status==200&&S(),U.fire("Berhasil","Data Berhasil Dihapus","success")}).catch(v=>{var Q,re;const N=Oe(v.response.data.result);U.fire("Gagal",N??((re=(Q=v.response)==null?void 0:Q.data)==null?void 0:re.message),"error")}))})},j=()=>{z(!1)};return e.jsxs(aa,{children:[e.jsx(la,{}),s&&e.jsxs(e.Fragment,{children:[" ",e.jsx(ie,{pt:6,pb:3,children:e.jsxs(Me,{children:[e.jsx(ie,{px:3,pt:3,lineHeight:1,children:e.jsxs(w,{container:!0,direction:"row",justifyContent:"space-between",alignItems:"center",children:[e.jsx(w,{item:!0,children:e.jsxs(le,{variant:"h5",fontWeight:"medium",children:["Daftar ",r]})}),ge(r,"is_create")&&e.jsx(w,{item:!0,children:e.jsxs(_e,{variant:"gradient",color:"info",onClick:J,children:[e.jsx(Ea,{size:"1.5em"}),"Tambah Baru"]})})]})}),e.jsx(w,{px:3,pt:3,children:e.jsxs("div",{className:"text-sm w-100 flex justify-start items-center gap-2",children:[e.jsxs("span",{children:["Setelah menambahkan ",e.jsx("b",{children:"Grup Tujuan"}),", Anda dapat mengisi daftar tujuan pada pada tombol aksi edit"," "]}),e.jsx(Va,{className:"w-5 h-5 text-[#fbcf33]"})]})}),e.jsx("div",{className:"overflow-auto",children:e.jsxs("div",{className:"table p-10 min-w-full",children:[e.jsx("div",{className:"flex justify-end mb-1",children:e.jsx(pa,{config:F,handleClick:u})}),e.jsxs("table",{className:"w-full text-sm text-left !text-gray-700 dark:text-gray-400 table-bordered",children:[e.jsx("thead",{className:"text-xs text-gray-500 uppercase border-b-2 mb-1",children:e.jsxs("tr",{children:[e.jsx(q,{text:"Nama Grup",sortField:"nama",sortOrder:F.sortOrder,config:F,handleClick:()=>D("nama")}),e.jsx(q,{text:"Deskripsi",sortField:"deskripsi",sortOrder:F.sortOrder,config:F,handleClick:()=>D("deskripsi")}),e.jsx(q,{text:"Jumlah Tujuan",sortField:"jumlah_tujuan",sortOrder:F.sortOrder,config:F,handleClick:()=>D("jumlah_tujuan")}),e.jsx(q,{text:"Dibuat pada",sortField:"created_at",sortOrder:F.sortOrder,config:F,handleClick:()=>D("created_at")}),e.jsx(q,{text:"Aksi",className:"justify-center min-w-[2rem]"})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{className:"border-b border-slate-300",children:[e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(Ye,{name:"nama",onChange:g=>{f("nama",g.target.value)},type:"text",placeholder:"Cari Nama"})}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(Ye,{name:"deskripsi",onChange:g=>{f("deskripsi",g.target.value)},type:"text",placeholder:"Cari Deskripsi"})}),e.jsx("td",{}),e.jsx("td",{}),e.jsx("td",{})]}),m?e.jsx("tr",{children:e.jsx("td",{colSpan:5,children:e.jsx(ia,{})})}):e.jsx(e.Fragment,{}),o.length?o.map((g,c)=>e.jsxs("tr",{className:"border-b border-slate-300",children:[e.jsx("td",{className:" max-w-[20rem] px-6 py-6",children:g.nama}),e.jsx("td",{className:" max-w-[20rem] px-6 py-6",children:g.deskripsi}),e.jsx("td",{className:" max-w-[20rem] px-6 py-6",children:g.jumlah_tujuan}),e.jsx("td",{className:" max-w-[20rem] px-6 py-6",children:na(g.dibuat)}),e.jsxs("td",{className:"px-1 text-right w-[2rem]",children:[" ",g.action," "]})]},c)):e.jsx(e.Fragment,{})]})]}),e.jsxs("nav",{className:"flex items-center justify-between p-4","aria-label":"Table navigation",children:[e.jsx("span",{className:"text-sm text-gray-400",children:b.from&&`Menampilkan ${Se(b.from)} sampai ${Se(b.to)} dari ${Se(b.total)} entri`}),e.jsx(xa,{currentPage:F.page,lastPage:A,displayCount:5,handleClick:R})]})]})})]})}),e.jsx(ua,{}),e.jsxs(Fa,{open:W,onClose:j,children:[e.jsxs(_a,{children:[H," ",r]}),e.jsx(ca,{initialValues:C,onSubmit:E,validateOnChange:!0,validationSchema:nn,children:e.jsx(da,{id:"form",className:"text-sm",children:e.jsxs("div",{className:"p-5",children:[e.jsx(w,{mt:1,children:e.jsxs(Na,{children:[e.jsx("input",{type:"hidden",name:"id",value:C.id}),e.jsx(ce,{name:"nama",children:({field:g,form:c,meta:v})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Nama Grup",required:!0,error:v.error&&v.touched}),e.jsx(Ye,{...g,type:"text",placeholder:"Nama",error:v.error&&v.touched,disabled:T}),e.jsx(ue,{text:v.error,error:v.error&&v.touched})]})})]})}),e.jsx(w,{mt:1,children:e.jsx(Na,{children:e.jsx(ce,{name:"deskripsi",children:({field:g,form:c,meta:v})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Deskripsi",error:v.error&&v.touched}),e.jsx(Ka,{...g,placeHolder:"Masukan Deskripsi..",error:v.error&&v.touched,rows:2,disabled:T}),e.jsx(ue,{text:v.error,error:v.error&&v.touched})]})})})})]})})}),e.jsx(ya,{children:e.jsxs(e.Fragment,{children:[!T&&e.jsx(Je,{submit:I,color:"success",formId:"form",text:$}),e.jsx(_e,{color:T?"dark":"error",variant:"gradient",onClick:()=>z(!1),children:T?"Tutup":"Batal"})]})})]})]})]})},cr="https://api.arsip.go.id/user/api/";class Tj{constructor(){ae(this,"getPaging",async s=>{const n=Ce.serializeObjectToQueryString(s);return await se.get(`${cr}pengguna/tujuan?${n}`).then(l=>l)});ae(this,"post",async s=>await se.post(`${cr}pengguna/tujuan`,s).then(i=>i));ae(this,"put",async(s,n)=>await se.put(`${cr}pengguna/tujuan/${s}`,n).then(l=>l));ae(this,"delete",async s=>await se.delete(`${cr}pengguna/tujuan/${s}`).then(i=>i));ae(this,"refreshUser",async s=>await se.put(`${cr}pengguna/tujuan/reset`,s).then(i=>i));ae(this,"refreshUserCheck",async s=>await se.put(`${cr}pengguna/tujuan/reset-check`,s).then(i=>i))}}const Fj=fa().shape({nama:ze().required("Nama harus diisi"),instansi:ze().required("Instansi harus diisi")}),Dj=()=>{const r="Tujuan Naskah",[s,n]=a.useState(!1);a.useEffect(()=>{n(ge(r,"is_read",!0))},[]);const t=JSON.parse(Le.getItem("users")),i=new Tj,[l,m]=a.useState(!1),[p,B]=a.useState(null),[K,W]=a.useState(null),[z,T]=a.useState(!1),[L,$]=a.useState(null),[M,H]=a.useState(null),[V,A]=a.useState(null),[G,X]=a.useState(!1),[O,I]=a.useState("Simpan"),[_,C]=a.useState(""),[k,b]=a.useState(null),[y,o]=a.useState(null),[F,x]=a.useState(!0),[S,f]=a.useState({id:0,jenis:"",user_id:null,organisasi_id:"",nama_pengguna:"",nama_organisasi:"",nama:"",jabatan:"",instansi:"",organisasi_created_id:t==null?void 0:t.organisasi_id}),[R,u]=a.useState({total:0,from:1,to:1}),[D,E]=a.useState(!0),[J,P]=a.useState(!1),[h,d]=a.useState([]),[j,g]=a.useState([]),c=(Te,me)=>{const{checked:ee}=Te.target;d(Y=>ee?Y.length>=10?(U.fire({icon:"warning",title:"Batas Data Cheklist 10",text:"Anda tidak bisa mencentang lebih dari 10 data.",showConfirmButton:!0}),Y):[...Y,me]:Y.filter(ke=>ke!==me))},v=()=>{P(!1)},[N,Q]=a.useState([]),re=Te=>{g(h),P(!0),Q(me=>({...me}))},ye=Te=>{E(!1);const ee={data:j.map(Y=>({id:Y}))};i.refreshUserCheck(ee).then(Y=>{var ke,De,ta;U.fire({icon:(ke=Y.data)!=null&&ke.success?"success":"warning",title:(De=Y.data)!=null&&De.success?"Berhasil":"Gagal",text:(ta=Y.data)==null?void 0:ta.message,showConfirmButton:!1,timer:1500}),Y.data.success&&($e(!0),v(),d([]))}).catch(Y=>{var De,ta;const ke=Oe(Y.response.data.result);U.fire("Gagal",ke??((ta=(De=Y.response)==null?void 0:De.data)==null?void 0:ta.message),"error")}).finally(()=>E(!0))};let xe=[];p==null?xe=[]:xe=p.map(Te=>({jenis:Te.jenis,kepada:Te.kepada,user_id:Te.user_id,organisasi_id:Te.organisasi_id,nama_pengguna:Te.nama_pengguna,nama_organisasi:Te.nama_organisasi,nama:Te.nama,jabatan:Te.jabatan,instansi:Te.instansi,action:e.jsxs("div",{className:"flex items-center justify-center px-3 gap-3 w-full",children:[(Te==null?void 0:Te.is_update)&&e.jsx(Dt,{size:"1.5em",color:"#00bcd4",onClick:()=>je(Te==null?void 0:Te.id),className:"cursor-pointer",title:"Lihat"}),ge(r,"is_delete")&&e.jsx($a,{size:"1.5em",color:"#e62e2d",onClick:()=>Ne(Te),className:"cursor-pointer",title:"Hapus"})]}),checkbox:e.jsx("div",{className:"flex items-center justify-center",children:(Te==null?void 0:Te.is_update)&&e.jsx("input",{type:"checkbox",className:"form-checkbox h-5 w-5 text-indigo-600",checked:h.includes(Te.id),onChange:me=>c(me,Te.id)})})}));const[fe,Ge]=a.useState({page:1,rows:10,sortField:"",sortOrder:null,organisasi_id:t==null?void 0:t.organisasi_id,public_organisasi_id:t==null?void 0:t.public_organisasi_id,group_role:t==null?void 0:t.group_role,search:"",filters:{organisasi_created_id:{value:""},jenis:{value:""},kepada:{value:""}}});a.useEffect(()=>{$e()},[fe]);const $e=async(Te=!1)=>{Te&&(fe.page=1),m(!0),await i.getPaging(fe).then(me=>{let ee=me.data.result;ee.data&&(b(ee.last_page),B(ee.data),m(!1)),m(!1),u({...R,to:ee.to,from:ee.from,total:ee.total})}).catch(me=>{m(!1),u({...R,to:0,from:!1,total:0})})},Pe=Da((Te,me,ee=null)=>{if(ee){let ke=ee.target;for(;ke&&ke.tagName!=="TD";)ke=ke.parentNode;if(ke&&ke.tagName==="TD"){const De=ke.querySelector(".clear-input"),ta=ke.querySelector("input");me?De.classList.remove("hidden"):(De.classList.add("hidden"),ta.value="")}}let Y={...fe};Y.filters[Te].value=me,Y.page=1,Ge(Y)},600),te=Te=>{let me={...fe};me.page=Te,Ge(me),window.scrollTo({top:0,behavior:"smooth"})},ne=Te=>{let me={...fe};me.rows=Te,me.page=1,Ge(me)},pe=Te=>{let me={...fe};me.sortField=Te,fe.sortField!=Te?fe.sortOrder==""&&(me.sortOrder=1):fe.sortOrder==1?me.sortOrder=-1:(me.sortOrder="",me.sortField=""),me.page=1,Ge(me)},he=Te=>{x(!1),Te.id!==0?i.put(Te.id,Te).then(me=>{var ee,Y,ke;U.fire((ee=me.data)!=null&&ee.success?"Berhasil":"Gagal",(Y=me.data)==null?void 0:Y.message,(ke=me.data)!=null&&ke.success?"success":"warning"),me.data.success&&($e(!0),Re())}).catch(me=>{var Y,ke;const ee=Oe(me.response.data.result);U.fire("Gagal",ee??((ke=(Y=me.response)==null?void 0:Y.data)==null?void 0:ke.message),"error")}).finally(()=>x(!0)):i.post(Te).then(me=>{var ee,Y;me.data.success?(U.fire("Berhasil",(ee=me.data)==null?void 0:ee.message,"success"),$e(!0),Re()):U.fire("Gagal",(Y=me.data)==null?void 0:Y.message,"warning")}).catch(me=>{var ee,Y;console.log(me),U.fire("Gagal",(Y=(ee=me.response)==null?void 0:ee.data)==null?void 0:Y.message,"error")}).finally(()=>x(!0))},oe=Te=>{f({id:0,jenis:Te,user_id:null,organisasi_id:"",nama_pengguna:"",nama_organisasi:"",unit_kerja:"",nama:"",jabatan:"",instansi:"",organisasi_created_id:t==null?void 0:t.organisasi_id}),I("Simpan"),C("Tambah"),A(null),$(null),H(null),W(!1),T(!0),X(!1)},je=Te=>{U.fire({title:"Perbarui Tujuan",text:"Apakah Anda yakin ingin memperbarui Tujuan ini ?",icon:"question",showCancelButton:!0,confirmButtonText:"Ya, Perbarui",cancelButtonText:"Batal",customClass:{confirmButton:"button button-success",cancelButton:"button button-secondary"}}).then(me=>{me.isConfirmed&&(ka(),i.refreshUser({id:Te}).then(ee=>{ee.status==200&&$e(),U.fire("Berhasil","Data Berhasil Diperbarui","success")}).catch(ee=>{var ke,De,ta,Be;const Y=Oe((De=(ke=ee.response)==null?void 0:ke.data)==null?void 0:De.result);U.fire("Gagal",Y??((Be=(ta=ee.response)==null?void 0:ta.data)==null?void 0:Be.message),"error")}))})},Ne=Te=>{U.fire({title:"Konfirmasi",text:`Data ${Te.nama} akan dihapus ?`,icon:"warning",showCancelButton:!0,confirmButtonText:"Hapus",cancelButtonText:"Batal",customClass:{confirmButton:"button button-error",cancelButton:"button button-info"}}).then(me=>{me.isConfirmed&&(ka(),i.delete(Te.id).then(ee=>{ee.status==200&&$e(),U.fire("Berhasil","Data Berhasil Dihapus","success")}).catch(ee=>{var ke,De;const Y=Oe(ee.response.data.result);U.fire("Gagal",Y??((De=(ke=ee.response)==null?void 0:ke.data)==null?void 0:De.message),"error")}))})},Re=()=>{T(!1)},sa=()=>e.jsxs(Ls,{anchorEl:K,anchorOrigin:{vertical:"bottom",horizontal:"left"},open:!!K,onClose:()=>W(!1),sx:{mt:2,zIndex:10},children:[e.jsx(Ma,{title:"Tujuan Naskah Internal SRIKANDI",onClick:()=>oe("INTERNAL")}),e.jsx(Ma,{title:"Tujuan Naskah Eksternal SRIKANDI",onClick:()=>oe("SRIKANDI")}),e.jsx(Ma,{title:"Tujuan Naskah Eksternal Non SRIKANDI",onClick:()=>oe("EKSTERNAL")})]});return e.jsxs(aa,{children:[e.jsx(la,{}),s&&e.jsxs(e.Fragment,{children:[" ",e.jsx(ie,{pt:6,pb:3,children:e.jsxs(Me,{children:[e.jsx(ie,{px:3,pt:3,lineHeight:1,children:e.jsxs(w,{container:!0,direction:"row",justifyContent:"space-between",alignItems:"center",children:[e.jsx(w,{item:!0,children:e.jsxs(le,{variant:"h5",fontWeight:"medium",children:["Daftar ",r]})}),ge(r,"is_create")&&e.jsx(w,{item:!0,children:e.jsxs(ie,{children:[e.jsxs(_e,{variant:"gradient",color:"info",onClick:Te=>W(Te.currentTarget),children:[e.jsx(Ea,{size:"1.5em"}),"Tambah Baru"]}),sa()]})})]})}),e.jsx(ie,{px:3,pt:3,lineHeight:1,children:e.jsxs(w,{container:!0,direction:"row",justifyContent:"space-between",alignItems:"center",children:[e.jsx(w,{item:!0,children:e.jsx(le,{variant:"h5",fontWeight:"medium"})}),e.jsx(w,{item:!0,children:e.jsx(ie,{children:e.jsx(_e,{variant:"gradient",color:"success",onClick:()=>re(),disabled:h.length==0,children:"Sinkronisasi Tujuan"})})})]})}),e.jsxs(w,{pt:3,px:3,children:["Pada saat menambahkan ",e.jsx("b",{children:"Tujuan Baru"})," terdapat beberapa perbedaan antara lain:",e.jsxs("ul",{className:"list-inside list-disc",children:[e.jsxs("li",{children:[e.jsx("b",{children:"Tujuan Naskah Internal SRIKANDI"})," adalah Daftar Tujuan berdasarkan Instansi dan Unit Kerja / Satuan Kerja Anda"]}),e.jsxs("li",{children:[e.jsx("b",{children:"Tujuan Naskah Eksternal SRIKANDI"})," adalah Daftar Tujuan berdasarkan keseluruhan Instansi dan Unit Kerja / Satuan Kerja"]}),e.jsxs("li",{children:[e.jsx("b",{children:"Tujuan Naskah Eksternal Non SRIKANDI"})," adalah Daftar Tujuan berdasarkan diluar lingkup SRIKANDI"]})]})]}),e.jsx("div",{className:"overflow-auto",children:e.jsxs("div",{className:"table p-10 min-w-full",children:[e.jsx("div",{className:"flex justify-end mb-1",children:e.jsx(pa,{config:fe,handleClick:ne})}),e.jsxs("table",{className:"w-full text-sm text-left !text-gray-700 dark:text-gray-400 table-bordered",children:[e.jsx("thead",{className:"text-xs text-gray-500 uppercase border-b-2 mb-1",children:e.jsxs("tr",{children:[e.jsx(q,{text:"#"}),e.jsx(q,{text:"Jenis Tujuan",sortField:"jenis",sortOrder:fe.sortOrder,config:fe,handleClick:()=>pe("jenis")}),e.jsx(q,{text:"Kepada",sortField:"kepada",sortOrder:fe.sortOrder,config:fe,handleClick:()=>pe("kepada")}),e.jsx(q,{text:"Aksi",className:"min-w-[2rem]"})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{className:"border-b border-slate-300",children:[e.jsx("td",{className:"px-1 py-1"}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"jenis",onSearch:Pe,placeholder:"Jenis Tujuan",type:"select",selectOption:rd})}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"kepada",onSearch:Pe,placeholder:"Kepada",type:"input"})}),e.jsx("td",{})]}),l?e.jsx("tr",{children:e.jsx("td",{colSpan:3,children:e.jsx(ia,{})})}):e.jsx(e.Fragment,{}),xe.length?xe.map((Te,me)=>e.jsxs("tr",{className:"border-b border-slate-300",children:[e.jsx("td",{className:"px-1 py-1",children:Te.checkbox}),e.jsx("td",{className:" max-w-[20rem] px-6 py-6",children:Te.jenis=="INTERNAL"?"Internal SRIKANDI":Te.jenis=="SRIKANDI"?"Eksternal SRIKANDI":"Eksternal Non SRIKANDI"}),e.jsx("td",{className:" max-w-[20rem] px-6 py-6",children:Te.kepada}),e.jsxs("td",{className:"px-1 text-right w-[2rem]",children:[" ",Te.action," "]})]},me)):e.jsx(e.Fragment,{})]})]}),e.jsxs("nav",{className:"flex items-center justify-between p-4","aria-label":"Table navigation",children:[e.jsx("span",{className:"text-sm text-gray-400",children:R.from&&`Menampilkan ${Se(R.from)} sampai ${Se(R.to)} dari ${Se(R.total)} entri`}),e.jsx(xa,{currentPage:fe.page,lastPage:k,displayCount:5,handleClick:te})]})]})})]})}),e.jsx(ua,{}),e.jsx(Fa,{open:z,onClose:Re,children:e.jsxs("div",{children:[e.jsxs(_a,{children:[_," ",r," ",S.jenis=="INTERNAL"?"Internal Srikandi":S.jenis=="SRIKANDI"?"Eksternal Srikandi":"Eksternal Non Srikandi"]}),e.jsx(ca,{initialValues:S,onSubmit:he,validateOnChange:!0,validationSchema:Fj,children:e.jsx(da,{id:"form",className:"text-sm",children:e.jsx("div",{className:"p-3",children:S.jenis=="INTERNAL"?e.jsxs(e.Fragment,{children:[e.jsx(w,{children:e.jsx("div",{className:"p-3",children:e.jsx(ce,{name:"unit_kerja",children:({field:Te,form:me,meta:ee})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Unit Kerja",required:!0,error:ee.error&&ee.touched}),e.jsx(ra,{url:"organisasi/instansi/select_unit_kerja",isDisabled:G,callbackChange:Y=>{me.setFieldValue("instansi",(Y==null?void 0:Y.nama)??""),me.setFieldValue("tujuans_jenis",S.jenis),me.setFieldValue("organisasi_id",(Y==null?void 0:Y.id)??""),A(Y),me.setFieldValue("nama",""),me.setFieldValue("nama_pengguna",""),me.setFieldValue("jabatan",""),H(null)},selectedData:V,keyValue:["id","nama"],placeholder:"Pilih Unit Kerja...",className:"text-base",optionParam:{sortOrder:"asc"}}),e.jsx(ue,{text:ee.error,error:ee.error&&ee.touched})]})})})}),e.jsx(w,{children:e.jsx("div",{className:"p-3",children:e.jsx(ce,{name:"nama",children:({field:Te,form:me,meta:ee})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Pengguna",required:!0,error:ee.error&&ee.touched}),e.jsx(ra,{url:"pengguna/user/tujuan-user-utama",isDisabled:G,callbackChange:Y=>{var ke;me.setFieldValue("user_id",(Y==null?void 0:Y.id)??""),me.setFieldValue("nama",(Y==null?void 0:Y.nama)??""),me.setFieldValue("nama_pengguna",(Y==null?void 0:Y.nama)??""),me.setFieldValue("jabatan",((ke=Y==null?void 0:Y.jabatan)==null?void 0:ke.nama)??""),H(Y)},selectedData:M,keyValue:["id","nama_jabatan"],placeholder:"Pilih Pengguna...",className:"text-base",optionParam:{user_organisasi_id:t==null?void 0:t.organisasi_id,organisasi_id:me.values.organisasi_id,check:"no",unit_kerja_id:void 0,group_role:4}}),e.jsx(ue,{text:ee.error,error:ee.error&&ee.touched})]})})})})]}):S.jenis=="SRIKANDI"?e.jsxs(e.Fragment,{children:[e.jsx(w,{children:e.jsx("div",{className:"p-3",children:e.jsx(ce,{name:"instansi",children:({field:Te,form:me,meta:ee})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Instansi",required:!0,error:ee.error&&ee.touched}),e.jsx(ra,{url:"organisasi/instansi/select_instansi",isDisabled:G,callbackChange:Y=>{me.setFieldValue("tujuans_jenis",S.jenis),me.setFieldValue("organisasi_id",(Y==null?void 0:Y.id)??""),me.setFieldValue("instansi",(Y==null?void 0:Y.nama)??""),$(Y),A(null),me.setFieldValue("unit_kerja_id",""),me.setFieldValue("nama_organisasi",""),H(null),me.setFieldValue("nama",""),me.setFieldValue("nama_pengguna",""),me.setFieldValue("jabatan","")},selectedData:L,keyValue:["id","nama"],placeholder:"Pilih Instansi...",className:"text-base",optionParam:{sortOrder:"asc",public_organisasi_id:t==null?void 0:t.public_organisasi_id}}),e.jsx(ue,{text:ee.error,error:ee.error&&ee.touched})]})})})}),e.jsx(w,{children:e.jsx("div",{className:"p-3",children:e.jsx(ce,{name:"unit_kerja",children:({field:Te,form:me,meta:ee})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Unit Kerja",required:!0,error:ee.error&&ee.touched}),e.jsx(ra,{url:"organisasi/instansi/select_satker",isDisabled:G||!me.values.organisasi_id,callbackChange:Y=>{me.setFieldValue("unit_kerja_id",(Y==null?void 0:Y.id)??""),me.setFieldValue("nama_organisasi",(Y==null?void 0:Y.nama)??""),A(Y),H(null),me.setFieldValue("nama",""),me.setFieldValue("nama_pengguna",""),me.setFieldValue("jabatan","")},selectedData:V,keyValue:["id","nama"],placeholder:"Pilih Unit Kerja...",className:"text-base",optionParam:{organisasi_id:me.values.organisasi_id}}),e.jsx(ue,{text:ee.error,error:ee.error&&ee.touched})]})})})}),e.jsx(w,{children:e.jsx("div",{className:"p-3",children:e.jsx(ce,{name:"nama",children:({field:Te,form:me,meta:ee})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Pengguna",required:!0,error:ee.error&&ee.touched}),e.jsx(ra,{url:"pengguna/user/tujuan-user-utama",isDisabled:G,callbackChange:Y=>{var ke;me.setFieldValue("user_id",(Y==null?void 0:Y.id)??""),me.setFieldValue("nama",(Y==null?void 0:Y.nama)??""),me.setFieldValue("nama_pengguna",Y==null?void 0:Y.nama),me.setFieldValue("jabatan",((ke=Y==null?void 0:Y.jabatan)==null?void 0:ke.nama)??""),me.setField},selectedData:M,keyValue:["id","nama_jabatan"],placeholder:"Pilih Pengguna...",className:"text-base",optionParam:{user_organisasi_id:t==null?void 0:t.organisasi_id,organisasi_id:me.values.organisasi_id,check:"yes",unit_kerja_id:me.values.unit_kerja_id,group_role:4}}),e.jsx(ue,{text:ee.error,error:ee.error&&ee.touched})]})})})})]}):S.jenis=="EKSTERNAL"?e.jsxs(e.Fragment,{children:[e.jsx(w,{children:e.jsx("div",{className:"p-3",children:e.jsx(ce,{name:"nama",children:({field:Te,form:me,meta:ee})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Nama",required:!0,error:ee.error&&ee.touched}),e.jsx(Ye,{...Te,type:"text",placeholder:"Nama",error:ee.error&&ee.touched,disabled:G}),e.jsx(ue,{text:ee.error,error:ee.error&&ee.touched})]})})})}),e.jsx(w,{children:e.jsx("div",{className:"p-3",children:e.jsx(ce,{name:"jabatan",children:({field:Te,form:me,meta:ee})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Jabatan",error:ee.error&&ee.touched}),e.jsx(Ye,{...Te,type:"text",placeholder:"Jabatan",error:ee.error&&ee.touched,disabled:G}),e.jsx(ue,{text:ee.error,error:ee.error&&ee.touched})]})})})}),e.jsx(w,{children:e.jsx("div",{className:"p-3",children:e.jsx(ce,{name:"nama_organisasi",children:({field:Te,form:me,meta:ee})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Unit Kerja",error:ee.error&&ee.touched}),e.jsx(Ye,{...Te,type:"text",placeholder:"Unit Kerja",error:ee.error&&ee.touched,disabled:G}),e.jsx(ue,{text:ee.error,error:ee.error&&ee.touched})]})})})}),e.jsx(w,{children:e.jsx("div",{className:"p-3",children:e.jsx(ce,{name:"instansi",children:({field:Te,form:me,meta:ee})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Instansi",required:!0,error:ee.error&&ee.touched}),e.jsx(Ye,{...Te,type:"text",placeholder:"Instansi",error:ee.error&&ee.touched,disabled:G}),e.jsx(ue,{text:ee.error,error:ee.error&&ee.touched})]})})})})]}):e.jsx(e.Fragment,{})})})}),e.jsx(ya,{children:e.jsxs(e.Fragment,{children:[!G&&e.jsx(Je,{submit:F,color:"success",formId:"form",text:O}),e.jsx(_e,{color:G?"dark":"error",variant:"gradient",onClick:()=>Re(),children:G?"Tutup":"Batal"})]})})]})}),e.jsxs(Fa,{open:J,onClose:v,children:[e.jsxs("div",{children:[e.jsx(_a,{className:"flex items-center gap-2",children:e.jsx(le,{children:"Apakah Anda yakin ingin memperbarui Tujuan ini ?"})}),e.jsx(ca,{initialValues:N,onSubmit:ye,validateOnChange:!0,children:e.jsx(da,{id:"formDataBox",className:"text-sm"})})]}),e.jsx(ya,{children:e.jsxs(e.Fragment,{children:[e.jsx(Je,{submit:D,color:"success",formId:"formDataBox",text:"Ya Perbaharui"}),e.jsx(_e,{color:"error",variant:"gradient",onClick:()=>P(!1),children:"Batal"})]})})]})]})]})},dr="https://api.arsip.go.id/user/api/";class Ij{constructor(){ae(this,"getPaging",async s=>{const n=Ce.serializeObjectToQueryString(s);return await se.get(`${dr}pengguna/verifikator?${n}`).then(l=>l)});ae(this,"post",async s=>await se.post(`${dr}pengguna/verifikator`,s).then(i=>i));ae(this,"put",async(s,n)=>await se.put(`${dr}pengguna/verifikator/${s}`,n).then(l=>l));ae(this,"delete",async s=>await se.delete(`${dr}pengguna/verifikator/${s}`).then(i=>i));ae(this,"refreshUser",async s=>await se.put(`${dr}pengguna/verifikator/reset`,s).then(i=>i));ae(this,"refreshUserCheck",async s=>await se.put(`${dr}pengguna/verifikator/reset-check`,s).then(i=>i))}}const Aj=fa().shape({verifikator:vs().min(1,"Pengguna harus dipilih").required("Pengguna harus dipilih")}),Oj=()=>{const r="Verifikator",[s,n]=a.useState(!1);a.useEffect(()=>{n(ge(r,"is_read",!0))},[]);const t=JSON.parse(Le.getItem("users")),i=new Ij,[l,m]=a.useState(!1),[p,B]=a.useState(null),[K,W]=Ga.useState(!1),[z,T]=a.useState(null),[L,$]=a.useState(!1),[M,H]=a.useState("Simpan"),[V,A]=a.useState(""),[G,X]=a.useState(null),[O,I]=a.useState(!0),[_,C]=a.useState({id:0,jenis:"",user_id:t==null?void 0:t.id,nama_pengguna:"",nama_organisasi:"",nama:"",jabatan:"",instansi:"",verifikator:null,organisasi_id:t==null?void 0:t.organisasi_id,public_organisasi_id:t==null?void 0:t.public_organisasi_id}),[k,b]=a.useState({total:0,from:1,to:1}),[y,o]=a.useState(!0),[F,x]=a.useState(!1),[S,f]=a.useState([]),[R,u]=a.useState([]),D=(te,ne)=>{const{checked:pe}=te.target;f(he=>pe?he.length>=10?(U.fire({icon:"warning",title:"Batas Data Cheklist 10",text:"Anda tidak bisa mencentang lebih dari 10 data.",showConfirmButton:!0}),he):[...he,ne]:he.filter(oe=>oe!==ne))},E=()=>{x(!1)},[J,P]=a.useState([]),h=te=>{u(S),x(!0),P(ne=>({...ne}))},d=te=>{o(!1);const pe={data:R.map(he=>({id:he}))};i.refreshUserCheck(pe).then(he=>{var oe,je,Ne;U.fire({icon:(oe=he.data)!=null&&oe.success?"success":"warning",title:(je=he.data)!=null&&je.success?"Berhasil":"Gagal",text:(Ne=he.data)==null?void 0:Ne.message,showConfirmButton:!1,timer:1500}),he.data.success&&(v(!0),E(),f([]))}).catch(he=>{var je,Ne;const oe=Oe(he.response.data.result);U.fire("Gagal",oe??((Ne=(je=he.response)==null?void 0:je.data)==null?void 0:Ne.message),"error")}).finally(()=>o(!0))};let j=[];p==null?j=[]:j=p.map(te=>({user_id:te.user_id,nomenklatur_ori:te.nomenklatur_ori,nama:te.nama,jabatan:te.jabatan,unit_kerja:te.unit_kerja,instansi:te.instansi,organisasi:te.organisasi,public_organisasi:te.public_organisasi,action:e.jsxs("div",{className:"flex items-center justify-center px-3 gap-3 w-full",children:[(te==null?void 0:te.is_update)&&e.jsx(Dt,{size:"1.5em",color:"#00bcd4",onClick:()=>$e(te==null?void 0:te.id),className:"cursor-pointer",title:"Lihat"}),ge(r,"is_delete")&&e.jsx($a,{size:"1.5em",color:"#e62e2d",onClick:()=>Ge(te),className:"text-center cursor-pointer",title:"Hapus"})]}),checkbox:e.jsx("div",{className:"flex items-center justify-center",children:(te==null?void 0:te.is_update)&&e.jsx("input",{type:"checkbox",className:"form-checkbox h-5 w-5 text-indigo-600",checked:S.includes(te.id),onChange:ne=>D(ne,te.id)})})}));const[g,c]=a.useState({page:1,rows:10,sortField:"",sortOrder:null,public_organisasi_id:t==null?void 0:t.public_organisasi_id,group_role:t==null?void 0:t.group_role,organisasi_id:t==null?void 0:t.organisasi_id,filters:{nama:{value:""},jabatan:{value:""},instansi:{value:""},organisasi_id:{value:t==null?void 0:t.organisasi_id},public_organisasi_id:{value:t==null?void 0:t.public_organisasi_id}}});a.useEffect(()=>{v()},[g]);const v=async(te=!1)=>{te&&(g.page=1),m(!0),await i.getPaging(g).then(ne=>{let pe=ne.data.result;pe.data&&(X(pe.last_page),B(pe.data),m(!1)),m(!1),b({...k,to:pe.to,from:pe.from,total:pe.total})}).catch(ne=>{m(!1),b({...k,to:0,from:!1,total:0})})},N=Da((te,ne,pe=null)=>{if(pe){let oe=pe.target;for(;oe&&oe.tagName!=="TD";)oe=oe.parentNode;if(oe&&oe.tagName==="TD"){const je=oe.querySelector(".clear-input"),Ne=oe.querySelector("input");ne?je.classList.remove("hidden"):(je.classList.add("hidden"),Ne.value="")}}let he={...g};he.filters[te].value=ne,he.page=1,c(he)},600),Q=te=>{let ne={...g};ne.page=te,c(ne),window.scrollTo({top:0,behavior:"smooth"})},re=te=>{let ne={...g};ne.rows=te,ne.page=1,c(ne)},ye=te=>{let ne={...g};ne.sortField=te,g.sortField!=te?g.sortOrder==""&&(ne.sortOrder=1):g.sortOrder==1?ne.sortOrder=-1:(ne.sortOrder="",ne.sortField=""),ne.page=1,c(ne)},xe=te=>{I(!1),te.id!==0?i.put(te.id,te).then(ne=>{var pe,he,oe,je;U.fire((pe=ne.data)!=null&&pe.success?"Berhasil":"Gagal",(he=ne.data)==null?void 0:he.message,(oe=ne.data)!=null&&oe.success?"success":"warning"),(je=ne.data)!=null&&je.success&&(v(!0),Pe())}).catch(ne=>{var he,oe;const pe=Oe(ne.response.data.result);U.fire("Gagal",pe??((oe=(he=ne.response)==null?void 0:he.data)==null?void 0:oe.message),"error")}).finally(()=>I(!0)):i.post(te).then(ne=>{var pe,he,oe,je;U.fire((pe=ne.data)!=null&&pe.success?"Berhasil":"Gagal",(he=ne.data)==null?void 0:he.message,(oe=ne.data)!=null&&oe.success?"success":"warning"),(je=ne.data)!=null&&je.success&&(v(!0),Pe())}).catch(ne=>{var pe,he;console.log(ne),U.fire("Gagal",(he=(pe=ne.response)==null?void 0:pe.data)==null?void 0:he.message,"error")}).finally(()=>I(!0))},fe=te=>{W(!0),C({id:0,verifikator:null,organisasi_id:t==null?void 0:t.organisasi_id,public_organisasi_id:t==null?void 0:t.public_organisasi_id}),T(null),H("Simpan"),A("Tambah"),$(!1)},Ge=te=>{U.fire({title:"Konfirmasi",text:`Data ${te.nama} akan dihapus ?`,icon:"warning",showCancelButton:!0,confirmButtonText:"Hapus",cancelButtonText:"Batal",customClass:{confirmButton:"button button-error",cancelButton:"button button-info"}}).then(ne=>{ne.isConfirmed&&(ka(),i.delete(te.id).then(pe=>{pe.status==200&&v(),U.fire("Berhasil","Data Berhasil Dihapus","success")}).catch(pe=>{var oe,je;const he=Oe(pe.response.data.result);U.fire("Gagal",he??((je=(oe=pe.response)==null?void 0:oe.data)==null?void 0:je.message),"error")}))})},$e=te=>{U.fire({title:"Perbarui Verifikator",text:"Apakah Anda yakin ingin memperbarui Verifikator ini ?",icon:"question",showCancelButton:!0,confirmButtonText:"Ya, Perbarui",cancelButtonText:"Batal",customClass:{confirmButton:"button button-success",cancelButton:"button button-secondary"}}).then(ne=>{ne.isConfirmed&&(ka(),i.refreshUser({id:te}).then(pe=>{pe.status==200&&v(),U.fire("Berhasil","Data Berhasil Diperbarui","success")}).catch(pe=>{var oe,je,Ne,Re;const he=Oe((je=(oe=pe.response)==null?void 0:oe.data)==null?void 0:je.result);U.fire("Gagal",he??((Re=(Ne=pe.response)==null?void 0:Ne.data)==null?void 0:Re.message),"error")}))})},Pe=()=>{W(!1)};return e.jsxs(aa,{children:[e.jsx(la,{}),s&&e.jsxs(e.Fragment,{children:[e.jsx(ie,{pt:6,pb:3,children:e.jsxs(Me,{children:[e.jsx(ie,{px:3,pt:3,lineHeight:1,children:e.jsxs(w,{container:!0,direction:"row",justifyContent:"space-between",alignItems:"center",children:[e.jsx(w,{item:!0,children:e.jsxs(le,{variant:"h5",fontWeight:"medium",children:["Daftar ",r]})}),ge(r,"is_create")&&e.jsx(w,{item:!0,children:e.jsxs(_e,{variant:"gradient",color:"info",onClick:fe,children:[e.jsx(Ea,{size:"1.5em"}),"Tambah Baru"]})})]})}),e.jsx(ie,{px:3,pt:3,lineHeight:1,children:e.jsxs(w,{container:!0,direction:"row",justifyContent:"space-between",alignItems:"center",children:[e.jsx(w,{item:!0,children:e.jsx(le,{variant:"h5",fontWeight:"medium"})}),e.jsx(w,{item:!0,children:e.jsx(ie,{children:e.jsx(_e,{variant:"gradient",color:"success",onClick:()=>h(),disabled:S.length==0,children:"Sinkronisasi Verifikator"})})})]})}),e.jsx("div",{className:"overflow-auto",children:e.jsxs("div",{className:"table p-10 min-w-full",children:[e.jsx("div",{className:"flex items-center justify-end mb-1",children:e.jsx(pa,{config:g,handleClick:re})}),e.jsxs("table",{className:"w-full text-sm text-left !text-gray-700 dark:text-gray-400 table-bordered",children:[e.jsx("thead",{className:"text-xs text-gray-500 uppercase border-b-2 mb-1",children:e.jsxs("tr",{children:[e.jsx(q,{text:"#"}),e.jsx(q,{text:"Nama Verifikator",sortField:"nama",sortOrder:g.sortOrder,config:g,handleClick:()=>ye("nama")}),e.jsx(q,{text:"Jabatan",sortField:"jabatan",sortOrder:g.sortOrder,config:g,handleClick:()=>ye("jabatan")}),e.jsx(q,{text:"Instansi / Unit Kerja",sortField:"instansi",sortOrder:g.sortOrder,config:g,handleClick:()=>ye("instansi")}),e.jsx(q,{text:"Aksi",className:"justify-center min-w-[2rem]"})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{className:"border-b border-slate-300",children:[e.jsx("td",{className:"px-1 py-1"}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"nama",onSearch:N,placeholder:"Nama",type:"input"})}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"jabatan",onSearch:N,placeholder:"Jabatan",type:"input"})}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"instansi",onSearch:N,placeholder:"Instansi",type:"input"})}),e.jsx("td",{})]}),l?e.jsx("tr",{className:"border-b border-slate-300",children:e.jsx("td",{colSpan:5,children:e.jsx(ia,{})})}):e.jsx(e.Fragment,{}),j.length?j.map((te,ne)=>e.jsxs("tr",{className:"border-b border-slate-300",children:[e.jsx("td",{className:"px-1 py-1",children:te.checkbox}),e.jsx("td",{className:"max-w-[20rem] px-6 py-6",children:te.nama}),e.jsx("td",{className:"max-w-[20rem] px-6 py-6",children:te.jabatan}),e.jsxs("td",{className:"max-w-[20rem] px-6 py-6",children:[te.unit_kerja&&`${te.unit_kerja} -`," ",te.instansi??"-"]}),e.jsxs("td",{className:"px-1 text-right w-[2rem]",children:[" ",te.action," "]})]},ne)):e.jsx(e.Fragment,{})]})]}),e.jsxs("nav",{className:"flex items-center justify-between p-4","aria-label":"Table navigation",children:[e.jsx("span",{className:"text-sm text-gray-400",children:k.from&&`Menampilkan ${Se(k.from)} sampai ${Se(k.to)} dari ${Se(k.total)} entri`}),e.jsx(xa,{currentPage:g.page,lastPage:G,displayCount:5,handleClick:Q})]})]})})]})}),e.jsx(ua,{}),e.jsx(Fa,{open:K,onClose:Pe,children:e.jsxs("div",{children:[e.jsx(_a,{children:V}),e.jsx(ca,{initialValues:_,onSubmit:xe,validateOnChange:!0,validationSchema:Aj,children:e.jsx(da,{id:"form",className:"text-sm",children:e.jsx("div",{className:"p-5",children:e.jsx("div",{className:"col-span-12 lg:col-span-6 mb-5 lg:mb-0",children:e.jsx(w,{mt:1,children:e.jsxs("div",{className:"p-3",children:[e.jsx("input",{type:"hidden",name:"id",value:_.id}),e.jsx(ce,{name:"verifikator",children:({field:te,form:ne,meta:pe})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Pengguna",required:!0,error:pe.error&&pe.touched}),e.jsx(ra,{isMulti:!0,url:"pengguna/user/select",isDisabled:L,callbackChange:he=>{const oe=Array.from(he,je=>je);ne.setFieldValue("verifikator",oe.length?oe:null)},selectedData:z,keyValue:["id","nama_jabatan"],placeholder:"Pilih Pengguna...",className:"text-base",optionParam:{sortField:"name",sortOrder:"asc",organisasi_id:t==null?void 0:t.organisasi_id,public_organisasi_id:t==null?void 0:t.public_organisasi_id,group_role:4,"select-target":"group-role-user-verifikator"}}),e.jsx(ue,{text:pe.error,error:pe.error&&pe.touched})]})})]})})})})})}),e.jsx(ya,{children:e.jsxs(e.Fragment,{children:[!L&&e.jsx(Je,{submit:O,color:"success",formId:"form",text:M}),e.jsx(_e,{color:L?"dark":"error",variant:"gradient",onClick:()=>W(!1),children:L?"Tutup":"Batal"})]})})]})}),e.jsxs(Fa,{open:F,onClose:E,children:[e.jsxs("div",{children:[e.jsx(_a,{className:"flex items-center gap-2",children:e.jsx(le,{children:"Apakah Anda yakin ingin memperbarui Verifikator ini ?"})}),e.jsx(ca,{initialValues:J,onSubmit:d,validateOnChange:!0,children:e.jsx(da,{id:"formDataBox",className:"text-sm"})})]}),e.jsx(ya,{children:e.jsxs(e.Fragment,{children:[e.jsx(Je,{submit:y,color:"success",formId:"formDataBox",text:"Ya Perbaharui"}),e.jsx(_e,{color:"error",variant:"gradient",onClick:()=>x(!1),children:"Batal"})]})})]})]})]})},bt="https://api.arsip.go.id/user/api/";class Bj{constructor(){ae(this,"getPaging",async s=>{const n=Ce.serializeObjectToQueryString(s);return await se.get(`${bt}pengguna/daftar-penandatangan?${n}`).then(l=>l)});ae(this,"post",async s=>await se.post(`${bt}pengguna/daftar-penandatangan`,s,{headers:{"Content-Type":"multipart/form-data"}}).then(i=>i));ae(this,"detail",async s=>await se.get(`${bt}pengguna/daftar-penandatangan/${s}`).then(i=>i));ae(this,"put",async(s,n)=>await se.post(`${bt}pengguna/daftar-penandatangan/${s}`,n,{headers:{"Content-Type":"multipart/form-data"}}).then(l=>l));ae(this,"delete",async s=>await se.delete(`${bt}pengguna/daftar-penandatangan/${s}`).then(i=>i));ae(this,"refreshUser",async s=>await se.put(`${bt}pengguna/daftar-penandatangan/reset`,s).then(i=>i));ae(this,"refreshUserCheck",async s=>await se.put(`${bt}pengguna/daftar-penandatangan/reset-check`,s).then(i=>i));ae(this,"deleteFile",async s=>await se.delete(`${bt}pengguna/daftar-penandatangan-delete-file/${s}`).then(i=>i))}}const Lj=fa().shape({pengguna_id:wa().required("Data Pengguna harus dipilih"),file:Qa().notRequired().test("fileSize","Maksimal Ukuran File 512 KB",r=>r?r&&r.size<=524288:!0).test("fileType","File hanya mendukung format .PNG",r=>{const s=["image/png"];return r?r&&s.includes(r.type):!0})}),$j=fa().shape({pengguna_id:wa().required("Data Pengguna harus dipilih"),file:Qa().notRequired().test("fileSize","Maksimal Ukuran File 512 KB",r=>r?r&&r.size<=524288:!0).test("fileType","File hanya mendukung format .PNG",r=>{const s=["image/png"];return r?r&&s.includes(r.type):!0})});function Rj({image:r,onCropDone:s,onCropCancel:n}){const[t,i]=a.useState({x:0,y:0}),[l,m]=a.useState(1),[p,B]=a.useState(null),K=(z,T)=>{B(T)},W=async()=>{if(!p||typeof p.x>"u"||typeof p.y>"u"||typeof p.width>"u"||typeof p.height>"u"){console.error("Cropped area is not properly defined:",p);return}const z=document.createElement("canvas"),T=z.getContext("2d");z.width=414,z.height=122;const L=new Image;L.src=r,L.onload=()=>{const{x:$,y:M,width:H,height:V}=p;T.drawImage(L,$,M,H,V,0,0,z.width,z.height),z.toDataURL("image/jpeg"),s(p)},L.onerror=()=>{console.error("Failed to load the image for cropping.")}};return e.jsxs("div",{children:[e.jsx("div",{className:"cropper mb-4",children:e.jsx("div",{className:"flex justify-center",children:e.jsx(Ko,{image:r,aspect:414/122,crop:t,zoom:l,onCropChange:i,onZoomChange:m,onCropComplete:K,style:{containerStyle:{width:"100%",height:"300px",backgroundColor:"#fff"}}})})}),e.jsxs("div",{className:"flex flex-col justify-center gap-2",children:[e.jsxs("div",{className:"flex justify-center items-center gap-8",children:[e.jsx(le,{variant:"body",children:"Zoom"}),e.jsx(Co,{color:"primary",value:l,min:1,max:3,step:.1,"aria-label":"Zoom",onChange:(z,T)=>m(T)})]}),e.jsxs("div",{className:"flex justify-center items-center",children:[e.jsx(_e,{color:"secondary",className:"me-2 btn btn-sm",onClick:n,children:"Batal"}),"  ",e.jsx(_e,{color:"info",className:"me-2 btn btn-sm",onClick:W,children:"Potong"})]})]})]})}const[Hr,Ej]=["choose_img","crop_img"],Mj=()=>{const r="Penandatangan",s=JSON.parse(Le.getItem("users")),[n,t]=a.useState(!1);a.useEffect(()=>{t(ge(r,"is_read",!0))},[]);const i=new Bj,[l,m]=a.useState(!1),[p,B]=a.useState(null),[K,W]=a.useState(null),[z,T]=Ga.useState(!1),[L,$]=a.useState(!1),[M,H]=a.useState("Simpan"),[V,A]=a.useState(""),[G,X]=a.useState(null),[O,I]=a.useState(null),[_,C]=a.useState(""),[k,b]=a.useState(!0),[y,o]=a.useState(Hr),[F,x]=a.useState(""),[S,f]=a.useState({id:0,organisasi_id:s==null?void 0:s.organisasi_id,public_organisasi_id:s==null?void 0:s.public_organisasi_id,pengguna_id:"",nama:"",jabatan:"",instansi:"",file:null,status:"AKTIF",unit_kerja:""}),[R,u]=a.useState({total:0,from:1,to:1}),[D,E]=a.useState(!0),[J,P]=a.useState(!1),[h,d]=a.useState([]),[j,g]=a.useState([]),c=(Be,Fe)=>{const{checked:Ke}=Be.target;d(Qe=>Ke?Qe.length>=10?(U.fire({icon:"warning",title:"Batas Data Cheklist 10",text:"Anda tidak bisa mencentang lebih dari 10 data.",showConfirmButton:!0}),Qe):[...Qe,Fe]:Qe.filter(ea=>ea!==Fe))},v=()=>{P(!1)},[N,Q]=a.useState([]),re=Be=>{g(h),P(!0),Q(Fe=>({...Fe}))},ye=Be=>{E(!1);const Ke={data:j.map(Qe=>({id:Qe}))};i.refreshUserCheck(Ke).then(Qe=>{var ea,ja,Aa;U.fire({icon:(ea=Qe.data)!=null&&ea.success?"success":"warning",title:(ja=Qe.data)!=null&&ja.success?"Berhasil":"Gagal",text:(Aa=Qe.data)==null?void 0:Aa.message,showConfirmButton:!1,timer:1500}),Qe.data.success&&($e(!0),v(),d([]))}).catch(Qe=>{var ja,Aa;const ea=Oe(Qe.response.data.result);U.fire("Gagal",ea??((Aa=(ja=Qe.response)==null?void 0:ja.data)==null?void 0:Aa.message),"error")}).finally(()=>E(!0))};let xe=[];p==null?xe=[]:xe=p.map(Be=>({id:Be.id,nama:Be.nama,jabatan:Be.jabatan,instansi:Be.instansi,unit_kerja:Be.unit_kerja,filename:Be.filename,folder:Be.folder,status:Be.status,created_at:Be.created_at,organisasi:Be.organisasi,action:e.jsxs("div",{className:"flex items-center justify-center gap-3 w-full",children:[ge(r,"is_update")&&e.jsx(Va,{size:"1.5em",color:"#fbcf33",onClick:()=>je(Be),className:"cursor-pointer",title:"Edit"}),e.jsx(Oa,{size:"1.5em",color:"#17c1e8",onClick:()=>Ne(Be),className:"cursor-pointer",title:"View"}),(Be==null?void 0:Be.is_update)&&e.jsx(Dt,{size:"1.5em",color:"#00bcd4",onClick:()=>Re(Be==null?void 0:Be.id),className:"cursor-pointer",title:"Lihat"}),ge(r,"is_delete")&&e.jsx($a,{size:"1.5em",color:"#e62e2d",onClick:()=>sa(Be),className:"cursor-pointer",title:"Hapus"})]}),checkbox:e.jsx("div",{className:"flex items-center justify-center",children:(Be==null?void 0:Be.is_update)&&e.jsx("input",{type:"checkbox",className:"form-checkbox h-5 w-5 text-indigo-600",checked:h.includes(Be.id),onChange:Fe=>c(Fe,Be.id)})})}));const[fe,Ge]=a.useState({page:1,rows:10,sortField:"",sortOrder:null,public_organisasi_id:s==null?void 0:s.public_organisasi_id,group_role:s==null?void 0:s.group_role,organisasi_id:s==null?void 0:s.organisasi_id,filters:{nama:{value:""},jabatan:{value:""},instansi:{value:""},organisasi_id:{value:s==null?void 0:s.organisasi_id},public_organisasi_id:{value:s==null?void 0:s.public_organisasi_id},status:{value:""}}});a.useEffect(()=>{$e()},[fe]);const $e=async(Be=!1)=>{Be&&(fe.page=1),m(!0),await i.getPaging(fe).then(Fe=>{let Ke=Fe.data.result;Ke.data&&(X(Ke.last_page),B(Ke.data),m(!1)),m(!1),u({...R,to:Ke.to,from:Ke.from,total:Ke.total})}).catch(Fe=>{m(!1),u({...R,to:0,from:!1,total:0})})},Pe=Da((Be,Fe,Ke=null)=>{if(Ke){let ea=Ke.target;for(;ea&&ea.tagName!=="TD";)ea=ea.parentNode;if(ea&&ea.tagName==="TD"){const ja=ea.querySelector(".clear-input"),Aa=ea.querySelector("input");Fe?ja.classList.remove("hidden"):(ja.classList.add("hidden"),Aa.value="")}}let Qe={...fe};Qe.filters[Be].value=Fe,Qe.page=1,Ge(Qe)},600),te=Be=>{let Fe={...fe};Fe.page=Be,Ge(Fe),window.scrollTo({top:0,behavior:"smooth"})},ne=Be=>{let Fe={...fe};Fe.rows=Be,Fe.page=1,Ge(Fe)},pe=Be=>{let Fe={...fe};Fe.sortField=Be,fe.sortField!=Be?fe.sortOrder==""&&(Fe.sortOrder=1):fe.sortOrder==1?Fe.sortOrder=-1:(Fe.sortOrder="",Fe.sortField=""),Fe.page=1,Ge(Fe)},he=Be=>{b(!1),Be.id!==0?i.put(Be.id,Be).then(Fe=>{var Ke,Qe,ea;U.fire((Ke=Fe.data)!=null&&Ke.success?"Berhasil":"Gagal",(Qe=Fe.data)==null?void 0:Qe.message,(ea=Fe.data)!=null&&ea.success?"success":"warning"),Fe.data.success&&($e(!0),Te())}).catch(Fe=>{var Qe,ea;const Ke=Oe(Fe.response.data.result);U.fire("Gagal",Ke??((ea=(Qe=Fe.response)==null?void 0:Qe.data)==null?void 0:ea.message),"error")}).finally(()=>b(!0)):i.post(Be).then(Fe=>{var Ke,Qe,ea;U.fire((Ke=Fe.data)!=null&&Ke.success?"Berhasil":"Gagal",(Qe=Fe.data)==null?void 0:Qe.message,(ea=Fe.data)!=null&&ea.success?"success":"warning"),Fe.data.success&&($e(!0),Te())}).catch(Fe=>{var Qe,ea;const Ke=Oe(Fe.response.data.result);U.fire("Gagal",Ke??((ea=(Qe=Fe.response)==null?void 0:Qe.data)==null?void 0:ea.message),"error")}).finally(()=>b(!0))},oe=Be=>{T(!0),f({id:0,organisasi_id:s==null?void 0:s.organisasi_id,public_organisasi_id:s==null?void 0:s.public_organisasi_id,pengguna_id:"",nama:"",jabatan:"",instansi:"",file:null,status:"AKTIF"}),I(null),W(null),H("Simpan"),A("Tambah"),$(!1)},je=Be=>{T(!0),f({id:Be.id,organisasi_id:Be.organisasi_id,public_organisasi_id:Be.public_organisasi_id,pengguna_id:Be.pengguna_id,nama:Be.nama,jabatan:Be.jabatan,instansi:Be.instansi,file:Be.file,status:Be.status,unit_kerja:Be==null?void 0:Be.unit_kerja,filename:Be.filename,folder:Be.folder}),me(Be.id),H("Perbarui"),A("Ubah"),$(!1)},Ne=Be=>{T(!0),f({id:Be.id,organisasi_id:Be.organisasi_id,public_organisasi_id:Be.public_organisasi_id,pengguna_id:Be.pengguna_id,nama:Be.nama,jabatan:Be.jabatan,instansi:Be.instansi,file:Be.file,status:Be.status}),me(Be.id),A("Lihat"),$(!0)},Re=Be=>{U.fire({title:"Perbarui Penandatangan",text:"Apakah Anda yakin ingin memperbarui Penandatangan ini ?",icon:"question",showCancelButton:!0,confirmButtonText:"Ya, Perbarui",cancelButtonText:"Batal",customClass:{confirmButton:"button button-success",cancelButton:"button button-secondary"}}).then(Fe=>{Fe.isConfirmed&&(ka(),i.refreshUser({id:Be}).then(Ke=>{Ke.status==200&&$e(),U.fire("Berhasil","Data Berhasil Diperbarui","success")}).catch(Ke=>{var ea,ja,Aa,Ee;const Qe=Oe((ja=(ea=Ke.response)==null?void 0:ea.data)==null?void 0:ja.result);U.fire("Gagal",Qe??((Ee=(Aa=Ke.response)==null?void 0:Aa.data)==null?void 0:Ee.message),"error")}))})},sa=Be=>{U.fire({title:"Konfirmasi",text:`Data ${Be.nama} akan dihapus ?`,icon:"warning",showCancelButton:!0,confirmButtonText:"Hapus",cancelButtonText:"Batal",customClass:{confirmButton:"button button-error",cancelButton:"button button-info"}}).then(Fe=>{Fe.isConfirmed&&(ka(),i.delete(Be.id).then(Ke=>{Ke.status==200&&$e(),U.fire("Berhasil","Data Berhasil Dihapus","success")}).catch(Ke=>{var ea,ja;const Qe=Oe(Ke.response.data.result);U.fire("Gagal",Qe??((ja=(ea=Ke.response)==null?void 0:ea.data)==null?void 0:ja.message),"error")}))})},Te=()=>{T(!1),I(null),W(null)},me=async Be=>{await i.detail(Be).then(Fe=>{var Qe;const Ke=(Qe=Fe.data)==null?void 0:Qe.result;I(Ke==null?void 0:Ke.url),W({id:Ke==null?void 0:Ke.pengguna_id,nama:Ke==null?void 0:Ke.nama,desc_jabatan:Ke==null?void 0:Ke.jabatan,desc_unit_kerja:Ke==null?void 0:Ke.unit_kerja,desc_instansi:Ke==null?void 0:Ke.instansi,nama_jabatan:`${Ke==null?void 0:Ke.nama} - ${Ke==null?void 0:Ke.jabatan}`})}).catch(Fe=>{I(""),W({})})},ee=Be=>{const Fe=Be.target.files[0];if(Fe){const Ke=new FileReader;Ke.addEventListener("load",()=>{var Qe;return C(((Qe=Ke.result)==null?void 0:Qe.toString())||"")}),Ke.readAsDataURL(Fe),x(Fe==null?void 0:Fe.name),o(Ej)}},Y=async(Be,Fe)=>{if(!Be||!Be.width||!Be.height){console.error("Invalid imgCroppedArea dimensions:",Be);return}const Ke=new OffscreenCanvas(Be.width,Be.height),Qe=Ke.getContext("2d");let ea=new Image;ea.src=_,ea.onload=async function(){Qe.drawImage(ea,Be.x,Be.y,Be.width,Be.height,0,0,Be.width,Be.height);const ja=await Ke.convertToBlob({type:"image/png",quality:.7}),Aa=new File([ja],"cropped-image.png",{type:"image/png"}),Ee=URL.createObjectURL(Aa);Fe.setFieldValue("file",Aa),C(Ee),I(Ee),o(Hr)}},ke=()=>{o(Hr),C("")},De=Be=>{U.fire({title:"Konfirmasi",text:"File TTD akan dihapus ?",icon:"warning",showCancelButton:!0,confirmButtonText:"Hapus",cancelButtonText:"Batal",customClass:{confirmButton:"button button-error",cancelButton:"button button-info"}}).then(Fe=>{Fe.isConfirmed&&(ka(),i.deleteFile(Be).then(Ke=>{Ke.status===200&&U.fire("Berhasil","Data Berhasil Dihapus","success").then(()=>{window.location.reload()})}).catch(Ke=>{var ea,ja;const Qe=Oe(Ke.response.data.result);U.fire("Gagal",Qe??((ja=(ea=Ke.response)==null?void 0:ea.data)==null?void 0:ja.message),"error")}))})},ta=Be=>e.jsxs("div",{className:"w-100 h-auto mb-5",children:["Syarat untuk menambahkan ",e.jsx("u",{children:"File Tanda Tangan Elektronik"})," yaitu:",e.jsxs("div",{className:"grid grid-cols-12 mb-5 gap-1 lg:mb-0 text-sm",children:[e.jsx("div",{className:"col-span-12",children:e.jsxs("div",{className:"flex items-start justify-start",children:[e.jsx(Yr,{className:"w-5 h-4 flex-shrink-0 text-green-500 me-2"}),e.jsxs("span",{children:["File harus ",e.jsx("b",{children:".png"})," dengan ukuran maksimal ",e.jsx("b",{children:"512 Kb"}),"."]})]})}),e.jsx("div",{className:"col-span-12",children:e.jsxs("div",{className:"flex items-start justify-start",children:[e.jsx(Yr,{className:"w-5 h-4 flex-shrink-0 text-green-500 me-2"}),e.jsxs("span",{children:["File tersebut akan digunakan sebagai tanda tangan elektronik, jika"," ",e.jsx("u",{children:"File tidak didaftarkan"})," maka tanda tangan menggunakan QR bawaan dari"," ",e.jsx("b",{children:"Sistem"})]})]})}),Be=="Ubah"?e.jsx("div",{className:"col-span-12",children:e.jsxs("div",{className:"flex items-start justify-start",children:[e.jsx(Yr,{className:"w-5 h-4 flex-shrink-0 text-green-500 me-2"}),e.jsxs("span",{children:["Apabila terdapat ",e.jsx("b",{children:"File TTD sebelumnya"})," dan akan diunggah ulang maka File TTD sebelumnya akan ",e.jsx("b",{children:"terhapus secara permanen"})]})]})}):e.jsx(e.Fragment,{})]}),e.jsx("hr",{})]});return e.jsxs(aa,{children:[e.jsx(la,{}),n&&e.jsxs(e.Fragment,{children:[e.jsx(ie,{pt:6,pb:3,children:e.jsxs(Me,{children:[e.jsx(ie,{px:3,pt:3,lineHeight:1,children:e.jsxs(w,{container:!0,direction:"row",justifyContent:"space-between",alignItems:"center",children:[e.jsx(w,{item:!0,children:e.jsxs(le,{variant:"h5",fontWeight:"medium",children:["Daftar ",r]})}),ge(r,"is_create")&&e.jsx(w,{item:!0,children:e.jsxs(_e,{variant:"gradient",color:"info",onClick:oe,children:[e.jsx(Ea,{size:"1.5em"}),"Tambah Baru"]})})]})}),e.jsx(ie,{px:3,pt:3,lineHeight:1,children:e.jsxs(w,{container:!0,direction:"row",justifyContent:"space-between",alignItems:"center",children:[e.jsx(w,{item:!0,children:e.jsx(le,{variant:"h5",fontWeight:"medium"})}),e.jsx(w,{item:!0,children:e.jsx(ie,{children:e.jsx(_e,{variant:"gradient",color:"success",onClick:()=>re(),disabled:h.length==0,children:"Sinkronisasi Penandatangan"})})})]})}),e.jsx("div",{className:"overflow-auto",children:e.jsxs("div",{className:"table p-6 min-w-full",children:[e.jsx("div",{className:"flex items-center justify-end mb-1",children:e.jsx(pa,{config:fe,handleClick:ne})}),e.jsxs("table",{className:"w-full text-sm text-left !text-gray-700 dark:text-gray-400 table-bordered",children:[e.jsx("thead",{className:"text-xs text-gray-500 uppercase border-b-2 mb-1",children:e.jsxs("tr",{children:[e.jsx(q,{text:"#"}),e.jsx(q,{text:"Nama Penandatangan",sortField:"nama",sortOrder:fe.sortOrder,config:fe,handleClick:()=>pe("nama")}),e.jsx(q,{text:"Jabatan",sortField:"jabatan",sortOrder:fe.sortOrder,config:fe,handleClick:()=>pe("jabatan")}),e.jsx(q,{text:"Unit Kerja / Instansi",sortField:"instansi",sortOrder:fe.sortOrder,config:fe,handleClick:()=>pe("instansi")}),e.jsx(q,{text:"File",className:"justify-center"}),e.jsx(q,{text:"Status",sortField:"status",sortOrder:fe.sortOrder,config:fe,handleClick:()=>pe("status")}),e.jsx(q,{text:"Aksi",className:"justify-center min-w-[2rem]"})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{className:"border-b border-slate-300",children:[e.jsx("td",{className:"px-1 py-1"}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"nama",onSearch:Pe,placeholder:"Nama",type:"input"})}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"jabatan",onSearch:Pe,placeholder:"Jabatan",type:"input"})}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"instansi",onSearch:Pe,placeholder:"Instansi",type:"input"})}),e.jsx("td",{}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"status",onSearch:Pe,placeholder:"Status",type:"status"})}),e.jsx("td",{})]}),l?e.jsx("tr",{className:"border-b border-slate-300",children:e.jsx("td",{colSpan:7,children:e.jsx(ia,{})})}):e.jsx(e.Fragment,{}),xe.length?xe.map((Be,Fe)=>e.jsxs("tr",{className:"border-b border-slate-300",children:[e.jsx("td",{className:"px-1 py-1",children:Be.checkbox}),e.jsx("td",{className:"max-w-[10rem] flex-wrap px-6 py-6",children:Be.nama}),e.jsx("td",{className:"max-w-[10rem] flex-wrap px-6 py-6",children:Be.jabatan}),e.jsxs("td",{className:"max-w-[10rem] flex-wrap px-6 py-6",children:[Be.unit_kerja&&`${Be.unit_kerja} - `,Be.instansi]}),e.jsx("td",{className:"max-w-[10rem] flex-wrap px-6 py-6",children:(Be==null?void 0:Be.filename)&&e.jsx(Ou,{className:"text-blue-600 h-6 w-6 cursor-pointer",onClick:()=>Wa(Be.filename,Be.folder??"file_ttd"),title:Be.filename})}),e.jsx("td",{className:"max-w-[20rem] flex-wrap px-6 py-6",children:Be.status==="AKTIF"?e.jsx(be,{badgeContent:"Aktif",color:"success",container:!0}):e.jsx(be,{badgeContent:"Non-Aktif",color:"error",container:!0})}),e.jsxs("td",{className:"px-1 text-right w-[2rem]",children:[" ",Be.action," "]})]},Fe)):e.jsx(e.Fragment,{})]})]}),e.jsxs("nav",{className:"flex items-center justify-between p-4","aria-label":"Table navigation",children:[e.jsx("span",{className:"text-sm text-gray-400",children:R.from&&`Menampilkan ${Se(R.from)} sampai ${Se(R.to)} dari ${Se(R.total)} entri`}),e.jsx(xa,{currentPage:fe.page,lastPage:G,displayCount:5,handleClick:te})]})]})})]})}),e.jsx(ua,{}),e.jsx(Fa,{open:z,onClose:Te,children:e.jsxs("div",{children:[e.jsx(_a,{children:V}),e.jsx(ca,{initialValues:S,onSubmit:he,validateOnChange:!0,validationSchema:V=="Tambah"?Lj:$j,children:e.jsx(da,{id:"form",encType:"multipart/form-data",className:"text-sm",children:e.jsx("div",{className:"p-5 grid grid-cols-12 mb-10 lg:mb-0",children:e.jsxs("div",{className:"col-span-12 mb-5 lg:mb-0",children:[e.jsx(w,{children:ta(V)}),e.jsx(w,{children:e.jsxs("div",{className:"p-3",children:[e.jsx("input",{type:"hidden",name:"id",value:S.id}),e.jsx(ce,{name:"pengguna_id",children:({field:Be,form:Fe,meta:Ke})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Penandatangan",required:!0,error:Ke.error&&Ke.touched}),e.jsx(ra,{url:"pengguna/user/select",isDisabled:L,callbackChange:Qe=>{Fe.setFieldValue("pengguna_id",(Qe==null?void 0:Qe.id)??""),Fe.setFieldValue("nama",(Qe==null?void 0:Qe.nama)??""),Fe.setFieldValue("jabatan",(Qe==null?void 0:Qe.desc_jabatan)??""),Fe.setFieldValue("unit_kerja",(Qe==null?void 0:Qe.desc_unit_kerja)??""),Fe.setFieldValue("instansi",(Qe==null?void 0:Qe.desc_instansi)??"")},selectedData:K,keyValue:["id","nama_jabatan"],placeholder:"Pilih Pengguna...",className:"text-base",optionParam:{organisasi_id:s==null?void 0:s.organisasi_id,public_organisasi_id:s==null?void 0:s.public_organisasi_id,group_role:4,"select-target":"group-role-user-penandatangan"}}),e.jsx(ue,{text:Ke.error,error:Ke.error&&Ke.touched})]})})]})}),e.jsx(w,{children:e.jsx(Na,{children:e.jsx(ce,{name:"status",children:({field:Be,form:Fe,meta:Ke})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Status",required:!0,error:Ke.error&&Ke.touched}),e.jsxs("div",{className:"space-x-4 flex flex-row items-center",children:[e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{...Be,type:"radio",className:"form-radio  w-4 h-4 text-blue-500 focus:ring-2 focus:ring-blue-500",value:"AKTIF",checked:Be.value=="AKTIF",disabled:L||V=="Tambah"}),e.jsx("span",{className:"text-gray-700",children:"Aktif"})]}),e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{...Be,type:"radio",className:"form-radio  w-4 h-4 text-blue-500 focus:ring-2 focus:ring-blue-500",value:"NON-AKTIF",disabled:L||V=="Tambah",checked:Be.value=="NON-AKTIF"}),e.jsx("span",{className:"text-gray-700",children:"Non Aktif"})]})]}),e.jsx(ue,{text:Ke.error,error:Ke.error&&Ke.touched})]})})})}),e.jsx(w,{children:e.jsx("div",{className:"p-3",children:e.jsx(ce,{name:"file",children:({field:Be,form:Fe,meta:Ke})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"File",required:!1,error:Ke.error&&Ke.touched}),y===Hr?e.jsx(Xn,{...Be,onChange:ee,className:"max-h-[10rem] mb-5",accept:".png",initialFile:O,disabled:L}):e.jsx(Rj,{image:_,onCropDone:Qe=>Y(Qe,Fe),onCropCancel:ke,aspectRatio:4/3}),e.jsx(ue,{text:Ke.error,error:Ke.error&&Ke.touched})]})})})}),S.filename&&S.folder&&e.jsx(_e,{color:"error",className:"me-2 btn btn-sm",onClick:()=>De(S.id),children:"Hapus"})]})})})}),y==Hr&&e.jsx(ya,{children:e.jsxs(e.Fragment,{children:[!L&&e.jsx(Je,{submit:k,color:"success",formId:"form",text:M,disabled:!0}),e.jsx(_e,{color:L?"dark":"error",variant:"gradient",onClick:Te,children:L?"Tutup":"Batal"})]})})]})}),e.jsxs(Fa,{open:J,onClose:v,children:[e.jsxs("div",{children:[e.jsx(_a,{className:"flex items-center gap-2",children:e.jsx(le,{children:"Apakah Anda yakin ingin memperbarui Penandatangan ini ?"})}),e.jsx(ca,{initialValues:N,onSubmit:ye,validateOnChange:!0,children:e.jsx(da,{id:"formListBox",className:"text-sm"})})]}),e.jsx(ya,{children:e.jsxs(e.Fragment,{children:[e.jsx(Je,{submit:D,color:"success",formId:"formListBox",text:"Ya Perbaharui"}),e.jsx(_e,{color:"error",variant:"gradient",onClick:()=>P(!1),children:"Batal"})]})})]})]})]})},ur="https://api.arsip.go.id/user/api/";class Kj{constructor(){ae(this,"getPaging",async s=>{const n=Ce.serializeObjectToQueryString(s);return await se.get(`${ur}pengguna/tembusan?${n}`).then(l=>l)});ae(this,"post",async s=>await se.post(`${ur}pengguna/tembusan`,s).then(i=>i));ae(this,"put",async(s,n)=>await se.put(`${ur}pengguna/tembusan/${s}`,n).then(l=>l));ae(this,"delete",async s=>await se.delete(`${ur}pengguna/tembusan/${s}`).then(i=>i));ae(this,"refreshUser",async s=>await se.put(`${ur}pengguna/tembusan/reset`,s).then(i=>i));ae(this,"refreshUserCheck",async s=>await se.put(`${ur}pengguna/tembusan/reset-check`,s).then(i=>i))}}const zj=fa().shape({nama:ze().required("Nama harus diisi"),instansi:ze().required("Instansi harus diisi")}),Uj=()=>{const r="Tembusan";ga();const[s,n]=a.useState(!1);a.useEffect(()=>{n(ge(r,"is_read",!0))},[]);const t=JSON.parse(Le.getItem("users")),i=new Kj,[l,m]=a.useState(!1),[p,B]=a.useState(null),[K,W]=a.useState(null),[z,T]=a.useState(!1),[L,$]=a.useState(null),[M,H]=a.useState(null),[V,A]=a.useState(null),[G,X]=a.useState(!1),[O,I]=a.useState("Simpan"),[_,C]=a.useState(""),[k,b]=a.useState(null),[y,o]=a.useState(null),[F,x]=a.useState(!0),[S,f]=a.useState({id:0,jenis:"",user_id:t==null?void 0:t.id,organisasi_id:"",nama_pengguna:"",nama_organisasi:"",nama:"",jabatan:"",instansi:"",organisasi_created_id:t==null?void 0:t.organisasi_id}),[R,u]=a.useState({total:0,from:1,to:1}),[D,E]=a.useState(!0),[J,P]=a.useState(!1),[h,d]=a.useState([]),[j,g]=a.useState([]),c=(Te,me)=>{const{checked:ee}=Te.target;d(Y=>ee?Y.length>=10?(U.fire({icon:"warning",title:"Batas Data Cheklist 10",text:"Anda tidak bisa mencentang lebih dari 10 data.",showConfirmButton:!0}),Y):[...Y,me]:Y.filter(ke=>ke!==me))},v=()=>{P(!1)},[N,Q]=a.useState([]),re=Te=>{g(h),P(!0),Q(me=>({...me}))},ye=Te=>{E(!1);const ee={data:j.map(Y=>({id:Y}))};i.refreshUserCheck(ee).then(Y=>{var ke,De,ta;U.fire({icon:(ke=Y.data)!=null&&ke.success?"success":"warning",title:(De=Y.data)!=null&&De.success?"Berhasil":"Gagal",text:(ta=Y.data)==null?void 0:ta.message,showConfirmButton:!1,timer:1500}),Y.data.success&&($e(!0),v(),d([]))}).catch(Y=>{var De,ta;const ke=Oe(Y.response.data.result);U.fire("Gagal",ke??((ta=(De=Y.response)==null?void 0:De.data)==null?void 0:ta.message),"error")}).finally(()=>E(!0))};let xe=[];p==null?xe=[]:xe=p.map(Te=>({jenis:Te.jenis,user_id:Te.user_id,organisasi_id:Te.organisasi_id,nama_pengguna:Te.nama_pengguna,nama_organisasi:Te.nama_organisasi,nama:Te.nama,jabatan:Te.jabatan,instansi:Te.instansi,action:e.jsxs("div",{className:"flex items-center justify-center gap-3 w-full",children:[(Te==null?void 0:Te.is_update)&&e.jsx(Dt,{size:"1.5em",color:"#00bcd4",onClick:()=>je(Te==null?void 0:Te.id),className:"cursor-pointer",title:"Lihat"}),ge(r,"is_delete")&&e.jsx($a,{size:"1.5em",color:"#e62e2d",onClick:()=>Ne(Te),className:"cursor-pointer",title:"Hapus"})]}),checkbox:e.jsx("div",{className:"flex items-center justify-center",children:(Te==null?void 0:Te.is_update)&&e.jsx("input",{type:"checkbox",className:"form-checkbox h-5 w-5 text-indigo-600",checked:h.includes(Te.id),onChange:me=>c(me,Te.id)})})}));const[fe,Ge]=a.useState({page:1,rows:10,sortField:"",sortOrder:null,search:"",organisasi_id:t==null?void 0:t.organisasi_id,public_organisasi_id:t==null?void 0:t.public_organisasi_id,group_role:t==null?void 0:t.group_role,filters:{organisasi_created_id:{value:""},jenis:{value:""},kepada:{value:""}}});a.useEffect(()=>{$e()},[fe]);const $e=async(Te=!1)=>{Te&&(fe.page=1),m(!0),await i.getPaging(fe).then(me=>{let ee=me.data.result;ee.data&&(b(ee.last_page),B(ee.data),m(!1)),m(!1),u({...R,to:ee.to,from:ee.from,total:ee.total})}).catch(me=>{m(!1),u({...R,to:0,from:!1,total:0})})},Pe=Da((Te,me,ee=null)=>{if(ee){let ke=ee.target;for(;ke&&ke.tagName!=="TD";)ke=ke.parentNode;if(ke&&ke.tagName==="TD"){const De=ke.querySelector(".clear-input"),ta=ke.querySelector("input");me?De.classList.remove("hidden"):(De.classList.add("hidden"),ta.value="")}}let Y={...fe};Y.filters[Te].value=me,Y.page=1,Ge(Y)},600),te=Te=>{let me={...fe};me.page=Te,Ge(me),window.scrollTo({top:0,behavior:"smooth"})},ne=Te=>{let me={...fe};me.rows=Te,me.page=1,Ge(me)},pe=Te=>{let me={...fe};me.sortField=Te,fe.sortField!=Te?fe.sortOrder==""&&(me.sortOrder=1):fe.sortOrder==1?me.sortOrder=-1:(me.sortOrder="",me.sortField=""),me.page=1,Ge(me)},he=Te=>{x(!1),Te.id!==0?i.put(Te.id,Te).then(me=>{var ee,Y,ke,De;U.fire((ee=me.data)!=null&&ee.success?"Berhasil":"Gagal",(Y=me.data)==null?void 0:Y.message,(ke=me.data)!=null&&ke.success?"success":"warning"),(De=me.data)!=null&&De.success&&($e(!0),Re())}).catch(me=>{var Y,ke;const ee=Oe(me.response.data.result);U.fire("Gagal",ee??((ke=(Y=me.response)==null?void 0:Y.data)==null?void 0:ke.message),"error")}).finally(()=>x(!0)):i.post(Te).then(me=>{var ee,Y;me.data.success?(U.fire("Berhasil",(ee=me.data)==null?void 0:ee.message,"success"),$e(!0),Re()):U.fire("Gagal",(Y=me.data)==null?void 0:Y.message,"warning")}).catch(me=>{var Y,ke;const ee=Oe(me.response.data.result);U.fire("Gagal",ee??((ke=(Y=me.response)==null?void 0:Y.data)==null?void 0:ke.message),"error")}).finally(()=>x(!0))},oe=Te=>{f({id:0,jenis:Te,user_id:null,organisasi_id:"",nama_pengguna:"",nama_organisasi:"",unit_kerja:"",nama:"",jabatan:"",instansi:"",organisasi_created_id:t==null?void 0:t.organisasi_id}),I("Simpan"),C("Tambah"),H(null),$(null),A(null),W(!1),T(!0),X(!1)},je=Te=>{U.fire({title:"Perbarui Tembusan",text:"Apakah Anda yakin ingin memperbarui Tembusan ini ?",icon:"question",showCancelButton:!0,confirmButtonText:"Ya, Perbarui",cancelButtonText:"Batal",customClass:{confirmButton:"button button-success",cancelButton:"button button-secondary"}}).then(me=>{me.isConfirmed&&(ka(),i.refreshUser({id:Te}).then(ee=>{ee.status==200&&$e(),U.fire("Berhasil","Data Berhasil Diperbarui","success")}).catch(ee=>{var ke,De,ta,Be;const Y=Oe((De=(ke=ee.response)==null?void 0:ke.data)==null?void 0:De.result);U.fire("Gagal",Y??((Be=(ta=ee.response)==null?void 0:ta.data)==null?void 0:Be.message),"error")}))})},Ne=Te=>{U.fire({title:"Konfirmasi",text:`Data ${Te.nama} akan dihapus ?`,icon:"warning",showCancelButton:!0,confirmButtonText:"Hapus",cancelButtonText:"Batal",customClass:{confirmButton:"button button-error",cancelButton:"button button-info"}}).then(me=>{me.isConfirmed&&(ka(),i.delete(Te.id).then(ee=>{ee.status==200&&$e(),U.fire("Berhasil","Data Berhasil Dihapus","success")}).catch(ee=>{var ke,De;const Y=Oe(ee.response.data.result);U.fire("Gagal",Y??((De=(ke=ee.response)==null?void 0:ke.data)==null?void 0:De.message),"error")}))})},Re=()=>{T(!1)},sa=()=>e.jsxs(Ls,{anchorEl:K,anchorOrigin:{vertical:"bottom",horizontal:"left"},open:!!K,onClose:()=>W(!1),sx:{mt:1,left:"-2rem"},children:[e.jsx(Ma,{title:"Tembusan Internal SRIKANDI",onClick:()=>oe("INTERNAL")}),e.jsx(Ma,{title:"Tembusan Eksternal SRIKANDI",onClick:()=>oe("SRIKANDI")}),e.jsx(Ma,{title:"Tembusan Eksternal Non SRIKANDI",onClick:()=>oe("EKSTERNAL")})]});return e.jsxs(aa,{children:[e.jsx(la,{}),s&&e.jsxs(e.Fragment,{children:[" ",e.jsx(ie,{pt:6,pb:3,children:e.jsxs(Me,{children:[e.jsx(ie,{px:3,pt:3,lineHeight:1,children:e.jsxs(w,{container:!0,direction:"row",justifyContent:"space-between",alignItems:"center",children:[e.jsx(w,{item:!0,children:e.jsx(le,{variant:"h5",fontWeight:"medium",children:"Daftar Naskah Tembusan"})}),ge(r,"is_create")&&e.jsx(w,{item:!0,children:e.jsxs(ie,{children:[e.jsxs(_e,{variant:"gradient",color:"info",onClick:Te=>W(Te.currentTarget),children:[e.jsx(Ea,{size:"1.5em"}),"Tambah Baru"]}),sa()]})})]})}),e.jsx(ie,{px:3,pt:3,lineHeight:1,children:e.jsxs(w,{container:!0,direction:"row",justifyContent:"space-between",alignItems:"center",children:[e.jsx(w,{item:!0,children:e.jsx(le,{variant:"h5",fontWeight:"medium"})}),e.jsx(w,{item:!0,children:e.jsx(ie,{children:e.jsx(_e,{variant:"gradient",color:"success",onClick:()=>re(),disabled:h.length==0,children:"Sinkronisasi Tembusan"})})})]})}),e.jsxs(w,{pt:3,px:3,children:["Pada saat menambahkan ",e.jsx("b",{children:"Tembusan Baru"})," terdapat beberapa perbedaan antara lain:",e.jsxs("ul",{className:"list-inside list-disc",children:[e.jsxs("li",{children:[e.jsx("b",{children:"Tembusan Internal SRIKANDI"})," adalah Daftar Tembusan berdasarkan Instansi dan Unit Kerja / Satuan Kerja Anda"]}),e.jsxs("li",{children:[e.jsx("b",{children:"Tembusan Eksternal SRIKANDI"})," adalah Daftar Tembusan berdasarkan keseluruhan Instansi dan Unit Kerja / Satuan Kerja"]}),e.jsxs("li",{children:[e.jsx("b",{children:"Tembusan Eksternal Non SRIKANDI"})," adalah Daftar Tembusan berdasarkan diluar lingkup SRIKANDI"]})]})]}),e.jsx("div",{className:"overflow-auto",children:e.jsxs("div",{className:"table p-10 min-w-full",children:[e.jsx("div",{className:"flex justify-end mb-1",children:e.jsx(pa,{config:fe,handleClick:ne})}),e.jsxs("table",{className:"w-full text-sm text-left !text-gray-700 dark:text-gray-400 table-bordered",children:[e.jsx("thead",{className:"text-xs text-gray-500 uppercase border-b-2 mb-1",children:e.jsxs("tr",{children:[e.jsx(q,{text:"#"}),e.jsx(q,{text:"Jenis Tembusan",sortField:"jenis",sortOrder:fe.sortOrder,config:fe,handleClick:()=>pe("jenis")}),e.jsx(q,{text:"Kepada",sortField:"nama",sortOrder:fe.sortOrder,config:fe,handleClick:()=>pe("nama")}),e.jsx(q,{text:"Aksi",className:"justify-center min-w-[2rem]"})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{className:"border-b border-slate-300",children:[e.jsx("td",{className:"px-1 py-1"}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"jenis",onSearch:Pe,placeholder:"Jenis Tembusan",type:"select",selectOption:rd})}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"kepada",onSearch:Pe,placeholder:"Kepada",type:"input"})}),e.jsx("td",{})]}),l?e.jsx("tr",{children:e.jsx("td",{colSpan:3,children:e.jsx(ia,{})})}):e.jsx(e.Fragment,{}),xe.length?xe.map((Te,me)=>e.jsxs("tr",{className:"border-b border-slate-300",children:[e.jsx("td",{className:"px-1 py-1",children:Te.checkbox}),e.jsx("td",{className:" max-w-[20rem] px-6 py-6",children:Te.jenis=="INTERNAL"?"Internal SRIKANDI":Te.jenis=="SRIKANDI"?"Eksternal SRIKANDI":"Eksternal Non SRIKANDI"}),e.jsxs("td",{className:" max-w-[20rem] px-6 py-6",children:[Te.nama," - ",Te.jabatan," - ",Te.instansi]}),e.jsxs("td",{className:"px-1 text-right w-[2rem]",children:[" ",Te.action," "]})]},me)):e.jsx(e.Fragment,{})]})]}),e.jsxs("nav",{className:"flex items-center justify-between p-4","aria-label":"Table navigation",children:[e.jsx("span",{className:"text-sm text-gray-400",children:R.from&&`Menampilkan ${Se(R.from)} sampai ${Se(R.to)} dari ${Se(R.total)} entri`}),e.jsx(xa,{currentPage:fe.page,lastPage:k,displayCount:5,handleClick:te})]})]})})]})}),e.jsx(ua,{}),e.jsx(Fa,{open:z,onClose:Re,children:e.jsxs("div",{children:[e.jsxs(_a,{children:[_," ",r," ",S.jenis=="INTERNAL"?"Internal Srikandi":S.jenis=="SRIKANDI"?"Eksternal Srikandi":"Eksternal Non Srikandi"]}),e.jsx(ca,{initialValues:S,onSubmit:he,validateOnChange:!0,validationSchema:zj,children:e.jsx(da,{id:"form",className:"text-sm",children:e.jsx("div",{className:"p-3",children:S.jenis=="INTERNAL"?e.jsxs(e.Fragment,{children:[e.jsx(w,{children:e.jsx("div",{className:"p-3",children:e.jsx(ce,{name:"unit_kerja",children:({field:Te,form:me,meta:ee})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Unit Kerja",required:!0,error:ee.error&&ee.touched}),e.jsx(ra,{url:"organisasi/instansi/select_unit_kerja",isDisabled:G,callbackChange:Y=>{me.setFieldValue("instansi",(Y==null?void 0:Y.nama)??""),me.setFieldValue("tujuans_jenis",S.jenis),me.setFieldValue("organisasi_id",(Y==null?void 0:Y.id)??""),H(Y),me.setFieldValue("nama",""),me.setFieldValue("nama_pengguna",""),me.setFieldValue("jabatan",""),me.setFieldValue("jabatan_id",""),A(null)},selectedData:M,keyValue:["id","nama"],placeholder:"Pilih Unit Kerja...",className:"text-base",optionParam:{sortOrder:"asc"}}),e.jsx(ue,{text:ee.error,error:ee.error&&ee.touched})]})})})}),e.jsx(w,{children:e.jsx("div",{className:"p-3",children:e.jsx(ce,{name:"nama",children:({field:Te,form:me,meta:ee})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Pengguna",required:!0,error:ee.error&&ee.touched}),e.jsx(ra,{url:"pengguna/user/tembusan-user-utama",isDisabled:G,callbackChange:Y=>{var ke;me.setFieldValue("user_id",(Y==null?void 0:Y.id)??""),me.setFieldValue("nama",(Y==null?void 0:Y.nama)??""),me.setFieldValue("nama_pengguna",(Y==null?void 0:Y.nama)??""),me.setFieldValue("jabatan",((ke=Y==null?void 0:Y.jabatan)==null?void 0:ke.nama)??""),me.setFieldValue("jabatan_id",(Y==null?void 0:Y.jabatan_id)??""),A(Y)},selectedData:V,keyValue:["id","nama"],placeholder:"Pilih Pengguna...",className:"text-base",optionParam:{user_organisasi_id:t==null?void 0:t.organisasi_id,organisasi_id:me.values.organisasi_id,check:"no",unit_kerja_id:void 0,group_role:4}}),e.jsx(ue,{text:ee.error,error:ee.error&&ee.touched})]})})})})]}):S.jenis=="SRIKANDI"?e.jsxs(e.Fragment,{children:[e.jsx(w,{children:e.jsx("div",{className:"p-3",children:e.jsx(ce,{name:"instansi",children:({field:Te,form:me,meta:ee})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Instansi",required:!0,error:ee.error&&ee.touched}),e.jsx(ra,{url:"organisasi/instansi/select_instansi",isDisabled:G,callbackChange:Y=>{me.setFieldValue("tujuans_jenis",S.jenis),me.setFieldValue("organisasi_id",(Y==null?void 0:Y.id)??""),me.setFieldValue("instansi",(Y==null?void 0:Y.nama)??""),$(Y),H(null),me.setFieldValue("unit_kerja_id",""),me.setFieldValue("nama_organisasi",""),A(null),me.setFieldValue("nama",""),me.setFieldValue("nama_pengguna",""),me.setFieldValue("jabatan",""),me.setFieldValue("jabatan_id","")},selectedData:L,keyValue:["id","nama"],placeholder:"Pilih Instansi...",className:"text-base",optionParam:{sortField:"nama",sortOrder:1,public_organisasi_id:t==null?void 0:t.public_organisasi_id}}),e.jsx(ue,{text:ee.error,error:ee.error&&ee.touched})]})})})}),e.jsx(w,{children:e.jsx("div",{className:"p-3",children:e.jsx(ce,{name:"unit_kerja",children:({field:Te,form:me,meta:ee})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Unit Kerja",required:!0,error:ee.error&&ee.touched}),e.jsx(ra,{url:"organisasi/instansi/select_satker",isDisabled:G||!me.values.organisasi_id,callbackChange:Y=>{me.setFieldValue("unit_kerja_id",(Y==null?void 0:Y.id)??""),me.setFieldValue("nama_organisasi",(Y==null?void 0:Y.nama)??""),H(Y),A(null),me.setFieldValue("nama",""),me.setFieldValue("nama_pengguna",""),me.setFieldValue("jabatan",""),me.setFieldValue("jabatan_id","")},selectedData:M,keyValue:["id","nama"],placeholder:"Pilih Unit Kerja...",className:"text-base",optionParam:{organisasi_id:me.values.organisasi_id}}),e.jsx(ue,{text:ee.error,error:ee.error&&ee.touched})]})})})}),e.jsx(w,{children:e.jsx("div",{className:"p-3",children:e.jsx(ce,{name:"nama",children:({field:Te,form:me,meta:ee})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Pengguna",required:!0,error:ee.error&&ee.touched}),e.jsx(ra,{url:"pengguna/user/tembusan-user-utama",isDisabled:G,callbackChange:Y=>{var ke;me.setFieldValue("user_id",(Y==null?void 0:Y.id)??""),me.setFieldValue("nama",(Y==null?void 0:Y.nama)??""),me.setFieldValue("nama_pengguna",Y==null?void 0:Y.nama),me.setFieldValue("jabatan",((ke=Y==null?void 0:Y.jabatan)==null?void 0:ke.nama)??""),me.setFieldValue("jabatan_id",(Y==null?void 0:Y.jabatan_id)??"")},selectedData:V,keyValue:["id","nama"],placeholder:"Pilih Pengguna...",className:"text-base",optionParam:{user_organisasi_id:t==null?void 0:t.organisasi_id,organisasi_id:me.values.organisasi_id,check:"yes",unit_kerja_id:me.values.unit_kerja_id,group_role:4}}),e.jsx(ue,{text:ee.error,error:ee.error&&ee.touched})]})})})})]}):S.jenis=="EKSTERNAL"?e.jsxs(e.Fragment,{children:[e.jsx(w,{children:e.jsx("div",{className:"p-3",children:e.jsx(ce,{name:"nama",children:({field:Te,form:me,meta:ee})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Nama",required:!0,error:ee.error&&ee.touched}),e.jsx(Ye,{...Te,type:"text",placeholder:"Nama",error:ee.error&&ee.touched,disabled:G}),e.jsx(ue,{text:ee.error,error:ee.error&&ee.touched})]})})})}),e.jsx(w,{children:e.jsx("div",{className:"p-3",children:e.jsx(ce,{name:"jabatan",children:({field:Te,form:me,meta:ee})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Jabatan",error:ee.error&&ee.touched}),e.jsx(Ye,{...Te,type:"text",placeholder:"Jabatan",error:ee.error&&ee.touched,disabled:G}),e.jsx(ue,{text:ee.error,error:ee.error&&ee.touched})]})})})}),e.jsx(w,{children:e.jsx("div",{className:"p-3",children:e.jsx(ce,{name:"nama_organisasi",children:({field:Te,form:me,meta:ee})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Unit Kerja",error:ee.error&&ee.touched}),e.jsx(Ye,{...Te,type:"text",placeholder:"Unit Kerja",error:ee.error&&ee.touched,disabled:G}),e.jsx(ue,{text:ee.error,error:ee.error&&ee.touched})]})})})}),e.jsx(w,{children:e.jsx("div",{className:"p-3",children:e.jsx(ce,{name:"instansi",children:({field:Te,form:me,meta:ee})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Instansi",required:!0,error:ee.error&&ee.touched}),e.jsx(Ye,{...Te,type:"text",placeholder:"Instansi",error:ee.error&&ee.touched,disabled:G}),e.jsx(ue,{text:ee.error,error:ee.error&&ee.touched})]})})})})]}):e.jsx(e.Fragment,{})})})}),e.jsx(ya,{children:e.jsxs(e.Fragment,{children:[!G&&e.jsx(Je,{submit:F,color:"success",formId:"form",text:O}),e.jsx(_e,{color:G?"dark":"error",variant:"gradient",onClick:()=>Re(),children:G?"Tutup":"Batal"})]})})]})}),e.jsxs(Fa,{open:J,onClose:v,children:[e.jsxs("div",{children:[e.jsx(_a,{className:"flex items-center gap-2",children:e.jsx(le,{children:"Apakah Anda yakin ingin memperbarui Tembusan ini ?"})}),e.jsx(ca,{initialValues:N,onSubmit:ye,validateOnChange:!0,children:e.jsx(da,{id:"formDataBox",className:"text-sm"})})]}),e.jsx(ya,{children:e.jsxs(e.Fragment,{children:[e.jsx(Je,{submit:D,color:"success",formId:"formDataBox",text:"Ya Perbaharui"}),e.jsx(_e,{color:"error",variant:"gradient",onClick:()=>P(!1),children:"Batal"})]})})]})]})]})},ct="https://api.arsip.go.id/user/api/";class Td{constructor(){ae(this,"getPaging",async s=>{const n=Ce.serializeObjectToQueryString(s);return await se.get(`${ct}pengguna/grup-disposisi?${n}`).then(l=>l)});ae(this,"post",async s=>await se.post(`${ct}pengguna/grup-disposisi`,s).then(i=>i));ae(this,"put",async(s,n)=>await se.put(`${ct}pengguna/grup-disposisi/${s}`,n).then(l=>l));ae(this,"delete",async s=>await se.delete(`${ct}pengguna/grup-disposisi/${s}`).then(i=>i));ae(this,"getPagingPengguna",async s=>{const n=Ce.serializeObjectToQueryString(s);return await se.get(`${ct}pengguna/grup-disposisi/pengguna?${n}`).then(l=>l)});ae(this,"getPagingDaftarTujuan",async s=>{const n=Ce.serializeObjectToQueryString(s);return await se.get(`${ct}pengguna/grup-disposisi/index-daftar-tujuan?${n}`).then(l=>l)});ae(this,"postDaftarTujuan",async s=>await se.post(`${ct}pengguna/grup-disposisi/store-daftar-tujuan`,s).then(i=>i));ae(this,"deleteDaftarTujuan",async s=>await se.delete(`${ct}pengguna/grup-disposisi/destroy-daftar-tujuan/${s}`).then(i=>i));ae(this,"refreshUser",async s=>await se.put(`${ct}pengguna/grup-disposisi/reset-daftar-tujuan`,s).then(i=>i))}}const Vj=fa().shape({nama:ze().required("Nama Grup Jabatan harus diisi"),status:ze().required("Status harus dipilih")}),qj=fa().shape({penggunas:vs().min(1,"Pilih Pengguna Tujuan").required("Pengguna Tujuan harus dipilih")}),Hj=()=>{const r="Group Tujuan Disposisi",[s,n]=a.useState(!1);a.useEffect(()=>{n(ge(r,"is_read",!0))},[]);const t=JSON.parse(Le.getItem("users")),i=new Td,l=ha(),[m,p]=a.useState(!1),[B,K]=a.useState(null),[W,z]=Ga.useState(!1),[T,L]=a.useState(!1),[$,M]=a.useState("Simpan"),[H,V]=a.useState(""),[A,G]=a.useState(null),[X,O]=a.useState(!0),[I,_]=a.useState({id:0,nama:"",organisasi_id:t==null?void 0:t.organisasi_id,public_organisasi_id:t==null?void 0:t.public_organisasi_id,penggunas:[],daftar_tujuan:[]}),[C,k]=a.useState({total:0,from:1,to:1});let b=[];B==null?b=[]:b=B.map(d=>{var j;return{nama:d.nama,deskripsi:d.deskripsi,jumlah_tujuan:((j=d.daftar_tujuan_disposisi)==null?void 0:j.length)??0,dibuat:d.created_at,action:e.jsxs("div",{className:"flex items-center justify-center gap-3 w-full",children:[ge(r,"is_update")&&e.jsx(Va,{size:"1.5em",color:"#fbcf33",onClick:()=>E(d),className:"cursor-pointer",title:"Ubah"}),e.jsx(Oa,{size:"1.5em",color:"#17c1e8",onClick:()=>J(d),className:"cursor-pointer",title:"Lihat"}),ge(r,"is_delete")&&e.jsx($a,{size:"1.5em",color:"#e62e2d",onClick:()=>P(d),className:"cursor-pointer",title:"Hapus"})]})}});const[y,o]=a.useState({page:1,rows:10,sortField:"",sortOrder:null,search:"",public_organisasi_id:t==null?void 0:t.public_organisasi_id,group_role:t==null?void 0:t.group_role,organisasi_id:t==null?void 0:t.organisasi_id,filters:{nama:{value:""},jumlah_tujuan:{value:""},deskripsi:{value:""},status:{value:""},organisasi_id:{value:t==null?void 0:t.organisasi_id},public_organisasi_id:{value:t==null?void 0:t.public_organisasi_id}}});a.useEffect(()=>{F()},[y]);const F=async(d=!1)=>{d&&(y.page=1),p(!0),await i.getPaging(y).then(j=>{let g=j.data.result;g.data&&(G(g.last_page),K(g.data),p(!1)),p(!1),k({...C,to:g.to,from:g.from,total:g.total})}).catch(j=>{p(!1),k({...C,to:0,from:!1,total:0})})},x=Da((d,j,g=null)=>{if(g){let v=g.target;for(;v&&v.tagName!=="TD";)v=v.parentNode;if(v&&v.tagName==="TD"){const N=v.querySelector(".clear-input"),Q=v.querySelector("input");j?N.classList.remove("hidden"):(N.classList.add("hidden"),Q.value="")}}let c={...y};c.filters[d].value=j,c.page=1,o(c)},600),S=d=>{let j={...y};j.page=d,o(j),window.scrollTo({top:0,behavior:"smooth"})},f=d=>{let j={...y};j.rows=d,j.page=1,o(j)},R=d=>{let j={...y};j.sortField=d,y.sortField!=d?y.sortOrder==""&&(j.sortOrder=1):y.sortOrder==1?j.sortOrder=-1:(j.sortOrder="",j.sortField=""),j.page=1,o(j)},u=d=>{O(!1),d.id!==0?i.put(d.id,d).then(j=>{var g,c,v;U.fire((g=j.data)!=null&&g.success?"Berhasil":"Gagal",(c=j.data)==null?void 0:c.message,(v=j.data)!=null&&v.success?"success":"warning"),j.data.success&&(F(!0),h())}).catch(j=>{var c,v;const g=Oe(j.response.data.result);U.fire("Gagal",g??((v=(c=j.response)==null?void 0:c.data)==null?void 0:v.message),"error")}).finally(()=>O(!0)):i.post(d).then(j=>{var g,c,v;U.fire((g=j.data)!=null&&g.success?"Berhasil":"Gagal",(c=j.data)==null?void 0:c.message,(v=j.data)!=null&&v.success?"success":"warning"),j.data.success&&(F(!0),h())}).catch(j=>{var c,v;const g=Oe(j.response.data.result);U.fire("Gagal",g??((v=(c=j.response)==null?void 0:c.data)==null?void 0:v.message),"error")}).finally(()=>O(!0))},D=d=>{z(!0),_({id:0,nama:"",deskripsi:"",status:"AKTIF",organisasi_id:t==null?void 0:t.organisasi_id,public_organisasi_id:t==null?void 0:t.public_organisasi_id,penggunas:[],daftar_tujuan:[]}),M("Simpan"),V("Tambah"),L(!1)},E=d=>{l("form",{state:{formode:"Ubah",id:d.id,nama:d.nama,deskripsi:d.deskripsi,status:d.status,organisasi_id:d.organisasi_id,public_organisasi_id:d.public_organisasi_id,penggunas:d.penggunas,daftar_tujuan:d.daftar_tujuan,created_at:d.created_at}})},J=d=>{l("form",{state:{formode:"Lihat",id:d.id,nama:d.nama,deskripsi:d.deskripsi,status:d.status,organisasi_id:d.organisasi_id,public_organisasi_id:d.public_organisasi_id,penggunas:d.penggunas,daftar_tujuan:d.daftar_tujuan,created_at:d.created_at}})},P=d=>{U.fire({title:"Konfirmasi",text:`Data ${d.nama} akan dihapus ?`,icon:"warning",showCancelButton:!0,confirmButtonText:"Hapus",cancelButtonText:"Batal",customClass:{confirmButton:"button button-error",cancelButton:"button button-info"}}).then(j=>{j.isConfirmed&&(ka(),i.delete(d.id).then(g=>{g.status==200&&F(),U.fire("Berhasil","Data Berhasil Dihapus","success")}).catch(g=>{var v,N;const c=Oe(g.response.data.result);U.fire("Gagal",c??((N=(v=g.response)==null?void 0:v.data)==null?void 0:N.message),"error")}))})},h=()=>{_({id:0,nama:"",status:null}),z(!1)};return e.jsxs(aa,{children:[e.jsx(la,{}),s&&e.jsxs(e.Fragment,{children:[e.jsx(ie,{pt:6,pb:3,children:e.jsxs(Me,{children:[e.jsx(ie,{px:3,pt:3,lineHeight:1,children:e.jsxs(w,{container:!0,direction:"row",justifyContent:"space-between",alignItems:"center",children:[e.jsx(w,{item:!0,children:e.jsxs(le,{variant:"h5",fontWeight:"medium",children:["Daftar ",r]})}),ge(r,"is_create")&&e.jsx(w,{item:!0,children:e.jsxs(_e,{variant:"gradient",color:"info",onClick:D,children:[e.jsx(Ea,{size:"1.5em"}),"Tambah Baru"]})})]})}),e.jsx(w,{px:3,pt:3,children:e.jsxs("div",{className:"text-sm w-100 flex justify-start items-center gap-2",children:[e.jsxs("span",{children:["Setelah menambahkan ",e.jsx("b",{children:r}),", Anda dapat mengisi daftar tujuan pada pada tombol aksi edit"," "]}),e.jsx(Va,{className:"w-5 h-5 text-[#fbcf33]"})]})}),e.jsx("div",{className:"overflow-auto",children:e.jsxs("div",{className:"table p-10 min-w-full",children:[e.jsx("div",{className:"flex items-center justify-end mb-1",children:e.jsx(pa,{config:y,handleClick:f})}),e.jsxs("table",{className:"w-full text-sm text-left !text-gray-700 dark:text-gray-400 table-bordered",children:[e.jsx("thead",{className:"text-xs text-gray-500 uppercase border-b-2 mb-1",children:e.jsxs("tr",{children:[e.jsx(q,{text:"Nama Grup",sortField:"nama",sortOrder:y.sortOrder,config:y,handleClick:()=>R("nama")}),e.jsx(q,{text:"Deskripsi",sortField:"deskripsi",sortOrder:y.sortOrder,config:y,handleClick:()=>R("deskripsi")}),e.jsx(q,{text:"Jumlah Tujuan",sortField:"jumlah_tujuan",sortOrder:y.sortOrder,config:y,handleClick:()=>R("jumlah_tujuan")}),e.jsx(q,{text:"Dibuat pada",sortField:"created_at",sortOrder:y.sortOrder,config:y,handleClick:()=>R("created_at")}),e.jsx(q,{text:"Aksi",className:"flex justify-center min-w-[2rem]"})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{className:"border-b border-slate-300",children:[e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"nama",onSearch:x,placeholder:"Nama",type:"input"})}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"deskripsi",onSearch:x,placeholder:"Deskripsi",type:"input"})}),e.jsx("td",{}),e.jsx("td",{}),e.jsx("td",{})]}),m?e.jsx("tr",{children:e.jsx("td",{colSpan:3,children:e.jsx(ia,{})})}):e.jsx(e.Fragment,{}),b.length?b.map((d,j)=>e.jsxs("tr",{className:"border-b border-slate-300",children:[e.jsx("td",{className:" max-w-[20rem] px-6 py-6",children:d.nama}),e.jsx("td",{className:" max-w-[20rem] px-6 py-6",children:d.deskripsi}),e.jsx("td",{className:" max-w-[20rem] px-6 py-6",children:d.jumlah_tujuan}),e.jsx("td",{className:" max-w-[20rem] px-6 py-6",children:na(d.dibuat)}),e.jsxs("td",{className:"px-1 text-right w-[2rem]",children:[" ",d.action," "]})]},j)):e.jsx(e.Fragment,{})]})]}),e.jsxs("nav",{className:"flex items-center justify-between p-4","aria-label":"Table navigation",children:[e.jsx("span",{className:"text-sm text-gray-400",children:C.from&&`Menampilkan ${Se(C.from)} sampai ${Se(C.to)} dari ${Se(C.total)} entri`}),e.jsx(xa,{currentPage:y.page,lastPage:A,displayCount:5,handleClick:S})]})]})})]})}),e.jsx(ua,{}),e.jsxs(ys,{open:W,onClose:h,fullWidth:!0,maxWidth:"sm",children:[e.jsxs(_a,{children:[H," ",r]}),e.jsx(ca,{initialValues:I,onSubmit:u,validateOnChange:!0,validationSchema:Vj,children:e.jsx(da,{id:"form",className:"text-sm",children:e.jsxs("div",{className:"p-5",children:[e.jsx(w,{mt:1,children:e.jsxs("div",{className:"p-3",children:[e.jsx("input",{type:"hidden",name:"id",value:I.id}),e.jsx(ce,{name:"nama",children:({field:d,form:j,meta:g})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Nama Grup",required:!0,error:g.error&&g.touched}),e.jsx(Ye,{...d,type:"text",placeholder:"Nama Grup",error:g.error&&g.touched,disabled:T}),e.jsx(ue,{text:g.error,error:g.error&&g.touched})]})})]})}),H=="BELUMADA"&&e.jsx(w,{mt:1,children:e.jsx(Na,{children:e.jsx(ce,{name:"status",children:({field:d,form:j,meta:g})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Status",required:!0,error:g.error&&g.touched}),e.jsxs("div",{className:"space-x-4 flex flex-row items-center",children:[e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{...d,type:"radio",className:"form-radio  w-4 h-4 text-blue-500 focus:ring-2 focus:ring-blue-500",value:"AKTIF",checked:d.value=="AKTIF",disabled:T}),e.jsx("span",{className:"text-gray-700",children:"Aktif"})]}),e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{...d,type:"radio",className:"form-radio  w-4 h-4 text-blue-500 focus:ring-2 focus:ring-blue-500",value:"NON-AKTIF",disabled:T,checked:d.value=="NON-AKTIF"}),e.jsx("span",{className:"text-gray-700",children:"Non Aktif"})]})]}),e.jsx(ue,{text:g.error,error:g.error&&g.touched})]})})})}),e.jsx(w,{children:e.jsx(Na,{children:e.jsx(ce,{name:"deskripsi",children:({field:d,form:j,meta:g})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Deskripsi",required:!1,error:g.error&&g.touched}),e.jsx(Ka,{...d,placeHolder:"Masukan Deskripsi..",error:g.error&&g.touched,disabled:T}),e.jsx(ue,{text:g.error,error:g.error&&g.touched})]})})})})]})})}),e.jsx(ya,{children:e.jsxs(e.Fragment,{children:[!T&&e.jsx(Je,{submit:X,color:"success",formId:"form",text:$}),e.jsx(_e,{color:T?"dark":"error",variant:"gradient",onClick:()=>z(!1),children:T?"Tutup":"Batal"})]})})]})]})]})},Gj=()=>{const r="Grup Tujuan Naskah",[s,n]=a.useState(!1),[t,i]=a.useState(!1),l=new Pd,m=ga(),p=ha(),[B,K]=a.useState(!1),[W,z]=a.useState(!1),[T,L]=a.useState(null),[$,M]=a.useState(null),[H,V]=a.useState(!0),A=JSON.parse(Le.getItem("users")),[G,X]=a.useState({formode:m.state.formode,id:m.state.id,organisasi_id:m.state.organisasi_id,public_organisasi_id:m.state.public_organisasi_id,penggunas:m.state.penggunas,daftar_tujuan:m.state.daftar_tujuan,nama:m.state.nama,deskripsi:m.state.deskripsi,created_at:m.state.created_at}),[O,I]=a.useState({grup_tujuan_id:m.state.id,penggunas:[]}),[_,C]=a.useState({total:0,from:1,to:1}),k="";a.useEffect(()=>{G.formode=="Ubah"&&n(ge(r,"is_update",!0)),G.formode=="Lihat"&&(n(ge(r,"is_read",!0)),K(!0))},[G.formode]);let b=[];T==null?b=[]:b=T.map(d=>({nama:d.kepada,dibuat:d.created_at,action:e.jsxs("div",{className:"flex items-center justify-center gap-3 w-full",children:[(d==null?void 0:d.is_update)&&e.jsx(Dt,{size:"1.5em",color:"#00bcd4",onClick:()=>J(d==null?void 0:d.id),className:"cursor-pointer",title:"Lihat"}),!B&&ge(r,"is_delete")&&e.jsx($a,{size:"1.5em",color:"#e62e2d",onClick:()=>E(d),className:"cursor-pointer",title:"Hapus"})]})}));const[y,o]=a.useState({page:1,rows:10,sortField:"",sortOrder:null,search:"",organisasi_id:A==null?void 0:A.organisasi_id,filters:{kepada:{value:""},formatted_created_at:{value:""},grup_tujuan_id:{value:G.id}}});a.useEffect(()=>{F()},[y]);const F=async(d=!1)=>{d&&(y.page=1),i(!0),await l.getPagingDaftarTujuan(y).then(j=>{let g=j.data.result;g.data&&(M(g.last_page),L(g.data),i(!1)),i(!1),C({..._,to:g.to,from:g.from,total:g.total})}).catch(j=>{i(!1),C({..._,to:0,from:!1,total:0})})},x=os((d,j,g=null)=>{if(g){let v=g.target;for(;v&&v.tagName!=="TD";)v=v.parentNode;if(v&&v.tagName==="TD"){const N=v.querySelector(".clear-input"),Q=v.querySelector("input");j?N.classList.remove("hidden"):(N.classList.add("hidden"),Q.value="")}}let c={...y};c.filters[d].value=j,c.page=1,o(c)},600),S=d=>{let j={...y};j.page=d,o(j),window.scrollTo({top:0,behavior:"smooth"})},f=d=>{let j={...y};j.rows=d,j.page=1,o(j)},R=d=>{let j={...y};j.sortField=d,y.sortField!=d?y.sortOrder==""&&(j.sortOrder=1):y.sortOrder==1?j.sortOrder=-1:(j.sortOrder="",j.sortField=""),j.page=1,o(j)},u=d=>{V(!1),d.id!==0?l.put(d.id,d).then(j=>{var g,c,v;U.fire((g=j.data)!=null&&g.success?"Berhasil":"Gagal",(c=j.data)==null?void 0:c.message,(v=j.data)!=null&&v.success?"success":"warning"),j.data.success&&P()}).catch(j=>{var c,v;const g=Oe(j.response.data.result);U.fire("Gagal",g??((v=(c=j.response)==null?void 0:c.data)==null?void 0:v.message),"error")}).finally(()=>V(!0)):l.post(d).then(j=>{var g,c,v;U.fire((g=j.data)!=null&&g.success?"Berhasil":"Gagal",(c=j.data)==null?void 0:c.message,(v=j.data)!=null&&v.success?"success":"warning"),j.data.success&&P()}).catch(j=>{var c,v;const g=Oe(j.response.data.result);U.fire("Gagal",g??((v=(c=j.response)==null?void 0:c.data)==null?void 0:v.message),"error")}).finally(()=>V(!0))},D=d=>{V(!1),l.postDaftarTujuan(d).then(j=>{var g,c,v;U.fire((g=j.data)!=null&&g.success?"Berhasil":"Gagal",(c=j.data)==null?void 0:c.message,(v=j.data)!=null&&v.success?"success":"warning"),j.data.success&&(F(!0),h())}).catch(j=>{var g,c,v,N;console.log(j),U.fire("Gagal",(c=(g=j.response)==null?void 0:g.data)!=null&&c.result&&j.response.data.result.length>0?j.response.data.result[0]:(N=(v=j.response)==null?void 0:v.data)==null?void 0:N.message,"error")}).finally(()=>V(!0))},E=d=>{U.fire({title:"Konfirmasi",text:`Data ${d.kepada} akan dihapus ?`,icon:"warning",showCancelButton:!0,confirmButtonText:"Hapus",cancelButtonText:"Batal",customClass:{confirmButton:"button button-error",cancelButton:"button button-info"}}).then(j=>{j.isConfirmed&&(ka(),l.deleteDaftarTujuan(d.id).then(g=>{g.status==200&&F(),U.fire("Berhasil","Data Berhasil Dihapus","success")}).catch(g=>{var v,N;const c=Oe(g.response.data.result);U.fire("Gagal",c??((N=(v=g.response)==null?void 0:v.data)==null?void 0:N.message),"error")}))})},J=d=>{U.fire({title:"Perbarui Tujuan",text:"Apakah Anda yakin ingin memperbarui Tujuan ini ?",icon:"question",showCancelButton:!0,confirmButtonText:"Ya, Perbarui",cancelButtonText:"Batal",customClass:{confirmButton:"button button-success",cancelButton:"button button-secondary"}}).then(j=>{j.isConfirmed&&(ka(),l.refreshUser({id:d}).then(g=>{g.status==200&&F(),U.fire("Berhasil","Data Berhasil Diperbarui","success")}).catch(g=>{var v,N,Q,re;const c=Oe((N=(v=g.response)==null?void 0:v.data)==null?void 0:N.result);U.fire("Gagal",c??((re=(Q=g.response)==null?void 0:Q.data)==null?void 0:re.message),"error")}))})},P=()=>{p(k+"/pengguna/grup-tujuan-naskah")},h=()=>{z(!1)};return e.jsxs(aa,{children:[e.jsx(la,{}),s&&e.jsxs(e.Fragment,{children:[e.jsx(ie,{pt:6,pb:3,children:e.jsxs(Me,{children:[e.jsx(ie,{px:3,pt:3,lineHeight:1,children:e.jsxs(w,{container:!0,direction:"row",justifyContent:"space-between",alignItems:"center",children:[e.jsx(w,{item:!0,children:e.jsxs(le,{variant:"h5",fontWeight:"medium",children:[G.formode," ",r]})}),e.jsxs(w,{item:!0,className:"flex items-center gap-2",children:[!B&&ge(r,"is_update")&&e.jsx(w,{item:!0,children:e.jsxs(_e,{variant:"gradient",color:"info",onClick:()=>z(!0),children:[e.jsx(Ea,{size:"1.5em"}),"Tujuan Baru"]})}),e.jsx(w,{item:!0,children:e.jsxs(_e,{variant:"gradient",color:"secondary",onClick:P,children:[e.jsx(za,{size:"1.5em",className:"me-2"}),G.formode!="Lihat"?"Batal":"Kembali"]})})]})]})}),e.jsx(w,{px:3,pt:3,children:e.jsx("div",{className:"text-sm w-100 lg:w-[100vh]",children:e.jsxs("span",{children:["Hai, Anda bisa menambahkan daftar tujuan kedalam grup ",e.jsx("b",{children:G.nama})," ","ini apabila sudah menambahkan kontak pada menu pada","  ",e.jsx("b",{className:"text-blue-600 cursor-pointer",onClick:()=>p(k+"/pengguna/daftar-tujuan-naskah"),children:"Daftar Tujuan"})]})})}),e.jsxs("div",{className:"flex flex-col md:justify-between",children:[e.jsx("div",{className:"overflow-auto",children:e.jsxs("div",{className:"table px-6 pt-6 min-w-full",children:[e.jsx("div",{className:"flex justify-end mb-1",children:e.jsx(pa,{config:y,handleClick:f})}),e.jsxs("table",{className:"w-full text-sm text-left !text-gray-700 dark:text-gray-400 table-bordered",children:[e.jsx("thead",{className:"text-xs text-gray-500 uppercase border-b-2 mb-1",children:e.jsxs("tr",{children:[e.jsx(q,{text:"Pengguna",sortField:"nama",sortOrder:y.sortOrder,config:y,handleClick:()=>R("nama")}),e.jsx(q,{text:"Dibuat Pada",sortField:"created_at",sortOrder:y.sortOrder,config:y,handleClick:()=>R("created_at")}),e.jsx(q,{text:"Aksi",className:"justify-center min-w-[2rem]"})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{className:"border-b border-slate-300",children:[e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"kepada",onSearch:x,placeholder:"Nama",type:"input"})}),e.jsx("td",{}),e.jsx("td",{})]}),t?e.jsx("tr",{children:e.jsx("td",{colSpan:5,children:e.jsx(ia,{})})}):e.jsx(e.Fragment,{}),b.length?b.map((d,j)=>e.jsxs("tr",{className:"border-b border-slate-300",children:[e.jsx("td",{className:" max-w-[20rem] px-6 py-6",children:d.nama}),e.jsx("td",{className:" max-w-[20rem] px-6 py-6",children:na(d.dibuat)}),e.jsxs("td",{className:"px-1 text-right w-[2rem]",children:[" ",d.action," "]})]},j)):e.jsx(e.Fragment,{})]})]}),e.jsxs("nav",{className:"flex items-center justify-between p-4","aria-label":"Table navigation",children:[e.jsx("span",{className:"text-sm text-gray-400",children:_.from&&`Menampilkan ${Se(_.from)} sampai ${Se(_.to)} dari ${Se(_.total)} entri`}),e.jsx(xa,{currentPage:y.page,lastPage:$,displayCount:5,handleClick:S})]})]})}),e.jsx(ca,{initialValues:G,onSubmit:u,validateOnChange:!0,validationSchema:nn,children:e.jsxs(da,{id:"form",encType:"multipart/form-data",className:"w-full md:w-8/12",children:[e.jsx(w,{mt:2,children:e.jsxs("div",{className:"px-6 grid grid-cols-1 mb-10 gap-5 lg:mb-0",children:[e.jsx(w,{mt:3,children:e.jsx(ce,{name:"nama",children:({field:d,form:j,meta:g})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Nama Grup",required:!0,error:g.error&&g.touched}),e.jsx(Ye,{...d,type:"text",placeholder:"Nama Grup",error:g.error&&g.touched,disabled:B}),e.jsx(ue,{text:g.error,error:g.error&&g.touched})]})})}),e.jsx(w,{mt:3,children:e.jsx(ce,{name:"deskripsi",children:({field:d,form:j,meta:g})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Deskripsi",error:g.error&&g.touched}),e.jsx(Ka,{...d,placeHolder:"Masukan Deskripsi..",error:g.error&&g.touched,rows:3,disabled:B}),e.jsx(ue,{text:g.error,error:g.error&&g.touched})]})})})]})}),e.jsxs("div",{className:"px-6 py-3 flex justify-between items-center w-full gap-5 mb-10",children:[e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx(Yi,{size:"1.0em",className:"pb-1",color:"#000"}),e.jsx(le,{variant:"caption",children:na(G.created_at)})]}),!B&&e.jsx(Je,{submit:H,color:"success",formId:"form",text:G.formode=="Tambah"?"Simpan":"Ubah"})]})]})})]})]})}),e.jsxs(Fa,{open:W,onClose:h,children:[e.jsxs("div",{className:"pb-28",children:[e.jsx(_a,{children:"Tambah Tujuan Baru"}),e.jsx(ca,{initialValues:O,onSubmit:D,validateOnChange:!0,validationSchema:Cd,children:e.jsx(da,{id:"formTujuan",children:e.jsx("div",{className:"px-2",children:e.jsx(w,{mt:1,children:e.jsx("div",{className:"p-3",children:e.jsx(ce,{name:"penggunas",children:({field:d,form:j,meta:g})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Pengguna",required:!0,error:g.error&&g.touched}),e.jsx(ra,{isMulti:!0,url:"pengguna/grup-tujuan/pengguna",isDisabled:B,callbackChange:c=>{const v=Array.from(c,N=>N);j.setFieldValue("penggunas",v.length?v:null)},keyValue:["id","nama_jabatan"],placeholder:"Pilih Tujuan...",className:"text-base",menuPortalTarget:null,optionParam:{id:G.id,organisasi_id:G.organisasi_id,public_organisasi_id:G.public_organisasi_id,group_role:4}}),e.jsx(ue,{text:g.error,error:g.error&&g.touched})]})})})})})})})]}),e.jsx(ya,{children:e.jsxs(e.Fragment,{children:[!B&&e.jsx(Je,{submit:H,color:"success",formId:"formTujuan",text:"Simpan"}),e.jsx(_e,{color:B?"dark":"error",variant:"gradient",onClick:h,children:B?"Tutup":"Batal"})]})})]})]})]})},Wj=()=>{const r="Group Tujuan Disposisi",[s,n]=a.useState(!1),[t,i]=a.useState(!1),l=new Td,m=ga(),p=ha(),[B,K]=a.useState(!1),[W,z]=a.useState(!1),[T,L]=a.useState(null),[$,M]=a.useState(null),[H,V]=a.useState(!0),[A,G]=a.useState({formode:m.state.formode,id:m.state.id,nama:m.state.nama,deskripsi:m.state.deskripsi,status:m.state.status,organisasi_id:m.state.organisasi_id,public_organisasi_id:m.state.public_organisasi_id,penggunas:m.state.penggunas,daftar_tujuan:m.state.daftar_tujuan,created_at:m.state.created_at}),[X,O]=a.useState({grup_tujuan_disposisi_id:m.state.id,penggunas:[]}),[I,_]=a.useState({total:0,from:1,to:1}),C="";a.useEffect(()=>{A.formode=="Ubah"&&n(ge(r,"is_update",!0)),A.formode=="Lihat"&&(n(ge(r,"is_read",!0)),K(!0))},[A.formode]);let k=[];T==null?k=[]:k=T.map(h=>({nama:h.kepada,dibuat:h.created_at,action:e.jsxs("div",{className:"flex items-center justify-center gap-3 w-full",children:[(h==null?void 0:h.is_update)&&e.jsx(Dt,{size:"1.5em",color:"#00bcd4",onClick:()=>D(h==null?void 0:h.id),className:"cursor-pointer",title:"Lihat"}),!B&&ge(r,"is_delete")&&e.jsx($a,{size:"1.5em",color:"#e62e2d",onClick:()=>E(h),className:"cursor-pointer",title:"Hapus"})]})}));const[b,y]=a.useState({page:1,rows:10,sortField:"",sortOrder:null,search:"",filters:{kepada:{value:""},formatted_created_at:{value:""},grup_tujuan_disposisi_id:{value:A.id}}});a.useEffect(()=>{o()},[b]);const o=async(h=!1)=>{h&&(b.page=1),i(!0),await l.getPagingDaftarTujuan(b).then(d=>{let j=d.data.result;j.data&&(M(j.last_page),L(j.data),i(!1)),i(!1),_({...I,to:j.to,from:j.from,total:j.total})}).catch(d=>{i(!1),_({...I,to:0,from:!1,total:0})})},F=os((h,d,j=null)=>{if(j){let c=j.target;for(;c&&c.tagName!=="TD";)c=c.parentNode;if(c&&c.tagName==="TD"){const v=c.querySelector(".clear-input"),N=c.querySelector("input");d?v.classList.remove("hidden"):(v.classList.add("hidden"),N.value="")}}let g={...b};g.filters[h].value=d,g.page=1,y(g)},600),x=h=>{let d={...b};d.page=h,y(d),window.scrollTo({top:0,behavior:"smooth"})},S=h=>{let d={...b};d.rows=h,d.page=1,y(d)},f=h=>{let d={...b};d.sortField=h,b.sortField!=h?b.sortOrder==""&&(d.sortOrder=1):b.sortOrder==1?d.sortOrder=-1:(d.sortOrder="",d.sortField=""),d.page=1,y(d)},R=h=>{V(!1),h.id!==0?l.put(h.id,h).then(d=>{var j,g,c;U.fire((j=d.data)!=null&&j.success?"Berhasil":"Gagal",(g=d.data)==null?void 0:g.message,(c=d.data)!=null&&c.success?"success":"warning"),d.data.success&&J()}).catch(d=>{var g,c;const j=Oe(d.response.data.result);U.fire("Gagal",j??((c=(g=d.response)==null?void 0:g.data)==null?void 0:c.message),"error")}).finally(()=>V(!0)):l.post(h).then(d=>{var j,g,c;U.fire((j=d.data)!=null&&j.success?"Berhasil":"Gagal",(g=d.data)==null?void 0:g.message,(c=d.data)!=null&&c.success?"success":"warning"),d.data.success&&J()}).catch(d=>{var g,c;const j=Oe(d.response.data.result);U.fire("Gagal",j??((c=(g=d.response)==null?void 0:g.data)==null?void 0:c.message),"error")}).finally(()=>V(!0))},u=h=>{V(!1),l.postDaftarTujuan(h).then(d=>{var j,g,c;U.fire((j=d.data)!=null&&j.success?"Berhasil":"Gagal",(g=d.data)==null?void 0:g.message,(c=d.data)!=null&&c.success?"success":"warning"),d.data.success&&(o(!0),P())}).catch(d=>{var j,g,c,v;console.log(d),U.fire("Gagal",(g=(j=d.response)==null?void 0:j.data)!=null&&g.result&&d.response.data.result.length>0?d.response.data.result[0]:(v=(c=d.response)==null?void 0:c.data)==null?void 0:v.message,"error")}).finally(()=>V(!0))},D=h=>{U.fire({title:"Perbarui Tujuan Disposisi",text:"Apakah Anda yakin ingin memperbarui Tujuan Disposisi ini ?",icon:"question",showCancelButton:!0,confirmButtonText:"Ya, Perbarui",cancelButtonText:"Batal",customClass:{confirmButton:"button button-success",cancelButton:"button button-secondary"}}).then(d=>{d.isConfirmed&&(ka(),l.refreshUser({id:h}).then(j=>{j.status==200&&o(),U.fire("Berhasil","Data Berhasil Diperbarui","success")}).catch(j=>{var c,v,N,Q;const g=Oe((v=(c=j.response)==null?void 0:c.data)==null?void 0:v.result);U.fire("Gagal",g??((Q=(N=j.response)==null?void 0:N.data)==null?void 0:Q.message),"error")}))})},E=h=>{U.fire({title:"Konfirmasi",text:`Data ${h.kepada} akan dihapus ?`,icon:"warning",showCancelButton:!0,confirmButtonText:"Hapus",cancelButtonText:"Batal",customClass:{confirmButton:"button button-error",cancelButton:"button button-info"}}).then(d=>{d.isConfirmed&&(ka(),l.deleteDaftarTujuan(h.id).then(j=>{j.status==200&&o(),U.fire("Berhasil","Data Berhasil Dihapus","success")}).catch(j=>{var c,v;const g=Oe(j.response.data.result);U.fire("Gagal",g??((v=(c=j.response)==null?void 0:c.data)==null?void 0:v.message),"error")}))})},J=()=>{p(C+"/pengguna/grup-tujuan-disposisi")},P=()=>{z(!1)};return e.jsxs(aa,{children:[e.jsx(la,{}),s&&e.jsxs(e.Fragment,{children:[e.jsx(ie,{pt:6,pb:3,children:e.jsxs(Me,{children:[e.jsx(ie,{px:3,pt:3,lineHeight:1,children:e.jsxs(w,{container:!0,direction:"row",justifyContent:"space-between",alignItems:"center",children:[e.jsx(w,{item:!0,children:e.jsxs(le,{variant:"h5",fontWeight:"medium",children:[A.formode," ",r]})}),e.jsxs(w,{item:!0,className:"flex items-center gap-2",children:[!B&&ge(r,"is_update")&&e.jsx(w,{item:!0,children:e.jsxs(_e,{variant:"gradient",color:"info",onClick:()=>z(!0),children:[e.jsx(Ea,{size:"1.5em"}),"Tujuan Baru"]})}),e.jsx(w,{item:!0,children:e.jsxs(_e,{variant:"gradient",color:"secondary",onClick:J,children:[e.jsx(za,{size:"1.5em",className:"me-2"}),A.formode!="Lihat"?"Batal":"Kembali"]})})]})]})}),e.jsxs("div",{className:"flex flex-col md:justify-between",children:[e.jsx("div",{className:"overflow-auto",children:e.jsxs("div",{className:"table px-6 pt-6 min-w-full",children:[e.jsx("div",{className:"flex justify-end mb-1",children:e.jsx(pa,{config:b,handleClick:S})}),e.jsxs("table",{className:"w-full text-sm text-left !text-gray-700 dark:text-gray-400 table-bordered",children:[e.jsx("thead",{className:"text-xs text-gray-500 uppercase border-b-2 mb-1",children:e.jsxs("tr",{children:[e.jsx(q,{text:"Pengguna",sortField:"nama",sortOrder:b.sortOrder,config:b,handleClick:()=>f("nama")}),e.jsx(q,{text:"Dibuat Pada",sortField:"created_at",sortOrder:b.sortOrder,config:b,handleClick:()=>f("created_at")}),e.jsx(q,{text:"Aksi",className:"justify-center min-w-[2rem]"})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{className:"border-b border-slate-300",children:[e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"kepada",onSearch:F,placeholder:"Nama",type:"input"})}),e.jsx("td",{}),e.jsx("td",{})]}),t?e.jsx("tr",{children:e.jsx("td",{colSpan:5,children:e.jsx(ia,{})})}):e.jsx(e.Fragment,{}),k.length?k.map((h,d)=>e.jsxs("tr",{className:"border-b border-slate-300",children:[e.jsx("td",{className:" max-w-[20rem] px-6 py-6",children:h.nama}),e.jsx("td",{className:" max-w-[20rem] px-6 py-6",children:na(h.dibuat)}),e.jsxs("td",{className:"px-1 text-right w-[2rem]",children:[" ",h.action," "]})]},d)):e.jsx(e.Fragment,{})]})]}),e.jsxs("nav",{className:"flex items-center justify-between p-4","aria-label":"Table navigation",children:[e.jsx("span",{className:"text-sm text-gray-400",children:I.from&&`Menampilkan ${Se(I.from)} sampai ${Se(I.to)} dari ${Se(I.total)} entri`}),e.jsx(xa,{currentPage:b.page,lastPage:$,displayCount:5,handleClick:x})]})]})}),e.jsx(ca,{initialValues:A,onSubmit:R,validateOnChange:!0,validationSchema:nn,children:e.jsxs(da,{id:"form",encType:"multipart/form-data",className:"w-full md:w-8/12",children:[e.jsx(w,{mt:2,children:e.jsxs("div",{className:"px-6 grid grid-cols-1 mb-10 gap-5 lg:mb-0",children:[e.jsx(w,{mt:3,children:e.jsx(ce,{name:"nama",children:({field:h,form:d,meta:j})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Nama Grup",required:!0,error:j.error&&j.touched}),e.jsx(Ye,{...h,type:"text",placeholder:"Nama Grup",error:j.error&&j.touched,disabled:B}),e.jsx(ue,{text:j.error,error:j.error&&j.touched})]})})}),e.jsx(w,{mt:3,children:e.jsx(ce,{name:"deskripsi",children:({field:h,form:d,meta:j})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Deskripsi",required:!1,error:j.error&&j.touched}),e.jsx(Ka,{...h,placeHolder:"Masukan Deskripsi..",error:j.error&&j.touched,rows:3,disabled:B}),e.jsx(ue,{text:j.error,error:j.error&&j.touched})]})})})]})}),e.jsxs("div",{className:"px-6 py-3 flex justify-between items-center w-full gap-5 mb-10",children:[e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx(Yi,{size:"1.0em",className:"pb-1",color:"#000"}),e.jsx(le,{variant:"caption",children:na(A.created_at)})]}),!B&&e.jsx(Je,{submit:H,color:"success",formId:"form",text:A.formode=="Tambah"?"Simpan":"Ubah"})]})]})})]})]})}),e.jsxs(Fa,{open:W,onClose:P,children:[e.jsxs("div",{className:"pb-28",children:[e.jsx(_a,{children:"Tambah Tujuan Disposisi Baru"}),e.jsx(ca,{initialValues:X,onSubmit:u,validateOnChange:!0,validationSchema:qj,children:e.jsx(da,{id:"formTujuan",children:e.jsx("div",{className:"px-2",children:e.jsx(w,{mt:1,children:e.jsx("div",{className:"p-3",children:e.jsx(ce,{name:"penggunas",children:({field:h,form:d,meta:j})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Pengguna",required:!0,error:j.error&&j.touched}),e.jsx(ra,{isMulti:!0,url:"pengguna/grup-disposisi/pengguna",isDisabled:B,callbackChange:g=>{const c=Array.from(g,v=>v.id);d.setFieldValue("penggunas",c.length?c:null)},keyValue:["id","nama_jabatan"],placeholder:"Pilih Tujuan...",className:"text-base",menuPortalTarget:null,optionParam:{id:A.id,organisasi_id:A.organisasi_id,public_organisasi_id:A.public_organisasi_id,group_role:4}}),e.jsx(ue,{text:j.error,error:j.error&&j.touched})]})})})})})})})]}),e.jsx(ya,{children:e.jsxs(e.Fragment,{children:[!B&&e.jsx(Je,{submit:H,color:"success",formId:"formTujuan",text:"Simpan"}),e.jsx(_e,{color:B?"dark":"error",variant:"gradient",onClick:P,children:B?"Tutup":"Batal"})]})})]})]})]})},Jj=()=>{var R,u,D;const r="Log Naskah Keluar",s=gt(),[n,t]=a.useState(!1),[i,l]=a.useState(!1),m=JSON.parse(Le.getItem("users")),p=new Ts,[B,K]=a.useState(!1),W=new qa,z=ga(),T=ha(),L="",[$,M]=a.useState([]),[H,V]=a.useState({id:((R=z.state)==null?void 0:R.id)??null}),[A,G]=a.useState({});a.useEffect(()=>{const J=new URLSearchParams(z.search).get("id");if(J&&!H.id){const P=Js(J);V(h=>({...h,id:Number(P)}))}},[z.search]);const{data:X,isLoading:O,refetch:I}=ds({refetchOnWindowFocus:!1,enabled:!!H.id,queryKey:[Qs,H.id],queryFn:()=>p.getDetail(H.id).then(E=>{var J,P;return S((P=(J=E==null?void 0:E.data)==null?void 0:J.result)==null?void 0:P.klasifikasi_id),x(),E.data.result})});a.useEffect(()=>{t(!0),O?Ta.loading("Mengambil data Naskah",{toastId:"load-nk"}):Ta.update("load-nk",{render:"Data naskah berhasil didapatkan",isLoading:!1,closeButton:!0,autoClose:5e3,type:"success",pauseOnFocusLoss:!1})},[O]);const _={naskah_keluar_id:H==null?void 0:H.id,page:1,rows:300},{data:C,isLoading:k,refetch:b}=ds({refetchOnWindowFocus:!1,enabled:!!(H!=null&&H.id)&&!!B,queryKey:[Zr,_],queryFn:()=>p.getPagingVerifikator(_).then(E=>E.data.result.data).catch(E=>{console.log({error:E})})}),{mutate:y,isPending:o}=it({mutationFn:E=>p.sending(E,{user_session_id:m==null?void 0:m.id}),onSuccess:async E=>{E.data.success&&(await I().then(()=>{var J,P,h;K(!1),U.fire({icon:(J=E.data)!=null&&J.success?"success":"warning",title:(P=E.data)!=null&&P.success?"Berhasil":"Gagal",text:(h=E.data)==null?void 0:h.message})}),s.invalidateQueries({queryKey:[Is]}),s.invalidateQueries({queryKey:[Zr]}),s.invalidateQueries({queryKey:[As]}),s.invalidateQueries({queryKey:[Os]}))},onError:E=>{var P,h;const J=Oe(E.response.data.result);U.fire("Gagal",J??((h=(P=E.response)==null?void 0:P.data)==null?void 0:h.message),"error")}}),F=()=>{T(L+"/pembuatan-naskah-keluar/log-naskah-keluar")},x=async(E=!1)=>{const J={naskah_id:H==null?void 0:H.id,naskah:"KELUAR",page:1,rows:300};l(!0),await p.getPagingLampiran(J).then(P=>{let h=P.data.result.data;h&&M(h)}).catch(P=>{console.log({error:P})}).finally(()=>l(!1))},S=async E=>{E&&await W.detail("klasifikasi",E,"master").then(J=>{G(J)})},f=()=>{K(!1)};return e.jsxs(aa,{children:[e.jsx(la,{}),n&&e.jsxs(e.Fragment,{children:[e.jsxs(ie,{pt:6,pb:3,className:"flex flex-col gap-10",children:[e.jsx(ie,{children:e.jsxs("div",{className:"flex justify-between p-3 items-center",children:[e.jsxs(le,{variant:"h5",fontWeight:"medium",children:["Detail ",r]}),e.jsxs("div",{className:"flex justify-end ",children:[(X==null?void 0:X.is_draft)&&e.jsx("div",{className:"me-3",children:e.jsxs(_e,{variant:"gradient",color:"success",onClick:()=>K(!0),children:[e.jsx(rt,{size:"1.5em",className:"me-2"}),e.jsx("p",{className:"whitespace-nowrap",children:"Kirim Konsep"})]})}),e.jsxs(_e,{variant:"gradient",color:"secondary",onClick:F,children:[e.jsx(za,{size:"1.5em",className:"me-2"}),"Kembali"]})]})]})}),((u=X==null?void 0:X.status_send)==null?void 0:u.status)==="SUDAH"&&e.jsxs("div",{className:"flex justify-between gap-3 p-5 items-center bg-gradient-to-r from-teal-400 to-teal-500 rounded-2xl",children:[e.jsx(Xs,{size:"5em",className:"text-white"}),e.jsxs("div",{children:[e.jsx(le,{variant:"h5",fontWeight:"medium",align:"right",color:"white",children:"Naskah ini telah dikirim"}),e.jsxs(le,{variant:"caption",fontWeight:"medium",align:"right",color:"light",children:["Pada hari ",na((D=X==null?void 0:X.status_send)==null?void 0:D.updated_at)]})]})]}),(X==null?void 0:X.is_draft)&&e.jsxs("div",{className:"flex justify-between gap-3 mb-8 p-5 items-center bg-gradient-to-r from-gray-400 to-gray-500 rounded-2xl",children:[e.jsx(Gi,{size:"5em",className:"text-white"}),e.jsxs("div",{children:[e.jsx(le,{variant:"h5",fontWeight:"medium",align:"right",color:"white",children:"Naskah ini belum dikirim"}),e.jsx("div",{className:"text-right",children:e.jsx(le,{variant:"caption",fontWeight:"medium",color:"light",children:"Pastikan Naskah sudah lengkap dan sesuai. Naskah akan dikirimkan kepada Verifikator."})})]})]}),e.jsx(ii,{data:X,klasifikasi:A,lampiran:$,naskahId:H.id,category:"log"}),e.jsx(Me,{children:e.jsx(ie,{px:3,pt:3,lineHeight:1,children:e.jsx(si,{naskahId:H.id})})}),e.jsx(Me,{children:e.jsx(ie,{px:3,pt:3,lineHeight:1,children:e.jsx(ti,{naskahId:H.id})})}),e.jsx(Me,{children:e.jsx(ie,{px:3,pt:3,lineHeight:1,children:e.jsx(ri,{naskahId:H.id,naskahFilePath:X==null?void 0:X.file_path})})}),e.jsx(Me,{children:e.jsx(ie,{px:3,pt:3,lineHeight:1,children:e.jsx(ni,{naskahId:H.id,status_send:X==null?void 0:X.status_send})})})]}),e.jsx(ua,{}),e.jsxs(Fa,{open:B,onClose:f,children:[e.jsxs("div",{children:[e.jsxs(_a,{className:"flex items-center gap-2 text-teal-600 ",children:[e.jsx(qt,{className:"w-12 h-11 me-5"}),e.jsx(le,{children:"Kirim Naskah"})]}),e.jsxs(w,{px:4,children:[e.jsxs(le,{variant:"body2",children:["Anda akan mengirim Naskah ini dengan nomor ",e.jsx("b",{children:X==null?void 0:X.nomor})," kepada verifikator:"]}),e.jsxs("table",{className:"mt-4 border-none w-full",children:[e.jsx("thead",{className:"text-gray-500 border-b-2 mb-1",children:e.jsxs("tr",{children:[e.jsx("td",{className:"p-2",children:e.jsx(le,{variant:"h6",children:"Kepada"})}),e.jsx("td",{className:"p-2",children:e.jsx(le,{variant:"h6",children:"Unit Kerja / Instansi"})})]})}),e.jsxs("tbody",{children:[k?e.jsx("tr",{className:"border-b border-slate-300",children:e.jsx("td",{colSpan:5,children:e.jsx(ia,{})})}):e.jsx(e.Fragment,{}),C==null?void 0:C.map(E=>e.jsxs("tr",{className:"border-b",children:[e.jsxs("td",{className:"p-2",children:[E.nama," - ",E.jabatan]}),e.jsx("td",{className:"p-2",children:E.organisasi_nama&&E.organisasi_nama!=="null"?`${E.organisasi_nama} - ${E.instansi}`:E.instansi})]},E.id))]})]})]})]}),e.jsx(ya,{children:e.jsxs(e.Fragment,{children:[e.jsx(Je,{submit:!o,color:"success",onClick:()=>!o&&!k&&y(H.id),text:"Ya Kirim"}),e.jsx(_e,{color:"error",variant:"gradient",onClick:()=>K(!1),children:"Tutup"})]})})]})]})]})},Yj=fa().shape({sender_user_id:wa().required("Pengirim harus dipilih"),jenis_naskah_id:wa().min(1,"Pilih Jenis Naskah").required("Jenis Naskah harus dipilih"),sifat_naskah_id:wa().min(1,"Pilih Sifat Naskah").required("Sifat Naskah harus dipilih"),klasifikasi_id:wa().required("Klasifikasi harus dipilih"),hal:ze().required("Hal harus diisi"),ringkasan:ze().required("Isi Ringkas harus diisi"),ttd:ze().required("Tipe Tanda Tangan harus dipilih"),file:Qa().required("File Naskah harus diisi"),tipe_tte:ze().nullable().test("is-required","Visual TTE harus diisi",function(r){return this.parent.ttd=="TTE"?!!r:!0})}),Qj=fa().shape({id:wa().min(1,"Pilih Pengguna Verifikator").required("Pengguna Verifikator harus dipilih")}),Xj=fa().shape({user_id:wa().min(1,"Pilih Penandatangan").required("Penandatangan harus dipilih")}),Zj=fa().shape({}),ek=({naskahId:r,visibleview:s,modul:n,setCurrentPenandatangan:t})=>{const i=new Ts,l=JSON.parse(Le.getItem("users")),[m,p]=a.useState(!1),[B,K]=a.useState(!1),[W,z]=a.useState([]),[T,L]=a.useState(!0),[$,M]=a.useState(!1),[H,V]=a.useState({naskah_keluar_id:r,user_id:null}),[A,G]=a.useState(null),[X,O]=a.useState({total:0,from:1,to:1});let I=[];W==null?I=[]:I=W.map((R,u)=>({urutan:u+X.from,pengguna:R.nama+" - "+R.jabatan,instansi:R.unit_kerja&&R.unit_kerja!=="null"?`${R.unit_kerja} - ${R.instansi}`:R.instansi,deskripsi:R.deskripsi,user_id:R.user_id,pengguna_id:R.pengguna_id,status:R.status,statusAction:R.status==="SETUJU"?e.jsx(be,{badgeContent:"SETUJU",color:"success",container:!0}):R.status==="DITOLAK"?e.jsx(be,{badgeContent:"DITOLAK",color:"error",container:!0}):e.jsx(be,{badgeContent:"BELUM DIPERIKSA",color:"info",container:!0}),action:e.jsx("div",{className:"flex justify-center w-full",children:!s&&ge(n,"is_delete")&&e.jsx($a,{size:"1.5em",color:"#e62e2d",onClick:()=>S(R),className:"cursor-pointer",title:"Hapus"})})}));const[_,C]=a.useState({naskah_keluar_id:r,page:1,rows:10,sortField:"",sortOrder:null,search:"",filters:{pengguna:{value:""},instansi:{value:""},deskripsi:{value:""},status:{value:""}}});a.useEffect(()=>{W.length>0&&t(W)},[W]),a.useEffect(()=>{r&&k()},[_,r]);const k=async(R=!1)=>{R&&(_.page=1),K(!0),await i.getPagingPenandatanganan(_).then(u=>{let D=u.data.result;D.data&&(G(D.last_page),z(D.data),K(!1)),K(!1),O({...X,to:D.to,from:D.from,total:D.total})}).catch(u=>{console.log({error:u}),u.response.status==404&&z([]),K(!1),O({...X,to:0,from:!1,total:0})})},b=os((R,u,D=null)=>{if(D){let J=D.target;for(;J&&J.tagName!=="TD";)J=J.parentNode;if(J&&J.tagName==="TD"){const P=J.querySelector(".clear-input"),h=J.querySelector("input");u?P.classList.remove("hidden"):(P.classList.add("hidden"),h.value="")}}let E={..._};E.filters[R].value=u,E.page=1,C(E)},600),y=R=>{let u={..._};u.page=R,C(u),window.scrollTo({top:0,behavior:"smooth"})},o=R=>{let u={..._};u.rows=R,C(u)},F=R=>{let u={..._};u.sortField=R,_.sortField!=R?_.sortOrder==""&&(u.sortOrder=1):_.sortOrder==1?u.sortOrder=-1:(u.sortOrder="",u.sortField=""),u.page=1,C(u)},x=R=>{L(!1),i.addPenandatanganan(R).then(u=>{var D,E,J;U.fire({icon:(D=u.data)!=null&&D.success?"success":"warning",title:(E=u.data)!=null&&E.success?"Berhasil":"Gagal",text:(J=u.data)==null?void 0:J.message}).then(()=>{U.fire("Perhatian",`Terjadi perubahan harap tekan tombol Perbarui Naskah untuk memperbarui dokumen naskah 
 Dan pastikan jumlah tandatangan sesuai dengan yang di dokumen naskah`,"info")}),u.data.success&&(k(!0),f())}).catch(u=>{var D,E,J,P;console.log(u),U.fire("Gagal",(E=(D=u.response)==null?void 0:D.data)!=null&&E.result&&u.response.data.result.length>0?u.response.data.result[0]:(P=(J=u.response)==null?void 0:J.data)==null?void 0:P.message,"error")}).finally(()=>{L(!0),U.close()})},S=R=>{U.fire({title:"Konfirmasi",text:`Data ${R.nama} akan dihapus ?`,icon:"warning",showCancelButton:!0,confirmButtonText:"Hapus",cancelButtonText:"Batal",customClass:{confirmButton:"button button-error",cancelButton:"button button-info"}}).then(u=>{u.isConfirmed&&(ka(),i.deletePenandatanganan(R.id).then(D=>{D.status==200&&k(!0),U.fire("Berhasil","Data Berhasil Dihapus","success").then(()=>{U.fire("Perhatian","Terjadi perubahan harap tekan tombol Perbarui Naskah untuk memperbarui dokumen naskah","info")})}).catch(D=>{var J,P;const E=getDynamicError(D.response.data.result);U.fire("Gagal",E??((P=(J=D.response)==null?void 0:J.data)==null?void 0:P.message),"error")}).finally(()=>U.close()))})},f=()=>{M(!1)};return e.jsxs("div",{children:[e.jsxs(w,{container:!0,direction:"row",justifyContent:"space-between",alignItems:"center",children:[e.jsxs(w,{item:!0,className:"flex items-center gap-2",children:[e.jsx(Ks,{size:"1.5em"}),e.jsx(le,{variant:"h5",fontWeight:"medium",children:"Daftar Penandatangan"})]}),e.jsx(w,{item:!0,children:e.jsx(ie,{children:e.jsxs(_e,{variant:"gradient",color:"info",onClick:R=>M(!0),children:[e.jsx(Ea,{size:"1.5em",className:"me-2"}),"Tambah"]})})})]}),e.jsx(w,{children:e.jsx("div",{className:"overflow-auto",children:e.jsxs("div",{className:"table px-6 pt-6 min-w-full",children:[e.jsx("div",{className:"flex items-center justify-end mb-1",children:e.jsx(pa,{config:_,handleClick:o})}),e.jsxs("table",{className:"w-full text-sm text-left !text-gray-700 dark:text-gray-400 table-bordered",children:[e.jsx("thead",{className:"text-xs text-gray-500 uppercase border-b-2 mb-1",children:e.jsxs("tr",{children:[e.jsx(q,{text:"Urutan",sortField:"urutan",sortOrder:_.sortOrder,config:_,handleClick:()=>F("urutan")}),e.jsx(q,{text:"Pengguna",sortField:"",sortOrder:_.sortOrder,config:_,handleClick:()=>F("pengguna")}),e.jsx(q,{text:"Unit Kerja / Instansi"}),e.jsx(q,{text:"Catatan",sortField:"hal",sortOrder:_.sortOrder,config:_,handleClick:()=>F("hal")}),e.jsx(q,{text:"Status",sortField:"asal_naskah",sortOrder:_.sortOrder,config:_,handleClick:()=>F("asal_naskah")}),e.jsx(q,{text:"Aksi",className:"flex justify-center min-w-[2rem]"})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{className:"border-b border-slate-300",children:[e.jsx("td",{className:""}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"pengguna",onSearch:b,placeholder:"Pengguna",type:"input"})}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"instansi",onSearch:b,placeholder:"Unit Kerja / Instansi",type:"input"})}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"deskripsi",onSearch:b,placeholder:"Catatan",type:"input"})}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"status",onSearch:b,placeholder:"Status",type:"input"})}),e.jsx("td",{})]}),B?e.jsx("tr",{className:"border-b border-slate-300",children:e.jsx("td",{colSpan:5,children:e.jsx(ia,{})})}):e.jsx(e.Fragment,{}),I.length?I.map((R,u)=>e.jsxs("tr",{className:"border-b border-slate-300",children:[e.jsx("td",{className:"max-w-[20rem] px-6 py-6",children:R.urutan}),e.jsx("td",{className:"max-w-[20rem] px-6 py-6",children:R.pengguna}),e.jsx("td",{className:"max-w-[20rem] px-6 py-6",children:R.instansi}),e.jsx("td",{className:"max-w-[20rem] px-6 py-6",children:R.deskripsi??"-"}),e.jsx("td",{className:"max-w-[20rem] px-6 py-6",children:R.statusAction}),e.jsx("td",{className:"max-w-[20rem] px-6 py-6",children:R.action})]},u)):e.jsx(e.Fragment,{})]})]}),e.jsxs("nav",{className:"flex items-center justify-between p-4","aria-label":"Table navigation",children:[e.jsx("span",{className:"text-sm text-gray-400",children:X.from&&`Menampilkan ${Se(X.from)} sampai ${Se(X.to)} dari ${Se(X.total)} entri`}),e.jsx(xa,{currentPage:_.page,lastPage:A,displayCount:5,handleClick:y})]})]})})}),e.jsxs(Fa,{open:$,onClose:f,children:[e.jsxs("div",{children:[e.jsxs(_a,{className:"flex items-center gap-2",children:[e.jsx(Ea,{size:"1.5em"}),e.jsx(le,{children:" Form Penandatangan Baru"})]}),e.jsx(ca,{initialValues:H,onSubmit:x,validateOnChange:!0,validationSchema:Xj,children:e.jsx(da,{id:"formPenandatangan",className:"text-sm",children:e.jsx("div",{className:"mb-6 px-2",children:e.jsx(w,{mt:1,children:e.jsx(Na,{children:e.jsx(ce,{name:"user_id",children:({field:R,form:u,meta:D})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Pengguna",required:!0,error:D.error&&D.touched}),e.jsx(ra,{url:"pengguna/daftar-penandatangan/select2",isDisabled:s,callbackChange:E=>{E?(u.setFieldValue("user_id",(E==null?void 0:E.pengguna_id)??""),u.setFieldValue("filename",(E==null?void 0:E.filename)??"")):u.resetForm()},keyValue:["id","text"],placeholder:"Pilih Penandatangan...",className:"text-base",menuPortalTarget:null,optionParam:{"select-target":"penandatangan",organisasi_id:l==null?void 0:l.organisasi_id,filter_arr:I.map(E=>E.user_id),filter_by:"pengguna_id"}}),e.jsx(ue,{text:D.error,error:D.error&&D.touched})]})})})})})})})]}),e.jsx(ya,{children:e.jsxs(e.Fragment,{children:[!s&&e.jsx(Je,{submit:T,color:"success",formId:"formPenandatangan",text:"Simpan"}),e.jsx(_e,{color:s?"dark":"error",variant:"gradient",onClick:()=>M(!1),children:s?"Tutup":"Batal"})]})})]})]})},ak=({naskahId:r,visibleview:s,modul:n,verif:t})=>{const i=new Ts,l=JSON.parse(Le.getItem("users")),[m,p]=a.useState(!1),[B,K]=a.useState(!1),[W,z]=a.useState(null),[T,L]=a.useState(!0),[$,M]=a.useState(null),[H,V]=a.useState(!1),[A,G]=a.useState({naskah_keluar_id:r,id:null}),[X,O]=a.useState(null),[I,_]=a.useState({total:0,from:1,to:1});let C=[];W==null?C=[]:C=W.map((D,E)=>({urutan:E+I.from,pengguna:D.nama+" - "+D.jabatan,instansi:D.organisasi_nama&&D.organisasi_nama!=="null"?`${D.organisasi_nama} - ${D.instansi}`:D.instansi,deskripsi:D.deskripsi,user_id:D.user_id,status:D.status,statusAction:D.status==="SETUJU"?e.jsx(be,{badgeContent:"SETUJU",color:"success",container:!0}):D.status==="DITOLAK"?e.jsx(be,{badgeContent:"DITOLAK",color:"error",container:!0}):e.jsx(be,{badgeContent:"BELUM DIPERIKSA",color:"info",container:!0}),action:e.jsx("div",{className:"flex justify-center w-full",children:!s&&ge(n,"is_delete")&&e.jsx($a,{size:"1.5em",color:"#e62e2d",onClick:()=>R(D),className:"cursor-pointer",title:"Hapus"})})}));const[k,b]=a.useState({naskah_keluar_id:r,page:1,rows:10,sortField:"",sortOrder:null,search:"",filters:{pengguna:{value:""},instansi:{value:""},deskripsi:{value:""},status:{value:""}}});a.useEffect(()=>{r&&y()},[k,r]);const y=async(D=!1)=>{D&&(k.page=1),K(!0),await i.getPagingVerifikator(k).then(E=>{let J=E.data.result;J.data&&(O(J.last_page),z(J.data),i.getForward({naskah_id:r}).then(P=>{M(P.data.result.current)}),K(!1)),K(!1),_({...I,to:J.to,from:J.from,total:J.total})}).catch(E=>{console.log({error:E}),E.response.status==404&&z([]),K(!1),_({...I,to:0,from:!1,total:0})})},o=os((D,E,J=null)=>{if(J){let h=J.target;for(;h&&h.tagName!=="TD";)h=h.parentNode;if(h&&h.tagName==="TD"){const d=h.querySelector(".clear-input"),j=h.querySelector("input");E?d.classList.remove("hidden"):(d.classList.add("hidden"),j.value="")}}let P={...k};P.filters[D].value=E,P.page=1,b(P)},600),F=D=>{let E={...k};E.page=D,b(E),window.scrollTo({top:0,behavior:"smooth"})},x=D=>{let E={...k};E.rows=D,b(E)},S=D=>{let E={...k};E.sortField=D,k.sortField!=D?k.sortOrder==""&&(E.sortOrder=1):k.sortOrder==1?E.sortOrder=-1:(E.sortOrder="",E.sortField=""),E.page=1,b(E)},f=D=>{L(!1),i.addVerifikator(D).then(E=>{var J,P,h;U.fire({icon:(J=E.data)!=null&&J.success?"success":"warning",title:(P=E.data)!=null&&P.success?"Berhasil":"Gagal",text:(h=E.data)==null?void 0:h.message}).then(()=>{U.fire("Perhatian","Terjadi perubahan harap tekan tombol Perbarui Naskah untuk memperbarui dokumen naskah","info")}),E.data.success&&(y(!0),u())}).catch(E=>{var J,P,h,d;console.log(E),U.fire("Gagal",(P=(J=E.response)==null?void 0:J.data)!=null&&P.result&&E.response.data.result.length>0?E.response.data.result[0]:(d=(h=E.response)==null?void 0:h.data)==null?void 0:d.message,"error")}).finally(()=>L(!0))},R=D=>{U.fire({title:"Konfirmasi",text:`Data ${D.nama} akan dihapus ?`,icon:"warning",showCancelButton:!0,confirmButtonText:"Hapus",cancelButtonText:"Batal",customClass:{confirmButton:"button button-error",cancelButton:"button button-info"}}).then(E=>{E.isConfirmed&&(ka(),i.deleteVerifikator(D.id).then(J=>{var P,h,d;J.status==200&&y(),U.fire({icon:(P=J.data)!=null&&P.success?"success":"warning",title:(h=J.data)!=null&&h.success?"Berhasil":"Gagal",text:(d=J.data)==null?void 0:d.message}).then(()=>{U.fire("Perhatian","Terjadi perubahan harap tekan tombol Perbarui Naskah untuk memperbarui dokumen naskah","info")})}).catch(J=>{var h,d;const P=getDynamicError(J.response.data.result);U.fire("Gagal",P??((d=(h=J.response)==null?void 0:h.data)==null?void 0:d.message),"error")}))})},u=()=>{V(!1)};return e.jsxs("div",{children:[e.jsxs(w,{container:!0,direction:"row",justifyContent:"space-between",alignItems:"center",children:[e.jsxs(w,{item:!0,className:"flex items-center gap-2",children:[e.jsx(Ki,{size:"1.5em"}),e.jsx(le,{variant:"h5",fontWeight:"medium",children:"Daftar Verifikator"})]}),e.jsx(w,{item:!0,children:(!t||t&&$!="penandatangan")&&e.jsxs(_e,{variant:"gradient",color:"info",onClick:D=>V(!0),children:[e.jsx(Ea,{size:"1.5em",className:"me-2"}),"Tambah"]})})]}),e.jsx(w,{children:e.jsx("div",{className:"overflow-auto",children:e.jsxs("div",{className:"table px-6 pt-6 min-w-full",children:[e.jsx("div",{className:"flex items-center justify-end mb-1",children:e.jsx(pa,{config:k,handleClick:x})}),e.jsxs("table",{className:"w-full text-sm text-left !text-gray-700 dark:text-gray-400 table-bordered",children:[e.jsx("thead",{className:"text-xs text-gray-500 uppercase border-b-2 mb-1",children:e.jsxs("tr",{children:[e.jsx(q,{text:"Urutan",sortField:"urutan",sortOrder:k.sortOrder,config:k,handleClick:()=>S("urutan")}),e.jsx(q,{text:"Pengguna",sortField:"nama",sortOrder:k.sortOrder,config:k,handleClick:()=>S("nama")}),e.jsx(q,{text:"Unit Kerja / Instansi",sortField:"instansi",sortOrder:k.sortOrder,config:k,handleClick:()=>S("instansi")}),e.jsx(q,{text:"Catatan",sortField:"deskripsi",sortOrder:k.sortOrder,config:k,handleClick:()=>S("deskripsi")}),e.jsx(q,{text:"Status",sortField:"status",sortOrder:k.sortOrder,config:k,handleClick:()=>S("status")}),e.jsx(q,{text:"Aksi",className:"flex justify-center min-w-[2rem]"})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{className:"border-b border-slate-300",children:[e.jsx("td",{className:""}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"pengguna",onSearch:o,placeholder:"Pengguna",type:"input"})}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"instansi",onSearch:o,placeholder:"Unit Kerja / Instansi",type:"input"})}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"deskripsi",onSearch:o,placeholder:"Catatan",type:"input"})}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"status",onSearch:o,placeholder:"Status",type:"input"})}),e.jsx("td",{})]}),B?e.jsx("tr",{className:"border-b border-slate-300",children:e.jsx("td",{colSpan:5,children:e.jsx(ia,{})})}):e.jsx(e.Fragment,{}),C.length?C.map((D,E)=>e.jsxs("tr",{className:"border-b border-slate-300",children:[e.jsx("td",{className:"max-w-[20rem] px-6 py-6",children:D.urutan}),e.jsx("td",{className:"max-w-[20rem] px-6 py-6",children:D.pengguna}),e.jsx("td",{className:"max-w-[20rem] px-6 py-6",children:D.instansi}),e.jsx("td",{className:"max-w-[20rem] px-6 py-6",children:D.deskripsi??"-"}),e.jsx("td",{className:"max-w-[20rem] px-6 py-6",children:D.statusAction}),e.jsx("td",{className:"max-w-[20rem] px-6 py-6",children:D.status===null&&e.jsx(e.Fragment,{children:D.action})})]},E)):e.jsx(e.Fragment,{})]})]}),e.jsxs("nav",{className:"flex items-center justify-between p-4","aria-label":"Table navigation",children:[e.jsx("span",{className:"text-sm text-gray-400",children:I.from&&`Menampilkan ${Se(I.from)} sampai ${Se(I.to)} dari ${Se(I.total)} entri`}),e.jsx(xa,{currentPage:k.page,lastPage:X,displayCount:5,handleClick:F})]})]})})}),e.jsxs(Fa,{open:H,onClose:u,children:[e.jsxs("div",{children:[e.jsxs(_a,{className:"flex items-center gap-2",children:[e.jsx(Ea,{size:"1.5em"}),e.jsx(le,{children:" Form Verifikator Baru"})]}),e.jsx(ca,{initialValues:A,onSubmit:f,validateOnChange:!0,validationSchema:Qj,children:e.jsx(da,{id:"formVerif",className:"text-sm",children:e.jsx("div",{className:"mb-6 px-2",children:e.jsx(w,{mt:1,children:e.jsx(Na,{children:e.jsx(ce,{name:"id",children:({field:D,form:E,meta:J})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Pengguna",required:!0,error:J.error&&J.touched}),e.jsx(ra,{url:"pengguna/verifikator/select2",isDisabled:s,callbackChange:P=>{P?E.setFieldValue("id",(P==null?void 0:P.id)??""):E.resetForm()},keyValue:["id","text"],placeholder:"Pilih Verifikator...",className:"text-base",menuPortalTarget:null,optionParam:{"select-target":"verifikator",organisasi_id:l==null?void 0:l.organisasi_id,filter_arr:C.map(P=>P.user_id),filter_by:"user_id"}}),e.jsx(ue,{text:J.error,error:J.error&&J.touched})]})})})})})})})]}),e.jsx(ya,{children:e.jsxs(e.Fragment,{children:[!s&&e.jsx(Je,{submit:T,color:"success",formId:"formVerif",text:"Simpan"}),e.jsx(_e,{color:s?"dark":"error",variant:"gradient",onClick:()=>V(!1),children:s?"Tutup":"Batal"})]})})]})]})},xo=({title:r,childMenuList:s})=>{const[n,t]=a.useState(!1);return e.jsxs("div",{children:[e.jsx(Ms,{onClick:()=>t(!n),children:e.jsxs("div",{className:"flex w-full justify-between items-center gap-2",children:[e.jsx(le,{variant:"button",textTransform:"capitalize",fontWeight:"regular",children:e.jsx("strong",{children:r})}),e.jsx(Bu,{})]})}),e.jsx(Bi,{in:n,children:s==null?void 0:s.map((i,l)=>e.jsx(Ms,{onClick:i.onClick,children:e.jsx(le,{variant:"button",textTransform:"capitalize",fontWeight:"regular",children:e.jsx("strong",{children:i.title})})},l))})]})},sk=({modul:r,visibleview:s,formValue:n,user:t})=>{const i=new Ts,[l,m]=a.useState(!1),[p,B]=a.useState([]),[K,W]=a.useState(null),[z,T]=a.useState(!1),[L,$]=a.useState(null),[M,H]=a.useState(null),[V,A]=a.useState(!1),[G,X]=a.useState(!1),[O,I]=a.useState(!1),[_,C]=a.useState(!0),[k,b]=a.useState({naskah_id:n.id,to_user_id:0,organisasi_id:0,nama:"",jabatan:"",instansi:"",jenis:"",naskah:"KELUAR",nama_pengguna:"",nama_organisasi:"",to_jabatan_id:0,to_organisasi_id:0,to_public_organisasi_id:0}),[y,o]=a.useState({total:0,from:1,to:1});let F=[];p==null?F=[]:F=p.map(g=>({to_user_id:g.to_user_id,nama_jabatan:g.nama_jabatan,jenis:g.jenis,tanggal_dibuat:g.created_at,action:e.jsx("div",{className:"flex items-center justify-center gap-3 w-full",children:!s&&ge(r,"is_delete")&&e.jsx($a,{size:"1.5em",color:"#e62e2d",onClick:()=>P(g),className:"cursor-pointer",title:"Hapus"})})}));const[x,S]=a.useState({naskah_id:n.id,naskah:"KELUAR",page:1,rows:10,sortField:"created_at",sortOrder:1,search:"",filters:{nama_jabatan:{value:""},jenis:{value:""}}});a.useEffect(()=>{n.id&&f()},[x]);const f=async(g=!1)=>{g&&(x.page=1),m(!0),await i.getPagingTujuan(x).then(c=>{let v=c.data.result;v.data&&(W(v.last_page),B(v.data),m(!1)),m(!1),o({...y,to:v.to,from:v.from,total:v.total})}).catch(c=>{console.log({error:c}),c.response.status==404&&B([]),m(!1),o({...y,to:0,from:!1,total:0})})},R=os((g,c,v=null)=>{if(v){let Q=v.target;for(;Q&&Q.tagName!=="TD";)Q=Q.parentNode;if(Q&&Q.tagName==="TD"){const re=Q.querySelector(".clear-input"),ye=Q.querySelector("input");c?re.classList.remove("hidden"):(re.classList.add("hidden"),ye.value="")}}let N={...x};N.filters[g].value=c,N.page=1,S(N)},600),u=g=>{let c={...x};c.page=g,S(c),window.scrollTo({top:0,behavior:"smooth"})},D=g=>{let c={...x};c.rows=g,c.page=1,S(c)},E=g=>{let c={...x};c.sortField=g,x.sortField!=g?x.sortOrder==""&&(c.sortOrder=1):x.sortOrder==1?c.sortOrder=-1:(c.sortOrder="",c.sortField=""),c.page=1,S(c)},J=g=>{C(!1),i.postTujuan(g).then(c=>{var v,N,Q;U.fire((v=c.data)!=null&&v.success?"Berhasil":"Gagal",(N=c.data)==null?void 0:N.message,(Q=c.data)!=null&&Q.success?"success":"warning").then(()=>{U.fire("Perhatian","Terjadi perubahan harap tekan tombol Perbarui Naskah untuk memperbarui dokumen naskah","info")}),c.data.success&&(f(!0),h())}).catch(c=>{var v,N,Q,re;console.log(c),U.fire("Gagal",(N=(v=c.response)==null?void 0:v.data)!=null&&N.result&&c.response.data.result.length>0?c.response.data.result[0]:(re=(Q=c.response)==null?void 0:Q.data)==null?void 0:re.message,"error")}).finally(()=>C(!0))},P=g=>{U.fire({title:"Konfirmasi",text:`Data ${g.nama} akan dihapus ?`,icon:"warning",showCancelButton:!0,confirmButtonText:"Hapus",cancelButtonText:"Batal",customClass:{confirmButton:"button button-error",cancelButton:"button button-info"}}).then(c=>{c.isConfirmed&&(ka(),i.deleteTujuan(g.id).then(v=>{v.status==200&&f(!0),U.fire("Berhasil","Data Berhasil Dihapus","success").then(()=>{U.fire("Perhatian","Terjadi perubahan harap tekan tombol Perbarui Naskah untuk memperbarui dokumen naskah","info")})}).catch(v=>{var Q,re;const N=getDynamicError(v.response.data.result);U.fire("Gagal",N??((re=(Q=v.response)==null?void 0:Q.data)==null?void 0:re.message),"error")}))})},h=()=>{A(!1)},d=(g,c)=>{X(!1),A(!0),$(g),H(c),b({naskah_id:n.id,to_user_id:0,organisasi_id:0,nama:"",jabatan:"",instansi:"",jenis:g,naskah:"KELUAR",nama_pengguna:"",nama_organisasi:"",to_jabatan_id:0,to_organisasi_id:0,to_public_organisasi_id:0})},j=()=>e.jsx(Ls,{anchorEl:G,anchorOrigin:{vertical:"top",horizontal:"right"},open:!!G,onClose:()=>X(!1),sx:{mt:7,left:"-3rem",zIndex:10},children:e.jsxs("div",{children:[e.jsx(xo,{title:"Tujuan Utama",childMenuList:[{title:"Internal/Eksternal Srikandi",onClick:()=>d("UTAMA","INTERNAL/SRIKANDI")},{title:"Eksternal Non Srikandi",onClick:()=>d("UTAMA","EKSTERNAL")}]}),e.jsx(xo,{title:"Tembusan",childMenuList:[{title:"Internal/Eksternal Srikandi",onClick:()=>d("TEMBUSAN","INTERNAL/SRIKANDI")},{title:"Eksternal Non Srikandi",onClick:()=>d("TEMBUSAN","EKSTERNAL")}]})]})});return t==null||t.organisasi_id,e.jsxs("div",{children:[e.jsxs(w,{container:!0,direction:"row",justifyContent:"space-between",alignItems:"center",children:[e.jsxs(w,{item:!0,className:"flex items-center gap-2",children:[e.jsx(Vi,{size:"1.5em"}),e.jsx(le,{variant:"h5",fontWeight:"medium",children:"Tujuan"})]}),e.jsx(w,{item:!0,children:e.jsxs(ie,{children:[e.jsxs(_e,{variant:"gradient",color:"info",onClick:g=>X(g.currentTarget),children:[e.jsx(Ea,{size:"1.5em",className:"me-2"}),"Tambah"]}),j()]})})]}),e.jsxs(w,{children:[e.jsx("div",{className:"overflow-auto",children:e.jsxs("div",{className:"table px-6 pt-6 min-w-full",children:[e.jsx("div",{className:"flex justify-end mb-1",children:e.jsx(pa,{config:x,handleClick:D})}),e.jsxs("table",{className:"w-full text-sm text-left !text-gray-700 dark:text-gray-400 table-bordered",children:[e.jsx("thead",{className:"text-xs text-gray-500 uppercase border-b-2 mb-1",children:e.jsxs("tr",{children:[e.jsx(q,{text:"Kepada",sortField:"nama_jabatan",sortOrder:x.sortOrder,config:x,handleClick:()=>E("nama_jabatan")}),e.jsx(q,{text:"Jenis",sortField:"jenis",sortOrder:x.sortOrder,config:x,handleClick:()=>E("jenis")}),e.jsx(q,{text:"Tanggal Dibuat",sortField:"created_at",sortOrder:x.sortOrder,config:x,handleClick:()=>E("created_at")}),e.jsx(q,{text:"Aksi",className:"justify-center min-w-[2rem]"})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{className:"border-b border-slate-300",children:[e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"nama_jabatan",onSearch:R,placeholder:"Kepada",type:"input"})}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"jenis",onSearch:R,placeholder:"Jenis",type:"input"})}),e.jsx("td",{}),e.jsx("td",{})]}),l?e.jsx("tr",{children:e.jsx("td",{colSpan:5,children:e.jsx(ia,{})})}):e.jsx(e.Fragment,{}),F.length?F.map((g,c)=>e.jsxs("tr",{className:"border-b border-slate-300",children:[e.jsx("td",{className:" max-w-[20rem] px-6 py-6",children:g.nama_jabatan}),e.jsx("td",{className:" max-w-[20rem] px-6 py-6",children:g.jenis}),e.jsx("td",{className:" max-w-[20rem] px-6 py-6",children:na(g.tanggal_dibuat)}),e.jsxs("td",{className:"px-1 text-right w-[2rem]",children:[" ",g.action," "]})]},c)):e.jsx(e.Fragment,{})]})]}),e.jsxs("nav",{className:"flex items-center justify-between p-4","aria-label":"Table navigation",children:[e.jsx("span",{className:"text-sm text-gray-400",children:y.from&&`Menampilkan ${Se(y.from)} sampai ${Se(y.to)} dari ${Se(y.total)} entri`}),e.jsx(xa,{currentPage:x.page,lastPage:K,displayCount:5,handleClick:u})]})]})}),e.jsxs(Fa,{open:V,onClose:h,children:[e.jsxs("div",{children:[e.jsxs(_a,{children:["Form Tujuan ",L=="UTAMA"?"Utama":"Tembusan"," (",M=="INTERNAL/SRIKANDI"?"Internal / Srikandi":"Eksternal",") Baru"]}),e.jsx(ca,{initialValues:k,onSubmit:J,validateOnChange:!0,validationSchema:yd,children:e.jsx(da,{id:"formPengguna",className:"text-sm",children:e.jsx("div",{className:"mb-6 px-2",children:e.jsx(w,{mt:1,children:e.jsx(Na,{children:e.jsx(ce,{name:"to_user_id",children:({field:g,form:c,meta:v})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Kepada",required:!0,error:v.error&&v.touched}),e.jsx(ra,{url:L=="UTAMA"?"pengguna/tujuan/select2":"pengguna/tembusan/select2",isDisabled:s,callbackChange:N=>{var Q;N?(c.setFieldValue("to_user_id",(N==null?void 0:N.id)??""),c.setFieldValue("organisasi_id",(N==null?void 0:N.organisasi_id)??""),c.setFieldValue("nama",(N==null?void 0:N.nama)??""),c.setFieldValue("jabatan",(N==null?void 0:N.jabatan)??""),c.setFieldValue("instansi",(N==null?void 0:N.instansi)??""),c.setFieldValue("nama_pengguna",(N==null?void 0:N.username)??""),c.setFieldValue("nama_organisasi",(N==null?void 0:N.nama_organisasi)??""),c.setFieldValue("to_jabatan_id",((Q=N==null?void 0:N.jabatan)==null?void 0:Q.id)??""),c.setFieldValue("to_organisasi_id",(N==null?void 0:N.organisasi_id)??""),c.setFieldValue("to_public_organisasi_id",(N==null?void 0:N.public_organisasi_id)??"")):c.resetForm()},keyValue:["id","nama_full"],placeholder:"Pilih Tujuan...",className:"text-base",menuPortalTarget:null,optionParam:{"select-target":M=="INTERNAL/SRIKANDI"?"utama-internal-dan-srikandi":L=="UTAMA"?"utama-eksternal":"tembusan-eksternal",organisasi_id:t==null?void 0:t.organisasi_id,filter_arr:F.map(N=>N.to_user_id),filter_by:"id"}}),e.jsx(ue,{text:v.error,error:v.error&&v.touched})]})})})})})})})]}),e.jsx(ya,{children:e.jsxs(e.Fragment,{children:[!s&&e.jsx(Je,{submit:_,color:"success",formId:"formPengguna",text:"Simpan"}),e.jsx(_e,{color:s?"dark":"error",variant:"gradient",onClick:()=>A(!1),children:s?"Tutup":"Batal"})]})})]})]})]})},tk=({modul:r,visibleview:s,open:n,setOpen:t,formValue:i})=>{const l=new Ts,[m,p]=a.useState(!1),[B,K]=a.useState([]),[W,z]=a.useState(null),[T,L]=a.useState({}),[$,M]=a.useState(!1),[H,V]=a.useState(!0),[A,G]=a.useState({total:0,from:1,to:1});let X=[];B==null?X=[]:X=B.map(S=>({nama:S.nama,tanggal_dibuat:S.created_at,file:S.file,file_path:S.file_path,created_at:S.created_at,action:e.jsx("div",{className:"flex items-center justify-center gap-3 w-full",children:!s&&ge(r,"is_delete")&&e.jsx($a,{size:"1.5em",color:"#e62e2d",onClick:()=>o(S),className:"cursor-pointer",title:"Hapus"})})}));const[O,I]=a.useState({naskah_id:i==null?void 0:i.id,naskah:"KELUAR",page:1,rows:10,sortField:"",sortOrder:null,search:"",filters:{nama:{value:""}}});a.useEffect(()=>{i!=null&&i.id&&_()},[O]);const _=async(S=!1)=>{S&&(O.page=1),p(!0),await l.getPagingLampiran(O).then(f=>{let R=f.data.result;R.data&&(z(R.last_page),K(R.data),p(!1)),p(!1),G({...A,to:R.to,from:R.from,total:R.total})}).catch(f=>{console.log({error:f}),f.response.status==404&&K([]),p(!1),G({...A,to:0,from:!1,total:0})})};os((S,f,R=null)=>{if(R){let D=R.target;for(;D&&D.tagName!=="TD";)D=D.parentNode;if(D&&D.tagName==="TD"){const E=D.querySelector(".clear-input"),J=D.querySelector("input");f?E.classList.remove("hidden"):(E.classList.add("hidden"),J.value="")}}let u={...O};u.filters[S].value=f,u.page=1,I(u)},600);const C=S=>{let f={...O};f.page=S,I(f),window.scrollTo({top:0,behavior:"smooth"})},k=S=>{let f={...O};f.rows=S,f.page=1,I(f)},b=S=>{let f={...O};f.sortField=S,O.sortField!=S?O.sortOrder==""&&(f.sortOrder=1):O.sortOrder==1?f.sortOrder=-1:(f.sortOrder="",f.sortField=""),f.page=1,I(f)},y=S=>{if(T){V(!1),U.showLoading();const f=new FormData;f.append("naskah_id",Number(S.id)),f.append("lampirans[0][file]",T),f.append("file_path",S.file_path),f.append("lampirans[0][naskah]","KELUAR"),l.postLampiran(f).then(R=>{var u,D,E;U.fire((u=R.data)!=null&&u.success?"Berhasil":"Gagal",(D=R.data)==null?void 0:D.message,(E=R.data)!=null&&E.success?"success":"warning"),R.data.success&&(_(!0),x())}).catch(R=>{var D,E;const u=Oe(R.response.data.result);U.fire("Gagal",u??((E=(D=R.response)==null?void 0:D.data)==null?void 0:E.message),"error")}).finally(()=>V(!0))}},o=S=>{U.fire({title:"Konfirmasi",text:`Data ${S.nama} akan dihapus ?`,icon:"warning",showCancelButton:!0,confirmButtonText:"Hapus",cancelButtonText:"Batal",customClass:{confirmButton:"button button-error",cancelButton:"button button-info"}}).then(f=>{f.isConfirmed&&(ka(),l.deleteLampiran(S.id).then(R=>{R.status==200&&_(),U.fire("Berhasil","Data Berhasil Dihapus","success")}).catch(R=>{var D,E;const u=Oe(R.response.data.result);U.fire("Gagal",u??((E=(D=R.response)==null?void 0:D.data)==null?void 0:E.message),"error")}))})},F=S=>{L(S)},x=()=>{t(!1)};return e.jsxs(e.Fragment,{children:[e.jsxs(w,{container:!0,direction:"row",justifyContent:"space-between",alignItems:"center",children:[e.jsxs(w,{item:!0,className:"flex items-center gap-2",children:[e.jsx(Ui,{size:"1.5em"}),e.jsx(le,{variant:"h5",fontWeight:"medium",children:"Lampiran"})]}),e.jsx(w,{item:!0,children:e.jsxs(_e,{variant:"gradient",color:"info",onClick:()=>t(!0),children:[e.jsx(Ea,{size:"1.5em",className:"me-2"}),"Tambah"]})})]})," ",e.jsxs(w,{children:[e.jsx("div",{className:"overflow-auto",children:e.jsxs("div",{className:"table px-6 pt-6 min-w-full",children:[e.jsx("div",{className:"flex justify-end mb-1",children:e.jsx(pa,{config:O,handleClick:k})}),e.jsxs("table",{className:"w-full text-sm text-left !text-gray-700 dark:text-gray-400 table-bordered",children:[e.jsx("thead",{className:"text-xs text-gray-500 uppercase border-b-2 mb-1",children:e.jsxs("tr",{children:[e.jsx(q,{text:"File",sortField:"nama",sortOrder:O.sortOrder,config:O,handleClick:()=>b("nama")}),e.jsx(q,{text:"Tanggal Dibuat",sortField:"created_at",sortOrder:O.sortOrder,config:O,handleClick:()=>b("created_at")}),e.jsx(q,{text:"Aksi",className:"justify-center min-w-[2rem]"})]})}),e.jsxs("tbody",{children:[m?e.jsx("tr",{children:e.jsx("td",{colSpan:5,children:e.jsx(ia,{})})}):e.jsx(e.Fragment,{}),X.length?X.map((S,f)=>e.jsxs("tr",{className:"border-b border-slate-300",children:[e.jsx("td",{className:" max-w-[20rem] px-6 py-6",children:e.jsx("div",{onClick:()=>Wa(S.file,S.file_path??"lampiran"),className:"cursor-pointer hover:underline",children:S.nama})}),e.jsx("td",{className:" max-w-[20rem] px-6 py-6",children:na(S.tanggal_dibuat)}),e.jsxs("td",{className:"px-1 text-right w-[2rem]",children:[" ",S.action," "]})]},f)):e.jsx(e.Fragment,{})]})]}),e.jsxs("nav",{className:"flex items-center justify-between p-4","aria-label":"Table navigation",children:[e.jsx("span",{className:"text-sm text-gray-400",children:A.from&&`Menampilkan ${Se(A.from)} sampai ${Se(A.to)} dari ${Se(A.total)} entri`}),e.jsx(xa,{currentPage:O.page,lastPage:W,displayCount:5,handleClick:C})]})]})}),e.jsxs(Fa,{open:n,onClose:x,children:[e.jsxs("div",{children:[e.jsx(_a,{children:"Tambah Lampiran Baru"}),e.jsx(ca,{initialValues:i,onSubmit:y,validateOnChange:!0,validationSchema:Zj,children:e.jsx(da,{id:"formLampiran",className:"text-sm",children:e.jsx("div",{className:"mb-6 px-4",children:e.jsx(w,{mb:2,children:e.jsx(ce,{name:"file",children:({field:S,form:f,meta:R})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Lampiran",required:!0,error:R.error&&R.touched}),e.jsx(et,{onFileSelected:u=>{F(u)},maxSizePerFileInMb:5,isReset:$,desc:"Format yang didukung: .JPG .JPEG .PNG .DOC .DOCX .PDF .XLS .XLSX .PPT .PPTX .MP4 .WAV dan Maksimal ukuran file 5 MB",acceptedType:["application/pdf","image/jpeg","image/png","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.ms-powerpoint","application/vnd.openxmlformats-officedocument.presentationml.presentation","video/mp4","audio/wav"],notifFileTypeError:"File Hanya Support .JPG .JPEG .PNG .DOC .DOCX .PDF .XLS .XLSX .PPT .PPTX .MP4 .WAV"}),e.jsx(ue,{text:R.error,error:R.error&&R.touched})]})})})})})})]}),e.jsx(ya,{children:e.jsxs(e.Fragment,{children:[!s&&e.jsx(Je,{submit:H,color:"success",formId:"formLampiran",text:"Simpan"}),e.jsx(_e,{color:s?"dark":"error",variant:"gradient",onClick:()=>t(!1),children:s?"Tutup":"Batal"})]})})]})]})]})},rk=r=>{var l;const s=m=>m===r.failedStep,n=fs(Zd)(({theme:m})=>({[`&.${Qt.alternativeLabel}`]:{top:20},[`&.${Qt.active}`]:{[`& .${Qt.line}`]:{backgroundImage:"linear-gradient(310deg, #2152ff, #21d4fd)"}},[`&.${Qt.completed}`]:{[`& .${Qt.line}`]:{backgroundImage:"linear-gradient(310deg, #2152ff, #21d4fd)"}},[`& .${Qt.line}`]:{height:2,border:0,backgroundColor:m.palette.mode==="dark"?m.palette.grey[800]:"#eaeaf0",borderRadius:1}})),t=fs("div")(({theme:m,ownerState:p})=>({backgroundColor:m.palette.mode==="dark"?m.palette.grey[700]:"#ccc",zIndex:1,color:"#fff",width:40,height:40,display:"flex",borderRadius:"50%",justifyContent:"center",alignItems:"center",...p.active&&{backgroundImage:"linear-gradient(310deg, #2152ff, #21d4fd)",boxShadow:"0 4px 10px 0 rgba(0,0,0,.25)"},...p.completed&&{backgroundImage:"linear-gradient(310deg, #2152ff, #21d4fd)"}}));function i(m){const{active:p,completed:B,className:K}=m;return e.jsx(t,{ownerState:{completed:B,active:p},className:K,children:m.icon})}return e.jsxs(e.Fragment,{children:[e.jsx(le,{variant:"h6",children:r.title}),e.jsx(eu,{alternativeLabel:!0,activeStep:r.activeStep,connector:e.jsx(n,{}),sx:{marginY:1,paddingX:0},children:(l=r.steps)==null?void 0:l.map((m,p)=>{const B={};return s(p)&&(B.optional=e.jsx(le,{variant:"caption",color:"error",children:"Proses gagal"}),B.error=!0),e.jsx(au,{children:e.jsx(su,{...B,StepIconComponent:i,children:e.jsx(le,{variant:"body2",children:m})})},m)})})]})},nk=r=>{var t;const s=r.activeStep===r.failedStep,n=Math.round((r.activeStep+1)/r.steps.length*100);return e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"mr-6",children:e.jsxs(ie,{sx:{position:"relative",display:"inline-flex"},children:[e.jsx(br,{variant:"determinate",...r,size:90,value:n,color:s?"error":"primary"}),e.jsx(ie,{sx:{top:0,left:0,bottom:0,right:0,position:"absolute",display:"flex",alignItems:"center",justifyContent:"center"},children:r.activeStep+1<((t=r.steps)==null?void 0:t.length)?e.jsxs(le,{variant:"h6",component:"div",color:"text.secondary",children:[r.activeStep+1," dari ",r.steps.length]}):e.jsx(Xs,{size:70,color:ba.success.main})})]})}),e.jsxs("div",{className:"text-right flex flex-col",children:[e.jsx(le,{variant:"h6",mb:1,children:r.title}),e.jsx(le,{variant:"body",mb:.5,children:r.steps[r.activeStep]}),s&&e.jsx(le,{variant:"caption",color:"error",children:"Proses gagal"})]})]})},Nn=()=>{var Aa,Ee,ve,Ae,Ue,ma,La;const r="Log Naskah Keluar",s=gt(),[n,t]=a.useState(!1),[i,l]=a.useState(!1),m=JSON.parse(Le.getItem("users")),p=new Ts,B=new qa,K=ga(),W=ha(),z=a.useRef(),[T,L]=a.useState(!1),[$,M]=a.useState(!1),[H,V]=a.useState(!1),[A,G]=a.useState(!0),[X,O]=a.useState(null),[I,_]=a.useState(null),[C,k]=a.useState([]),[b,y]=a.useState([]),[o,F]=a.useState([]),[x,S]=a.useState([]),[f,R]=a.useState({}),[u,D]=a.useState(!1),[E,J]=a.useState(!1),[P,h]=a.useState(-1),[d,j]=a.useState(0),[g,c]=a.useState(-1),[v,N]=a.useState(!1),[Q,re]=a.useState((Aa=K.state)==null?void 0:Aa.from_editor),[ye,xe]=a.useState(window.innerWidth<768),[fe,Ge]=a.useState([]),[$e,Pe]=a.useState(!1),[te,ne]=a.useState({formode:(Ee=K.state)==null?void 0:Ee.formode,id:(ve=K.state)==null?void 0:ve.id,editor:(Ae=K.state)==null?void 0:Ae.editor,is_forward:(Ue=K.state)==null?void 0:Ue.is_forward,from:(ma=K.state)==null?void 0:ma.from}),pe="";a.useEffect(()=>{const We=new URLSearchParams(K.search),qe=We.get("id");if(qe&&!te.id){const He=Js(qe);ne({id:Number(He),formode:We.get("formode"),editor:We.get("editor")=="true",is_forward:We.get("is_forward")=="true",from:We.get("from")})}},[K.search]),a.useEffect(()=>{te.formode=="Tambah"&&t(ge(r,"is_create",!0)),te.formode=="Ubah"&&te.id&&(U.showLoading(),he().then(()=>{t(ge(r,"is_update",!0)),J(te.is_forward)}))},[te.formode,te.id]);const he=async()=>{await p.getDetail(te.id).then(We=>{var Ve,Ha,Xe,xs;let qe=(Ve=We==null?void 0:We.data)==null?void 0:Ve.result,He=qe;delete He.detail_user_created,delete He.last_penandatangan,delete He.status_send,qe&&(ne(Ya=>({...Ya,...He})),Qe(qe==null?void 0:qe.organisasi_created_id),Fe(qe.sifat_naskah_id),Ke(qe.klasifikasi_id),Be(qe.jenis_naskah_id).finally(()=>U.close()),k({id:qe==null?void 0:qe.sender_user_id,nama:qe==null?void 0:qe.sender_user_nama}),(Ha=qe==null?void 0:qe.reply)!=null&&Ha.id&&_({id:(Xe=qe==null?void 0:qe.reply)==null?void 0:Xe.id,nomor:(xs=qe==null?void 0:qe.reply)==null?void 0:xs.nomor}))}).catch(We=>{var He,Ve,Ha,Xe;const qe=Oe((Ve=(He=We==null?void 0:We.response)==null?void 0:He.data)==null?void 0:Ve.result);U.fire("Gagal",qe??((Xe=(Ha=We.response)==null?void 0:Ha.data)==null?void 0:Xe.message),"error")})},{data:oe,isLoading:je,refetch:Ne}=ds({enabled:!!Q,queryKey:[vf,Q],queryFn:()=>p.getProgressStepsEditor().then(We=>We.data.result)}),{data:Re,isLoading:sa,refetch:Te,failureCount:me}=ds({enabled:!!(te!=null&&te.id)&&!v&&Q&&(oe==null?void 0:oe.length)>0,queryKey:[ho,te==null?void 0:te.id,v,Q],refetchInterval:2e3,retryDelay:2e3,retry:10,queryFn:()=>p.getProgressEditor(te==null?void 0:te.id).then(We=>{let qe=We.data.result,He=qe.urutan?Number(qe==null?void 0:qe.urutan):!1,Ve=He==oe-1;return He&&(N(Ve),j(He),c(qe.status=="Gagal"?He:-1)),Ve&&ee(),qe})}),{mutate:ee}=it({mutationFn:()=>p.deleteProgressEditor(K==null?void 0:K.state.id),onSuccess:We=>{},onError:We=>{var He,Ve;const qe=Oe(We.response.data.result);U.fire("Gagal",qe??((Ve=(He=We.response)==null?void 0:He.data)==null?void 0:Ve.message),"error")}});a.useEffect(()=>(N(!1),()=>{N(!0),s.removeQueries({queryKey:[ho]}),ee()}),[]),a.useEffect(()=>{((Re==null?void 0:Re.urutan)==(oe==null?void 0:oe.length)-1||me>9||g>-1)&&(N(!0),me>9&&!(Re!=null&&Re.urutan)&&re(!1))},[Re,me,oe]),a.useEffect(()=>{const We=fe==null?void 0:fe.every(qe=>!!qe.file_naskah&&qe.file_naskah!="undefined");Pe(We)},[fe]);const Y=async We=>{var He;const qe={organisasi_id:(He=We.values)==null?void 0:He.sender_user_id,singkatan_org:X,jenis_naskah_id:We.values.jenis_naskah_id,sifat_naskah_id:We.values.sifat_naskah_id,klasifikasi_id:We.values.klasifikasi_id,tipe_nomor:"SURAT KELUAR"};D(!0),await p.getNomor(qe).then(Ve=>{Ve.data.success&&We.setFieldValue("nomor",Ve.data.result)}).catch(Ve=>{var Ha,Xe,xs,Ya,ks;if(((Ha=Ve==null?void 0:Ve.response)==null?void 0:Ha.status)==404)U.fire("Gagal",`<p>
              Pastikan <b>Tata Usaha / Sekretaris</b> telah membuat format nomor yang Anda inginkan
            </p>`,"error");else{const Pa=Oe((xs=(Xe=Ve.response)==null?void 0:Xe.data)==null?void 0:xs.result);U.fire("Gagal",Pa??((ks=(Ya=Ve.response)==null?void 0:Ya.data)==null?void 0:ks.message),"error")}}).finally(()=>{D(!1)})},ke=async We=>{G(!1),p.update(te.id,We).then(qe=>{var He,Ve,Ha;qe.data.success&&(U.fire((He=qe.data)!=null&&He.success?"Berhasil":"Gagal",(Ve=qe.data)==null?void 0:Ve.message,(Ha=qe.data)!=null&&Ha.success?"success":"warning"),E||W(pe+"/pembuatan-naskah-keluar/log-naskah-keluar"))}).catch(qe=>{var Ve,Ha;const He=Oe(qe.response.data.result);U.fire("Gagal",He??((Ha=(Ve=qe.response)==null?void 0:Ve.data)==null?void 0:Ha.message),"error")}).finally(()=>G(!0))},De=async()=>{U.fire({title:"Selesai perbarui naskah",text:"Apakah Anda yakin dengan perbaikan naskah ini?",icon:"question",showCancelButton:!0,confirmButtonText:"Ya, Saya Yakin",cancelButtonText:"Batal",customClass:{confirmButton:"button button-info",cancelButton:"button button-error"}}).then(async We=>{if(We.isConfirmed){const qe={naskah_keluar_id:te.id,from:te.from};G(!1),await p.finishRevision(qe).then(He=>{var Ve,Ha,Xe;U.fire((Ve=He.data)!=null&&Ve.success?"Berhasil":"Gagal",(Ha=He.data)==null?void 0:Ha.message,(Xe=He.data)!=null&&Xe.success?"success":"warning"),He.data.success&&ta()}).catch(He=>{var Ha,Xe;const Ve=Oe(He.response.data.result);U.fire("Gagal",Ve??((Xe=(Ha=He.response)==null?void 0:Ha.data)==null?void 0:Xe.message),"error")}).finally(()=>G(!0))}else U.close()})},ta=()=>{te.from=="log"?W("/pembuatan-naskah-keluar/log-naskah-keluar"):te.from=="verif"?W("/pembuatan-naskah-keluar/verifikasi-naskah"):te.from=="ttd"&&W("/pembuatan-naskah-keluar/tandatangan-naskah")},Be=async We=>{We&&await B.detail("tatanaskah/jenis-naskah",We,"master").then(qe=>{y(qe)})},Fe=async We=>{We&&await B.detail("tatanaskah/sifat-naskah",We,"master").then(qe=>{F(qe)})},Ke=async We=>{We&&await B.detail("klasifikasi",We,"master").then(qe=>{S(qe)})},Qe=async We=>{We&&await B.detail("organisasi/instansi",We,"").then(qe=>{O(qe.singkatan)})},ea=We=>{R(We)};a.useEffect(()=>{const We=()=>{xe(window.innerWidth<768)};return window.addEventListener("resize",We),()=>{window.removeEventListener("resize",We)}},[]);const ja=()=>{const We={title:"Memproses Perubahan File Naskah",steps:oe,activeStep:d,failedStep:g};return ye?e.jsx(ie,{px:3,pt:3,lineHeight:1,children:e.jsx(nk,{...We})}):e.jsx(ie,{px:3,pt:3,lineHeight:1,children:e.jsx(rk,{...We})})};return e.jsxs(aa,{children:[e.jsx(la,{}),n&&e.jsx(e.Fragment,{children:e.jsxs(ie,{pt:6,pb:3,className:"flex flex-col gap-10",children:[e.jsxs(Me,{children:[e.jsx(ie,{px:3,pt:3,lineHeight:1,children:e.jsxs(w,{container:!0,direction:"row",justifyContent:"space-between",alignItems:"center",children:[e.jsx(w,{item:!0,children:e.jsxs(le,{variant:"h5",fontWeight:"medium",children:[te.formode," ",r]})}),e.jsx(w,{item:!0,children:e.jsxs(_e,{variant:"gradient",color:"secondary",onClick:ta,children:[e.jsx(za,{size:"1.5em",className:"me-2"}),(te.formode!="Lihat","Kembali")]})})]})}),!!Q&&ja(),E&&e.jsxs("div",{className:"flex flex-col gap-3 mb-8 p-5 m-5 bg-gradient-to-r from-gray-300 to-gray-400 rounded-2xl",children:[e.jsxs("div",{className:"flex justify-between gap-3 items-center",children:[e.jsx(Vn,{size:"5em",className:"text-white"}),e.jsx(le,{variant:"h6",align:"right",color:"white",children:"Pastikan Anda sudah memperbaiki naskah ini sesuai dengan catatan yang diterima"})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx(Je,{submit:A,color:"info",text:"Selesai Diperbaiki",onClick:De})})]}),e.jsx(ca,{innerRef:z,initialValues:te,onSubmit:ke,validateOnChange:!0,validationSchema:Yj,children:e.jsxs(da,{id:"form",encType:"multipart/form-data",children:[e.jsx(w,{children:e.jsxs("div",{className:"p-6 grid grid-cols-12 mb-10 gap-5 lg:mb-0",children:[e.jsxs("div",{className:"col-span-12 md:col-span-6 ",children:[e.jsx(w,{children:e.jsx(ce,{name:"sender_user_id",children:({field:We,form:qe,meta:He})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Dikirimkan melalui",required:!0,error:He.error&&He.touched}),e.jsx(ra,{url:"organisasi/instansi/select",isDisabled:T,callbackChange:Ve=>{qe.setFieldValue("sender_user_id",(Ve==null?void 0:Ve.id)??""),qe.setFieldValue("sender_user_nama",(Ve==null?void 0:Ve.nama)??""),k(Ve),qe.setFieldValue("jenis_naskah_id",""),qe.setFieldValue("jenis_naskah_nama",""),y(null),F(null),qe.setFieldValue("sifat_naskah_id",""),qe.setFieldValue("sifat_naskah_nama",""),S(null),qe.setFieldValue("klasifikasi_id",""),qe.setFieldValue("klasifikasi_nama",""),qe.setFieldValue("nomor","")},selectedData:C,keyValue:["id","nama"],placeholder:"Pilih Unit Kerja...",className:"text-sm",menuPortalTarget:null,optionParam:{"select-target":"naskah-keluar-unitkerja",role:m==null?void 0:m.role},isMulti:!1}),e.jsx(ue,{text:He.error,error:He.error&&He.touched})]})})}),e.jsx(w,{mt:3,children:e.jsx(ce,{name:"jenis_naskah_id",children:({form:We,meta:qe})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Jenis Naskah",required:!0,error:qe.error&&qe.touched}),e.jsx(ra,{url:"tatanaskah/jenis-naskah/select",isDisabled:T,callbackChange:He=>{We.setFieldValue("jenis_naskah_id",(He==null?void 0:He.id)??""),We.setFieldValue("jenis_naskah_nama",(He==null?void 0:He.jenis_naskah)??""),y(He??""),F(null),We.setFieldValue("sifat_naskah_id",""),We.setFieldValue("sifat_naskah_nama",""),S(null),We.setFieldValue("klasifikasi_id",""),We.setFieldValue("klasifikasi_nama",""),We.setFieldValue("nomor","")},selectedData:b,keyValue:["id","jenis_naskah"],placeholder:"Pilih Jenis Naskah...",className:"text-sm",menuPortalTarget:null,optionParam:{"select-target":"select-jenis-naskah-by-unitkerja",role:m==null?void 0:m.role,unitkerja:C==null?void 0:C.id,public_organisasi_id:m==null?void 0:m.public_organisasi_id},isMulti:!1,targetService:"master"}),e.jsx(ue,{text:qe.error,error:qe.error&&qe.touched})]})})}),e.jsx(w,{mt:3,children:e.jsx(ce,{name:"sifat_naskah_id",children:({form:We,meta:qe})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Sifat Naskah",required:!0,error:qe.error&&qe.touched}),e.jsx(ra,{url:"tatanaskah/sifat-naskah/select",isDisabled:T,callbackChange:He=>{We.setFieldValue("sifat_naskah_id",(He==null?void 0:He.id)??""),We.setFieldValue("sifat_naskah_nama",(He==null?void 0:He.sifat_naskah)??""),F(He),S(null),We.setFieldValue("klasifikasi_id",""),We.setFieldValue("klasifikasi_nama",""),We.setFieldValue("nomor","")},selectedData:o,keyValue:["id","sifat_naskah"],placeholder:"Pilih Sifat Naskah...",className:"text-sm",menuPortalTarget:null,optionParam:{"select-target":"select-sifat-naskah-by-unitkerja",role:m==null?void 0:m.role,unitkerja:C==null?void 0:C.id,public_organisasi_id:m==null?void 0:m.public_organisasi_id},isMulti:!1,targetService:"master"}),e.jsx(ue,{text:qe.error,error:qe.error&&qe.touched})]})})}),e.jsx(w,{mt:3,children:e.jsx(ce,{name:"klasifikasi_id",children:({field:We,form:qe,meta:He})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Klasifikasi",required:!0,error:He.error&&He.touched}),e.jsx(ra,{url:"klasifikasi/select",isDisabled:T,callbackChange:Ve=>{qe.setFieldValue("klasifikasi_id",(Ve==null?void 0:Ve.id)??""),qe.setFieldValue("klasifikasi_nama",(Ve==null?void 0:Ve.nama)??""),S(Ve),qe.setFieldValue("nomor","")},selectedData:x,keyValue:["id","kode_nama"],placeholder:"Pilih Klasifikasi...",className:"text-sm",menuPortalTarget:null,optionParam:{"select-target":"klasifikasi-by-unitkerja",role:m==null?void 0:m.role,unitkerja:C==null?void 0:C.id,organisasi_id:m==null?void 0:m.organisasi_id,public_organisasi_id:m==null?void 0:m.public_organisasi_id},isMulti:!1,targetService:"master"}),e.jsx(ue,{text:He.error,error:He.error&&He.touched})]})})}),e.jsx(w,{mt:3,className:"",children:e.jsx(ce,{name:"nomor",children:({field:We,form:qe,meta:He})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Nomor Naskah",required:!0,error:He.error&&He.touched}),e.jsxs("div",{className:"flex flex-nowrap gap-2",children:[e.jsx(Ye,{...We,type:"text",placeholder:"Masukkan Nomor Naskah...",error:He.error&&He.touched,disabled:T}),e.jsx(_e,{color:"info",type:"button",variant:"gradient",size:"small",onClick:()=>{!u&&Y(qe)},className:"text-sm whitespace-nowrap",children:e.jsx("div",{className:"flex justify-start",children:u?e.jsxs(e.Fragment,{children:[e.jsx(rs,{color:"white",className:"flex-shrink-0 w-3 h-3 me-2"}),"Mohon Tunggu"]}):e.jsx(e.Fragment,{children:"Ambil Nomor"})})})]}),e.jsx("div",{className:"text-xs ps-1 text-blue-500 mt-1",children:"INFO: Nomor diatas bersifat sementara, guna untuk penyesuaian file digital."}),e.jsx(ue,{text:He.error,error:He.error&&He.touched})]})})}),e.jsx(w,{mt:3,children:e.jsx(ce,{name:"reply_id",children:({field:We,form:qe,meta:He})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Nomor Referensi",required:!1,error:He.error&&He.touched}),e.jsx(ra,{url:"naskah-dinas/nomor-referensi-keluar/select",isDisabled:T,callbackChange:Ve=>{qe.setFieldValue("reply_id",(Ve==null?void 0:Ve.id)??""),_(Ve?{id:Ve.id,nomor:Ve.nomor}:null)},selectedData:I,keyValue:["id","nomor"],placeholder:"Pilih Nomor Naskah...",className:"text-sm",menuPortalTarget:null,optionParam:{"select-target":"nomor-referensi",user_id:m==null?void 0:m.id,organisasi_id:m==null?void 0:m.organisasi_id},isMulti:!1,targetService:"nk"}),e.jsx(ue,{text:He.error,error:He.error&&He.touched})]})})})]}),e.jsxs("div",{className:"col-span-12 md:col-span-6 ",children:[e.jsx(w,{children:e.jsx(ce,{name:"hal",children:({field:We,form:qe,meta:He})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Hal",required:!0,error:He.error&&He.touched}),e.jsx(Ka,{...We,placeHolder:"Masukkan Hal...",error:He.error&&He.touched,disabled:T,rows:8}),e.jsx(ue,{text:He.error,error:He.error&&He.touched})]})})}),e.jsx(w,{mt:3,children:e.jsx(ce,{name:"ringkasan",children:({field:We,form:qe,meta:He})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Isi Ringkas",required:!0,error:He.error&&He.touched}),e.jsx(Ka,{...We,placeHolder:"Masukkan Isi Ringkas..",error:He.error&&He.touched,disabled:T,rows:8}),e.jsx(ue,{text:He.error,error:He.error&&He.touched})]})})}),e.jsx(w,{mt:3,children:e.jsx(ce,{name:"ttd",children:({field:We,form:qe,meta:He})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Tipe Tanda Tangan",required:!0,error:He.error&&He.touched}),e.jsxs("div",{className:"space-x-4 flex flex-row items-center mt-4",children:[e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{...We,type:"radio",className:"form-radio  w-4 h-4 text-blue-500 focus:ring-2 focus:ring-blue-500",value:"TTE",checked:We.value=="TTE",disabled:T}),e.jsx("span",{className:"text-gray-700 text-sm",children:"Elektronik"})]}),e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{...We,type:"radio",className:"form-radio  w-4 h-4 text-blue-500 focus:ring-2 focus:ring-blue-500",value:"KONVENSIONAL",disabled:T,checked:We.value=="KONVENSIONAL"}),e.jsx("span",{className:"text-gray-700 text-sm",children:"Konvensional"})]})]}),e.jsx(ue,{text:He.error,error:He.error&&He.touched})]})})}),e.jsx(w,{mt:3,children:e.jsx(ce,{name:"tipe_tte",validate:We=>{if(We=="INVISIBLE"&&!$e)return"Pengguna berikut belum memiliki gambar tandatangan."},children:({field:We,form:qe,meta:He})=>{var Ha,Xe,xs;const Ve=fe==null?void 0:fe.filter(Ya=>!Ya.file_naskah||Ya.file_naskah=="undefined");return((Ha=qe.values)==null?void 0:Ha.ttd)=="TTE"&&e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Visual TTE",required:((Xe=qe.values)==null?void 0:Xe.ttd)=="TTE",error:He.error&&He.touched}),e.jsxs("div",{className:"flex flex-row gap-4 items-center mt-4",children:[e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{...We,type:"radio",className:"form-radio  w-4 h-4 text-blue-500 focus:ring-2 focus:ring-blue-500",value:"VISIBLE",disabled:T,checked:We.value=="VISIBLE"}),e.jsx("span",{className:"text-gray-700 text-sm",children:"QR Code"})]}),e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{...We,type:"radio",className:"form-radio  w-4 h-4 text-blue-500 focus:ring-2 focus:ring-blue-500",value:"INVISIBLE",checked:We.value=="INVISIBLE",disabled:T}),e.jsx("span",{className:"text-gray-700 text-sm",children:"Spesimen Gambar"})]})]}),e.jsx(ue,{text:He.error,error:He.error&&He.touched}),((xs=qe.values)==null?void 0:xs.tipe_tte)=="INVISIBLE"&&(Ve==null?void 0:Ve.length)>0&&e.jsxs("div",{className:"mt-2 text-sm text-red-600 dark:text-red-500",children:[e.jsx("h3",{className:"mb-2",children:"Mohon upload gambar tandatangan terlebih dahulu:"}),e.jsx("ol",{children:Ve==null?void 0:Ve.map((Ya,ks)=>e.jsxs("li",{children:[Ya.nama," - ",Ya.jabatan," -"," ",Ya.instansi]},Ya.id))})]})]})}})}),e.jsx(w,{mt:3,children:e.jsx(ce,{name:"file",children:({field:We,form:qe,meta:He})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"File naskah",required:!0,error:He.error&&He.touched}),e.jsx("p",{onClick:Ve=>{Ve.stopPropagation(),Wa(te.file,te.file_path??"naskah-keluar",null,0,te.created_at)},className:"text-blue-500 mb-4 cursor-pointer",children:te.file_name_original}),e.jsx(et,{onFileSelected:Ve=>{ea(Ve),qe.setFieldValue("file",Ve??"")},isReset:H,desc:"Format yang didukung: .DOCX dan .PDF (Maksimal 5 Mb)",acceptedType:["application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/pdf"],notifFileTypeError:"File Hanya Support DOCX dan PDF",maxSizePerFileInMb:5}),e.jsx(ue,{text:He.error,error:He.error&&He.touched})]})})}),e.jsx(w,{mt:3,children:te.editor&&((La=te==null?void 0:te.file.split(".").pop())==null?void 0:La.toLowerCase())=="docx"&&e.jsx(_e,{color:"info",type:"button",variant:"gradient",onClick:()=>{W("text-editor",{state:{naskahId:te.id,prev_pathname:K.pathname,...te}})},children:e.jsxs("div",{className:"flex justify-start",children:[e.jsx("span",{children:"Text Editor "}),e.jsx(Lu,{className:"h-4 text-white flex-shrink-0 ms-2"})]})})})]})]})}),e.jsx("div",{className:"p-3 flex justify-end items-center w-full gap-5 mb-10",children:!T&&e.jsx(Je,{submit:A,color:"success",formId:"form",text:te.formode=="Tambah"?"Simpan":"Perbarui Naskah"})})]})})]}),e.jsx(Me,{children:e.jsx(ie,{px:3,pt:3,lineHeight:1,children:e.jsx(tk,{modul:r,visibleview:T,open:$,setOpen:M,formValue:te})})}),e.jsx(Me,{children:e.jsx(ie,{px:3,pt:3,lineHeight:1,children:e.jsx(sk,{modul:r,visibleview:T,formValue:te,user:m})})}),e.jsx(Me,{children:e.jsx(ie,{px:3,pt:3,lineHeight:1,children:e.jsx(ak,{naskahId:te.id,modul:r,visibleview:T,verif:E})})}),e.jsx(Me,{children:e.jsx(ie,{px:3,pt:3,lineHeight:1,children:e.jsx(ek,{naskahId:te.id,modul:r,visibleview:T,crud:E,setCurrentPenandatangan:Ge})})})]})})]})},_t="https://api.arsip.go.id/user/api/";class Fd{constructor(){ae(this,"getPaging",async s=>{const n=Ce.serializeObjectToQueryString(s);return await se.get(`${_t}pengguna/group-tembusan?${n}`).then(l=>l)});ae(this,"post",async s=>await se.post(`${_t}pengguna/group-tembusan`,s).then(i=>i));ae(this,"put",async(s,n)=>await se.put(`${_t}pengguna/group-tembusan/${s}`,n).then(l=>l));ae(this,"delete",async s=>await se.delete(`${_t}pengguna/group-tembusan/${s}`).then(i=>i));ae(this,"getPagingPengguna",async s=>{const n=Ce.serializeObjectToQueryString(s);return await se.get(`${_t}pengguna/group-tembusan/get/pengguna?${n}`).then(l=>l)});ae(this,"getPagingDaftarTujuan",async s=>{const n=Ce.serializeObjectToQueryString(s);return await se.get(`${_t}pengguna/grup-tembusan/get/index-daftar-tembusan?${n}`).then(l=>l)});ae(this,"postDaftarTujuan",async s=>await se.post(`${_t}pengguna/grup-tembusan/add/store-daftar-tembusan`,s).then(i=>i));ae(this,"deleteDaftarTujuan",async s=>await se.delete(`${_t}pengguna/grup-tembusan/delete/destroy-daftar-tembusan/${s}`).then(i=>i))}}const ik=()=>{const r="Group Tembusan",[s,n]=a.useState(!1);a.useEffect(()=>{n(ge(r,"is_read",!0))},[]);const t=JSON.parse(Le.getItem("users")),i=new Fd,l=ha(),[m,p]=a.useState(!1),[B,K]=a.useState(null),[W,z]=Ga.useState(!1),[T,L]=a.useState(!1),[$,M]=a.useState("Simpan"),[H,V]=a.useState(""),[A,G]=a.useState(null),[X,O]=a.useState(null),[I,_]=a.useState(!0),[C,k]=a.useState({id:0,organisasi_id:t==null?void 0:t.organisasi_id,public_organisasi_id:t==null?void 0:t.public_organisasi_id,nama:"",deskripsi:"",penggunas:[],daftar_tujuan:[]}),[b,y]=a.useState({total:0,from:1,to:1});let o=[];B==null?o=[]:o=B.map(g=>{var c;return{nama:g.nama,deskripsi:g.deskripsi,jumlah_tujuan:((c=g.daftar_tembusan)==null?void 0:c.length)??0,dibuat:g.created_at,action:e.jsxs("div",{className:"flex items-center justify-center gap-3 w-full",children:[ge(r,"is_update")&&e.jsx(Va,{size:"1.5em",color:"#fbcf33",onClick:()=>P(g),className:"cursor-pointer",title:"Ubah"}),e.jsx(Oa,{size:"1.5em",color:"#17c1e8",onClick:()=>h(g),className:"cursor-pointer",title:"Lihat"}),ge(r,"is_delete")&&e.jsx($a,{size:"1.5em",color:"#e62e2d",onClick:()=>d(g),className:"cursor-pointer",title:"Hapus"})]})}});const[F,x]=a.useState({page:1,rows:10,sortField:"",sortOrder:null,search:"",public_organisasi_id:t==null?void 0:t.public_organisasi_id,group_role:t==null?void 0:t.group_role,organisasi_id:t==null?void 0:t.organisasi_id,filters:{nama:{value:""},jumlah_tujuan:{value:""},deskripsi:{value:""},created_at:{value:""},organisasi_id:{value:t==null?void 0:t.organisasi_id},public_organisasi_id:{value:t==null?void 0:t.public_organisasi_id}}});a.useEffect(()=>{S()},[F]);const S=async(g=!1)=>{g&&(F.page=1),p(!0),await i.getPaging(F).then(c=>{let v=c.data.result;v.data&&(G(v.last_page),K(v.data),p(!1)),p(!1),y({...b,to:v.to,from:v.from,total:v.total})}).catch(c=>{p(!1),y({...b,to:0,from:!1,total:0})})},f=Da((g,c,v=null)=>{if(v){let Q=v.target;for(;Q&&Q.tagName!=="TD";)Q=Q.parentNode;if(Q&&Q.tagName==="TD"){const re=Q.querySelector(".clear-input"),ye=Q.querySelector("input");c?re.classList.remove("hidden"):(re.classList.add("hidden"),ye.value="")}}let N={...F};N.filters[g].value=c,N.page=1,x(N)},600),R=g=>{let c={...F};c.page=g,x(c),window.scrollTo({top:0,behavior:"smooth"})},u=g=>{let c={...F};c.rows=g,c.page=1,x(c)},D=g=>{let c={...F};c.sortField=g,F.sortField!=g?F.sortOrder==""&&(c.sortOrder=1):F.sortOrder==1?c.sortOrder=-1:(c.sortOrder="",c.sortField=""),c.page=1,x(c)},E=g=>{_(!1),g.id!==0?i.put(g.id,g).then(c=>{var v,N,Q;U.fire((v=c.data)!=null&&v.success?"Berhasil":"Gagal",(N=c.data)==null?void 0:N.message,(Q=c.data)!=null&&Q.success?"success":"warning"),c.data.success&&(S(!0),j())}).catch(c=>{var N,Q;const v=Oe(c.response.data.result);U.fire("Gagal",v??((Q=(N=c.response)==null?void 0:N.data)==null?void 0:Q.message),"error")}).finally(()=>_(!0)):i.post(g).then(c=>{var v,N,Q;U.fire((v=c.data)!=null&&v.success?"Berhasil":"Gagal",(N=c.data)==null?void 0:N.message,(Q=c.data)!=null&&Q.success?"success":"warning"),c.data.success&&(S(!0),j())}).catch(c=>{var N,Q;const v=Oe(c.response.data.result);U.fire("Gagal",v??((Q=(N=c.response)==null?void 0:N.data)==null?void 0:Q.message),"error")}).finally(()=>_(!0))},J=g=>{z(!0),k({id:0,organisasi_id:t==null?void 0:t.organisasi_id,public_organisasi_id:t==null?void 0:t.public_organisasi_id,penggunas:[],daftar_tujuan:[],nama:"",deskripsi:""}),M("Simpan"),V("Tambah"),O(""),L(!1)},P=g=>{l("form",{state:{formode:"Ubah",id:g.id,organisasi_id:g.organisasi_id,public_organisasi_id:g.public_organisasi_id,penggunas:g.penggunas,daftar_tujuan:g.daftar_tujuan,nama:g.nama,deskripsi:g.deskripsi,created_at:g.created_at}})},h=g=>{l("form",{state:{formode:"Lihat",id:g.id,organisasi_id:g.organisasi_id,public_organisasi_id:g.public_organisasi_id,penggunas:g.penggunas,daftar_tujuan:g.daftar_tujuan,nama:g.nama,deskripsi:g.deskripsi,created_at:g.created_at}})},d=g=>{U.fire({title:"Konfirmasi",text:`Data ${g.nama} akan dihapus ?`,icon:"warning",showCancelButton:!0,confirmButtonText:"Hapus",cancelButtonText:"Batal",customClass:{confirmButton:"button button-error",cancelButton:"button button-info"}}).then(c=>{c.isConfirmed&&(ka(),i.delete(g.id).then(v=>{v.status==200&&S(),U.fire("Berhasil","Data Berhasil Dihapus","success")}).catch(v=>{var Q,re;const N=Oe(v.response.data.result);U.fire("Gagal",N??((re=(Q=v.response)==null?void 0:Q.data)==null?void 0:re.message),"error")}))})},j=()=>{z(!1)};return e.jsxs(aa,{children:[e.jsx(la,{}),s&&e.jsxs(e.Fragment,{children:[" ",e.jsx(ie,{pt:6,pb:3,children:e.jsxs(Me,{children:[e.jsx(ie,{px:3,pt:3,lineHeight:1,children:e.jsxs(w,{container:!0,direction:"row",justifyContent:"space-between",alignItems:"center",children:[e.jsx(w,{item:!0,children:e.jsxs(le,{variant:"h5",fontWeight:"medium",children:["Daftar ",r]})}),ge(r,"is_create")&&e.jsx(w,{item:!0,children:e.jsxs(_e,{variant:"gradient",color:"info",onClick:J,children:[e.jsx(Ea,{size:"1.5em"}),"Tambah Baru"]})})]})}),e.jsx(w,{px:3,pt:3,children:e.jsxs("div",{className:"text-sm w-100 flex justify-start items-center gap-2",children:[e.jsxs("span",{children:["Setelah menambahkan ",e.jsx("b",{children:r}),", Anda dapat mengisi daftar tujuan pada pada tombol aksi edit"," "]}),e.jsx(Va,{className:"w-5 h-5 text-[#fbcf33]"})]})}),e.jsx("div",{className:"overflow-auto",children:e.jsxs("div",{className:"table p-10 min-w-full",children:[e.jsx("div",{className:"flex justify-end mb-1",children:e.jsx(pa,{config:F,handleClick:u})}),e.jsxs("table",{className:"w-full text-sm text-left !text-gray-700 dark:text-gray-400 table-bordered",children:[e.jsx("thead",{className:"text-xs text-gray-500 uppercase border-b-2 mb-1",children:e.jsxs("tr",{children:[e.jsx(q,{text:"Nama Grup",sortField:"nama",sortOrder:F.sortOrder,config:F,handleClick:()=>D("nama")}),e.jsx(q,{text:"Deskripsi",sortField:"deskripsi",sortOrder:F.sortOrder,config:F,handleClick:()=>D("deskripsi")}),e.jsx(q,{text:"Jumlah Tujuan",sortField:"jumlah_tujuan",sortOrder:F.sortOrder,config:F,handleClick:()=>D("jumlah_tujuan")}),e.jsx(q,{text:"Dibuat pada",sortField:"created_at",sortOrder:F.sortOrder,config:F,handleClick:()=>D("created_at")}),e.jsx(q,{text:"Aksi",className:"justify-center min-w-[2rem]"})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{className:"border-b border-slate-300",children:[e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(Ye,{name:"nama",onChange:g=>{f("nama",g.target.value)},type:"text",placeholder:"Cari Nama"})}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(Ye,{name:"deskripsi",onChange:g=>{f("deskripsi",g.target.value)},type:"text",placeholder:"Cari Deskripsi"})}),e.jsx("td",{}),e.jsx("td",{}),e.jsx("td",{})]}),m?e.jsx("tr",{children:e.jsx("td",{colSpan:5,children:e.jsx(ia,{})})}):e.jsx(e.Fragment,{}),o.length?o.map((g,c)=>e.jsxs("tr",{className:"border-b border-slate-300",children:[e.jsx("td",{className:" max-w-[20rem] px-6 py-6",children:g.nama}),e.jsx("td",{className:" max-w-[20rem] px-6 py-6",children:g.deskripsi}),e.jsx("td",{className:" max-w-[20rem] px-6 py-6",children:g.jumlah_tujuan}),e.jsx("td",{className:" max-w-[20rem] px-6 py-6",children:na(g.dibuat)}),e.jsxs("td",{className:"px-1 text-right w-[2rem]",children:[" ",g.action," "]})]},c)):e.jsx(e.Fragment,{})]})]}),e.jsxs("nav",{className:"flex items-center justify-between p-4","aria-label":"Table navigation",children:[e.jsx("span",{className:"text-sm text-gray-400",children:b.from&&`Menampilkan ${Se(b.from)} sampai ${Se(b.to)} dari ${Se(b.total)} entri`}),e.jsx(xa,{currentPage:F.page,lastPage:A,displayCount:5,handleClick:R})]})]})})]})}),e.jsx(ua,{}),e.jsxs(Fa,{open:W,onClose:j,children:[e.jsxs(_a,{children:[H," ",r]}),e.jsx(ca,{initialValues:C,onSubmit:E,validateOnChange:!0,validationSchema:nn,children:e.jsx(da,{id:"form",className:"text-sm",children:e.jsxs("div",{className:"p-5",children:[e.jsx(w,{mt:1,children:e.jsxs(Na,{children:[e.jsx("input",{type:"hidden",name:"id",value:C.id}),e.jsx(ce,{name:"nama",children:({field:g,form:c,meta:v})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Nama Grup",required:!0,error:v.error&&v.touched}),e.jsx(Ye,{...g,type:"text",placeholder:"Nama",error:v.error&&v.touched,disabled:T}),e.jsx(ue,{text:v.error,error:v.error&&v.touched})]})})]})}),e.jsx(w,{mt:1,children:e.jsx(Na,{children:e.jsx(ce,{name:"deskripsi",children:({field:g,form:c,meta:v})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Deskripsi",required:!1,error:v.error&&v.touched}),e.jsx(Ka,{...g,placeHolder:"Masukan Deskripsi..",error:v.error&&v.touched,rows:2,disabled:T}),e.jsx(ue,{text:v.error,error:v.error&&v.touched})]})})})})]})})}),e.jsx(ya,{children:e.jsxs(e.Fragment,{children:[!T&&e.jsx(Je,{submit:I,color:"success",formId:"form",text:$}),e.jsx(_e,{color:T?"dark":"error",variant:"gradient",onClick:()=>z(!1),children:T?"Tutup":"Batal"})]})})]})]})]})},lk=()=>{const r="Group Tembusan",[s,n]=a.useState(!1),[t,i]=a.useState(!1),l=new Fd,m=ga(),p=ha(),[B,K]=a.useState(!1),[W,z]=a.useState(!1),[T,L]=a.useState(null),[$,M]=a.useState(null),[H,V]=a.useState(!0),[A,G]=a.useState({formode:m.state.formode,id:m.state.id,organisasi_id:m.state.organisasi_id,public_organisasi_id:m.state.public_organisasi_id,penggunas:m.state.penggunas,daftar_tujuan:m.state.daftar_tujuan,nama:m.state.nama,deskripsi:m.state.deskripsi,created_at:m.state.created_at}),[X,O]=a.useState({grup_tembusan_id:m.state.id,penggunas:[]}),[I,_]=a.useState({total:0,from:1,to:1}),C="";a.useEffect(()=>{A.formode=="Ubah"&&n(ge(r,"is_update",!0)),A.formode=="Lihat"&&(n(ge(r,"is_read",!0)),K(!0))},[A.formode]);let k=[];T==null?k=[]:k=T.map(h=>({nama:h.kepada,dibuat:h.created_at,action:e.jsxs("div",{className:"flex items-center justify-center gap-3 w-full",children:[(h==null?void 0:h.is_update)&&e.jsx(Dt,{size:"1.5em",color:"#00bcd4",onClick:()=>E(h==null?void 0:h.id),className:"cursor-pointer",title:"Lihat"}),!B&&ge(r,"is_delete")&&e.jsx($a,{size:"1.5em",color:"#e62e2d",onClick:()=>D(h),className:"cursor-pointer",title:"Hapus"})]})}));const[b,y]=a.useState({page:1,rows:10,sortField:"",sortOrder:null,search:"",filters:{kepada:{value:""},formatted_created_at:{value:""},grup_tembusan_id:{value:A.id}}});a.useEffect(()=>{o()},[b]);const o=async(h=!1)=>{h&&(b.page=1),i(!0),await l.getPagingDaftarTujuan(b).then(d=>{let j=d.data.result;j.data&&(M(j.last_page),L(j.data),i(!1)),i(!1),_({...I,to:j.to,from:j.from,total:j.total})}).catch(d=>{i(!1),_({...I,to:0,from:!1,total:0})})},F=os((h,d,j=null)=>{if(j){let c=j.target;for(;c&&c.tagName!=="TD";)c=c.parentNode;if(c&&c.tagName==="TD"){const v=c.querySelector(".clear-input"),N=c.querySelector("input");d?v.classList.remove("hidden"):(v.classList.add("hidden"),N.value="")}}let g={...b};g.filters[h].value=d,g.page=1,y(g)},600),x=h=>{let d={...b};d.page=h,y(d),window.scrollTo({top:0,behavior:"smooth"})},S=h=>{let d={...b};d.rows=h,d.page=1,y(d)},f=h=>{let d={...b};d.sortField=h,b.sortField!=h?b.sortOrder==""&&(d.sortOrder=1):b.sortOrder==1?d.sortOrder=-1:(d.sortOrder="",d.sortField=""),d.page=1,y(d)},R=h=>{V(!1),h.id!==0?l.put(h.id,h).then(d=>{var j,g,c;U.fire((j=d.data)!=null&&j.success?"Berhasil":"Gagal",(g=d.data)==null?void 0:g.message,(c=d.data)!=null&&c.success?"success":"warning"),d.data.success&&J()}).catch(d=>{var g,c;const j=Oe(d.response.data.result);U.fire("Gagal",j??((c=(g=d.response)==null?void 0:g.data)==null?void 0:c.message),"error")}).finally(()=>V(!0)):l.post(h).then(d=>{var j,g,c;U.fire((j=d.data)!=null&&j.success?"Berhasil":"Gagal",(g=d.data)==null?void 0:g.message,(c=d.data)!=null&&c.success?"success":"warning"),d.data.success&&J()}).catch(d=>{var g,c;const j=Oe(d.response.data.result);U.fire("Gagal",j??((c=(g=d.response)==null?void 0:g.data)==null?void 0:c.message),"error")}).finally(()=>V(!0))},u=h=>{V(!1),l.postDaftarTujuan(h).then(d=>{var j,g,c;U.fire((j=d.data)!=null&&j.success?"Berhasil":"Gagal",(g=d.data)==null?void 0:g.message,(c=d.data)!=null&&c.success?"success":"warning"),d.data.success&&(o(!0),P())}).catch(d=>{var j,g,c,v;console.log(d),U.fire("Gagal",(g=(j=d.response)==null?void 0:j.data)!=null&&g.result&&d.response.data.result.length>0?d.response.data.result[0]:(v=(c=d.response)==null?void 0:c.data)==null?void 0:v.message,"error")}).finally(()=>V(!0))},D=h=>{U.fire({title:"Konfirmasi",text:`Data ${h.kepada} akan dihapus ?`,icon:"warning",showCancelButton:!0,confirmButtonText:"Hapus",cancelButtonText:"Batal",customClass:{confirmButton:"button button-error",cancelButton:"button button-info"}}).then(d=>{d.isConfirmed&&(ka(),l.deleteDaftarTujuan(h.id).then(j=>{j.status==200&&o(),U.fire("Berhasil","Data Berhasil Dihapus","success")}).catch(j=>{var c,v;const g=Oe(j.response.data.result);U.fire("Gagal",g??((v=(c=j.response)==null?void 0:c.data)==null?void 0:v.message),"error")}))})},E=h=>{U.fire({title:"Perbarui Tujuan",text:"Apakah Anda yakin ingin memperbarui Tujuan ini ?",icon:"question",showCancelButton:!0,confirmButtonText:"Ya, Perbarui",cancelButtonText:"Batal",customClass:{confirmButton:"button button-success",cancelButton:"button button-secondary"}}).then(d=>{d.isConfirmed&&(ka(),l.refreshUser({id:h}).then(j=>{j.status==200&&o(),U.fire("Berhasil","Data Berhasil Diperbarui","success")}).catch(j=>{var c,v,N,Q;const g=Oe((v=(c=j.response)==null?void 0:c.data)==null?void 0:v.result);U.fire("Gagal",g??((Q=(N=j.response)==null?void 0:N.data)==null?void 0:Q.message),"error")}))})},J=()=>{p(C+"/pengguna/daftar-grup-tembusan")},P=()=>{z(!1)};return e.jsxs(aa,{children:[e.jsx(la,{}),s&&e.jsxs(e.Fragment,{children:[e.jsx(ie,{pt:6,pb:3,children:e.jsxs(Me,{children:[e.jsx(ie,{px:3,pt:3,lineHeight:1,children:e.jsxs(w,{container:!0,direction:"row",justifyContent:"space-between",alignItems:"center",children:[e.jsx(w,{item:!0,children:e.jsxs(le,{variant:"h5",fontWeight:"medium",children:[A.formode," ",r]})}),e.jsxs(w,{item:!0,className:"flex items-center gap-2",children:[!B&&ge(r,"is_update")&&e.jsx(w,{item:!0,children:e.jsxs(_e,{variant:"gradient",color:"info",onClick:()=>z(!0),children:[e.jsx(Ea,{size:"1.5em"}),"Tembusan Baru"]})}),e.jsx(w,{item:!0,children:e.jsxs(_e,{variant:"gradient",color:"secondary",onClick:J,children:[e.jsx(za,{size:"1.5em",className:"me-2"}),A.formode!="Lihat"?"Batal":"Kembali"]})})]})]})}),e.jsx(w,{px:3,pt:3,children:e.jsx("div",{className:"text-sm w-100 lg:w-[100vh]",children:e.jsxs("span",{children:["Hai, Anda bisa menambahkan daftar tujuan kedalam grup ",e.jsx("b",{children:A.nama})," ","ini apabila sudah menambahkan kontak pada menu ","  ",e.jsx("b",{className:"text-blue-600 cursor-pointer",onClick:()=>p(C+"/pengguna/daftar-tembusan"),children:"Daftar Tembusan"})]})})}),e.jsxs("div",{className:"flex flex-col md:justify-between",children:[e.jsx("div",{className:"overflow-auto",children:e.jsxs("div",{className:"table px-6 pt-6 min-w-full",children:[e.jsx("div",{className:"flex justify-end mb-1",children:e.jsx(pa,{config:b,handleClick:S})}),e.jsxs("table",{className:"w-full text-sm text-left !text-gray-700 dark:text-gray-400 table-bordered",children:[e.jsx("thead",{className:"text-xs text-gray-500 uppercase border-b-2 mb-1",children:e.jsxs("tr",{children:[e.jsx(q,{text:"Pengguna",sortField:"nama",sortOrder:b.sortOrder,config:b,handleClick:()=>f("nama")}),e.jsx(q,{text:"Dibuat Pada",sortField:"created_at",sortOrder:b.sortOrder,config:b,handleClick:()=>f("created_at")}),e.jsx(q,{text:"Aksi",className:"justify-center min-w-[2rem]"})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{className:"border-b border-slate-300",children:[e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"kepada",onSearch:F,placeholder:"Nama",type:"input"})}),e.jsx("td",{}),e.jsx("td",{})]}),t?e.jsx("tr",{children:e.jsx("td",{colSpan:5,children:e.jsx(ia,{})})}):e.jsx(e.Fragment,{}),k.length?k.map((h,d)=>e.jsxs("tr",{className:"border-b border-slate-300",children:[e.jsx("td",{className:" max-w-[20rem] px-6 py-6",children:h.nama}),e.jsx("td",{className:" max-w-[20rem] px-6 py-6",children:na(h.dibuat)}),e.jsxs("td",{className:"px-1 text-right w-[2rem]",children:[" ",h.action," "]})]},d)):e.jsx(e.Fragment,{})]})]}),e.jsxs("nav",{className:"flex items-center justify-between p-4","aria-label":"Table navigation",children:[e.jsx("span",{className:"text-sm text-gray-400",children:I.from&&`Menampilkan ${Se(I.from)} sampai ${Se(I.to)} dari ${Se(I.total)} entri`}),e.jsx(xa,{currentPage:b.page,lastPage:$,displayCount:5,handleClick:x})]})]})}),e.jsx(ca,{initialValues:A,onSubmit:R,validateOnChange:!0,validationSchema:nn,children:e.jsxs(da,{id:"form",encType:"multipart/form-data",className:"w-full md:w-8/12",children:[e.jsx(w,{mt:2,children:e.jsxs("div",{className:"px-6 grid grid-cols-1 mb-10 gap-5 lg:mb-0",children:[e.jsx(w,{mt:3,children:e.jsx(ce,{name:"nama",children:({field:h,form:d,meta:j})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Nama Grup",required:!0,error:j.error&&j.touched}),e.jsx(Ye,{...h,type:"text",placeholder:"Nama Grup",error:j.error&&j.touched,disabled:B}),e.jsx(ue,{text:j.error,error:j.error&&j.touched})]})})}),e.jsx(w,{mt:3,children:e.jsx(ce,{name:"deskripsi",children:({field:h,form:d,meta:j})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Deskripsi",required:!0,error:j.error&&j.touched}),e.jsx(Ka,{...h,placeHolder:"Masukan Deskripsi..",error:j.error&&j.touched,rows:3,disabled:B}),e.jsx(ue,{text:j.error,error:j.error&&j.touched})]})})})]})}),e.jsxs("div",{className:"px-6 py-3 flex justify-between items-center w-full gap-5 mb-10",children:[e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx(Yi,{size:"1.0em",className:"pb-1",color:"#000"}),e.jsx(le,{variant:"caption",children:na(A.created_at)})]}),!B&&e.jsx(Je,{submit:H,color:"success",formId:"form",text:A.formode=="Tambah"?"Simpan":"Ubah"})]})]})})]})]})}),e.jsxs(Fa,{open:W,onClose:P,children:[e.jsxs("div",{className:"pb-28",children:[e.jsx(_a,{children:"Tambah Tembusan Baru"}),e.jsx(ca,{initialValues:X,onSubmit:u,validateOnChange:!0,validationSchema:Cd,children:e.jsx(da,{id:"formTujuan",children:e.jsx("div",{className:"px-2",children:e.jsx(w,{mt:1,children:e.jsx("div",{className:"p-3",children:e.jsx(ce,{name:"penggunas",children:({field:h,form:d,meta:j})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Pengguna",required:!0,error:j.error&&j.touched}),e.jsx(ra,{isMulti:!0,url:"pengguna/group-tembusan/get/pengguna",isDisabled:B,callbackChange:g=>{const c=Array.from(g,v=>v);d.setFieldValue("penggunas",c.length?c:null)},keyValue:["id","nama_jabatan"],placeholder:"Pilih Tujuan...",className:"text-base",menuPortalTarget:null,optionParam:{id:A.id,organisasi_id:A.organisasi_id,group_role:4,public_organisasi_id:A.public_organisasi_id}}),e.jsx(ue,{text:j.error,error:j.error&&j.touched})]})})})})})})})]}),e.jsx(ya,{children:e.jsxs(e.Fragment,{children:[!B&&e.jsx(Je,{submit:H,color:"success",formId:"formTujuan",text:"Simpan"}),e.jsx(_e,{color:B?"dark":"error",variant:"gradient",onClick:P,children:B?"Tutup":"Batal"})]})})]})]})]})},ok=/^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#\$%\^&\*])(?=.{8,})/,ck=/^\d+(\.\d+)?$/,dk=/^[a-zA-Z0-9.]*$/,uk=fa().shape({nomor_induk:ze().matches(dk,{message:"Hanya dapat berupa huruf, angka dan titik"}).required("Nomor Induk Pegawai harus diisi"),nik:ze().matches(ck,{message:"NIK harus berupa angka positif"}).required("NIK harus diisi"),nama:ze().required("Nama Lengkap harus diisi"),username:ze().required("Nama Pengguna harus diisi"),email:ze().email("Email tidak valid").required("Email harus diisi"),telepon:ze().required("Nomor Seluler harus diisi"),foto_new:Qa().test("fileSize","Maksimal Ukuran File 2 MB",r=>r?r&&r.size<=2e6:!0).test("fileType","File hanya mendukung format .JPG, .PNG, .JPEG",r=>{const s=["jpg","jpeg","png"];return r?r&&s.includes(r.type):!0})}),hk=fa().shape({password_lama:ze().required("Password lama wajib diisi"),password_baru:ze().matches(ok,{message:"Password Lemah"}),konfirmasi_password:ze().oneOf([Hn("password_baru")],"Password tidak sama")}),mk=r=>{const{children:s,value:n,index:t,target:i,naskahId:l,target_meta:m,originalFilePath:p,...B}=r,K=JSON.parse(Le.getItem("users")),W=new Jn,[z,T]=a.useState(null),L=ga();ha();const[$,M]=a.useState(!1),[H,V]=a.useState("data-pribadi"),[A,G]=a.useState(!1),[X,O]=a.useState(!1),[I,_]=a.useState(!0),[C,k]=a.useState(!1),[b,y]=a.useState(null),[o,F]=a.useState(!1),[x,S]=a.useState(!1),[f,R]=a.useState(!1),[u,D]=a.useState(!1),[E,J]=a.useState([]),[P,h]=a.useState([]),[d,j]=a.useState([]),[g,c]=a.useState(p),[v,N]=a.useState(null),[Q,re]=a.useState([]),[ye,xe]=a.useState([]),[fe,Ge]=Ga.useState(null),[$e,Pe]=a.useState({nomor_induk:K==null?void 0:K.nomor_induk,nik:K==null?void 0:K.nik,nama:K==null?void 0:K.nama,username:K==null?void 0:K.username,email:K==null?void 0:K.email,telepon:K==null?void 0:K.telepon,foto:K==null?void 0:K.foto_new}),[te,ne]=a.useState({password_lama:"",password_baru:"",konfirmasi_password:""}),[pe,he]=a.useState(null),[oe,je]=a.useState({total:0,from:1,to:1}),[Ne,Re]=a.useState({page:1,rows:10,sortField:"",sortOrder:null});let sa=[];const{data:Te,isLoading:me,isError:ee,refetch:Y}=ds({queryKey:["LOGS",Ne.page,Ne.rows],queryFn:()=>W.getPagingLogData(Ne).then(ve=>{const Ae=ve.data.result;return je({...oe,to:Ae.to,from:Ae.from,total:Ae.total}),he(Ae.last_page),Ae.data}).catch(ve=>(je({...oe,to:0,from:0,total:0}),[])),keepPreviousData:!0,refetchOnWindowFocus:!1});Te==null?sa=[]:sa=Te.map((ve,Ae)=>{const Ue=ve.properties.old_data.length===0&&ve.properties.new_data.length===0;return{no:Ae+oe.from,log_name:ve.log_name,description:ve.description,created_at:ve.created_at,action:e.jsx("div",{className:"flex justify-center w-full",children:Ue?e.jsx(be,{badgeContent:"TIDAK ADA",color:"warning",container:!0}):e.jsx(Oa,{size:"1.5em",color:"#17c1e8",onClick:()=>Aa(ve),className:"cursor-pointer",title:"View"})})}});const[ke,De]=a.useState(!0);a.useEffect(()=>{var ve;ta(),ke?De(!1):Y(),(ve=L==null?void 0:L.state)!=null&&ve.goTab&&V(L.state.goTab)},[Ne,Y]);const ta=async()=>{},Be=ve=>{Re(Ae=>({...Ae,page:ve}))},Fe=ve=>{let Ae={...Ne};Ae.rows=ve,Ae.page=1,Re(Ae)},Ke=ve=>{let Ae={...Ne};Ae.sortField=ve,Ne.sortField!=ve?Ne.sortOrder==""&&(Ae.sortOrder=1):Ne.sortOrder==1?Ae.sortOrder=-1:(Ae.sortOrder="",Ae.sortField=""),Ae.page=1,Re(Ae)},Qe=ve=>{G(!0),_(!1),W.put(ve).then(Ae=>{ja().then(()=>{var Ue,ma,La;_(!0),G(!1),U.fire((Ue=Ae.data)!=null&&Ue.success?"Berhasil":"Gagal",(ma=Ae.data)==null?void 0:ma.message,(La=Ae.data)!=null&&La.success?"success":"warning")}).catch(Ue=>{var La,We,qe,He;const ma=Oe((We=(La=Ue.response)==null?void 0:La.data)==null?void 0:We.result);U.fire("Gagal",ma??((He=(qe=Ue.response)==null?void 0:qe.data)==null?void 0:He.message),"error"),_(!0)})}).catch(Ae=>{var ma,La,We,qe;G(!1);const Ue=Oe((La=(ma=Ae.response)==null?void 0:ma.data)==null?void 0:La.result);U.fire("Gagal",Ue??((qe=(We=Ae.response)==null?void 0:We.data)==null?void 0:qe.message),"error")})},ea=(ve,{resetForm:Ae})=>{G(!0),_(!1),W.updatePassword(ve).then(Ue=>{ja().then(()=>{var ma,La,We;_(!0),G(!1),U.fire((ma=Ue.data)!=null&&ma.success?"Berhasil":"Gagal",(La=Ue.data)==null?void 0:La.message,(We=Ue.data)!=null&&We.success?"success":"warning"),Ae()}).catch(ma=>{var We,qe,He,Ve;const La=Oe((qe=(We=ma.response)==null?void 0:We.data)==null?void 0:qe.result);U.fire("Gagal",La??((Ve=(He=ma.response)==null?void 0:He.data)==null?void 0:Ve.message),"error"),_(!0)})}).catch(Ue=>{var La,We,qe,He;G(!1);const ma=Oe((We=(La=Ue.response)==null?void 0:La.data)==null?void 0:We.result);U.fire("Gagal",ma??((He=(qe=Ue.response)==null?void 0:qe.data)==null?void 0:He.message),"error"),_(!0)})},ja=async()=>{await W.getUpdateData({group_role:K==null?void 0:K.group_role}).then(ve=>{Le.setItem("users",JSON.stringify(ve.data.result))})};a.useEffect(()=>{K!=null&&K.foto?(O(!0),Hs(K==null?void 0:K.foto,"user-profile").then(ve=>{y(ve),O(!1)}).catch(()=>{O(!1)})):O(!1)},[K==null?void 0:K.foto]);const Aa=ve=>{Ge(ve),re(ve),xe(Array.from(new Set([...Object.keys(ve.properties.old_data),...Object.keys(ve.properties.new_data)]))),D(!0)},Ee=()=>{D(!1),h([]),j([]),J([])};return e.jsxs(aa,{children:[e.jsx(la,{}),e.jsxs(e.Fragment,{children:[e.jsx(ie,{pt:6,pb:3,children:e.jsx(Me,{children:e.jsxs(ie,{px:3,pt:3,lineHeight:1,children:[e.jsx(w,{container:!0,direction:"row",justifyContent:"space-between",alignItems:"center",children:e.jsx(w,{item:!0,children:e.jsx(le,{variant:"h5",fontWeight:"medium",children:"Pengaturan Akun"})})}),e.jsx(ie,{pb:3,children:e.jsx(Me,{className:"p-5",children:e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"p-4 text-base",children:e.jsxs("div",{className:"flex justify-center",children:[e.jsxs("div",{className:`w-1/2 text-center py-2 flex justify-center items-center cursor-pointer ${H=="data-pribadi"?"border-b-2 border-red-500":""}`,onClick:()=>V("data-pribadi"),children:[e.jsx($u,{className:"mr-2 w-5 h-4"})," Data Pribadi"]}),e.jsxs("div",{className:`w-1/2 text-center py-2 flex justify-center items-center cursor-pointer ${H=="kata-sandi"?"border-b-2 border-red-500":""}`,onClick:()=>V("kata-sandi"),children:[e.jsx(Ru,{className:"mr-2 w-5 h-4"})," Kata Sandi"]}),e.jsxs("div",{className:`w-1/2 text-center py-2 flex justify-center items-center cursor-pointer ${H=="log-aktifitas"?"border-b-2 border-red-500":""}`,onClick:()=>V("log-aktifitas"),children:[e.jsx(Eu,{className:"mr-2 w-5 h-4"})," Log Aktivitas"]})]})}),e.jsx(e.Fragment,{children:H=="data-pribadi"?e.jsx(ie,{children:e.jsx(ca,{initialValues:$e,onSubmit:Qe,validateOnChange:!0,validationSchema:uk,enableReinitialize:!0,children:e.jsxs(da,{id:"form",encType:"multipart/form-data",children:[e.jsxs(w,{container:!0,direction:"row",justifyContent:"space-between",spacing:1,children:[e.jsxs(w,{item:!0,xs:12,md:6,children:[e.jsx(w,{mt:3,children:e.jsx(ce,{name:"nama",children:({field:ve,form:Ae,meta:Ue})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Nama Lengkap",required:!0,error:Ue.error&&Ue.touched}),e.jsx(Ye,{...ve,type:"text",placeholder:"Nama Lengkap",error:Ue.error&&Ue.touched}),e.jsx(ue,{text:Ue.error,error:Ue.error&&Ue.touched})]})})}),e.jsx(w,{mt:3,children:e.jsx(ce,{name:"nik",children:({field:ve,form:Ae,meta:Ue})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"NIK",required:!0,error:Ue.error&&Ue.touched}),e.jsx(Ye,{...ve,type:"text",placeholder:"NIK",error:Ue.error&&Ue.touched,disabled:$}),e.jsx(ue,{text:Ue.error,error:Ue.error&&Ue.touched})]})})}),e.jsx(w,{mt:3,children:e.jsx(ce,{name:"nomor_induk",children:({field:ve,form:Ae,meta:Ue})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"NIP",required:!0,error:Ue.error&&Ue.touched}),e.jsx(Ye,{...ve,type:"text",placeholder:"Nama Lengkap",error:Ue.error&&Ue.touched,disabled:$}),e.jsx(ue,{text:Ue.error,error:Ue.error&&Ue.touched})]})})})]}),e.jsxs(w,{item:!0,xs:12,md:6,children:[e.jsx(w,{mt:3,children:e.jsx(ce,{name:"email",children:({field:ve,form:Ae,meta:Ue})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Email",required:!0,error:Ue.error&&Ue.touched}),e.jsx(Ye,{...ve,type:"text",placeholder:"Email",error:Ue.error&&Ue.touched,disabled:$}),e.jsx(ue,{text:Ue.error,error:Ue.error&&Ue.touched})]})})}),e.jsx(w,{mt:3,children:e.jsx(ce,{name:"telepon",children:({field:ve,form:Ae,meta:Ue})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Telepon",required:!0,error:Ue.error&&Ue.touched}),e.jsx(Ye,{...ve,type:"text",placeholder:"Telepon",error:Ue.error&&Ue.touched,disabled:$}),e.jsx(ue,{text:Ue.error,error:Ue.error&&Ue.touched})]})})}),e.jsx(w,{mt:3,children:e.jsx(ce,{name:"foto_new",children:({field:ve,form:Ae,meta:Ue})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Foto",required:!1,error:Ue.error&&Ue.touched}),X?e.jsx(e.Fragment,{}):e.jsx(Xn,{...ve,onChange:ma=>{Ae.setFieldValue("foto",ma.currentTarget.files[0])},className:"max-h-[20rem] mb-5",accept:".jpg,.jpeg,.png",initialFile:b,disabled:$}),e.jsx("div",{className:"text-xs ps-5 text-blue-500",children:"Format yang didukung: .jpg .jpeg .png"}),e.jsx(ue,{text:Ue.error,error:Ue.error&&Ue.touched})]})})})]})]}),e.jsx("div",{className:"p-3 flex justify-end items-center w-full gap-5 mb-10",children:!$&&$e.formode!="Lihat"&&e.jsx(Je,{submit:I,color:"success",formId:"form",text:$e.formode=="Tambah"?"Simpan":"Perbarui"})})]})})}):H=="kata-sandi"?e.jsx(ie,{children:e.jsx(ca,{initialValues:te,onSubmit:ea,validateOnChange:!0,validationSchema:hk,enableReinitialize:!0,children:({resetForm:ve})=>e.jsx(da,{id:"form_password",encType:"multipart/form-data",children:e.jsx(w,{container:!0,direction:"row",justifyContent:"start",children:e.jsxs(w,{item:!0,xs:12,md:6,children:[e.jsx(w,{mt:3,children:e.jsx("div",{className:"relative",children:e.jsx(ce,{name:"password_lama",children:({field:Ae,form:Ue,meta:ma})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Password Lama",required:!0,error:ma.error&&ma.touched}),e.jsx(Ye,{...Ae,type:o?"text":"password",placeholder:"Password Lama",error:ma.error&&ma.touched,disabled:$}),e.jsxs("div",{className:"absolute top-11 right-0 pr-10 flex items-center text-sm leading-5",children:[e.jsx(xr,{onClick:()=>F(!1),className:`text-xl ${o?"block":"hidden"}`}),e.jsx(pr,{onClick:()=>F(!0),className:`text-xl ${o?"hidden":"block"}`})]}),e.jsx("div",{className:"text-xs ps-1 text-blue-500 mt-1",children:"Kata sandi harus terdiri dari setidaknya satu angka, satu huruf kecil, satu huruf besar, satu simbol dari (!, @, #, $, %, ^, & atau *) dan memiliki panjang minimal 8 karakter."}),e.jsx(ue,{text:ma.error,error:ma.error&&ma.touched})]})})})}),e.jsx(w,{mt:3,children:e.jsx("div",{className:"relative",children:e.jsx(ce,{name:"password_baru",children:({field:Ae,form:Ue,meta:ma})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Password Baru",required:!0,error:ma.error&&ma.touched}),e.jsx(Ye,{...Ae,type:x?"text":"password",placeholder:"Password Baru",error:ma.error&&ma.touched,disabled:$}),e.jsxs("div",{className:"absolute top-11 right-0 pr-10 flex items-center text-sm leading-5",children:[e.jsx(xr,{onClick:()=>S(!1),className:`text-xl ${x?"block":"hidden"}`}),e.jsx(pr,{onClick:()=>S(!0),className:`text-xl ${x?"hidden":"block"}`})]}),e.jsx(ue,{text:ma.error,error:ma.error&&ma.touched})]})})})}),e.jsx(w,{mt:3,children:e.jsx("div",{className:"relative",children:e.jsx(ce,{name:"konfirmasi_password",children:({field:Ae,form:Ue,meta:ma})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Konfirmasi Password",required:!0,error:ma.error&&ma.touched}),e.jsx(Ye,{...Ae,type:f?"text":"password",placeholder:"Konfirmasi Password",error:ma.error&&ma.touched,disabled:$}),e.jsxs("div",{className:"absolute top-11 right-0 pr-10 flex items-center text-sm leading-5",children:[e.jsx(xr,{onClick:()=>R(!1),className:`text-xl ${f?"block":"hidden"}`}),e.jsx(pr,{onClick:()=>R(!0),className:`text-xl ${f?"hidden":"block"}`})]}),e.jsx(ue,{text:ma.error,error:ma.error&&ma.touched})]})})})}),e.jsx("div",{className:"p-3 flex justify-end items-center w-full gap-5 mb-10",children:!$&&te.formode!="Lihat"&&e.jsx(Je,{submit:I,color:"success",formId:"form_password",text:te.formode=="Tambah"?"Simpan":"Perbarui"})})]})})})})}):e.jsx(ie,{children:e.jsx("div",{className:"overflow-auto",children:e.jsxs("div",{className:"table p-10 min-w-full",children:[e.jsx("div",{className:"flex items-center justify-end mb-1",children:e.jsx(pa,{config:Ne,handleClick:Fe})}),e.jsxs("table",{className:"w-full text-sm text-left !text-gray-700 dark:text-gray-400 table-bordered",children:[e.jsx("thead",{className:"text-xs text-gray-500 uppercase border-b-2 mb-1",children:e.jsxs("tr",{children:[e.jsx(q,{text:"No",className:"flex justify-center"}),e.jsx(q,{text:"Judul",sortField:"log_name",sortOrder:Ne.sortOrder,config:Ne,handleClick:()=>Ke("log_name")}),e.jsx(q,{text:"Deskripsi",sortField:"description",sortOrder:Ne.sortOrder,config:Ne,handleClick:()=>Ke("description")}),e.jsx(q,{text:"Role",sortField:"role",sortOrder:Ne.sortOrder,config:Ne,handleClick:()=>Ke("role")}),e.jsx(q,{text:"Dilakukan pada",sortField:"created_at",sortOrder:Ne.sortOrder,config:Ne,handleClick:()=>Ke("created_at")}),e.jsx(q,{text:"Aksi",className:"justify-center min-w-[2rem]"})]})}),e.jsxs("tbody",{children:[me?e.jsx("tr",{children:e.jsx("td",{colSpan:6,children:e.jsx(ia,{})})}):e.jsx(e.Fragment,{}),sa.length?sa.map((ve,Ae)=>e.jsxs("tr",{className:"border-b border-slate-300",children:[e.jsx("td",{className:"text-center p-3",children:ve.no}),e.jsx("td",{className:" max-w-[9rem] p-3",children:e.jsx("div",{className:"flex-wrap",children:ve.log_name})}),e.jsx("td",{className:" max-w-[9rem] p-3",children:e.jsx("div",{className:"flex-wrap",children:ve.description})}),e.jsx("td",{className:" max-w-[9rem] p-3",children:e.jsx("div",{className:"flex-wrap"})}),e.jsx("td",{className:" max-w-[9rem] p-3",children:e.jsx("div",{className:"flex-wrap",children:Yh(ve.created_at)})}),e.jsx("td",{className:"px-1 text-right w-[2rem]",children:ve.action})]},Ae)):e.jsx(e.Fragment,{})]})]}),e.jsxs("nav",{className:"flex items-center justify-between p-4","aria-label":"Table navigation",children:[e.jsx("span",{className:"text-sm text-gray-400",children:oe.from&&`Menampilkan ${Se(oe.from)} sampai ${Se(oe.to)} dari ${Se(oe.total)} entri`}),e.jsx(xa,{currentPage:Ne.page,lastPage:pe,displayCount:5,handleClick:Be})]})]})})})})]})})})]})})}),e.jsxs(ys,{open:u,onClose:Ee,fullWidth:!0,maxWidth:"lg",children:[e.jsxs(e.Fragment,{children:[e.jsxs(_a,{children:["Detail Log",e.jsx(le,{variant:"body2",style:{marginTop:8,fontSize:"1rem",color:"#666"},children:(fe==null?void 0:fe.description)||"No Description"})]}),e.jsx("div",{className:"overflow-auto block",children:e.jsx("div",{className:"table px-6 pt-6 min-w-full",children:e.jsxs("table",{className:"w-full text-sm text-left !text-gray-700 dark:text-gray-400 table-bordered",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"max-w-[10rem] py-3 px-2",children:"Atribut"}),e.jsx("td",{className:"bg-red-700 text-white max-w-[10rem] py-3 px-2",children:"Data Lama"}),e.jsx("td",{className:"bg-green-700 text-white max-w-[10rem] py-3 px-2",children:"Data Baru"})]})}),e.jsx("tbody",{children:ye.map(ve=>e.jsxs("tr",{children:[e.jsx("td",{className:"max-w-[10rem] px-2 py-1 flex-wrap",children:e.jsx("div",{className:"break-all whitespace-pre-line",children:ve})}),e.jsx("td",{className:"max-w-[10rem] px-2 py-1 flex-wrap",children:e.jsx("div",{className:"break-all whitespace-pre-line",children:Q.properties.old_data[ve]!==void 0?Q.properties.old_data[ve]:""})}),e.jsx("td",{className:"max-w-[10rem] px-2 py-1 flex-wrap",children:e.jsx("div",{className:"break-all whitespace-pre-line",children:Q.properties.new_data[ve]!==void 0?Q.properties.new_data[ve]:""})})]},`${Q.id}-${ve}`))})]})})})]}),e.jsx(ya,{children:e.jsx(_e,{color:"secondary",variant:"gradient",onClick:Ee,children:"Tutup"})})]}),e.jsx(ua,{})]})]})},wn=()=>{var k;const[r,s]=a.useState(!1),n=JSON.parse(Le.getItem("users")),[t,i]=a.useState(!1),l="https://api.arsip.go.id/texteditor/api/",m="srikandi-prod",p="DyFu0L8TDrZ3MecRzzVv6kY1wTxc4VWW",B="https://oo.arsip.go.id",K=new Ts,W=new qo,[z,T]=a.useState(null),[L,$]=a.useState(null),M=ga(),H=ha(),[V,A]=a.useState(null),G={naskahId:(k=M.state)==null?void 0:k.naskahId};a.useEffect(()=>{G.naskahId&&(U.showLoading(),X())},[M.state]),a.useEffect(()=>{const b=y=>{const o="Apakah Anda yakin ingin me-refresh browser? Versi baru akan terbuat jika browser ter-refresh";return y.returnValue=o,o};return window.addEventListener("beforeunload",b),()=>{window.removeEventListener("beforeunload",b)}},[]);const X=async()=>{K.getDetail(G.naskahId).then(async b=>{const y=b.data.result;if(A(y),y.new_file_name=`UID-${G.naskahId}---${em(7)}---${y.file_name_original??y.file}`,Gn(y.file,y.created_at))await O(y.file,y.file_path,y.new_file_name,y.file_name_original);else{const F={source_url:await Jo(y.file,"naskah-keluar"),target_bucket:m,target_file:`${Ri().tz("Asia/Jakarta").format("YYYYMMDDHHmmss")}-${y.file}`,target_folder:"text-editor"};W.downSave(F).then(x=>{O(x.filename,x.folder,y.new_file_name,y.file_path??"naskah-dinas-keluar",y.file_name_original)})}})},O=async(b,y,o,F)=>{await Zh(b,y,o).then(x=>{I(x,F).then(()=>{s(!0),U.close()})})},I=async(b,y)=>{const o={document:{fileType:"docx",key:`${p}---`+b.key,title:`UID-${G==null?void 0:G.naskahId}-${y}`,url:b.full},documentType:"word",editorConfig:{callbackUrl:`${l}text-editor/callback/user/${n==null?void 0:n.id}`}};T(o.document);const F=new TextEncoder().encode(p),S=await new ch(o).setProtectedHeader({alg:"HS256",typ:"JWT"}).sign(F);$(S)},_=()=>{t?U.fire({title:"Selesai mengubah?",text:"Menutup Editor akan melakukan pembaharuan dokumen PDF",icon:"warning",showCancelButton:!0,confirmButtonText:"Sudah",cancelButtonText:"Belum",reverseButtons:!0,customClass:{confirmButton:"button button-primary",cancelButton:"button button-secondary"}}).then(async b=>{var y;b.isConfirmed&&H((y=M.state)==null?void 0:y.prev_pathname,{state:{...M.state,from_editor:!0}})}):H(-1)},C=()=>{i(!0)};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex w-full justify-start",style:{backgroundColor:"#333333"},children:e.jsxs(_e,{variant:"gradient",color:"secondary",onClick:()=>_(),children:[e.jsx(za,{size:"1.5em",className:"me-2"}),"Kembali"]})}),r&&e.jsx("div",{children:L&&z?e.jsx(oh,{id:"docxEditor",height:"900px",width:"100%",documentServerUrl:B,config:{document:{...z},documentType:"word",editorConfig:{callbackUrl:`${l}text-editor/callback/user/${n==null?void 0:n.id}`},token:L,events:{onDocumentStateChange:C}}}):e.jsxs("div",{className:"flex w-full items-center justify-center text-lg gap-3",children:["Memuat Dokumen ",e.jsx(rs,{className:"w-30 h-30"})]})})]})},po=()=>{let{hash:r}=zd();const[s,n]=a.useState(!1),[t,i]=a.useState(!1),[l,m]=a.useState(null),p=new Gt,[B,K]=a.useState(!1),[W,z]=a.useState(null);a.useEffect(()=>{ka(),r&&p.getScanning(r).then(L=>{m(L.data.result),n(!0),U.close()}).catch(L=>{var $,M;U.fire({text:((M=($=L==null?void 0:L.response)==null?void 0:$.data)==null?void 0:M.message)??"Terjadi Kesalahan",icon:"error",allowOutsideClick:!1,showConfirmButton:!1,showCancelButton:!1})})},[r]);const T=async()=>{if(K(!0),!l.file_convert||!l.file_path)U.fire("Gagal","File Bersifat Rahasia","error");else{const L=await Hs(l==null?void 0:l.file_convert,(l==null?void 0:l.file_path)??"naskah-keluar",null,0,l.created_at);L?(z(L),i(!t)):U.fire("Gagal","Terjadi Kesalahan Saat Mengambil Dokumen","error")}K(!1)};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-100 min-h-[100vh] bg-blue-600 mb-5",children:s&&e.jsx("div",{className:"flex justify-center",children:e.jsxs("div",{className:"lg:w-2/5 md:w-3/5 sm:w-4/5 w-full bg-white rounded-2xl shadow-lg my-5 px-7",children:[e.jsx(w,{item:!0,xs:12,container:!0,direction:"row",justifyContent:"center",mb:3,children:e.jsx(w,{item:!0,xs:6,container:!0,direction:"row",justifyContent:"center",children:e.jsx("img",{src:Xr,width:300,alt:"Logo SRIKANDI",srcSet:Xr})})}),e.jsxs("div",{className:"grid grid-cols-12 mb-5 gap-5",children:[e.jsxs("div",{className:"col-span-12 text-center text-lg font-bold",children:["NASKAH DINAS INI DIKELOLA DENGAN APLIKASI",e.jsx("br",{}),"SISTEM INFORMASI KEARSIPAN DINAMIS TERINTEGRASI"]}),e.jsxs("div",{className:"col-span-12 m-0 p-0",children:[e.jsxs("div",{className:"mb-5 gap-2 flex lg:flex-row flex-col",children:[e.jsx("div",{className:"lg:w-1/2 w-full text-xs lg:order-1 order-2",children:"Naskah ini telah tertandatangani oleh :"}),e.jsxs("div",{className:"lg:w-1/2 w-full text-xs lg:text-right lg:order-2 order-1 ",children:["Nilai Hash :"," ",e.jsx("span",{className:"text-red-600 break-words",children:l==null?void 0:l.hash_value})]})]}),e.jsx("hr",{})]}),e.jsxs("div",{className:"col-span-12 m-0 p-0",children:[l==null?void 0:l.penandatangan_naskahs.map(L=>e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-12 mt-3 mb-5 gap-5",children:[e.jsxs("div",{className:"col-span-12 lg:col-span-3",children:["Nama ",e.jsx("span",{className:"inline lg:hidden",children:": "}),e.jsx("span",{className:"lg:inline hidden",children:e.jsx("br",{})}),e.jsx("b",{children:L==null?void 0:L.nama})]}),e.jsxs("div",{className:"col-span-12 lg:col-span-3",children:["Jabatan ",e.jsx("span",{className:"inline lg:hidden",children:": "}),e.jsx("span",{className:"lg:inline hidden",children:e.jsx("br",{})}),e.jsx("b",{children:L==null?void 0:L.jabatan})]}),e.jsxs("div",{className:"col-span-12 lg:col-span-3",children:["Unit Kerja ",e.jsx("span",{className:"inline lg:hidden",children:": "}),e.jsx("span",{className:"lg:inline hidden",children:e.jsx("br",{})}),e.jsx("b",{children:(L==null?void 0:L.unit_kerja)??"-"})]}),e.jsxs("div",{className:"col-span-12 lg:col-span-3",children:["Instansi ",e.jsx("span",{className:"inline lg:hidden",children:": "}),e.jsx("span",{className:"lg:inline hidden",children:e.jsx("br",{})}),e.jsx("b",{children:L==null?void 0:L.instansi})]}),e.jsxs("div",{className:"col-span-12",children:["Ditandatangani pada ",e.jsx("span",{className:"inline lg:hidden",children:": "}),e.jsx("span",{className:"lg:inline hidden",children:e.jsx("br",{})}),e.jsx("b",{children:Ns(L==null?void 0:L.updated_at)})]})]},`ttd-${L.id}`),e.jsx("hr",{})]})),e.jsx("div",{className:"col-span-12 text-center py-5",children:e.jsx(Je,{color:"error",text:e.jsxs("div",{className:"flex items-center",children:[e.jsx(ts,{size:"1.5em",className:"me-2"}),t?"Tutup":"Lihat"," File Digital"]}),submit:!B,onClick:()=>T(),size:"small",className:"text-sm whitespace-nowrap"})}),t&&W&&e.jsx("div",{className:"col-span-12 h-[80vh]",children:e.jsx("iframe",{className:"w-full h-full mt-2",src:`${W}#toolbar=0`})})]})]})]})})}),e.jsx("div",{className:"footer px-5 flex items-center",children:e.jsxs("div",{className:"min-h-[5vh]",children:["© 2023."," ",e.jsx("a",{href:"https://www.anri.go.id/",className:"text-blue-500 hover:text-blue-700",target:"_blank",children:"Arsip Nasional Republik Indonesia"})]})})]})},hr="https://api.arsip.go.id/user/api/";class Dd{constructor(){ae(this,"getPaging",async s=>{const n=Ce.serializeObjectToQueryString(s);return await se.get(`${hr}announce?${n}`).then(l=>l)});ae(this,"select",async s=>{const n=Ce.serializeObjectToQueryString(s);return await se.get(`${hr}announce/select?${n}`).then(l=>l)});ae(this,"post",async s=>await se.post(`${hr}announce`,s).then(i=>i));ae(this,"detail",async s=>await se.get(`${hr}announce/${s}`).then(i=>i.data.result));ae(this,"put",async(s,n)=>await se.put(`${hr}announce/${s}`,n).then(l=>l));ae(this,"delete",async s=>await se.delete(`${hr}announce/${s}`).then(i=>i))}}const xk=()=>{const r="Pengumuman",s=ga();new URLSearchParams(s.search).get("statusBaca"),new URLSearchParams(s.search).get("statusTL"),new URLSearchParams(s.search).get("statusBerkas");const[n,t]=a.useState(!1);a.useEffect(()=>{t(ge(r,"is_read",!0,!0))},[]);const i=JSON.parse(Le.getItem("users")),l=new Dd,m=ha(),[p,B]=a.useState(!1),[K,W]=a.useState(null),[z,T]=a.useState(null);a.useRef(null);const[L,$]=a.useState({start_at:"",end_at:""}),[M,H]=a.useState(!0),[V,A]=a.useState({total:0,from:1,to:1}),[G,X]=a.useState({berkas_id:null,naskah_id:null,jenis:""});let O=[];K==null?O=[]:O=K.map((f,R)=>({no:R+V.from,id:f.id,announce_roles:f.announce_roles,title:f.title,is_published:f.is_published,created_at:f.created_at,action:e.jsxs("div",{className:"flex items-center justify-center gap-3 h-full w-full",children:[ge(r,"is_update",!1,!0)&&e.jsx(Va,{size:"1.5em",color:"#fbcf33",onClick:()=>F(f),className:"cursor-pointer",title:"Ubah"}),ge(r,"is_delete",!1,!0)&&e.jsx($a,{size:"1.5em",color:"#e62e2d",onClick:()=>S(f),className:"cursor-pointer",title:"Hapus"})]})}));const[I,_]=a.useState({page:1,rows:10,sortField:"",sortOrder:null,search:"",user_id:i==null?void 0:i.id,group_role:i==null?void 0:i.group_role,organisasi_id:i==null?void 0:i.organisasi_id,public_organisasi_id:i==null?void 0:i.public_organisasi_id,filters:{role:{value:""},title:{value:""},is_published:{value:""},created_at:{value:""}}});a.useEffect(()=>{C()},[I]);const C=async()=>{B(!0),await l.getPaging(I).then(f=>{let R=f.data.result;R.data&&(T(R.last_page),W(R.data),B(!1)),B(!1),A({...V,to:R.to,from:R.from,total:R.total})}).catch(f=>{B(!1),A({...V,to:0,from:!1,total:0})})},k=Da((f,R,u=null)=>{if(u){let E=u.target;for(;E&&E.tagName!=="TD";)E=E.parentNode;if(E&&E.tagName==="TD"){const J=E.querySelector(".clear-input"),P=E.querySelector("input");R?J.classList.remove("hidden"):(J.classList.add("hidden"),P.value="")}}let D={...I};D.filters[f].value=R,D.page=1,_(D)},600),b=f=>{let R={...I};R.page=f,_(R),window.scrollTo({top:0,behavior:"smooth"})},y=f=>{let R={...I};R.rows=f,R.page=1,_(R)},o=f=>{let R={...I};R.sortField=f,I.sortField!=f?I.sortOrder==""&&(R.sortOrder=1):I.sortOrder==1?R.sortOrder=-1:(R.sortOrder="",R.sortField=""),R.page=1,_(R)},F=f=>{m("form",{state:{formode:"Ubah",id:f.id}})},x=f=>{m("form",{state:{formode:"Tambah",id:f.id}})},S=f=>{U.fire({title:"Konfirmasi",text:`Data pengumuman ${f.title} akan dihapus ?`,icon:"warning",showCancelButton:!0,confirmButtonText:"Hapus",cancelButtonText:"Batal",customClass:{confirmButton:"button button-error",cancelButton:"button button-info"}}).then(R=>{R.isConfirmed&&(ka(),l.delete(f.id).then(u=>{u.status==200&&C(),U.fire("Berhasil","Data Berhasil Dihapus","success")}).catch(u=>{var E,J;const D=Oe(u.response.data.result);U.fire("Gagal",D??((J=(E=u.response)==null?void 0:E.data)==null?void 0:J.message),"error")}))})};return e.jsxs(aa,{children:[e.jsx(la,{}),n&&e.jsx(ie,{pt:6,pb:3,children:e.jsxs(Me,{children:[e.jsx(ie,{px:3,pt:3,lineHeight:1,children:e.jsxs(w,{container:!0,direction:"row",justifyContent:"space-between",alignItems:"center",className:"mb-5",children:[e.jsx(w,{item:!0,children:e.jsxs(le,{variant:"h5",fontWeight:"medium",children:["Daftar ",r]})}),ge(r,"is_create")&&e.jsx(w,{item:!0,children:e.jsxs(_e,{variant:"gradient",color:"info",onClick:x,children:[e.jsx(Ea,{size:"1em"}),e.jsx("p",{className:"ml-2",children:"Buat Baru"})]})})]})}),e.jsx("div",{className:"overflow-auto",children:e.jsxs("div",{className:"table p-10 min-w-full",children:[e.jsx("div",{className:"flex items-center justify-end mb-1",children:e.jsx(pa,{config:I,handleClick:y})}),e.jsxs("table",{className:"w-full text-sm text-left !text-gray-700 dark:text-gray-400 table-bordered",children:[e.jsx("thead",{className:"text-xs text-gray-500 uppercase border-b-2 mb-1",children:e.jsxs("tr",{children:[e.jsx(q,{text:"No",className:"flex justify-center"}),e.jsx(q,{text:"Tujuan Hak Akses",sortField:"role",sortOrder:I.sortOrder,config:I,handleClick:()=>o("role")}),e.jsx(q,{text:"Judul",sortField:"title",sortOrder:I.sortOrder,config:I,handleClick:()=>o("title")}),e.jsx(q,{text:"Terbit",sortField:"is_published",sortOrder:I.sortOrder,config:I,handleClick:()=>o("is_published")}),e.jsx(q,{text:"Tanggal Dibuat",sortField:"created_at",sortOrder:I.sortOrder,config:I,handleClick:()=>o("created_at")}),e.jsx(q,{text:"Aksi",className:"justify-center min-w-[2rem]"})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{className:"border-b border-slate-300",children:[e.jsx("td",{}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"role",onSearch:k,placeholder:"Tujuan Hak Akses",type:"input"})}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"title",onSearch:k,placeholder:"Judul",type:"input"})}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"is_published",onSearch:k,placeholder:"Terbit",type:"select",selectOption:Jp})}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"created_at",onSearch:k,placeholder:"Tanggal Dibuat",type:"input",isDate:!0})}),e.jsx("td",{})]}),p?e.jsx("tr",{children:e.jsx("td",{colSpan:9,children:e.jsx(ia,{})})}):e.jsx(e.Fragment,{}),O.length?O.map((f,R)=>{var u;return e.jsxs("tr",{className:"border-b border-slate-300",children:[e.jsx("td",{className:"text-center px-6 py-6",children:f.no}),e.jsx("td",{className:" max-w-[9rem] px-6 py-6",children:e.jsx("div",{className:"flex-wrap",children:e.jsx("ul",{children:(u=f.announce_roles)==null?void 0:u.map(D=>{var E;return e.jsx("li",{children:(E=D==null?void 0:D.roles)==null?void 0:E.name},D==null?void 0:D.id)})})})}),e.jsx("td",{className:" max-w-[9rem] px-6 py-6",children:e.jsx("div",{className:"flex-wrap",children:f.title})}),e.jsx("td",{className:" max-w-[9rem] px-6 py-6",children:e.jsx("div",{className:"flex-wrap",children:f.is_published?e.jsx(be,{badgeContent:"YA",color:"success",container:!0}):e.jsx(be,{badgeContent:"TIDAK",color:"secondary",container:!0})})}),e.jsx("td",{className:" max-w-[9rem] px-6 py-6",children:e.jsx("div",{className:"flex-wrap",children:zs(f.created_at)})}),e.jsxs("td",{className:"px-1 text-right w-[2rem]",children:[" ",f.action," "]})]},R)}):e.jsx(e.Fragment,{})]})]}),e.jsxs("nav",{className:"flex items-center justify-between p-4","aria-label":"Table navigation",children:[e.jsx("span",{className:"text-sm text-gray-400",children:V.from&&`Menampilkan ${Se(V.from)} sampai ${Se(V.to)} dari ${Se(V.total)} entri`}),e.jsx(xa,{currentPage:I.page,lastPage:z,displayCount:5,handleClick:b})]})]})})]})}),e.jsx(ua,{})]})};fa().shape({roles:vs().min(1,"Hak Akses harus dipilih").required("Hak Akses harus dipilih"),theme:ze().required("Warna Tema harus diisi"),title:ze().required("Judul harus diisi"),description:ze().required("Isi Pengumuman harus diisi"),is_published:Zu().required(),published_at:ze().test("is_required","Waktu Terbit wajib diisi",function(r){const s=this.parent.is_published;return s===!1||s===!0&&r})});const Id=({theme:r="primary",title:s,description:n})=>{var i,l,m;const t={primary:{color:"#005957",backgroundColor:"#bddfe6",borderColor:"#005957"},success:{color:"#325b00",backgroundColor:ba.badgeColors.success.background,borderColor:"#325b00"},warning:{color:"#7e6300",backgroundColor:ba.badgeColors.warning.background,borderColor:"#7e6300"},danger:{color:ba.error.focus,backgroundColor:"#ffd9d9",borderColor:ba.error.focus},info:{color:"#02495e",backgroundColor:ba.badgeColors.info.background,borderColor:"#02495e"}};return e.jsxs("div",{className:"border rounded-lg p-5 shadow-lg",style:{color:(i=t[r])==null?void 0:i.color,backgroundColor:(l=t[r])==null?void 0:l.backgroundColor,borderColor:(m=t[r])==null?void 0:m.borderColor},children:[e.jsx("h1",{className:"font-bold text-xl md:text-2xl",children:s}),e.jsx("div",{className:"mt-4",children:n})]})},pk=({value:r,onChange:s})=>{const n="Pengumuman",[t,i]=a.useState(!1),l=JSON.parse(Le.getItem("users")),m=new Dd,p=ga(),B=ha(),[K,W]=a.useState(!1),[z,T]=a.useState(!0),[L,$]=a.useState([]),[M,H]=a.useState(null),[V,A]=a.useState([]),[G,X]=a.useState(!1),[O,I]=a.useState([]),[_,C]=a.useState({formode:p.state.formode,id:p.state.id??0,organisasi_id:l.organisasi_id,public_organisasi_id:l.public_organisasi_id,user_id:l==null?void 0:l.id,theme:"primary",is_published:!1,published_at:void 0}),k="";a.useEffect(()=>{_.formode=="Tambah"&&i(ge(n,"is_create",!0)),_.formode=="Ubah"&&(U.showLoading(),b().then(()=>{i(ge(n,"is_update",!0))}))},[_.formode,_.id]);const b=async()=>{await m.detail(_.id).then(f=>{var u,D;let R=f;if(R){const E=(u=R==null?void 0:R.announce_roles)==null?void 0:u.map(J=>J==null?void 0:J.role_id);C(J=>({...J,...R,roles:E})),I((D=R==null?void 0:R.announce_roles)==null?void 0:D.map(J=>J==null?void 0:J.roles))}}).catch(f=>{var u,D;const R=Oe(f.response.data.result);U.fire("Gagal",R??((D=(u=f.response)==null?void 0:u.data)==null?void 0:D.message),"error")}).finally(()=>U.close())},{data:y,isLoading:o,refetch:F}=ds({refetchOnWindowFocus:!1,queryKey:[Sf],queryFn:()=>m.select({type:"theme"}).then(f=>f.data.result)}),x=f=>{console.log("Data yang akan dikirim ke backend:",f),T(!1),f.id?m.put(f.id,f).then(R=>{var u,D,E;U.fire((u=R.data)!=null&&u.success?"Berhasil":"Gagal",(D=R.data)==null?void 0:D.message,(E=R.data)!=null&&E.success?"success":"warning"),R.data.success&&S()}).catch(R=>{var D,E;const u=Oe(R.response.data.result);U.fire("Gagal",u??((E=(D=R.response)==null?void 0:D.data)==null?void 0:E.message),"error")}).finally(()=>T(!0)):m.post(f).then(R=>{var u,D,E;U.fire((u=R.data)!=null&&u.success?"Berhasil":"Gagal",(D=R.data)==null?void 0:D.message,(E=R.data)!=null&&E.success?"success":"warning"),R.data.success&&S()}).catch(R=>{var D,E;const u=Oe(R.response.data.result);U.fire("Gagal",u??((E=(D=R.response)==null?void 0:D.data)==null?void 0:E.message),"error")}).finally(()=>T(!0))},S=()=>{B(k+"/pengumuman")};return e.jsxs(aa,{children:[e.jsx(la,{}),t&&e.jsx(e.Fragment,{children:e.jsx(ie,{pt:6,pb:3,children:e.jsxs(Me,{children:[e.jsx(ie,{px:3,pt:3,lineHeight:1,children:e.jsxs(w,{container:!0,direction:"row",justifyContent:"space-between",alignItems:"center",children:[e.jsx(w,{item:!0,children:e.jsxs(le,{variant:"h5",fontWeight:"medium",children:[_.formode," ",n]})}),e.jsx(w,{item:!0,children:e.jsxs(_e,{variant:"gradient",color:"secondary",onClick:S,children:[e.jsx(za,{size:"1.5em",className:"me-2"}),_.formode!="Lihat"?"Batal":"Kembali"]})})]})}),e.jsx("div",{className:"flex flex-col-reverse md:flex-row md:justify-between",children:e.jsx(ca,{initialValues:_,onSubmit:x,validateOnChange:!0,enableReinitialize:!0,children:e.jsxs(da,{id:"form",className:"w-full ",children:[e.jsx(w,{mt:2,children:e.jsxs("div",{className:"px-6 flex flex-col gap-8",children:[e.jsx("div",{className:"w-full md:w-1/2",children:e.jsx(ce,{name:"roles",children:({field:f,form:R,meta:u})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Tujuan Hak Akses",required:!0,error:u.error&&u.touched}),e.jsx(ra,{url:"pengguna/role",callbackChange:D=>{R.setFieldValue("roles",D.length?D.map(E=>E.id):null),I(D)},selectedData:O,keyValue:["id","name"],placeholder:"Pilih Tujuan Hak Akses...",className:"text-sm",menuPortalTarget:null,isMulti:!0,optionParam:{"filters[status][value]":"Aktif","filters[name][value]":"","filters[guard_name][value]":"","filters[group_role.nama][value]":"","filters[tag][value]":""}}),e.jsx(ue,{text:u.error,error:u.error&&u.touched})]})})}),e.jsxs("div",{children:[e.jsx(de,{text:"Warna Tema",required:!0}),e.jsx("div",{className:"w-full",children:e.jsx(ce,{name:"theme",children:({field:f,form:R,meta:u})=>e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-6",children:[y==null?void 0:y.map(D=>e.jsx("div",{className:"flex w-full",children:e.jsxs("label",{className:"flex items-center w-full",children:[e.jsx("input",{...f,type:"radio",className:"form-radio h-5 w-5 text-indigo-600 mr-4",checked:(f==null?void 0:f.value)==D,onChange:()=>{R.setFieldValue("theme",D)},disabled:K}),e.jsx("div",{className:"w-full",children:e.jsx(Id,{theme:D,title:"Judul",description:"Deskripsi"})})]})},D)),e.jsx(ue,{text:u.error,error:u.error&&u.touched})]})})})]}),e.jsx("div",{className:"col-span-2 md:col-span-1",children:e.jsx(ce,{name:"title",children:({field:f,form:R,meta:u})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Judul",required:!0,error:u.error&&u.touched}),e.jsx(Ye,{...f,type:"text",placeholder:"Masukkan judul pengumuman",error:u.error&&u.touched}),e.jsx(ue,{text:u.error,error:u.error&&u.touched})]})})}),e.jsx("div",{className:"mx-3",children:e.jsx(ce,{name:"is_published",children:({field:f,form:R,meta:u})=>e.jsxs(e.Fragment,{children:[e.jsx(Li,{control:e.jsx(vi,{checked:f==null?void 0:f.value,onChange:(D,E)=>{R.setFieldValue("is_published",E),E&&R.setFieldValue("published_at",oa().format("YYYY-MM-DDTHH:mm"))}}),label:"Terbitkan pengumuman ini"}),e.jsx(ue,{text:u.error,error:u.error&&u.touched})]})})}),e.jsx("div",{children:e.jsx(ce,{name:"published_at",children:({field:f,form:R,meta:u})=>{var D;return((D=R.values)==null?void 0:D.is_published)&&e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Waktu Terbit",required:!0,error:u.error&&u.touched}),e.jsx("input",{...f,className:`w-full md:w-fit px-3 py-2 border rounded-md focus:outline-none 
                                      focus:ring focus:border-lightblue focus:shadow-lightblue`,type:"datetime-local",id:"date-input"}),e.jsx(ue,{text:u.error,error:u.error&&u.touched})]})}})}),e.jsx("div",{children:e.jsx(ce,{name:"description",children:({field:f,form:R,meta:u})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Isi Pengumuman",required:!0,error:u.error&&u.touched}),e.jsx(dh,{apiKey:void 0,tinymceScriptSrc:"/tinymce/js/tinymce/tinymce.min.js",value:(f==null?void 0:f.value)||"",init:{height:500,menubar:!1,plugins:["advlist autolink lists link image charmap print preview anchor","searchreplace visualblocks code fullscreen","insertdatetime media table paste code help wordcount"],toolbar:"undo redo | formatselect | bold italic backcolor |                                                 alignleft aligncenter alignright alignjustify |                                                 bullist numlist outdent indent | removeformat | help",branding:!1},onEditorChange:D=>{R.setFieldValue("description",D)}}),e.jsx(ue,{text:u.error,error:u.error&&u.touched})]})})})]})}),e.jsx(w,{mt:2,children:e.jsx("div",{className:"p-3 flex justify-end items-center w-full gap-5 mb-10",children:!K&&e.jsx(Je,{submit:z,color:"success",formId:"form",text:_.formode=="Tambah"?"Simpan":"Ubah",type:"submit"})})})]})})})]})})})]})},gk="/assets/info-Ch-GAD5I.png",fk=()=>e.jsx("div",{style:{backgroundImage:`url(${gk})`,backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPositionX:"center",width:"100%",height:"100vh"}});Z.oneOf(["white","primary","secondary","info","success","warning","error","dark"]),Z.PropTypes.shape({fontWeight:Z.oneOf(["light","regular","medium","bold"]),text:Z.string}),Z.oneOfType([Z.string,Z.number]).isRequired,Z.shape({color:Z.oneOf(["primary","secondary","info","success","warning","error","dark","white"]),text:Z.oneOfType([Z.string,Z.number])}),Z.shape({color:Z.oneOf(["primary","secondary","info","success","warning","error","dark"]),component:Z.node.isRequired}).isRequired,Z.oneOf(["right","left"]);Z.string.isRequired,Z.oneOfType([Z.string,Z.number]),Z.string,Z.bool;Z.string.isRequired,Z.arrayOf(Z.object);const jk=fs(tu)(({theme:r={},ownerState:s})=>{var z,T,L,$,M,H,V,A;const{palette:n={},functions:t={}}=r,{color:i,value:l,variant:m}=s,{text:p={main:"#67748e"},gradients:B={}}=n,{linearGradient:K}=t;let W;return m==="gradient"?W=B[i]?K?K((z=B[i])==null?void 0:z.main,(T=B[i])==null?void 0:T.state):`linear-gradient(310deg, ${((L=B[i])==null?void 0:L.main)||"#17c1e8"}, ${(($=B[i])==null?void 0:$.state)||"#3ce7ff"})`:K?K(((M=B.info)==null?void 0:M.main)||"#17c1e8",((H=B.info)==null?void 0:H.state)||"#3ce7ff"):"linear-gradient(310deg, #17c1e8, #3ce7ff)":W=((V=n[i])==null?void 0:V.main)||((A=n.info)==null?void 0:A.main)||"#17c1e8",{"& .MuiLinearProgress-bar":{background:W,width:`${l}%`,color:p.main}}}),kk=a.forwardRef(({variant:r="contained",color:s="info",value:n=0,label:t=!1,...i},l)=>e.jsxs(e.Fragment,{children:[t&&e.jsxs(le,{variant:"button",fontWeight:"medium",color:"text",children:[n,"%"]}),e.jsx(jk,{...i,ref:l,variant:"determinate",value:n,ownerState:{color:s,value:n,variant:r}})]}));kk.propTypes={variant:Z.oneOf(["contained","gradient"]),color:Z.oneOf(["primary","secondary","info","success","warning","error","light","dark"]),value:Z.number,label:Z.bool};Z.oneOf(["primary","secondary","info","success","warning","error","dark"]),Z.shape({color:Z.oneOf(["primary","secondary","info","success","warning","error","dark"]).isRequired,component:Z.node.isRequired}).isRequired,Z.string.isRequired,Z.shape({content:Z.string.isRequired,percentage:Z.number.isRequired}).isRequired;Z.oneOf(["primary","secondary","info","success","warning","error","dark"]),Z.string.isRequired,Z.oneOfType([Z.string,Z.node]),Z.objectOf(Z.oneOfType([Z.array,Z.object])).isRequired,Z.arrayOf(Z.object);Z.string,Z.oneOfType([Z.string,Z.node]),Z.oneOfType([Z.string,Z.number]),Z.objectOf(Z.array).isRequired;Z.objectOf(Z.any);const mr="https://api.arsip.go.id/master/api/",Et="https://api.arsip.go.id/user/api/",Sn="https://api.arsip.go.id/arsip/api/",Gr="https://api.arsip.go.id/naskah-keluar/api/",Ys="https://api.arsip.go.id/naskah-masuk/api/";class ns{constructor(){ae(this,"getAnnouncement",async s=>{const n=Ce.serializeObjectToQueryString(s);return await se.get(`${Et}dashboard/announcement?${n}`).then(l=>l)});ae(this,"getInstansiCount",async s=>{const n=Ce.serializeObjectToQueryString(s);return await se.get(`${Et}dashboard/total-instansi-aktif?${n}`).then(l=>l)});ae(this,"getUnitKerjaAktifCount",async s=>{const n=Ce.serializeObjectToQueryString(s);return await se.get(`${Et}dashboard/total-unit-kerja-aktif?${n}`).then(l=>l)});ae(this,"getPenggunaAktifCount",async s=>{const n=Ce.serializeObjectToQueryString(s);return await se.get(`${Et}dashboard/total-pengguna-aktif?${n}`).then(l=>l)});ae(this,"getPenggunaInAktifCount",async s=>{const n=Ce.serializeObjectToQueryString(s);return await se.get(`${Et}dashboard/total-pengguna-inaktif?${n}`).then(l=>l)});ae(this,"getJabatanAktifCount",async s=>{const n=Ce.serializeObjectToQueryString(s);return await se.get(`${Et}dashboard/total-jabatan-aktif?${n}`).then(l=>l)});ae(this,"getPertumbuhanUserCount",async s=>{const n=Ce.serializeObjectToQueryString(s);return await se.get(`${Et}dashboard?${n}`).then(l=>l)});ae(this,"getKlasifikasiAktifCount",async s=>{const n=Ce.serializeObjectToQueryString(s);return await se.get(`${mr}dashboard/total-klasifikasi-aktif?${n}`).then(l=>l)});ae(this,"getKlasifikasiKeamananCount",async s=>{const n=Ce.serializeObjectToQueryString(s);return await se.get(`${mr}dashboard/total-klasifikasi-keamanan?${n}`).then(l=>l)});ae(this,"getTemplateNaskahCount",async s=>{const n=Ce.serializeObjectToQueryString(s);return await se.get(`${mr}dashboard/total-template-naskah?${n}`).then(l=>l)});ae(this,"getJenisNaskahAktifCount",async s=>{const n=Ce.serializeObjectToQueryString(s);return await se.get(`${mr}dashboard/total-jenis-naskah-dinas-aktif?${n}`).then(l=>l)});ae(this,"getSifatNaskahAktifCount",async s=>{const n=Ce.serializeObjectToQueryString(s);return await se.get(`${mr}dashboard/total-sifat-naskah-dinas-aktif?${n}`).then(l=>l)});ae(this,"getInstruksiDisposisiAktifCount",async s=>{const n=Ce.serializeObjectToQueryString(s);return await se.get(`${mr}dashboard/total-intruksi-disposisi-aktif?${n}`).then(l=>l)});ae(this,"getDataCount",async s=>{const n=Ce.serializeObjectToQueryString(s);return await se.get(`${Sn}dashboard?${n}`).then(l=>l)});ae(this,"getTotalNaskahKeluarCount",async s=>{const n=Ce.serializeObjectToQueryString(s);return await se.get(`${Gr}dashboard/total-naskah-keluar?${n}`).then(l=>l)});ae(this,"getTotalNaskahMasukCount",async s=>{const n=Ce.serializeObjectToQueryString(s);return await se.get(`${Ys}dashboard/total-naskah-masuk?${n}`).then(l=>l)});ae(this,"getTotalNaskahNasionalCount",async s=>{const n=Ce.serializeObjectToQueryString(s);return await se.get(`${Sn}dashboard/total-naskah-nasional?${n}`).then(l=>l)});ae(this,"getTotalNaskahTindakLanjutCount",async s=>{const n=Ce.serializeObjectToQueryString(s);return await se.get(`${Ys}dashboard/total-naskah-tindak-lanjut?${n}`).then(l=>l)});ae(this,"getTotalNaskahDisposisiCount",async s=>{const n=Ce.serializeObjectToQueryString(s);return await se.get(`${Ys}dashboard/total-naskah-disposisi?${n}`).then(l=>l)});ae(this,"getTotalNaskahKoordinasiCount",async s=>{const n=Ce.serializeObjectToQueryString(s);return await se.get(`${Ys}dashboard/total-naskah-koordinasi?${n}`).then(l=>l)});ae(this,"getTotalNaskahArahanCount",async s=>{const n=Ce.serializeObjectToQueryString(s);return await se.get(`${Ys}dashboard/total-naskah-arahan?${n}`).then(l=>l)});ae(this,"getTotalBerkasAktifCount",async s=>{const n=Ce.serializeObjectToQueryString(s);return await se.get(`${Sn}dashboard/total-berkas-aktif?${n}`).then(l=>l)});ae(this,"getTtdNaskahCount",async s=>{const n=Ce.serializeObjectToQueryString(s);return await se.get(`${Gr}dashboard/ttd-naskah?${n}`).then(l=>l)});ae(this,"getVerifikasiNaskahCount",async s=>{const n=Ce.serializeObjectToQueryString(s);return await se.get(`${Gr}dashboard/verifikasi-naskah?${n}`).then(l=>l)});ae(this,"getNaskahKeluarCount",async s=>{const n=Ce.serializeObjectToQueryString(s);return await se.get(`${Gr}dashboard/naskah-keluar?${n}`).then(l=>l)});ae(this,"getNaskahMasukCount",async s=>{const n=Ce.serializeObjectToQueryString(s);return await se.get(`${Ys}dashboard/naskah-masuk?${n}`).then(l=>l)});ae(this,"getNaskahDiberkaskanCount",async s=>{const n=Ce.serializeObjectToQueryString(s);return await se.get(`${Sn}dashboard/naskah-diberkaskan?${n}`).then(l=>l)});ae(this,"getLogNaskahKeluarCount",async s=>{const n=Ce.serializeObjectToQueryString(s);return await se.get(`${Gr}dashboard/log-naskah-keluar?${n}`).then(l=>l)});ae(this,"getLogNaskahMasukCount",async s=>{const n=Ce.serializeObjectToQueryString(s);return await se.get(`${Ys}dashboard/log-naskah-masuk?${n}`).then(l=>l)});ae(this,"getNaskahDisposisiCount",async s=>{const n=Ce.serializeObjectToQueryString(s);return await se.get(`${Ys}dashboard/naskah-disposisi?${n}`).then(l=>l)});ae(this,"getNaskahKoordinasiCount",async s=>{const n=Ce.serializeObjectToQueryString(s);return await se.get(`${Ys}dashboard/naskah-koordinasi?${n}`).then(l=>l)});ae(this,"getNaskahArahanCount",async s=>{const n=Ce.serializeObjectToQueryString(s);return await se.get(`${Ys}dashboard/naskah-arahan?${n}`).then(l=>l)});ae(this,"getNaskahTembusanCount",async s=>{const n=Ce.serializeObjectToQueryString(s);return await se.get(`${Ys}dashboard/naskah-tembusan?${n}`).then(l=>l)})}}function Ia({title:r={fontWeight:"medium",text:""},percentage:s={},color:n="#344767",count:t,icon:i,loading:l=!1}){return e.jsx(Me,{children:e.jsx(ie,{bgColor:"white",variant:"gradient",p:2,children:e.jsxs("div",{className:"grid grid-cols-12 items-center justify-between",children:[e.jsx("div",{className:"col-span-3",children:e.jsx("div",{style:{backgroundColor:n||"#344767"},className:"w-16 h-16 rounded-2xl flex justify-center items-center drop-shadow-lg text-white",children:i!=null&&i.component?e.jsx(Ss,{fontSize:"large",color:"inherit",children:i.component}):e.jsx("div",{className:"text-4xl",children:i})})}),e.jsxs("div",{className:"col-span-9 text-center ml-6",children:[e.jsx(le,{variant:r.variant,color:"text",opacity:n==="white"?.7:1,textTransform:"capitalize",fontWeight:r.fontWeight,children:r.text}),l?e.jsx("div",{className:"flex justify-center items-center p-2",children:e.jsx(rs,{color:"secondary",className:"flex-shrink-0 w-3 h-3"})}):e.jsxs("div",{children:[typeof t=="number"?e.jsx("p",{className:`font-bold ${Number(t)>=1e6?"text-lg":"text-2xl"}`,children:typeof t=="number"?Se(t):"-"}):typeof t=="string"&&e.jsx("p",{className:"font-bold text-lg",children:t}),e.jsx(le,{variant:"button",color:(s==null?void 0:s.color)||"success",fontWeight:"bold",children:(s==null?void 0:s.text)||""})]})]})]})})})}Ia.propTypes={color:Z.string,title:Z.PropTypes.shape({fontWeight:Z.oneOf(["light","regular","medium","bold"]),text:Z.string}),count:Z.oneOfType([Z.string,Z.number]),percentage:Z.shape({color:Z.oneOf(["primary","secondary","info","success","warning","error","dark","white"]),text:Z.oneOfType([Z.string,Z.number])}),icon:Z.oneOfType([Z.element,Z.shape({color:Z.oneOf(["primary","secondary","info","success","warning","error","dark"]),component:Z.node.isRequired})]).isRequired};const bk=({params:r})=>{const s=new ns,[n,t]=a.useState(null),[i,l]=a.useState(!1);a.useEffect(()=>{r!=null&&r.user_id&&m()},[r==null?void 0:r.user_id]);const m=async()=>{l(!0),await s.getTtdNaskahCount(r).then(p=>{const B=p==null?void 0:p.data.result;t(B)}).catch(p=>{console.log({error:p}),p.response.status==404&&t([])}).finally(()=>l(!1))};return e.jsx(w,{item:!0,xs:12,children:e.jsxs(Me,{style:{backgroundColor:"#fff"},children:[e.jsx(w,{container:!0,direction:"row",justifyContent:"flex-start",mt:5,children:e.jsx(w,{item:!0,xs:12,mb:3,children:e.jsx(le,{variant:"h5",align:"center",color:"secondary",children:"Tandatangan Naskah"})})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-3 px-6 mb-6",children:[e.jsx(va,{to:{pathname:"/pembuatan-naskah-keluar/tandatangan-naskah",search:"?statusTT=TOLAK"},children:e.jsx(Ia,{color:"#F53939",title:{text:"Ditolak",fontWeight:"medium",variant:"button"},count:n==null?void 0:n.ditolak,icon:{component:"cancel"},loading:i})}),e.jsx(va,{to:{pathname:"/pembuatan-naskah-keluar/tandatangan-naskah",search:"?statusTT=DIPERBAIKI"},children:e.jsx(Ia,{color:"#67748e",title:{text:"Diperbaiki",fontWeight:"medium",variant:"button"},count:n==null?void 0:n.diperbaiki,icon:e.jsx(Oo,{}),loading:i})}),e.jsx(va,{to:{pathname:"/pembuatan-naskah-keluar/tandatangan-naskah",search:"?statusTT=BELUM"},children:e.jsx(Ia,{color:"#FFA318",title:{text:"Belum Ditandatangani",fontWeight:"medium",variant:"button"},count:n==null?void 0:n.belumDitandatangani,icon:e.jsx(Ks,{}),loading:i})}),e.jsx(va,{to:{pathname:"/pembuatan-naskah-keluar/tandatangan-naskah",search:"?statusKirim=BELUM&statusTT=SETUJU"},children:e.jsx(Ia,{color:"#67748E",title:{text:"Belum Dikirim",fontWeight:"medium",variant:"button"},count:n==null?void 0:n.belumDikirim,icon:e.jsx(rt,{}),loading:i})})]})]})})},_k=({params:r})=>{const s=new ns,[n,t]=a.useState(null),[i,l]=a.useState(!1);a.useEffect(()=>{r!=null&&r.user_id&&m()},[r==null?void 0:r.user_id]);const m=async()=>{l(!0),await s.getNaskahKeluarCount(r).then(p=>{const B=p==null?void 0:p.data.result;t(B)}).catch(p=>{console.log({error:p}),p.response.status==404&&t([])}).finally(()=>l(!1))};switch(r==null?void 0:r.group_role_id){case 4:return e.jsx(w,{item:!0,xs:12,md:6,children:e.jsxs(Me,{style:{backgroundColor:"#fff"},children:[e.jsx(w,{container:!0,direction:"row",justifyContent:"flex-start",mt:5,children:e.jsx(w,{item:!0,xs:12,mb:3,children:e.jsx(le,{variant:"h5",align:"center",color:"secondary",children:"Naskah Keluar"})})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-3 px-6 mb-6",children:[e.jsx(va,{to:{pathname:"/pembuatan-naskah-keluar/naskah-keluar",search:"?statusKirim=BELUM"},children:e.jsx(Ia,{color:"#FFA318",title:{text:"Belum Dikirim",fontWeight:"medium",variant:"button"},count:n==null?void 0:n.belumDikirim,icon:e.jsx(rt,{}),loading:i})}),e.jsx(va,{to:{pathname:"/pembuatan-naskah-keluar/naskah-keluar",search:"?statusVerif=DITOLAK"},children:e.jsx(Ia,{color:"#F53939",title:{text:"Ditolak",fontWeight:"medium",variant:"button"},count:n==null?void 0:n.ditolak,icon:e.jsx(Ku,{}),loading:i})})]})]})});default:return e.jsx(w,{item:!0,xs:12,children:e.jsxs(Me,{style:{backgroundColor:"#fff",marginBottom:24},children:[e.jsx(w,{container:!0,direction:"row",justifyContent:"flex-start",mt:5,children:e.jsx(w,{item:!0,xs:12,mb:3,children:e.jsx(le,{variant:"h5",align:"center",color:"secondary",children:"Naskah Keluar"})})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-none lg:grid-flow-col lg:grid-rows-2 gap-3 px-6 mb-6",children:[e.jsx(va,{to:{pathname:"/pembuatan-naskah-keluar/naskah-keluar",search:"?statusVerif=BELUM"},children:e.jsx(Ia,{color:"#FFA318",title:{text:"Belum Diverifikasi",fontWeight:"medium",variant:"button"},count:n==null?void 0:n.belumDiverifikasi,icon:e.jsx(Bo,{}),loading:i})}),e.jsx(va,{to:{pathname:"/pembuatan-naskah-keluar/naskah-keluar",search:"?statusVerif=SETUJU"},children:e.jsx(Ia,{color:"#6AD616",title:{text:"Sudah Diverifikasi",fontWeight:"medium",variant:"button"},count:n==null?void 0:n.sudahDiverifikasi,icon:e.jsx(Mu,{}),loading:i})}),e.jsx("hr",{className:"md:col-span-2 lg:hidden my-2 "}),e.jsx(va,{to:{pathname:"/pembuatan-naskah-keluar/naskah-keluar",search:"?statusTT=BELUM"},children:e.jsx(Ia,{color:"#FFA318",title:{text:"Belum Diberi Tandatangan",fontWeight:"medium",variant:"button"},count:n==null?void 0:n.belumDiberiTandatangan,icon:e.jsx(Ks,{}),loading:i})}),e.jsx(va,{to:{pathname:"/pembuatan-naskah-keluar/naskah-keluar",search:"?statusTT=SETUJU"},children:e.jsx(Ia,{color:"#6AD616",title:{text:"Sudah Diberi Tandatangan",fontWeight:"medium",variant:"button"},count:n==null?void 0:n.sudahDiberiTandatangan,icon:e.jsx(Ks,{}),loading:i})}),e.jsx("hr",{className:"md:col-span-2 lg:hidden my-2 "}),e.jsx(va,{to:{pathname:"/pembuatan-naskah-keluar/naskah-keluar",search:"?statusKirim=BELUM"},children:e.jsx(Ia,{color:"#67748E",title:{text:"Belum Dikirim",fontWeight:"medium",variant:"button"},count:n==null?void 0:n.belumDikirim,icon:e.jsx(rt,{}),loading:i})}),e.jsx(va,{to:{pathname:"/pembuatan-naskah-keluar/naskah-keluar",search:"?statusKirim=KIRIM"},children:e.jsx(Ia,{color:"#17C1E8",title:{text:"Sudah Dikirim",fontWeight:"medium",variant:"button"},count:n==null?void 0:n.sudahDikirim,icon:e.jsx(rt,{}),loading:i})})]})]})})}},yk=({params:r})=>{var M,H,V,A;const s=new ns,[n,t]=a.useState(null),[i,l]=a.useState(!1),[m,p]=a.useState(!0),[B,K]=a.useState(!0);a.useEffect(()=>{r!=null&&r.user_id&&W()},[r==null?void 0:r.user_id]);const W=async()=>{l(!0),await s.getNaskahDiberkaskanCount(r).then(G=>{const X=G==null?void 0:G.data.result;t(X)}).catch(G=>{console.log({error:G}),G.response.status==404&&t([])}).finally(()=>l(!1))},[z,T]=a.useState(0),[L,$]=a.useState(0);return a.useEffect(()=>{if(n){const G=n.naskahKeluar.sudahDiberkaskan/(n.naskahKeluar.sudahDiberkaskan+n.naskahKeluar.belumDiberkaskan)*100;T(Math.round(G*100)/100);const X=n.naskahMasuk.sudahDiberkaskan/(n.naskahMasuk.sudahDiberkaskan+n.naskahMasuk.belumDiberkaskan)*100;$(Math.round(X*100)/100)}},[n]),a.useEffect(()=>{z&&p(!1),L&&K(!1)},[z,L]),e.jsx(w,{item:!0,xs:12,children:e.jsxs(Me,{style:{backgroundColor:"#fff",marginBottom:24},children:[e.jsx(w,{container:!0,direction:"row",justifyContent:"flex-start",mt:5,children:e.jsx(w,{item:!0,xs:12,mb:3,children:e.jsx(le,{variant:"h5",align:"center",color:"secondary",children:"Pemberkasan Naskah"})})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-none md:grid-flow-col md:grid-rows-3 gap-3 m-6",children:[e.jsx(va,{to:{pathname:"/pembuatan-naskah-keluar/naskah-keluar",search:"?statusBerkas=BELUM"},children:e.jsx(Ia,{color:"#67748E",title:{text:"Naskah Keluar Belum Diberkaskan",fontWeight:"medium",variant:"button"},count:(M=n==null?void 0:n.naskahKeluar)==null?void 0:M.belumDiberkaskan,icon:{component:"unarchive"},loading:i})}),e.jsx(va,{to:{pathname:"/pembuatan-naskah-keluar/naskah-keluar",search:"?statusBerkas=SUDAH"},children:e.jsx(Ia,{color:"#17C1E8",title:{text:"Naskah Keluar Sudah Diberkaskan",fontWeight:"medium",variant:"button"},count:(H=n==null?void 0:n.naskahKeluar)==null?void 0:H.sudahDiberkaskan,icon:{component:"unarchive"},loading:i})}),(r==null?void 0:r.group_role_id)<4&&e.jsx(Ia,{color:"#6AD616",title:{text:"Persentase Naskah Keluar Yang Sudah Diberkaskan",fontWeight:"medium",variant:"button"},count:`${z}%`,icon:{component:"unarchive"},loading:m}),e.jsx("hr",{className:"md:hidden my-2 "}),e.jsx(va,{to:{pathname:"/penerimaan-naskah-masuk/naskah-dinas-masuk",search:"?statusBerkas=BELUM"},children:e.jsx(Ia,{color:"#67748E",title:{text:"Naskah Masuk Belum Diberkaskan",fontWeight:"medium",variant:"button"},count:(V=n==null?void 0:n.naskahMasuk)==null?void 0:V.belumDiberkaskan,icon:{component:"archive"},loading:i})}),e.jsx(va,{to:{pathname:"/penerimaan-naskah-masuk/naskah-dinas-masuk",search:"?statusBerkas=SUDAH"},children:e.jsx(Ia,{color:"#17C1E8",title:{text:"Naskah Masuk Sudah Diberkaskan",fontWeight:"medium",variant:"button"},count:(A=n==null?void 0:n.naskahMasuk)==null?void 0:A.sudahDiberkaskan,icon:{component:"archive"},loading:i})}),(r==null?void 0:r.group_role_id)<4&&e.jsx(Ia,{color:"#6AD616",title:{text:"Persentase Naskah Masuk Yang Sudah Diberkaskan",fontWeight:"medium",variant:"button"},count:`${L}%`,icon:{component:"archive"},loading:B})]})]})})},Nk=({params:r})=>{const s=new ns,[n,t]=a.useState(null),[i,l]=a.useState(!1);a.useEffect(()=>{r!=null&&r.user_id&&m()},[r==null?void 0:r.user_id]);const m=async()=>{l(!0),await s.getVerifikasiNaskahCount(r).then(p=>{const B=p==null?void 0:p.data.result;t(B)}).catch(p=>{console.log({error:p}),p.response.status==404&&t([])}).finally(()=>l(!1))};return e.jsx(w,{item:!0,xs:12,children:e.jsxs(Me,{style:{backgroundColor:"#fff"},children:[e.jsx(w,{container:!0,direction:"row",justifyContent:"flex-start",mt:5,children:e.jsx(w,{item:!0,xs:12,mb:3,children:e.jsx(le,{variant:"h5",align:"center",color:"secondary",children:"Verifikasi Naskah"})})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-3 px-6 mb-6",children:[e.jsx(va,{to:{pathname:"/pembuatan-naskah-keluar/verifikasi-naskah",search:"?statusVerif=BELUM"},children:e.jsx(Ia,{color:"#FFA318",title:{text:"Belum Diverifikasi",fontWeight:"medium",variant:"button"},count:n==null?void 0:n.belumDiverifikasi,icon:e.jsx(Bo,{}),loading:i})}),e.jsx(va,{to:{pathname:"/pembuatan-naskah-keluar/verifikasi-naskah",search:"?statusVerif=DITOLAK"},children:e.jsx(Ia,{color:"#F53939",title:{text:"Ditolak",fontWeight:"medium",variant:"button"},count:n==null?void 0:n.ditolak,icon:e.jsx(zu,{}),loading:i})}),e.jsx(va,{to:{pathname:"/pembuatan-naskah-keluar/verifikasi-naskah",search:"?statusVerif=DIPERBAIKI"},children:e.jsx(Ia,{color:"#67748e",title:{text:"Diperbaiki",fontWeight:"medium",variant:"button"},count:n==null?void 0:n.diperbaiki,icon:e.jsx(Oo,{}),loading:i})})]})]})})},wk=({params:r})=>{const s=new ns,[n,t]=a.useState(null),[i,l]=a.useState(!1);a.useEffect(()=>{r!=null&&r.user_id&&m()},[r==null?void 0:r.user_id]);const m=async()=>{l(!0),await s.getNaskahMasukCount(r).then(p=>{const B=p==null?void 0:p.data.result;t(B)}).catch(p=>{console.log({error:p}),p.response.status==404&&t([])}).finally(()=>l(!1))};return e.jsx(w,{item:!0,xs:12,md:6,children:e.jsxs(Me,{style:{backgroundColor:"#fff"},children:[e.jsx(w,{container:!0,direction:"row",justifyContent:"flex-start",mt:5,children:e.jsx(w,{item:!0,xs:12,mb:3,children:e.jsx(le,{variant:"h5",align:"center",color:"secondary",children:"Naskah Masuk"})})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2  gap-3 px-6 mb-6",children:[e.jsx(va,{to:{pathname:"/penerimaan-naskah-masuk/naskah-dinas-masuk",search:"?statusBaca=BELUM"},children:e.jsx(Ia,{color:"#FFA318",title:{text:"Belum Dibaca",fontWeight:"medium",variant:"button"},count:n==null?void 0:n.belumDibaca,icon:e.jsx(an,{}),loading:i})}),e.jsx(va,{to:{pathname:"/penerimaan-naskah-masuk/naskah-dinas-masuk",search:"?statusTL=BELUM"},children:e.jsx(Ia,{color:"#67748E",title:{text:"Belum Ditindaklanjuti",fontWeight:"medium",variant:"button"},count:n==null?void 0:n.belumDitindaklanjuti,icon:{component:"arrow_outward"},loading:i})})]})]})})},Sk=({params:r})=>{const s=new ns,[n,t]=a.useState(null),[i,l]=a.useState(!1);a.useEffect(()=>{r!=null&&r.user_id&&m()},[r==null?void 0:r.user_id]);const m=async()=>{l(!0),await s.getNaskahDisposisiCount(r).then(p=>{const B=p==null?void 0:p.data.result;t(B)}).catch(p=>{console.log({error:p}),p.response.status==404&&t([])}).finally(()=>l(!1))};return e.jsx(w,{item:!0,xs:12,md:6,children:e.jsxs(Me,{style:{backgroundColor:"#fff"},children:[e.jsx(w,{container:!0,direction:"row",justifyContent:"flex-start",mt:5,children:e.jsx(w,{item:!0,xs:12,mb:3,children:e.jsx(le,{variant:"h5",align:"center",color:"secondary",children:"Naskah Disposisi"})})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-3 px-6 mb-6",children:[e.jsx(va,{to:{pathname:"/penerimaan-naskah-masuk/disposisi",search:"?statusBaca=BELUM"},children:e.jsx(Ia,{color:"#FFA318",title:{text:"Belum Dibaca",fontWeight:"medium",variant:"button"},count:n==null?void 0:n.belumDibaca,icon:e.jsx(an,{}),loading:i})}),e.jsx(va,{to:{pathname:"/penerimaan-naskah-masuk/disposisi",search:"?statusTL=BELUM"},children:e.jsx(Ia,{color:"#67748E",title:{text:"Belum Ditindaklanjuti",fontWeight:"medium",variant:"button"},count:n==null?void 0:n.belumDitindaklanjuti,icon:{component:"arrow_outward"},loading:i})})]})]})})},vk=({params:r})=>{const s=new ns,[n,t]=a.useState(null),[i,l]=a.useState(!1);a.useEffect(()=>{r!=null&&r.user_id&&m()},[r==null?void 0:r.user_id]);const m=async()=>{l(!0),await s.getNaskahKoordinasiCount(r).then(p=>{const B=p==null?void 0:p.data.result;t(B)}).catch(p=>{console.log({error:p}),p.response.status==404&&t([])}).finally(()=>l(!1))};return e.jsx(w,{item:!0,xs:12,md:6,children:e.jsxs(Me,{style:{backgroundColor:"#fff"},children:[e.jsx(w,{container:!0,direction:"row",justifyContent:"flex-start",mt:5,children:e.jsx(w,{item:!0,xs:12,mb:3,children:e.jsx(le,{variant:"h5",align:"center",color:"secondary",children:"Naskah Koordinasi"})})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-3 px-6 mb-6",children:[e.jsx(va,{to:{pathname:"/penerimaan-naskah-masuk/koordinasi",search:"?statusBaca=BELUM"},children:e.jsx(Ia,{color:"#FFA318",title:{text:"Belum Dibaca",fontWeight:"medium",variant:"button"},count:n==null?void 0:n.belumDibaca,icon:e.jsx(an,{}),loading:i})}),e.jsx(va,{to:{pathname:"/penerimaan-naskah-masuk/koordinasi",search:"?statusTL=BELUM"},children:e.jsx(Ia,{color:"#67748E",title:{text:"Belum Ditindaklanjuti",fontWeight:"medium",variant:"button"},count:n==null?void 0:n.belumDitindaklanjuti,icon:{component:"arrow_outward"},loading:i})})]})]})})},Pk=({params:r})=>{const s=new ns,[n,t]=a.useState(null),[i,l]=a.useState(!1);a.useEffect(()=>{r!=null&&r.user_id&&m()},[r==null?void 0:r.user_id]);const m=async()=>{l(!0),await s.getNaskahArahanCount(r).then(p=>{const B=p==null?void 0:p.data.result;t(B)}).catch(p=>{console.log({error:p}),p.response.status==404&&t([])}).finally(()=>l(!1))};return e.jsx(w,{item:!0,xs:12,md:6,children:e.jsxs(Me,{style:{backgroundColor:"#fff"},children:[e.jsx(w,{container:!0,direction:"row",justifyContent:"flex-start",mt:5,children:e.jsx(w,{item:!0,xs:12,mb:3,children:e.jsx(le,{variant:"h5",align:"center",color:"secondary",children:"Naskah Arahan"})})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-3 px-6 mb-6",children:[e.jsx(va,{to:{pathname:"/penerimaan-naskah-masuk/arahan",search:"?statusBaca=BELUM"},children:e.jsx(Ia,{color:"#FFA318",title:{text:"Belum Dibaca",fontWeight:"medium",variant:"button"},count:n==null?void 0:n.belumDibaca,icon:e.jsx(an,{}),loading:i})}),e.jsx(va,{to:{pathname:"/penerimaan-naskah-masuk/arahan",search:"?statusTL=BELUM"},children:e.jsx(Ia,{color:"#67748E",title:{text:"Belum Ditindaklanjuti",fontWeight:"medium",variant:"button"},count:n==null?void 0:n.belumDitindaklanjuti,icon:{component:"arrow_outward"},loading:i})})]})]})})},Ck=({params:r})=>{const s=new ns,[n,t]=a.useState(null),[i,l]=a.useState(!1);a.useEffect(()=>{r!=null&&r.user_id&&m()},[r==null?void 0:r.user_id]);const m=async()=>{l(!0),await s.getNaskahTembusanCount(r).then(p=>{const B=p==null?void 0:p.data.result;t(B)}).catch(p=>{console.log({error:p}),p.response.status==404&&t([])}).finally(()=>l(!1))};return e.jsx(w,{item:!0,xs:12,md:6,children:e.jsxs(Me,{style:{backgroundColor:"#fff"},children:[e.jsx(w,{container:!0,direction:"row",justifyContent:"flex-start",mt:5,children:e.jsx(w,{item:!0,xs:12,mb:3,children:e.jsx(le,{variant:"h5",align:"center",color:"secondary",children:"Naskah Tembusan"})})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2  gap-3 px-6 mb-6",children:[e.jsx(va,{to:{pathname:"/penerimaan-naskah-masuk/naskah-tembusan",search:"?statusBaca=BELUM"},children:e.jsx(Ia,{color:"#FFBA52",title:{text:"Belum Dibaca",fontWeight:"medium",variant:"button"},count:n==null?void 0:n.belumDibaca,icon:e.jsx(an,{}),loading:i})}),e.jsx(va,{to:{pathname:"/penerimaan-naskah-masuk/naskah-tembusan",search:"?statusTL=BELUM"},children:e.jsx(Ia,{color:"#67748E",title:{text:"Belum Ditindaklanjuti",fontWeight:"medium",variant:"button"},count:n==null?void 0:n.belumDitindaklanjuti,icon:{component:"arrow_outward"},loading:i})})]})]})})},Tk=({params:r})=>{const s=new ns,[n,t]=a.useState(null),[i,l]=a.useState(!1);a.useEffect(()=>{r!=null&&r.user_id&&m()},[r==null?void 0:r.user_id]);const m=async()=>{l(!0),await s.getLogNaskahMasukCount(r).then(p=>{const B=p==null?void 0:p.data.result;t(B)}).catch(p=>{console.log({error:p}),p.response.status==404&&t([])}).finally(()=>l(!1))};return e.jsx(w,{item:!0,xs:12,mb:3,children:e.jsxs(Me,{style:{backgroundColor:"#fff",marginBottom:24},children:[e.jsx(w,{container:!0,direction:"row",justifyContent:"flex-start",mt:5,children:e.jsx(w,{item:!0,xs:12,mb:3,children:e.jsx(le,{variant:"h5",align:"center",color:"secondary",children:"Log Naskah Masuk"})})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 px-6 mb-6",children:[e.jsx(va,{to:{pathname:"/penerimaan-naskah-masuk/log-naskah-masuk",search:"?statusKirim=BELUM"},children:e.jsx(Ia,{color:"#67748E",title:{text:"Belum Dikirim",fontWeight:"medium",variant:"button"},count:n==null?void 0:n.belumDikirim,icon:e.jsx(rt,{}),loading:i})}),e.jsx(va,{to:{pathname:"/penerimaan-naskah-masuk/log-naskah-masuk",search:"?statusKirim=KIRIM"},children:e.jsx(Ia,{color:"#17C1E8",title:{text:"Sudah Dikirim",fontWeight:"medium",variant:"button"},count:n==null?void 0:n.sudahDikirim,icon:e.jsx(rt,{}),loading:i})})]})]})})},Fk=({params:r})=>{const s=new ns,[n,t]=a.useState(0),[i,l]=a.useState(!1);a.useEffect(()=>{r!=null&&r.user_id&&m()},[r==null?void 0:r.user_id]);const m=async()=>{l(!0),await s.getInstansiCount(r).then(p=>{const B=p==null?void 0:p.data.result;t(B)}).catch(p=>{console.log({error:p}),p.response.status==404&&t(0)}).finally(()=>l(!1))};return e.jsx(w,{item:!0,xs:12,md:6,lg:4,children:e.jsx(va,{to:{pathname:"/instansi/daftar-instansi",search:"?status=AKTIF"},children:e.jsx(Ia,{color:"#17C1E8",title:{text:"Jumlah Instansi",fontWeight:"medium",variant:"h6"},count:n,icon:{component:"corporate_fare"},loading:i})})})},Dk=({params:r})=>{const s=new ns,[n,t]=a.useState(0),[i,l]=a.useState(!1);a.useEffect(()=>{r!=null&&r.user_id&&m()},[r==null?void 0:r.user_id]);const m=async()=>{l(!0),await s.getPenggunaAktifCount(r).then(p=>{const B=p==null?void 0:p.data.result;t(B)}).catch(p=>{console.log({error:p}),p.response.status==404&&t(0)}).finally(()=>l(!1))};return e.jsx(w,{item:!0,xs:12,md:6,lg:4,children:e.jsx(va,{className:(r==null?void 0:r.group_role_id)==1?"cursor-default":"cursor-pointer",to:(r==null?void 0:r.group_role_id)!==1&&{pathname:"/pengguna/daftar-pengguna",search:"?status=AKTIF"},children:e.jsx(Ia,{color:"#6AD616",title:{text:"Pengguna Aktif",fontWeight:"medium",variant:"h6"},count:n,icon:{component:"supervised_user_circle_rounded"},loading:i})})})},Ik=({params:r})=>{const s=new ns,[n,t]=a.useState(0),[i,l]=a.useState(!1);a.useEffect(()=>{r!=null&&r.user_id&&m()},[r==null?void 0:r.user_id]);const m=async()=>{l(!0),await s.getPenggunaInAktifCount(r).then(p=>{const B=p==null?void 0:p.data.result;t(B)}).catch(p=>{console.log({error:p}),p.response.status==404&&t(0)}).finally(()=>l(!1))};return e.jsx(w,{item:!0,xs:12,md:6,lg:4,children:e.jsx(va,{className:(r==null?void 0:r.group_role_id)==1?"cursor-default":"cursor-pointer",to:(r==null?void 0:r.group_role_id)!==1&&{pathname:"/pengguna/daftar-pengguna",search:"?status=NON-AKTIF"},children:e.jsx(Ia,{color:"#F53939",title:{text:"Pengguna Non-Aktif",fontWeight:"medium",variant:"h6"},count:n,icon:{component:"supervised_user_circle_rounded"},loading:i})})})},Ak=({params:r})=>{const s=new ns,[n,t]=a.useState(0),[i,l]=a.useState(!1);a.useEffect(()=>{r!=null&&r.user_id&&m()},[r==null?void 0:r.user_id]);const m=async()=>{l(!0),await s.getUnitKerjaAktifCount(r).then(p=>{const B=p==null?void 0:p.data.result;t(B)}).catch(p=>{console.log({error:p}),p.response.status==404&&t(0)}).finally(()=>l(!1))};return e.jsx(w,{item:!0,xs:12,md:6,lg:4,children:e.jsx(va,{to:{pathname:"/instansi/unit-kerja",search:"?status=AKTIF"},children:e.jsx(Ia,{color:"#17C1E8",title:{text:"Unit Kerja Aktif",fontWeight:"medium",variant:"h6"},count:n,icon:{component:"corporate_fare"},loading:i})})})},Ok=({params:r})=>{const s=new ns,[n,t]=a.useState(0),[i,l]=a.useState(!1);a.useEffect(()=>{r!=null&&r.user_id&&m()},[r==null?void 0:r.user_id]);const m=async()=>{l(!0),await s.getJabatanAktifCount(r).then(p=>{const B=p==null?void 0:p.data.result;t(B)}).catch(p=>{console.log({error:p}),p.response.status==404&&t(0)}).finally(()=>l(!1))};return e.jsx(w,{item:!0,xs:12,md:6,lg:4,children:e.jsx(va,{to:{pathname:"/pengguna/daftar-jabatan",search:"?status=AKTIF"},children:e.jsx(Ia,{color:"#252F40",title:{text:"Jabatan Aktif",fontWeight:"medium",variant:"h6"},count:n,icon:{component:"work"},loading:i})})})},Bk=({params:r})=>{const s=new ns,[n,t]=a.useState(0),[i,l]=a.useState(!1);a.useEffect(()=>{r!=null&&r.user_id&&m()},[r==null?void 0:r.user_id]);const m=async()=>{l(!0),await s.getKlasifikasiAktifCount(r).then(p=>{const B=p==null?void 0:p.data.result;t(B)}).catch(p=>{console.log({error:p}),p.response.status==404&&t(0)}).finally(()=>l(!1))};return e.jsx(w,{item:!0,xs:12,md:4,children:e.jsx(va,{to:{pathname:"/klasifikasi-arsip/klasifikasi",search:"?status=AKTIF"},children:e.jsx(Ia,{color:"#17C1E8",title:{text:"Klasifikasi Arsip Aktif",fontWeight:"medium",variant:"h6"},count:n,icon:{component:"workspaces"},loading:i})})})},Lk=({params:r})=>{const s=new ns,[n,t]=a.useState(0),[i,l]=a.useState(!1);a.useEffect(()=>{r!=null&&r.user_id&&m()},[r==null?void 0:r.user_id]);const m=async()=>{l(!0),await s.getKlasifikasiKeamananCount(r).then(p=>{const B=p==null?void 0:p.data.result;t(B)}).catch(p=>{console.log({error:p}),p.response.status==404&&t(0)}).finally(()=>l(!1))};return e.jsx(w,{item:!0,xs:12,md:6,lg:4,children:e.jsx(va,{to:{pathname:"/klasifikasi-keamanan"},children:e.jsx(Ia,{color:"#FFA318",title:{text:"Klasifikasi Keamanan",fontWeight:"medium",variant:"h6"},count:n,icon:{component:"security"},loading:i})})})},$k=({params:r})=>{const s=new ns,[n,t]=a.useState(0),[i,l]=a.useState(!1);a.useEffect(()=>{r!=null&&r.user_id&&m()},[r==null?void 0:r.user_id]);const m=async()=>{l(!0),await s.getTemplateNaskahCount(r).then(p=>{const B=p==null?void 0:p.data.result;t(B)}).catch(p=>{console.log({error:p}),p.response.status==404&&t(0)}).finally(()=>l(!1))};return e.jsx(w,{item:!0,xs:12,md:6,lg:4,children:e.jsx(va,{to:{pathname:"/tata-naskah-dinas/template-naskah"},children:e.jsx(Ia,{color:"#252F40",title:{text:"Template Naskah",fontWeight:"medium",variant:"h6"},count:n,icon:{component:"dashboard"},loading:i})})})},Rk=({params:r})=>{const s=new ns,[n,t]=a.useState(0),[i,l]=a.useState(!1);a.useEffect(()=>{r!=null&&r.user_id&&m()},[r==null?void 0:r.user_id]);const m=async()=>{l(!0),await s.getJenisNaskahAktifCount(r).then(p=>{const B=p==null?void 0:p.data.result;t(B)}).catch(p=>{console.log({error:p}),p.response.status==404&&t(0)}).finally(()=>l(!1))};return e.jsx(w,{item:!0,xs:12,md:4,children:e.jsx(va,{to:{pathname:"/tata-naskah-dinas/jenis-naskah-dinas",search:"?status=AKTIF"},children:e.jsx(Ia,{color:"#6AD616",title:{text:"Jenis Naskah Dinas Aktif",fontWeight:"medium",variant:"h6"},count:n,icon:{component:"interests"},loading:i})})})},Ek=({params:r})=>{const s=new ns,[n,t]=a.useState(0),[i,l]=a.useState(!1);a.useEffect(()=>{r!=null&&r.user_id&&m()},[r==null?void 0:r.user_id]);const m=async()=>{l(!0),await s.getSifatNaskahAktifCount(r).then(p=>{const B=p==null?void 0:p.data.result;t(B)}).catch(p=>{console.log({error:p}),p.response.status==404&&t(0)}).finally(()=>l(!1))};return e.jsx(w,{item:!0,xs:12,md:4,children:e.jsx(va,{to:{pathname:"/tata-naskah-dinas/sifat-naskah-dinas",search:"?status=AKTIF"},children:e.jsx(Ia,{color:"#67748E",title:{text:"Sifat Naskah Dinas Aktif",fontWeight:"medium",variant:"h6"},count:n,icon:{component:"grade"},loading:i})})})},Mk=({params:r})=>{const s=new ns,[n,t]=a.useState(0),[i,l]=a.useState(!1);a.useEffect(()=>{r!=null&&r.user_id&&m()},[r==null?void 0:r.user_id]);const m=async()=>{l(!0),await s.getTotalBerkasAktifCount(r).then(p=>{const B=p==null?void 0:p.data.result;t(B)}).catch(p=>{console.log({error:p}),p.response.status==404&&t(0)}).finally(()=>l(!1))};return e.jsx(w,{item:!0,xs:12,md:6,lg:4,children:e.jsx(va,{to:{pathname:"/pemeliharaan-arsip/pemberkasan-arsip-aktif"},children:e.jsx(Ia,{color:"#17C1E8",title:{text:"Berkas Aktif",fontWeight:"medium",variant:"h6"},count:n,icon:{component:"folder"},loading:i})})})},Kk=({params:r})=>{const s=new ns,[n,t]=a.useState(0),[i,l]=a.useState(0),[m,p]=a.useState(0),[B,K]=a.useState(!1),[W,z]=a.useState(!1),[T,L]=a.useState(!1);a.useEffect(()=>{r!=null&&r.user_id&&($(),M())},[r==null?void 0:r.user_id]);const $=async()=>{K(!0),await s.getTotalNaskahKeluarCount(r).then(H=>{const V=H==null?void 0:H.data.result;t(V)}).catch(H=>{console.log({error:H}),H.response.status==404&&t(0)}).finally(()=>K(!1))},M=async()=>{z(!0),await s.getTotalNaskahMasukCount(r).then(H=>{const V=H==null?void 0:H.data.result;l(V)}).catch(H=>{console.log({error:H}),H.response.status==404&&l(0)}).finally(()=>z(!1))};return a.useEffect(()=>{L(!0),!B&&!W&&(p(n+i),L(!1))},[n,i,B,W]),e.jsxs(e.Fragment,{children:[e.jsx(w,{item:!0,xs:12,md:6,lg:4,children:e.jsx(Ia,{color:"#67748E",title:{text:"Jumlah Naskah Keluar",fontWeight:"medium",variant:"h6"},count:n,icon:{component:"arrow_circle_up_rounded"},loading:B})}),e.jsx(w,{item:!0,xs:12,md:6,lg:4,children:e.jsx(Ia,{color:"#252F40",title:{text:"Jumlah Naskah Masuk",fontWeight:"medium",variant:"h6"},count:i,icon:{component:"arrow_circle_down_rounded"},loading:W})}),e.jsx(w,{item:!0,xs:12,md:6,lg:4,children:e.jsx(Ia,{color:"#17C1E8",title:{text:`Jumlah Naskah ${(r==null?void 0:r.group_role_id)==1?"Nasional":"Instansi"}`,fontWeight:"medium",variant:"h6"},count:m,icon:{component:"flag_circle_rounded"},loading:T})})]})},zk=({params:r})=>{const s=new ns,[n,t]=a.useState({}),[i,l]=a.useState(!1);a.useEffect(()=>{r!=null&&r.user_id&&m()},[r==null?void 0:r.user_id]);const m=async()=>{l(!0),await s.getTotalNaskahTindakLanjutCount(r).then(p=>{const B=p==null?void 0:p.data.result;t(B)}).catch(p=>{console.log({error:p}),p.response.status==404&&t({})}).finally(()=>l(!1))};return e.jsxs(e.Fragment,{children:[e.jsx(w,{item:!0,xs:12,md:6,lg:4,children:e.jsx(Ia,{color:"#FFA318",title:{text:"Jumlah Tindak Lanjut",fontWeight:"medium",variant:"h6"},count:(n==null?void 0:n.semuaTindakLanjut)??0,icon:{component:"edit_note"},loading:i})}),e.jsx(w,{item:!0,xs:12,md:6,lg:4,children:e.jsx(Ia,{color:"#FFA318",title:{text:"Jumlah Disposisi",fontWeight:"medium",variant:"h6"},count:(n==null?void 0:n.disposisi)??0,icon:e.jsx(ru,{}),loading:i})}),e.jsx(w,{item:!0,xs:12,md:6,lg:4,children:e.jsx(Ia,{color:"#FFA318",title:{text:"Jumlah Koordinasi",fontWeight:"medium",variant:"h6"},count:(n==null?void 0:n.koordinasi)??0,icon:e.jsx(nu,{}),loading:i})}),e.jsx(w,{item:!0,xs:12,md:6,lg:4,children:e.jsx(Ia,{color:"#FFA318",title:{text:"Jumlah Arahan",fontWeight:"medium",variant:"h6"},count:(n==null?void 0:n.arahan)??0,icon:e.jsx(iu,{}),loading:i})})]})};function Uk(){const r=JSON.parse(Le.getItem("users"));ha();const[s,n]=a.useState(!1),[t,i]=a.useState(!1),[l,m]=a.useState(null),[p,B]=a.useState(null),[K,W]=a.useState(null),z=new ns,T=new ld,[L,$]=a.useState({user_id:(r==null?void 0:r.id)??null,group_role_id:(r==null?void 0:r.group_role)??null,role_id:(r==null?void 0:r.role)??null,public_organisasi_id:(r==null?void 0:r.public_organisasi_id)??null,organisasi_id:(r==null?void 0:r.organisasi_id)??null}),[M,H]=a.useState(null),[V,A]=a.useState(!1),[G,X]=a.useState(!1),O=async()=>{n(!0),await T.get().then(k=>{const b=k.data.result.url;W(b)}).catch(k=>{}).finally(()=>{n(!1),i(!0)})};a.useEffect(()=>{L.user_id&&(O(),B(r==null?void 0:r.desc_instansi),m(r==null?void 0:r.group_role))},[L]);const{data:I,isLoading:_,refetch:C}=ds({queryKey:[wf,r==null?void 0:r.group_role],enabled:!!r,queryFn:()=>z.getAnnouncement({limit:5}).then(k=>k.data.result)});return e.jsxs(aa,{children:[e.jsx(la,{}),t?e.jsx(ie,{py:3,children:e.jsxs(w,{container:!0,direction:"row",justifyContent:"center",spacing:3,children:[_?e.jsx(rs,{color:"secondary"}):(I==null?void 0:I.length)>0&&I.map(k=>e.jsx(w,{item:!0,xs:12,children:e.jsx(Id,{theme:k==null?void 0:k.theme,title:k==null?void 0:k.title,description:Di(k==null?void 0:k.description)})},k==null?void 0:k.id)),e.jsxs(w,{item:!0,xs:12,children:[e.jsx(Me,{xs:12,style:{backgroundColor:"#fff"},children:e.jsxs(w,{item:!0,xs:12,container:!0,direction:"row",justifyContent:"center",p:3,children:[K&&e.jsx(w,{item:!0,xs:3,md:2,mb:3,children:e.jsx("img",{src:K,alt:"logo instansi"})}),e.jsx(w,{item:!0,xs:12,children:e.jsx(le,{align:"center",variant:"h3",children:p??"-"})})]})}),!V&&e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx(Je,{submit:!0,color:"info",onClick:()=>A(!0),text:"Tampilkan Statistik"})})]}),V&&e.jsxs(e.Fragment,{children:[ge("Daftar Instansi","is_read",!1)&&e.jsx(Fk,{params:L}),ge("Daftar Pengguna","is_read",!1)&&e.jsx(Dk,{params:L}),r.group_role==1&&e.jsx(Ik,{params:L}),(r.group_role==1||r.group_role==2)&&e.jsx(Kk,{params:L}),((r==null?void 0:r.group_role)==1||(r==null?void 0:r.group_role)==2)&&e.jsx(zk,{params:L}),ge("Unit Kerja","is_read",!1)&&e.jsx(Ak,{params:L}),r.group_role!==1&&ge("Jabatan","is_read",!1)&&e.jsx(Ok,{params:L}),ge("Klasifikasi","is_read",!1)&&e.jsx(Bk,{params:L}),r.group_role!==1&&ge("Klasifikasi Keamanan","is_read",!1)&&e.jsx(Lk,{params:L}),ge("Template Naskah","is_create",!1)&&e.jsx($k,{params:L}),ge("Jenis Naskah Dinas","is_read",!1)&&e.jsx(Rk,{params:L}),ge("Sifat Naskah Dinas","is_read",!1)&&e.jsx(Ek,{params:L}),(r==null?void 0:r.group_role)!=4&&ge("Berkas Aktif","is_read",!1)&&e.jsx(Mk,{params:L}),ge("Daftar Naskah Keluar","is_read",!1)&&e.jsx(_k,{params:L}),ge("Naskah Dinas Masuk","is_read",!1)&&e.jsx(wk,{params:L}),ge("Tandatangan Naskah","is_read",!1)&&e.jsx(bk,{params:L}),ge("Verifikasi Naskah","is_read",!1)&&e.jsx(Nk,{params:L}),ge("Daftar Disposisi","is_read",!1)&&e.jsx(Sk,{params:L}),ge("Naskah Koordinasi Masuk","is_read",!1)&&e.jsx(vk,{params:L}),ge("Arahan Masuk","is_read",!1)&&e.jsx(Pk,{params:L}),ge("Daftar Tembusan","is_read",!1)&&e.jsx(Ck,{params:L}),ge("Berkas Aktif","is_read",!1)&&e.jsx(yk,{params:L}),ge("Log Naskah Masuk","is_read",!1)&&e.jsx(Tk,{params:L})]})]})}):e.jsx("div",{className:"flex justify-center p-10",children:e.jsx(rs,{color:"secondary"})}),e.jsx(ua,{})]})}const ss="https://api.arsip.go.id/arsip/api/",Vk="https://api.arsip.go.id/master/api/",qk="https://api.arsip.go.id/master/api/",Hk="https://api.arsip.go.id/naskah-masuk/api/";class ot{constructor(){ae(this,"getPaging",async s=>{const n=Ce.serializeObjectToQueryString(s);return await se.get(`${ss}berkas/berkas-aktif/list?${n}`).then(l=>l)});ae(this,"printTindakLanjut",async s=>{se.get(`${Hk}naskah-dinas/tindak-lanjut/print/${s}`,{responseType:"blob",headers:{"Content-Type":"application/pdf"}})});ae(this,"getPagingGabungan",async s=>{const n=Ce.serializeObjectToQueryString(s);return await se.get(`${ss}berkas/berkas-aktif/list-gabungan?${n}`).then(l=>l)});ae(this,"getPagingItems",async s=>{const n=Ce.serializeObjectToQueryString(s);return await se.get(`${ss}berkas/berkas-aktif/list-item-berkas?${n}`).then(l=>l)});ae(this,"getDetail",async s=>await se.get(`${ss}berkas/berkas-aktif/${s}`).then(i=>i));ae(this,"post",async s=>await se.post(`${ss}berkas/berkas-aktif`,s).then(i=>i));ae(this,"put",async(s,n)=>await se.put(`${ss}berkas/berkas-aktif/${s}`,n).then(l=>l));ae(this,"delete",async s=>await se.delete(`${ss}berkas/berkas-aktif/${s}`).then(i=>i));ae(this,"deleteNaskah",async s=>await se.post(`${ss}berkas/berkas-naskah/destroy`,s).then(i=>i));ae(this,"select",async s=>{const n=new URLSearchParams(s).toString();return(await se.get(`${ss}berkas/berkas-aktif?${n}`).then(m=>m)).data.result.data});ae(this,"closeBerkas",async s=>await se.post(`${ss}berkas/berkas-aktif/close`,s).then(i=>i));ae(this,"getNomorBerkas",async s=>{const n=Ce.serializeObjectToQueryString(s);return await se.get(`${ss}berkas/berkas-aktif/get-nomor-berkas?${n}`).then(l=>l)});ae(this,"getKategoriBerkas",async s=>{const n=Ce.serializeObjectToQueryString(s);return await se.get(`${Vk}kategori-berkas/list/byids?${n}`).then(l=>l)});ae(this,"getLaporan",async s=>{const n=Ce.serializeObjectToQueryString(s);return await se.get(`${ss}laporan/arsip-aktif?${n}`).then(l=>l)});ae(this,"downloadLaporanPdf",async s=>{const n=Ce.serializeObjectToQueryString(s);return await se.get(`${ss}laporan/arsip-aktif/pdf?${n}`,{responseType:"blob",headers:{"Content-Type":"application/pdf"}}).then(l=>l)});ae(this,"downloadLaporanExcel",async s=>{const n=Ce.serializeObjectToQueryString(s);return await se.get(`${ss}laporan/arsip-aktif/excel?${n}`,{responseType:"blob",headers:{"Content-Type":"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}}).then(l=>l)});ae(this,"getLaporanIsi",async s=>{const n=Ce.serializeObjectToQueryString(s);return await se.get(`${ss}laporan/arsip-aktif-detail?${n}`).then(l=>l)});ae(this,"downloadLaporanIsiPdf",async s=>{const n=Ce.serializeObjectToQueryString(s);return await se.get(`${ss}laporan/arsip-aktif-detail/pdf?${n}`,{responseType:"blob",headers:{"Content-Type":"application/pdf"}}).then(l=>l)});ae(this,"downloadLaporanIsiExcel",async s=>{const n=Ce.serializeObjectToQueryString(s);return await se.get(`${ss}laporan/arsip-aktif-detail/excel?${n}`,{responseType:"blob",headers:{"Content-Type":"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}}).then(l=>l)});ae(this,"getLaporanGabungan",async s=>{const n=Ce.serializeObjectToQueryString(s);return await se.get(`${ss}laporan/arsip-gabungan?${n}`).then(l=>l)});ae(this,"downloadLaporanGabunganPdf",async s=>{const n=Ce.serializeObjectToQueryString(s);return await se.get(`${ss}laporan/arsip-gabungan/pdf?${n}`,{responseType:"blob",headers:{"Content-Type":"application/pdf"}}).then(l=>l)});ae(this,"downloadLaporanGabunganExcel",async s=>{const n=Ce.serializeObjectToQueryString(s);return await se.get(`${ss}laporan/arsip-gabungan/excel?${n}`,{responseType:"blob",headers:{"Content-Type":"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}}).then(l=>l)});ae(this,"getLaporanGabunganIsi",async s=>{const n=Ce.serializeObjectToQueryString(s);return await se.get(`${ss}laporan/arsip-gabungan-detail?${n}`).then(l=>l)});ae(this,"downloadLaporanGabunganIsiPdf",async s=>{const n=Ce.serializeObjectToQueryString(s);return await se.get(`${ss}laporan/arsip-gabungan-detail/pdf?${n}`,{responseType:"blob",headers:{"Content-Type":"application/pdf"}}).then(l=>l)});ae(this,"downloadLaporanGabunganIsiExcel",async s=>{const n=Ce.serializeObjectToQueryString(s);return await se.get(`${ss}laporan/arsip-gabungan-detail/excel?${n}`,{responseType:"blob",headers:{"Content-Type":"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}}).then(l=>l)});ae(this,"getNomor",async s=>{const n=Ce.serializeObjectToQueryString(s);return await se.get(`${qk}tatanaskah/penomoran-otomatis/get-nomor?${n}`).then(l=>l)});ae(this,"postNaskahAktif",async s=>await se.post(`${ss}berkas/registrasi-berkas-aktif/storeReg`,s,{headers:{"Content-Type":"multipart/form-data"}}).then(i=>i));ae(this,"getHistori",async s=>await se.get(`${ss}berkas/berkas-aktif/history/${s}`).then(i=>i))}}const yt="https://api.arsip.go.id/arsip/api/";class Jt{constructor(){ae(this,"requestMove",async s=>await se.post(`${yt}pemindahan/usul`,s,{headers:{"Content-Type":"multipart/form-data"}}).then(i=>i));ae(this,"getPaging",async s=>{const n=Ce.serializeObjectToQueryString(s);return await se.get(`${yt}pemindahan?${n}`).then(l=>l)});ae(this,"getPagingItems",async s=>{const n=Ce.serializeObjectToQueryString(s);return await se.get(`${yt}pemindahan/list-document?${n}`).then(l=>l)});ae(this,"getDetail",async(s,n)=>{const t=Ce.serializeObjectToQueryString(n);return await se.get(`${yt}pemindahan/show/${s}?${t}`).then(m=>m)});ae(this,"getPagingListBerkas",async s=>{const n=Ce.serializeObjectToQueryString(s);return await se.get(`${yt}pemindahan/list-berkas?${n}`).then(l=>l)});ae(this,"verifyBerkas",async s=>await se.post(`${yt}pemindahan/verifikasi-berkas`,s).then(i=>i));ae(this,"verify",async s=>await se.post(`${yt}pemindahan/verifikasi`,s).then(i=>i));ae(this,"saveBeritaAcara",async s=>await se.post(`${yt}pemindahan/save-berita-acara`,s,{headers:{"Content-Type":"multipart/form-data"}}).then(i=>i))}}fa().shape({nama:ze().required("Nama Berkas harus diisi"),klasifikasi_id:wa().min(1,"Pilih Klasifikasi").required("Klasifikasi harus dipilih")});const Ad=fa().shape({lampiran_wajib:Qa().required("Lampiran harus diisi"),desc_lampiran_wajib:ze().required("Deskripsi harus diisi"),to_group_role_id:wa().oneOf([2,3],"Tipe unit kearsipan tidak valid").required("Tipe unit kearsipan wajib diisi")}),ol=fa().shape({status:ze().required("Status wajib diisi"),deskripsi:ze().notRequired().test("deskripsi-required","Catatan wajib diisi",function(r){return this.parent.status==="SETUJU"||this.parent.status==="DITOLAK"&&r})}),Gk=fa().shape({lampiran_wajib:ze().required("Berita Acara wajib diisi"),desc_lampiran_wajib:ze().required("Deskripsi Berita Acara wajib diisi")}),ln=({lampiranList:r,setLampiranList:s,isRequiredFirst:n,requiredFileTitle:t="Dokumen Pendukung",isRequiredFileDescEditable:i=!0})=>{var p;const[l,m]=a.useState(r);return a.useEffect(()=>{n&&m(r==null?void 0:r.slice(1))},[r.length]),e.jsxs(e.Fragment,{children:[n&&e.jsxs("div",{className:"mb-8",children:[e.jsx(ce,{name:"lampiran_wajib",children:({field:B,form:K,meta:W})=>{var z,T;return e.jsxs("div",{className:"mb-3",children:[e.jsxs("div",{className:"mt-3",children:[e.jsx("div",{className:"flex justify-between w-full",children:e.jsx(de,{text:t,required:!0,error:!!W.error})}),e.jsx(le,{variant:"caption",children:"Format yang didukung: .PDF, .JPEG, .JPG, .PNG. Maksimal ukuran file 5 MB."})]}),e.jsx(et,{value:((T=(z=r==null?void 0:r[0])==null?void 0:z.file)==null?void 0:T.name)||"",isReset:!1,maxSizePerFileInMb:5,acceptedType:["application/pdf","image/jpeg","image/jpg","image/png"],notifFileTypeError:"Hanya Mendukung File .PDF, .JPEG, .JPG, .PNG",size:"small",showDeleteButton:!1,onFileSelected:L=>{let $={...r[0],file:L},M=r.map((H,V)=>V===0?$:H);s(M),K.setFieldValue("lampiran_wajib",L)}}),e.jsx(ue,{text:W.error,error:!!W.error})]})}}),e.jsx(ce,{name:"desc_lampiran_wajib",children:({field:B,form:K,meta:W})=>{var z;return e.jsxs("div",{className:"",children:[e.jsx(Ye,{type:"text",placeholder:`Masukkan Deskripsi ${t}...`,disabled:!i,value:K.values.desc_lampiran_wajib??((z=r==null?void 0:r[0])==null?void 0:z.desc),onChange:T=>{let L={...r[0],desc:T.target.value},$=r.map((M,H)=>H===0?L:M);s($),K.setFieldValue("desc_lampiran_wajib",T.target.value)}}),e.jsx(ue,{text:W.error,error:!!W.error})]})}})]}),l.length>0&&l.map((B,K)=>{var W;return e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"",children:[e.jsxs("div",{className:"mt-3",children:[e.jsxs("div",{className:"flex justify-between w-full",children:[e.jsx(de,{text:`Lampiran Tambahan ${K+1}`,required:!0}),e.jsx("button",{className:"mb-2 hover:opacity-75",type:"button",onClick:()=>{const z=l.filter(L=>(L==null?void 0:L.id)!==(B==null?void 0:B.id));m(z);const T=n?[r[0],...z]:z;s(T)},children:e.jsx(Lo,{size:20,color:"#ef4444"})})]}),e.jsx(le,{variant:"caption",children:"Format yang didukung: .PDF, .JPEG, .JPG, .PNG. Maksimal ukuran file 5 MB."})]}),e.jsx(et,{value:(W=B==null?void 0:B.file)==null?void 0:W.name,isReset:!1,maxSizePerFileInMb:5,acceptedType:["application/pdf","image/jpeg","image/jpg","image/png"],notifFileTypeError:"File Hanya Support .PDF",size:"small",showDeleteButton:!1,onFileSelected:z=>{let T={...B,file:z},L=l.map((M,H)=>H===K?T:M);m(L);const $=n?[r[0],...L]:L;s($)}})]}),e.jsx("div",{className:"",children:e.jsx(Ye,{type:"text",placeholder:`Masukkan Deskripsi Lampiran Tambahan ${K+1}...`,value:B==null?void 0:B.desc,onChange:z=>{let T={...B,desc:z.target.value},L=l.map((M,H)=>H===K?T:M);m(L);const $=n?[r[0],...L]:L;s($)}})})]},`lampiran_${K}`)}),e.jsx("div",{className:"flex justify-end w-full",children:e.jsx(_e,{color:"primary",type:"button",disabled:r.length>0?!((p=r[r.length-1])!=null&&p.file):!1,onClick:()=>{let B=r.length+1;m(K=>[...K,{id:B,file:"",desc:""}]),s(K=>[...K,{id:B,file:"",desc:""}])},children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx($o,{}),e.jsx("p",{children:"Tambah Lampiran"})]})})})]})},Wk=({open:r,onClose:s,selectedBerkas:n,fetchDaftarBerkas:t})=>{const i=new Jt,[l,m]=a.useState(!0),[p,B]=a.useState(1),[K,W]=a.useState(1),[z,T]=a.useState([]),L=10,[$,M]=a.useState(!1),[H,V]=a.useState([{id:1,file:"",desc:""}]),A={berkas_selected:[],to_group_role_id:0,description:"",lampiran_wajib:"",desc_lampiran_wajib:""};a.useEffect(()=>{const I=(p-1)*L,_=I+L,C=n==null?void 0:n.slice(I,_);T(C)},[p,n]),a.useEffect(()=>{const I=Math.ceil(n.length/L);W(I)},[n]);const G=I=>{B(I)},X=I=>{n.length>0&&H.length>0?U.fire({title:"Usul Pindah Inaktif",text:"Apakah Anda yakin ingin mengusulkan pemindahan berkas yang dipilih?",icon:"question",showCancelButton:!0,confirmButtonText:"Ya, Usulkan",cancelButtonText:"Batal",customClass:{confirmButton:"button button-success",cancelButton:"button button-info"}}).then(async _=>{if(_.isConfirmed){const C={...I,berkas_selected:n,lampirans:H.slice(1)};m(!1),await i.requestMove(C).then(k=>{k.data.success&&(t(),O(),U.fire("Berhasil","Pemindahan Berkas Berhasil Diusulkan","success"))}).catch(k=>{var y,o,F,x;const b=Oe((o=(y=k.response)==null?void 0:y.data)==null?void 0:o.result);U.fire("Gagal",b??((x=(F=k.response)==null?void 0:F.data)==null?void 0:x.message),"error")}).finally(()=>{m(!0)})}}):U.fire({title:"Oops!",text:"Anda belum memilih berkas untuk usul pemindahan ke inaktif",icon:"warning",showCancelButton:!1})},O=()=>{s(),V([{id:1,file:null,desc:""}])};return e.jsxs(Fa,{open:r,onClose:O,children:[e.jsxs("div",{children:[e.jsxs(_a,{className:"flex items-center gap-4",children:[e.jsx(Ro,{size:"1em"}),e.jsx(le,{children:"Form Pengajuan Pemindahan Arsip"})]}),e.jsx(Na,{sx:{paddingInline:"20px"},children:e.jsx(ca,{initialValues:A,onSubmit:X,validateOnChange:!0,validationSchema:Ad,children:e.jsxs(da,{id:"formPindah",className:"text-sm",children:[e.jsxs(w,{mb:2,children:[e.jsx(de,{text:"Berkas yang dipilih",required:!0}),e.jsxs("div",{className:"table min-w-full",children:[e.jsxs("table",{className:"w-full text-sm text-left !text-gray-700 dark:text-gray-400 table-bordered",children:[e.jsx("thead",{className:"text-xs text-gray-500 uppercase border-b-2 mb-1",children:e.jsxs("tr",{children:[e.jsx(q,{text:"No",className:"flex justify-center"}),e.jsx(q,{text:"Kode Klasifikasi / Nomor Berkas",className:"flex justify-center"}),e.jsx(q,{text:"Nama Berkas",className:"flex justify-center"}),e.jsx(q,{text:"Total Retensi",className:"flex justify-center"})]})}),e.jsx("tbody",{children:(z==null?void 0:z.length)>0&&z.map((I,_)=>e.jsxs("tr",{className:"border-b border-slate-300",children:[e.jsx("td",{className:" max-w-[20rem] px-6 py-2 text-center",children:_+1}),e.jsxs("td",{className:" max-w-[20rem] px-6 py-2",children:[I.klasifikasi_kode," / ",I.nomor]}),e.jsx("td",{className:" max-w-[20rem] px-6 py-2",children:I.nama}),e.jsx("td",{className:" max-w-[20rem] px-6 py-2",children:I.retensi_aktif+I.retensi_inaktif})]},I==null?void 0:I.id))})]}),e.jsx("nav",{className:"flex items-center justify-end p-4","aria-label":"Table navigation",children:e.jsx(xa,{currentPage:p,lastPage:K,displayCount:L,handleClick:G})})]})]}),e.jsx(w,{mt:5,children:e.jsx(ce,{name:"to_group_role_id",children:({field:I,form:_,meta:C})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Pilih Tipe Unit Kearsipan",required:!0,error:C.error&&C.touched}),e.jsxs("div",{className:"space-x-4 flex flex-row items-center",children:[e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{...I,type:"radio",className:"form-radio  w-4 h-4 text-blue-500 focus:ring-2 focus:ring-blue-500",checked:I.value==2,onChange:k=>{_.setFieldValue("to_group_role_id",2),k.target.checked=!0}}),e.jsx("span",{className:"text-gray-700",children:"UTAMA / UK 1"})]}),e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{...I,type:"radio",className:"form-radio  w-4 h-4 text-blue-500 focus:ring-2 focus:ring-blue-500",checked:I.value==3,onChange:k=>{_.setFieldValue("to_group_role_id",3),k.target.checked=!0}}),e.jsx("span",{className:"text-gray-700",children:"SATKER / UK 2, 3, 4"})]})]}),e.jsx(ue,{text:C.error,error:C.error&&C.touched})]})})}),e.jsx(w,{mt:5,children:e.jsx(ce,{name:"description",children:({field:I,form:_,meta:C})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Deskripsi",required:!1,error:C.error&&C.touched}),e.jsx("div",{className:"space-x-4 flex flex-row items-center",children:e.jsx(Ye,{...I,type:"text",placeholder:"Masukkan Deskripsi Pemindahan...",error:C.error&&C.touched})}),e.jsx(ue,{text:C.error,error:C.error&&C.touched})]})})}),e.jsx(w,{mb:2,mt:5,children:e.jsx(ln,{lampiranList:H,setLampiranList:V,isRequiredFirst:!0})})]})})})]}),e.jsx(ya,{children:e.jsxs(e.Fragment,{children:[e.jsx(Je,{submit:l,color:"success",formId:"formPindah",text:"Ajukan Pemindahan"}),e.jsx(_e,{color:"error",variant:"gradient",onClick:O,children:"Batal"})]})})]})},Jk=()=>{const r="Berkas Aktif",[s,n]=a.useState(!1);a.useEffect(()=>{n(ge(r,"is_read",!0))},[]);const t=JSON.parse(Le.getItem("users")),i=new ot,l=ha(),[m,p]=a.useState(!1),[B,K]=a.useState(null),[W,z]=a.useState(!1),[T,L]=a.useState([]),$=ge("Usul Pemindahan","is_create"),[M,H]=a.useState(!1),[V,A]=a.useState(!1),[G,X]=a.useState(!1),[O,I]=a.useState(null),[_,C]=a.useState(null),[k,b]=a.useState({start_at:"",end_at:""}),[y,o]=a.useState(null),[F,x]=a.useState(null),[S,f]=a.useState({start_at:"",end_at:""}),[R,u]=a.useState(null),[D,E]=a.useState(null),[J,P]=a.useState({start_at:"",end_at:""}),[h,d]=a.useState(null),[j,g]=a.useState(null),[c,v]=a.useState({start_at:"",end_at:""}),[N,Q]=a.useState(null),[re,ye]=a.useState({total:0,from:1,to:1});let xe=[];B==null?xe=[]:xe=B==null?void 0:B.map((Y,ke)=>({no:ke+re.from,id:Y.id,klasifikasi_id:Y.klasifikasi_id,nomor:Y.nomor,klasifikasi_kode:Y.klasifikasi_kode,nama:Y.nama,retensi_aktif:Y.retensi_aktif,retensi_inaktif:Y.retensi_inaktif,total_retensi:Y.retensi_aktif+Y.retensi_inaktif,tanggal_tutup:Y.tanggal_tutup,tanggal_retensi_aktif:Y.tanggal_retensi_aktif,is_pemindahan:Y.berkas_pemindahan,is_over_active:Y.tanggal_tutup&&oa()>=oa(Y==null?void 0:Y.tanggal_retensi_aktif,"DD-MM-YYYY"),kurun:Y.kurun,jumlah:Y.jumlah,created_at:Y.created_at,unit_pengolah:Y==null?void 0:Y.organisasi_nama,type:Y==null?void 0:Y.type,action:e.jsxs("div",{className:"flex gap-2 items-center justify-center w-full",children:[ge(r,"is_create")&&e.jsx(Oa,{size:"1.5em",color:"#17c1e8",onClick:()=>je(Y),className:"cursor-pointer",title:"Lihat"}),(Y==null?void 0:Y.type)=="berkas_aktif"&&e.jsx(e.Fragment,{children:!Y.tanggal_tutup||Y.status==="BUKA"?e.jsxs(e.Fragment,{children:[ge(r,"is_create")&&(t==null?void 0:t.group_role)!==4&&Y.jumlah>0&&e.jsx(Eo,{size:"1.5em",color:"#ff5722",onClick:()=>sa(Y),className:"cursor-pointer",title:"Kunci"}),ge(r,"is_update")&&e.jsx(Va,{size:"1.5em",color:"#fbcf33",onClick:()=>oe(Y),className:"cursor-pointer",title:"Ubah"}),ge(r,"is_delete")&&!Y.jumlah&&e.jsx($a,{size:"1.5em",color:"#e62e2d",onClick:()=>ee(Y),className:"cursor-pointer",title:"Hapus"})]}):Y.berkas_pemindahan?e.jsx(be,{badgeContent:"BERKAS DIUSUL PEMINDAHAN",color:"warning",container:!0}):e.jsx(be,{badgeContent:e.jsx("p",{className:"w-14 text-wrap leading-4",children:"TUTUP"}),color:"success",container:!0,title:"BERKAS SUDAH DITUTUP"})})]})}));const[fe,Ge]=a.useState({organisasi_id:t==null?void 0:t.organisasi_id,public_organisasi_id:t==null?void 0:t.public_organisasi_id,group_role_id:t==null?void 0:t.group_role,page:1,rows:10,sortField:"",sortOrder:null,search:"",filters:{kode:{value:""},nama:{value:""},type:{value:""}}});a.useEffect(()=>{$e()},[fe]);const $e=async(Y=!1)=>{Y&&(fe.page=1),p(!0),await i.getPagingGabungan(fe).then(ke=>{let De=ke.data.result;De.data&&(Q(De.last_page),K(De.data),p(!1)),p(!1),ye({...re,to:De.to,from:De.from,total:De.total})}).catch(ke=>{p(!1),ye({...re,to:0,from:!1,total:0})})},Pe=Da((Y,ke,De=null)=>{if(De){let Be=De.target;for(;Be&&Be.tagName!=="TD";)Be=Be.parentNode;if(Be&&Be.tagName==="TD"){const Fe=Be.querySelector(".clear-input"),Ke=Be.querySelector("input");ke?Fe.classList.remove("hidden"):(Fe.classList.add("hidden"),Ke.value="")}}let ta={...fe};ta.filters[Y].value=ke,ta.page=1,Ge(ta)},600),te=Y=>{let ke={...fe};ke.page=Y,Ge(ke),window.scrollTo({top:0,behavior:"smooth"})},ne=Y=>{let ke={...fe};ke.rows=Y,ke.page=1,Ge(ke)},pe=Y=>{let ke={...fe};ke.sortField=Y,fe.sortField!=Y?fe.sortOrder==""&&(ke.sortOrder=1):fe.sortOrder==1?ke.sortOrder=-1:(ke.sortOrder="",ke.sortField=""),ke.page=1,Ge(ke)},he=()=>{l("form",{state:{formode:"Tambah",id:0}})},oe=Y=>{l("form",{state:{formode:"Ubah",id:Y.id,nomor_berkas:Y.nomor}})},je=Y=>{l((Y==null?void 0:Y.type)=="berkas_aktif"?"detail":"/pemeliharaan_arsip/pemberkasan-mandiri/detail",{state:{formode:"Lihat",id:Y.id,back:"/pemeliharaan-arsip/pemberkasan-arsip-aktif"}})},Ne=()=>{const ke=`/pemeliharaan-arsip/pemberkasan-arsip-aktif/laporan-gabungan?${Ce.serializeObjectToQueryString({start_at:J==null?void 0:J.start_at,end_at:J==null?void 0:J.end_at,status:(R==null?void 0:R.value)||"",unit_kerja_id:(D==null?void 0:D.id)||""})}`;window.open(ke,"_blank","noopener,noreferrer")},Re=()=>{const ke=`/pemeliharaan-arsip/pemberkasan-arsip-aktif/laporan-gabungan-isi?${Ce.serializeObjectToQueryString({start_at:c==null?void 0:c.start_at,end_at:c==null?void 0:c.end_at,status:(h==null?void 0:h.value)||"",unit_kerja_id:(j==null?void 0:j.id)||""})}`;window.open(ke,"_blank","noopener,noreferrer")},sa=Y=>{if(!Y.penyusutan_akhir_id){U.fire("Perhatian!","Berkas belum memiliki Penyusutan Akhir. Silahkan perbaiki master Penyusutan Akhir oleh administrator.","warning");return}if(!Y.klasifikasi_keamanan_id){U.fire("Perhatian!","Berkas belum memiliki Klasifikasi Keamanan. Silahkan perbaiki master Klasifikasi Keamanan oleh administrator.","warning");return}Y.id&&U.fire({title:"Tutup Berkas",text:"Apakah Anda yakin ingin menutup Berkas ini ?. Setelah ditutup Anda tidak bisa membuka kembali dan menambah isi berkas",icon:"question",showCancelButton:!0,confirmButtonText:"Ya, Tutup",cancelButtonText:"Batal",customClass:{confirmButton:"button button-error",cancelButton:"button "}}).then(ke=>{ke.isConfirmed&&(ka(),i.closeBerkas({berkas_id:Y.id}).then(De=>{De.status==200&&($e(),U.fire("Berhasil",De.data.message,"success"))}).catch(De=>{var Be,Fe,Ke,Qe;const ta=Oe((Fe=(Be=De.response)==null?void 0:Be.data)==null?void 0:Fe.result);U.fire("Gagal",ta??((Qe=(Ke=De.response)==null?void 0:Ke.data)==null?void 0:Qe.message),"error")}))})},Te=()=>{l(""+"/proses-penyusutan/pemindahan/form",{state:{formode:"Tambah",berkas_selected:T}})},me=()=>{X(!1)},ee=Y=>{U.fire({title:"Konfirmasi",text:"Apakah Anda yakin ingin menghapus Berkas ini?",icon:"warning",showCancelButton:!0,confirmButtonText:"Hapus",cancelButtonText:"Batal",customClass:{confirmButton:"button button-error",cancelButton:"button button-info"}}).then(ke=>{ke.isConfirmed&&(ka(),i.delete(Y.id).then(De=>{De.status==200&&$e(),U.fire("Berhasil","Data Berhasil Dihapus","success")}).catch(De=>{var Be,Fe;const ta=Oe(De.response.data.result);U.fire("Gagal",ta??((Fe=(Be=De.response)==null?void 0:Be.data)==null?void 0:Fe.message),"error")}))})};return e.jsxs(aa,{children:[e.jsx(la,{}),s&&e.jsxs(e.Fragment,{children:[" ",e.jsx(ie,{pt:6,pb:3,children:e.jsxs(Me,{children:[e.jsxs(ie,{px:3,pt:3,lineHeight:1,children:[e.jsxs(w,{container:!0,direction:"row",justifyContent:"space-between",alignItems:"center",mb:4,gap:2,children:[e.jsx(w,{item:!0,children:e.jsx(le,{variant:"h5",fontWeight:"medium",children:"Daftar Berkas Aktif"})}),e.jsx("div",{className:"flex gap-2 items-center",children:ge(r,"is_create")&&e.jsx(w,{item:!0,children:e.jsxs(_e,{variant:"gradient",color:"info",onClick:he,children:[e.jsx(Ea,{size:"1em"}),e.jsx("p",{className:"ml-2",children:"Tambah Baru"})]})})})]}),(t==null?void 0:t.group_role)!==4&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-full flex justify-between mt-6",children:e.jsx(le,{variant:"h6",fontWeight:"bold",children:e.jsx("p",{children:"Laporan Berkas Aktif"})})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex flex-col 2xl:flex-row gap-4 2xl:gap-6 mb-4 mt-5 2xl:items-center 2xl:justify-between",children:[e.jsx("div",{className:"w-60",children:e.jsx(le,{variant:"body3",fontWeight:"medium",children:e.jsx("p",{className:"whitespace-nowrap",children:"Laporan Daftar"})})}),e.jsxs("div",{className:"flex flex-col lg:flex-row gap-2 items-center ",children:[e.jsx(Zs,{onDateSelected:(Y,ke)=>{P(De=>({...De,start_at:Y==null?void 0:Y.toISOString(),end_at:ke==null?void 0:ke.toISOString()}))}}),e.jsx("div",{className:"w-full mb-3 lg:mb-0",children:e.jsx(Gs,{placeholder:"Pilih Status Berkas...",options:En,isClearable:!0,isSearchable:!1,className:"text-sm whitespace-nowrap",onChange:Y=>{u(Y)},value:R})}),e.jsx(ra,{url:"organisasi/sub-oraganisasi/select-with-token",selectedData:D,keyValue:["id","nama"],callbackChange:Y=>E(Y),placeholder:"Pilih Unit Kerja...",className:"text-sm w-full mb-3 lg:mb-0 whitespace-nowrap",menuPortalTarget:null,isMulti:!1}),ge(r,"is_create",!1,!0)&&e.jsx("div",{className:"w-full lg:w-fit text-right",children:e.jsxs(_e,{variant:"gradient",color:"success",size:"small",onClick:Ne,disabled:!J.start_at||!J.end_at,children:[e.jsx(Bs,{size:"2em",className:"pe-2"}),"Tampilkan"]})})]})]}),e.jsxs("div",{className:"flex flex-col 2xl:flex-row gap-4 2xl:gap-6 mb-4 mt-5 2xl:items-center 2xl:justify-between",children:[e.jsx("div",{className:"w-60",children:e.jsx(le,{variant:"body3",fontWeight:"medium",children:e.jsx("p",{className:"whitespace-nowrap",children:"Laporan Daftar Isi"})})}),e.jsxs("div",{className:"flex flex-col lg:flex-row gap-2 items-center ",children:[e.jsx(Zs,{onDateSelected:(Y,ke)=>{v(De=>({...De,start_at:Y==null?void 0:Y.toISOString(),end_at:ke==null?void 0:ke.toISOString()}))}}),e.jsx("div",{className:"w-full mb-3 lg:mb-0",children:e.jsx(Gs,{placeholder:"Pilih Status Berkas...",options:En,isClearable:!0,isSearchable:!1,className:"text-sm whitespace-nowrap",onChange:Y=>{d(Y)},value:h})}),e.jsx(ra,{url:"organisasi/sub-oraganisasi/select-with-token",selectedData:j,keyValue:["id","nama"],callbackChange:Y=>g(Y),placeholder:"Pilih Unit kerja...",className:"text-sm w-full mb-3 lg:mb-0 whitespace-nowrap",menuPortalTarget:null,isMulti:!1}),ge(r,"is_create",!1,!0)&&e.jsx("div",{className:"w-full lg:w-fit text-right",children:e.jsxs(_e,{variant:"gradient",color:"success",size:"small",onClick:Re,disabled:!c.start_at||!c.end_at,children:[e.jsx(Bs,{size:"2em",className:"pe-2"}),"Tampilkan"]})})]})]})]})]}),$&&e.jsx("div",{className:"flex justify-end pt-4",children:e.jsxs(_e,{variant:"gradient",color:"secondary",onClick:Te,disabled:T.length<1,children:[e.jsx(Fi,{size:"1em"}),e.jsx("p",{className:"ml-2",children:"Usul Pemindahan"})]})})]}),e.jsx("div",{className:"overflow-auto",children:e.jsxs("div",{className:"table p-10 min-w-full",children:[e.jsx("div",{className:"flex justify-end mb-1",children:e.jsx(pa,{config:fe,handleClick:ne})}),e.jsxs("table",{className:"w-full text-sm text-left !text-gray-700 dark:text-gray-400 table-bordered",children:[e.jsx("thead",{className:"text-xs text-gray-500 uppercase border-b-2 mb-1",children:e.jsxs("tr",{children:[$&&e.jsx(q,{text:"#"}),e.jsx(q,{text:"No",className:"flex justify-center"}),e.jsx(q,{text:"Kode Klasifikasi / Nomor Berkas"}),e.jsx(q,{text:"Berkas",sortField:"nama",sortOrder:fe.sortOrder,config:fe,handleClick:()=>pe("nama")}),e.jsx(q,{text:"Tanggal Buat Berkas",sortField:"created_at",sortOrder:fe.sortOrder,config:fe,handleClick:()=>pe("created_at")}),e.jsx(q,{text:"Kurun Waktu",sortField:"kurun",sortOrder:fe.sortOrder,config:fe,handleClick:()=>pe("kurun")}),e.jsx(q,{text:"Jumlah Item",sortField:"jumlah",sortOrder:fe.sortOrder,config:fe,handleClick:()=>pe("jumlah")}),e.jsx(q,{text:"Akhir Retensi Aktif",sortField:"tanggal_retensi_aktif",sortOrder:fe.sortOrder,config:fe,handleClick:()=>pe("tanggal_retensi_aktif")}),e.jsx(q,{text:"Total Retensi",sortField:"retensi_aktif",sortOrder:fe.sortOrder,config:fe,handleClick:()=>pe("retensi_aktif")}),(t==null?void 0:t.group_role)===2&&e.jsx(q,{text:"Unit Pengolah",sortField:"unit_pengolah",sortOrder:fe.sortOrder,config:fe,handleClick:()=>pe("unit_pengolah")}),e.jsx(q,{text:"Jenis Berkas",sortField:"jenis_berkas",sortOrder:fe.sortOrder,config:fe,handleClick:()=>pe("jenis_berkas")}),e.jsx(q,{text:"Aksi",className:"flex justify-center min-w-[2rem]"})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{className:"border-b border-slate-300",children:[$&&e.jsx("td",{className:"max-w-[20rem] py-6"}),e.jsx("td",{className:"max-w-[20rem] py-6"}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"kode",onSearch:Pe,placeholder:"Kode Klasifikasi / Nomor Berkas",type:"input"})}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"nama",onSearch:Pe,placeholder:"Berkas",type:"input"})}),e.jsx("td",{}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2"}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2"}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2"}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2"}),(t==null?void 0:t.group_role)===2&&e.jsx("td",{}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"type",onSearch:Pe,placeholder:"Jenis Berkas",type:"select",selectOption:Qp})}),e.jsx("td",{})]}),m?e.jsx("tr",{children:e.jsx("td",{colSpan:9,children:e.jsx(ia,{})})}):e.jsx(e.Fragment,{}),xe!=null&&xe.length?xe==null?void 0:xe.map((Y,ke)=>e.jsxs("tr",{className:"border-b border-slate-300",children:[$&&e.jsx("td",{className:"max-w-[20rem] px-6 py-6",children:Y.tanggal_tutup&&Y.is_over_active&&!Y.is_pemindahan&&Y.type=="berkas_aktif"&&e.jsx("input",{type:"checkbox",className:"form-checkbox h-5 w-5 text-indigo-600",checked:T.some(De=>De.id===Y.id),onChange:De=>{if(De.target.checked){const ta={id:Y.id,klasifikasi_id:Y.klasifikasi_id,nomor:Y.nomor,klasifikasi_kode:Y.klasifikasi_kode,nama:Y.nama,retensi_aktif:Y.retensi_aktif,retensi_inaktif:Y.retensi_inaktif,tanggal_tutup:Y.tanggal_tutup,tanggal_retensi_aktif:Y.tanggal_retensi_aktif,kurun:Y.kurun,jumlah:Y.jumlah,created_at:Y.created_at};L(Be=>[...Be,ta])}else{let ta=T==null?void 0:T.filter(Be=>Be.id!==(Y==null?void 0:Y.id));L(ta)}},disabled:W})}),e.jsx("td",{className:"px-6 py-6",children:e.jsx("div",{className:"flex justify-center",children:Y.no})}),e.jsxs("td",{className:" max-w-[20rem] px-6 py-6",children:[Y.klasifikasi_kode," / ",Y.nomor]}),e.jsx("td",{className:" max-w-[20rem] px-6 py-6",children:Y.nama}),e.jsx("td",{className:" max-w-[20rem] px-6 py-6 ",children:Y.created_at?na(Y.created_at,2):"-"}),e.jsx("td",{className:" max-w-[20rem] py-6 ",children:Y.jumlah>0?e.jsx("p",{className:"px-6",children:Y.kurun}):e.jsx("div",{className:"text-center px-2",children:e.jsx(be,{badgeContent:e.jsx("p",{className:"w-32 leading-4",children:"BELUM ADA NASKAH"}),color:"warning",container:!0,title:"BELUM ADA NASKAH YANG DIBERKASKAN"})})}),e.jsx("td",{className:" max-w-[20rem] px-6 py-6 text-center",children:Y.jumlah}),e.jsx("td",{className:" max-w-[20rem] px-6 py-6",children:Y.tanggal_retensi_aktif?oa(Y.tanggal_retensi_aktif,"DD-MM-YYYY").format("DD MMMM YYYY"):"-"}),e.jsx("td",{className:" max-w-[20rem] px-6 py-6 text-center",children:Y.total_retensi}),(t==null?void 0:t.group_role)===2&&e.jsx("td",{className:"max-w-[20rem] px-6 py-6",children:Y==null?void 0:Y.unit_pengolah}),e.jsx("td",{className:" max-w-[20rem] px-6 py-6",children:e.jsx("div",{className:"flex-wrap",children:Y.type==="berkas_aktif"?"Srikandi":(Y==null?void 0:Y.type)==="berkas_mandiri"?"Mandiri":"-"})}),e.jsxs("td",{className:"px-3 text-right w-[2rem]",children:[" ",Y.action," "]})]},ke)):e.jsx(e.Fragment,{})]})]}),e.jsxs("nav",{className:"flex items-center justify-between p-4","aria-label":"Table navigation",children:[e.jsx("span",{className:"text-sm text-gray-400",children:re.from&&`Menampilkan ${Se(re.from)} sampai ${Se(re.to)} dari ${Se(re.total)} entri`}),e.jsx(xa,{currentPage:fe.page,lastPage:N,displayCount:5,handleClick:te})]})]})})]})}),e.jsx(ua,{})]}),e.jsx(Wk,{open:G,onClose:me,selectedBerkas:T,fetchDaftarBerkas:()=>{$e(),L([])}})]})},Yk=fa().shape({nama:ze().required("Nama Berkas harus diisi"),klasifikasi_id:wa().min(1,"Pilih Klasifikasi").required("Klasifikasi harus dipilih"),nomor:ze().required("Nomor Berkas belum terisi")}),Qk=()=>{const r="Berkas Aktif",[s,n]=a.useState(!1),t=JSON.parse(Le.getItem("users")),i=new ot,l=new qa,m=ga(),p=ha(),[B,K]=a.useState(!1),[W,z]=a.useState(!0),[T,L]=a.useState([]),[$,M]=a.useState([]),[H,V]=a.useState(null),[A,G]=a.useState({}),[X,O]=a.useState([]),[I,_]=a.useState(!1),[C,k]=a.useState(!1),[b,y]=a.useState({formode:m.state.formode,id:m.state.id,organisasi_id:t==null?void 0:t.organisasi_id,public_organisasi_id:t==null?void 0:t.public_organisasi_id,nomor_berkas:null,kategori_ids:[],nama:"",klasifikasi_id:0}),o=a.useRef(),F="";a.useEffect(()=>{b.formode=="Tambah"&&n(ge(r,"is_create",!0)),b.formode=="Ubah"&&(U.showLoading(),x().then(()=>{n(ge(r,"is_update",!0))})),E()},[b.formode]);const x=async()=>{await i.getDetail(b.id).then(J=>{var h,d;let P=J.data.result;if(P){const j=(h=P==null?void 0:P.berkas_kategori)==null?void 0:h.map(c=>c.kategori_id),g=(d=P==null?void 0:P.berkas_kategori)==null?void 0:d.map(c=>({label:c.kategori_nama,value:c.kategori_id}));y(c=>({...c,...P,kategori_ids:j??[]})),O(g),R(P.klasifikasi_id).finally(()=>U.close())}}).catch(J=>{var h,d;const P=Oe(J.response.data.result);U.fire("Gagal",P??((d=(h=J.response)==null?void 0:h.data)==null?void 0:d.message),"error")})},S=J=>{const P={...J,retensi_aktif:$.retensi_aktif,retensi_inaktif:$.retensi_inaktif,nomor:H};z(!1),P.id!==0?i.put(P.id,P).then(h=>{var d,j,g;U.fire((d=h.data)!=null&&d.success?"Berhasil":"Gagal",(j=h.data)==null?void 0:j.message,(g=h.data)!=null&&g.success?"success":"warning"),h.data.success&&f()}).catch(h=>{var j,g;const d=Oe(h.response.data.result);U.fire("Gagal",d??((g=(j=h.response)==null?void 0:j.data)==null?void 0:g.message),"error")}).finally(()=>z(!0)):i.post(P).then(h=>{var d,j,g;U.fire((d=h.data)!=null&&d.success?"Berhasil":"Gagal",(j=h.data)==null?void 0:j.message,(g=h.data)!=null&&g.success?"success":"warning"),h.data.success&&f()}).catch(h=>{var j,g;const d=Oe(h.response.data.result);U.fire("Gagal",d??((g=(j=h.response)==null?void 0:j.data)==null?void 0:g.message),"error")}).finally(()=>z(!0))},f=()=>{p(F+"/pemeliharaan-arsip/pemberkasan-arsip-aktif")},R=async J=>{J&&await l.detail("klasifikasi",J,"master").then(P=>{M(P),m.state.nomor_berkas?V(m.state.nomor_berkas):u(P.id),D(P.penyusutan_akhir_id)})},u=async J=>{J&&(_(!0),i.getNomorBerkas({klasifikasi_id:J}).then(P=>{const h=P.data.result;V(h),o.current.values.nomor=h,_(!1)}))},D=async J=>{J&&(k(!0),await l.detail("penyusutan-akhir",J,"master").then(P=>{G(P),o.current.values.penyusutan_akhir_id=P==null?void 0:P.id,k(!1)}))},E=async()=>{i.getKategoriBerkas().then(J=>{const h=J.data.result.map(d=>({label:d.keterangan,value:d.id}));L(h)})};return e.jsxs(aa,{children:[e.jsx(la,{}),s&&e.jsx(e.Fragment,{children:e.jsx(ie,{pt:6,pb:3,children:e.jsxs(Me,{children:[e.jsx(ie,{px:3,pt:3,lineHeight:1,children:e.jsxs(w,{container:!0,direction:"row",justifyContent:"space-between",alignItems:"center",children:[e.jsx(w,{item:!0,children:e.jsxs(le,{variant:"h5",fontWeight:"medium",children:[b.formode," Daftar Berkas Arsip Aktif"]})}),e.jsx(w,{item:!0,children:e.jsxs(_e,{variant:"gradient",color:"secondary",onClick:f,children:[e.jsx(za,{size:"1.5em",className:"me-2"}),b.formode!="Lihat"?"Batal":"Kembali"]})})]})}),e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center gap-3 p-5 m-5 bg-gradient-to-r from-blue-300 to-blue-400 rounded-2xl",children:[e.jsx(Vn,{size:"5em",className:"text-white"}),e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsxs(le,{variant:"body",color:"white",children:[e.jsx("b",{children:"Arsip Vital"})," yaitu arsip yang keberadaannya merupakan persyaratan dasar bagi kelangsungan operasional pencipta arsip, tidak dapat diperbarui, dan tidak tergantikan apabila rusak atau hilang."]}),e.jsxs(le,{variant:"body",color:"white",children:[e.jsx("b",{children:"Arsip Terjaga"})," yaitu arsip negara yang berkaitan dengan keberadaan dan kelangsungan hidup bangsa dan negara yang harus dijaga keutuhan, keamanan, dan keselamatannya."]})]})]}),e.jsx("div",{className:"flex flex-col-reverse md:flex-row md:justify-between",children:e.jsx(ca,{innerRef:o,initialValues:b,onSubmit:S,validateOnChange:!0,validationSchema:Yk,enableReinitialize:!0,children:e.jsxs(da,{id:"form",encType:"multipart/form-data",className:"w-full ",children:[e.jsx(w,{mt:2,children:e.jsxs("div",{className:"px-6 pb-6 grid grid-cols-12  gap-5 ",children:[e.jsxs("div",{className:"col-span-12 md:col-span-6 grid grid-cols-2 gap-2 ",children:[e.jsx("div",{className:"col-span-2 ",children:e.jsx(w,{mt:3,children:e.jsx(ce,{name:"nama",children:({field:J,form:P,meta:h})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Nama Berkas",required:!0,error:h.error&&h.touched}),e.jsx(Ye,{...J,type:"text",placeholder:"Masukkan Nama Berkas...",error:h.error&&h.touched,disabled:B}),e.jsx(ue,{text:h.error,error:h.error&&h.touched})]})})})}),e.jsx("div",{className:"col-span-2",children:e.jsx(w,{mt:3,children:e.jsx(ce,{name:"klasifikasi_id",children:({field:J,form:P,meta:h})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Klasifikasi",required:!0,error:h.error&&h.touched}),e.jsx(ra,{...J,url:"klasifikasi/select",targetService:"master",isDisabled:B,callbackChange:d=>{P.setFieldValue("klasifikasi_id",(d==null?void 0:d.id)??""),P.setFieldValue("klasifikasi_nama",(d==null?void 0:d.nama)??""),P.setFieldValue("klasifikasi_kode",(d==null?void 0:d.kode)??""),M(d??null),P.setFieldValue("nomor",""),V(null),u(d==null?void 0:d.id),D(d==null?void 0:d.penyusutan_akhir_id)},selectedData:$,keyValue:["id","kode_nama"],placeholder:"Pilih Klasifikasi...",className:"text-sm",menuPortalTarget:null,optionParam:{"select-target":"klasifikasi-by-unitkerja",only_show_retensi:!0,role:t==null?void 0:t.role,public_organisasi_id:t==null?void 0:t.public_organisasi_id,organisasi_id:t==null?void 0:t.organisasi_id},isClearable:!1}),e.jsx(ue,{text:h.error,error:h.error&&h.touched})]})})})}),e.jsx("div",{className:"col-span-2 md:col-span-1",children:e.jsx(w,{mt:3,children:e.jsx(ce,{name:"retensi_aktif",children:({field:J,form:P,meta:h})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Retensi Aktif",required:!1,error:h.error&&h.touched}),e.jsx(Ye,{...J,type:"text",placeholder:"Retensi Aktif",error:h.error&&h.touched,disabled:!0,value:$==null?void 0:$.retensi_aktif}),e.jsx(ue,{text:h.error,error:h.error&&h.touched})]})})})}),e.jsx("div",{className:"col-span-2 md:col-span-1",children:e.jsx(w,{mt:3,children:e.jsx(ce,{name:"retensi_inaktif",children:({field:J,form:P,meta:h})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Retensi Inaktif",required:!1,error:h.error&&h.touched}),e.jsx(Ye,{...J,type:"text",placeholder:"Retensi Inaktif",error:h.error&&h.touched,disabled:!0,value:$==null?void 0:$.retensi_inaktif}),e.jsx(ue,{text:h.error,error:h.error&&h.touched})]})})})}),e.jsx("div",{className:"col-span-2",children:e.jsx(w,{mt:3,children:e.jsx(ce,{name:"nomor",children:({field:J,form:P,meta:h})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Nomor Berkas",required:!1,error:h.error&&h.touched}),e.jsx("div",{className:"flex flex-nowrap gap-2",children:e.jsx(Ye,{...J,type:"text",placeholder:I?"Sedang mengambil nomor...":"Nomor Berkas",error:h.error&&h.touched,disabled:!0,value:I?"Sedang mengambil nomor...":H})}),e.jsx(ue,{text:h.error,error:h.error&&h.touched})]})})})}),e.jsx("div",{className:"col-span-2",children:e.jsx(w,{mt:3,children:e.jsx(ce,{name:"penyusutan_akhir_id",children:({field:J,form:P,meta:h})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Penyusutan Akhirs",required:!1,error:h.error&&h.touched}),e.jsx(Ye,{...J,type:"text",placeholder:C?"Sedang mengambil penyusutan akhir...":"Penyusutan Akhir",error:h.error&&h.touched,disabled:!0,value:C?"Sedang mengambil penyusutan akhir...":A==null?void 0:A.nama}),e.jsx(ue,{text:h.error,error:h.error&&h.touched})]})})})})]}),e.jsxs("div",{className:"col-span-12 md:col-span-6 grid grid-cols-1 gap-2",children:[e.jsx("div",{className:"",children:e.jsx(w,{mt:3,children:e.jsx(ce,{name:"lokasi_fisik",children:({field:J,form:P,meta:h})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Lokasi Fisik",required:!1,error:h.error&&h.touched}),e.jsx(Ka,{...J,placeHolder:"Masukkan Lokasi Fisik..",error:h.error&&h.touched,disabled:B,rows:5}),e.jsx(ue,{text:h.error,error:h.error&&h.touched})]})})})}),e.jsx("div",{className:"",children:e.jsx(w,{mt:3,children:e.jsx(ce,{name:"uraian",children:({field:J,form:P,meta:h})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Uraian",required:!1,error:h.error&&h.touched}),e.jsx(Ka,{...J,placeHolder:"Masukkan Uraian..",error:h.error&&h.touched,disabled:B,rows:5}),e.jsx(ue,{text:h.error,error:h.error&&h.touched})]})})})}),e.jsx("div",{className:"",children:e.jsx(w,{mt:3,children:e.jsx(ce,{name:"kategori_ids",children:({field:J,form:P,meta:h})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Kategori Berkas",required:!1,error:h.error&&h.touched}),e.jsx(Gs,{placeholder:"Pilih Kategori Berkas...",isMulti:!0,options:T,value:X,isClearable:!0,isSearchable:!1,className:"w-full z-30",onChange:d=>{const j=d==null?void 0:d.map(g=>g.value);P.setFieldValue("kategori_ids",j??[]),O(d)}}),e.jsx(ue,{text:h.error,error:h.error&&h.touched})]})})})})]})]})}),e.jsx("div",{className:"p-3 flex justify-end items-center w-full gap-5 mb-10",children:!B&&e.jsx(Je,{submit:W,color:"success",formId:"form",text:b.formode=="Tambah"?"Simpan":"Ubah"})})]})})})]})})})]})},ls="https://api.arsip.go.id/arsip/api/",Xk="https://api.arsip.go.id/master/api/";class Yt{constructor(){ae(this,"getPaging",async s=>{const n=Ce.serializeObjectToQueryString(s);return await se.get(`${ls}berkas/berkas-mandiri?${n}`).then(l=>l)});ae(this,"getPagingGabungan",async s=>{const n=Ce.serializeObjectToQueryString(s);return await se.get(`${ls}berkas/berkas-aktif/list-gabungan?${n}`).then(l=>l)});ae(this,"getDetail",async s=>await se.get(`${ls}berkas/berkas-mandiri/${s}`).then(i=>i));ae(this,"post",async s=>await se.post(`${ls}berkas/berkas-mandiri`,s).then(i=>i));ae(this,"put",async(s,n)=>await se.put(`${ls}berkas/berkas-mandiri/${s}`,n).then(l=>l));ae(this,"delete",async s=>await se.delete(`${ls}berkas/berkas-mandiri/${s}`).then(i=>i));ae(this,"select",async s=>{const n=new URLSearchParams(s).toString();return(await se.get(`${ls}berkas/berkas-mandiri?${n}`).then(m=>m)).data.result.data});ae(this,"getPagingItems",async s=>{const n=Ce.serializeObjectToQueryString(s);return await se.get(`${ls}naskah-dinas/naskah-mandiri?${n}`).then(l=>l)});ae(this,"postNaskah",async s=>await se.post(`${ls}naskah-dinas/naskah-mandiri`,s,{headers:{"Content-Type":"multipart/form-data"}}).then(i=>i));ae(this,"getDetailNaskah",async s=>await se.get(`${ls}naskah-dinas/naskah-mandiri/${s}`).then(i=>i));ae(this,"putNaskah",async(s,n)=>await se.post(`${ls}naskah-dinas/naskah-mandiri/update/${s}`,n,{headers:{"Content-Type":"multipart/form-data"}}).then(l=>l));ae(this,"deleteNaskah",async s=>await se.delete(`${ls}naskah-dinas/naskah-mandiri/${s}`).then(i=>i));ae(this,"requestMove",async s=>await se.post(`${ls}arsip-usul/pemindahan`,s).then(i=>i));ae(this,"closeBerkas",async s=>await se.post(`${ls}berkas/berkas-mandiri/close`,s).then(i=>i));ae(this,"getNomorBerkas",async s=>{const n=Ce.serializeObjectToQueryString(s);return await se.get(`${ls}berkas/berkas-mandiri/get-nomor-berkas?${n}`).then(l=>l)});ae(this,"getKategoriBerkas",async s=>{const n=Ce.serializeObjectToQueryString(s);return await se.get(`${Xk}kategori-berkas/list/byids?${n}`).then(l=>l)});ae(this,"getLaporan",async s=>{const n=Ce.serializeObjectToQueryString(s);return await se.get(`${ls}laporan/arsip-mandiri?${n}`).then(l=>l)});ae(this,"downloadLaporanPdf",async s=>{const n=Ce.serializeObjectToQueryString(s);return await se.get(`${ls}laporan/arsip-mandiri/pdf?${n}`,{responseType:"blob",headers:{"Content-Type":"application/pdf"}}).then(l=>l)});ae(this,"downloadLaporanExcel",async s=>{const n=Ce.serializeObjectToQueryString(s);return await se.get(`${ls}laporan/arsip-mandiri/excel?${n}`,{responseType:"blob",headers:{"Content-Type":"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}}).then(l=>l)});ae(this,"getLaporanIsi",async s=>{const n=Ce.serializeObjectToQueryString(s);return await se.get(`${ls}laporan/arsip-mandiri-detail?${n}`).then(l=>l)});ae(this,"downloadLaporanIsiPdf",async s=>{const n=Ce.serializeObjectToQueryString(s);return await se.get(`${ls}laporan/arsip-mandiri-detail/pdf?${n}`,{responseType:"blob",headers:{"Content-Type":"application/pdf"}}).then(l=>l)});ae(this,"downloadLaporanIsiExcel",async s=>{const n=Ce.serializeObjectToQueryString(s);return await se.get(`${ls}laporan/arsip-mandiri-detail/excel?${n}`,{responseType:"blob",headers:{"Content-Type":"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}}).then(l=>l)});ae(this,"uploadExcel",async s=>await se.post(`${ls}berkas/berkas-mandiri/import-excel`,s,{headers:{"Content-Type":"multipart/form-data"}}).then(i=>i))}}const Od=({berkasId:r,visibleview:s,modul:n})=>{const t=n=="Berkas Aktif"?new ot:new Yt;JSON.parse(Le.getItem("users"));const i=ha(),[l,m]=a.useState(!1),[p,B]=a.useState(!1),[K,W]=a.useState(null),[z,T]=a.useState(!0),[L,$]=a.useState(null),[M,H]=a.useState(!1),[V,A]=a.useState({naskah_keluar_id:r,id:null}),[G,X]=a.useState(null),[O,I]=a.useState({total:0,from:1,to:1});let _=[];K==null?_=[]:_=K==null?void 0:K.map((u,D)=>({no:D+O.from,tipe_naskah:u.tipe_naskah,jenis_naskah:u.jenis_naskah,nomor:u.nomor,tanggal:u.tanggal,hal:u.hal,ringkasan:u.ringkasan,file:u.file,file_alternative:u==null?void 0:u.file_alternative,is_signed:u==null?void 0:u.is_signed,file_path:u.file_path,lampirans:u.lampiran_naskah_berkas,created_at:u.created_at,tindak_lanjut:u.tindak_lanjut,action:e.jsxs("div",{className:"flex justify-center w-full gap-2",children:[!s&&n==="Berkas Mandiri"&&ge(n,"is_update")&&e.jsx(Va,{size:"1.5em",color:"#fbcf33",onClick:()=>S(u),className:"cursor-pointer",title:"Edit"}),!s&&ge(n,"is_delete")&&e.jsx($a,{size:"1.5em",color:"#e62e2d",onClick:()=>f(u),className:"cursor-pointer",title:"Hapus"})]})}));const[C,k]=a.useState({berkas_id:r,page:1,rows:10,sortField:"",sortOrder:null,search:"",filters:{tanggal:{value:""},tipe_naskah:{value:""},jenis_naskah:{value:""},nomor:{value:""},hal:{value:""}}});a.useEffect(()=>{r&&b()},[C,r]);const b=async(u=!1)=>{u&&(C.page=1),B(!0),await t.getPagingItems(C).then(D=>{let E=D.data.result;E.data&&(X(E.last_page),W(E.data),B(!1)),B(!1),I({...O,to:E.to,from:E.from,total:E.total})}).catch(D=>{console.log({error:D}),D.response.status==404&&W([]),B(!1),I({...O,to:0,from:!1,total:0})})},y=os((u,D,E=null)=>{if(E){let P=E.target;for(;P&&P.tagName!=="TD";)P=P.parentNode;if(P&&P.tagName==="TD"){const h=P.querySelector(".clear-input"),d=P.querySelector("input");D?h.classList.remove("hidden"):(h.classList.add("hidden"),d.value="")}}let J={...C};J.filters[u].value=D,J.page=1,k(J)},600),o=u=>{let D={...C};D.page=u,k(D),window.scrollTo({top:0,behavior:"smooth"})},F=u=>{let D={...C};D.rows=u,k(D)},x=u=>{let D={...C};D.sortField=u,C.sortField!=u?C.sortOrder==""&&(D.sortOrder=1):C.sortOrder==1?D.sortOrder=-1:(D.sortOrder="",D.sortField=""),D.page=1,k(D)},S=u=>{i("form-naskah",{state:{formode:"Ubah",id:u.id,berkas_id:u==null?void 0:u.berkas_id}})},f=u=>{U.fire({title:"Hapus Naskah",text:`Apakah Anda yakin ingin menghapus Naskah ${u.nomor} dari Berkas ini?`,icon:"question",showCancelButton:!0,confirmButtonText:"Ya, Hapus",cancelButtonText:"Batal",customClass:{confirmButton:"button button-error",cancelButton:"button button-info"}}).then(D=>{const E={naskah_id:u.naskah_id,jenis:u.tipe_naskah==="Naskah Masuk Mandiri"?"NASKAH MASUK":u.tipe_naskah==="Naskah Keluar Mandiri"?"NASKAH KELUAR":u.tipe_naskah==="Naskah Masuk"?"MASUK":"KELUAR"},J=u.id;D.isConfirmed&&(ka(),t.deleteNaskah(n=="Berkas Aktif"?E:J).then(P=>{var h,d,j;P.status==200&&b(),U.fire({icon:(h=P.data)!=null&&h.success?"success":"warning",title:(d=P.data)!=null&&d.success?"Berhasil":"Gagal",text:(j=P.data)==null?void 0:j.message,showConfirmButton:!1,timer:1500})}).catch(P=>{var d,j;const h=Oe(P.response.data.result);U.fire("Gagal",h??((j=(d=P.response)==null?void 0:d.data)==null?void 0:j.message),"error")}))})},R=u=>{U.fire({title:`Print ${tt(u.jenis_naskah)}`,icon:"warning",showCancelButton:!0,reverseButtons:!0,confirmButtonText:"Lanjutkan",cancelButtonText:"Batal",customClass:{confirmButton:"button button-info",cancelButton:"button button-secondary"}}).then(async D=>{D.isConfirmed&&(ka(),await t.printTindakLanjut(u.tindak_lanjut).then(E=>{tn(E.data),U.close()}))})};return e.jsxs("div",{children:[e.jsx(w,{container:!0,direction:"row",justifyContent:"space-between",alignItems:"center",children:e.jsx(ie,{px:3,pt:3,lineHeight:1,children:e.jsx(le,{variant:"h5",fontWeight:"medium",children:n==="Berkas Aktif"?"Daftar Isi Berkas Arsip Aktif":"Daftar Isi Berkas Arsip Mandiri"})})}),e.jsx(w,{children:e.jsx("div",{className:"overflow-auto",children:e.jsxs("div",{className:"table px-6 pb-6 min-w-full",children:[e.jsx("div",{className:"flex items-center justify-end mb-1",children:e.jsx(pa,{config:C,handleClick:F})}),e.jsxs("table",{className:"w-full text-sm text-left !text-gray-700 dark:text-gray-400 table-bordered",children:[e.jsx("thead",{className:"text-xs text-gray-500 uppercase border-b-2 mb-1",children:e.jsxs("tr",{children:[e.jsx(q,{text:"No",sortField:"no",sortOrder:C.sortOrder,config:C,handleClick:()=>x("no")}),e.jsx(q,{text:"Tipe Naskah",sortField:"tipe_naskah",sortOrder:C.sortOrder,config:C,handleClick:()=>x("tipe_naskah")}),e.jsx(q,{text:"Jenis Naskah",sortField:"jenis_naskah",sortOrder:C.sortOrder,config:C,handleClick:()=>x("jenis_naskah")}),e.jsx(q,{text:"Nomor Naskah",sortField:"nomor",sortOrder:C.sortOrder,config:C,handleClick:()=>x("nomor")}),e.jsx(q,{text:"Tanggal",sortField:"tanggal",sortOrder:C.sortOrder,config:C,handleClick:()=>x("tanggal")}),e.jsx(q,{text:"Hal",sortField:"hal",sortOrder:C.sortOrder,config:C,handleClick:()=>x("hal")}),e.jsx(q,{text:"File"}),n=="Berkas Aktif"&&e.jsx(q,{text:"Lampiran"}),!s&&e.jsx(q,{text:"Aksi",className:"flex justify-center min-w-[2rem]"})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{className:"border-b border-slate-300",children:[e.jsx("td",{}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"tipe_naskah",onSearch:y,placeholder:"Tipe Naskah",type:"select",selectOption:nd})}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"jenis_naskah",onSearch:y,placeholder:"Jenis Naskah",type:"input"})}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"nomor",onSearch:y,placeholder:"Nomor Naskah",type:"input"})}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"tanggal",onSearch:y,placeholder:"Tanggal",type:"input",isDate:!0})}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"hal",onSearch:y,placeholder:"Hal",type:"input"})}),e.jsx("td",{}),n=="Berkas Aktif"&&e.jsx("td",{}),!s&&e.jsx("td",{})]}),p?e.jsx("tr",{className:"border-b border-slate-300",children:e.jsx("td",{colSpan:9,children:e.jsx(ia,{})})}):e.jsx(e.Fragment,{}),_.length?_==null?void 0:_.map((u,D)=>{var E;return e.jsxs("tr",{className:"border-b border-slate-300",children:[e.jsx("td",{className:"max-w-[20rem] px-6 py-6",children:u.no}),e.jsx("td",{className:"max-w-[20rem] px-6 py-6",children:u.tipe_naskah}),e.jsx("td",{className:"max-w-[20rem] px-6 py-6",children:u.jenis_naskah??"-"}),e.jsx("td",{className:"max-w-[20rem] px-6 py-6",children:u.nomor}),e.jsx("td",{className:"max-w-[20rem] px-6 py-6",children:u.tanggal?na(u.tanggal):"-"}),e.jsx("td",{className:"max-w-[20rem] px-6 py-6",children:e.jsx("div",{className:"flex-wrap",children:Qn.includes(u==null?void 0:u.jenis_naskah)?(u==null?void 0:u.hal)&&u.hal.split("||").map(J=>e.jsxs("div",{className:"mb-1",children:[u.jenis_naskah=="DISPOSISI"&&J.includes("Catatan:")?"":"- ",J]})):e.jsx(e.Fragment,{children:e.jsx("div",{children:u==null?void 0:u.ringkasan})})})}),e.jsx("td",{className:"max-w-[20rem] px-6 py-6",children:e.jsx("div",{className:"flex-wrap",children:u.jenis_naskah==="DISPOSISI"||u.jenis_naskah==="KOORDINASI"||u.jenis_naskah==="ARAHAN"?e.jsx(ts,{className:"text-red-600 h-6 w-6 cursor-pointer",onClick:()=>{R(u)}}):u.tipe_naskah==="Naskah Keluar"&&u.is_signed&&u.file_alternative&&!Gn(u.file_alternative,u.created_at)?e.jsx(ts,{className:"text-pink-600 h-6 w-6 cursor-pointer",onClick:()=>Wa((u==null?void 0:u.file_alternative)??null,u.file_path??"naskah-keluar",null,0,u.created_at),title:u.file}):e.jsx(ts,{className:"text-red-600 h-6 w-6 cursor-pointer",onClick:()=>Wa(u.file,u.file_path??(u.tipe_naskah==="Naskah Masuk Mandiri"||u.tipe_naskah==="Naskah Keluar Mandiri"?"naskah-mandiri":u.tipe_naskah==="Naskah Keluar"?"naskah-keluar":"naskah-masuk"),null,0,u.created_at),title:u.file})})}),n=="Berkas Aktif"&&e.jsx("td",{className:"max-w-[20rem] px-6 py-6",children:((E=u==null?void 0:u.lampirans)==null?void 0:E.length)>0?e.jsx("ol",{className:"list-decimal",children:u.lampirans.map((J,P)=>e.jsx("li",{className:"hover:underline cursor-pointer break-all text-blue-500 mb-2",onClick:()=>Wa(J.file,J.file_path??"lampiran"),children:J.nama},P))}):e.jsx(be,{badgeContent:"Tidak ada",color:"secondary",container:!0})}),!s&&e.jsx("td",{className:"max-w-[20rem] px-6 py-6",children:u.action})]},D)}):e.jsx(e.Fragment,{})]})]}),e.jsxs("nav",{className:"flex items-center justify-between p-4","aria-label":"Table navigation",children:[e.jsx("span",{className:"text-sm text-gray-400",children:O.from&&`Menampilkan ${Se(O.from)} sampai ${Se(O.to)} dari ${Se(O.total)} entri`}),e.jsx(xa,{currentPage:C.page,lastPage:G,displayCount:5,handleClick:o})]})]})})})]})},cl=({data:r,modul:s})=>{var n,t,i,l;return e.jsx(ie,{children:e.jsx(Me,{className:"p-5 flex flex-col gap-5",children:e.jsxs(w,{mt:2,children:[e.jsx("div",{className:"mb-6",children:e.jsxs(le,{variant:"h6",children:['Informasi Berkas "',r==null?void 0:r.nomor," - ",r==null?void 0:r.nama,'"']})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 mb-5 ",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("div",{className:"p-1 grid grid-cols-12 mb-2 gap-0 lg:gap-5 lg:mb-0 text-sm",children:[e.jsx("div",{className:"col-span-12 md:col-span-6",children:"Klasifikasi"}),r!=null&&r.klasifikasi_kode?e.jsxs("div",{className:"col-span-12 md:col-span-6",children:[e.jsx("span",{className:"hidden md:inline",children:":"})," ",r==null?void 0:r.klasifikasi_kode," -"," ",r==null?void 0:r.klasifikasi_nama]}):e.jsxs("div",{className:"col-span-12 md:col-span-6",children:[e.jsx("span",{className:"hidden md:inline",children:":"})," ",r==null?void 0:r.klasifikasi]})]}),e.jsxs("div",{className:"p-1 grid grid-cols-12 mb-2 gap-0 lg:gap-5 lg:mb-0 text-sm",children:[e.jsx("div",{className:"col-span-12 md:col-span-6",children:"Retensi Aktif"}),e.jsxs("div",{className:"col-span-12 md:col-span-6",children:[e.jsx("span",{className:"hidden md:inline",children:":"})," ",(r==null?void 0:r.status)==="TUTUP"?e.jsx(e.Fragment,{children:r==null?void 0:r.retensi_aktif}):r==null?void 0:r.retensi_aktif]})]}),e.jsxs("div",{className:"p-1 grid grid-cols-12 mb-2 gap-0 lg:gap-5 lg:mb-0 text-sm",children:[e.jsx("div",{className:"col-span-12 md:col-span-6",children:"Retensi Inaktif"}),e.jsxs("div",{className:"col-span-12 md:col-span-6",children:[e.jsx("span",{className:"hidden md:inline",children:":"})," ",oa()>=oa(r==null?void 0:r.tanggal_retensi_aktif,"DD-MM-YYYY")?e.jsx(e.Fragment,{children:r==null?void 0:r.retensi_inaktif}):r==null?void 0:r.retensi_inaktif]})]})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("div",{className:"p-1 grid grid-cols-12 mb-2 gap-0 lg:gap-5 lg:mb-0 text-sm",children:[e.jsx("div",{className:"col-span-12 md:col-span-6",children:"Penyusutan Akhir"}),e.jsxs("div",{className:"col-span-12 md:col-span-6",children:[e.jsx("span",{className:"hidden md:inline",children:": "}),(r==null?void 0:r.penyusutan_akhir_nama)??"-"]})]}),e.jsxs("div",{className:"p-1 grid grid-cols-12 mb-2 gap-0 lg:gap-5 lg:mb-0 text-sm",children:[e.jsx("div",{className:"col-span-12 md:col-span-6",children:"Kategori Berkas"}),s=="Berkas Mandiri"?e.jsxs("div",{className:"col-span-12 md:col-span-6",children:[e.jsx("span",{className:"hidden md:inline",children:":"})," ",((n=r==null?void 0:r.berkas_mandiri_kategori)==null?void 0:n.length)>0?(t=r==null?void 0:r.berkas_mandiri_kategori)==null?void 0:t.map((m,p)=>m.kategori_nama+(p!==r.berkas_mandiri_kategori.length-1?", ":"")):"-"]}):e.jsxs("div",{className:"col-span-12 md:col-span-6",children:[e.jsx("span",{className:"hidden md:inline",children:":"})," ",((i=r==null?void 0:r.berkas_kategori)==null?void 0:i.length)>0?(l=r==null?void 0:r.berkas_kategori)==null?void 0:l.map((m,p)=>m.kategori_nama+(p!==r.berkas_kategori.length-1?", ":"")):"-"]})]})]})]}),e.jsx("hr",{className:"mb-5"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 mb-10 lg:mb-5 ",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"p-1 grid grid-cols-12 mb-2 gap-1  text-sm",children:[e.jsx("div",{className:"col-span-12 ",children:"Tanggal Tutup Berkas"}),e.jsx("div",{className:"col-span-12 ",children:r!=null&&r.tanggal_tutup?na(r.tanggal_tutup,2):e.jsx(be,{badgeContent:"Menunggu Tutup Berkas",color:"warning",container:!0})})]}),e.jsxs("div",{className:"p-1 mb-2  text-sm",children:[e.jsx("div",{className:"col-span-12",children:"Dibuat pada"}),e.jsx("div",{className:"col-span-12",children:na(r==null?void 0:r.created_at)})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"p-1 mb-2  text-sm",children:[e.jsx("div",{className:"col-span-12",children:"Uraian"}),e.jsx("div",{className:"col-span-12",children:r==null?void 0:r.uraian})]}),e.jsxs("div",{className:"p-1 mb-2  text-sm",children:[e.jsx("div",{className:"col-span-12 ",children:"Lokasi Fisik"}),e.jsx("div",{className:"col-span-12 ",children:(r==null?void 0:r.lokasi_fisik)??"-"})]})]})]})]})})})},Zk=({berkasId:r})=>{const s=new ot,[n,t]=a.useState([]),[i,l]=a.useState(!1),[m,p]=a.useState(!1),{data:B,isLoading:K,refetch:W}=ds({refetchOnWindowFocus:!1,enabled:!!r&&!!m,queryKey:[Pf,r],queryFn:()=>s.getHistori(r).then(T=>{const L=T.data.result;return Object.entries(L)}).catch(T=>{})}),z=()=>{l(!i),m||p(!0)};return e.jsxs("div",{children:[e.jsxs(w,{container:!0,direction:"row",justifyContent:"space-between",alignItems:"center",className:"pb-6 cursor-pointer",onClick:()=>z(),children:[e.jsxs(w,{item:!0,className:"flex items-center gap-2",children:[e.jsx(zi,{size:"1.5em"}),e.jsx(le,{variant:"h5",fontWeight:"medium",children:"Riwayat Pemindahan"})]}),e.jsx(w,{item:!0,children:e.jsx(is,{className:"w-6 h-5 text-gray-500 cursor-pointer"})})]}),e.jsxs("div",{className:`overflow-x-auto lg:overflow-y-auto lg:max-h-[70vh] ${i?"":"hidden"}`,children:[K&&e.jsx("div",{className:"flex w-full justify-center my-4",children:e.jsx(rs,{})}),!K&&(B==null?void 0:B.length)>0&&B.map(T=>{var M,H;const L=(M=T[0])==null?void 0:M.split("-"),$=new Date(L[2],L[1]-1,L[0]);return e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{children:na($,1)}),(H=T[1])==null?void 0:H.map((V,A)=>{var G;return e.jsx(Zn,{color:"success",icon:"circle",title:`Proses Pemindahan Berkas ${V.status=="SETUJU"?"Disetujui":"Ditolak dengan alasan"}`,dateTime:na(V==null?void 0:V.created_at,3),description:`${V.user_nama} - ${V.user_jabatan} - ${V.user_instansi}`,lastItem:A===((G=T[1])==null?void 0:G.length)-1,children:V.status=="DITOLAK"&&e.jsx("div",{className:"mt-4 bg-gray-50 p-4 border-l-4 border-blue-500 shadow-md italic text-gray-700",children:V.deskripsi??"-"})},A)})]},T[0])})]})]})},eb=()=>{var c,v;const r="Berkas Aktif",[s,n]=a.useState(!1),[t,i]=a.useState(!1),[l,m]=a.useState(!1),p=JSON.parse(Le.getItem("users")),B=new ot,[K,W]=a.useState(!1),[z,T]=a.useState(!0),L=ga(),$=ha(),[M,H]=a.useState([]),[V,A]=a.useState([]),[G,X]=a.useState(null),[O,I]=a.useState([]),[_,C]=a.useState({id:((c=L.state)==null?void 0:c.berkas_id)||((v=L.state)==null?void 0:v.id)||null}),[k,b]=a.useState(-1),[y,o]=a.useState({}),[F,x]=a.useState(null),[S,f]=a.useState(null),[R,u]=a.useState(!1),[D,E]=a.useState({verifikator_id:null,forward_for:"verifikator",user_id:p==null?void 0:p.id,penandatangan_id:null,naskah_keluar_id:_.id}),J="",[P,h]=a.useState(!0);a.useEffect(()=>{((p==null?void 0:p.group_role)===4||(G==null?void 0:G.status)=="TUTUP")&&u(!0),G!=null&&G.tanggal_tutup&&h(!1),ge(r,"is_create")||h(!1)},[p,G]),a.useEffect(()=>{_.id&&(U.showLoading(),j(_.id).then(()=>{n(!0)}).catch(()=>{U.fire({title:"Data tidak ditemukan",text:"Kembali ke daftar",icon:"warning",backdrop:!0}).then(()=>{})}).finally(()=>U.close()))},[_.id,k]);const d=()=>{var Q,re,ye;["/proses-penyusutan/pemindahan/detail"].includes((Q=L.state)==null?void 0:Q.back)?$(J+L.state.back,{state:{id:(re=L==null?void 0:L.state)==null?void 0:re.id}}):(ye=L.state)!=null&&ye.back?$(J+L.state.back):$(J+"/pemeliharaan-arsip/pemberkasan-arsip-aktif")},j=async N=>{(N!=null||N!=null)&&await B.getDetail(N).then(Q=>{X(Q.data.result)})},g=()=>{$("form-naskah-aktif",{state:{formode:"Tambah",id:G==null?void 0:G.id}})};return e.jsxs(aa,{children:[e.jsx(la,{}),s&&e.jsxs(e.Fragment,{children:[e.jsxs(ie,{pt:6,pb:3,className:"flex flex-col gap-10",children:[e.jsx(ie,{children:e.jsxs("div",{className:"flex justify-between p-3 items-center",children:[e.jsx(le,{variant:"h5",fontWeight:"medium",children:"Detail Berkas Aktif"}),e.jsxs("div",{className:"flex gap-2 items-center",children:[P&&e.jsxs(_e,{variant:"gradient",color:"info",onClick:g,children:[e.jsx(Ea,{size:"1.5em",className:"me-2"}),"Naskah Mandiri"]}),e.jsxs(_e,{variant:"gradient",color:"secondary",onClick:d,children:[e.jsx(za,{size:"1.5em",className:"me-2"}),"Kembali"]})]})]})}),e.jsx(cl,{data:G}),e.jsx(Me,{children:e.jsx(ie,{px:3,pt:3,lineHeight:1,children:e.jsx(Od,{berkasId:_.id,visibleview:R,modul:r})})}),e.jsx(Me,{children:e.jsx(ie,{px:3,pt:3,lineHeight:1,children:e.jsx(Zk,{berkasId:_.id})})})]}),e.jsx(ua,{})]})]})},ab=fa().shape({nama:ze().required("Nama Berkas harus diisi"),klasifikasi_kode:ze().required("Kode Klasifikasi harus diisi"),date:ze().required("Tanggal Berkas harus diisi"),retensi_aktif:wa().required("Retensi Aktif harus diisi"),retensi_inaktif:wa().required("Retensi Inaktif harus diisi"),nomor:ze().required("Nomor Berkas harus diisi"),penyusutan_akhir_id:wa().required("Penyusutan Akhir harus dipilih")}),sb=fa().shape({file_import:Qa().required("File harus diisi")}),tb=()=>{const r="Berkas Mandiri",[s,n]=a.useState(!1);a.useEffect(()=>{n(ge(r,"is_read",!0))},[]);const t=JSON.parse(Le.getItem("users")),i=new Yt,l=ha(),[m,p]=a.useState(!1),[B,K]=a.useState(null),[W,z]=Ga.useState(!1),[T,L]=a.useState(!1),[$,M]=a.useState("Simpan"),[H,V]=a.useState(""),[A,G]=a.useState(""),[X,O]=a.useState(!1),[I,_]=a.useState({file_import:""}),[C,k]=a.useState(!0),[b,y]=a.useState([]),[o,F]=a.useState(!1),[x,S]=a.useState(!1),[f,R]=a.useState(null),[u,D]=a.useState(null),[E,J]=a.useState({start_at:"",end_at:""}),[P,h]=a.useState(null),[d,j]=a.useState(null),[g,c]=a.useState({start_at:"",end_at:""}),[v,N]=a.useState(null),[Q,re]=a.useState(null),[ye,xe]=a.useState({start_at:"",end_at:""}),[fe,Ge]=a.useState(null),[$e,Pe]=a.useState(null),[te,ne]=a.useState({start_at:"",end_at:""}),[pe,he]=a.useState(null),[oe,je]=a.useState({total:0,from:1,to:1});let Ne=[];B==null?Ne=[]:Ne=B.map((Ee,ve)=>({no:ve+oe.from,id:Ee.id,nomor:Ee.nomor,klasifikasi_kode:Ee.klasifikasi_kode,nama:Ee.nama,tanggal_tutup:Ee.tanggal_tutup,tanggal_retensi_aktif:Ee.tanggal_retensi_aktif,kurun:Ee.kurun,jumlah:Ee.jumlah,type:Ee==null?void 0:Ee.type,action:e.jsxs("div",{className:"flex gap-2 items-center justify-center w-full px-2",children:[e.jsx(Oa,{size:"1.5em",color:"#17c1e8",onClick:()=>Be(Ee),className:"cursor-pointer",title:"Lihat"}),e.jsx(e.Fragment,{children:!Ee.tanggal_tutup||Ee.status==="BUKA"?e.jsxs(e.Fragment,{children:[(t==null?void 0:t.group_role)!==4&&Ee.jumlah>0&&e.jsx(Eo,{size:"1.5em",color:"#ff5722",onClick:()=>Qe(Ee),className:"cursor-pointer",title:"Kunci"}),ge(r,"is_update")&&e.jsx(Va,{size:"1.5em",color:"#fbcf33",onClick:()=>ta(Ee),className:"cursor-pointer",title:"Ubah"}),ge(r,"is_delete")&&!Ee.jumlah&&e.jsx($a,{size:"1.5em",color:"#e62e2d",onClick:()=>ea(Ee),className:"cursor-pointer",title:"Hapus"})]}):e.jsx(be,{badgeContent:e.jsx("p",{className:"w-14 text-wrap leading-4",children:"TUTUP"}),color:"success",container:!0,title:"BERKAS SUDAH DITUTUP"})})]})}));const[Re,sa]=a.useState({organisasi_id:t==null?void 0:t.organisasi_id,public_organisasi_id:t==null?void 0:t.public_organisasi_id,group_role_id:t==null?void 0:t.group_role,page:1,rows:10,sortField:"",sortOrder:null,search:"",filters:{kode:{value:""},nama:{value:""},type:{value:""}}});a.useEffect(()=>{Te()},[Re]);const Te=async(Ee=!1)=>{Ee&&(Re.page=1),p(!0),await i.getPaging(Re).then(ve=>{let Ae=ve.data.result;Ae.data&&(he(Ae.last_page),K(Ae.data),p(!1)),p(!1),je({...oe,to:Ae.to,from:Ae.from,total:Ae.total})}).catch(ve=>{p(!1),je({...oe,to:0,from:!1,total:0})})},me=Da((Ee,ve,Ae=null)=>{if(Ae){let ma=Ae.target;for(;ma&&ma.tagName!=="TD";)ma=ma.parentNode;if(ma&&ma.tagName==="TD"){const La=ma.querySelector(".clear-input"),We=ma.querySelector("input");ve?La.classList.remove("hidden"):(La.classList.add("hidden"),We.value="")}}let Ue={...Re};Ue.filters[Ee].value=ve,Ue.page=1,sa(Ue)},600),ee=Ee=>{let ve={...Re};ve.page=Ee,sa(ve),window.scrollTo({top:0,behavior:"smooth"})},Y=Ee=>{let ve={...Re};ve.rows=Ee,ve.page=1,sa(ve)},ke=Ee=>{let ve={...Re};ve.sortField=Ee,Re.sortField!=Ee?Re.sortOrder==""&&(ve.sortOrder=1):Re.sortOrder==1?ve.sortOrder=-1:(ve.sortOrder="",ve.sortField=""),ve.page=1,sa(ve)},De=()=>{l("form",{state:{formode:"Tambah",id:0}})},ta=Ee=>{l("form",{state:{formode:"Ubah",id:Ee.id}})},Be=Ee=>{l("detail",{state:{formode:"Lihat",id:Ee.id,back:"/pemeliharaan_arsip/pemberkasan-mandiri"}})},Fe=()=>{const ve=`/pemeliharaan_arsip/pemberkasan-mandiri/laporan-mandiri?${Ce.serializeObjectToQueryString({start_at:E==null?void 0:E.start_at,end_at:E==null?void 0:E.end_at,status:(f==null?void 0:f.value)||"",unit_kerja_id:(u==null?void 0:u.id)||""})}`;window.open(ve,"_blank","noopener,noreferrer")},Ke=()=>{const ve=`/pemeliharaan-arsip/pemberkasan-arsip-aktif/laporan-gabungan-isi?${Ce.serializeObjectToQueryString({start_at:te==null?void 0:te.start_at,end_at:te==null?void 0:te.end_at,status:(fe==null?void 0:fe.value)||"",unit_kerja_id:($e==null?void 0:$e.id)||""})}`;window.open(ve,"_blank","noopener,noreferrer")},Qe=Ee=>{Ee.id&&U.fire({title:"Tutup Berkas",text:"Apakah Anda yakin ingin menutup Berkas ini ?. Setelah ditutup Anda tidak bisa membuka kembali dan menambah isi berkas",icon:"question",showCancelButton:!0,confirmButtonText:"Ya, Tutup",cancelButtonText:"Batal",customClass:{confirmButton:"button button-error",cancelButton:"button "}}).then(ve=>{ve.isConfirmed&&(ka(),i.closeBerkas({berkas_id:Ee.id}).then(Ae=>{Ae.status==200&&(Te(),U.fire("Berhasil",Ae.data.message,"success"))}).catch(Ae=>{var ma,La,We,qe;const Ue=Oe((La=(ma=Ae.response)==null?void 0:ma.data)==null?void 0:La.result);U.fire("Gagal",Ue??((qe=(We=Ae.response)==null?void 0:We.data)==null?void 0:qe.message),"error")}))})},ea=Ee=>{U.fire({title:"Konfirmasi",text:"Apakah Anda yakin ingin menghapus Berkas ini?",icon:"warning",showCancelButton:!0,confirmButtonText:"Hapus",cancelButtonText:"Batal",customClass:{confirmButton:"button button-error",cancelButton:"button button-info"}}).then(ve=>{ve.isConfirmed&&(ka(),i.delete(Ee.id).then(Ae=>{Ae.status==200&&Te(),U.fire("Berhasil","Data Berhasil Dihapus","success")}).catch(Ae=>{var ma,La;const Ue=Oe(Ae.response.data.result);U.fire("Gagal",Ue??((La=(ma=Ae.response)==null?void 0:ma.data)==null?void 0:La.message),"error")}))})},ja=Ee=>{Ee&&(k(!1),i.uploadExcel(Ee).then(ve=>{var Ae,Ue,ma;U.fire((Ae=ve.data)!=null&&Ae.success?"Berhasil":"Gagal",(Ue=ve.data)==null?void 0:Ue.message,(ma=ve.data)!=null&&ma.success?"success":"warning"),ve.data.success&&(Te(!0),Aa())}).catch(ve=>{var Ue,ma;console.log(ve);const Ae=Oe(ve.response.data.result);U.fire("Gagal",Ae??((ma=(Ue=ve.response)==null?void 0:Ue.data)==null?void 0:ma.message),"error")}).finally(()=>k(!0)))},Aa=()=>{O(!1)};return e.jsxs(aa,{children:[e.jsx(la,{}),s&&e.jsxs(e.Fragment,{children:[" ",e.jsx(ie,{pt:6,pb:3,children:e.jsxs(Me,{children:[e.jsxs(ie,{px:3,pt:3,lineHeight:1,children:[e.jsxs("div",{className:"flex flex-col lg:flex-row lg:justify-between lg:items-center",children:[e.jsx("div",{className:"mb-4 lg:mb-0",children:e.jsx(le,{variant:"h5",fontWeight:"medium",children:"Daftar Berkas Mandiri"})}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-2 items-center ",children:[(t==null?void 0:t.group_role)!==4&&e.jsxs(e.Fragment,{children:[e.jsxs(_e,{variant:"gradient",color:"info",className:"w-full md:w-fit",onClick:()=>window.open("https://api.arsip.go.id/arsip/api/".replace("/api/","/doc/Template Excel New.xlsx")),children:[e.jsx(Uu,{size:"1em"}),e.jsx("p",{className:"ml-2",children:"Download Template Excel File"})]}),e.jsxs(_e,{variant:"gradient",color:"info",onClick:()=>O(!0),className:"w-full md:w-fit",children:[e.jsx(Vu,{size:"1em"}),e.jsx("p",{className:"ml-2",children:"Upload Excel File"})]})]}),ge(r,"is_create")&&e.jsxs(_e,{className:"w-full md:w-fit",variant:"gradient",color:"info",onClick:De,children:[e.jsx(Ea,{size:"1em"}),e.jsx("p",{className:"ml-2",children:"Tambah Baru"})]})]})]}),(t==null?void 0:t.group_role)!==4&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-full flex justify-between mt-6",children:e.jsx(le,{variant:"h6",fontWeight:"bold",children:e.jsx("p",{children:"Laporan Berkas Mandiri"})})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex flex-col 2xl:flex-row gap-4 2xl:gap-6 mb-4 mt-5 2xl:items-center 2xl:justify-between",children:[e.jsx("div",{className:"w-60",children:e.jsx(le,{variant:"body3",fontWeight:"medium",children:e.jsx("p",{className:"whitespace-nowrap",children:"Laporan Daftar"})})}),e.jsxs("div",{className:"flex flex-col lg:flex-row gap-2 items-center ",children:[e.jsx(Zs,{onDateSelected:(Ee,ve)=>{J(Ae=>({...Ae,start_at:Ee==null?void 0:Ee.toISOString(),end_at:ve==null?void 0:ve.toISOString()}))}}),e.jsx("div",{className:"w-full mb-3 lg:mb-0",children:e.jsx(Gs,{placeholder:"Pilih Status Berkas...",options:En,isClearable:!0,isSearchable:!1,className:"text-sm whitespace-nowrap",onChange:Ee=>{N(Ee)},value:v})}),e.jsx(ra,{url:"organisasi/sub-oraganisasi/select-with-token",selectedData:Q,keyValue:["id","nama"],callbackChange:Ee=>re(Ee),placeholder:"Pilih Unit Kerja...",className:"text-sm w-full mb-3 lg:mb-0 whitespace-nowrap",menuPortalTarget:null,isMulti:!1}),ge(r,"is_create",!1,!0)&&e.jsx("div",{className:"w-full lg:w-fit text-right",children:e.jsxs(_e,{variant:"gradient",color:"success",size:"small",onClick:Fe,disabled:!E.start_at||!E.end_at,children:[e.jsx(Bs,{size:"2em",className:"pe-2"}),"Tampilkan"]})})]})]}),e.jsxs("div",{className:"flex flex-col 2xl:flex-row gap-4 2xl:gap-6 mb-4 mt-5 2xl:items-center 2xl:justify-between",children:[e.jsx("div",{className:"w-60",children:e.jsx(le,{variant:"body3",fontWeight:"medium",children:e.jsx("p",{className:"whitespace-nowrap",children:"Laporan Daftar Isi"})})}),e.jsxs("div",{className:"flex flex-col lg:flex-row gap-2 items-center ",children:[e.jsx(Zs,{onDateSelected:(Ee,ve)=>{c(Ae=>({...Ae,start_at:Ee==null?void 0:Ee.toISOString(),end_at:ve==null?void 0:ve.toISOString()}))}}),e.jsx("div",{className:"w-full mb-3 lg:mb-0",children:e.jsx(Gs,{placeholder:"Pilih Status Berkas...",options:En,isClearable:!0,isSearchable:!1,className:"text-sm whitespace-nowrap",onChange:Ee=>{h(Ee)},value:fe})}),e.jsx(ra,{url:"organisasi/sub-oraganisasi/select-with-token",selectedData:$e,keyValue:["id","nama"],callbackChange:Ee=>Pe(Ee),placeholder:"Pilih Unit kerja...",className:"text-sm w-full mb-3 lg:mb-0 whitespace-nowrap",menuPortalTarget:null,isMulti:!1}),ge(r,"is_create",!1,!0)&&e.jsx("div",{className:"w-full lg:w-fit text-right",children:e.jsxs(_e,{variant:"gradient",color:"success",size:"small",onClick:Ke,disabled:!g.start_at||!g.end_at,children:[e.jsx(Bs,{size:"2em",className:"pe-2"}),"Tampilkan"]})})]})]})]})]})]}),e.jsx("div",{className:"overflow-auto",children:e.jsxs("div",{className:"table p-10 min-w-full",children:[e.jsx("div",{className:"flex justify-end mb-1",children:e.jsx(pa,{config:Re,handleClick:Y})}),e.jsxs("table",{className:"w-full text-sm text-left !text-gray-700 dark:text-gray-400 table-bordered",children:[e.jsx("thead",{className:"text-xs text-gray-500 uppercase border-b-2 mb-1",children:e.jsxs("tr",{children:[e.jsx(q,{text:"No",className:"flex justify-center"}),e.jsx(q,{text:"Kode Klasifikasi / Nomor Berkas",sortField:"klasifikasi_kode",sortOrder:Re.sortOrder,config:Re,handleClick:()=>ke("klasifikasi_kode")}),e.jsx(q,{text:"Berkas",sortField:"nama",sortOrder:Re.sortOrder,config:Re,handleClick:()=>ke("nama")}),e.jsx(q,{text:"Kurun Waktu",sortField:"kurun",sortOrder:Re.sortOrder,config:Re,handleClick:()=>ke("kurun")}),e.jsx(q,{text:"Jumlah Item",sortField:"jumlah",sortOrder:Re.sortOrder,config:Re,handleClick:()=>ke("jumlah")}),e.jsx(q,{text:"Akhir Retensi Aktif",sortField:"tanggal_retensi_aktif",sortOrder:Re.sortOrder,config:Re,handleClick:()=>ke("tanggal_retensi_aktif")}),e.jsx(q,{text:"Aksi",className:"flex justify-center min-w-[2rem]"})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{className:"border-b border-slate-300",children:[e.jsx("td",{className:"max-w-[20rem] py-6"}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"kode",onSearch:me,placeholder:"Kode Klasifikasi",type:"input"})}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"nama",onSearch:me,placeholder:"Berkas",type:"input"})}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2"}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2"}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2"}),e.jsx("td",{})]}),m?e.jsx("tr",{children:e.jsx("td",{colSpan:7,children:e.jsx(ia,{})})}):e.jsx(e.Fragment,{}),Ne.length?Ne.map((Ee,ve)=>e.jsxs("tr",{className:"border-b border-slate-300",children:[e.jsx("td",{className:"px-6 py-6",children:e.jsx("div",{className:"flex justify-center",children:Ee.no})}),e.jsxs("td",{className:" max-w-[20rem] px-6 py-6",children:[Ee.klasifikasi_kode," / ",Ee.nomor]}),e.jsx("td",{className:" max-w-[20rem] px-6 py-6",title:`${Ee.nama}`,children:Gh(Ee.nama,60)}),e.jsx("td",{className:" max-w-[20rem] py-6 ",children:Ee.jumlah>0?e.jsx("p",{className:"px-6",children:Ee.kurun}):e.jsx("div",{className:"text-center mx-2",children:e.jsx(be,{badgeContent:e.jsx("p",{className:"w-32 leading-4",children:"BELUM ADA NASKAH"}),color:"warning",container:!0,title:"BELUM ADA NASKAH YANG DIBERKASKAN"})})}),e.jsx("td",{className:" max-w-[20rem] px-6 py-6 text-center",children:Ee.jumlah}),e.jsx("td",{className:" max-w-[20rem] px-6 py-6",children:Ee.tanggal_retensi_aktif?oa(Ee.tanggal_retensi_aktif,"DD-MM-YYYY").format("DD MMMM YYYY"):"-"}),e.jsxs("td",{className:"px-1 text-right w-[2rem]",children:[" ",Ee.action," "]})]},ve)):e.jsx(e.Fragment,{})]})]}),e.jsxs("nav",{className:"flex items-center justify-between p-4","aria-label":"Table navigation",children:[e.jsx("span",{className:"text-sm text-gray-400",children:oe.from&&`Menampilkan ${Se(oe.from)} sampai ${Se(oe.to)} dari ${Se(oe.total)} entri`}),e.jsx(xa,{currentPage:Re.page,lastPage:pe,displayCount:5,handleClick:ee})]})]})})]})}),e.jsx(ua,{})]}),e.jsxs(Fa,{open:X,onClose:Aa,children:[e.jsxs("div",{children:[e.jsx(_a,{children:e.jsxs("div",{className:"flex gap-4 items-center",children:[e.jsx(Mi,{className:"w-5 h-4"}),e.jsx("p",{children:"Form Upload Excel File"})]})}),e.jsx(ca,{initialValues:I,onSubmit:ja,validateOnChange:!0,validationSchema:sb,children:e.jsx(da,{id:"formUpload",encType:"multipart/form-data",className:"text-sm",children:e.jsx("div",{className:"mb-6 px-4",children:e.jsx(w,{mb:2,children:e.jsx(ce,{name:"file_import",children:({field:Ee,form:ve,meta:Ae})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"File Data Berkas Mandiri",required:!0,error:Ae.error&&Ae.touched}),e.jsx(et,{onFileSelected:Ue=>{ve.setFieldValue("file_import",Ue)},desc:"Ukuran maksimal file 2 MB. Format yang didukung: .XLS & .XLSX  ",acceptedType:["application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],notifFileTypeError:"File Hanya Support .XLS & .XLSX"}),e.jsx(ue,{text:Ae.error,error:Ae.error&&Ae.touched})]})})})})})})]}),e.jsx(ya,{children:e.jsxs(e.Fragment,{children:[!T&&e.jsx(Je,{submit:C,color:"success",formId:"formUpload",text:"Simpan"}),e.jsx(_e,{color:T?"dark":"error",variant:"gradient",onClick:()=>O(!1),children:T?"Tutup":"Batal"})]})})]})]})},rb=()=>{var G;const r="Berkas Mandiri",[s,n]=a.useState(!1),t=JSON.parse(Le.getItem("users")),i=new Yt,l=ga(),m=ha(),[p,B]=a.useState(null),[K,W]=a.useState({id:((G=l.state)==null?void 0:G.id)??null}),[z,T]=a.useState(-1),[L,$]=a.useState(!1),M="";a.useEffect(()=>{((t==null?void 0:t.group_role)===4||(p==null?void 0:p.status)=="TUTUP")&&$(!0)},[p,t]),a.useEffect(()=>{K.id&&(U.showLoading(),A(K.id).then(()=>{n(!0)}).catch(()=>{U.fire({title:"Data tidak ditemukan",text:"Kembali ke daftar",icon:"warning",backdrop:!0}).then(()=>{})}).finally(()=>U.close()))},[K.id,z]);const H=()=>{m("form-naskah",{state:{formode:"Tambah",berkas_id:p==null?void 0:p.id}})},V=()=>{var X;(X=l.state)!=null&&X.back?m(M+l.state.back):m(M+"/pemeliharaan_arsip/pemberkasan-mandiri")},A=async X=>{(X!=null||X!=null)&&await i.getDetail(X).then(O=>{B(O.data.result)})};return e.jsxs(aa,{children:[e.jsx(la,{}),s&&e.jsxs(e.Fragment,{children:[e.jsxs(ie,{pt:6,pb:3,className:"flex flex-col gap-10",children:[e.jsx(ie,{children:e.jsxs("div",{className:"flex justify-between p-3 items-center",children:[e.jsx(le,{variant:"h5",fontWeight:"medium",children:"Isi Arsip Mandiri"}),e.jsxs("div",{className:"flex gap-2 items-center",children:[!L&&e.jsxs(_e,{variant:"gradient",color:"info",onClick:H,children:[e.jsx(Ea,{size:"1.5em"}),e.jsx("p",{className:"ml-2",children:"Naskah Baru"})]}),e.jsxs(_e,{variant:"gradient",color:"secondary",onClick:V,children:[e.jsx(za,{size:"1.5em",className:"me-2"}),"Kembali"]})]})]})}),e.jsx(cl,{data:p,modul:r}),e.jsx(Me,{children:e.jsx(ie,{px:3,pt:3,lineHeight:1,children:e.jsx(Od,{berkasId:K.id,visibleview:L,modul:r})})})]}),e.jsx(ua,{})]})]})},nb=()=>{const r="Berkas Mandiri",s=ga(),n=new URLSearchParams(s.search).get("start_at"),t=new URLSearchParams(s.search).get("end_at"),i=new URLSearchParams(s.search).get("status"),l=new URLSearchParams(s.search).get("unit_kerja_id"),[m,p]=a.useState(!1),B=JSON.parse(Le.getItem("users"));a.useEffect(()=>{p(ge(r,"is_read",!0,!0)),k(l)},[]);const K=new Yt,W=new qa,[z,T]=a.useState(!1),[L,$]=a.useState(null),[M,H]=a.useState(null),[V,A]=a.useState(!1),[G,X]=a.useState(!1);let O=[];L==null?O=[]:O=L.map((o,F)=>({no:F+1,klasifikasi_kode:o.klasifikasi_kode,nomor:o.nomor,nama:o.nama,kurun:o.kurun,jumlah:o.jumlah,keterangan:o.penyusutan_akhir_nama}));const[I,_]=a.useState({start_at:n,end_at:t,status:i,organisasi_id:l});a.useEffect(()=>{C()},[I]);const C=async()=>{T(!0),await K.getLaporan(I).then(o=>{let F=o.data.result;F&&($(F),T(!1)),T(!1)}).catch(o=>{T(!1)})},k=async o=>{o&&await W.detail("organisasi/instansi",o,"").then(F=>{H(F)})},b=async()=>{A(!0),await K.downloadLaporanPdf(I).then(o=>{const F=`Laporan Berkas Mandiri_${i||"Semua Status"}_${oa(I==null?void 0:I.start_at).format("YYYY-MM-DD")}-${oa(I==null?void 0:I.end_at).format("YYYY-MM-DD")}.pdf`;es(o.data,F)}).catch(o=>{console.log({error:o})}).finally(()=>A(!1))},y=async()=>{X(!0),await K.downloadLaporanExcel(I).then(o=>{const F=`Laporan Berkas Mandiri_${i||"Semua Status"}_${oa(I==null?void 0:I.start_at).format("YYYY-MM-DD")}-${oa(I==null?void 0:I.end_at).format("YYYY-MM-DD")}.xls`;es(o.data,F)}).catch(o=>{console.log({error:o})}).finally(()=>X(!1))};return e.jsx(e.Fragment,{children:e.jsxs(aa,{children:[m&&e.jsx(ie,{pt:6,pb:3,children:e.jsxs(Me,{children:[e.jsxs("div",{className:"flex gap-2 m-4",children:[e.jsx(Je,{color:"error",text:e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx(ts,{size:"2em",className:"pe-2"}),"PDF"]}),submit:!V,onClick:b,size:"small",className:"text-sm whitespace-nowrap"}),e.jsx(Je,{color:"success",text:e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx($s,{size:"2em",className:"pe-2"}),"Excel"]}),submit:!G,onClick:y,size:"small",className:"text-sm whitespace-nowrap"})]}),e.jsxs(ie,{px:3,pt:3,lineHeight:1,className:"flex flex-col items-center justify-center",children:[e.jsxs("div",{className:"mb-3 text-center",children:[e.jsxs(le,{variant:"h3",fontWeight:"medium",children:["Daftar ",r]}),e.jsx(le,{variant:"h4",fontWeight:"medium",children:(M==null?void 0:M.nama)||(B==null?void 0:B.desc_unit_kerja)})]}),e.jsxs(le,{variant:"h5",fontWeight:"medium",children:[na(n,2)," - ",na(t,2)]}),e.jsxs(le,{variant:"h6",fontWeight:"medium",children:["Status: ",i||"-"]})]}),e.jsx("div",{className:"overflow-auto",children:e.jsxs("div",{className:"table p-10 min-w-full",children:[e.jsxs("table",{className:"w-full text-sm text-left !text-gray-700 dark:text-gray-400 table-bordered",children:[e.jsx("thead",{className:"text-xs text-gray-500 uppercase border-b-2 mb-1",children:e.jsxs("tr",{children:[e.jsx(q,{text:"No",className:"flex justify-center"}),e.jsx(q,{text:"Kode Klasifikasi"}),e.jsx(q,{text:"Nama Berkas"}),e.jsx(q,{text:"Kurun Waktu"}),e.jsx(q,{text:"Jumlah Item"}),e.jsx(q,{text:"Keterangan"})]})}),e.jsxs("tbody",{children:[z?e.jsx("tr",{children:e.jsx("td",{colSpan:9,children:e.jsx(ia,{})})}):e.jsx(e.Fragment,{}),O.length?O.map((o,F)=>e.jsxs("tr",{className:"border-b border-slate-300",children:[e.jsx("td",{className:" px-6 py-6 text-center",children:o.no}),e.jsx("td",{className:" max-w-[9rem] px-6 py-6",children:e.jsxs("div",{className:"flex-wrap",children:[" ",o.klasifikasi_kode]})}),e.jsx("td",{className:" max-w-[9rem] px-6 py-6",children:e.jsxs("div",{className:"flex-wrap",children:[o.nama," "]})}),e.jsx("td",{className:" max-w-[9rem] px-6 py-6",children:e.jsx("div",{className:"flex-wrap",children:o.jumlah>0?o.kurun:"-"})}),e.jsx("td",{className:" max-w-[9rem] px-6 py-6",children:e.jsx("div",{className:"flex-wrap",children:o.jumlah})}),e.jsx("td",{className:"max-w-[9rem] px-6 py-6",children:e.jsx("div",{className:"flex-wrap",children:o.keterangan?o.keterangan:"-"})})]},F)):e.jsx(e.Fragment,{})]})]}),e.jsx("nav",{className:"flex items-center justify-between p-4","aria-label":"Table navigation",children:e.jsxs("span",{className:"text-sm text-gray-400",children:["Menampilkan ",L==null?void 0:L.length," entri"]})})]})})]})}),e.jsx(ua,{})]})})},ib=()=>{const r="Berkas Mandiri",s=ga(),n=new URLSearchParams(s.search).get("start_at"),t=new URLSearchParams(s.search).get("end_at"),i=new URLSearchParams(s.search).get("status"),l=new URLSearchParams(s.search).get("unit_kerja_id"),m=JSON.parse(Le.getItem("users")),[p,B]=a.useState(!1);a.useEffect(()=>{B(ge(r,"is_read",!0,!0)),k(l)},[]);const K=new Yt,W=new qa,[z,T]=a.useState(!1),[L,$]=a.useState(null),[M,H]=a.useState(null),[V,A]=a.useState(!1),[G,X]=a.useState(!1);let O=[];L==null?O=[]:O=L.map((o,F)=>({no:F+1,klasifikasi_kode:o.klasifikasi_kode,item_berkas:o.item_berkas,nama:o.nama,uraian:o.uraian,tanggal:o.created_at,jumlah:o.jumlah,keterangan:o.penyusutan_akhir_nama}));const[I,_]=a.useState({start_at:n,end_at:t,status:i,organisasi_id:l});a.useEffect(()=>{C()},[I]);const C=async()=>{T(!0),await K.getLaporanIsi(I).then(o=>{let F=o.data.result;F&&($(F),T(!1)),T(!1)}).catch(o=>{T(!1)})},k=async o=>{o&&await W.detail("organisasi/instansi",o,"").then(F=>{H(F)})},b=async()=>{A(!0),await K.downloadLaporanIsiPdf(I).then(o=>{const F=`Laporan Isi Berkas Mandiri${i||"Semua Status"}_${oa(I==null?void 0:I.start_at).format("YYYY-MM-DD")}-${oa(I==null?void 0:I.end_at).format("YYYY-MM-DD")}.pdf`;es(o.data,F)}).catch(o=>{console.log({error:o})}).finally(()=>A(!1))},y=async()=>{X(!0),await K.downloadLaporanIsiExcel(I).then(o=>{const F=`Laporan Isi Berkas Mandiri${i||"Semua Status"}_${oa(I==null?void 0:I.start_at).format("YYYY-MM-DD")}-${oa(I==null?void 0:I.end_at).format("YYYY-MM-DD")}.xls`;es(o.data,F)}).catch(o=>{console.log({error:o})}).finally(()=>X(!1))};return e.jsx(e.Fragment,{children:e.jsxs(aa,{children:[p&&e.jsx(ie,{pt:6,pb:3,children:e.jsxs(Me,{children:[e.jsxs("div",{className:"flex gap-2 m-4",children:[e.jsx(Je,{color:"error",text:e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx(ts,{size:"2em",className:"pe-2"}),"PDF"]}),submit:!V,onClick:b,size:"small",className:"text-sm whitespace-nowrap"}),e.jsx(Je,{color:"success",text:e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx($s,{size:"2em",className:"pe-2"}),"Excel"]}),submit:!G,onClick:y,size:"small",className:"text-sm whitespace-nowrap"})]}),e.jsxs(ie,{px:3,pt:3,lineHeight:1,className:"flex flex-col items-center justify-center",children:[e.jsxs("div",{className:"mb-3 text-center",children:[e.jsxs(le,{variant:"h3",fontWeight:"medium",children:["Daftar ",r]}),e.jsx(le,{variant:"h4",fontWeight:"medium",children:(M==null?void 0:M.nama)||(m==null?void 0:m.desc_unit_kerja)})]}),e.jsxs(le,{variant:"h5",fontWeight:"medium",children:[na(n,2)," - ",na(t,2)]}),e.jsxs(le,{variant:"h6",fontWeight:"medium",children:["Status: ",i||"-"]})]}),e.jsx("div",{className:"overflow-auto",children:e.jsxs("div",{className:"table p-10 min-w-full",children:[e.jsxs("table",{className:"w-full text-sm text-left !text-gray-700 dark:text-gray-400 table-bordered",children:[e.jsx("thead",{className:"text-xs text-gray-500 uppercase border-b-2 mb-1",children:e.jsxs("tr",{children:[e.jsx(q,{text:"No Berkas"}),e.jsx(q,{text:"Kode Klasifikasi"}),e.jsx(q,{text:"No Item"}),e.jsx(q,{text:"Uraian Informasi Arsip"}),e.jsx(q,{text:"Tanggal"}),e.jsx(q,{text:"Jumlah"}),e.jsx(q,{text:"Keterangan"})]})}),e.jsxs("tbody",{children:[z?e.jsx("tr",{children:e.jsx("td",{colSpan:9,children:e.jsx(ia,{})})}):e.jsx(e.Fragment,{}),!!O.length&&O.map((o,F)=>{var x;return e.jsxs(Ga.Fragment,{children:[e.jsxs("tr",{className:"border-b border-slate-300",children:[e.jsx("td",{className:"px-6 py-6",colSpan:"4",children:e.jsxs("div",{className:"flex-wrap",children:[o.no,". ",o.klasifikasi_kode,". ",o==null?void 0:o.nama]})}),e.jsx("td",{className:" max-w-[9rem] px-6 py-6",children:e.jsx("div",{className:"flex-wrap",children:na(o.tanggal)})}),e.jsx("td",{className:" max-w-[9rem] px-6 py-6",children:e.jsx("div",{className:"flex-wrap",children:o.jumlah})}),e.jsx("td",{className:" max-w-[9rem] px-6 py-6",children:e.jsx("div",{className:"flex-wrap",children:o.penyusutan_akhir_nama})})]},o==null?void 0:o.id),(x=o.item_berkas)==null?void 0:x.map((S,f)=>e.jsxs("tr",{className:"border-b border-slate-300",children:[e.jsx("td",{className:" max-w-[2rem] px-6 py-6"}),e.jsx("td",{className:" max-w-[9rem] px-6 py-6"}),e.jsx("td",{className:" max-w-[9rem] px-6 py-6",children:e.jsxs("div",{className:"flex-wrap",children:[f+1," "]})}),e.jsx("td",{className:" max-w-[9rem] px-6 py-6",children:e.jsx("div",{className:"flex-wrap",children:S.hal})}),e.jsx("td",{className:" max-w-[9rem] px-6 py-6",children:e.jsx("div",{className:"flex-wrap",children:na(S.tanggal)})}),e.jsx("td",{className:"max-w-[9rem] px-6 py-6",children:e.jsx("div",{className:"flex-wrap",children:S.jumlah?S.jumlah:"0"})}),e.jsx("td",{className:" max-w-[9rem] px-6 py-6",children:e.jsx("div",{className:"flex-wrap",children:S.jenis_naskah})})]},`isi-${f}`))]},F)})]})]}),e.jsx("nav",{className:"flex items-center justify-between p-4","aria-label":"Table navigation",children:e.jsxs("span",{className:"text-sm text-gray-400",children:["Menampilkan ",(L==null?void 0:L.length)??0," entri"]})})]})})]})}),e.jsx(ua,{})]})})},lb=()=>{const r="Berkas Mandiri",[s,n]=a.useState(!1),t=JSON.parse(Le.getItem("users")),i=new Yt,l=new qa,m=ga(),p=ha(),[B,K]=a.useState(!1),[W,z]=a.useState(!0),[T,L]=a.useState([]),[$,M]=a.useState({}),[H,V]=a.useState([]),[A,G]=a.useState({formode:m.state.formode,id:m.state.id,organisasi_id:t==null?void 0:t.organisasi_id,public_organisasi_id:t==null?void 0:t.public_organisasi_id,date:new Date,kategori_ids:[]}),X="";a.useEffect(()=>{A.formode=="Tambah"&&n(ge(r,"is_create",!0)),A.formode=="Ubah"&&(U.showLoading(),O().then(()=>{n(ge(r,"is_update",!0))})),k()},[A.formode]);const O=async()=>{await i.getDetail(A.id).then(b=>{var o,F;let y=b.data.result;if(y){const x=(o=y==null?void 0:y.berkas_mandiri_kategori)==null?void 0:o.map(f=>f.kategori_id),S=(F=y==null?void 0:y.berkas_mandiri_kategori)==null?void 0:F.map(f=>({label:f.kategori_nama,value:f.kategori_id}));G(f=>({...f,...y,kategori_ids:x??[]})),V(S),C(y.penyusutan_akhir_id)}}).catch(b=>{var o,F;const y=Oe(b.response.data.result);U.fire("Gagal",y??((F=(o=b.response)==null?void 0:o.data)==null?void 0:F.message),"error")}).finally(()=>U.close())},I=b=>{z(!1),b.id!==0?i.put(b.id,b).then(y=>{var o,F,x;U.fire((o=y.data)!=null&&o.success?"Berhasil":"Gagal",(F=y.data)==null?void 0:F.message,(x=y.data)!=null&&x.success?"success":"warning"),y.data.success&&_()}).catch(y=>{var F,x;const o=Oe(y.response.data.result);U.fire("Gagal",o??((x=(F=y.response)==null?void 0:F.data)==null?void 0:x.message),"error")}).finally(()=>z(!0)):i.post(b).then(y=>{var o,F,x;U.fire((o=y.data)!=null&&o.success?"Berhasil":"Gagal",(F=y.data)==null?void 0:F.message,(x=y.data)!=null&&x.success?"success":"warning"),y.data.success&&_()}).catch(y=>{var F,x;const o=Oe(y.response.data.result);U.fire("Gagal",o??((x=(F=y.response)==null?void 0:F.data)==null?void 0:x.message),"error")}).finally(()=>z(!0))},_=()=>{p(X+"/pemeliharaan_arsip/pemberkasan-mandiri")},C=async b=>{b&&await l.detail("penyusutan-akhir",b,"master").then(y=>{M(y)})},k=async()=>{i.getKategoriBerkas().then(b=>{const o=b.data.result.map(F=>({label:F.keterangan,value:F.id}));L(o)})};return e.jsxs(aa,{children:[e.jsx(la,{}),s&&e.jsx(e.Fragment,{children:e.jsx(ie,{pt:6,pb:3,children:e.jsxs(Me,{children:[e.jsx(ie,{px:3,pt:3,lineHeight:1,children:e.jsxs("div",{className:"flex flex-row justify-between items-start md:items-center gap-2",children:[e.jsxs(le,{variant:"h5",fontWeight:"medium",children:[A.formode," Daftar Berkas Arsip Mandiri"," "]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs(_e,{variant:"gradient",color:"secondary",onClick:_,children:[e.jsx(za,{size:"1.5em",className:"me-2"}),A.formode!="Lihat"?"Batal":"Kembali"]})})]})}),e.jsxs("div",{className:"flex flex-col md:flex-row  gap-3 p-5 m-5 bg-gradient-to-r from-blue-300 to-blue-400 rounded-2xl",children:[e.jsx("div",{className:"m-0",children:e.jsx(Vn,{size:"2em",className:"text-white"})}),e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsxs(le,{variant:"body",color:"white",children:[e.jsx("b",{children:"Arsip Vital"})," yaitu arsip yang keberadaannya merupakan persyaratan dasar bagi kelangsungan operasional pencipta arsip, tidak dapat diperbarui, dan tidak tergantikan apabila rusak atau hilang."]}),e.jsxs(le,{variant:"body",color:"white",children:[e.jsx("b",{children:"Arsip Terjaga"})," yaitu arsip negara yang berkaitan dengan keberadaan dan kelangsungan hidup bangsa dan negara yang harus dijaga keutuhan, keamanan, dan keselamatannya."]})]})]}),e.jsx("div",{children:e.jsx(ca,{initialValues:A,onSubmit:I,validateOnChange:!0,validationSchema:ab,children:e.jsxs(da,{id:"form",encType:"multipart/form-data",className:"w-full ",children:[e.jsx(w,{mt:2,children:e.jsxs("div",{className:"px-6 pb-6 flex flex-col md:flex-row   gap-5 ",children:[e.jsxs("div",{className:"w-full md:w-1/2 grid grid-cols-2 gap-2 ",children:[e.jsx("div",{className:"col-span-2",children:e.jsx(w,{mt:3,children:e.jsx(ce,{name:"nama",children:({field:b,form:y,meta:o})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Nama Berkas",required:!0,error:o.error&&o.touched}),e.jsx(Ye,{...b,type:"text",placeholder:"Masukkan Nama Berkas...",error:o.error&&o.touched,disabled:B}),e.jsx(ue,{text:o.error,error:o.error&&o.touched})]})})})}),e.jsx("div",{className:"col-span-2 ",children:e.jsx(w,{mt:3,children:e.jsx(ce,{name:"date",children:({field:b,form:y,meta:o})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Tanggal Berkas",required:!0,error:o.error&&o.touched}),e.jsx(ht,{dateAdapter:mt,children:e.jsx(xt,{value:_s(b.value),onChange:F=>{y.setFieldValue("date",F)},format:"DD/MM/YYYY",className:"w-full"})}),e.jsx(ue,{text:o.error,error:o.error&&o.touched})]})})})}),e.jsx("div",{className:"col-span-2",children:e.jsx(w,{mt:3,children:e.jsx(ce,{name:"klasifikasi_kode",children:({field:b,form:y,meta:o})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Kode Klasifikasi",required:!0,error:o.error&&o.touched}),e.jsx(Ye,{...b,type:"text",placeholder:"Masukkan Kode Klasifikasi...",error:o.error&&o.touched,disabled:B}),e.jsx(ue,{text:o.error,error:o.error&&o.touched})]})})})}),e.jsx("div",{className:"col-span-2 md:col-span-1",children:e.jsx(w,{mt:3,children:e.jsx(ce,{name:"retensi_aktif",children:({field:b,form:y,meta:o})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Retensi Aktif",required:!0,error:o.error&&o.touched}),e.jsx("input",{...b,className:"inputCustom w-full",min:"0",type:"number",placeholder:"Retensi Aktif",error:o.error&&o.touched}),e.jsx(ue,{text:o.error,error:o.error&&o.touched})]})})})}),e.jsx("div",{className:"col-span-2 md:col-span-1",children:e.jsx(w,{mt:3,children:e.jsx(ce,{name:"retensi_inaktif",children:({field:b,form:y,meta:o})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Retensi Inaktif",required:!0,error:o.error&&o.touched}),e.jsx("input",{...b,className:"inputCustom w-full",min:"0",type:"number",placeholder:"Retensi Inaktif",error:o.error&&o.touched}),e.jsx(ue,{text:o.error,error:o.error&&o.touched})]})})})}),e.jsx("div",{className:"col-span-2",children:e.jsx(w,{mt:3,children:e.jsx(ce,{name:"nomor",children:({field:b,form:y,meta:o})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Nomor Berkas",required:!0,error:o.error&&o.touched}),e.jsx(Ye,{...b,type:"text",placeholder:"Nomor Berkas",error:o.error&&o.touched}),e.jsx(ue,{text:o.error,error:o.error&&o.touched})]})})})}),e.jsx("div",{className:"col-span-2",children:e.jsx(w,{mt:3,children:e.jsx(ce,{name:"penyusutan_akhir_id",children:({field:b,form:y,meta:o})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Penyusutan Akhir",required:!0,error:o.error&&o.touched}),e.jsx(ra,{...b,url:"penyusutan-akhir/select",targetService:"master",isDisabled:B,callbackChange:F=>{y.setFieldValue("penyusutan_akhir_id",(F==null?void 0:F.id)??""),y.setFieldValue("penyusutan_akhir_nama",(F==null?void 0:F.nama)??""),M(F??null)},selectedData:$,keyValue:["id","nama"],placeholder:"Pilih Penyusutan Akhir...",className:"text-sm",menuPortalTarget:null,optionParam:{"select-target":"select-penyusutan"}}),e.jsx(ue,{text:o.error,error:o.error&&o.touched})]})})})})]}),e.jsxs("div",{className:"w-full md:w-1/2",children:[e.jsx(w,{mt:3,children:e.jsx(ce,{name:"lokasi_fisik",children:({field:b,form:y,meta:o})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Lokasi Fisik",required:!1,error:o.error&&o.touched}),e.jsx(Ka,{...b,placeHolder:"Masukkan Lokasi Fisik..",error:o.error&&o.touched,disabled:B,rows:5}),e.jsx(ue,{text:o.error,error:o.error&&o.touched})]})})}),e.jsx(w,{mt:3,children:e.jsx(ce,{name:"uraian",children:({field:b,form:y,meta:o})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Uraian",required:!1,error:o.error&&o.touched}),e.jsx(Ka,{...b,placeHolder:"Masukkan Uraian..",error:o.error&&o.touched,disabled:B,rows:5}),e.jsx(ue,{text:o.error,error:o.error&&o.touched})]})})}),e.jsx(w,{mt:3,children:e.jsx(ce,{name:"kategori_ids",children:({field:b,form:y,meta:o})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Kategori Berkas",required:!1,error:o.error&&o.touched}),e.jsx(Gs,{placeholder:"Pilih Kategori Berkas...",isMulti:!0,options:T,value:H,isClearable:!0,isSearchable:!1,className:"w-full",onChange:F=>{const x=F==null?void 0:F.map(S=>S.value);y.setFieldValue("kategori_ids",x??[]),V(F)},classNamePrefix:"selectCustom"}),e.jsx(ue,{text:o.error,error:o.error&&o.touched})]})})})]})]})}),e.jsx("div",{className:"p-3 flex justify-end items-center w-full gap-5 mb-10",children:!B&&e.jsx(Je,{submit:W,color:"success",formId:"form",text:A.formode=="Tambah"?"Simpan":"Ubah"})})]})})})]})})})]})},ob=fa().shape({nama_pengirim:ze().required("Nama Pengirim harus diisi"),jabatan_pengirim:ze().required("Jabatan Pengirim harus diisi"),instansi_pengirim:ze().required("Instansi Pengirim harus diisi"),jenis_naskah:ze().required("Jenis Naskah harus diisi"),sifat_naskah:ze().required("Sifat Naskah harus diisi"),nomor:ze().required("Nomor Naskah harus diisi"),tipe_naskah:ze().required("Tipe Naskah harus diisi"),jenis_perkembangan:ze().required("Jenis Perkembangan harus dipilih"),ttd:ze().required("Tipe Tandatangan harus dipilih"),hal:ze().required("Hal harus diisi"),ringkasan:ze().required("Isi Ringkas harus diisi"),tujuan:ze().required("Tujuan harus diisi")}),cb=()=>{var h,d,j,g;const r=ha(),s="Berkas Mandiri",[n,t]=a.useState(!1),i=JSON.parse(Le.getItem("users")),l=new Yt,m=ga(),[p,B]=a.useState(null),[K,W]=a.useState([]),[z,T]=a.useState(!1),[L,$]=a.useState(!0),[M,H]=a.useState(!1),V={formode:(h=m==null?void 0:m.state)==null?void 0:h.formode,id:(d=m==null?void 0:m.state)==null?void 0:d.id,berkas_id:(j=m==null?void 0:m.state)==null?void 0:j.berkas_id,nama_pengirim:"",jabatan_pengirim:"",instansi_pengirim:"",jenis_naskah:"",sifat_naskah:"",tingkat_urgensi:"",nomor:"",referensi:"",tanggal:null,received_at:null,hal:"",ringkasan:"",jenis_perkembangan:"",tipe_naskah:"",ttd:"",tujuan:"",tembusan:"",tujuans:[],tembusans:[],file:null,organisasi_created_nama:i==null?void 0:i.desc_unit_kerja},[A,G]=a.useState(V),[X,O]=a.useState(null),[I,_]=a.useState(null),[C,k]=a.useState(null),[b,y]=a.useState(null),[o,F]=a.useState([]),[x,S]=a.useState([]),f="";a.useEffect(()=>{A.formode=="Tambah"&&t(ge(s,"is_create",!0)),A.formode=="Ubah"&&A.id&&(U.showLoading(),R().then(()=>{t(ge(s,"is_update",!0))}))},[A.formode,A.id]);const R=async()=>{await l.getDetailNaskah(A.id).then(c=>{var N;let v=(N=c==null?void 0:c.data)==null?void 0:N.result;v&&(G(Q=>({...Q,...v})),U.close())}).catch(c=>{var N,Q,re,ye;const v=Oe((Q=(N=c==null?void 0:c.response)==null?void 0:N.data)==null?void 0:Q.result);U.fire("Gagal",v??((ye=(re=c.response)==null?void 0:re.data)==null?void 0:ye.message),"error")})},u=c=>{B(c)},D=c=>{const v=c.tujuans;let N=c.tujuan?c.tujuan.split(";"):[],Q=[];N.length>0&&(Q=N.map((Ge,$e)=>{var Pe;return{id:((Pe=v[$e])==null?void 0:Pe.id)||-1,nama:N[$e]}}));const re=c.tembusans;let ye=c.tembusan?c.tembusan.split(";"):[],xe=[];ye.length>0&&(xe=ye.map((Ge,$e)=>{var Pe;return{id:((Pe=re[$e])==null?void 0:Pe.id)||-1,nama:ye[$e]}}));const fe={...c,tujuans:Q,tembusans:xe,tanggal:_s(c.tanggal).format(),received_at:_s(c.received_at).format()};c.id?($(!1),l.putNaskah(c.id,fe).then(Ge=>{var $e,Pe,te;Ge.data.success&&(U.fire(($e=Ge.data)!=null&&$e.success?"Berhasil":"Gagal",(Pe=Ge.data)==null?void 0:Pe.message,(te=Ge.data)!=null&&te.success?"success":"warning"),T(!0),P(),r(f+"/pemeliharaan_arsip/pemberkasan-mandiri/detail",{state:{id:c.berkas_id}}))}).catch(Ge=>{var Pe,te;const $e=Oe(Ge.response.data.result);U.fire("Gagal",$e??((te=(Pe=Ge.response)==null?void 0:Pe.data)==null?void 0:te.message),"error")}).finally(()=>$(!0))):p?($(!1),l.postNaskah(fe).then(Ge=>{var $e,Pe,te;Ge.data.success&&(U.fire(($e=Ge.data)!=null&&$e.success?"Berhasil":"Gagal",(Pe=Ge.data)==null?void 0:Pe.message,(te=Ge.data)!=null&&te.success?"success":"warning"),T(!0),P(),r(f+"/pemeliharaan_arsip/pemberkasan-mandiri/detail",{state:{id:c.berkas_id}}))}).catch(Ge=>{var Pe,te;const $e=Oe(Ge.response.data.result);U.fire("Gagal",$e??((te=(Pe=Ge.response)==null?void 0:Pe.data)==null?void 0:te.message),"error")}).finally(()=>$(!0))):U.fire("Peringatan","File Naskah Harus Diisi","warning")},E=()=>{r(-1)},J=a.useRef(),P=()=>{J.current.resetForm(),T(!0),B(null),G(V)};return e.jsxs(aa,{children:[e.jsx(la,{}),n&&e.jsxs(e.Fragment,{children:[e.jsx(ie,{pt:6,pb:3,children:e.jsxs(Me,{children:[e.jsx(ie,{px:3,pt:3,lineHeight:1,children:e.jsxs(w,{container:!0,direction:"row",justifyContent:"space-between",alignItems:"center",children:[e.jsx(w,{item:!0,children:e.jsx(le,{variant:"h5",fontWeight:"medium",children:"Form Naskah Baru"})}),e.jsxs(_e,{variant:"gradient",color:"secondary",onClick:E,children:[e.jsx(za,{size:"1.5em",className:"me-2"}),"Kembali"]})]})}),e.jsx(ca,{innerRef:J,initialValues:A,onSubmit:D,validateOnChange:!0,validationSchema:ob,children:e.jsxs(da,{id:"form",encType:"multipart/form-data",children:[e.jsx(w,{children:e.jsxs("div",{className:"p-6 grid grid-cols-12 mb-10 gap-5 lg:mb-0",children:[e.jsx("div",{className:"col-span-12 md:col-span-12",children:e.jsxs(w,{item:!0,children:[e.jsx(le,{variant:"body2",fontWeight:"medium",children:"IDENTITAS PENGIRIM NASKAH"}),e.jsx(gs,{})]})}),e.jsx("div",{className:"col-span-12 md:col-span-4",children:e.jsx(w,{children:e.jsx(ce,{name:"nama_pengirim",children:({field:c,meta:v})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Nama Pengirim",required:!0,error:v.error&&v.touched}),e.jsx(Ye,{...c,type:"text",placeholder:"Masukkan Nama Pengirim...",error:v.error&&v.touched}),e.jsx(ue,{text:v.error,error:v.error&&v.touched})]})})})}),e.jsx("div",{className:"col-span-12 md:col-span-4",children:e.jsx(w,{children:e.jsx(ce,{name:"jabatan_pengirim",children:({field:c,meta:v})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Jabatan Pengirim",required:!0,error:v.error&&v.touched}),e.jsx(Ye,{...c,type:"text",placeholder:"Masukkan Jabatan Pengirim...",error:v.error&&v.touched}),e.jsx(ue,{text:v.error,error:v.error&&v.touched})]})})})}),e.jsx("div",{className:"col-span-12 md:col-span-4",children:e.jsx(w,{children:e.jsx(ce,{name:"instansi_pengirim",children:({field:c,meta:v})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Instansi Pengirim",required:!0,error:v.error&&v.touched}),e.jsx(Ye,{...c,type:"text",placeholder:"Masukkan Instansi Pengirim...",error:v.error&&v.touched}),e.jsx(ue,{text:v.error,error:v.error&&v.touched})]})})})})]})}),e.jsx(w,{children:e.jsxs("div",{className:"p-6 grid grid-cols-12 mb-10 gap-5 lg:mb-0",children:[e.jsx("div",{className:"col-span-12 md:col-span-12",children:e.jsxs(w,{item:!0,children:[e.jsx(le,{variant:"body2",fontWeight:"medium",children:"DETIL ISI NASKAH"}),e.jsx(gs,{})]})}),e.jsxs("div",{className:"col-span-12 md:col-span-6",children:[e.jsx(w,{mb:2,children:e.jsx(ce,{name:"jenis_naskah",children:({field:c,form:v,meta:N})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Jenis Naskah",required:!0,error:N.error&&N.touched}),e.jsx(Ye,{...c,type:"text",placeholder:"Masukkan Jenis Naskah...",error:N.error&&N.touched}),e.jsx(ue,{text:N.error,error:N.error&&N.touched})]})})}),e.jsx(w,{mb:2,children:e.jsx(ce,{name:"sifat_naskah",children:({field:c,form:v,meta:N})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Sifat Naskah",required:!0,error:N.error&&N.touched}),e.jsx(Ye,{...c,type:"text",placeholder:"Masukkan Sifat Naskah...",error:N.error&&N.touched}),e.jsx(ue,{text:N.error,error:N.error&&N.touched})]})})}),e.jsx(w,{mb:2,children:e.jsx(ce,{name:"tingkat_urgensi",children:({field:c,form:v,meta:N})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Tingkat Urgensi",required:!0,error:N.error&&N.touched}),e.jsx(Ye,{...c,type:"text",placeholder:"Masukkan Tingkat Urgensi...",error:N.error&&N.touched}),e.jsx(ue,{text:N.error,error:N.error&&N.touched})]})})}),e.jsx(w,{mb:2,children:e.jsx(ce,{name:"nomor",children:({field:c,meta:v})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Nomor Naskah",required:!0,error:v.error&&v.touched}),e.jsx(Ye,{...c,type:"text",placeholder:"Masukkan Nomor Naskah...",error:v.error&&v.touched}),e.jsx(ue,{text:v.error,error:v.error&&v.touched})]})})}),e.jsx(w,{mb:2,children:e.jsx(ce,{name:"referensi",children:({field:c,form:v,meta:N})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Nomor Referensi",required:!1,error:N.error&&N.touched}),e.jsx(Ye,{...c,type:"text",placeholder:"Masukkan Nomor Referensi...",error:N.error&&N.touched}),e.jsx(ue,{text:N.error,error:N.error&&N.touched})]})})}),e.jsx(w,{mb:2,children:e.jsx(ce,{name:"tanggal",children:({field:c,form:v,meta:N})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Tanggal Naskah",required:!0,error:N.error&&N.touched}),e.jsx(ht,{dateAdapter:mt,children:e.jsx(xt,{value:_s(c.value),onChange:Q=>{v.setFieldValue("tanggal",Q)},format:"DD/MM/YYYY"})}),e.jsx(ue,{text:N.error,error:N.error&&N.touched})]})})}),e.jsx(w,{mb:2,children:e.jsx(ce,{name:"received_at",children:({field:c,form:v,meta:N})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Tanggal Diterima",required:!0,error:N.error&&N.touched}),e.jsx(ht,{dateAdapter:mt,children:e.jsx(xt,{value:_s(c.value),onChange:Q=>v.setFieldValue("received_at",Q),format:"DD/MM/YYYY"})}),e.jsx(ue,{text:N.error,error:N.error&&N.touched})]})})})]}),e.jsxs("div",{className:"col-span-12 md:col-span-6",children:[e.jsx(w,{mb:2,children:e.jsx(ce,{name:"tipe_naskah",children:({field:c,form:v,meta:N})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Tipe Naskah",required:!0,error:N.error&&N.touched}),e.jsxs("div",{className:"space-x-4 flex flex-row items-center mt-4",children:[e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{...c,type:"radio",className:"form-radio  w-4 h-4 text-blue-500 focus:ring-2 focus:ring-blue-500",value:"NASKAH MASUK",checked:c.value=="NASKAH MASUK",disabled:M}),e.jsx("span",{className:"text-gray-700 text-sm",children:"Naskah Masuk"})]}),e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{...c,type:"radio",className:"form-radio  w-4 h-4 text-blue-500 focus:ring-2 focus:ring-blue-500",value:"NASKAH KELUAR",disabled:M,checked:c.value=="NASKAH KELUAR"}),e.jsx("span",{className:"text-gray-700 text-sm",children:"Naskah Keluar"})]})]}),e.jsx(ue,{text:N.error,error:N.error&&N.touched})]})})}),e.jsx(w,{mb:2,children:e.jsx(ce,{name:"jenis_perkembangan",children:({field:c,form:v,meta:N})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Jenis Perkembangan",required:!0,error:N.error&&N.touched}),e.jsxs("div",{className:"space-x-4 flex flex-row items-center mt-4",children:[e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{...c,type:"radio",className:"form-radio  w-4 h-4 text-blue-500 focus:ring-2 focus:ring-blue-500",value:"ASLI",checked:c.value=="ASLI",disabled:M}),e.jsx("span",{className:"text-gray-700 text-sm",children:"Asli"})]}),e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{...c,type:"radio",className:"form-radio  w-4 h-4 text-blue-500 focus:ring-2 focus:ring-blue-500",value:"COPY",disabled:M,checked:c.value=="COPY"}),e.jsx("span",{className:"text-gray-700 text-sm",children:"Copy"})]})]}),e.jsx(ue,{text:N.error,error:N.error&&N.touched})]})})}),e.jsx(w,{mb:2,children:e.jsx(ce,{name:"ttd",children:({field:c,form:v,meta:N})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Tipe Tanda Tangan",required:!0,error:N.error&&N.touched}),e.jsxs("div",{className:"space-x-4 flex flex-row items-center mt-4",children:[e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{...c,type:"radio",className:"form-radio  w-4 h-4 text-blue-500 focus:ring-2 focus:ring-blue-500",value:"TTE",checked:c.value=="TTE",disabled:M}),e.jsx("span",{className:"text-gray-700 text-sm",children:"Elektronik"})]}),e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{...c,type:"radio",className:"form-radio  w-4 h-4 text-blue-500 focus:ring-2 focus:ring-blue-500",value:"KONVENSIONAL",disabled:M,checked:c.value=="KONVENSIONAL"}),e.jsx("span",{className:"text-gray-700 text-sm",children:"Konvensional"})]})]}),e.jsx(ue,{text:N.error,error:N.error&&N.touched})]})})}),e.jsx(w,{mb:2,children:e.jsx(ce,{name:"hal",children:({field:c,meta:v})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Hal",required:!0,error:v.error&&v.touched}),e.jsx(Ka,{...c,placeHolder:"Masukkan Hal...",error:v.error&&v.touched}),e.jsx(ue,{text:v.error,error:v.error&&v.touched})]})})}),e.jsx(w,{mb:2,children:e.jsx(ce,{name:"ringkasan",children:({field:c,meta:v})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Isi Ringkas",required:!0,error:v.error&&v.touched}),e.jsx(Ka,{...c,rows:8,placeHolder:"Masukkan Isi Ringkas...",error:v.error&&v.touched}),e.jsx(ue,{text:v.error,error:v.error&&v.touched})]})})}),e.jsx(w,{mb:2,children:e.jsx(ce,{name:"file",children:({field:c,form:v,meta:N})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"File Naskah",required:!0,error:N.error&&N.touched}),e.jsx("p",{onClick:Q=>{Q.stopPropagation(),Wa(A.file,A.file_path??"naskah-mandiri")},className:"text-blue-500 mb-4 cursor-pointer",children:A==null?void 0:A.file_name_original}),e.jsx(nl,{onFileSelected:Q=>{u(Q),v.setFieldValue("file",Q??"")},isReset:z,desc:e.jsxs(e.Fragment,{children:["Format yang didukung: .PDF ",e.jsx("br",{})," Ukuran File Maksimal 5 MB"]}),descBox:"Untuk menambahkan File, seret dan lepas file tersebut ke sini, atau klik untuk memilih file.",accaptedType:["application/pdf"],notifFileTypeError:"File Hanya Support PDF",maxSizePerFileInMb:5}),e.jsx(ue,{text:N.error,error:N.error&&N.touched})]})})})]})]})}),e.jsx(w,{children:e.jsxs("div",{className:"p-6 grid grid-cols-12 mb-10 gap-5 lg:mb-0",children:[e.jsx("div",{className:"col-span-12 md:col-span-12",children:e.jsxs(w,{item:!0,children:[e.jsx(le,{variant:"body2",fontWeight:"medium",children:"TUJUAN NASKAH"}),e.jsx(gs,{})]})}),e.jsx("div",{className:"col-span-12 md:col-span-6",children:e.jsx(w,{mb:2,children:e.jsx(ce,{name:"tujuan",children:({field:c,form:v,meta:N})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Utama",required:!0,error:N.error&&N.touched}),e.jsx(Ye,{...c,type:"text",placeholder:"Masukkan Tujuan Utama...",error:N.error&&N.touched}),e.jsx(ue,{text:N.error,error:N.error&&N.touched})]})})})}),e.jsx("div",{className:"col-span-12 md:col-span-6",children:e.jsx(w,{mb:2,children:e.jsx(ce,{name:"tembusan",children:({field:c,form:v,meta:N})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Tembusan",required:!1,error:N.error&&N.touched}),e.jsx(Ye,{...c,type:"text",placeholder:"Masukkan Tujuan Tembusan...",error:N.error&&N.touched}),e.jsx(ue,{text:N.error,error:N.error&&N.touched})]})})})})]})}),e.jsxs("div",{className:"p-3 flex justify-end items-center w-full gap-5 mb-10",children:[e.jsx(Je,{submit:L,color:"success",formId:"form",text:"Simpan"}),((g=m==null?void 0:m.state)==null?void 0:g.formode)=="Tambah"&&e.jsx(_e,{color:"info",onClick:P,type:"button",variant:"gradient",children:"Reset"})]})]})})]})}),e.jsx(ua,{})]})]})},db=fa().shape({nama_pengirim:ze().required("Nama Pengirim harus diisi"),jabatan_pengirim:ze().required("Jabatan Pengirim harus diisi"),instansi_pengirim:ze().required("Instansi Pengirim harus diisi"),jenis_naskah_id:ze().required("Jenis Naskah harus diisi"),sifat_naskah_id:ze().required("Sifat Naskah harus diisi"),nomor:ze().required("Nomor Naskah harus dipilih"),tanggal:jr().required("Tanggal Naskah harus dipilih"),received_at:jr().required("Tanggal Diterima harus dipilih"),jenis_perkembangan:ze().required("Jenis Perkembangan harus dipilih"),hal:ze().required("Hal harus diisi"),ringkasan:ze().required("Isi Ringkas harus diisi"),file:Qa().required("File Naskah Harus Diisi")}),ub=()=>{var ja,Aa;const r=ha(),s="Berkas Aktif",[n,t]=a.useState(!1),i=JSON.parse(Le.getItem("users")),l=new ot,m=ga(),[p,B]=a.useState(null),[K,W]=a.useState([]),[z,T]=a.useState(!1),[L,$]=a.useState(!0),[M,H]=a.useState(!1),[V,A]=a.useState({nama_pengirim:"",jabatan_pengirim:"",instansi_pengirim:"",formode:(ja=m==null?void 0:m.state)==null?void 0:ja.formode,berkas_id:(Aa=m==null?void 0:m.state)==null?void 0:Aa.id,user_created_id:i==null?void 0:i.id,user_created_nama:i==null?void 0:i.nama,organisasi_created_id:i==null?void 0:i.organisasi_id,organisasi_created_nama:i==null?void 0:i.desc_instansi,jenis_naskah_id:0,jenis_naskah_nama:"",sifat_naskah_id:0,sifat_naskah_nama:"",nomor:"",reply_id:"",tanggal:null,received_at:null,hal:"",ringkasan:"",jenis_perkembangan:"",tipe_naskah:"",ttd:"",tujuan_internal_id:[],tembusan_internal_id:[],lampirans:[],file:null}),[G,X]=a.useState(null),[O,I]=a.useState(null),[_,C]=a.useState(null),[k,b]=a.useState(null),[y,o]=a.useState([]),[F,x]=a.useState([]),[S,f]=a.useState(""),[R,u]=a.useState([]);a.useEffect(()=>{t(ge(s,"is_create",!0))},[]);const D=Ee=>{B(Ee)},E=Ee=>{W(Ee)},J=Ee=>{if(p){$(!1);let Ae=[];if(K.length>0)for(var ve=0;ve<K.length;ve++)Ae.push({file:K[ve],naskah:Ee.tipe_naskah});const Ue=Object.assign(Ee,{file:p,lampirans:Ae}),ma=sm(Ue),La="";l.postNaskahAktif(ma).then(We=>{var qe,He,Ve;We.data.success&&(U.fire((qe=We.data)!=null&&qe.success?"Berhasil":"Gagal",(He=We.data)==null?void 0:He.message,(Ve=We.data)!=null&&Ve.success?"success":"warning"),T(!0),d(),r(La+"/pemeliharaan-arsip/pemberkasan-arsip-aktif/detail",{state:{id:Ee.berkas_id}}))}).catch(We=>{var He,Ve;const qe=Oe(We.response.data.result);U.fire("Gagal",qe??((Ve=(He=We.response)==null?void 0:He.data)==null?void 0:Ve.message),"error")}).finally(()=>$(!0))}else U.fire("Peringatan","File Naskah Harus Diisi","warning")},P=()=>{r(-1)},h=a.useRef(),d=()=>{h.current.resetForm(),T(!0),B(null),W(null),X(null),I(null),C(null),b(null),x(null),o(null)},[j,g]=a.useState(!1),[c,v]=a.useState(!0),[N,Q]=a.useState([]),[re,ye]=a.useState(!1),[xe,fe]=a.useState(!1),[Ge,$e]=a.useState(!1),[Pe,te]=a.useState(!1),[ne,pe]=a.useState(!1),[he,oe]=a.useState(!1),[je,Ne]=a.useState(!1),[Re,sa]=a.useState(!1),[Te,me]=a.useState(!1),[ee,Y]=a.useState(!1),[ke,De]=a.useState(!1),[ta,Be]=a.useState(!1),[Fe,Ke]=a.useState(!1),[Qe,ea]=a.useState(!1);return a.useEffect(()=>{var Ee,ve,Ae;t(ge(s,"is_read",!0)),ye(!1),fe(!1),$e(!1),te(!1),pe(!1),oe(!1),Ne(!1),sa(!1),me(!1),Y(!1),De(!1),Be(!1),Ke(!1),ea(!1),V!=null&&V.balas&&(Q({id:(Ee=V==null?void 0:V.reference)==null?void 0:Ee.id,nomor_hal:(ve=V==null?void 0:V.reference)==null?void 0:ve.nomor_hal}),A({...V,reply_id:(Ae=V==null?void 0:V.reference)==null?void 0:Ae.id}))},[]),e.jsxs(aa,{children:[e.jsx(la,{}),n&&e.jsxs(e.Fragment,{children:[e.jsx(ie,{pt:6,pb:3,children:e.jsxs(Me,{children:[e.jsx(ie,{px:3,pt:3,lineHeight:1,children:e.jsxs(w,{container:!0,direction:"row",justifyContent:"space-between",alignItems:"center",children:[e.jsx(w,{item:!0,children:e.jsx(le,{variant:"h5",fontWeight:"medium",children:"Form Naskah Baru"})}),e.jsxs(_e,{variant:"gradient",color:"secondary",onClick:P,children:[e.jsx(za,{size:"1.5em",className:"me-2"}),"Kembali"]})]})}),e.jsx(ca,{innerRef:h,initialValues:V,onSubmit:J,validateOnChange:!0,validationSchema:db,enableReinitialize:!0,children:e.jsxs(da,{id:"form",encType:"multipart/form-data",children:[e.jsx(w,{children:e.jsxs("div",{className:"p-6 grid grid-cols-12 mb-10 gap-5 lg:mb-0",children:[e.jsx("div",{className:"col-span-12 md:col-span-12",children:e.jsxs(w,{item:!0,children:[e.jsx(le,{variant:"body2",fontWeight:"medium",children:"IDENTITAS PENGIRIM NASKAH"}),e.jsx(gs,{})]})}),e.jsx("div",{className:"col-span-12 md:col-span-4",children:e.jsx(w,{children:e.jsx(ce,{name:"nama_pengirim",children:({field:Ee,meta:ve})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Nama Pengirim",required:!0,error:ve.error&&ve.touched}),e.jsx(Ye,{...Ee,type:"text",placeholder:"Masukkan Nama Pengirim...",error:ve.error&&ve.touched}),e.jsx(ue,{text:ve.error,error:ve.error&&ve.touched})]})})})}),e.jsx("div",{className:"col-span-12 md:col-span-4",children:e.jsx(w,{children:e.jsx(ce,{name:"jabatan_pengirim",children:({field:Ee,meta:ve})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Jabatan Pengirim",required:!0,error:ve.error&&ve.touched}),e.jsx(Ye,{...Ee,type:"text",placeholder:"Masukkan Jabatan Pengirim...",error:ve.error&&ve.touched}),e.jsx(ue,{text:ve.error,error:ve.error&&ve.touched})]})})})}),e.jsx("div",{className:"col-span-12 md:col-span-4",children:e.jsx(w,{children:e.jsx(ce,{name:"instansi_pengirim",children:({field:Ee,meta:ve})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Instansi Pengirim",required:!0,error:ve.error&&ve.touched}),e.jsx(Ye,{...Ee,type:"text",placeholder:"Masukkan Instansi Pengirim...",error:ve.error&&ve.touched}),e.jsx(ue,{text:ve.error,error:ve.error&&ve.touched})]})})})})]})}),e.jsx(w,{children:e.jsxs("div",{className:"p-6 grid grid-cols-12 mb-10 gap-5 lg:mb-0",children:[e.jsx("div",{className:"col-span-12 md:col-span-12",children:e.jsxs(w,{item:!0,children:[e.jsx(le,{variant:"body2",fontWeight:"medium",children:"DETIL ISI NASKAH"}),e.jsx(gs,{})]})}),e.jsxs("div",{className:"col-span-12 md:col-span-6",children:[e.jsx(w,{mb:2,children:e.jsx(ce,{name:"tipe_naskah",children:({field:Ee,form:ve,meta:Ae})=>{const Ue=ma=>{const La=ma.target.value;ve.setFieldValue(Ee.name,La),La==="NASKAH KELUAR"?(v(!0),ye(!0),fe(!0),$e(!0),te(!0),pe(!0),oe(!0),Ne(!0),sa(!0),me(!0),Y(!0),De(!0),Be(!0),Ke(!0)):La==="NASKAH MASUK"&&(v(!1),ye(!0),fe(!0),$e(!1),te(!0),pe(!0),oe(!0),Ne(!0),sa(!0),me(!1),Y(!0),De(!0),Be(!0),Ke(!0))};return e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Tipe Naskah",required:!0,error:Ae.error&&Ae.touched}),e.jsxs("div",{className:"space-x-4 flex flex-row items-center mt-4",children:[e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{...Ee,type:"radio",className:"form-radio  w-4 h-4 text-blue-500 focus:ring-2 focus:ring-blue-500",value:"NASKAH MASUK",checked:Ee.value=="NASKAH MASUK",disabled:M,onChange:Ue}),e.jsx("span",{className:"text-gray-700 text-sm",children:"Naskah Masuk"})]}),e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{...Ee,type:"radio",className:"form-radio  w-4 h-4 text-blue-500 focus:ring-2 focus:ring-blue-500",value:"NASKAH KELUAR",disabled:M,checked:Ee.value=="NASKAH KELUAR",onChange:Ue}),e.jsx("span",{className:"text-gray-700 text-sm",children:"Naskah Keluar"})]})]}),e.jsx(ue,{text:Ae.error,error:Ae.error&&Ae.touched})]})}})}),e.jsx(w,{mb:2,children:e.jsx(ce,{name:"jenis_naskah_id",children:({field:Ee,form:ve,meta:Ae})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Jenis Naskah",required:!0,error:Ae.error&&Ae.touched}),e.jsx(ra,{url:"tatanaskah/jenis-naskah/select",callbackChange:Ue=>{ve.setFieldValue("jenis_naskah_id",(Ue==null?void 0:Ue.id)??0),ve.setFieldValue("jenis_naskah_nama",(Ue==null?void 0:Ue.jenis_naskah)??0),X(Ue)},selectedData:G,keyValue:["id","jenis_naskah"],placeholder:"Pilih Jenis Naskah...",className:"text-sm",menuPortalTarget:null,isMulti:!1,optionParam:{"select-target":"select-jenis-naskah-by-instansi",public_organisasi_id:i==null?void 0:i.public_organisasi_id},targetService:"master",isDisabled:!re}),e.jsx(ue,{text:Ae.error,error:Ae.error&&Ae.touched})]})})}),e.jsx(w,{mb:2,children:e.jsx(ce,{name:"sifat_naskah_id",children:({field:Ee,form:ve,meta:Ae})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Sifat Naskah",required:!0,error:Ae.error&&Ae.touched}),e.jsx(ra,{url:"tatanaskah/sifat-naskah/select",callbackChange:Ue=>{ve.setFieldValue("sifat_naskah_id",(Ue==null?void 0:Ue.id)??0),ve.setFieldValue("sifat_naskah_nama",(Ue==null?void 0:Ue.sifat_naskah)??""),I(Ue)},selectedData:O,keyValue:["id","sifat_naskah"],placeholder:"Pilih Sifat Naskah...",className:"text-sm",menuPortalTarget:null,isMulti:!1,optionParam:{"select-target":"select-sifat-naskah-by-unitkerja",public_organisasi_id:i==null?void 0:i.public_organisasi_id},targetService:"master",isDisabled:!xe}),e.jsx(ue,{text:Ae.error,error:Ae.error&&Ae.touched})]})})}),Ge&&e.jsx(w,{mb:2,children:e.jsx(ce,{name:"klasifikasi_id",children:({field:Ee,form:ve,meta:Ae})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Klasifikasi",required:!0,error:Ae.error&&Ae.touched}),e.jsx(ra,{url:"klasifikasi/select",callbackChange:Ue=>{ve.setFieldValue("klasifikasi_id",(Ue==null?void 0:Ue.id)??""),ve.setFieldValue("klasifikasi_nama",(Ue==null?void 0:Ue.nama)??""),u(Ue),ve.setFieldValue("nomor","")},selectedData:R,keyValue:["id","kode_nama"],placeholder:"Pilih Klasifikasi...",className:"text-sm",menuPortalTarget:null,optionParam:{"select-target":"klasifikasi-by-unitkerja",role:i==null?void 0:i.role,unitkerja:S,organisasi_id:i==null?void 0:i.organisasi_id,public_organisasi_id:i==null?void 0:i.public_organisasi_id},isMulti:!1,targetService:"master",isDisabled:!Ge}),e.jsx(ue,{text:Ae.error,error:Ae.error&&Ae.touched})]})})}),e.jsx(w,{mb:2,children:e.jsx(ce,{name:"nomor",children:({field:Ee,meta:ve})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Nomor Naskah",required:!1,error:ve.error&&ve.touched}),e.jsx(Ye,{...Ee,type:"text",placeholder:"Masukkan Nomor Naskah...",error:ve.error&&ve.touched,disabled:!Pe}),e.jsx(ue,{text:ve.error,error:ve.error&&ve.touched})]})})}),c&&e.jsx(w,{mb:2,children:e.jsx(ce,{name:"reference_id",children:({field:Ee,form:ve,meta:Ae})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Nomor Referensi",required:!1,error:Ae.error&&Ae.touched}),e.jsx(ra,{url:"naskah-dinas/nomor-referensi-keluar/select",isDisabled:!ne||!!V.balas,callbackChange:Ue=>{ve.setFieldValue("reply_id",(Ue==null?void 0:Ue.id)??"")},selectedData:N,keyValue:["id","nomor"],placeholder:"Pilih Nomor Naskah...",className:"text-sm",menuPortalTarget:null,optionParam:{"select-target":"nomor-referensi",user_id:i==null?void 0:i.id,organisasi_id:i==null?void 0:i.organisasi_id},targetService:"nk"}),e.jsx(ue,{text:Ae.error,error:Ae.error&&Ae.touched})]})})}),e.jsx(w,{mb:2,children:e.jsx(ce,{name:"tanggal",children:({field:Ee,form:ve,meta:Ae})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Tanggal Naskah",required:!0,error:Ae.error&&Ae.touched}),e.jsx(ht,{dateAdapter:mt,children:e.jsx(xt,{value:_s(Ee.value),onChange:Ue=>{ve.setFieldValue("tanggal",_s(Ue).format())},format:"DD/MM/YYYY",disabled:!he})}),e.jsx(ue,{text:Ae.error,error:Ae.error&&Ae.touched})]})})}),e.jsx(w,{mb:2,children:e.jsx(ce,{name:"received_at",children:({field:Ee,form:ve,meta:Ae})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Tanggal Diterima",required:!0,error:Ae.error&&Ae.touched}),e.jsx(ht,{dateAdapter:mt,children:e.jsx(xt,{value:_s(Ee.value),onChange:Ue=>ve.setFieldValue("received_at",_s(Ue).format()),format:"DD/MM/YYYY",disabled:!je})}),e.jsx(ue,{text:Ae.error,error:Ae.error&&Ae.touched})]})})})]}),e.jsxs("div",{className:"col-span-12 md:col-span-6",children:[e.jsx(w,{mb:2,children:e.jsx(ce,{name:"jenis_perkembangan",children:({field:Ee,form:ve,meta:Ae})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Jenis Perkembangan",required:!0,error:Ae.error&&Ae.touched}),e.jsxs("div",{className:"space-x-4 flex flex-row items-center mt-4",children:[e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{...Ee,type:"radio",className:"form-radio  w-4 h-4 text-blue-500 focus:ring-2 focus:ring-blue-500",value:"ASLI",checked:Ee.value=="ASLI",disabled:!Re}),e.jsx("span",{className:"text-gray-700 text-sm",children:"Asli"})]}),e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{...Ee,type:"radio",className:"form-radio  w-4 h-4 text-blue-500 focus:ring-2 focus:ring-blue-500",value:"COPY",checked:Ee.value=="COPY",disabled:!Re}),e.jsx("span",{className:"text-gray-700 text-sm",children:"Copy"})]})]}),e.jsx(ue,{text:Ae.error,error:Ae.error&&Ae.touched})]})})}),Te&&e.jsx(w,{mb:2,children:e.jsx(ce,{name:"ttd",children:({field:Ee,form:ve,meta:Ae})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Tipe Tanda Tangan",required:!0,error:Ae.error&&Ae.touched}),e.jsxs("div",{className:"space-x-4 flex flex-row items-center mt-4",children:[e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{...Ee,type:"radio",className:"form-radio  w-4 h-4 text-blue-500 focus:ring-2 focus:ring-blue-500",value:"TTE",checked:Ee.value=="TTE",disabled:!Te}),e.jsx("span",{className:"text-gray-700 text-sm",children:"Elektronik"})]}),e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{...Ee,type:"radio",className:"form-radio  w-4 h-4 text-blue-500 focus:ring-2 focus:ring-blue-500",value:"KONVENSIONAL",checked:Ee.value=="KONVENSIONAL",disabled:!Te}),e.jsx("span",{className:"text-gray-700 text-sm",children:"Konvensional"})]})]}),e.jsx(ue,{text:Ae.error,error:Ae.error&&Ae.touched})]})})}),e.jsx(w,{mb:2,children:e.jsx(ce,{name:"hal",children:({field:Ee,meta:ve})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Hal",required:!0,error:ve.error&&ve.touched}),e.jsx(Ka,{...Ee,placeHolder:"Masukkan Hal...",error:ve.error&&ve.touched,disabled:!ke}),e.jsx(ue,{text:ve.error,error:ve.error&&ve.touched})]})})}),e.jsx(w,{mb:2,children:e.jsx(ce,{name:"ringkasan",children:({field:Ee,meta:ve})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Isi Ringkas",required:!0,error:ve.error&&ve.touched}),e.jsx(Ka,{...Ee,rows:8,placeHolder:"Masukkan Isi Ringkas...",error:ve.error&&ve.touched,disabled:!ee}),e.jsx(ue,{text:ve.error,error:ve.error&&ve.touched})]})})}),e.jsx(w,{mb:2,children:e.jsx(ce,{name:"file",children:({field:Ee,form:ve,meta:Ae})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"File Naskah",required:!0,error:Ae.error&&Ae.touched}),e.jsx(nl,{onFileSelected:Ue=>{D(Ue),ve.setFieldValue("file",Ue??"")},isReset:z,desc:e.jsxs(e.Fragment,{children:["Format yang didukung: .PDF ",e.jsx("br",{})," Ukuran File Maksimal 5 MB"]}),descBox:"Untuk menambahkan File, seret dan lepas file tersebut ke sini, atau klik untuk memilih file.",accaptedType:["application/pdf"],notifFileTypeError:"File Hanya Support PDF",maxSizePerFileInMb:5,disabled:!Qe}),e.jsx(ue,{text:Ae.error,error:Ae.error&&Ae.touched})]})})})]})]})}),e.jsx(w,{children:e.jsxs("div",{className:"p-6 grid grid-cols-12 mb-10 gap-5 lg:mb-0",children:[e.jsx("div",{className:"col-span-12 md:col-span-12",children:e.jsxs(w,{item:!0,children:[e.jsx(le,{variant:"body2",fontWeight:"medium",children:"LAMPIRAN NASKAH"}),e.jsx(gs,{})]})}),e.jsx("div",{className:"col-span-12 md:col-span-12",children:e.jsx(w,{mb:2,children:e.jsx(ce,{name:"lampiran",children:({field:Ee,meta:ve})=>e.jsxs(e.Fragment,{children:[e.jsx(at,{onFileSelected:E,isReset:z,maxSizePerFileInMb:5,descBox:"Untuk menambahkan File, seret dan lepas file tersebut ke sini, atau klik untuk memilih file."}),e.jsx(ue,{text:ve.error,error:ve.error&&ve.touched})]})})})})]})}),e.jsx(w,{children:e.jsxs("div",{className:"p-6 grid grid-cols-12 mb-10 gap-5 lg:mb-0",children:[e.jsx("div",{className:"col-span-12 md:col-span-12",children:e.jsxs(w,{item:!0,children:[e.jsx(le,{variant:"body2",fontWeight:"medium",children:"TUJUAN NASKAH"}),e.jsx(gs,{})]})}),e.jsx("div",{className:"col-span-12 md:col-span-6",children:e.jsx(w,{mb:2,children:e.jsx(ce,{name:"tujuan_internal_id",children:({field:Ee,form:ve,meta:Ae})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Utama",required:!1,error:Ae.error&&Ae.touched}),e.jsx(ra,{url:"pengguna/tujuan/tujuan-internal",callbackChange:Ue=>{ve.setFieldValue("tujuan_internal_id",Ue)},selectedData:y,keyValue:["id","nama_full"],placeholder:"Pilih Utama / Tujuan...",className:"text-sm",menuPortalTarget:null,isMulti:!0,optionParam:{public_organisasi_id:i==null?void 0:i.public_organisasi_id},isDisabled:!Fe}),e.jsx(ue,{text:Ae.error,error:Ae.error&&Ae.touched})]})})})}),e.jsx("div",{className:"col-span-12 md:col-span-6",children:e.jsx(w,{mb:2,children:e.jsx(ce,{name:"tembusan_internal_id",children:({field:Ee,form:ve,meta:Ae})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Tembusan",required:!1,error:Ae.error&&Ae.touched}),e.jsx(ra,{url:"pengguna/tujuan/tujuan-internal",callbackChange:Ue=>{ve.setFieldValue("tembusan_internal_id",Ue)},selectedData:F,keyValue:["id","nama_full"],placeholder:"Pilih Tembusan...",className:"text-sm",menuPortalTarget:null,isMulti:!0,optionParam:{public_organisasi_id:i==null?void 0:i.public_organisasi_id},isDisabled:!ta}),e.jsx(ue,{text:Ae.error,error:Ae.error&&Ae.touched})]})})})})]})}),e.jsxs("div",{className:"p-3 flex justify-end items-center w-full gap-5 mb-10",children:[e.jsx(Je,{submit:L,color:"success",formId:"form",text:"Simpan"}),e.jsx(_e,{color:"info",onClick:d,type:"button",variant:"gradient",children:"Reset"})]})]})})]})}),e.jsx(ua,{})]})]})},hb=()=>{var o,F,x,S;const r="Berkas Aktif",s=ga(),n=new URLSearchParams(s.search).get("start_at"),t=new URLSearchParams(s.search).get("end_at"),i=new URLSearchParams(s.search).get("status"),l=new URLSearchParams(s.search).get("unit_kerja_id"),[m,p]=a.useState(!1),B=JSON.parse(Le.getItem("users"));a.useEffect(()=>{p(ge(r,"is_read",!0,!0)),k(l)},[]);const K=new ot,W=new qa,[z,T]=a.useState(!1),[L,$]=a.useState(null),[M,H]=a.useState(null),[V,A]=a.useState(!1),[G,X]=a.useState(!1);let O=[];L==null?O=[]:O=L.map((f,R)=>({no:R+1,klasifikasi_kode:f.klasifikasi_kode,nomor:f.nomor,nama:f.nama,created_at:f.created_at,kurun:f.kurun,jumlah:f.jumlah,retensi_aktif:f==null?void 0:f.retensi_aktif,retensi_inaktif:f==null?void 0:f.retensi_inaktif,tanggal_retensi_aktif:(f==null?void 0:f.tanggal_retensi_aktif)||"-",tanggal_retensi_inaktif:(f==null?void 0:f.tanggal_retensi_inaktif)||"-",tanggal_tutup:f==null?void 0:f.tanggal_tutup,status_akhir:f.penyusutan_akhir_nama,skkad:f.klasifikasi_keamanan_nama}));const[I,_]=a.useState({start_at:n,end_at:t,status:i,organisasi_id:l});a.useEffect(()=>{C()},[I]);const C=async()=>{T(!0),await K.getLaporan(I).then(f=>{let R=f.data.result;R&&($(R),T(!1)),T(!1)}).catch(f=>{T(!1)})},k=async f=>{f&&await W.detail("organisasi/instansi",f,"").then(R=>{H(R)})},b=async()=>{A(!0),await K.downloadLaporanPdf(I).then(f=>{const R=`Laporan Daftar Berkas Arsip Aktif_${oa(I==null?void 0:I.start_at).format("YYYY-MM-DD")}_${oa(I==null?void 0:I.end_at).format("YYYY-MM-DD")}.pdf`;es(f.data,R)}).catch(f=>{console.log({error:f})}).finally(()=>A(!1))},y=async()=>{X(!0),await K.downloadLaporanExcel(I).then(f=>{const R=`Laporan Daftar Berkas Arsip Aktif_${oa(I==null?void 0:I.start_at).format("YYYY-MM-DD")}_${oa(I==null?void 0:I.end_at).format("YYYY-MM-DD")}.xls`;es(f.data,R)}).catch(f=>{console.log({error:f})}).finally(()=>X(!1))};return e.jsx(e.Fragment,{children:e.jsxs(aa,{children:[m&&e.jsx(ie,{pt:6,pb:3,children:e.jsxs(Me,{children:[e.jsxs("div",{className:"flex gap-2 m-4",children:[e.jsx(Je,{color:"error",text:e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx(ts,{size:"2em",className:"pe-2"}),"PDF"]}),submit:!V,onClick:b,size:"small",className:"text-sm whitespace-nowrap"}),e.jsx(Je,{color:"success",text:e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx($s,{size:"2em",className:"pe-2"}),"Excel"]}),submit:!G,onClick:y,size:"small",className:"text-sm whitespace-nowrap"})]}),e.jsxs(ie,{px:3,pt:3,lineHeight:1,className:"flex flex-col items-center justify-center",children:[e.jsxs("div",{className:"mb-3 text-center",children:[e.jsx(le,{variant:"h3",fontWeight:"medium",children:"LAPORAN DAFTAR BERKAS ARSIP AKTIF"}),e.jsxs(le,{variant:"h4",fontWeight:"medium",children:["UNIT PENGOLAH:"," ",((o=M==null?void 0:M.nama)==null?void 0:o.toUpperCase())||((F=B==null?void 0:B.desc_unit_kerja)==null?void 0:F.toUpperCase())]})]}),e.jsxs(le,{variant:"h5",fontWeight:"medium",children:["PERIODE: ",(x=na(n,2))==null?void 0:x.toUpperCase()," -"," ",(S=na(t,2))==null?void 0:S.toUpperCase()]})]}),e.jsx("div",{className:"overflow-auto",children:e.jsxs("div",{className:"table p-10 min-w-full",children:[e.jsxs("table",{className:"w-full text-sm text-left !text-gray-700 dark:text-gray-400 table-bordered",children:[e.jsx("thead",{className:"text-xs text-gray-500 uppercase border-b-2 mb-1",children:e.jsxs("tr",{children:[e.jsx(q,{text:"No",className:"flex justify-center"}),e.jsx(q,{text:"Kode Klasifikasi / Nomor Berkas"}),e.jsx(q,{text:"Uraian Informasi Berkas"}),e.jsx(q,{text:"Tanggal Buat Berkas"}),e.jsx(q,{text:"Kurun Waktu"}),e.jsx(q,{text:"Jumlah Item"}),e.jsx(q,{text:"Retensi Aktif"}),e.jsx(q,{text:"Retensi Inaktif"}),e.jsx(q,{text:"Status Akhir"}),e.jsx(q,{text:"Keterangan"})]})}),e.jsxs("tbody",{children:[z?e.jsx("tr",{children:e.jsx("td",{colSpan:9,children:e.jsx(ia,{})})}):e.jsx(e.Fragment,{}),O.length?O.map((f,R)=>e.jsxs("tr",{className:"border-b border-slate-300",children:[e.jsx("td",{className:" px-6 py-6 text-center",children:f.no}),e.jsx("td",{className:" max-w-[9rem] px-6 py-6",children:e.jsxs("div",{className:"flex-wrap",children:[f.klasifikasi_kode," / ",f.nomor]})}),e.jsx("td",{className:" max-w-[9rem] px-6 py-6",children:e.jsxs("div",{className:"flex-wrap",children:[f.nama," "]})}),e.jsx("td",{className:" max-w-[9rem] px-6 py-6",children:e.jsx("div",{className:"flex-wrap",children:f!=null&&f.created_at?oa(f.created_at).format("DD-MM-YYYY"):"-"})}),e.jsx("td",{className:" max-w-[9rem] px-6 py-6",children:e.jsx("div",{className:"flex-wrap",children:f.jumlah>0?f.kurun:"-"})}),e.jsx("td",{className:" max-w-[9rem] px-6 py-6",children:e.jsx("div",{className:"flex-wrap",children:f.jumlah})}),e.jsx("td",{className:" max-w-[9rem] px-6 py-6",children:e.jsx("div",{className:"flex-wrap",children:f.retensi_aktif})}),e.jsx("td",{className:" max-w-[9rem] px-6 py-6",children:e.jsx("div",{className:"flex-wrap",children:f.retensi_inaktif})}),e.jsx("td",{className:" max-w-[9rem] px-6 py-6",children:e.jsx("div",{className:"flex-wrap",children:f.status_akhir})}),e.jsx("td",{})]},R)):e.jsx(e.Fragment,{})]})]}),e.jsx("nav",{className:"flex items-center justify-between p-4","aria-label":"Table navigation",children:e.jsxs("span",{className:"text-sm text-gray-400",children:["Menampilkan ",L==null?void 0:L.length," entri"]})})]})})]})}),e.jsx(ua,{})]})})},mb=()=>{var o,F,x,S;const r="Berkas Aktif",s=ga(),n=new URLSearchParams(s.search).get("start_at"),t=new URLSearchParams(s.search).get("end_at"),i=new URLSearchParams(s.search).get("status"),l=new URLSearchParams(s.search).get("unit_kerja_id"),m=JSON.parse(Le.getItem("users")),[p,B]=a.useState(!1);a.useEffect(()=>{B(ge(r,"is_read",!0,!0)),k(l)},[]);const K=new ot,W=new qa,[z,T]=a.useState(!1),[L,$]=a.useState(null),[M,H]=a.useState(null),[V,A]=a.useState(!1),[G,X]=a.useState(!1);let O=[];L==null?O=[]:O=L.map((f,R)=>({no:R+1,nomor_berkas:f==null?void 0:f.nomor,klasifikasi_kode:f.klasifikasi_kode,item_berkas:f.item_berkas,nama:f.nama,uraian:f.uraian,tanggal:f.created_at,jumlah:f.jumlah,retensi_aktif:f==null?void 0:f.retensi_aktif,retensi_inaktif:f==null?void 0:f.retensi_inaktif,tanggal_retensi_aktif:(f==null?void 0:f.tanggal_retensi_aktif)||"-",tanggal_retensi_inaktif:(f==null?void 0:f.tanggal_retensi_inaktif)||"-",tanggal_tutup:f==null?void 0:f.tanggal_tutup,status_akhir:f.penyusutan_akhir_nama,skkad:f.klasifikasi_keamanan_nama}));const[I,_]=a.useState({start_at:n,end_at:t,status:i,organisasi_id:l});a.useEffect(()=>{C()},[I]);const C=async()=>{T(!0),await K.getLaporanIsi(I).then(f=>{let R=f.data.result;R&&($(R),T(!1)),T(!1)}).catch(f=>{T(!1)})},k=async f=>{f&&await W.detail("organisasi/instansi",f,"").then(R=>{H(R)})},b=async()=>{A(!0),await K.downloadLaporanIsiPdf(I).then(f=>{const R=`Laporan Daftar Isi Berkas Arsip Aktif_${oa(I==null?void 0:I.start_at).format("YYYY-MM-DD")}_${oa(I==null?void 0:I.end_at).format("YYYY-MM-DD")}.pdf`;es(f.data,R)}).catch(f=>{console.log({error:f})}).finally(()=>A(!1))},y=async()=>{X(!0),await K.downloadLaporanIsiExcel(I).then(f=>{const R=`Laporan Daftar Isi Berkas Arsip Aktif_${oa(I==null?void 0:I.start_at).format("YYYY-MM-DD")}_${oa(I==null?void 0:I.end_at).format("YYYY-MM-DD")}.xls`;es(f.data,R)}).catch(f=>{console.log({error:f})}).finally(()=>X(!1))};return e.jsx(e.Fragment,{children:e.jsxs(aa,{children:[p&&e.jsx(ie,{pt:6,pb:3,children:e.jsxs(Me,{children:[e.jsxs("div",{className:"flex gap-2 m-4",children:[e.jsx(Je,{color:"error",text:e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx(ts,{size:"2em",className:"pe-2"}),"PDF"]}),submit:!V,onClick:b,size:"small",className:"text-sm whitespace-nowrap"}),e.jsx(Je,{color:"success",text:e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx($s,{size:"2em",className:"pe-2"}),"Excel"]}),submit:!G,onClick:y,size:"small",className:"text-sm whitespace-nowrap"})]}),e.jsxs(ie,{px:3,pt:3,lineHeight:1,className:"flex flex-col items-center justify-center",children:[e.jsxs("div",{className:"mb-3 text-center",children:[e.jsx(le,{variant:"h3",fontWeight:"medium",children:"LAPORAN DAFTAR ISI BERKAS ARSIP AKTIF"}),e.jsxs(le,{variant:"h4",fontWeight:"medium",children:["UNIT PENGOLAH:"," ",((o=M==null?void 0:M.nama)==null?void 0:o.toUpperCase())||((F=m==null?void 0:m.desc_unit_kerja)==null?void 0:F.toUpperCase())]})]}),e.jsxs(le,{variant:"h5",fontWeight:"medium",children:["PERIODE: ",(x=na(n,2))==null?void 0:x.toUpperCase()," -"," ",(S=na(t,2))==null?void 0:S.toUpperCase()]})]}),e.jsx("div",{className:"overflow-auto",children:e.jsxs("div",{className:"table p-10 min-w-full",children:[e.jsxs("table",{className:"w-full text-sm text-left !text-gray-700 dark:text-gray-400 table-bordered",children:[e.jsx("thead",{className:"text-xs text-gray-500 uppercase border-b-2 mb-1",children:e.jsxs("tr",{children:[e.jsx(q,{text:"No"}),e.jsx(q,{text:"Kode Klasifikasi / Nomor Berkas"}),e.jsx(q,{text:"URAIAN INFORMASI Berkas"}),e.jsx(q,{text:"Tanggal Buat Berkas"}),e.jsx(q,{text:"No Item Arsip"}),e.jsx(q,{text:"Uraian Informasi Arsip"}),e.jsx(q,{text:"Tanggal Item"}),e.jsx(q,{text:"Jumlah Item"}),e.jsx(q,{text:"Keterangan"})]})}),e.jsxs("tbody",{children:[z?e.jsx("tr",{children:e.jsx("td",{colSpan:9,children:e.jsx(ia,{})})}):e.jsx(e.Fragment,{}),!!(O!=null&&O.length)&&O.map((f,R)=>{var u;return e.jsxs(Ga.Fragment,{children:[e.jsxs("tr",{className:"border-b border-slate-300",children:[e.jsx("td",{className:" max-w-[9rem] px-6 py-6",children:e.jsx("div",{className:"flex-wrap text-center",children:f.no})}),e.jsx("td",{className:"px-6 py-6",children:e.jsxs("div",{className:"flex-wrap",children:[f.klasifikasi_kode," / ",f==null?void 0:f.nomor_berkas]})}),e.jsx("td",{className:" max-w-[9rem] px-6 py-6",children:e.jsx("div",{className:"flex-wrap text-center",children:f.nama})}),e.jsx("td",{className:" max-w-[9rem] px-6 py-6",children:f!=null&&f.tanggal?oa(f.tanggal).format("DD-MM-YYYY"):"-"}),e.jsx("td",{className:"max-w-[9rem] px-6 py-6"}),e.jsx("td",{className:"max-w-[9rem] px-6 py-6"}),e.jsx("td",{className:"max-w-[9rem] px-6 py-6"}),e.jsx("td",{className:" max-w-[9rem] px-6 py-6",children:e.jsx("div",{className:"flex-wrap text-center",children:f.jumlah})}),e.jsx("td",{})]},f==null?void 0:f.id),(u=f.item_berkas)==null?void 0:u.map((D,E)=>e.jsxs("tr",{className:"border-b border-slate-300",children:[e.jsx("td",{className:" max-w-[2rem] px-6 py-6"}),e.jsx("td",{className:" max-w-[9rem] px-6 py-6"}),e.jsx("td",{className:" max-w-[9rem] px-6 py-6"}),e.jsx("td",{className:" max-w-[9rem] px-6 py-6"}),e.jsx("td",{className:" max-w-[9rem] px-6 py-6 align-top",children:e.jsxs("div",{className:"flex-wrap text-center",children:[E+1," "]})}),e.jsx("td",{className:" max-w-[9rem] px-6 py-6 align-top",children:e.jsx("div",{className:"flex-wrap",children:Qn.includes(D==null?void 0:D.jenis_naskah)?(D==null?void 0:D.hal)&&D.hal.split("||").map(J=>e.jsxs("div",{className:"mb-1",children:[D.jenis_naskah=="DISPOSISI"&&J.includes("Catatan:")?"":"- ",J]})):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mb-2",children:D==null?void 0:D.nomor}),e.jsx("div",{children:D==null?void 0:D.ringkasan})]})})}),e.jsx("td",{className:" max-w-[9rem] px-6 py-6 align-top",children:e.jsx("div",{className:"flex-wrap",children:D!=null&&D.tanggal?oa(D.tanggal).format("DD-MM-YYYY"):"-"})}),e.jsx("td",{className:" max-w-[2rem] px-6 py-6"}),e.jsx("td",{className:" max-w-[9rem] px-6 py-6 align-top",children:e.jsx("div",{className:"flex-wrap",children:D.jenis_naskah})})]},`isi-${E}`))]},R)})]})]}),e.jsx("nav",{className:"flex items-center justify-between p-4","aria-label":"Table navigation",children:e.jsxs("span",{className:"text-sm text-gray-400",children:["Menampilkan ",(L==null?void 0:L.length)??0," entri"]})})]})})]})}),e.jsx(ua,{})]})})};fa().shape({nama_pengirim:ze().required("Nama Pengirim harus diisi"),jabatan_pengirim:ze().required("Jabatan Pengirim harus dipilih"),instansi_pengirim:ze().required("Instansi Pengirim harus dipilih"),hal:ze().required("Hal harus diisi"),ringkasan:ze().required("Isi Ringkas harus diisi"),sender_user_id:wa().required("Dikirimkan melalui harus dipilih"),jenis_naskah_id:wa().required("Jenis Naskah harus dipilih"),sifat_naskah_id:wa().required("Sifat Naskah harus dipilih"),urgensi_naskah_id:wa().required("Tingkat Urgensi harus dipilih"),klasifikasi_id:wa().required("Klasifikasi harus dipilih"),nomor:ze().required("Nomor Naskah harus diisi"),penandatanganan:vs().min(1,"Penandatangan harus dipilih").required("Penandatangan harus dipilih")});const xb=()=>{const r="Verifikasi Pemindahan",[s,n]=a.useState(!1);a.useEffect(()=>{n(ge(r,"is_read",!0))},[]);const t=JSON.parse(Le.getItem("users")),i=new Jt,l=ha(),[m,p]=a.useState(!1),[B,K]=a.useState(null),[W,z]=a.useState(null),[T,L]=a.useState({total:0,from:1,to:1});let $=[];B==null?$=[]:$=B.map((_,C)=>{var k,b,y,o,F;return{no:C+T.from,id:_.id,organisasi:_==null?void 0:_.from_organisasi_nama,jumlah:(k=_==null?void 0:_.berkas_pemindahan)==null?void 0:k.length,desc:_==null?void 0:_.description,status:(_==null?void 0:_.status)=="USUL"?e.jsx(be,{badgeContent:"USUL",color:"secondary",container:!0}):(_==null?void 0:_.status)=="UPLOAD"?e.jsx(be,{badgeContent:"SELESAI",color:"success",container:!0}):e.jsxs("div",{className:"flex flex-col gap-3",children:[((b=_==null?void 0:_.berkas_pemindahan)==null?void 0:b.filter(x=>x.status==="SETUJU").length)>0&&e.jsx(be,{badgeContent:`${(y=_==null?void 0:_.berkas_pemindahan)==null?void 0:y.filter(x=>x.status==="SETUJU").length} SETUJU`,color:"success",container:!0}),((o=_==null?void 0:_.berkas_pemindahan)==null?void 0:o.filter(x=>x.status==="DITOLAK").length)>0?e.jsx(be,{badgeContent:`${(F=_==null?void 0:_.berkas_pemindahan)==null?void 0:F.filter(x=>x.status==="DITOLAK").length} TOLAK`,color:"error",container:!0}):""]}),created_at:_.created_at,action:e.jsx("div",{className:"flex gap-2 items-center justify-center w-full",children:e.jsx(Oa,{size:"1.5em",color:"#17c1e8",onClick:()=>I(_),className:"cursor-pointer",title:"Lihat"})})}});const[M,H]=a.useState({organisasi_id:t==null?void 0:t.organisasi_id,public_organisasi_id:t==null?void 0:t.public_organisasi_id,group_role_id:t==null?void 0:t.group_role,page:1,rows:10,sortField:"",sortOrder:null,search:"",filters:{from_organisasi_nama:{value:""},description:{value:""},status:{value:""},created_at:{value:""}}});a.useEffect(()=>{V()},[M]);const V=async(_=!1)=>{_&&(M.page=1),p(!0),await i.getPaging(M).then(C=>{let k=C.data.result;k.data&&(z(k.last_page),K(k.data),p(!1)),p(!1),L({...T,to:k.to,from:k.from,total:k.total})}).catch(C=>{p(!1),L({...T,to:0,from:!1,total:0})})},A=Da((_,C,k=null)=>{if(k){let y=k.target;for(;y&&y.tagName!=="TD";)y=y.parentNode;if(y&&y.tagName==="TD"){const o=y.querySelector(".clear-input"),F=y.querySelector("input");C?o.classList.remove("hidden"):(o.classList.add("hidden"),F.value="")}}let b={...M};b.filters[_].value=C,b.page=1,H(b)},600),G=_=>{let C={...M};C.page=_,H(C),window.scrollTo({top:0,behavior:"smooth"})},X=_=>{let C={...M};C.rows=_,C.page=1,H(C)},O=_=>{let C={...M};C.sortField=_,M.sortField!=_?M.sortOrder==""&&(C.sortOrder=1):M.sortOrder==1?C.sortOrder=-1:(C.sortOrder="",C.sortField=""),C.page=1,H(C)},I=_=>{l("detail",{state:{formode:"Lihat",id:_.id}})};return e.jsxs(aa,{children:[e.jsx(la,{}),s&&e.jsxs(e.Fragment,{children:[" ",e.jsx(ie,{pt:6,pb:3,children:e.jsxs(Me,{children:[e.jsx(ie,{px:3,pt:3,lineHeight:1,children:e.jsx(w,{container:!0,direction:"row",justifyContent:"space-between",alignItems:"center",children:e.jsx(w,{item:!0,children:e.jsx(le,{variant:"h5",fontWeight:"medium",children:"Daftar Pemindahan"})})})}),e.jsx("div",{className:"overflow-auto",children:e.jsxs("div",{className:"table p-10 min-w-full",children:[e.jsx("div",{className:"flex justify-end mb-1",children:e.jsx(pa,{config:M,handleClick:X})}),e.jsxs("table",{className:"w-full text-sm text-left !text-gray-700 dark:text-gray-400 table-bordered",children:[e.jsx("thead",{className:"text-xs text-gray-500 uppercase border-b-2 mb-1",children:e.jsxs("tr",{children:[e.jsx(q,{text:"No",className:"flex justify-center"}),e.jsx(q,{text:"Unit Pengolah",sortField:"from_organisasi_nama",sortOrder:M.sortOrder,config:M,handleClick:()=>O("from_organisasi_nama")}),e.jsx(q,{text:"Jumlah Berkas",sortField:"jumlah",sortOrder:M.sortOrder,config:M,handleClick:()=>O("jumlah")}),e.jsx(q,{text:"Deskripsi",sortField:"description",sortOrder:M.sortOrder,config:M,handleClick:()=>O("description")}),e.jsx(q,{text:"Status",sortField:"status",sortOrder:M.sortOrder,config:M,handleClick:()=>O("status")}),e.jsx(q,{text:"Dibuat pada",sortField:"created_at",sortOrder:M.sortOrder,config:M,handleClick:()=>O("created_at")}),e.jsx(q,{text:"Aksi",className:"flex justify-center min-w-[2rem]"})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{className:"border-b border-slate-300",children:[e.jsx("td",{className:"max-w-[20rem] py-6"}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"from_organisasi_nama",onSearch:A,placeholder:"Unit",type:"input"})}),e.jsx("td",{}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"description",onSearch:A,placeholder:"Deskripsi",type:"input"})}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"status",onSearch:A,placeholder:"Status",type:"select",selectOption:Xp})}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"created_at",onSearch:A,placeholder:"Tanggal Dibuat",type:"input",isDate:!0})}),e.jsx("td",{})]}),m?e.jsx("tr",{children:e.jsx("td",{colSpan:7,children:e.jsx(ia,{})})}):e.jsx(e.Fragment,{}),$.length?$.map((_,C)=>e.jsxs("tr",{className:"border-b border-slate-300",children:[e.jsx("td",{className:"px-6 py-6",children:e.jsx("div",{className:"flex justify-center",children:_.no})}),e.jsx("td",{className:" max-w-[20rem] px-6 py-6",children:_.organisasi}),e.jsx("td",{className:" max-w-[20rem] px-6 py-6",children:_.jumlah}),e.jsx("td",{className:" max-w-[20rem] px-6 py-6",children:_.desc}),e.jsx("td",{className:" max-w-[20rem] px-6 py-6",children:_.status}),e.jsx("td",{className:" max-w-[20rem] px-6 py-6 ",children:_.created_at?na(_.created_at):"-"}),e.jsxs("td",{className:"px-3 text-right w-[2rem]",children:[" ",_.action," "]})]},C)):e.jsx(e.Fragment,{})]})]}),e.jsxs("nav",{className:"flex items-center justify-between p-4","aria-label":"Table navigation",children:[e.jsx("span",{className:"text-sm text-gray-400",children:T.from&&`Menampilkan ${Se(T.from)} sampai ${Se(T.to)} dari ${Se(T.total)} entri`}),e.jsx(xa,{currentPage:M.page,lastPage:W,displayCount:5,handleClick:G})]})]})})]})}),e.jsx(ua,{})]})]})},pb=({pemindahanId:r,refresh:s})=>{const n=new Jt,[t,i]=a.useState(!1),[l,m]=a.useState([]),[p,B]=a.useState(1),[K,W]=a.useState(1),[z,T]=a.useState([]),L=10,[$,M]=a.useState({total:0,from:1,to:1});a.useEffect(()=>{r&&H()},[r,s]);const H=async()=>{i(!0),await n.getPagingItems({pemindahan_id:r}).then(A=>{let G=A.data.result;G&&(m(G),i(!1)),i(!1)}).catch(A=>{console.log({error:A}),A.response.status==404&&m([]),i(!1)})};a.useEffect(()=>{const A=(p-1)*L,G=A+L,X=l==null?void 0:l.slice(A,G);T(X),M(O=>({...O,total:l==null?void 0:l.length,from:L*(p-1)+1,to:p==K?l==null?void 0:l.length:L*(p-1)+L}))},[p,l]),a.useEffect(()=>{const A=Math.ceil(l.length/L);W(A)},[l]);const V=A=>{B(A)};return e.jsxs("div",{children:[e.jsx(w,{container:!0,direction:"row",justifyContent:"space-between",alignItems:"center",children:e.jsx(ie,{px:3,py:3,lineHeight:1,children:e.jsx(le,{variant:"h5",fontWeight:"medium",children:"Dokumen Pendukung"})})}),e.jsx("div",{className:"overflow-auto",children:e.jsxs("div",{className:"table px-6 pb-6 min-w-full",children:[e.jsx("div",{className:"flex items-center justify-end mb-1"}),e.jsxs("table",{className:"w-full text-sm text-left !text-gray-700 dark:text-gray-400 table-bordered",children:[e.jsx("thead",{className:"text-xs text-gray-500 uppercase border-b-2 mb-1",children:e.jsxs("tr",{children:[e.jsx(q,{text:"No"}),e.jsx(q,{text:"Nama File"}),e.jsx(q,{text:"Deskripsi"})]})}),e.jsxs("tbody",{children:[t?e.jsx("tr",{className:"border-b border-slate-300",children:e.jsx("td",{colSpan:3,children:e.jsx(ia,{})})}):e.jsx(e.Fragment,{}),z.length?z==null?void 0:z.map((A,G)=>e.jsxs("tr",{className:"border-b border-slate-300",children:[e.jsx("td",{className:"w-8 px-6 py-4 text-center",children:L*(p-1)+(G+1)}),e.jsx("td",{className:"max-w-[10rem] px-6 py-4",children:e.jsx("span",{className:"cursor-pointer hover:text-blue-500",onClick:()=>Wa(A.file,A.file_path),children:A.nama})}),e.jsx("td",{className:"max-w-[20rem] px-6 py-4",children:A.deskripsi})]},A==null?void 0:A.id)):e.jsx(e.Fragment,{})]})]}),e.jsxs("nav",{className:"flex items-center justify-between p-4","aria-label":"Table navigation",children:[e.jsxs("span",{className:"text-sm text-gray-400",children:["Menampilkan ",Se($.from)," sampai ",Se($.to)," dari"," ",Se(l.length)," entri"]}),e.jsx(xa,{currentPage:p,lastPage:K,displayCount:L,handleClick:V})]})]})})]})};Z.number;const gb=({open:r,onClose:s,selectedBerkas:n,fetchData:t})=>{const i=new Jt,[l,m]=a.useState({status:"",deskripsi:""}),[p,B]=a.useState(!1),[K,W]=a.useState(!0),{mutate:z}=it({onMutate:()=>W(!1),mutationFn:T=>{if(n.length>0)return i.verifyBerkas({berkas_selected:n,...T})},onSuccess:async T=>{var L,$;T.data.success?(s(),U.fire({icon:"success",title:"Berhasil",text:(L=T.data)==null?void 0:L.message,showConfirmButton:!1,timer:1500}),B(!0),await t()):U.fire({icon:"warning",title:"Gagal",text:($=T.data)==null?void 0:$.message,showConfirmButton:!1,timer:1500})},onError:T=>{var $,M;const L=Oe(T.response.data.result);U.fire("Gagal",L??((M=($=T.response)==null?void 0:$.data)==null?void 0:M.message),"error")},onSettled:()=>W(!0)});return e.jsxs(ys,{open:r,onClose:s,fullWidth:!0,maxWidth:"sm",children:[e.jsx(_a,{children:e.jsxs("div",{className:"mx-2 flex items-center gap-2",children:[e.jsx(Ks,{className:"w-6 h-6"}),e.jsx(le,{children:"Verifikasi Pemindahan Berkas"})]})}),e.jsx(ie,{px:3,children:e.jsxs(w,{mb:2,children:[e.jsx(de,{text:"Berkas yang dipilih",required:!0}),e.jsx("div",{className:"table min-w-full",children:e.jsxs("table",{className:"w-full text-sm text-left !text-gray-700 dark:text-gray-400 table-bordered",children:[e.jsx("thead",{className:"text-xs text-gray-500 uppercase border-b-2 mb-1",children:e.jsxs("tr",{children:[e.jsx(q,{text:"No",className:"flex justify-center"}),e.jsx(q,{text:"Kode Klasifikasi / Nomor Berkas",className:"flex justify-center"}),e.jsx(q,{text:"Nama Berkas",className:"flex justify-center"})]})}),e.jsx("tbody",{children:(n==null?void 0:n.length)>0&&n.map((T,L)=>e.jsxs("tr",{className:"border-b border-slate-300",children:[e.jsx("td",{className:" max-w-[20rem] px-6 py-2 text-center",children:L+1}),e.jsxs("td",{className:" max-w-[20rem] px-6 py-2",children:[T.klasifikasi_kode," / ",T.nomor]}),e.jsx("td",{className:" max-w-[20rem] px-6 py-2",children:T.nama})]},T==null?void 0:T.id))})]})})]})}),e.jsx(ca,{initialValues:{status:"",deskripsi:""},onSubmit:z,validateOnChange:!0,validationSchema:ol,children:e.jsx(da,{id:"formVerif",className:"text-sm",children:e.jsxs("div",{className:"p-2",children:[e.jsx(w,{children:e.jsx(Na,{children:e.jsx(ce,{name:"status",children:({field:T,form:L,meta:$})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Status Pemindahan",required:!0,error:$.error&&$.touched}),e.jsxs("div",{className:"space-x-4 flex flex-row items-center",children:[e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{...T,type:"radio",className:"form-radio  w-4 h-4 text-blue-500 focus:ring-2 focus:ring-blue-500",checked:T.value=="SETUJU",onChange:M=>{L.setFieldValue("status","SETUJU"),M.target.checked=!0}}),e.jsx("span",{className:"text-gray-700",children:"SETUJU"})]}),e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{...T,type:"radio",className:"form-radio  w-4 h-4 text-blue-500 focus:ring-2 focus:ring-blue-500",checked:T.value=="DITOLAK",onChange:M=>{L.setFieldValue("status","DITOLAK"),M.target.checked=!0}}),e.jsx("span",{className:"text-gray-700",children:"DITOLAK"})]})]}),e.jsx(ue,{text:$.error,error:$.error&&$.touched})]})})})}),e.jsx(w,{children:e.jsx(Na,{children:e.jsx(ce,{name:"deskripsi",children:({field:T,form:L,meta:$})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Catatan",required:(l==null?void 0:l.status)==="DITOLAK",error:$.error&&$.touched}),e.jsx(Ka,{...T,placeHolder:"Masukan Catatan...",error:$.error&&$.touched}),e.jsx(ue,{text:$.error,error:$.error&&$.touched})]})})})})]})})}),e.jsx(ya,{children:e.jsxs(e.Fragment,{children:[e.jsx(Je,{submit:K,color:"success",formId:"formVerif",text:"Simpan"}),e.jsx(_e,{color:"error",variant:"gradient",onClick:s,children:"Batal"})]})})]})},fb=({pemindahanId:r,visibleview:s,statusPemindahan:n,viewDetail:t})=>{const i=new Jt;JSON.parse(Le.getItem("users"));const l=ha(),[m,p]=a.useState(!1),[B,K]=a.useState(!1),[W,z]=a.useState(null),[T,L]=a.useState(!0),[$,M]=a.useState(null),[H,V]=a.useState(!1),[A,G]=a.useState({naskah_keluar_id:r,id:null}),[X,O]=a.useState(null),[I,_]=a.useState({total:0,from:1,to:1}),[C,k]=a.useState([]),[b,y]=a.useState(!1);let o=[];W==null?o=[]:o=W==null?void 0:W.map((d,j)=>{var g,c,v,N,Q,re,ye,xe,fe,Ge,$e,Pe;return{no:j+I.from,id:d.id,berkas_id:d==null?void 0:d.berkas_id,pemindahan_id:d==null?void 0:d.pemindahan_id,klasifikasi_id:(g=d==null?void 0:d.berkas)==null?void 0:g.klasifikasi_id,nomor:(c=d==null?void 0:d.berkas)==null?void 0:c.nomor,klasifikasi_kode:(v=d==null?void 0:d.berkas)==null?void 0:v.klasifikasi_kode,nama:(N=d==null?void 0:d.berkas)==null?void 0:N.nama,retensi_aktif:(Q=d==null?void 0:d.berkas)==null?void 0:Q.retensi_aktif,retensi_inaktif:(re=d==null?void 0:d.berkas)==null?void 0:re.retensi_inaktif,total_retensi:((ye=d==null?void 0:d.berkas)==null?void 0:ye.retensi_aktif)+((xe=d==null?void 0:d.berkas)==null?void 0:xe.retensi_inaktif),tanggal_tutup:(fe=d==null?void 0:d.berkas)==null?void 0:fe.tanggal_tutup,tanggal_retensi_aktif:(Ge=d==null?void 0:d.berkas)==null?void 0:Ge.tanggal_retensi_aktif,kurun:($e=d==null?void 0:d.berkas)==null?void 0:$e.kurun,jumlah:(Pe=d==null?void 0:d.berkas)==null?void 0:Pe.jumlah,created_at:d.created_at,status:d==null?void 0:d.status,deskripsi:d==null?void 0:d.deskripsi}});const F=d=>{l(""+"/pemeliharaan-arsip/pemberkasan-arsip-aktif/detail",{state:{formode:"Lihat",berkas_id:d.berkas_id,back:"/proses-penyusutan/pemindahan/detail",id:r}})},[x,S]=a.useState({pemindahan_id:r,page:1,rows:10,sortField:"",sortOrder:null,search:"",status:n,filters:{klasifikasi_kode:{value:""},nama:{value:""},jumlah:{value:""},tanggal_retensi_aktif:{value:""},total_retensi:{value:""}}});a.useEffect(()=>{r&&f()},[x,r,n]);const f=async(d=!1)=>{d&&(x.page=1),k([]),K(!0),await i.getPagingListBerkas(x).then(j=>{let g=j.data.result;g.data&&(O(g.last_page),z(g.data),K(!1)),K(!1),_({...I,to:g.to,from:g.from,total:g.total})}).catch(j=>{var g;console.log({error:j}),((g=j.response)==null?void 0:g.status)==404&&z([]),K(!1),_({...I,to:0,from:!1,total:0})})},R=os((d,j,g=null)=>{if(g){let v=g.target;for(;v&&v.tagName!=="TD";)v=v.parentNode;if(v&&v.tagName==="TD"){const N=v.querySelector(".clear-input"),Q=v.querySelector("input");j?N.classList.remove("hidden"):(N.classList.add("hidden"),Q.value="")}}let c={...x};c.filters[d].value=j,c.page=1,S(c)},600),u=d=>{let j={...x};j.page=d,S(j),window.scrollTo({top:0,behavior:"smooth"})},D=d=>{let j={...x};j.rows=d,S(j)},E=d=>{let j={...x};j.sortField=d,x.sortField!=d?x.sortOrder==""&&(j.sortOrder=1):x.sortOrder==1?j.sortOrder=-1:(j.sortOrder="",j.sortField=""),j.page=1,S(j)},J=()=>{V(!1)},P=()=>{V(!0)};a.useEffect(()=>{o&&y(C.length==(o==null?void 0:o.length))},[o,C]);const h=()=>{k(b?[]:o)};return e.jsxs("div",{children:[e.jsxs(w,{container:!0,direction:"row",justifyContent:"space-between",alignItems:"center",mb:3,children:[e.jsx(ie,{px:3,pt:3,lineHeight:1,children:e.jsx(le,{variant:"h5",fontWeight:"medium",children:"Daftar Berkas"})}),!s&&e.jsx(ie,{px:3,pt:3,lineHeight:1,children:e.jsx(_e,{variant:"gradient",color:"info",onClick:P,disabled:!C.length,children:e.jsx("p",{children:"Verifikasi Pemindahan"})})})]}),e.jsx(w,{children:e.jsx("div",{className:"overflow-auto",children:e.jsxs("div",{className:"table px-6 pb-6 min-w-full",children:[e.jsx("div",{className:"flex items-center justify-end mb-1",children:e.jsx(pa,{config:x,handleClick:D})}),e.jsxs("table",{className:"w-full text-sm text-left !text-gray-700 dark:text-gray-400 table-bordered",children:[e.jsx("thead",{className:"text-xs text-gray-500 uppercase border-b-2 mb-1",children:e.jsxs("tr",{children:[!s&&e.jsx(q,{}),e.jsx(q,{text:"No",sortField:"no",sortOrder:x.sortOrder,config:x,handleClick:()=>E("no")}),e.jsx(q,{text:"Kode Klasifikasi / Nomor Berkas",sortField:"klasifikasi_kode",sortOrder:x.sortOrder,config:x,handleClick:()=>E("klasifikasi_kode")}),e.jsx(q,{text:"Berkas",sortField:"nama",sortOrder:x.sortOrder,config:x,handleClick:()=>E("nama")}),e.jsx(q,{text:"Kurun Waktu",sortField:"kurun",sortOrder:x.sortOrder,config:x,handleClick:()=>E("kurun")}),e.jsx(q,{text:"Jumlah",sortField:"jumlah",sortOrder:x.sortOrder,config:x,handleClick:()=>E("jumlah")}),e.jsx(q,{text:"Akhir Retensi Aktif",sortField:"tanggal_retensi_aktif",sortOrder:x.sortOrder,config:x,handleClick:()=>E("tanggal_retensi_aktif")}),e.jsx(q,{text:"Total Retensi",sortField:"total_retensi",sortOrder:x.sortOrder,config:x,handleClick:()=>E("total_retensi")}),e.jsx(q,{text:"Status"}),e.jsx(q,{text:"Catatan"}),!s&&e.jsx(q,{text:"Aksi",className:"flex justify-center min-w-[2rem]"})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{className:"border-b border-slate-300",children:[!s&&e.jsx("td",{className:"max-w-[20rem] px-6 py-6",children:n=="USUL"&&e.jsx("input",{type:"checkbox",className:"form-checkbox h-5 w-5 text-indigo-600",checked:b,onChange:h,disabled:s})}),e.jsx("td",{}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2"}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"nama",onSearch:R,placeholder:"Berkas",type:"input"})}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2"}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2"}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2"}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2"}),e.jsx("td",{}),e.jsx("td",{}),e.jsx("td",{}),!s&&e.jsx("td",{})]}),B?e.jsx("tr",{className:"border-b border-slate-300",children:e.jsx("td",{colSpan:9,children:e.jsx(ia,{})})}):e.jsx(e.Fragment,{}),o.length?o==null?void 0:o.map((d,j)=>e.jsxs("tr",{className:"border-b border-slate-300",children:[!s&&e.jsx("td",{className:"max-w-[20rem] px-6 py-6",children:((d==null?void 0:d.status)=="USUL"||n=="USUL")&&e.jsx("input",{type:"checkbox",className:"form-checkbox h-5 w-5 text-indigo-600",checked:C==null?void 0:C.some(g=>g.id===d.id),onChange:g=>{if(g.target.checked)k(c=>[...c,d]);else{let c=C==null?void 0:C.filter(v=>v.id!==(d==null?void 0:d.id));k(c)}},disabled:s})}),e.jsx("td",{className:"max-w-[20rem] px-6 py-6",children:d.no}),e.jsxs("td",{className:"max-w-[20rem] px-6 py-6",children:[d.klasifikasi_kode," / ",d.nomor]}),e.jsx("td",{className:"max-w-[20rem] px-6 py-6",children:d.nama??"-"}),e.jsx("td",{className:"max-w-[20rem] px-6 py-6",children:d.kurun}),e.jsx("td",{className:"max-w-[20rem] px-6 py-6",children:d.jumlah}),e.jsx("td",{className:"max-w-[20rem] px-6 py-6 ",children:d.tanggal_retensi_aktif??"-"}),e.jsx("td",{className:"max-w-[20rem] px-6 py-6 ",children:d.total_retensi??"-"}),e.jsx("td",{className:"max-w-[20rem] px-6 py-6 text-center",children:!d.status||d.status=="USUL"?e.jsx(be,{badgeContent:"USUL",color:"secondary",container:!0}):d.status==="SETUJU"?e.jsx(be,{badgeContent:"SETUJU",color:"success",container:!0}):e.jsx(be,{badgeContent:"DITOLAK",color:"error",container:!0})}),e.jsx("td",{className:"max-w-[20rem] px-6 py-6",children:d.deskripsi??"-"}),!s&&e.jsx("td",{className:"max-w-[20rem] px-6 py-6",children:e.jsx("div",{className:"flex justify-center w-full",children:t&&ge("Berkas Aktif","is_read")&&e.jsx(Oa,{size:"1.5em",color:"#17c1e8",onClick:()=>F(d),className:"cursor-pointer",title:"Lihat"})})})]},j)):e.jsx(e.Fragment,{})]})]}),e.jsxs("nav",{className:"flex items-center justify-between p-4","aria-label":"Table navigation",children:[e.jsx("span",{className:"text-sm text-gray-400",children:I.from&&`Menampilkan ${Se(I.from)} sampai ${Se(I.to)} dari ${Se(I.total)} entri`}),e.jsx(xa,{currentPage:x.page,lastPage:X,displayCount:5,handleClick:u})]})]})})}),e.jsx(gb,{open:H,onClose:J,selectedBerkas:C,fetchData:f})]})},Nt="https://api.arsip.go.id/arsip/api/";class Cr{constructor(){ae(this,"request",async s=>await se.post(`${Nt}pemusnahan/usul`,s,{headers:{"Content-Type":"multipart/form-data"}}).then(i=>i));ae(this,"uploadFiles",async s=>await se.post(`${Nt}pemusnahan/upload-files`,s,{headers:{"Content-Type":"multipart/form-data"}}).then(i=>i));ae(this,"getPaging",async s=>{const n=Ce.serializeObjectToQueryString(s);return await se.get(`${Nt}pemusnahan?${n}`).then(l=>l)});ae(this,"getPagingItems",async s=>{const n=Ce.serializeObjectToQueryString(s);return await se.get(`${Nt}pemusnahan/list-document?${n}`).then(l=>l)});ae(this,"getDetail",async(s,n)=>{const t=Ce.serializeObjectToQueryString(n);return await se.get(`${Nt}pemusnahan/show/${s}?${t}`).then(m=>m)});ae(this,"getPagingListBerkas",async s=>{const n=Ce.serializeObjectToQueryString(s);return await se.get(`${Nt}pemusnahan/list-berkas?${n}`).then(l=>l)});ae(this,"verifyBerkas",async s=>await se.post(`${Nt}pemusnahan/verifikasi-berkas`,s).then(i=>i));ae(this,"verify",async s=>await se.post(`${Nt}pemusnahan/verifikasi`,s).then(i=>i))}}const jb=fa().shape({lampiran_wajib:Qa().required("Lampiran harus diisi"),desc_lampiran_wajib:ze().required("Deskripsi harus diisi")}),kb=fa().shape({pemusnahan_id:wa().required("ID Pemusnahan Harus Diisi"),file_sk:Qa().required("File Harus Diisi"),file_notul:Qa().required("File Harus Diisi"),file_pertimbangan:Qa().required("File Harus Diisi"),file_persetujuan:Qa().required("File Harus Diisi"),file_keputusan:Qa().required("File Harus Diisi"),file_berita:Qa().required("File Harus Diisi"),file_daftar:Qa().required("File Harus Diisi")});fa().shape({status:ze().required("Status wajib diisi"),deskripsi:ze().notRequired().test("deskripsi-required","Catatan wajib diisi",function(r){return this.parent.status==="SETUJU"||this.parent.status==="DITOLAK"&&r})});const bb=({pemindahanId:r,handleSave:s,formInitial:n,lampiranList:t,setLampiranList:i})=>{const l=a.useRef();return e.jsxs("div",{children:[e.jsx(w,{container:!0,direction:"row",justifyContent:"space-between",alignItems:"center",children:e.jsx(ie,{px:3,py:3,lineHeight:1,children:e.jsx(le,{variant:"h5",fontWeight:"medium",children:"Form Unggah Dokumen Pendukung"})})}),e.jsx(ca,{innerRef:l,initialValues:n,onSubmit:s,validationSchema:Gk,enableReinitialize:!0,children:e.jsx(da,{id:"formDocs",encType:"multipart/form-data",children:e.jsx("div",{className:"px-6",children:e.jsx(ln,{lampiranList:t,setLampiranList:i,isRequiredFirst:!0,requiredFileTitle:"Berita Acara",isRequiredFileDescEditable:!1})})})})]})},_b=()=>{var D,E;const r="Verifikasi Pemindahan",s=ge("Usul Pemindahan","is_create");a.useEffect(()=>{t(ge(r,"is_read",!0))},[]);const[n,t]=a.useState(!1),[i,l]=a.useState(!1),[m,p]=a.useState(!1);JSON.parse(Le.getItem("users"));const B=new Jt,K="",[W,z]=a.useState(!0),T=ga(),L=ha(),[$,M]=a.useState(null),[H,V]=a.useState({id:((D=T.state)==null?void 0:D.id)??null}),[A,G]=a.useState(!0),[X,O]=a.useState(-1),[I,_]=a.useState(!0),[C,k]=a.useState(!1),[b,y]=a.useState(!1),o={pemindahan_id:(E=T.state)==null?void 0:E.id,lampiran_wajib:null,desc_lampiran_wajib:"Berita Acara"},[F,x]=a.useState([{file:o.lampiran_wajib,desc:o.desc_lampiran_wajib}]);a.useEffect(()=>{ge(r,"is_create")?G(!1):G(!0),(($==null?void 0:$.status)=="VERIFIKASI"||($==null?void 0:$.status)=="UPLOAD")&&(G(!0),ge(r,"is_create")||_(!1))},[$]),a.useEffect(()=>{H.id&&(U.showLoading(),f(H.id).then(()=>{t(!0)}).catch(()=>{U.fire({title:"Data tidak ditemukan",text:"Kembali ke daftar",icon:"warning",backdrop:!0}).then(()=>{})}).finally(()=>U.close()))},[H.id]);const S=()=>{L(K+"/proses-penyusutan/pemindahan")},f=async J=>{(J!=null||J!=null)&&await B.getDetail(J).then(P=>{M(P.data.result)})},R=J=>{H!=null&&H.id&&U.fire({title:"Selesaikan Pemindahan",text:"Apakah Anda yakin ingin menyelesaikan pemindahan berkas?",icon:"question",showCancelButton:!0,confirmButtonText:"Ya, Selesaikan",cancelButtonText:"Batal",customClass:{confirmButton:"button button-success",cancelButton:"button button-info"}}).then(async P=>{P.isConfirmed&&(z(!1),await B.verify({id:H==null?void 0:H.id}).then(h=>{h.data.success&&(f(H==null?void 0:H.id),U.fire("Berhasil","Pemindahan Berkas Berhasil Diselesaikan","success"))}).catch(h=>{var j,g,c,v;const d=Oe((g=(j=h.response)==null?void 0:j.data)==null?void 0:g.result);U.fire("Gagal",d??((v=(c=h.response)==null?void 0:c.data)==null?void 0:v.message),"error")}).finally(()=>{z(!0)}))})},u=J=>{H!=null&&H.id&&U.fire({title:"Kirim Berita Acara",text:"Apakah Anda yakin ingin mengirim dokumen Berita Acara?",icon:"question",showCancelButton:!0,confirmButtonText:"Ya, Kirim",cancelButtonText:"Batal",customClass:{confirmButton:"button button-success",cancelButton:"button button-info"}}).then(async P=>{if(P.isConfirmed){const h={...J,lampirans:F.slice(1)};z(!1),await B.saveBeritaAcara(h).then(d=>{d.data.success?(U.fire("Berhasil","Berhasil Mengirim Berita Acara","success"),f(H==null?void 0:H.id),O(g=>g+1)):U.fire("Gagal","Gagal Mengirim Berita Acara","warning")}).catch(d=>{var g,c,v,N;const j=Oe((c=(g=d.response)==null?void 0:g.data)==null?void 0:c.result);U.fire("Gagal",j??((N=(v=d.response)==null?void 0:v.data)==null?void 0:N.message),"error")}).finally(()=>{z(!0)})}})};return e.jsxs(aa,{children:[e.jsx(la,{}),n&&e.jsxs(e.Fragment,{children:[e.jsxs(ie,{pt:6,pb:3,className:"flex flex-col gap-10",children:[e.jsx(ie,{children:e.jsxs("div",{className:"flex justify-between p-3 items-center",children:[e.jsx(le,{variant:"h5",fontWeight:"medium",children:"Detail Pemindahan"}),e.jsxs("div",{className:"flex gap-2 items-center",children:[!A&&e.jsx(Je,{submit:W,color:"success",onClick:R,text:"Selesaikan Verifikasi"}),s&&($==null?void 0:$.status)=="VERIFIKASI"&&e.jsx(Je,{submit:W,color:"success",formId:"formDocs",text:"Kirim Berita Acara"}),e.jsxs(_e,{variant:"gradient",color:"secondary",onClick:S,children:[e.jsx(za,{size:"1.5em",className:"me-2"}),"Kembali"]})]})]})}),($==null?void 0:$.status)&&e.jsxs("div",{className:`flex justify-between gap-3 p-5 items-center bg-gradient-to-r rounded-2xl ${($==null?void 0:$.status)==="USUL"?"from-gray-400 to-gray-500":"from-teal-400 to-teal-500"}`,children:[e.jsx(qn,{size:"3em",className:"text-white"}),e.jsxs("div",{className:"text-right",children:[e.jsx(le,{variant:"h5",fontWeight:"medium",align:"right",color:"white",children:"Status Proses Pemindahan"}),e.jsx(le,{variant:"caption",fontWeight:"medium",align:"right",color:"light",children:($==null?void 0:$.status)=="UPLOAD"?"SELESAI":$.status})]})]}),s&&($==null?void 0:$.status)=="VERIFIKASI"&&e.jsxs("div",{className:"flex justify-between gap-3 p-5 items-center bg-gradient-to-r rounded-2xl from-[#eecd56] to-[#f3c51f]",children:[e.jsx(Qi,{size:"3em",className:"text-white"}),e.jsxs("div",{className:"text-right",children:[e.jsx(le,{variant:"h5",fontWeight:"medium",align:"right",color:"white",children:"Unggah Berita Acara"}),e.jsx(le,{variant:"body",fontWeight:"medium",align:"right",color:"white",children:"Mohon unggah dokumen Berita Acara pada form di bawah"})]})]}),$&&e.jsx(Me,{children:e.jsx(ie,{px:3,pt:3,lineHeight:1,children:e.jsx(fb,{pemindahanId:H.id,visibleview:A,modul:r,statusPemindahan:$==null?void 0:$.status,viewDetail:I})})}),(H==null?void 0:H.id)&&e.jsx(Me,{children:e.jsx(ie,{px:3,py:3,lineHeight:1,children:e.jsx(pb,{pemindahanId:H==null?void 0:H.id,refresh:X})})}),s&&($==null?void 0:$.status)=="VERIFIKASI"&&(H==null?void 0:H.id)&&e.jsx(Me,{children:e.jsx(ie,{px:3,py:3,lineHeight:1,children:e.jsx(bb,{pemindahanId:H==null?void 0:H.id,handleSave:u,formInitial:o,lampiranList:F,setLampiranList:x})})})]}),e.jsx(ua,{})]})]})},dt="https://api.arsip.go.id/arsip/api/";class on{constructor(){ae(this,"getPaging",async s=>{const n=Ce.serializeObjectToQueryString(s);return await se.get(`${dt}berkas/berkas-inaktif/list?${n}`).then(l=>l)});ae(this,"getPagingItems",async s=>{const n=Ce.serializeObjectToQueryString(s);return await se.get(`${dt}berkas/berkas-inaktif/list-item-berkas?${n}`).then(l=>l)});ae(this,"getDetail",async s=>await se.get(`${dt}berkas/berkas-inaktif/${s}`).then(i=>i));ae(this,"getLaporan",async s=>{const n=Ce.serializeObjectToQueryString(s);return await se.get(`${dt}laporan/arsip-inaktif?${n}`).then(l=>l)});ae(this,"downloadLaporanPdf",async s=>{const n=Ce.serializeObjectToQueryString(s);return await se.get(`${dt}laporan/arsip-inaktif/pdf?${n}`,{responseType:"blob",headers:{"Content-Type":"application/pdf"}}).then(l=>l)});ae(this,"downloadLaporanExcel",async s=>{const n=Ce.serializeObjectToQueryString(s);return await se.get(`${dt}laporan/arsip-inaktif/excel?${n}`,{responseType:"blob",headers:{"Content-Type":"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}}).then(l=>l)});ae(this,"getLaporanIsi",async s=>{const n=Ce.serializeObjectToQueryString(s);return await se.get(`${dt}laporan/arsip-inaktif-detail?${n}`).then(l=>l)});ae(this,"downloadLaporanIsiPdf",async s=>{const n=Ce.serializeObjectToQueryString(s);return await se.get(`${dt}laporan/arsip-inaktif-detail/pdf?${n}`,{responseType:"blob",headers:{"Content-Type":"application/pdf"}}).then(l=>l)});ae(this,"downloadLaporanIsiExcel",async s=>{const n=Ce.serializeObjectToQueryString(s);return await se.get(`${dt}laporan/arsip-inaktif-detail/excel?${n}`,{responseType:"blob",headers:{"Content-Type":"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}}).then(l=>l)})}}const Mt="https://api.arsip.go.id/arsip/api/";class yb{constructor(){ae(this,"requestMove",async s=>await se.post(`${Mt}pemindahan/usul`,s,{headers:{"Content-Type":"multipart/form-data"}}).then(i=>i));ae(this,"getPaging",async s=>{const n=Ce.serializeObjectToQueryString(s);return await se.get(`${Mt}pemindahan?${n}`).then(l=>l)});ae(this,"getPagingItems",async s=>{const n=Ce.serializeObjectToQueryString(s);return await se.get(`${Mt}pemindahan/list-document?${n}`).then(l=>l)});ae(this,"getDetail",async(s,n)=>{const t=Ce.serializeObjectToQueryString(n);return await se.get(`${Mt}pemindahan/show/${s}?${t}`).then(m=>m)});ae(this,"getPagingListBerkas",async s=>{const n=Ce.serializeObjectToQueryString(s);return await se.get(`${Mt}pemindahan/list-berkas?${n}`).then(l=>l)});ae(this,"verifyBerkas",async s=>await se.post(`${Mt}pemindahan/verifikasi-berkas`,s).then(i=>i));ae(this,"verify",async s=>await se.post(`${Mt}pemindahan/verifikasi`,s).then(i=>i))}}fa().shape({nama:ze().required("Nama Berkas harus diisi"),klasifikasi_id:wa().min(1,"Pilih Klasifikasi").required("Klasifikasi harus dipilih")});const Nb=fa().shape({lampiran:Qa().test("fileRequired","Minimal 1 file harus dipilih",r=>r&&r.length>0),deskripsi:ze().required("Deskripsi harus diisi")});fa().shape({status:ze().required("Status wajib diisi"),deskripsi:ze().notRequired().test("deskripsi-required","Catatan wajib diisi",function(r){return this.parent.status==="SETUJU"||this.parent.status==="DITOLAK"&&r})});const wb=({open:r,onClose:s,selectedBerkas:n,fetchDaftarBerkas:t})=>{const i=new yb,[l,m]=a.useState(!0),[p,B]=a.useState(1),[K,W]=a.useState(1),[z,T]=a.useState([]),[L,$]=a.useState(!1),M={file:null,deskripsi:"",berkas_selected:[],to_group_role_id:null,lampiran:[]},H=A=>{n.length>0?U.fire({title:"Usul Pinjam Berkas Inaktif",text:"Apakah Anda yakin ingin mengusulkan peminjaman berkas yang dipilih?",icon:"question",showCancelButton:!0,confirmButtonText:"Ya, Usulkan",cancelButtonText:"Batal",customClass:{confirmButton:"button button-success",cancelButton:"button button-info"}}).then(async G=>{if(G.isConfirmed){const X={...A,berkas_selected:n};m(!1),await i.requestMove(X).then(O=>{O.data.success&&(t(),U.fire("Berhasil","Peminjaman Berkas Berhasil Diusulkan","success"))}).catch(O=>{var _,C,k,b;const I=Oe((C=(_=O.response)==null?void 0:_.data)==null?void 0:C.result);U.fire("Gagal",I??((b=(k=O.response)==null?void 0:k.data)==null?void 0:b.message),"error")}).finally(()=>{m(!0),s()})}}):U.fire({title:"Oops!",text:"Anda belum memilih berkas untuk diusul peminjaman",icon:"warning",showCancelButton:!1})},V=(A,G)=>{T(A),G.setFieldValue("lampiran",A)};return e.jsxs(Fa,{open:r,onClose:s,children:[e.jsxs("div",{children:[e.jsxs(_a,{className:"flex items-center gap-4",children:[e.jsx(Ro,{size:"1em"}),e.jsx(le,{children:"Form Pengajuan Peminjaman Arsip"})]}),e.jsx(Na,{sx:{paddingInline:"20px"},children:e.jsx(ca,{initialValues:M,onSubmit:H,validateOnChange:!0,validationSchema:Nb,children:e.jsxs(da,{id:"formPindah",className:"text-sm",children:[e.jsxs(w,{mb:2,children:[e.jsx(de,{text:"Berkas yang dipilih",required:!0}),e.jsx("div",{className:"table min-w-full",children:e.jsxs("table",{className:"w-full text-sm text-left !text-gray-700 dark:text-gray-400 table-bordered",children:[e.jsx("thead",{className:"text-xs text-gray-500 uppercase border-b-2 mb-1",children:e.jsxs("tr",{children:[e.jsx(q,{text:"No",className:"flex justify-center"}),e.jsx(q,{text:"Kode Klasifikasi / Nomor Berkas",className:"flex justify-center"}),e.jsx(q,{text:"Nama Berkas",className:"flex justify-center"})]})}),e.jsx("tbody",{children:(n==null?void 0:n.length)>0&&n.map((A,G)=>e.jsxs("tr",{className:"border-b border-slate-300",children:[e.jsx("td",{className:" max-w-[20rem] px-6 py-2 text-center",children:G+1}),e.jsxs("td",{className:" max-w-[20rem] px-6 py-2",children:[A.klasifikasi_kode," / ",A.nomor]}),e.jsx("td",{className:" max-w-[20rem] px-6 py-2",children:A.nama})]},A==null?void 0:A.id))})]})})]}),e.jsx(w,{mb:2,mt:5,children:e.jsx(ce,{name:"lampiran",children:({field:A,form:G,meta:X})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Dokumen Pendukung",required:!0,error:X.error}),e.jsx(at,{onFileSelected:V,isReset:L,descBox:"Untuk menambahkan File, seret dan lepas file tersebut ke sini, atau klik untuk memilih file.",maxSizePerFileInMb:5,form:G,acceptedType:{"image/jpeg":[".jpeg",".jpg"],"image/png":[".png"],"application/pdf":[".pdf"]}}),e.jsx(ue,{text:X.error,error:X.error})]})})}),e.jsx(w,{mb:2,mt:5,children:e.jsx(ce,{name:"deskripsi",children:({field:A,form:G,meta:X})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Deskripsi",required:!0,error:X.error&&X.touched}),e.jsx(Ka,{...A,placeHolder:"Masukkan deskripsi dokumen..",error:X.error&&X.touched,rows:6}),e.jsx(ue,{text:X.error,error:X.error&&X.touched})]})})})]})})})]}),e.jsx(ya,{children:e.jsxs(e.Fragment,{children:[e.jsx(Je,{submit:l,color:"success",formId:"formPindah",text:"Ajukan Pemindahan"}),e.jsx(_e,{color:"error",variant:"gradient",onClick:s,children:"Batal"})]})})]})},Sb=()=>{var ye;const r="Berkas Inaktif",[s,n]=a.useState(!1);a.useEffect(()=>{n(ge(r,"is_read",!0))},[]);const t=JSON.parse(Le.getItem("users")),i=new on,l=ha(),m=ga(),[p,B]=a.useState(!1),[K,W]=a.useState(null),[z,T]=a.useState(null),[L,$]=a.useState({start_at:"",end_at:""}),[M,H]=a.useState(null),[V,A]=a.useState(null),[G,X]=a.useState(null),[O,I]=a.useState({start_at:"",end_at:""}),[_,C]=a.useState(null),[k,b]=a.useState({total:0,from:1,to:1}),[y,o]=a.useState(!1),[F,x]=a.useState(((ye=m==null?void 0:m.state)==null?void 0:ye.berkas_selected)||[]),S=!1,f=ge("Usul Pemusnahan","is_create"),R=ge("Usul Penyerahan","is_create");let u=[];K==null?u=[]:u=K.map((xe,fe)=>{var Ge,$e;return{no:fe+k.from,id:xe.id,klasifikasi_id:xe.klasifikasi_id,nomor:xe.nomor,klasifikasi_kode:xe.klasifikasi_kode,nama:xe.nama,retensi_aktif:xe.retensi_aktif,retensi_inaktif:xe.retensi_inaktif,tanggal_tutup:xe.tanggal_tutup,tanggal_retensi_aktif:xe.tanggal_retensi_aktif,tanggal_retensi_inaktif:xe.tanggal_retensi_inaktif,kurun:xe.kurun,jumlah:xe.jumlah,penyusutan_nama:xe.penyusutan_akhir_nama,created_at:xe.created_at,unit_pengolah:($e=(Ge=xe==null?void 0:xe.berkas_pemindahan_inaktif)==null?void 0:Ge.pemindahan)==null?void 0:$e.from_organisasi_nama,berkas_pemusnahan:xe==null?void 0:xe.berkas_pemusnahan,is_over_inactive:xe.tanggal_tutup&&oa()>=oa(xe==null?void 0:xe.tanggal_retensi_inaktif,"DD-MM-YYYY"),action:e.jsxs("div",{className:"flex gap-2 items-center justify-center w-full",children:[ge(r,"is_create")&&e.jsx(Oa,{size:"1.5em",color:"#17c1e8",onClick:()=>g(xe),className:"cursor-pointer",title:"Lihat"}),(xe==null?void 0:xe.berkas_pemusnahan)&&e.jsx(be,{badgeContent:"BERKAS DIUSUL PEMUSNAHAN",color:"warning",container:!0})]})}});const[D,E]=a.useState({organisasi_id:t==null?void 0:t.organisasi_id,public_organisasi_id:t==null?void 0:t.public_organisasi_id,group_role_id:t==null?void 0:t.group_role,page:1,rows:10,sortField:"",sortOrder:null,search:"",filters:{kode:{value:""},nama:{value:""},kurun:{value:""},tanggal_retensi_aktif:{value:""},type:{value:""}}});a.useEffect(()=>{J()},[D]);const J=async(xe=!1)=>{xe&&(D.page=1),B(!0),await i.getPaging(D).then(fe=>{var $e;let Ge=fe.data.result;Ge.data&&(C(Ge.last_page),W(Ge.data),B(!1)),B(!1),b({...k,to:Ge.to,from:Ge.from,total:Ge.total}),x((($e=m==null?void 0:m.state)==null?void 0:$e.berkas_selected)||[])}).catch(fe=>{B(!1),b({...k,to:0,from:!1,total:0})})},P=Da((xe,fe,Ge=null)=>{if(Ge){let Pe=Ge.target;for(;Pe&&Pe.tagName!=="TD";)Pe=Pe.parentNode;if(Pe&&Pe.tagName==="TD"){const te=Pe.querySelector(".clear-input"),ne=Pe.querySelector("input");fe?te.classList.remove("hidden"):(te.classList.add("hidden"),ne.value="")}}let $e={...D};$e.filters[xe].value=fe,$e.page=1,E($e)},600),h=xe=>{let fe={...D};fe.page=xe,E(fe),window.scrollTo({top:0,behavior:"smooth"})},d=xe=>{let fe={...D};fe.rows=xe,fe.page=1,E(fe)},j=xe=>{let fe={...D};fe.sortField=xe,D.sortField!=xe?D.sortOrder==""&&(fe.sortOrder=1):D.sortOrder==1?fe.sortOrder=-1:(fe.sortOrder="",fe.sortField=""),fe.page=1,E(fe)},g=xe=>{l("detail",{state:{formode:"Lihat",id:xe.id}})},c=()=>{const fe=`/pemeliharaan--arsip/pemberkasan-arsip-inaktif/laporan?${Ce.serializeObjectToQueryString({start_at:L==null?void 0:L.start_at,end_at:L==null?void 0:L.end_at,type:(z==null?void 0:z.value)||"",unit_kerja_id:(V==null?void 0:V.id)||""})}`;window.open(fe,"_blank","noopener,noreferrer")},v=()=>{const fe=`/pemeliharaan--arsip/pemberkasan-arsip-inaktif/laporan-isi?${Ce.serializeObjectToQueryString({start_at:O==null?void 0:O.start_at,end_at:O==null?void 0:O.end_at,type:(M==null?void 0:M.value)||"",unit_kerja_id:(G==null?void 0:G.id)||""})}`;window.open(fe,"_blank","noopener,noreferrer")},N=()=>{if(F.filter(fe=>fe.penyusutan_nama!="Musnah").length){U.fire("Gagal","Tidak dapat memproses usul musnah, karena terdapat berkas dengan penyusutan akhir selain musnah","error");return}l("/proses-penyusutan/pemusnahan/form",{state:{formode:"Tambah",berkas_selected:F}})},Q=()=>{if(console.log(F),F.filter(fe=>fe.penyusutan_nama!="Permanen").length){U.fire("Gagal","Tidak dapat memproses usul serah, karena terdapat berkas dengan penyusutan akhir selain permanen","error");return}l("/proses-penyusutan/penyerahan/form",{state:{formode:"Tambah",berkas_selected:F}})},re=()=>{o(!1)};return e.jsxs(aa,{children:[e.jsx(la,{}),s&&e.jsxs(e.Fragment,{children:[" ",e.jsx(ie,{pt:6,pb:3,children:e.jsxs(Me,{children:[e.jsxs(ie,{px:3,pt:3,lineHeight:1,children:[e.jsx(w,{container:!0,direction:"row",justifyContent:"space-between",alignItems:"center",mb:4,children:e.jsx(w,{item:!0,children:e.jsx(le,{variant:"h5",fontWeight:"medium",children:"Daftar Berkas Inaktif"})})}),(t==null?void 0:t.group_role)!==4&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col 2xl:flex-row gap-4 2xl:gap-6 mb-4 mt-5 2xl:items-center 2xl:justify-between",children:[e.jsx("div",{className:"w-60",children:e.jsx(le,{variant:"h6",fontWeight:"medium",children:e.jsx("p",{className:"whitespace-nowrap",children:"Laporan Daftar Berkas Inaktif"})})}),e.jsxs("div",{className:"flex flex-col lg:flex-row gap-2 items-center ",children:[e.jsx(Zs,{onDateSelected:(xe,fe)=>{$(Ge=>({...Ge,start_at:xe==null?void 0:xe.toISOString(),end_at:fe==null?void 0:fe.toISOString()}))}}),e.jsx("div",{className:"w-full mb-3 lg:mb-0",children:e.jsx(Gs,{placeholder:"Pilih Penyusutan Akhir...",options:bi,isClearable:!0,isSearchable:!1,className:"text-sm whitespace-nowrap",onChange:xe=>{T(xe)},value:z})}),e.jsx(ra,{url:"organisasi/sub-oraganisasi/select-with-token",selectedData:V,keyValue:["id","nama"],callbackChange:xe=>A(xe),placeholder:"Pilih Unit Kerja...",className:"text-sm w-full mb-3 lg:mb-0 whitespace-nowrap",menuPortalTarget:null,isMulti:!1}),ge(r,"is_create",!1,!0)&&e.jsx("div",{className:"w-full lg:w-fit text-right",children:e.jsxs(_e,{variant:"gradient",color:"success",size:"small",onClick:c,disabled:!L.start_at||!L.end_at,children:[e.jsx(Bs,{size:"2em",className:"pe-2"}),"Tampilkan"]})})]})]}),e.jsxs("div",{className:"flex flex-col 2xl:flex-row gap-4 2xl:gap-6 mb-4 mt-5 2xl:items-center 2xl:justify-between",children:[e.jsx("div",{className:"w-60",children:e.jsx(le,{variant:"h6",fontWeight:"medium",children:e.jsx("p",{className:"whitespace-nowrap",children:"Laporan Daftar Isi Berkas Inaktif"})})}),e.jsxs("div",{className:"flex flex-col lg:flex-row gap-2 items-center ",children:[e.jsx(Zs,{onDateSelected:(xe,fe)=>{I(Ge=>({...Ge,start_at:xe==null?void 0:xe.toISOString(),end_at:fe==null?void 0:fe.toISOString()}))}}),e.jsx("div",{className:"w-full mb-3 lg:mb-0",children:e.jsx(Gs,{placeholder:"Pilih Penyusutan Akhir...",options:bi,isClearable:!0,isSearchable:!1,className:"text-sm whitespace-nowrap",onChange:xe=>{H(xe)},value:M})}),e.jsx(ra,{url:"organisasi/sub-oraganisasi/select-with-token",selectedData:G,keyValue:["id","nama"],callbackChange:xe=>X(xe),placeholder:"Pilih Unit kerja...",className:"text-sm w-full mb-3 lg:mb-0 whitespace-nowrap",menuPortalTarget:null,isMulti:!1}),ge(r,"is_create",!1,!0)&&e.jsx("div",{className:"w-full lg:w-fit text-right",children:e.jsxs(_e,{variant:"gradient",color:"success",size:"small",onClick:v,disabled:!O.start_at||!O.end_at,children:[e.jsx(Bs,{size:"2em",className:"pe-2"}),"Tampilkan"]})})]})]})]}),e.jsxs("div",{className:"flex sm:flex-row flex-col justify-end space-x-2 sm:space-y-0 space-y-5 pt-4",children:[S,f&&e.jsx("div",{className:"flex justify-end",children:e.jsxs(_e,{variant:"gradient",color:"secondary",onClick:N,disabled:F.length<1,children:[e.jsx(Fi,{size:"1em"}),e.jsx("p",{className:"ml-2",children:"Usul Pemusnahan"})]})}),R&&e.jsx("div",{className:"flex justify-end",children:e.jsxs(_e,{variant:"gradient",color:"secondary",onClick:Q,disabled:F.length<1,children:[e.jsx(Fi,{size:"1em"}),e.jsx("p",{className:"ml-2",children:"Usul Penyerahan"})]})})]})]}),e.jsx("div",{className:"overflow-auto",children:e.jsxs("div",{className:"table p-10 min-w-full",children:[e.jsx("div",{className:"flex justify-end mb-1",children:e.jsx(pa,{config:D,handleClick:d})}),e.jsxs("table",{className:"w-full text-sm text-left !text-gray-700 dark:text-gray-400 table-bordered",children:[e.jsx("thead",{className:"text-xs text-gray-500 uppercase border-b-2 mb-1",children:e.jsxs("tr",{children:[f&&e.jsx(q,{text:"#"}),e.jsx(q,{text:"No",className:"flex justify-center"}),e.jsx(q,{text:"Kode Klasifikasi / Nomor Berkas"}),e.jsx(q,{text:"Berkas",sortField:"nama",sortOrder:D.sortOrder,config:D,handleClick:()=>j("nama")}),e.jsx(q,{text:"Tanggal Tutup Berkas",sortField:"created_at",sortOrder:D.sortOrder,config:D,handleClick:()=>j("created_at")}),e.jsx(q,{text:"Kurun Waktu",sortField:"kurun",sortOrder:D.sortOrder,config:D,handleClick:()=>j("kurun")}),e.jsx(q,{text:"Jumlah Item",sortField:"jumlah",sortOrder:D.sortOrder,config:D,handleClick:()=>j("jumlah")}),e.jsx(q,{text:"Retensi Aktif",sortField:"retensi_aktif",sortOrder:D.sortOrder,config:D,handleClick:()=>j("retensi_aktif")}),e.jsx(q,{text:"Retensi Inaktif",sortField:"retensi_inaktif",sortOrder:D.sortOrder,config:D,handleClick:()=>j("retensi_inaktif")}),e.jsx(q,{text:"Akhir Retensi Inaktif",sortField:"tanggal_retensi_inaktif",sortOrder:D.sortOrder,config:D,handleClick:()=>j("tanggal_retensi_inaktif")}),e.jsx(q,{text:"Unit Pengolah",sortField:"unit_pengolah",sortOrder:D.sortOrder,config:D,handleClick:()=>j("unit_pengolah")}),e.jsx(q,{text:"Penyusutan Akhir",sortField:"penyusutan_akhir_nama",sortOrder:D.sortOrder,config:D,handleClick:()=>j("penyusutan_akhir_nama")}),e.jsx(q,{text:"Aksi",className:"flex justify-center min-w-[2rem]"})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{className:"border-b border-slate-300",children:[f&&e.jsx("td",{className:"max-w-[20rem] py-6"}),e.jsx("td",{className:"max-w-[20rem] py-6"}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"kode",onSearch:P,placeholder:"Kode Klasifikasi / Nomor Berkas",type:"input"})}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"nama",onSearch:P,placeholder:"Berkas",type:"input"})}),e.jsx("td",{}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2"}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2"}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2"}),e.jsx("td",{}),e.jsx("td",{}),e.jsx("td",{}),e.jsx("td",{children:e.jsx(we,{keyword:"type",onSearch:P,placeholder:"Penyusutan Akhir",type:"select",selectOption:bi})}),e.jsx("td",{})]}),p?e.jsx("tr",{children:e.jsx("td",{colSpan:12,children:e.jsx(ia,{})})}):e.jsx(e.Fragment,{}),u.length?u.map((xe,fe)=>e.jsxs("tr",{className:"border-b border-slate-300",children:[f&&e.jsx("td",{className:"max-w-[20rem] px-6 py-6",children:xe.is_over_inactive&&!xe.berkas_pemusnahan&&e.jsx("input",{type:"checkbox",className:"form-checkbox h-5 w-5 text-indigo-600",checked:F.some(Ge=>Ge.id===xe.id),onChange:Ge=>{if(Ge.target.checked){const $e={id:xe.id,nomor:xe.nomor,klasifikasi_kode:xe.klasifikasi_kode,nama:xe.nama,tanggal_retensi_inaktif:xe.tanggal_retensi_inaktif,penyusutan_nama:xe.penyusutan_nama};x(Pe=>[...Pe,$e])}else{let $e=F==null?void 0:F.filter(Pe=>Pe.id!==(xe==null?void 0:xe.id));x($e)}}})}),e.jsx("td",{className:"px-6 py-6",children:e.jsx("div",{className:"flex justify-center",children:xe.no})}),e.jsxs("td",{className:" max-w-[20rem] px-6 py-6",children:[xe.klasifikasi_kode," / ",xe.nomor]}),e.jsx("td",{className:" max-w-[20rem] px-6 py-6",children:xe.nama}),e.jsx("td",{className:" max-w-[20rem] px-6 py-6 ",children:xe.tanggal_tutup?na(xe.tanggal_tutup,2):"-"}),e.jsx("td",{className:" max-w-[20rem] px-6 py-6 ",children:xe.jumlah>0?xe.kurun:e.jsx(be,{badgeContent:"BELUM ADA NASKAH YANG DIBERKASKAN",color:"warning",container:!0})}),e.jsx("td",{className:" max-w-[20rem] px-6 py-6 text-center",children:xe.jumlah}),e.jsx("td",{className:" max-w-[20rem] px-6 py-6",children:xe==null?void 0:xe.retensi_aktif}),e.jsx("td",{className:" max-w-[20rem] px-6 py-6",children:xe==null?void 0:xe.retensi_inaktif}),e.jsx("td",{className:" max-w-[20rem] px-6 py-6",children:xe.tanggal_retensi_inaktif?oa(xe.tanggal_retensi_inaktif,"DD-MM-YYYY").format("DD MMMM YYYY"):"-"}),e.jsxs("td",{className:"px-6 py-6 w-[2rem]",children:[" ",xe.unit_pengolah," "]}),e.jsxs("td",{className:"px-6 py-6 w-[2rem]",children:[" ",xe.penyusutan_nama," "]}),e.jsxs("td",{className:"px-3 text-right w-[2rem]",children:[" ",xe.action," "]})]},fe)):e.jsx(e.Fragment,{})]})]}),e.jsxs("nav",{className:"flex items-center justify-between p-4","aria-label":"Table navigation",children:[e.jsx("span",{className:"text-sm text-gray-400",children:k.from&&`Menampilkan ${Se(k.from)} sampai ${Se(k.to)} dari ${Se(k.total)} entri`}),e.jsx(xa,{currentPage:D.page,lastPage:_,displayCount:5,handleClick:h})]})]})})]})}),e.jsx(ua,{})]}),e.jsx(wb,{open:y,onClose:re,selectedBerkas:F,fetchDaftarBerkas:J})]})},vb=({berkasId:r,visibleview:s,modul:n})=>{const t=new on;JSON.parse(Le.getItem("users"));const[i,l]=a.useState(!1),[m,p]=a.useState(!1),[B,K]=a.useState(null),[W,z]=a.useState(!0),[T,L]=a.useState(null),[$,M]=a.useState(!1),[H,V]=a.useState({naskah_keluar_id:r,id:null}),[A,G]=a.useState(null),[X,O]=a.useState({total:0,from:1,to:1});let I=[];B==null?I=[]:I=B==null?void 0:B.map((x,S)=>({no:S+X.from,tipe_naskah:x.tipe_naskah,jenis_naskah:x.jenis_naskah,nomor:x.nomor,tanggal:x.tanggal,hal:x.hal,file:x.file,file_path:x.file_path,file_alternative:x==null?void 0:x.file_alternative,is_signed:x==null?void 0:x.is_signed,lampirans:x.lampiran_naskah_berkas,created_at:x.created_at,action:e.jsx("div",{className:"flex justify-center w-full"})}));const[_,C]=a.useState({berkas_id:r,page:1,rows:10,sortField:"",sortOrder:null,search:"",filters:{tanggal:{value:""},tipe_naskah:{value:""},jenis_naskah:{value:""},nomor:{value:""},hal:{value:""}}});a.useEffect(()=>{r&&k()},[_,r]);const k=async(x=!1)=>{x&&(_.page=1),p(!0),await t.getPagingItems(_).then(S=>{let f=S.data.result;f.data&&(G(f.last_page),K(f.data),p(!1)),p(!1),O({...X,to:f.to,from:f.from,total:f.total})}).catch(S=>{console.log({error:S}),S.response.status==404&&K([]),p(!1),O({...X,to:0,from:!1,total:0})})},b=os((x,S,f=null)=>{if(f){let u=f.target;for(;u&&u.tagName!=="TD";)u=u.parentNode;if(u&&u.tagName==="TD"){const D=u.querySelector(".clear-input"),E=u.querySelector("input");S?D.classList.remove("hidden"):(D.classList.add("hidden"),E.value="")}}let R={..._};R.filters[x].value=S,R.page=1,C(R)},600),y=x=>{let S={..._};S.page=x,C(S),window.scrollTo({top:0,behavior:"smooth"})},o=x=>{let S={..._};S.rows=x,C(S)},F=x=>{let S={..._};S.sortField=x,_.sortField!=x?_.sortOrder==""&&(S.sortOrder=1):_.sortOrder==1?S.sortOrder=-1:(S.sortOrder="",S.sortField=""),S.page=1,C(S)};return e.jsxs("div",{children:[e.jsx(w,{container:!0,direction:"row",justifyContent:"space-between",alignItems:"center",children:e.jsx(ie,{px:3,pt:3,lineHeight:1,children:e.jsx(le,{variant:"h5",fontWeight:"medium",children:"Daftar Isi Berkas Arsip Inaktif"})})}),e.jsx(w,{children:e.jsx("div",{className:"overflow-auto",children:e.jsxs("div",{className:"table px-6 pb-6 min-w-full",children:[e.jsx("div",{className:"flex items-center justify-end mb-1",children:e.jsx(pa,{config:_,handleClick:o})}),e.jsxs("table",{className:"w-full text-sm text-left !text-gray-700 dark:text-gray-400 table-bordered",children:[e.jsx("thead",{className:"text-xs text-gray-500 uppercase border-b-2 mb-1",children:e.jsxs("tr",{children:[e.jsx(q,{text:"No",sortField:"no",sortOrder:_.sortOrder,config:_,handleClick:()=>F("no")}),e.jsx(q,{text:"Tipe Naskah",sortField:"tipe_naskah",sortOrder:_.sortOrder,config:_,handleClick:()=>F("tipe_naskah")}),e.jsx(q,{text:"Jenis Naskah",sortField:"jenis_naskah",sortOrder:_.sortOrder,config:_,handleClick:()=>F("jenis_naskah")}),e.jsx(q,{text:"Nomor Naskah",sortField:"nomor",sortOrder:_.sortOrder,config:_,handleClick:()=>F("nomor")}),e.jsx(q,{text:"Tanggal",sortField:"tanggal",sortOrder:_.sortOrder,config:_,handleClick:()=>F("tanggal")}),e.jsx(q,{text:"Hal",sortField:"hal",sortOrder:_.sortOrder,config:_,handleClick:()=>F("hal")}),e.jsx(q,{text:"File"}),n=="Berkas Aktif"&&e.jsx(q,{text:"Lampiran"}),e.jsx(q,{text:"Aksi",className:"flex justify-center min-w-[2rem]"})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{className:"border-b border-slate-300",children:[e.jsx("td",{}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"tipe_naskah",onSearch:b,placeholder:"Tipe Naskah",type:"select",selectOption:nd})}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"jenis_naskah",onSearch:b,placeholder:"Jenis Naskah",type:"input"})}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"nomor",onSearch:b,placeholder:"Nomor Naskah",type:"input"})}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"tanggal",onSearch:b,placeholder:"Tanggal",type:"input",isDate:!0})}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"hal",onSearch:b,placeholder:"Hal",type:"input"})}),e.jsx("td",{}),n=="Berkas Aktif"&&e.jsx("td",{}),e.jsx("td",{})]}),m?e.jsx("tr",{className:"border-b border-slate-300",children:e.jsx("td",{colSpan:9,children:e.jsx(ia,{})})}):e.jsx(e.Fragment,{}),I.length?I==null?void 0:I.map((x,S)=>{var R,u;let f=null;return x.hal.includes("||")&&(f=(R=Di(x.hal))==null?void 0:R.split("||")),e.jsxs("tr",{className:"border-b border-slate-300",children:[e.jsx("td",{className:"max-w-[20rem] px-6 py-6",children:x.no}),e.jsx("td",{className:"max-w-[20rem] px-6 py-6",children:x.tipe_naskah}),e.jsx("td",{className:"max-w-[20rem] px-6 py-6",children:x.jenis_naskah??"-"}),e.jsx("td",{className:"max-w-[20rem] px-6 py-6",children:x.nomor}),e.jsx("td",{className:"max-w-[20rem] px-6 py-6",children:x.tanggal?na(x.tanggal):"-"}),e.jsx("td",{className:"max-w-[20rem] px-6 py-6",children:f?f.length>1?e.jsx("ul",{children:f.map((D,E)=>e.jsx("li",{children:D},E))}):e.jsx("p",{children:f[0]}):e.jsx("p",{children:Di(x.hal)})}),e.jsx("td",{className:"max-w-[20rem] px-6 py-6",children:e.jsx("div",{className:"flex-wrap",children:x.jenis_naskah==="DISPOSISI"||x.jenis_naskah==="KOORDINASI"||x.jenis_naskah==="ARAHAN"?e.jsx(ts,{className:"text-red-600 h-6 w-6 cursor-pointer",onClick:()=>{printTindakLanjut(x)}}):x.tipe_naskah==="Naskah Keluar"&&x.is_signed&&x.file_alternative?e.jsx(ts,{className:"text-pink-600 h-6 w-6 cursor-pointer",onClick:()=>Wa((x==null?void 0:x.file_alternative)??null,x.file_path??"naskah-keluar",null,0,x.created_at),title:x.file}):e.jsx(ts,{className:"text-red-600 h-6 w-6 cursor-pointer",onClick:()=>Wa(x.file,x.file_path??(x.tipe_naskah==="Naskah Masuk Mandiri"||x.tipe_naskah==="Naskah Keluar Mandiri"?"naskah-mandiri":x.tipe_naskah==="Naskah Keluar"?"naskah-keluar":"naskah-masuk"),null,0,x.created_at),title:x.file})})}),n=="Berkas Aktif"&&e.jsx("td",{className:"max-w-[20rem] px-6 py-6",children:((u=x==null?void 0:x.lampirans)==null?void 0:u.length)>0?e.jsx("ol",{className:"list-decimal",children:x.lampirans.map((D,E)=>e.jsx("li",{className:"hover:underline cursor-pointer break-all text-blue-500 mb-2",onClick:()=>Wa(D.file,D.file_path??"lampiran"),children:D.nama},E))}):e.jsx(be,{badgeContent:"Tidak ada",color:"secondary",container:!0})}),e.jsx("td",{className:"max-w-[20rem] px-6 py-6",children:x.action})]},S)}):e.jsx(e.Fragment,{})]})]}),e.jsxs("nav",{className:"flex items-center justify-between p-4","aria-label":"Table navigation",children:[e.jsx("span",{className:"text-sm text-gray-400",children:X.from&&`Menampilkan ${Se(X.from)} sampai ${Se(X.to)} dari ${Se(X.total)} entri`}),e.jsx(xa,{currentPage:_.page,lastPage:A,displayCount:5,handleClick:y})]})]})})})]})},Pb=()=>{var c,v;const r="Berkas Inaktif",[s,n]=a.useState(!1),[t,i]=a.useState(!1),[l,m]=a.useState(!1),p=JSON.parse(Le.getItem("users")),B=new on,[K,W]=a.useState(!1),[z,T]=a.useState(!0),L=ga(),$=ha(),[M,H]=a.useState([]),[V,A]=a.useState([]),[G,X]=a.useState(null),[O,I]=a.useState([]),[_,C]=a.useState({id:((c=L.state)==null?void 0:c.berkas_id)||((v=L.state)==null?void 0:v.id)||null}),[k,b]=a.useState(-1),[y,o]=a.useState({}),[F,x]=a.useState(null),[S,f]=a.useState(null),[R,u]=a.useState(!1),[D,E]=a.useState({verifikator_id:null,forward_for:"verifikator",user_id:p==null?void 0:p.id,penandatangan_id:null,naskah_keluar_id:_.id}),J="",[P,h]=a.useState(!0);a.useEffect(()=>{((p==null?void 0:p.group_role)===4||(G==null?void 0:G.status)=="TUTUP")&&u(!0),G!=null&&G.tanggal_tutup&&h(!1),ge(r,"is_create")||h(!1)},[p,G]),a.useEffect(()=>{_.id&&(U.showLoading(),j(_.id).then(()=>{n(!0)}).catch(()=>{U.fire({title:"Data tidak ditemukan",text:"Kembali ke daftar",icon:"warning",backdrop:!0}).then(()=>{})}).finally(()=>U.close()))},[_.id,k]);const d=()=>{var Q;["/proses-penyusutan/pemusnahan/detail"].includes((Q=L.state)==null?void 0:Q.back)?$(J+L.state.back,{state:{id:L.state.id}}):$(J+"/pemeliharaan--arsip/pemberkasan-arsip-inaktif")},j=async N=>{(N!=null||N!=null)&&await B.getDetail(N).then(Q=>{X(Q.data.result)})},g=()=>{$("form-naskah-aktif",{state:{formode:"Tambah",id:G==null?void 0:G.id}})};return e.jsxs(aa,{children:[e.jsx(la,{}),s&&e.jsxs(e.Fragment,{children:[e.jsxs(ie,{pt:6,pb:3,className:"flex flex-col gap-10",children:[e.jsx(ie,{children:e.jsxs("div",{className:"flex justify-between p-3 items-center",children:[e.jsx(le,{variant:"h5",fontWeight:"medium",children:"Detail Berkas Inaktif"}),e.jsxs("div",{className:"flex gap-2 items-center",children:[P&&e.jsxs(_e,{variant:"gradient",color:"info",onClick:g,children:[e.jsx(Ea,{size:"1.5em",className:"me-2"}),"Naskah Mandiri"]}),e.jsxs(_e,{variant:"gradient",color:"secondary",onClick:d,children:[e.jsx(za,{size:"1.5em",className:"me-2"}),"Kembali"]})]})]})}),e.jsx(cl,{data:G}),e.jsx(Me,{children:e.jsx(ie,{px:3,pt:3,lineHeight:1,children:e.jsx(vb,{berkasId:_.id,visibleview:R,modul:r})})})]}),e.jsx(ua,{})]})]})},Cb=()=>{var o,F,x;const r="Berkas Inaktif",s=ga(),n=new URLSearchParams(s.search).get("start_at"),t=new URLSearchParams(s.search).get("end_at"),i=new URLSearchParams(s.search).get("status"),l=new URLSearchParams(s.search).get("unit_kerja_id"),[m,p]=a.useState(!1),B=JSON.parse(Le.getItem("users"));a.useEffect(()=>{p(ge(r,"is_read",!0,!0)),k(l)},[]);const K=new on,W=new qa,[z,T]=a.useState(!1),[L,$]=a.useState(null),[M,H]=a.useState(null),[V,A]=a.useState(!1),[G,X]=a.useState(!1);let O=[];L==null?O=[]:O=L.map((S,f)=>{var R,u;return{no:f+1,klasifikasi_kode:S.klasifikasi_kode,nomor:S.nomor,nama:S.nama,created_at:S.created_at,kurun:S.kurun,jumlah:S.jumlah,retensi_aktif:S==null?void 0:S.retensi_aktif,retensi_inaktif:S==null?void 0:S.retensi_inaktif,tanggal_retensi_aktif:(S==null?void 0:S.tanggal_retensi_aktif)||"-",tanggal_retensi_inaktif:(S==null?void 0:S.tanggal_retensi_inaktif)||"-",tanggal_tutup:S==null?void 0:S.tanggal_tutup,status_akhir:S.penyusutan_akhir_nama,skkad:S.klasifikasi_keamanan_nama,unit_pengolah:((u=(R=S==null?void 0:S.berkas_pemindahan_inaktif)==null?void 0:R.pemindahan)==null?void 0:u.from_organisasi_nama)||"-"}});const[I,_]=a.useState({start_at:n,end_at:t,status:i,organisasi_id:l});a.useEffect(()=>{C()},[I]);const C=async()=>{T(!0),await K.getLaporan(I).then(S=>{let f=S.data.result;f&&($(f),T(!1)),T(!1)}).catch(S=>{T(!1)})},k=async S=>{S&&await W.detail("organisasi/instansi",S,"").then(f=>{H(f)})},b=async()=>{A(!0),await K.downloadLaporanPdf(I).then(S=>{const f=`Laporan Daftar Berkas Arsip Inaktif_${oa(I==null?void 0:I.start_at).format("YYYY-MM-DD")}_${oa(I==null?void 0:I.end_at).format("YYYY-MM-DD")}.pdf`;es(S.data,f)}).catch(S=>{console.log({error:S})}).finally(()=>A(!1))},y=async()=>{X(!0),await K.downloadLaporanExcel(I).then(S=>{const f=`Laporan Daftar Berkas Arsip Inaktif_${oa(I==null?void 0:I.start_at).format("YYYY-MM-DD")}_${oa(I==null?void 0:I.end_at).format("YYYY-MM-DD")}.xls`;es(S.data,f)}).catch(S=>{console.log({error:S})}).finally(()=>X(!1))};return e.jsx(e.Fragment,{children:e.jsxs(aa,{children:[m&&e.jsx(ie,{pt:6,pb:3,children:e.jsxs(Me,{children:[e.jsxs("div",{className:"flex gap-2 m-4",children:[e.jsx(Je,{color:"error",text:e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx(ts,{size:"2em",className:"pe-2"}),"PDF"]}),submit:!V,onClick:b,size:"small",className:"text-sm whitespace-nowrap"}),e.jsx(Je,{color:"success",text:e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx($s,{size:"2em",className:"pe-2"}),"Excel"]}),submit:!G,onClick:y,size:"small",className:"text-sm whitespace-nowrap"})]}),e.jsxs(ie,{px:3,pt:3,lineHeight:1,className:"flex flex-col items-center justify-center",children:[e.jsxs("div",{className:"mb-3 text-center",children:[e.jsx(le,{variant:"h3",fontWeight:"medium",children:"LAPORAN DAFTAR BERKAS ARSIP INAKTIF"}),e.jsxs(le,{variant:"h4",fontWeight:"medium",children:["PENCIPTA ARSIP: ",(o=B==null?void 0:B.desc_instansi)==null?void 0:o.toUpperCase()]})]}),e.jsxs(le,{variant:"h5",fontWeight:"medium",children:["PERIODE: ",(F=na(n,2))==null?void 0:F.toUpperCase()," -"," ",(x=na(t,2))==null?void 0:x.toUpperCase()]})]}),e.jsx("div",{className:"overflow-auto",children:e.jsxs("div",{className:"table p-10 min-w-full",children:[e.jsxs("table",{className:"w-full text-sm text-left !text-gray-700 dark:text-gray-400 table-bordered",children:[e.jsx("thead",{className:"text-xs text-gray-500 uppercase border-b-2 mb-1",children:e.jsxs("tr",{children:[e.jsx(q,{text:"No",className:"flex justify-center"}),e.jsx(q,{text:"Kode Klasifikasi / Nomor Berkas"}),e.jsx(q,{text:"Uraian Informasi Berkas"}),e.jsx(q,{text:"Kurun Waktu"}),e.jsx(q,{text:"Tanggal Tutup Berkas"}),e.jsx(q,{text:"Jumlah Item"}),e.jsx(q,{text:"Retensi Aktif"}),e.jsx(q,{text:"Retensi Inaktif"}),e.jsx(q,{text:"Akhir Retensi Inaktif"}),e.jsx(q,{text:"Status Akhir"}),e.jsx(q,{text:"Unit Pengolah"}),e.jsx(q,{text:"Keterangan"})]})}),e.jsxs("tbody",{children:[z?e.jsx("tr",{children:e.jsx("td",{colSpan:9,children:e.jsx(ia,{})})}):e.jsx(e.Fragment,{}),O.length?O.map((S,f)=>e.jsxs("tr",{className:"border-b border-slate-300",children:[e.jsx("td",{className:" px-6 py-6 text-center",children:S.no}),e.jsx("td",{className:" max-w-[9rem] px-6 py-6",children:e.jsxs("div",{className:"flex-wrap",children:[S.klasifikasi_kode," / ",S.nomor]})}),e.jsx("td",{className:" max-w-[9rem] px-6 py-6",children:e.jsxs("div",{className:"flex-wrap",children:[S.nama," "]})}),e.jsx("td",{className:" max-w-[9rem] px-6 py-6",children:e.jsx("div",{className:"flex-wrap",children:S.jumlah>0?S.kurun:"-"})}),e.jsx("td",{className:" max-w-[9rem] px-6 py-6",children:e.jsx("div",{className:"flex-wrap",children:S!=null&&S.tanggal_tutup?oa(S.tanggal_tutup).format("DD-MM-YYYY"):"-"})}),e.jsx("td",{className:" max-w-[9rem] px-6 py-6",children:e.jsx("div",{className:"flex-wrap",children:S.jumlah})}),e.jsx("td",{className:" max-w-[9rem] px-6 py-6",children:e.jsx("div",{className:"flex-wrap",children:S.retensi_aktif})}),e.jsx("td",{className:" max-w-[9rem] px-6 py-6",children:e.jsx("div",{className:"flex-wrap",children:S.retensi_inaktif})}),e.jsx("td",{className:" max-w-[9rem] px-6 py-6",children:e.jsx("div",{className:"flex-wrap",children:S.tanggal_retensi_inaktif})}),e.jsx("td",{className:" max-w-[9rem] px-6 py-6",children:e.jsx("div",{className:"flex-wrap",children:S.status_akhir})}),e.jsx("td",{className:" max-w-[9rem] px-6 py-6",children:e.jsx("div",{className:"flex-wrap",children:S.unit_pengolah})}),e.jsx("td",{})]},f)):e.jsx(e.Fragment,{})]})]}),e.jsx("nav",{className:"flex items-center justify-between p-4","aria-label":"Table navigation",children:e.jsxs("span",{className:"text-sm text-gray-400",children:["Menampilkan ",L==null?void 0:L.length," entri"]})})]})})]})}),e.jsx(ua,{})]})})},Tb=()=>{var o,F,x;const r="Berkas Inaktif",s=ga(),n=new URLSearchParams(s.search).get("start_at"),t=new URLSearchParams(s.search).get("end_at"),i=new URLSearchParams(s.search).get("status"),l=new URLSearchParams(s.search).get("unit_kerja_id"),m=JSON.parse(Le.getItem("users")),[p,B]=a.useState(!1);a.useEffect(()=>{B(ge(r,"is_read",!0,!0)),k(l)},[]);const K=new on,W=new qa,[z,T]=a.useState(!1),[L,$]=a.useState(null),[M,H]=a.useState(null),[V,A]=a.useState(!1),[G,X]=a.useState(!1);let O=[];L==null?O=[]:O=L.map((S,f)=>{var R,u;return{no:f+1,nomor_berkas:S==null?void 0:S.nomor,klasifikasi_kode:S.klasifikasi_kode,item_berkas:S.item_berkas,nama:S.nama,uraian:S.uraian,tanggal:S.created_at,jumlah:S.jumlah,retensi_aktif:S==null?void 0:S.retensi_aktif,retensi_inaktif:S==null?void 0:S.retensi_inaktif,tanggal_retensi_aktif:(S==null?void 0:S.tanggal_retensi_aktif)||"-",tanggal_retensi_inaktif:(S==null?void 0:S.tanggal_retensi_inaktif)||"-",tanggal_tutup:S==null?void 0:S.tanggal_tutup,status_akhir:S.penyusutan_akhir_nama,skkad:S.klasifikasi_keamanan_nama,unit_pengolah:((u=(R=S==null?void 0:S.berkas_pemindahan_inaktif)==null?void 0:R.pemindahan)==null?void 0:u.from_organisasi_nama)||"-"}});const[I,_]=a.useState({start_at:n,end_at:t,status:i,organisasi_id:l});a.useEffect(()=>{C()},[I]);const C=async()=>{T(!0),await K.getLaporanIsi(I).then(S=>{let f=S.data.result;f&&($(f),T(!1)),T(!1)}).catch(S=>{T(!1)})},k=async S=>{S&&await W.detail("organisasi/instansi",S,"").then(f=>{H(f)})},b=async()=>{A(!0),await K.downloadLaporanIsiPdf(I).then(S=>{const f=`Laporan Daftar Isi Berkas Arsip Inaktif_${oa(I==null?void 0:I.start_at).format("YYYY-MM-DD")}_${oa(I==null?void 0:I.end_at).format("YYYY-MM-DD")}.pdf`;es(S.data,f)}).catch(S=>{console.log({error:S})}).finally(()=>A(!1))},y=async()=>{X(!0),await K.downloadLaporanIsiExcel(I).then(S=>{const f=`Laporan Daftar Isi Berkas Arsip Inaktif_${oa(I==null?void 0:I.start_at).format("YYYY-MM-DD")}_${oa(I==null?void 0:I.end_at).format("YYYY-MM-DD")}.xls`;es(S.data,f)}).catch(S=>{console.log({error:S})}).finally(()=>X(!1))};return e.jsx(e.Fragment,{children:e.jsxs(aa,{children:[p&&e.jsx(ie,{pt:6,pb:3,children:e.jsxs(Me,{children:[e.jsxs("div",{className:"flex gap-2 m-4",children:[e.jsx(Je,{color:"error",text:e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx(ts,{size:"2em",className:"pe-2"}),"PDF"]}),submit:!V,onClick:b,size:"small",className:"text-sm whitespace-nowrap"}),e.jsx(Je,{color:"success",text:e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx($s,{size:"2em",className:"pe-2"}),"Excel"]}),submit:!G,onClick:y,size:"small",className:"text-sm whitespace-nowrap"})]}),e.jsxs(ie,{px:3,pt:3,lineHeight:1,className:"flex flex-col items-center justify-center",children:[e.jsxs("div",{className:"mb-3 text-center",children:[e.jsx(le,{variant:"h3",fontWeight:"medium",children:"LAPORAN DAFTAR ISI BERKAS ARSIP INAKTIF"}),e.jsxs(le,{variant:"h4",fontWeight:"medium",children:["PENCIPTA ARSIP: ",(o=m==null?void 0:m.desc_instansi)==null?void 0:o.toUpperCase()]})]}),e.jsxs(le,{variant:"h5",fontWeight:"medium",children:["PERIODE: ",(F=na(n,2))==null?void 0:F.toUpperCase()," -"," ",(x=na(t,2))==null?void 0:x.toUpperCase()]})]}),e.jsx("div",{className:"overflow-auto",children:e.jsxs("div",{className:"table p-10 min-w-full",children:[e.jsxs("table",{className:"w-full text-sm text-left !text-gray-700 dark:text-gray-400 table-bordered",children:[e.jsx("thead",{className:"text-xs text-gray-500 uppercase border-b-2 mb-1",children:e.jsxs("tr",{children:[e.jsx(q,{text:"No"}),e.jsx(q,{text:"Kode Klasifikasi / Nomor Berkas"}),e.jsx(q,{text:"URAIAN INFORMASI Berkas"}),e.jsx(q,{text:"Tanggal Tutup Berkas"}),e.jsx(q,{text:"Akhir Retensi Inaktif"}),e.jsx(q,{text:"No Item Arsip"}),e.jsx(q,{text:"Uraian Informasi Arsip"}),e.jsx(q,{text:"Tanggal Item"}),e.jsx(q,{text:"Jumlah Item"}),e.jsx(q,{text:"Unit Pengolah"}),e.jsx(q,{text:"Keterangan"})]})}),e.jsxs("tbody",{children:[z?e.jsx("tr",{children:e.jsx("td",{colSpan:9,children:e.jsx(ia,{})})}):e.jsx(e.Fragment,{}),!!(O!=null&&O.length)&&O.map((S,f)=>{var R;return e.jsxs(Ga.Fragment,{children:[e.jsxs("tr",{className:"border-b border-slate-300",children:[e.jsx("td",{className:" max-w-[9rem] px-6 py-6",children:e.jsx("div",{className:"flex-wrap text-center",children:S.no})}),e.jsx("td",{className:"px-6 py-6",children:e.jsxs("div",{className:"flex-wrap",children:[S.klasifikasi_kode," / ",S==null?void 0:S.nomor_berkas]})}),e.jsx("td",{className:" max-w-[9rem] px-6 py-6",children:e.jsx("div",{className:"flex-wrap text-center",children:S.nama})}),e.jsx("td",{className:" max-w-[9rem] px-6 py-6",children:e.jsx("div",{className:"flex-wrap text-center",children:S!=null&&S.tanggal_tutup?oa(S.tanggal_tutup).format("DD-MM-YYYY"):"-"})}),e.jsx("td",{className:" max-w-[9rem] px-6 py-6",children:e.jsx("div",{className:"flex-wrap text-center",children:S.tanggal_retensi_inaktif})}),e.jsx("td",{className:"max-w-[9rem] px-6 py-6"}),e.jsx("td",{className:"max-w-[9rem] px-6 py-6"}),e.jsx("td",{className:"max-w-[9rem] px-6 py-6"}),e.jsx("td",{className:" max-w-[9rem] px-6 py-6",children:e.jsx("div",{className:"flex-wrap text-center",children:S.jumlah})}),e.jsx("td",{className:" max-w-[9rem] px-6 py-6",children:e.jsx("div",{className:"flex-wrap",children:S.unit_pengolah})}),e.jsx("td",{})]},S==null?void 0:S.id),(R=S.item_berkas)==null?void 0:R.map((u,D)=>e.jsxs("tr",{className:"border-b border-slate-300",children:[e.jsx("td",{className:" max-w-[2rem] px-6 py-6"}),e.jsx("td",{className:" max-w-[9rem] px-6 py-6"}),e.jsx("td",{className:" max-w-[9rem] px-6 py-6"}),e.jsx("td",{className:" max-w-[9rem] px-6 py-6"}),e.jsx("td",{className:" max-w-[9rem] px-6 py-6"}),e.jsx("td",{className:" max-w-[9rem] px-6 py-6 align-top",children:e.jsxs("div",{className:"flex-wrap text-center",children:[D+1," "]})}),e.jsx("td",{className:" max-w-[9rem] px-6 py-6 align-top",children:e.jsx("div",{className:"flex-wrap",children:Qn.includes(u==null?void 0:u.jenis_naskah)?(u==null?void 0:u.hal)&&u.hal.split("||").map(E=>e.jsxs("div",{className:"mb-1",children:[E.includes("Catatan:")?"":"- ",E]})):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mb-2",children:u==null?void 0:u.nomor}),e.jsx("div",{children:u==null?void 0:u.ringkasan})]})})}),e.jsx("td",{className:" max-w-[9rem] px-6 py-6 align-top",children:e.jsx("div",{className:"flex-wrap",children:u!=null&&u.tanggal?oa(u.tanggal).format("DD-MM-YYYY"):"-"})}),e.jsx("td",{className:" max-w-[2rem] px-6 py-6"}),e.jsx("td",{className:" max-w-[2rem] px-6 py-6"}),e.jsx("td",{className:" max-w-[9rem] px-6 py-6 align-top",children:e.jsx("div",{className:"flex-wrap",children:u.jenis_naskah})})]},`isi-${D}`))]},f)})]})]}),e.jsx("nav",{className:"flex items-center justify-between p-4","aria-label":"Table navigation",children:e.jsxs("span",{className:"text-sm text-gray-400",children:["Menampilkan ",(L==null?void 0:L.length)??0," entri"]})})]})})]})}),e.jsx(ua,{})]})})},go=()=>e.jsx(lu,{className:"mt-5",children:e.jsxs(Xa,{sx:{my:4},children:[e.jsx(Ca,{variant:"h4",align:"center",gutterBottom:!0,children:"Kebijakan Privasi dan Keamanan - SRIKANDI"}),e.jsxs(Xa,{sx:{my:2},children:[e.jsx(Ca,{variant:"h5",gutterBottom:!0,children:"1. Pengumpulan Data"}),e.jsx(Ca,{paragraph:!0,children:"SRIKANDI mengumpulkan data arsip dinamis dari berbagai Instansi Pusat dan Pemerintah Daerah yang terdaftar dalam sistem. Data yang dikumpulkan meliputi informasi arsip, metadata arsip, serta informasi pengguna yang berhubungan dengan kegiatan pengarsipan."})]}),e.jsxs(Xa,{sx:{my:2},children:[e.jsx(Ca,{variant:"h5",gutterBottom:!0,children:"2. Penggunaan Data"}),e.jsx(Ca,{paragraph:!0,children:"Data yang dikumpulkan oleh aplikasi SRIKANDI hanya digunakan untuk keperluan pengelolaan arsip dinamis. Setiap penggunaan data di luar tujuan tersebut harus mendapat persetujuan dari pihak yang berwenang."})]}),e.jsxs(Xa,{sx:{my:2},children:[e.jsx(Ca,{variant:"h5",gutterBottom:!0,children:"3. Keamanan Data"}),e.jsxs(On,{children:[e.jsx(zt,{children:e.jsx(Ut,{primary:"Enkripsi data: Informasi yang tersimpan dalam sistem dienkripsi untuk menjaga kerahasiaan."})}),e.jsx(zt,{children:e.jsx(Ut,{primary:"Autentikasi pengguna: Pengguna aplikasi harus melalui proses otentikasi, seperti penggunaan username, password, dan captcha untuk mengakses aplikasi."})}),e.jsx(zt,{children:e.jsx(Ut,{primary:"Kontrol akses: Hanya pengguna yang memiliki hak akses tertentu yang dapat melihat atau memodifikasi dokumen tertentu."})})]})]}),e.jsxs(Xa,{sx:{my:2},children:[e.jsx(Ca,{variant:"h5",gutterBottom:!0,children:"4. Penyimpanan Data"}),e.jsx(Ca,{paragraph:!0,children:"Data dalam SRIKANDI disimpan secara digital di server yang dikelola oleh pemerintah, dengan jaminan keamanan fisik dan digital. Penyimpanan data dilakukan dengan jangka waktu yang sesuai dengan kebijakan kearsipan, memastikan bahwa arsip tetap aman untuk diakses di masa mendatang."})]}),e.jsxs(Xa,{sx:{my:2},children:[e.jsx(Ca,{variant:"h5",gutterBottom:!0,children:"5. Kerahasiaan"}),e.jsx(Ca,{paragraph:!0,children:"Sistem ini dirancang untuk menjaga kerahasiaan informasi arsip. Akses terhadap arsip dibatasi hanya untuk pihak-pihak yang berwenang, dan setiap aktivitas akses maupun perubahan terhadap arsip tercatat dalam log aktivitas."})]}),e.jsxs(Xa,{sx:{my:2},children:[e.jsx(Ca,{variant:"h5",gutterBottom:!0,children:"6. Hak Pengguna"}),e.jsxs(On,{children:[e.jsx(zt,{children:e.jsx(Ut,{primary:"Mengakses arsip yang sesuai dengan peran dan wewenang mereka."})}),e.jsx(zt,{children:e.jsx(Ut,{primary:"Mengetahui kebijakan privasi dan bagaimana arsip mereka diproses dalam sistem."})})]})]}),e.jsxs(Xa,{sx:{my:2},children:[e.jsx(Ca,{variant:"h5",gutterBottom:!0,children:"7. Audit dan Pelacakan"}),e.jsx(Ca,{paragraph:!0,children:"Setiap aktivitas yang dilakukan di dalam aplikasi SRIKANDI, seperti pengunggahan, pengeditan, dan penghapusan arsip, dicatat dan dapat diaudit. Ini membantu menjaga transparansi dan memungkinkan pihak berwenang untuk memantau penggunaan dan perubahan yang dilakukan pada arsip."})]}),e.jsxs(Xa,{sx:{my:2},children:[e.jsx(Ca,{variant:"h5",gutterBottom:!0,children:"8. Kepatuhan Terhadap Regulasi"}),e.jsx(Ca,{paragraph:!0,children:"SRIKANDI mematuhi undang-undang dan regulasi terkait kearsipan, keamanan informasi, dan privasi data di Indonesia, seperti UU No. 43 Tahun 2009 tentang Kearsipan, Perpres No. 95 Tahun 2018 tentang SPBE dan peraturan perundang-undangan lainnya."})]}),e.jsxs(Xa,{sx:{my:2},children:[e.jsx(Ca,{variant:"h5",gutterBottom:!0,children:"9. Tanggung Jawab Pengguna"}),e.jsx(Ca,{paragraph:!0,children:"Pengguna diharapkan untuk menggunakan aplikasi sesuai dengan pedoman dan kebijakan yang ditetapkan. Penyalahgunaan sistem, termasuk pengaksesan arsip tanpa izin atau membocorkan informasi, dapat berujung pada tindakan hukum."})]}),e.jsxs(Xa,{sx:{my:2},children:[e.jsx(Ca,{variant:"h5",gutterBottom:!0,children:"10. Pembaruan Kebijakan"}),e.jsx(Ca,{paragraph:!0,children:"Kebijakan privasi dan keamanan SRIKANDI dapat diperbarui secara berkala untuk menyesuaikan dengan perubahan regulasi atau perkembangan teknologi. Pengguna akan diberitahu jika ada pembaruan signifikan yang dapat mempengaruhi pengelolaan arsip."})]})]})});function Fb(){let r=ha();const s="";JSON.parse(Le.getItem("access_token"));const n=new Date().getFullYear(),[t,i]=a.useState(!1),[l,m,p]=["https://dashboardspbe.layanan.go.id/dashboard/Arsip%20Nasional%20Republik%20Indonesia","https://layanan.arsip.go.id/","https://layanan.arsip.go.id/knowledgebase.php"],B=()=>{window.location.replace(l)},K=()=>{window.location.replace(p)},W=()=>{window.location.replace(m)},z=()=>{},[T,L]=Ga.useState(null),$=!!T,M=V=>{L(V.currentTarget)},H=()=>{r(s+"/auth/login")};return e.jsxs("div",{children:[e.jsx(Xa,{sx:{display:{xs:"flex",md:"none"}},children:e.jsxs(w,{container:!0,sx:{backgroundColor:"#fff",backgroundSize:"100%",borderRadius:{xs:0,md:5},height:"auto"},children:[e.jsx(w,{container:!0,sx:{backgroundImage:`url(${ed})`,backgroundRepeat:"no-repeat",backgroundSize:{xs:"100% 13rem",md:"100% 9rem"},height:{xs:"13rem",md:"9rem"},borderTopRightRadius:{xs:0,md:10},borderTopLeftRadius:{xs:0,md:10}},children:e.jsx(w,{container:!0,direction:"row",justifyContent:"flex-end",rowSpacing:0,pr:0,pt:1,children:e.jsx(w,{item:!0,children:e.jsxs(Rs,{variant:"text",size:"large",id:"basic-button","aria-controls":$?"basic-menu":void 0,"aria-haspopup":"true","aria-expanded":$?"true":void 0,onClick:M,children:[e.jsx(So,{color:"light"}),e.jsxs(Ls,{id:"basic-menu",anchorEl:T,open:$,onClose:H,MenuListProps:{"aria-labelledby":"basic-button"},children:[e.jsx(Ms,{onClick:B,children:"Dashboard"}),e.jsx(Ms,{onClick:W,children:"Bantuan"}),e.jsx(Ms,{onClick:H,children:"Login"}),e.jsx(Ms,{onClick:K,children:"Riwayat Pembaruan"}),e.jsx(Ms,{onClick:z,children:"Privasi"})]})]})})})}),e.jsx(go,{}),e.jsx(w,{container:!0,sx:{backgroundImage:`url(${ad})`,bottom:0,backgroundRepeat:"no-repeat",backgroundSize:{xs:"100% 13rem",md:"100% 9rem"},height:{xs:"13rem",md:"9rem"},borderBottomRightRadius:{xs:0,md:10},borderBottomLeftRadius:{xs:0,md:10}},children:e.jsx(w,{container:!0,direction:"row",justifyContent:"start",alignItems:"end",ml:0,children:e.jsx(w,{item:!0,children:e.jsx(Ca,{fontSize:"0.6rem",color:"#eceff1",children:"Copyright © 2023 Arsip Nasional Republik Indonesia"})})})})]})}),e.jsx(Xa,{sx:{backgroundImage:`url(${Zc})`,backgroundSize:"cover",backgroundPositionX:"center",backgroundPositionY:"bottom",width:"100%",height:"100vh",display:{xs:"none",md:"flex"}},px:{xs:2,md:6},pt:2,children:e.jsxs(w,{container:!0,direction:"row",justifyContent:"center",alignItems:"center",children:[e.jsxs(w,{item:!0,md:12,lg:10,container:!0,direction:"row",justifyContent:"between",mb:1,p:{xs:2,md:3},sx:{backgroundColor:"#fff",borderRadius:"30px",boxShadow:"-5px -1px 30px #dedede"},children:[e.jsx(w,{item:!0,xs:12,mb:2,children:e.jsxs(w,{container:!0,direction:"row",justifyContent:"center",children:[e.jsx(w,{item:!0,xs:"auto",mx:3,children:e.jsx(Rs,{href:l,variant:"text",sx:{fontSize:"1.2rem",textTransform:"capitalize",color:"#606060"},children:"Dashboard"})}),e.jsx(w,{item:!0,xs:"auto",mx:3,children:e.jsx(Rs,{href:m,variant:"text",sx:{fontSize:"1.2rem",textTransform:"capitalize",color:"#606060"},children:"Bantuan"})}),e.jsx(w,{item:!0,xs:"auto",mx:3,children:e.jsx(Rs,{onClick:H,variant:"text",sx:{fontSize:"1.2rem",textTransform:"capitalize",color:"#606060"},children:"Login"})}),e.jsx(w,{item:!0,xs:"auto",mx:3,children:e.jsx(Rs,{href:p,variant:"text",sx:{fontSize:"1.2rem",textTransform:"capitalize",color:"#606060"},children:"Riwayat Pembaruan"})}),e.jsx(w,{item:!0,xs:"auto",mx:3,children:e.jsx(Rs,{onClick:z,variant:"text",sx:{fontSize:"1.2rem",textTransform:"capitalize"},children:"Privasi"})})]})}),e.jsx(go,{})]}),e.jsx(w,{item:!0,xs:12,py:0,children:e.jsxs(Ca,{align:"center",variant:"body2",children:["Copyright © ",n," Arsip Nasional Republik Indonesia"]})}),e.jsx(ys,{open:t,children:e.jsx(Na,{children:e.jsx(br,{color:"error"})})})]})})]})}const Db=()=>{const r="Verifikasi Pemusnahan",[s,n]=a.useState(!1);a.useEffect(()=>{n(ge(r,"is_read",!0))},[]);const t=JSON.parse(Le.getItem("users")),i=new Cr,l=ha(),[m,p]=a.useState(!1),[B,K]=a.useState(null),[W,z]=a.useState(null),[T,L]=a.useState({total:0,from:1,to:1});let $=[];B==null?$=[]:$=B.map((_,C)=>{var k,b,y,o,F;return{no:C+T.from,id:_.id,organisasi:_==null?void 0:_.from_organisasi_nama,jumlah:(k=_==null?void 0:_.berkas_pemusnahan)==null?void 0:k.length,description:_==null?void 0:_.description,created_at:_.created_at,tanggal_musnah:_==null?void 0:_.tanggal_musnah,status:(_==null?void 0:_.status)=="USUL"?e.jsx(be,{badgeContent:"DIUSUL",color:"secondary",container:!0}):(_==null?void 0:_.status)=="UPLOAD"?e.jsx(be,{badgeContent:"SELESAI",color:"success",container:!0}):e.jsxs("div",{className:"flex flex-col gap-3",children:[((b=_==null?void 0:_.berkas_pemusnahan)==null?void 0:b.filter(x=>x.status==="SETUJU").length)>0&&e.jsx(be,{badgeContent:`${(y=_==null?void 0:_.berkas_pemusnahan)==null?void 0:y.filter(x=>x.status==="SETUJU").length} SETUJU`,color:"success",container:!0}),((o=_==null?void 0:_.berkas_pemusnahan)==null?void 0:o.filter(x=>x.status==="DITOLAK").length)>0?e.jsx(be,{badgeContent:`${(F=_==null?void 0:_.berkas_pemusnahan)==null?void 0:F.filter(x=>x.status==="DITOLAK").length} TOLAK`,color:"error",container:!0}):""]}),action:e.jsx("div",{className:"flex gap-2 items-center justify-center w-full",children:e.jsx(Oa,{size:"1.5em",color:"#17c1e8",onClick:()=>I(_),className:"cursor-pointer",title:"Lihat"})})}});const[M,H]=a.useState({organisasi_id:t==null?void 0:t.organisasi_id,public_organisasi_id:t==null?void 0:t.public_organisasi_id,group_role_id:t==null?void 0:t.group_role,page:1,rows:10,sortField:"",sortOrder:null,search:"",filters:{created_at:{value:""},tanggal_musnah:{value:""},status:{value:""}}});a.useEffect(()=>{V()},[M]);const V=async(_=!1)=>{_&&(M.page=1),p(!0),await i.getPaging(M).then(C=>{let k=C.data.result;k.data&&(z(k.last_page),K(k.data),p(!1)),p(!1),L({...T,to:k.to,from:k.from,total:k.total})}).catch(C=>{p(!1),L({...T,to:0,from:!1,total:0})})},A=Da((_,C,k=null)=>{if(k){let y=k.target;for(;y&&y.tagName!=="TD";)y=y.parentNode;if(y&&y.tagName==="TD"){const o=y.querySelector(".clear-input"),F=y.querySelector("input");C?o.classList.remove("hidden"):(o.classList.add("hidden"),F.value="")}}let b={...M};b.filters[_].value=C,b.page=1,H(b)},600),G=_=>{let C={...M};C.page=_,H(C),window.scrollTo({top:0,behavior:"smooth"})},X=_=>{let C={...M};C.rows=_,C.page=1,H(C)},O=_=>{let C={...M};C.sortField=_,M.sortField!=_?M.sortOrder==""&&(C.sortOrder=1):M.sortOrder==1?C.sortOrder=-1:(C.sortOrder="",C.sortField=""),C.page=1,H(C)},I=_=>{l("detail",{state:{formode:"Lihat",id:_.id}})};return e.jsxs(aa,{children:[e.jsx(la,{}),s&&e.jsxs(e.Fragment,{children:[" ",e.jsx(ie,{pt:6,pb:3,children:e.jsxs(Me,{children:[e.jsx(ie,{px:3,pt:3,lineHeight:1,children:e.jsx(w,{container:!0,direction:"row",justifyContent:"space-between",alignItems:"center",children:e.jsx(w,{item:!0,children:e.jsx(le,{variant:"h5",fontWeight:"medium",children:"Daftar Proses Pemusnahan"})})})}),e.jsx("div",{className:"overflow-auto",children:e.jsxs("div",{className:"table p-10 min-w-full",children:[e.jsx("div",{className:"flex justify-end mb-1",children:e.jsx(pa,{config:M,handleClick:X})}),e.jsxs("table",{className:"w-full text-sm text-left !text-gray-700 dark:text-gray-400 table-bordered",children:[e.jsx("thead",{className:"text-xs text-gray-500 uppercase border-b-2 mb-1",children:e.jsxs("tr",{children:[e.jsx(q,{text:"No",className:"flex justify-center"}),e.jsx(q,{text:"Dibuat pada",sortField:"created_at",sortOrder:M.sortOrder,config:M,handleClick:()=>O("created_at")}),e.jsx(q,{text:"Deskripsi"}),e.jsx(q,{text:"Jumlah Berkas",sortField:"jumlah",sortOrder:M.sortOrder,config:M,handleClick:()=>O("jumlah")}),e.jsx(q,{text:"Tanggal Musnah",sortField:"tanggal_musnah",sortOrder:M.sortOrder,config:M,handleClick:()=>O("tanggal_musnah")}),e.jsx(q,{text:"Status",sortField:"status",sortOrder:M.sortOrder,config:M,handleClick:()=>O("status")}),e.jsx(q,{text:"Aksi",className:"flex justify-center min-w-[2rem]"})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{className:"border-b border-slate-300",children:[e.jsx("td",{className:"max-w-[20rem] py-6"}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"created_at",onSearch:A,placeholder:"Tanggal Dibuat",type:"input",isDate:!0})}),e.jsx("td",{}),e.jsx("td",{}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"tanggal_musnah",onSearch:A,placeholder:"Tanggal Musnah",type:"input",isDate:!0})}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"status",onSearch:A,placeholder:"Status",type:"select",selectOption:Zp})}),e.jsx("td",{})]}),m?e.jsx("tr",{children:e.jsx("td",{colSpan:7,children:e.jsx(ia,{})})}):e.jsx(e.Fragment,{}),$.length?$.map((_,C)=>e.jsxs("tr",{className:"border-b border-slate-300",children:[e.jsx("td",{className:"px-6 py-6",children:e.jsx("div",{className:"flex justify-center",children:_.no})}),e.jsx("td",{className:" max-w-[20rem] px-6 py-6 ",children:_.created_at?na(_.created_at):"-"}),e.jsx("td",{className:"px-6 py-6",children:_.description}),e.jsx("td",{className:" max-w-[20rem] px-6 py-6",children:_.jumlah}),e.jsx("td",{className:" max-w-[20rem] px-6 py-6 ",children:_.tanggal_musnah?na(_.tanggal_musnah):"-"}),e.jsx("td",{className:" max-w-[20rem] px-6 py-6",children:_.status}),e.jsxs("td",{className:"px-3 text-right w-[2rem]",children:[" ",_.action," "]})]},C)):e.jsx(e.Fragment,{})]})]}),e.jsxs("nav",{className:"flex items-center justify-between p-4","aria-label":"Table navigation",children:[e.jsx("span",{className:"text-sm text-gray-400",children:T.from&&`Menampilkan ${Se(T.from)} sampai ${Se(T.to)} dari ${Se(T.total)} entri`}),e.jsx(xa,{currentPage:M.page,lastPage:W,displayCount:5,handleClick:G})]})]})})]})}),e.jsx(ua,{})]})]})},Ib=({pemusnahanId:r,handleUploadAndSend:s,lampiranList:n,setLampiranList:t})=>{ha();const i="Verifikasi Pemusnahan",[l,m]=a.useState(!1),[p,B]=a.useState(!1);JSON.parse(Le.getItem("users")),ga();const[K,W]=a.useState(!1),[z,T]=a.useState(null),[L,$]=a.useState(null),[M,H]=a.useState(!1),V={pemusnahan_id:r,file_sk:"",file_notul:"",file_pertimbangan:"",file_persetujuan:"",file_keputusan:"",file_berita:"",file_daftar:""};a.useEffect(()=>{m(ge(i,"is_read",!0))},[]);const A=a.useRef();return e.jsxs("div",{children:[e.jsx(w,{container:!0,direction:"row",justifyContent:"space-between",alignItems:"center",children:e.jsxs(ie,{px:3,py:3,lineHeight:1,children:[e.jsx(le,{variant:"h5",fontWeight:"medium",mb:2,children:"Form Unggah Dokumen Pendukung"}),e.jsxs(le,{variant:"body",children:["Format yang didukung: ",e.jsx("strong",{children:".PDF"}),", ",e.jsx("strong",{children:".JPEG"}),","," ",e.jsx("strong",{children:".JPG"}),", ",e.jsx("strong",{children:".PNG"})," dan Maksimal ukuran file"," ",e.jsx("strong",{children:"5 MB per dokumen"}),"."]})]})}),e.jsx(ca,{innerRef:A,initialValues:V,onSubmit:s,validationSchema:kb,enableReinitialize:!0,children:e.jsxs(da,{id:"formDocs",encType:"multipart/form-data",children:[ag.map(G=>e.jsx(ce,{name:G.name,children:({field:X,form:O,meta:I})=>e.jsx("div",{className:"px-6",children:e.jsxs("div",{className:"grid grid-cols-12 gap-2 ",children:[e.jsxs("div",{className:"col-span-4 mt-3",children:[e.jsx(de,{text:G.title,required:!0,error:I.error}),e.jsx("div",{className:"mb-2",children:e.jsx(ue,{text:I.error,error:I.error})})]}),e.jsx("div",{className:"col-span-8",children:e.jsx(et,{onFileSelected:_=>{O.setFieldValue(`${G.name}`,_??"")},isReset:!1,maxSizePerFileInMb:5,acceptedType:["application/pdf"],notifFileTypeError:"File Hanya Support .PDF"})})]})})},G.name)),e.jsx("div",{className:"p-6",children:e.jsx(ln,{lampiranList:n,setLampiranList:t})})]})})]})},Ab=({open:r,onClose:s,selectedBerkas:n,fetchData:t})=>{const i=new Cr,[l,m]=a.useState({status:"",deskripsi:""}),[p,B]=a.useState(!1),[K,W]=a.useState(!0),{mutate:z}=it({onMutate:()=>W(!1),mutationFn:T=>{if(n.length>0)return i.verifyBerkas({berkas_selected:n,...T})},onSuccess:async T=>{var L,$;T.data.success?(s(),U.fire({icon:"success",title:"Berhasil",text:(L=T.data)==null?void 0:L.message,showConfirmButton:!1,timer:1500}),B(!0),await t()):U.fire({icon:"warning",title:"Gagal",text:($=T.data)==null?void 0:$.message,showConfirmButton:!1,timer:1500})},onError:T=>{var $,M;const L=Oe(T.response.data.result);U.fire("Gagal",L??((M=($=T.response)==null?void 0:$.data)==null?void 0:M.message),"error")},onSettled:()=>W(!0)});return e.jsxs(ys,{open:r,onClose:s,fullWidth:!0,maxWidth:"sm",children:[e.jsx(_a,{children:e.jsxs("div",{className:"mx-2 flex items-center gap-2",children:[e.jsx(Ks,{className:"w-6 h-6"}),e.jsx(le,{children:"Verifikasi Pemusnahan Berkas"})]})}),e.jsx(ie,{px:3,children:e.jsxs(w,{mb:2,children:[e.jsx(de,{text:"Berkas yang dipilih",required:!0}),e.jsx("div",{className:"table min-w-full",children:e.jsxs("table",{className:"w-full text-sm text-left !text-gray-700 dark:text-gray-400 table-bordered",children:[e.jsx("thead",{className:"text-xs text-gray-500 uppercase border-b-2 mb-1",children:e.jsxs("tr",{children:[e.jsx(q,{text:"No",className:"flex justify-center"}),e.jsx(q,{text:"Kode Klasifikasi / Nomor Berkas",className:"flex justify-center"}),e.jsx(q,{text:"Nama Berkas",className:"flex justify-center"})]})}),e.jsx("tbody",{children:(n==null?void 0:n.length)>0&&n.map((T,L)=>e.jsxs("tr",{className:"border-b border-slate-300",children:[e.jsx("td",{className:" max-w-[20rem] px-6 py-2 text-center",children:L+1}),e.jsxs("td",{className:" max-w-[20rem] px-6 py-2",children:[T.klasifikasi_kode," / ",T.nomor]}),e.jsx("td",{className:" max-w-[20rem] px-6 py-2",children:T.nama})]},T==null?void 0:T.id))})]})})]})}),e.jsx(ca,{initialValues:{status:"",deskripsi:""},onSubmit:z,validateOnChange:!0,validationSchema:ol,children:e.jsx(da,{id:"formVerif",className:"text-sm",children:e.jsxs("div",{className:"p-2",children:[e.jsx(w,{children:e.jsx(Na,{children:e.jsx(ce,{name:"status",children:({field:T,form:L,meta:$})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Status Pemusnahan",required:!0,error:$.error&&$.touched}),e.jsxs("div",{className:"space-x-4 flex flex-row items-center",children:[e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{...T,type:"radio",className:"form-radio  w-4 h-4 text-blue-500 focus:ring-2 focus:ring-blue-500",checked:T.value=="SETUJU",onChange:M=>{L.setFieldValue("status","SETUJU"),M.target.checked=!0}}),e.jsx("span",{className:"text-gray-700",children:"SETUJU"})]}),e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{...T,type:"radio",className:"form-radio  w-4 h-4 text-blue-500 focus:ring-2 focus:ring-blue-500",checked:T.value=="DITOLAK",onChange:M=>{L.setFieldValue("status","DITOLAK"),M.target.checked=!0}}),e.jsx("span",{className:"text-gray-700",children:"DITOLAK"})]})]}),e.jsx(ue,{text:$.error,error:$.error&&$.touched})]})})})}),e.jsx(w,{children:e.jsx(Na,{children:e.jsx(ce,{name:"deskripsi",children:({field:T,form:L,meta:$})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Catatan",required:(l==null?void 0:l.status)==="DITOLAK",error:$.error&&$.touched}),e.jsx(Ka,{...T,placeHolder:"Masukan Catatan...",error:$.error&&$.touched}),e.jsx(ue,{text:$.error,error:$.error&&$.touched})]})})})})]})})}),e.jsx(ya,{children:e.jsxs(e.Fragment,{children:[e.jsx(Je,{submit:K,color:"success",formId:"formVerif",text:"Simpan"}),e.jsx(_e,{color:"error",variant:"gradient",onClick:s,children:"Batal"})]})})]})},Ob=({pemusnahanId:r,visibleview:s,statusPemusnahan:n,viewDetail:t})=>{const i=new Cr;JSON.parse(Le.getItem("users"));const l=ha(),[m,p]=a.useState(!1),[B,K]=a.useState(!1),[W,z]=a.useState(null),[T,L]=a.useState(!1),[$,M]=a.useState(null),[H,V]=a.useState({total:0,from:1,to:1}),[A,G]=a.useState([]),[X,O]=a.useState(!1);let I=[];W==null?I=[]:I=W==null?void 0:W.map((u,D)=>{var E,J,P,h,d,j,g,c,v,N;return{no:D+H.from,id:u.id,berkas_id:u==null?void 0:u.berkas_id,pemusnahan_id:u==null?void 0:u.pemusnahan_id,klasifikasi_id:(E=u==null?void 0:u.berkas)==null?void 0:E.klasifikasi_id,nomor:(J=u==null?void 0:u.berkas)==null?void 0:J.nomor,klasifikasi_kode:(P=u==null?void 0:u.berkas)==null?void 0:P.klasifikasi_kode,nama:(h=u==null?void 0:u.berkas)==null?void 0:h.nama,retensi_aktif:(d=u==null?void 0:u.berkas)==null?void 0:d.retensi_aktif,retensi_inaktif:(j=u==null?void 0:u.berkas)==null?void 0:j.retensi_inaktif,tanggal_tutup:(g=u==null?void 0:u.berkas)==null?void 0:g.tanggal_tutup,tanggal_retensi_inaktif:(c=u==null?void 0:u.berkas)==null?void 0:c.tanggal_retensi_inaktif,kurun:(v=u==null?void 0:u.berkas)==null?void 0:v.kurun,jumlah:(N=u==null?void 0:u.berkas)==null?void 0:N.jumlah,created_at:u.created_at,status:u==null?void 0:u.status,deskripsi:u==null?void 0:u.deskripsi}});const _=u=>{l(""+"/pemeliharaan--arsip/pemberkasan-arsip-inaktif/detail",{state:{formode:"Lihat",berkas_id:u.berkas_id,back:"/proses-penyusutan/pemusnahan/detail",id:r}})},[C,k]=a.useState({pemusnahan_id:r,page:1,rows:10,sortField:"",sortOrder:null,search:"",status:n,filters:{kode:{value:""},nama:{value:""},status:{value:""}}});a.useEffect(()=>{r&&b()},[C,r,n]);const b=async(u=!1)=>{u&&(C.page=1),G([]),K(!0),await i.getPagingListBerkas(C).then(D=>{let E=D.data.result;E.data&&(M(E.last_page),z(E.data),K(!1)),K(!1),V({...H,to:E.to,from:E.from,total:E.total})}).catch(D=>{var E;console.log({error:D}),((E=D.response)==null?void 0:E.status)==404&&z([]),K(!1),V({...H,to:0,from:!1,total:0})})},y=os((u,D,E=null)=>{if(E){let P=E.target;for(;P&&P.tagName!=="TD";)P=P.parentNode;if(P&&P.tagName==="TD"){const h=P.querySelector(".clear-input"),d=P.querySelector("input");D?h.classList.remove("hidden"):(h.classList.add("hidden"),d.value="")}}let J={...C};J.filters[u].value=D,J.page=1,k(J)},600),o=u=>{let D={...C};D.page=u,k(D),window.scrollTo({top:0,behavior:"smooth"})},F=u=>{let D={...C};D.rows=u,k(D)},x=u=>{let D={...C};D.sortField=u,C.sortField!=u?C.sortOrder==""&&(D.sortOrder=1):C.sortOrder==1?D.sortOrder=-1:(D.sortOrder="",D.sortField=""),D.page=1,k(D)},S=()=>{L(!1)},f=()=>{L(!0)};a.useEffect(()=>{I&&O(A.length==(I==null?void 0:I.length))},[I,A]);const R=()=>{G(X?[]:I)};return e.jsxs("div",{children:[e.jsxs(w,{container:!0,direction:"row",justifyContent:"space-between",alignItems:"center",mb:3,children:[e.jsx(ie,{px:3,pt:3,lineHeight:1,children:e.jsx(le,{variant:"h5",fontWeight:"medium",children:"Daftar Berkas"})}),!s&&e.jsx(ie,{px:3,pt:3,lineHeight:1,children:e.jsx(_e,{variant:"gradient",color:"info",onClick:f,disabled:!A.length,children:e.jsx("p",{children:"Verifikasi Pemusnahan"})})})]}),e.jsx(w,{children:e.jsx("div",{className:"overflow-auto",children:e.jsxs("div",{className:"table px-6 pb-6 min-w-full",children:[e.jsx("div",{className:"flex items-center justify-end mb-1",children:e.jsx(pa,{config:C,handleClick:F})}),e.jsxs("table",{className:"w-full text-sm text-left !text-gray-700 dark:text-gray-400 table-bordered",children:[e.jsx("thead",{className:"text-xs text-gray-500 uppercase border-b-2 mb-1",children:e.jsxs("tr",{children:[!s&&e.jsx(q,{}),e.jsx(q,{text:"No",sortField:"no",sortOrder:C.sortOrder,config:C,handleClick:()=>x("no")}),e.jsx(q,{text:"Kode Klasifikasi / Nomor Berkas",sortField:"klasifikasi_kode",sortOrder:C.sortOrder,config:C,handleClick:()=>x("klasifikasi_kode")}),e.jsx(q,{text:"Berkas",sortField:"nama",sortOrder:C.sortOrder,config:C,handleClick:()=>x("nama")}),e.jsx(q,{text:"Kurun Waktu",sortField:"kurun",sortOrder:C.sortOrder,config:C,handleClick:()=>x("kurun")}),e.jsx(q,{text:"Jumlah",sortField:"jumlah",sortOrder:C.sortOrder,config:C,handleClick:()=>x("jumlah")}),e.jsx(q,{text:"Akhir Retensi Inktif",sortField:"tanggal_retensi_inaktif",sortOrder:C.sortOrder,config:C,handleClick:()=>x("tanggal_retensi_inaktif")}),e.jsx(q,{text:"Status"}),e.jsx(q,{text:"Catatan"}),(!s||n=="VERIFIKASI")&&e.jsx(q,{text:"Aksi",className:"flex justify-center min-w-[2rem]"})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{className:"border-b border-slate-300",children:[!s&&e.jsx("td",{className:"max-w-[20rem] px-6 py-6",children:n=="USUL"&&e.jsx("input",{type:"checkbox",className:"form-checkbox h-5 w-5 text-indigo-600",checked:X,onChange:R,disabled:s})}),e.jsx("td",{}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2"}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"nama",onSearch:y,placeholder:"Berkas",type:"input"})}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2"}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2"}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2"}),e.jsx("td",{}),e.jsx("td",{}),e.jsx("td",{}),(!s||n=="VERIFIKASI")&&e.jsx("td",{})]}),B?e.jsx("tr",{className:"border-b border-slate-300",children:e.jsx("td",{colSpan:9,children:e.jsx(ia,{})})}):e.jsx(e.Fragment,{}),I.length?I==null?void 0:I.map((u,D)=>e.jsxs("tr",{className:"border-b border-slate-300",children:[!s&&e.jsx("td",{className:"max-w-[20rem] px-6 py-6",children:((u==null?void 0:u.status)=="USUL"||n=="USUL")&&e.jsx("input",{type:"checkbox",className:"form-checkbox h-5 w-5 text-indigo-600",checked:A==null?void 0:A.some(E=>E.id===u.id),onChange:E=>{if(E.target.checked)G(J=>[...J,u]);else{let J=A==null?void 0:A.filter(P=>P.id!==(u==null?void 0:u.id));G(J)}},disabled:s})}),e.jsx("td",{className:"max-w-[20rem] px-6 py-6",children:u.no}),e.jsxs("td",{className:"max-w-[20rem] px-6 py-6",children:[u.klasifikasi_kode," / ",u.nomor]}),e.jsx("td",{className:"max-w-[20rem] px-6 py-6",children:u.nama??"-"}),e.jsx("td",{className:"max-w-[20rem] px-6 py-6",children:u.kurun}),e.jsx("td",{className:"max-w-[20rem] px-6 py-6",children:u.jumlah}),e.jsx("td",{className:"max-w-[20rem] px-6 py-6 ",children:u.tanggal_retensi_inaktif??"-"}),e.jsx("td",{className:"max-w-[20rem] px-6 py-6 text-center",children:!u.status||u.status=="USUL"?e.jsx(be,{badgeContent:"USUL",color:"secondary",container:!0}):u.status==="SETUJU"?e.jsx(be,{badgeContent:"SETUJU",color:"success",container:!0}):e.jsx(be,{badgeContent:"DITOLAK",color:"error",container:!0})}),e.jsx("td",{className:"max-w-[20rem] px-6 py-6",children:u.deskripsi??"-"}),(!s||n=="VERIFIKASI")&&e.jsx("td",{className:"max-w-[20rem] px-6 py-6",children:e.jsx("div",{className:"flex justify-center w-full",children:t&&ge("Berkas Aktif","is_read")&&e.jsx(Oa,{size:"1.5em",color:"#17c1e8",onClick:()=>_(u),className:"cursor-pointer",title:"Lihat"})})})]},D)):e.jsx(e.Fragment,{})]})]}),e.jsxs("nav",{className:"flex items-center justify-between p-4","aria-label":"Table navigation",children:[e.jsx("span",{className:"text-sm text-gray-400",children:H.from&&`Menampilkan ${Se(H.from)} sampai ${Se(H.to)} dari ${Se(H.total)} entri`}),e.jsx(xa,{currentPage:C.page,lastPage:$,displayCount:5,handleClick:o})]})]})})}),e.jsx(Ab,{open:T,onClose:S,selectedBerkas:A,fetchData:b})]})},Bb=({pemusnahanId:r,refresh:s})=>{const n=new Cr;JSON.parse(Le.getItem("users"));const[t,i]=a.useState(!1),[l,m]=a.useState(null),[p,B]=a.useState(null),[K,W]=a.useState({total:0,from:1,to:1});let z=[];l==null?z=[]:z=l==null?void 0:l.map((V,A)=>({no:A+1,nama:V==null?void 0:V.nama,file:V==null?void 0:V.file,file_path:V==null?void 0:V.file_path,deskripsi:V==null?void 0:V.deskripsi}));const[T,L]=a.useState({pemusnahan_id:r,page:1,rows:10,sortField:"",sortOrder:null,search:"",filters:{tanggal:{value:""},tipe_naskah:{value:""},jenis_naskah:{value:""},nomor:{value:""},hal:{value:""}}});a.useEffect(()=>{r&&$()},[T,r,s]);const $=async(V=!1)=>{V&&(T.page=1),i(!0),await n.getPagingItems(T).then(A=>{let G=A.data.result;G.data&&(B(G.lastPage),m(G.data),i(!1)),i(!1),W({...K,to:G.to,from:G.from,total:G.total})}).catch(A=>{console.log({error:A}),i(!1),W({...K,to:0,from:!1,total:0})})};os((V,A,G=null)=>{if(G){let O=G.target;for(;O&&O.tagName!=="TD";)O=O.parentNode;if(O&&O.tagName==="TD"){const I=O.querySelector(".clear-input"),_=O.querySelector("input");A?I.classList.remove("hidden"):(I.classList.add("hidden"),_.value="")}}let X={...T};X.filters[V].value=A,X.page=1,L(X)},600);const M=V=>{let A={...T};A.page=V,L(A),window.scrollTo({top:0,behavior:"smooth"})},H=V=>{let A={...T};A.rows=V,L(A)};return e.jsxs("div",{children:[e.jsx(w,{container:!0,direction:"row",justifyContent:"space-between",alignItems:"center",children:e.jsx(ie,{px:3,py:3,lineHeight:1,children:e.jsx(le,{variant:"h5",fontWeight:"medium",children:"Dokumen Pendukung"})})}),e.jsx("div",{className:"overflow-auto",children:e.jsxs("div",{className:"table px-6 pb-6 min-w-full",children:[e.jsx("div",{className:"flex items-center justify-end mb-1",children:e.jsx(pa,{config:T,handleClick:H})}),e.jsxs("table",{className:"w-full text-sm text-left !text-gray-700 dark:text-gray-400 table-bordered",children:[e.jsx("thead",{className:"text-xs text-gray-500 uppercase border-b-2 mb-1",children:e.jsxs("tr",{children:[e.jsx(q,{text:"No"}),e.jsx(q,{text:"Nama File"}),e.jsx(q,{text:"Deskripsi"})]})}),e.jsxs("tbody",{children:[t?e.jsx("tr",{className:"border-b border-slate-300",children:e.jsx("td",{colSpan:3,children:e.jsx(ia,{})})}):e.jsx(e.Fragment,{}),z.length?z==null?void 0:z.map((V,A)=>e.jsxs("tr",{className:"border-b border-slate-300",children:[e.jsx("td",{className:"w-8 px-6 py-4 text-center",children:V.no}),e.jsx("td",{className:"max-w-[20rem] px-6 py-4",children:e.jsx("span",{className:"cursor-pointer hover:text-blue-500",onClick:()=>Wa(V.file,V.file_path),children:V.nama})}),e.jsx("td",{className:"max-w-[20rem] px-6 py-4",children:V.deskripsi})]},A)):e.jsx(e.Fragment,{})]})]}),e.jsxs("nav",{className:"flex items-center justify-between p-4","aria-label":"Table navigation",children:[e.jsx("span",{className:"text-sm text-gray-400",children:K.from&&`Menampilkan ${Se(K.from)} sampai ${Se(K.to)} dari ${Se(K.total)} entri`}),e.jsx(xa,{currentPage:T.page,lastPage:p,displayCount:5,handleClick:M})]})]})})]})},fo=()=>{const r="Verifikasi Pemusnahan",s=ge("Usul Pemusnahan","is_create"),n=new Cr,t=ga(),i=ha(),l={id:t.state.id};a.useEffect(()=>{p(ge(r,"is_read",!0))},[]);const[m,p]=a.useState(!1),[B,K]=a.useState(!1),[W,z]=a.useState(!0),[T,L]=a.useState(null),[$,M]=a.useState(-1),[H,V]=a.useState(!0),[A,G]=a.useState(!1),[X,O]=a.useState([]),I="",[_,C]=a.useState(!0);a.useEffect(()=>{l.id&&(U.showLoading(),b(l.id).then(()=>{p(!0)}).catch(()=>{U.fire({title:"Data tidak ditemukan",text:"Kembali ke daftar",icon:"warning",backdrop:!0})}).finally(()=>{U.close()}))},[l.id,$]),a.useEffect(()=>{ge(r,"is_create")?V(!1):V(!0),(T==null?void 0:T.status)=="VERIFIKASI"?(ge(r,"is_create")||C(!1),V(!0),G(!0)):G(!1),(T==null?void 0:T.status)=="UPLOAD"&&V(!0)},[T]);const k=()=>{var F;(F=t.state)!=null&&F.from?i(I+t.state.from):i(I+"/proses-penyusutan/pemusnahan")},b=async F=>{(F!=null||F!=null)&&await n.getDetail(F).then(x=>{L(x.data.result)})},y=()=>{l!=null&&l.id&&U.fire({title:"Selesaikan Verifikasi",text:"Apakah Anda yakin ingin menyelesaikan verifikasi pemusnahan berkas?",icon:"question",showCancelButton:!0,confirmButtonText:"Ya, Selesaikan",cancelButtonText:"Batal",customClass:{confirmButton:"button button-success",cancelButton:"button button-info"}}).then(async F=>{F.isConfirmed&&(z(!1),await n.verify({id:l==null?void 0:l.id}).then(x=>{x.data.success&&(b(l==null?void 0:l.id),U.fire("Berhasil","Pemusnahan Berkas Berhasil Diverifikasi","success"))}).catch(x=>{var f,R,u,D;const S=Oe((R=(f=x.response)==null?void 0:f.data)==null?void 0:R.result);U.fire("Gagal",S??((D=(u=x.response)==null?void 0:u.data)==null?void 0:D.message),"error")}).finally(()=>{z(!0)}))})},o=F=>{l!=null&&l.id&&U.fire({title:"Selesaikan Pemusnahan",text:"Apakah Anda yakin ingin menyimpan dokumen dan menyelesaikan pemusnahan berkas?",icon:"question",showCancelButton:!0,confirmButtonText:"Ya, Kirim",cancelButtonText:"Batal",customClass:{confirmButton:"button button-success",cancelButton:"button button-info"}}).then(async x=>{if(x.isConfirmed){const S={...F,lampirans:X};z(!1),await n.uploadFiles(S).then(f=>{f.data.success?(M($+1),U.fire("Berhasil","Berhasil Menyelesaikan Pemusnahan Berkas","success"),b(l==null?void 0:l.id)):U.fire("Gagal","Gagal Menyelesaikan Pemusnahan Berkas","warning")}).catch(f=>{var u,D,E,J;const R=Oe((D=(u=f.response)==null?void 0:u.data)==null?void 0:D.result);U.fire("Gagal",R??((J=(E=f.response)==null?void 0:E.data)==null?void 0:J.message),"error")}).finally(()=>{z(!0)})}})};return e.jsxs(aa,{children:[e.jsx(la,{}),m&&e.jsxs(e.Fragment,{children:[e.jsxs(ie,{pt:6,pb:3,className:"flex flex-col gap-10",children:[e.jsx(ie,{children:e.jsxs("div",{className:"flex justify-between p-3 items-center",children:[e.jsx(le,{variant:"h5",fontWeight:"medium",children:"Detail Pemusnahan"}),e.jsxs("div",{className:"flex gap-2 items-center",children:[!H&&!A&&(T==null?void 0:T.status)!=="UPLOAD"&&e.jsx(Je,{submit:W,color:"success",onClick:y,text:"Selesaikan Verifikasi"}),A&&e.jsx(Je,{submit:W,color:"success",formId:"formDocs",text:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Mo,{}),e.jsx("p",{children:"Selesaikan Pemusnahan"})]})}),e.jsxs(_e,{variant:"gradient",color:"secondary",onClick:k,children:[e.jsx(za,{size:"1.5em",className:"me-2"}),"Kembali"]})]})]})}),(T==null?void 0:T.status)&&e.jsxs("div",{className:`flex justify-between gap-3 p-5 items-center bg-gradient-to-r rounded-2xl ${(T==null?void 0:T.status)==="USUL"?"from-gray-400 to-gray-500":(T==null?void 0:T.status)==="VERIFIKASI"?"from-[#21d4fd] to-[#2152ff]":"from-teal-400 to-teal-500"}`,children:[e.jsx(qn,{size:"3em",className:"text-white"}),e.jsxs("div",{className:"text-right",children:[e.jsx(le,{variant:"h5",fontWeight:"medium",align:"right",color:"white",children:"Status Proses Pemusnahan"}),e.jsx(le,{variant:"caption",fontWeight:"medium",align:"right",color:"light",children:(T==null?void 0:T.status)=="USUL"?"DIUSUL":(T==null?void 0:T.status)=="UPLOAD"?"SELESAI":T==null?void 0:T.status})]})]}),A&&e.jsxs("div",{className:"flex justify-between gap-3 p-5 items-center bg-gradient-to-r rounded-2xl from-[#eecd56] to-[#f3c51f]",children:[e.jsx(Qi,{size:"3em",className:"text-white"}),e.jsxs("div",{className:"text-right",children:[e.jsx(le,{variant:"h5",fontWeight:"medium",align:"right",color:"white",children:"Unggah Dokumen Pemusnahan"}),e.jsx(le,{variant:"body",fontWeight:"medium",align:"right",color:"white",children:"Mohon unggah dokumen pemusnahan pada form di bawah"})]})]}),T&&e.jsx(Me,{children:e.jsx(ie,{px:3,pt:3,lineHeight:1,children:e.jsx(Ob,{pemusnahanId:l.id,visibleview:H||A,statusPemusnahan:T==null?void 0:T.status,viewDetail:_})})}),(l==null?void 0:l.id)&&e.jsx(Me,{children:e.jsx(ie,{px:3,py:3,lineHeight:1,children:e.jsx(Bb,{pemusnahanId:l==null?void 0:l.id,refresh:$})})}),s&&(l==null?void 0:l.id)&&A&&e.jsx(Me,{children:e.jsx(ie,{px:3,pt:3,lineHeight:1,children:e.jsx(Ib,{pemusnahanId:l.id,handleUploadAndSend:o,lampiranList:X,setLampiranList:O})})})]}),e.jsx(ua,{})]})]})},vn="https://api.arsip.go.id/arsip/api/";let Bd=class{constructor(){ae(this,"getPaging",async s=>{const n=Ce.serializeObjectToQueryString(s);return await se.get(`${vn}berkas-musnah/list?${n}`).then(l=>l)});ae(this,"getLaporan",async s=>{const n=Ce.serializeObjectToQueryString(s);return await se.get(`${vn}laporan/arsip-musnah?${n}`).then(l=>l)});ae(this,"downloadLaporanPdf",async s=>{const n=Ce.serializeObjectToQueryString(s);return await se.get(`${vn}laporan/arsip-musnah/pdf?${n}`,{responseType:"blob",headers:{"Content-Type":"application/pdf"}}).then(l=>l)});ae(this,"downloadLaporanExcel",async s=>{const n=Ce.serializeObjectToQueryString(s);return await se.get(`${vn}laporan/arsip-musnah/excel?${n}`,{responseType:"blob",headers:{"Content-Type":"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}}).then(l=>l)})}};const Lb=()=>{const r="Berkas Pemusnahan",[s,n]=a.useState(!1);a.useEffect(()=>{n(ge(r,"is_read",!0))},[]);const t=JSON.parse(Le.getItem("users")),i=new Bd,l=ga(),m=ha(),[p,B]=a.useState(!1),[K,W]=a.useState(null),[z,T]=a.useState({start_at:"",end_at:""}),[L,$]=a.useState(null),[M,H]=a.useState({total:0,from:1,to:1});let V=[];K==null?V=[]:V=K.map((y,o)=>{var F,x,S,f;return{no:o+M.from,id:y.id,klasifikasi_id:y.klasifikasi_id,nomor:y.nomor,klasifikasi_kode:y.klasifikasi_kode,nama:y.nama,tanggal_retensi_inaktif:y.tanggal_retensi_inaktif,tanggal_musnah:(x=(F=y.berkas_pemusnahan_musnah)==null?void 0:F.pemusnahan)==null?void 0:x.tanggal_musnah,kurun:y.kurun,jumlah:y.jumlah,created_at:y.created_at,berkas_pemusnahan:y==null?void 0:y.berkas_pemusnahan,unit_pengolah:(f=(S=y==null?void 0:y.berkas_pemusnahan_musnah)==null?void 0:S.pemusnahan)==null?void 0:f.organisasi_nama,action:e.jsx("div",{className:"flex gap-2 items-center justify-center w-full",children:e.jsx(Oa,{size:"1.5em",color:"#17c1e8",onClick:()=>b(y),className:"cursor-pointer",title:"Lihat"})})}});const[A,G]=a.useState({organisasi_id:t==null?void 0:t.organisasi_id,public_organisasi_id:t==null?void 0:t.public_organisasi_id,group_role_id:t==null?void 0:t.group_role,page:1,rows:10,sortField:"",sortOrder:null,search:"",filters:{kode:{value:""},nama:{value:""},tanggal_retensi_inaktif:{value:""},tanggal_musnah:{value:""}}});a.useEffect(()=>{X()},[A]);const X=async(y=!1)=>{y&&(A.page=1),B(!0),await i.getPaging(A).then(o=>{let F=o.data.result;F.data&&($(F.last_page),W(F.data),B(!1)),B(!1),H({...M,to:F.to,from:F.from,total:F.total})}).catch(o=>{console.log({error:o}),B(!1),H({...M,to:0,from:!1,total:0})})},O=Da((y,o,F=null)=>{if(F){let S=F.target;for(;S&&S.tagName!=="TD";)S=S.parentNode;if(S&&S.tagName==="TD"){const f=S.querySelector(".clear-input"),R=S.querySelector("input");o?f.classList.remove("hidden"):(f.classList.add("hidden"),R.value="")}}let x={...A};x.filters[y].value=o,x.page=1,G(x)},600),I=y=>{let o={...A};o.page=y,G(o),window.scrollTo({top:0,behavior:"smooth"})},_=y=>{let o={...A};o.rows=y,o.page=1,G(o)},C=y=>{let o={...A};o.sortField=y,A.sortField!=y?A.sortOrder==""&&(o.sortOrder=1):A.sortOrder==1?o.sortOrder=-1:(o.sortOrder="",o.sortField=""),o.page=1,G(o)},k=()=>{const o=`/berkas-musnah/laporan?${Ce.serializeObjectToQueryString({start_at:z==null?void 0:z.start_at,end_at:z==null?void 0:z.end_at})}`;window.open(o,"_blank","noopener,noreferrer")},b=y=>{var o;m("detail",{state:{formode:"Lihat",id:(o=y.berkas_pemusnahan_musnah)==null?void 0:o.pemusnahan_id,from:l.pathname}})};return e.jsxs(aa,{children:[e.jsx(la,{}),s&&e.jsxs(e.Fragment,{children:[" ",e.jsx(ie,{pt:6,pb:3,children:e.jsxs(Me,{children:[e.jsxs(ie,{px:3,pt:3,lineHeight:1,children:[e.jsx(w,{container:!0,direction:"row",justifyContent:"space-between",alignItems:"center",mb:4,children:e.jsx(w,{item:!0,children:e.jsx(le,{variant:"h5",fontWeight:"medium",children:"Daftar Arsip Musnah"})})}),(t==null?void 0:t.group_role)!==4&&e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4 md:gap-6 mb-4 mt-5 md:items-center md:justify-between",children:[e.jsx("div",{className:"w-60",children:e.jsx(le,{variant:"h6",fontWeight:"medium",children:e.jsx("p",{className:"whitespace-nowrap",children:"Laporan Daftar Arsip Musnah"})})}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-center ",children:[e.jsx("div",{className:"w-full ",children:e.jsx(Zs,{onDateSelected:(y,o)=>{T(F=>({...F,start_at:y==null?void 0:y.toISOString(),end_at:o==null?void 0:o.toISOString()}))}})}),ge(r,"is_create",!1,!0)&&e.jsx("div",{className:"w-full md:w-fit text-right",children:e.jsxs(_e,{variant:"gradient",color:"success",size:"small",onClick:k,disabled:!z.start_at||!z.end_at,children:[e.jsx(Bs,{size:"2em",className:"pe-2"}),"Tampilkan"]})})]})]})})]}),e.jsx("div",{className:"overflow-auto",children:e.jsxs("div",{className:"table p-10 min-w-full",children:[e.jsx("div",{className:"flex justify-end mb-1",children:e.jsx(pa,{config:A,handleClick:_})}),e.jsxs("table",{className:"w-full text-sm text-left !text-gray-700 dark:text-gray-400 table-bordered",children:[e.jsx("thead",{className:"text-xs text-gray-500 uppercase border-b-2 mb-1",children:e.jsxs("tr",{children:[e.jsx(q,{text:"No",className:"flex justify-center"}),e.jsx(q,{text:"Kode Klasifikasi / Nomor Berkas"}),e.jsx(q,{text:"Berkas",sortField:"nama",sortOrder:A.sortOrder,config:A,handleClick:()=>C("nama")}),e.jsx(q,{text:"Tanggal Buat Berkas",sortField:"created_at",sortOrder:A.sortOrder,config:A,handleClick:()=>C("created_at")}),e.jsx(q,{text:"Kurun Waktu",sortField:"kurun",sortOrder:A.sortOrder,config:A,handleClick:()=>C("kurun")}),e.jsx(q,{text:"Jumlah Item",sortField:"jumlah",sortOrder:A.sortOrder,config:A,handleClick:()=>C("jumlah")}),e.jsx(q,{text:"Akhir Retensi Inaktif",sortField:"tanggal_retensi_inaktif",sortOrder:A.sortOrder,config:A,handleClick:()=>C("tanggal_retensi_inaktif")}),e.jsx(q,{text:"Tanggal Musnah",sortField:"tanggal_musnah",sortOrder:A.sortOrder,config:A,handleClick:()=>C("tanggal_musnah")}),t.group_role==2&&e.jsx(q,{text:"Unit Pengolah"}),e.jsx(q,{text:"Aksi",className:"flex justify-center min-w-[2rem]"})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{className:"border-b border-slate-300",children:[e.jsx("td",{className:"max-w-[20rem] py-6"}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"kode",onSearch:O,placeholder:"Kode Klasifikasi / Nomor Berkas",type:"input"})}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"nama",onSearch:O,placeholder:"Berkas",type:"input"})}),e.jsx("td",{}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2"}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2"}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2"}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"tanggal_musnah",onSearch:O,placeholder:"Tanggal",type:"input",isDate:!0})}),e.jsx("td",{}),e.jsx("td",{})]}),p?e.jsx("tr",{children:e.jsx("td",{colSpan:11,children:e.jsx(ia,{})})}):e.jsx(e.Fragment,{}),V.length?V.map((y,o)=>e.jsxs("tr",{className:"border-b border-slate-300",children:[e.jsx("td",{className:"px-6 py-6",children:e.jsx("div",{className:"flex justify-center",children:y.no})}),e.jsxs("td",{className:" max-w-[20rem] px-6 py-6",children:[y.klasifikasi_kode," / ",y.nomor]}),e.jsx("td",{className:" max-w-[20rem] px-6 py-6",children:y.nama}),e.jsx("td",{className:" max-w-[20rem] px-6 py-6 ",children:y.created_at?na(y.created_at,2):"-"}),e.jsx("td",{className:" max-w-[20rem] px-6 py-6 ",children:y.jumlah>0?y.kurun:e.jsx(be,{badgeContent:"BELUM ADA NASKAH YANG DIBERKASKAN",color:"warning",container:!0})}),e.jsx("td",{className:" max-w-[20rem] px-6 py-6 text-center",children:y.jumlah}),e.jsx("td",{className:" max-w-[20rem] px-6 py-6",children:y.tanggal_retensi_inaktif?oa(y.tanggal_retensi_inaktif,"DD-MM-YYYY").format("DD MMMM YYYY"):"-"}),e.jsx("td",{className:" max-w-[20rem] px-6 py-6",children:y.tanggal_musnah?na(y.tanggal_musnah):"-"}),t.group_role==2&&e.jsx("td",{className:" max-w-[20rem] px-6 py-6",children:y.unit_pengolah}),e.jsxs("td",{className:"px-3 text-right w-[2rem]",children:[" ",y.action," "]})]},o)):e.jsx(e.Fragment,{})]})]}),e.jsxs("nav",{className:"flex items-center justify-between p-4","aria-label":"Table navigation",children:[e.jsx("span",{className:"text-sm text-gray-400",children:M.from&&`Menampilkan ${Se(M.from)} sampai ${Se(M.to)} dari ${Se(M.total)} entri`}),e.jsx(xa,{currentPage:A.page,lastPage:L,displayCount:5,handleClick:I})]})]})})]})}),e.jsx(ua,{})]})]})},$b=()=>{var y,o,F;const r="Berkas Pemusnahan",s=ga(),n=new URLSearchParams(s.search).get("start_at"),t=new URLSearchParams(s.search).get("end_at");new URLSearchParams(s.search).get("status");const i=new URLSearchParams(s.search).get("unit_kerja_id"),[l,m]=a.useState(!1),p=JSON.parse(Le.getItem("users"));a.useEffect(()=>{m(ge(r,"is_read",!0,!0)),C(i)},[]);const B=new Bd,K=new qa,[W,z]=a.useState(!1),[T,L]=a.useState(null),[$,M]=a.useState(null),[H,V]=a.useState(!1),[A,G]=a.useState(!1);let X=[];T==null?X=[]:X=T.map((x,S)=>{var f,R,u,D;return{no:S+1,klasifikasi_kode:x.klasifikasi_kode,nomor:x.nomor,nama:x.nama,created_at:x.created_at,kurun:x.kurun,jumlah:x.jumlah,retensi_aktif:x==null?void 0:x.retensi_aktif,retensi_inaktif:x==null?void 0:x.retensi_inaktif,tanggal_retensi_aktif:(x==null?void 0:x.tanggal_retensi_aktif)||"-",tanggal_retensi_inaktif:(x==null?void 0:x.tanggal_retensi_inaktif)||"-",tanggal_tutup:x==null?void 0:x.tanggal_tutup,tanggal_musnah:(R=(f=x==null?void 0:x.berkas_pemusnahan_musnah)==null?void 0:f.pemusnahan)==null?void 0:R.tanggal_musnah,status_akhir:x.penyusutan_akhir_nama,skkad:x.klasifikasi_keamanan_nama,unit_pengolah:(D=(u=x==null?void 0:x.berkas_pemusnahan_musnah)==null?void 0:u.pemusnahan)==null?void 0:D.organisasi_nama}});const[O,I]=a.useState({start_at:n,end_at:t});a.useEffect(()=>{_()},[O]);const _=async()=>{z(!0),await B.getLaporan(O).then(x=>{let S=x.data.result;S&&(L(S),z(!1)),z(!1)}).catch(x=>{z(!1)})},C=async x=>{x&&await K.detail("organisasi/instansi",x,"").then(S=>{M(S)})},k=async()=>{V(!0),await B.downloadLaporanPdf(O).then(x=>{const S=`Laporan Daftar Berkas Arsip Musnah_${oa(O==null?void 0:O.start_at).format("YYYY-MM-DD")}_${oa(O==null?void 0:O.end_at).format("YYYY-MM-DD")}.pdf`;es(x.data,S)}).catch(x=>{console.log({error:x})}).finally(()=>V(!1))},b=async()=>{G(!0),await B.downloadLaporanExcel(O).then(x=>{const S=`Laporan Daftar Berkas Arsip Musnah_${oa(O==null?void 0:O.start_at).format("YYYY-MM-DD")}_${oa(O==null?void 0:O.end_at).format("YYYY-MM-DD")}.xls`;es(x.data,S)}).catch(x=>{console.log({error:x})}).finally(()=>G(!1))};return e.jsx(e.Fragment,{children:e.jsxs(aa,{children:[l&&e.jsx(ie,{pt:6,pb:3,children:e.jsxs(Me,{children:[e.jsxs("div",{className:"flex gap-2 m-4",children:[e.jsx(Je,{color:"error",text:e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx(ts,{size:"2em",className:"pe-2"}),"PDF"]}),submit:!H,onClick:k,size:"small",className:"text-sm whitespace-nowrap"}),e.jsx(Je,{color:"success",text:e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx($s,{size:"2em",className:"pe-2"}),"Excel"]}),submit:!A,onClick:b,size:"small",className:"text-sm whitespace-nowrap"})]}),e.jsxs(ie,{px:3,pt:3,lineHeight:1,className:"flex flex-col items-center justify-center",children:[e.jsxs("div",{className:"mb-3 text-center",children:[e.jsx(le,{variant:"h3",fontWeight:"medium",children:"LAPORAN DAFTAR BERKAS ARSIP MUSNAH"}),e.jsxs(le,{variant:"h4",fontWeight:"medium",children:["PENCIPTA ARSIP: ",(y=p==null?void 0:p.desc_instansi)==null?void 0:y.toUpperCase()]})]}),e.jsxs(le,{variant:"h5",fontWeight:"medium",children:["PERIODE PEMUSNAHAN: ",(o=na(n,2))==null?void 0:o.toUpperCase()," -"," ",(F=na(t,2))==null?void 0:F.toUpperCase()]})]}),e.jsx("div",{className:"overflow-auto",children:e.jsxs("div",{className:"table p-10 min-w-full",children:[e.jsxs("table",{className:"w-full text-sm text-left !text-gray-700 dark:text-gray-400 table-bordered",children:[e.jsx("thead",{className:"text-xs text-gray-500 uppercase border-b-2 mb-1",children:e.jsxs("tr",{children:[e.jsx(q,{text:"No",className:"flex justify-center"}),e.jsx(q,{text:"Kode Klasifikasi / Nomor Berkas"}),e.jsx(q,{text:"Nama Berkas"}),e.jsx(q,{text:"Tanggal Buat Berkas"}),e.jsx(q,{text:"Kurun Waktu"}),e.jsx(q,{text:"Jumlah Item"}),e.jsx(q,{text:"Akhir Retensi Inaktif"}),e.jsx(q,{text:"Tanggal Musnah"}),p.group_role==2&&e.jsx(q,{text:"Unit Pengolah"}),e.jsx(q,{text:"Keterangan"})]})}),e.jsxs("tbody",{children:[W?e.jsx("tr",{children:e.jsx("td",{colSpan:9,children:e.jsx(ia,{})})}):e.jsx(e.Fragment,{}),X.length?X.map((x,S)=>{var f;return e.jsxs("tr",{className:"border-b border-slate-300",children:[e.jsx("td",{className:" px-6 py-6 text-center",children:x.no}),e.jsx("td",{className:" max-w-[9rem] px-6 py-6",children:e.jsxs("div",{className:"flex-wrap",children:[x.klasifikasi_kode," / ",x.nomor]})}),e.jsx("td",{className:" max-w-[9rem] px-6 py-6",children:e.jsxs("div",{className:"flex-wrap",children:[x.nama," "]})}),e.jsx("td",{className:" max-w-[9rem] px-6 py-6",children:e.jsx("div",{className:"flex-wrap",children:x!=null&&x.created_at?oa(x.created_at).format("DD-MM-YYYY"):"-"})}),e.jsx("td",{className:" max-w-[9rem] px-6 py-6",children:e.jsx("div",{className:"flex-wrap",children:x.jumlah>0?x.kurun:"-"})}),e.jsx("td",{className:" max-w-[9rem] px-6 py-6",children:e.jsx("div",{className:"flex-wrap",children:x.jumlah})}),e.jsx("td",{className:" max-w-[9rem] px-6 py-6",children:e.jsx("div",{className:"flex-wrap",children:x.tanggal_retensi_inaktif})}),e.jsx("td",{className:" max-w-[9rem] px-6 py-6",children:e.jsx("div",{className:"flex-wrap",children:(f=oa(x.tanggal_musnah,"yyyy-mm-DD HH:ss"))==null?void 0:f.format("DD-mm-yyyy HH.ss")})}),p.group_role==2&&e.jsx("td",{className:" max-w-[9rem] px-6 py-6",children:e.jsx("div",{className:"flex-wrap",children:x.unit_pengolah})}),e.jsx("td",{})]},S)}):e.jsx(e.Fragment,{})]})]}),e.jsx("nav",{className:"flex items-center justify-between p-4","aria-label":"Table navigation",children:e.jsxs("span",{className:"text-sm text-gray-400",children:["Menampilkan ",T==null?void 0:T.length," entri"]})})]})})]})}),e.jsx(ua,{})]})})},Rb=()=>{var o,F,x,S;const r="Berkas Aktif",s=ga(),n=new URLSearchParams(s.search).get("start_at"),t=new URLSearchParams(s.search).get("end_at"),i=new URLSearchParams(s.search).get("status"),l=new URLSearchParams(s.search).get("unit_kerja_id"),[m,p]=a.useState(!1),B=JSON.parse(Le.getItem("users"));a.useEffect(()=>{p(ge(r,"is_read",!0,!0)),k(l)},[]);const K=new ot,W=new qa,[z,T]=a.useState(!1),[L,$]=a.useState(null),[M,H]=a.useState(null),[V,A]=a.useState(!1),[G,X]=a.useState(!1);let O=[];L==null?O=[]:O=L.map((f,R)=>({no:R+1,klasifikasi_kode:f.klasifikasi_kode,nomor:f.nomor,nama:f.nama,created_at:f.created_at,kurun:f.kurun,jumlah:f.jumlah,retensi_aktif:f==null?void 0:f.retensi_aktif,retensi_inaktif:f==null?void 0:f.retensi_inaktif,tanggal_retensi_aktif:(f==null?void 0:f.tanggal_retensi_aktif)||"-",tanggal_retensi_inaktif:(f==null?void 0:f.tanggal_retensi_inaktif)||"-",tanggal_tutup:f==null?void 0:f.tanggal_tutup,status_akhir:f.penyusutan_akhir_nama,skkad:f.klasifikasi_keamanan_nama,type:f==null?void 0:f.type}));const[I,_]=a.useState({start_at:n,end_at:t,status:i,organisasi_id:l});a.useEffect(()=>{C()},[I]);const C=async()=>{T(!0),await K.getLaporanGabungan(I).then(f=>{let R=f.data.result;R&&($(R),T(!1)),T(!1)}).catch(f=>{T(!1)})},k=async f=>{f&&await W.detail("organisasi/instansi",f,"").then(R=>{H(R)})},b=async()=>{A(!0),await K.downloadLaporanGabunganPdf(I).then(f=>{const R=`Laporan Daftar Berkas Arsip Aktif dan Mandiri_${oa(I==null?void 0:I.start_at).format("YYYY-MM-DD")}_${oa(I==null?void 0:I.end_at).format("YYYY-MM-DD")}.pdf`;es(f.data,R)}).catch(f=>{console.log({error:f})}).finally(()=>A(!1))},y=async()=>{X(!0),await K.downloadLaporanGabunganExcel(I).then(f=>{const R=`Laporan Daftar Berkas Arsip Aktif dan Mandiri_${oa(I==null?void 0:I.start_at).format("YYYY-MM-DD")}_${oa(I==null?void 0:I.end_at).format("YYYY-MM-DD")}.xls`;es(f.data,R)}).catch(f=>{console.log({error:f})}).finally(()=>X(!1))};return e.jsx(e.Fragment,{children:e.jsxs(aa,{children:[m&&e.jsx(ie,{pt:6,pb:3,children:e.jsxs(Me,{children:[e.jsxs("div",{className:"flex gap-2 m-4",children:[e.jsx(Je,{color:"error",text:e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx(ts,{size:"2em",className:"pe-2"}),"PDF"]}),submit:!V,onClick:b,size:"small",className:"text-sm whitespace-nowrap"}),e.jsx(Je,{color:"success",text:e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx($s,{size:"2em",className:"pe-2"}),"Excel"]}),submit:!G,onClick:y,size:"small",className:"text-sm whitespace-nowrap"})]}),e.jsxs(ie,{px:3,pt:3,lineHeight:1,className:"flex flex-col items-center justify-center",children:[e.jsxs("div",{className:"mb-3 text-center",children:[e.jsx(le,{variant:"h3",fontWeight:"medium",children:"LAPORAN DAFTAR BERKAS ARSIP AKTIF"}),e.jsxs(le,{variant:"h4",fontWeight:"medium",children:["UNIT PENGOLAH:"," ",((o=M==null?void 0:M.nama)==null?void 0:o.toUpperCase())||((F=B==null?void 0:B.desc_unit_kerja)==null?void 0:F.toUpperCase())]})]}),e.jsxs(le,{variant:"h5",fontWeight:"medium",children:["PERIODE: ",(x=na(n,2))==null?void 0:x.toUpperCase()," -"," ",(S=na(t,2))==null?void 0:S.toUpperCase()]})]}),e.jsx("div",{className:"overflow-auto",children:e.jsxs("div",{className:"table p-10 min-w-full",children:[e.jsxs("table",{className:"w-full text-sm text-left !text-gray-700 dark:text-gray-400 table-bordered",children:[e.jsx("thead",{className:"text-xs text-gray-500 uppercase border-b-2 mb-1",children:e.jsxs("tr",{children:[e.jsx(q,{text:"No",className:"flex justify-center"}),e.jsx(q,{text:"Kode Klasifikasi / Nomor Berkas"}),e.jsx(q,{text:"Uraian Informasi Berkas"}),e.jsx(q,{text:"Tanggal Buat Berkas"}),e.jsx(q,{text:"Kurun Waktu"}),e.jsx(q,{text:"Jumlah Item"}),e.jsx(q,{text:"Retensi Aktif"}),e.jsx(q,{text:"Retensi Inaktif"}),e.jsx(q,{text:"Status Akhir"}),e.jsx(q,{text:"Jenis Berkas"}),e.jsx(q,{text:"Keterangan"})]})}),e.jsxs("tbody",{children:[z?e.jsx("tr",{children:e.jsx("td",{colSpan:9,children:e.jsx(ia,{})})}):e.jsx(e.Fragment,{}),O.length?O.map((f,R)=>e.jsxs("tr",{className:"border-b border-slate-300",children:[e.jsx("td",{className:" px-6 py-6 text-center",children:f.no}),e.jsx("td",{className:" max-w-[9rem] px-6 py-6",children:e.jsxs("div",{className:"flex-wrap",children:[f.klasifikasi_kode," / ",f.nomor]})}),e.jsx("td",{className:" max-w-[9rem] px-6 py-6",children:e.jsxs("div",{className:"flex-wrap",children:[f.nama," "]})}),e.jsx("td",{className:" max-w-[9rem] px-6 py-6",children:e.jsx("div",{className:"flex-wrap",children:f!=null&&f.created_at?oa(f.created_at).format("DD-MM-YYYY"):"-"})}),e.jsx("td",{className:" max-w-[9rem] px-6 py-6",children:e.jsx("div",{className:"flex-wrap",children:f.jumlah>0?f.kurun:"-"})}),e.jsx("td",{className:" max-w-[9rem] px-6 py-6",children:e.jsx("div",{className:"flex-wrap",children:f.jumlah})}),e.jsx("td",{className:" max-w-[9rem] px-6 py-6",children:e.jsx("div",{className:"flex-wrap",children:f.retensi_aktif})}),e.jsx("td",{className:" max-w-[9rem] px-6 py-6",children:e.jsx("div",{className:"flex-wrap",children:f.retensi_inaktif})}),e.jsx("td",{className:" max-w-[9rem] px-6 py-6",children:e.jsx("div",{className:"flex-wrap",children:f.status_akhir})}),e.jsx("td",{className:" max-w-[9rem] px-6 py-6",children:e.jsx("div",{className:"flex-wrap",children:f.type==="berkas_aktif"?"Srikandi":(f==null?void 0:f.type)==="berkas_mandiri"?"Mandiri":"-"})}),e.jsx("td",{})]},R)):e.jsx(e.Fragment,{})]})]}),e.jsx("nav",{className:"flex items-center justify-between p-4","aria-label":"Table navigation",children:e.jsxs("span",{className:"text-sm text-gray-400",children:["Menampilkan ",L==null?void 0:L.length," entri"]})})]})})]})}),e.jsx(ua,{})]})})},Eb=()=>{var o,F,x,S;const r="Berkas Aktif",s=ga(),n=new URLSearchParams(s.search).get("start_at"),t=new URLSearchParams(s.search).get("end_at"),i=new URLSearchParams(s.search).get("status"),l=new URLSearchParams(s.search).get("unit_kerja_id"),m=JSON.parse(Le.getItem("users")),[p,B]=a.useState(!1);a.useEffect(()=>{B(ge(r,"is_read",!0,!0)),k(l)},[]);const K=new ot,W=new qa,[z,T]=a.useState(!1),[L,$]=a.useState(null),[M,H]=a.useState(null),[V,A]=a.useState(!1),[G,X]=a.useState(!1);let O=[];L==null?O=[]:O=L.map((f,R)=>({no:R+1,nomor_berkas:f==null?void 0:f.nomor,klasifikasi_kode:f.klasifikasi_kode,item_berkas:f.item_berkas,nama:f.nama,uraian:f.uraian,tanggal:f.created_at,jumlah:f.jumlah,retensi_aktif:f==null?void 0:f.retensi_aktif,retensi_inaktif:f==null?void 0:f.retensi_inaktif,tanggal_retensi_aktif:(f==null?void 0:f.tanggal_retensi_aktif)||"-",tanggal_retensi_inaktif:(f==null?void 0:f.tanggal_retensi_inaktif)||"-",tanggal_tutup:f==null?void 0:f.tanggal_tutup,status_akhir:f.penyusutan_akhir_nama,skkad:f.klasifikasi_keamanan_nama,type:f==null?void 0:f.type}));const[I,_]=a.useState({start_at:n,end_at:t,status:i,organisasi_id:l});a.useEffect(()=>{C()},[I]);const C=async()=>{T(!0),await K.getLaporanGabunganIsi(I).then(f=>{let R=f.data.result;R&&($(R),T(!1)),T(!1)}).catch(f=>{T(!1)})},k=async f=>{f&&await W.detail("organisasi/instansi",f,"").then(R=>{H(R)})},b=async()=>{A(!0),await K.downloadLaporanGabunganIsiPdf(I).then(f=>{const R=`Laporan Daftar Isi Berkas Arsip Aktif dan Mandiri_${oa(I==null?void 0:I.start_at).format("YYYY-MM-DD")}_${oa(I==null?void 0:I.end_at).format("YYYY-MM-DD")}.pdf`;es(f.data,R)}).catch(f=>{console.log({error:f})}).finally(()=>A(!1))},y=async()=>{X(!0),await K.downloadLaporanGabunganIsiExcel(I).then(f=>{const R=`Laporan Daftar Isi Berkas Arsip Aktif dan Mandiri_${oa(I==null?void 0:I.start_at).format("YYYY-MM-DD")}_${oa(I==null?void 0:I.end_at).format("YYYY-MM-DD")}.xls`;es(f.data,R)}).catch(f=>{console.log({error:f})}).finally(()=>X(!1))};return e.jsx(e.Fragment,{children:e.jsxs(aa,{children:[p&&e.jsx(ie,{pt:6,pb:3,children:e.jsxs(Me,{children:[e.jsxs("div",{className:"flex gap-2 m-4",children:[e.jsx(Je,{color:"error",text:e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx(ts,{size:"2em",className:"pe-2"}),"PDF"]}),submit:!V,onClick:b,size:"small",className:"text-sm whitespace-nowrap"}),e.jsx(Je,{color:"success",text:e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx($s,{size:"2em",className:"pe-2"}),"Excel"]}),submit:!G,onClick:y,size:"small",className:"text-sm whitespace-nowrap"})]}),e.jsxs(ie,{px:3,pt:3,lineHeight:1,className:"flex flex-col items-center justify-center",children:[e.jsxs("div",{className:"mb-3 text-center",children:[e.jsx(le,{variant:"h3",fontWeight:"medium",children:"LAPORAN DAFTAR ISI BERKAS ARSIP AKTIF"}),e.jsxs(le,{variant:"h4",fontWeight:"medium",children:["UNIT PENGOLAH:"," ",((o=M==null?void 0:M.nama)==null?void 0:o.toUpperCase())||((F=m==null?void 0:m.desc_unit_kerja)==null?void 0:F.toUpperCase())]})]}),e.jsxs(le,{variant:"h5",fontWeight:"medium",children:["PERIODE: ",(x=na(n,2))==null?void 0:x.toUpperCase()," -"," ",(S=na(t,2))==null?void 0:S.toUpperCase()]})]}),e.jsx("div",{className:"overflow-auto",children:e.jsxs("div",{className:"table p-10 min-w-full",children:[e.jsxs("table",{className:"w-full text-sm text-left !text-gray-700 dark:text-gray-400 table-bordered",children:[e.jsx("thead",{className:"text-xs text-gray-500 uppercase border-b-2 mb-1",children:e.jsxs("tr",{children:[e.jsx(q,{text:"No"}),e.jsx(q,{text:"Kode Klasifikasi / Nomor Berkas"}),e.jsx(q,{text:"URAIAN INFORMASI Berkas"}),e.jsx(q,{text:"Tanggal Buat Berkas"}),e.jsx(q,{text:"No Item Arsip"}),e.jsx(q,{text:"Uraian Informasi Arsip"}),e.jsx(q,{text:"Tanggal Item"}),e.jsx(q,{text:"Jumlah Item"}),e.jsx(q,{text:"Jenis Berkas"}),e.jsx(q,{text:"Keterangan"})]})}),e.jsxs("tbody",{children:[z?e.jsx("tr",{children:e.jsx("td",{colSpan:9,children:e.jsx(ia,{})})}):e.jsx(e.Fragment,{}),!!(O!=null&&O.length)&&O.map((f,R)=>{var u;return e.jsxs(Ga.Fragment,{children:[e.jsxs("tr",{className:"border-b border-slate-300",children:[e.jsx("td",{className:" max-w-[9rem] px-6 py-6",children:e.jsx("div",{className:"flex-wrap text-center",children:f.no})}),e.jsx("td",{className:"px-6 py-6",children:e.jsxs("div",{className:"flex-wrap",children:[f.klasifikasi_kode," / ",f==null?void 0:f.nomor_berkas]})}),e.jsx("td",{className:" max-w-[9rem] px-6 py-6",children:e.jsx("div",{className:"flex-wrap text-center",children:f.nama})}),e.jsx("td",{className:" max-w-[9rem] px-6 py-6",children:f!=null&&f.tanggal?oa(f.tanggal).format("DD-MM-YYYY"):"-"}),e.jsx("td",{className:"max-w-[9rem] px-6 py-6"}),e.jsx("td",{className:"max-w-[9rem] px-6 py-6"}),e.jsx("td",{className:"max-w-[9rem] px-6 py-6"}),e.jsx("td",{className:" max-w-[9rem] px-6 py-6",children:e.jsx("div",{className:"flex-wrap text-center",children:f.jumlah})}),e.jsx("td",{className:" max-w-[9rem] px-6 py-6",children:e.jsx("div",{className:"flex-wrap",children:f.type==="berkas_aktif"?"Srikandi":(f==null?void 0:f.type)==="berkas_mandiri"?"Mandiri":"-"})}),e.jsx("td",{})]},f==null?void 0:f.id),(u=f.item_berkas)==null?void 0:u.map((D,E)=>e.jsxs("tr",{className:"border-b border-slate-300",children:[e.jsx("td",{className:" max-w-[2rem] px-6 py-6"}),e.jsx("td",{className:" max-w-[9rem] px-6 py-6"}),e.jsx("td",{className:" max-w-[9rem] px-6 py-6"}),e.jsx("td",{className:" max-w-[9rem] px-6 py-6"}),e.jsx("td",{className:" max-w-[9rem] px-6 py-6"}),e.jsx("td",{className:" max-w-[9rem] px-6 py-6 align-top",children:e.jsxs("div",{className:"flex-wrap text-center",children:[E+1," "]})}),e.jsx("td",{className:" max-w-[9rem] px-6 py-6 align-top",children:e.jsx("div",{className:"flex-wrap",children:Qn.includes(D==null?void 0:D.jenis_naskah)?(D==null?void 0:D.hal)&&D.hal.split("||").map(J=>e.jsxs("div",{className:"mb-1",children:[J.includes("Catatan:")?"":"- ",J]})):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mb-2",children:D==null?void 0:D.nomor}),e.jsx("div",{children:D==null?void 0:D.ringkasan})]})})}),e.jsx("td",{className:" max-w-[9rem] px-6 py-6 align-top",children:e.jsx("div",{className:"flex-wrap",children:D!=null&&D.tanggal?oa(D.tanggal).format("DD-MM-YYYY"):"-"})}),e.jsx("td",{className:" max-w-[2rem] px-6 py-6"}),e.jsx("td",{className:" max-w-[9rem] px-6 py-6 align-top",children:e.jsx("div",{className:"flex-wrap",children:D.jenis_naskah})})]},`isi-${E}`))]},R)})]})]}),e.jsx("nav",{className:"flex items-center justify-between p-4","aria-label":"Table navigation",children:e.jsxs("span",{className:"text-sm text-gray-400",children:["Menampilkan ",(L==null?void 0:L.length)??0," entri"]})})]})})]})}),e.jsx(ua,{})]})})},Mb=()=>{var _;const r="Usul Pemusnahan";JSON.parse(Le.getItem("users"));const s=ga(),n=new Cr,t=new ha,[i,l]=a.useState(!1),[m,p]=a.useState(!0),[B,K]=a.useState(1),[W,z]=a.useState(1),[T,L]=a.useState([]),$=100,[M,H]=a.useState(((_=s.state)==null?void 0:_.berkas_selected)||[]),V={berkas_selected:M,description:"",lampiran_wajib:"",desc_lampiran_wajib:"Surat Pengajuan Usul Musnah Arsip"},[A,G]=a.useState([{id:1,file:V.lampiran_wajib,desc:V.desc_lampiran_wajib}]);a.useEffect(()=>{l(ge(r,"is_create"))},[]),a.useEffect(()=>{const C=(B-1)*$,k=C+$,b=M==null?void 0:M.slice(C,k);L(b)},[B,M]),a.useEffect(()=>{const C=Math.ceil((M==null?void 0:M.length)/$);z(C)},[M]);const X=C=>{K(C)},O=C=>{(M==null?void 0:M.length)>0&&A.length>0?U.fire({title:"Usul Musnah Berkas",text:"Apakah Anda yakin ingin mengusulkan pemusnahan berkas yang dipilih?",icon:"question",showCancelButton:!0,confirmButtonText:"Ya, Usulkan",cancelButtonText:"Batal",customClass:{confirmButton:"button button-success",cancelButton:"button button-info"}}).then(async k=>{if(k.isConfirmed){const b={...C,berkas_selected:M,lampirans:A.slice(1)};p(!1),await n.request(b).then(y=>{const o=y.data;o.success&&(setTimeout(()=>{var F;t("/proses-penyusutan/pemusnahan/detail",{state:{id:(F=o==null?void 0:o.result)==null?void 0:F.id}})},500),H([]),U.fire("Berhasil","Pemusnahan Berkas Berhasil Diusulkan","success"))}).catch(y=>{var F,x,S,f;const o=Oe((x=(F=y.response)==null?void 0:F.data)==null?void 0:x.result);U.fire("Gagal",o??((f=(S=y.response)==null?void 0:S.data)==null?void 0:f.message),"error")}).finally(()=>{p(!0)})}}):U.fire({title:"Oops!",text:"Anda belum memilih berkas untuk usul pemusnahan",icon:"warning",showCancelButton:!1})},I=()=>{t("/pemeliharaan--arsip/pemberkasan-arsip-inaktif",{state:{berkas_selected:M}})};return e.jsxs(aa,{children:[e.jsx(la,{}),i&&e.jsx(e.Fragment,{children:e.jsx(ie,{pt:6,pb:3,className:"flex flex-col gap-10",children:e.jsx(Me,{children:e.jsxs(ie,{px:3,pt:3,lineHeight:1,children:[e.jsxs("div",{className:"flex justify-between  items-center mb-6",children:[e.jsx(le,{variant:"h5",fontWeight:"medium",children:"Form Pengajuan Pemusnahan Arsip"}),e.jsx("div",{className:"flex justify-end",children:e.jsxs(_e,{variant:"gradient",color:"secondary",onClick:I,children:[e.jsx(za,{size:"1.5em",className:"me-2"}),"Kembali"]})})]}),e.jsx(ca,{initialValues:V,onSubmit:O,validateOnChange:!0,validationSchema:jb,children:e.jsxs(da,{id:"formMusnah",className:"text-sm",children:[e.jsxs(w,{children:[e.jsx(de,{text:"Berkas yang dipilih",required:!0}),e.jsxs("div",{className:"table min-w-full",children:[e.jsxs("table",{className:"w-full text-sm text-left !text-gray-700 dark:text-gray-400 table-bordered",children:[e.jsx("thead",{className:"text-xs text-gray-500 uppercase border-b-2 mb-1",children:e.jsxs("tr",{children:[e.jsx(q,{text:"No",className:"flex justify-center"}),e.jsx(q,{text:"Kode Klasifikasi / Nomor Berkas",className:"flex justify-center"}),e.jsx(q,{text:"Nama Berkas",className:"flex justify-center"}),e.jsx(q,{text:"Akhir Retensi Inaktif",className:"flex justify-center"})]})}),e.jsx("tbody",{children:(T==null?void 0:T.length)>0&&T.map((C,k)=>e.jsxs("tr",{className:"border-b border-slate-300 ",children:[e.jsx("td",{className:"px-6 py-2 text-center w-4",children:$*(B-1)+(k+1)}),e.jsxs("td",{className:"w-1/4 px-6 py-2 ",children:[C.klasifikasi_kode," / ",C.nomor]}),e.jsx("td",{className:"1-1/2 px-6 py-2",children:C.nama}),e.jsx("td",{className:"w-1/4 px-6 py-2",children:C.tanggal_retensi_inaktif?oa(C.tanggal_retensi_inaktif,"DD-MM-YYYY").format("DD MMMM YYYY"):"-"})]},C==null?void 0:C.id))})]}),e.jsx("nav",{className:"flex items-center justify-end pt-4 px-4","aria-label":"Table navigation",children:e.jsx(xa,{currentPage:B,lastPage:W,displayCount:$,handleClick:X})})]})]}),e.jsx(w,{mt:3,children:e.jsx(ce,{name:"description",children:({field:C,form:k,meta:b})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Deskripsi",required:!1,error:b.error&&b.touched}),e.jsx("div",{className:"space-x-4 flex flex-row items-center",children:e.jsx(Ye,{...C,type:"text",placeholder:"Masukkan Deskripsi Pemusnahan...",error:b.error&&b.touched})}),e.jsx(ue,{text:b.error,error:b.error&&b.touched})]})})}),e.jsx(w,{mb:2,mt:5,children:e.jsx(ln,{lampiranList:A,setLampiranList:G,isRequiredFirst:!0,requiredFileTitle:"Surat Pengajuan Usul Musnah Arsip",isRequiredFileDescEditable:!1})}),e.jsx("div",{className:"flex justify-end items-center w-full gap-5 my-10",children:e.jsx(Je,{submit:m,color:"success",formId:"formMusnah",text:"Ajukan Pemusnahan"})})]})})]})})})})]})},Kb=()=>{var _;const r="Usul Pemindahan";JSON.parse(Le.getItem("users"));const s=ga(),n=new Jt,t=new ha,[i,l]=a.useState(!1),[m,p]=a.useState(!0),[B,K]=a.useState(1),[W,z]=a.useState(1),[T,L]=a.useState([]),$=100,[M,H]=a.useState(((_=s.state)==null?void 0:_.berkas_selected)||[]),V={berkas_selected:M,description:"",lampiran_wajib:"",desc_lampiran_wajib:"",to_group_role_id:0},[A,G]=a.useState([{id:1,file:"",desc:""}]);a.useEffect(()=>{l(ge(r,"is_create"))},[]),a.useEffect(()=>{const C=(B-1)*$,k=C+$,b=M==null?void 0:M.slice(C,k);L(b)},[B,M]),a.useEffect(()=>{const C=Math.ceil((M==null?void 0:M.length)/$);z(C)},[M]);const X=C=>{K(C)},O=C=>{(M==null?void 0:M.length)>0&&A.length>0?U.fire({title:"Usul Pemindahan Berkas",text:"Apakah Anda yakin ingin mengusulkan pemusnahan berkas yang dipilih?",icon:"question",showCancelButton:!0,confirmButtonText:"Ya, Usulkan",cancelButtonText:"Batal",customClass:{confirmButton:"button button-success",cancelButton:"button button-info"}}).then(async k=>{if(k.isConfirmed){const b={...C,berkas_selected:M,lampirans:A.slice(1)};p(!1),await n.requestMove(b).then(y=>{const o=y.data;o.success&&(setTimeout(()=>{var F;t("/proses-penyusutan/pemindahan/detail",{state:{id:(F=o==null?void 0:o.result)==null?void 0:F.id}})},500),H([]),U.fire("Berhasil","Pemindahan Berkas Berhasil Diusulkan","success"))}).catch(y=>{var F,x,S,f;const o=Oe((x=(F=y.response)==null?void 0:F.data)==null?void 0:x.result);U.fire("Gagal",o??((f=(S=y.response)==null?void 0:S.data)==null?void 0:f.message),"error")}).finally(()=>{p(!0)})}}):U.fire({title:"Oops!",text:"Anda belum memilih berkas untuk usul pemusnahan",icon:"warning",showCancelButton:!1})},I=()=>{t("/pemeliharaan-arsip/pemberkasan-arsip-aktif",{state:{berkas_selected:M}})};return e.jsxs(aa,{children:[e.jsx(la,{}),i&&e.jsx(e.Fragment,{children:e.jsx(ie,{pt:6,pb:3,className:"flex flex-col gap-10",children:e.jsx(Me,{children:e.jsxs(ie,{px:3,pt:3,lineHeight:1,children:[e.jsxs("div",{className:"flex justify-between  items-center mb-6",children:[e.jsx(le,{variant:"h5",fontWeight:"medium",children:"Form Pengajuan Pemindahan Arsip"}),e.jsx("div",{className:"flex justify-end",children:e.jsxs(_e,{variant:"gradient",color:"secondary",onClick:I,children:[e.jsx(za,{size:"1.5em",className:"me-2"}),"Kembali"]})})]}),e.jsx(ca,{initialValues:V,onSubmit:O,validateOnChange:!0,validationSchema:Ad,enableReinitialize:!1,children:e.jsxs(da,{id:"formPemindahan",className:"text-sm",children:[e.jsxs(w,{children:[e.jsx(de,{text:"Berkas yang dipilih",required:!0}),e.jsxs("div",{className:"table min-w-full",children:[e.jsxs("table",{className:"w-full text-sm text-left !text-gray-700 dark:text-gray-400 table-bordered",children:[e.jsx("thead",{className:"text-xs text-gray-500 uppercase border-b-2 mb-1",children:e.jsxs("tr",{children:[e.jsx(q,{text:"No",className:"flex justify-center"}),e.jsx(q,{text:"Kode Klasifikasi / Nomor Berkas",className:"flex justify-center"}),e.jsx(q,{text:"Nama Berkas",className:"flex justify-center"}),e.jsx(q,{text:"Total Retensi",className:"flex justify-center"})]})}),e.jsx("tbody",{children:(T==null?void 0:T.length)>0&&T.map((C,k)=>e.jsxs("tr",{className:"border-b border-slate-300 ",children:[e.jsx("td",{className:"px-6 py-2 text-center w-4",children:$*(B-1)+(k+1)}),e.jsxs("td",{className:"w-1/4 px-6 py-2 ",children:[C.klasifikasi_kode," / ",C.nomor]}),e.jsx("td",{className:"1-1/2 px-6 py-2",children:C.nama}),e.jsx("td",{className:"text-center max-w-[20rem] px-6 py-2",children:C.retensi_aktif+C.retensi_inaktif})]},C==null?void 0:C.id))})]}),e.jsx("nav",{className:"flex items-center justify-end pt-4 px-4","aria-label":"Table navigation",children:e.jsx(xa,{currentPage:B,lastPage:W,displayCount:$,handleClick:X})})]})]}),e.jsx(w,{mt:5,children:e.jsx(ce,{name:"to_group_role_id",children:({field:C,form:k,meta:b})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Pilih Tipe Unit Kearsipan",required:!0,error:b.error&&b.touched}),e.jsxs("div",{className:"space-x-4 flex flex-row items-center",children:[e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{...C,type:"radio",className:"form-radio  w-4 h-4 text-blue-500 focus:ring-2 focus:ring-blue-500",checked:C.value==2,onChange:y=>{k.setFieldValue("to_group_role_id",2),y.target.checked=!0}}),e.jsx("span",{className:"text-gray-700",children:"UTAMA / UK 1"})]}),e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{...C,type:"radio",className:"form-radio  w-4 h-4 text-blue-500 focus:ring-2 focus:ring-blue-500",checked:C.value==3,onChange:y=>{k.setFieldValue("to_group_role_id",3),y.target.checked=!0}}),e.jsx("span",{className:"text-gray-700",children:"SATKER / UK 2, 3, 4"})]})]}),e.jsx(ue,{text:b.error,error:b.error&&b.touched})]})})}),e.jsx(w,{mt:3,children:e.jsx(ce,{name:"description",children:({field:C,form:k,meta:b})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Deskripsi",required:!1,error:b.error&&b.touched}),e.jsx("div",{className:"space-x-4 flex flex-row items-center",children:e.jsx(Ye,{...C,type:"text",placeholder:"Masukkan Deskripsi Pemindahan...",error:b.error&&b.touched})}),e.jsx(ue,{text:b.error,error:b.error&&b.touched})]})})}),e.jsx(w,{mb:2,mt:5,children:e.jsx(ln,{lampiranList:A,setLampiranList:G,isRequiredFirst:!0})}),e.jsx("div",{className:"flex justify-end items-center w-full gap-5 my-10",children:e.jsx(Je,{submit:m,color:"success",formId:"formPemindahan",text:"Ajukan Pemindahan"})})]})})]})})})})]})},wt="https://api.arsip.go.id/arsip/api/";class Tr{constructor(){ae(this,"request",async s=>await se.post(`${wt}penyerahan/usul`,s,{headers:{"Content-Type":"multipart/form-data"}}).then(i=>i));ae(this,"uploadFiles",async s=>await se.post(`${wt}penyerahan/upload-files`,s,{headers:{"Content-Type":"multipart/form-data"}}).then(i=>i));ae(this,"getPaging",async s=>{const n=Ce.serializeObjectToQueryString(s);return await se.get(`${wt}penyerahan?${n}`).then(l=>l)});ae(this,"getPagingItems",async s=>{const n=Ce.serializeObjectToQueryString(s);return await se.get(`${wt}penyerahan/list-document?${n}`).then(l=>l)});ae(this,"getDetail",async(s,n)=>{const t=Ce.serializeObjectToQueryString(n);return await se.get(`${wt}penyerahan/show/${s}?${t}`).then(m=>m)});ae(this,"getPagingListBerkas",async s=>{const n=Ce.serializeObjectToQueryString(s);return await se.get(`${wt}penyerahan/list-berkas?${n}`).then(l=>l)});ae(this,"verifyBerkas",async s=>await se.post(`${wt}penyerahan/verifikasi-berkas`,s).then(i=>i));ae(this,"verify",async s=>await se.post(`${wt}penyerahan/verifikasi`,s).then(i=>i))}}const zb=()=>{const r="Verifikasi Penyerahan",[s,n]=a.useState(!1);a.useEffect(()=>{n(ge(r,"is_read",!0))},[]);const t=JSON.parse(Le.getItem("users")),i=new Tr,l=ha(),[m,p]=a.useState(!1),[B,K]=a.useState(null),[W,z]=a.useState(null),[T,L]=a.useState({total:0,from:1,to:1});let $=[];B==null?$=[]:$=B.map((_,C)=>{var k,b,y,o,F;return{no:C+T.from,id:_.id,organisasi:_==null?void 0:_.from_organisasi_nama,jumlah:(k=_==null?void 0:_.berkas_pemusnahan)==null?void 0:k.length,description:_==null?void 0:_.description,created_at:_.created_at,tanggal_musnah:_==null?void 0:_.tanggal_musnah,status:(_==null?void 0:_.status)=="USUL"?e.jsx(be,{badgeContent:"DIUSUL",color:"secondary",container:!0}):(_==null?void 0:_.status)=="UPLOAD"?e.jsx(be,{badgeContent:"SELESAI",color:"success",container:!0}):e.jsxs("div",{className:"flex flex-col gap-3",children:[((b=_==null?void 0:_.berkas_pemusnahan)==null?void 0:b.filter(x=>x.status==="SETUJU").length)>0&&e.jsx(be,{badgeContent:`${(y=_==null?void 0:_.berkas_pemusnahan)==null?void 0:y.filter(x=>x.status==="SETUJU").length} SETUJU`,color:"success",container:!0}),((o=_==null?void 0:_.berkas_pemusnahan)==null?void 0:o.filter(x=>x.status==="DITOLAK").length)>0?e.jsx(be,{badgeContent:`${(F=_==null?void 0:_.berkas_pemusnahan)==null?void 0:F.filter(x=>x.status==="DITOLAK").length} TOLAK`,color:"error",container:!0}):""]}),action:e.jsx("div",{className:"flex gap-2 items-center justify-center w-full",children:e.jsx(Oa,{size:"1.5em",color:"#17c1e8",onClick:()=>I(_),className:"cursor-pointer",title:"Lihat"})})}});const[M,H]=a.useState({organisasi_id:t==null?void 0:t.organisasi_id,public_organisasi_id:t==null?void 0:t.public_organisasi_id,group_role_id:t==null?void 0:t.group_role,page:1,rows:10,sortField:"",sortOrder:null,search:"",filters:{created_at:{value:""},tanggal_musnah:{value:""},status:{value:""}}});a.useEffect(()=>{V()},[M]);const V=async(_=!1)=>{_&&(M.page=1),p(!0),await i.getPaging(M).then(C=>{let k=C.data.result;k.data&&(z(k.last_page),K(k.data),p(!1)),p(!1),L({...T,to:k.to,from:k.from,total:k.total})}).catch(C=>{p(!1),L({...T,to:0,from:!1,total:0})})},A=Da((_,C,k=null)=>{if(k){let y=k.target;for(;y&&y.tagName!=="TD";)y=y.parentNode;if(y&&y.tagName==="TD"){const o=y.querySelector(".clear-input"),F=y.querySelector("input");C?o.classList.remove("hidden"):(o.classList.add("hidden"),F.value="")}}let b={...M};b.filters[_].value=C,b.page=1,H(b)},600),G=_=>{let C={...M};C.page=_,H(C),window.scrollTo({top:0,behavior:"smooth"})},X=_=>{let C={...M};C.rows=_,C.page=1,H(C)},O=_=>{let C={...M};C.sortField=_,M.sortField!=_?M.sortOrder==""&&(C.sortOrder=1):M.sortOrder==1?C.sortOrder=-1:(C.sortOrder="",C.sortField=""),C.page=1,H(C)},I=_=>{l("detail",{state:{formode:"Lihat",id:_.id}})};return e.jsxs(aa,{children:[e.jsx(la,{}),s&&e.jsxs(e.Fragment,{children:[" ",e.jsx(ie,{pt:6,pb:3,children:e.jsxs(Me,{children:[e.jsx(ie,{px:3,pt:3,lineHeight:1,children:e.jsx(w,{container:!0,direction:"row",justifyContent:"space-between",alignItems:"center",children:e.jsx(w,{item:!0,children:e.jsx(le,{variant:"h5",fontWeight:"medium",children:"Daftar Proses Penyerahan"})})})}),e.jsx("div",{className:"overflow-auto",children:e.jsxs("div",{className:"table p-10 min-w-full",children:[e.jsx("div",{className:"flex justify-end mb-1",children:e.jsx(pa,{config:M,handleClick:X})}),e.jsxs("table",{className:"w-full text-sm text-left !text-gray-700 dark:text-gray-400 table-bordered",children:[e.jsx("thead",{className:"text-xs text-gray-500 uppercase border-b-2 mb-1",children:e.jsxs("tr",{children:[e.jsx(q,{text:"No",className:"flex justify-center"}),e.jsx(q,{text:"Dibuat pada",sortField:"created_at",sortOrder:M.sortOrder,config:M,handleClick:()=>O("created_at")}),e.jsx(q,{text:"Deskripsi"}),e.jsx(q,{text:"Jumlah Berkas",sortField:"jumlah",sortOrder:M.sortOrder,config:M,handleClick:()=>O("jumlah")}),e.jsx(q,{text:"Tanggal Musnah",sortField:"tanggal_musnah",sortOrder:M.sortOrder,config:M,handleClick:()=>O("tanggal_musnah")}),e.jsx(q,{text:"Status",sortField:"status",sortOrder:M.sortOrder,config:M,handleClick:()=>O("status")}),e.jsx(q,{text:"Aksi",className:"flex justify-center min-w-[2rem]"})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{className:"border-b border-slate-300",children:[e.jsx("td",{className:"max-w-[20rem] py-6"}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"created_at",onSearch:A,placeholder:"Tanggal Dibuat",type:"input",isDate:!0})}),e.jsx("td",{}),e.jsx("td",{}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"tanggal_musnah",onSearch:A,placeholder:"Tanggal Musnah",type:"input",isDate:!0})}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"status",onSearch:A,placeholder:"Status",type:"select",selectOption:eg})}),e.jsx("td",{})]}),m?e.jsx("tr",{children:e.jsx("td",{colSpan:7,children:e.jsx(ia,{})})}):e.jsx(e.Fragment,{}),$.length?$.map((_,C)=>e.jsxs("tr",{className:"border-b border-slate-300",children:[e.jsx("td",{className:"px-6 py-6",children:e.jsx("div",{className:"flex justify-center",children:_.no})}),e.jsx("td",{className:" max-w-[20rem] px-6 py-6 ",children:_.created_at?na(_.created_at):"-"}),e.jsx("td",{className:"px-6 py-6",children:_.description}),e.jsx("td",{className:" max-w-[20rem] px-6 py-6",children:_.jumlah}),e.jsx("td",{className:" max-w-[20rem] px-6 py-6 ",children:_.tanggal_musnah?na(_.tanggal_musnah):"-"}),e.jsx("td",{className:" max-w-[20rem] px-6 py-6",children:_.status}),e.jsxs("td",{className:"px-3 text-right w-[2rem]",children:[" ",_.action," "]})]},C)):e.jsx(e.Fragment,{})]})]}),e.jsxs("nav",{className:"flex items-center justify-between p-4","aria-label":"Table navigation",children:[e.jsx("span",{className:"text-sm text-gray-400",children:T.from&&`Menampilkan ${Se(T.from)} sampai ${Se(T.to)} dari ${Se(T.total)} entri`}),e.jsx(xa,{currentPage:M.page,lastPage:W,displayCount:5,handleClick:G})]})]})})]})}),e.jsx(ua,{})]})]})},Ub=fa().shape({lampiran_wajib:Qa().required("Lampiran harus diisi"),desc_lampiran_wajib:ze().required("Deskripsi harus diisi")}),Vb=fa().shape({penyerahan_id:wa().required("ID Pemusnahan Harus Diisi"),file_sk:Qa().required("File Harus Diisi"),file_notul:Qa().required("File Harus Diisi"),file_pertimbangan:Qa().required("File Harus Diisi"),file_persetujuan:Qa().required("File Harus Diisi"),file_keputusan:Qa().required("File Harus Diisi"),file_berita:Qa().required("File Harus Diisi"),file_daftar:Qa().required("File Harus Diisi")});fa().shape({status:ze().required("Status wajib diisi"),deskripsi:ze().notRequired().test("deskripsi-required","Catatan wajib diisi",function(r){return this.parent.status==="SETUJU"||this.parent.status==="DITOLAK"&&r})});const Ld=({lampiranList:r,setLampiranList:s,isRequiredFirst:n,requiredFileTitle:t="Dokumen Pendukung",isRequiredFileDescEditable:i=!0})=>{var p;const[l,m]=a.useState(r);return a.useEffect(()=>{n&&m(r==null?void 0:r.slice(1))},[r.length]),e.jsxs(e.Fragment,{children:[n&&e.jsxs("div",{className:"mb-8",children:[e.jsx(ce,{name:"lampiran_wajib",children:({field:B,form:K,meta:W})=>{var z,T;return e.jsxs("div",{className:"mb-3",children:[e.jsxs("div",{className:"mt-3",children:[e.jsx("div",{className:"flex justify-between w-full",children:e.jsx(de,{text:t,required:!0,error:!!W.error})}),e.jsx(le,{variant:"caption",children:"Format yang didukung: .PDF, .JPEG, .JPG, .PNG. Maksimal ukuran file 5 MB."})]}),e.jsx(et,{value:((T=(z=r==null?void 0:r[0])==null?void 0:z.file)==null?void 0:T.name)||"",isReset:!1,maxSizePerFileInMb:5,acceptedType:["application/pdf","image/jpeg","image/jpg","image/png"],notifFileTypeError:"Hanya Mendukung File .PDF, .JPEG, .JPG, .PNG",size:"small",showDeleteButton:!1,onFileSelected:L=>{let $={...r[0],file:L},M=r.map((H,V)=>V===0?$:H);s(M),K.setFieldValue("lampiran_wajib",L)}}),e.jsx(ue,{text:W.error,error:!!W.error})]})}}),e.jsx(ce,{name:"desc_lampiran_wajib",children:({field:B,form:K,meta:W})=>{var z;return e.jsxs("div",{className:"",children:[e.jsx(Ye,{type:"text",placeholder:`Masukkan Deskripsi ${t}...`,disabled:!i,value:K.values.desc_lampiran_wajib??((z=r==null?void 0:r[0])==null?void 0:z.desc),onChange:T=>{let L={...r[0],desc:T.target.value},$=r.map((M,H)=>H===0?L:M);s($),K.setFieldValue("desc_lampiran_wajib",T.target.value)}}),e.jsx(ue,{text:W.error,error:!!W.error})]})}})]}),l.length>0&&l.map((B,K)=>{var W;return e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"",children:[e.jsxs("div",{className:"mt-3",children:[e.jsxs("div",{className:"flex justify-between w-full",children:[e.jsx(de,{text:`Lampiran Tambahan ${K+1}`,required:!0}),e.jsx("button",{className:"mb-2 hover:opacity-75",type:"button",onClick:()=>{const z=l.filter(L=>(L==null?void 0:L.id)!==(B==null?void 0:B.id));m(z);const T=n?[r[0],...z]:z;s(T)},children:e.jsx(Lo,{size:20,color:"#ef4444"})})]}),e.jsx(le,{variant:"caption",children:"Format yang didukung: .PDF, .JPEG, .JPG, .PNG. Maksimal ukuran file 5 MB."})]}),e.jsx(et,{value:(W=B==null?void 0:B.file)==null?void 0:W.name,isReset:!1,maxSizePerFileInMb:5,acceptedType:["application/pdf","image/jpeg","image/jpg","image/png"],notifFileTypeError:"File Hanya Support .PDF",size:"small",showDeleteButton:!1,onFileSelected:z=>{let T={...B,file:z},L=l.map((M,H)=>H===K?T:M);m(L);const $=n?[r[0],...L]:L;s($)}})]}),e.jsx("div",{className:"",children:e.jsx(Ye,{type:"text",placeholder:`Masukkan Deskripsi Lampiran Tambahan ${K+1}...`,value:B==null?void 0:B.desc,onChange:z=>{let T={...B,desc:z.target.value},L=l.map((M,H)=>H===K?T:M);m(L);const $=n?[r[0],...L]:L;s($)}})})]},`lampiran_${K}`)}),e.jsx("div",{className:"flex justify-end w-full",children:e.jsx(_e,{color:"primary",type:"button",disabled:r.length>0?!((p=r[r.length-1])!=null&&p.file):!1,onClick:()=>{let B=r.length+1;m(K=>[...K,{id:B,file:"",desc:""}]),s(K=>[...K,{id:B,file:"",desc:""}])},children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx($o,{}),e.jsx("p",{children:"Tambah Lampiran"})]})})})]})},qb=({penyerahanId:r,handleUploadAndSend:s,lampiranList:n,setLampiranList:t})=>{ha();const i="Verifikasi Penyerahan",[l,m]=a.useState(!1),[p,B]=a.useState(!1);JSON.parse(Le.getItem("users")),ga();const[K,W]=a.useState(!1),[z,T]=a.useState(null),[L,$]=a.useState(null),[M,H]=a.useState(!1),V={penyerahan_id:r,file_sk:"",file_notul:"",file_pertimbangan:"",file_persetujuan:"",file_keputusan:"",file_berita:"",file_daftar:""};a.useEffect(()=>{m(ge(i,"is_read",!0))},[]);const A=a.useRef();return e.jsxs("div",{children:[e.jsx(w,{container:!0,direction:"row",justifyContent:"space-between",alignItems:"center",children:e.jsxs(ie,{px:3,py:3,lineHeight:1,children:[e.jsx(le,{variant:"h5",fontWeight:"medium",mb:2,children:"Form Unggah Dokumen Pendukung"}),e.jsxs(le,{variant:"body",children:["Format yang didukung: ",e.jsx("strong",{children:".PDF"}),", ",e.jsx("strong",{children:".JPEG"}),","," ",e.jsx("strong",{children:".JPG"}),", ",e.jsx("strong",{children:".PNG"})," dan Maksimal ukuran file"," ",e.jsx("strong",{children:"5 MB per dokumen"}),"."]})]})}),e.jsx(ca,{innerRef:A,initialValues:V,onSubmit:s,validationSchema:Vb,enableReinitialize:!0,children:e.jsxs(da,{id:"formDocs",encType:"multipart/form-data",children:[sg.map(G=>e.jsx(ce,{name:G.name,children:({field:X,form:O,meta:I})=>e.jsx("div",{className:"px-6",children:e.jsxs("div",{className:"grid grid-cols-12 gap-2 ",children:[e.jsxs("div",{className:"col-span-4 mt-3",children:[e.jsx(de,{text:G.title,required:!0,error:I.error}),e.jsx("div",{className:"mb-2",children:e.jsx(ue,{text:I.error,error:I.error})})]}),e.jsx("div",{className:"col-span-8",children:e.jsx(et,{onFileSelected:_=>{O.setFieldValue(`${G.name}`,_??"")},isReset:!1,maxSizePerFileInMb:5,acceptedType:["application/pdf"],notifFileTypeError:"File Hanya Support .PDF"})})]})})},G.name)),e.jsx("div",{className:"p-6",children:e.jsx(Ld,{lampiranList:n,setLampiranList:t})})]})})]})},Hb=({open:r,onClose:s,selectedBerkas:n,fetchData:t})=>{const i=new Tr,[l,m]=a.useState({status:"",deskripsi:""}),[p,B]=a.useState(!1),[K,W]=a.useState(!0),{mutate:z}=it({onMutate:()=>W(!1),mutationFn:T=>{if(n.length>0)return i.verifyBerkas({berkas_selected:n,...T})},onSuccess:async T=>{var L,$;T.data.success?(s(),U.fire({icon:"success",title:"Berhasil",text:(L=T.data)==null?void 0:L.message,showConfirmButton:!1,timer:1500}),B(!0),await t()):U.fire({icon:"warning",title:"Gagal",text:($=T.data)==null?void 0:$.message,showConfirmButton:!1,timer:1500})},onError:T=>{var $,M;const L=Oe(T.response.data.result);U.fire("Gagal",L??((M=($=T.response)==null?void 0:$.data)==null?void 0:M.message),"error")},onSettled:()=>W(!0)});return e.jsxs(ys,{open:r,onClose:s,fullWidth:!0,maxWidth:"sm",children:[e.jsx(_a,{children:e.jsxs("div",{className:"mx-2 flex items-center gap-2",children:[e.jsx(Ks,{className:"w-6 h-6"}),e.jsx(le,{children:"Verifikasi Penyerahan Berkas"})]})}),e.jsx(ie,{px:3,children:e.jsxs(w,{mb:2,children:[e.jsx(de,{text:"Berkas yang dipilih",required:!0}),e.jsx("div",{className:"table min-w-full",children:e.jsxs("table",{className:"w-full text-sm text-left !text-gray-700 dark:text-gray-400 table-bordered",children:[e.jsx("thead",{className:"text-xs text-gray-500 uppercase border-b-2 mb-1",children:e.jsxs("tr",{children:[e.jsx(q,{text:"No",className:"flex justify-center"}),e.jsx(q,{text:"Kode Klasifikasi / Nomor Berkas",className:"flex justify-center"}),e.jsx(q,{text:"Nama Berkas",className:"flex justify-center"})]})}),e.jsx("tbody",{children:(n==null?void 0:n.length)>0&&n.map((T,L)=>e.jsxs("tr",{className:"border-b border-slate-300",children:[e.jsx("td",{className:" max-w-[20rem] px-6 py-2 text-center",children:L+1}),e.jsxs("td",{className:" max-w-[20rem] px-6 py-2",children:[T.klasifikasi_kode," / ",T.nomor]}),e.jsx("td",{className:" max-w-[20rem] px-6 py-2",children:T.nama})]},T==null?void 0:T.id))})]})})]})}),e.jsx(ca,{initialValues:{status:"",deskripsi:""},onSubmit:z,validateOnChange:!0,validationSchema:ol,children:e.jsx(da,{id:"formVerif",className:"text-sm",children:e.jsxs("div",{className:"p-2",children:[e.jsx(w,{children:e.jsx(Na,{children:e.jsx(ce,{name:"status",children:({field:T,form:L,meta:$})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Status Penyerahan",required:!0,error:$.error&&$.touched}),e.jsxs("div",{className:"space-x-4 flex flex-row items-center",children:[e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{...T,type:"radio",className:"form-radio  w-4 h-4 text-blue-500 focus:ring-2 focus:ring-blue-500",checked:T.value=="SETUJU",onChange:M=>{L.setFieldValue("status","SETUJU"),M.target.checked=!0}}),e.jsx("span",{className:"text-gray-700",children:"SETUJU"})]}),e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{...T,type:"radio",className:"form-radio  w-4 h-4 text-blue-500 focus:ring-2 focus:ring-blue-500",checked:T.value=="DITOLAK",onChange:M=>{L.setFieldValue("status","DITOLAK"),M.target.checked=!0}}),e.jsx("span",{className:"text-gray-700",children:"DITOLAK"})]})]}),e.jsx(ue,{text:$.error,error:$.error&&$.touched})]})})})}),e.jsx(w,{children:e.jsx(Na,{children:e.jsx(ce,{name:"deskripsi",children:({field:T,form:L,meta:$})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Catatan",required:(l==null?void 0:l.status)==="DITOLAK",error:$.error&&$.touched}),e.jsx(Ka,{...T,placeHolder:"Masukan Catatan...",error:$.error&&$.touched}),e.jsx(ue,{text:$.error,error:$.error&&$.touched})]})})})})]})})}),e.jsx(ya,{children:e.jsxs(e.Fragment,{children:[e.jsx(Je,{submit:K,color:"success",formId:"formVerif",text:"Simpan"}),e.jsx(_e,{color:"error",variant:"gradient",onClick:s,children:"Batal"})]})})]})},Gb=({penyerahanId:r,visibleview:s,statusPenyerahan:n,viewDetail:t})=>{const i=new Tr;JSON.parse(Le.getItem("users"));const l=ha(),[m,p]=a.useState(!1),[B,K]=a.useState(!1),[W,z]=a.useState(null),[T,L]=a.useState(!1),[$,M]=a.useState(null),[H,V]=a.useState({total:0,from:1,to:1}),[A,G]=a.useState([]),[X,O]=a.useState(!1);let I=[];W==null?I=[]:I=W==null?void 0:W.map((u,D)=>{var E,J,P,h,d,j,g,c,v,N;return{no:D+H.from,id:u.id,berkas_id:u==null?void 0:u.berkas_id,penyerahan_id:u==null?void 0:u.penyerahan_id,klasifikasi_id:(E=u==null?void 0:u.berkas)==null?void 0:E.klasifikasi_id,nomor:(J=u==null?void 0:u.berkas)==null?void 0:J.nomor,klasifikasi_kode:(P=u==null?void 0:u.berkas)==null?void 0:P.klasifikasi_kode,nama:(h=u==null?void 0:u.berkas)==null?void 0:h.nama,retensi_aktif:(d=u==null?void 0:u.berkas)==null?void 0:d.retensi_aktif,retensi_inaktif:(j=u==null?void 0:u.berkas)==null?void 0:j.retensi_inaktif,tanggal_tutup:(g=u==null?void 0:u.berkas)==null?void 0:g.tanggal_tutup,tanggal_retensi_inaktif:(c=u==null?void 0:u.berkas)==null?void 0:c.tanggal_retensi_inaktif,kurun:(v=u==null?void 0:u.berkas)==null?void 0:v.kurun,jumlah:(N=u==null?void 0:u.berkas)==null?void 0:N.jumlah,created_at:u.created_at,status:u==null?void 0:u.status,deskripsi:u==null?void 0:u.deskripsi}});const _=u=>{l(""+"/pemeliharaan--arsip/pemberkasan-arsip-inaktif/detail",{state:{formode:"Lihat",berkas_id:u.berkas_id,back:"/proses-penyusutan/penyerahan/detail",id:r}})},[C,k]=a.useState({penyerahan_id:r,page:1,rows:10,sortField:"",sortOrder:null,search:"",status:n,filters:{kode:{value:""},nama:{value:""},status:{value:""}}});a.useEffect(()=>{r&&b()},[C,r,n]);const b=async(u=!1)=>{u&&(C.page=1),G([]),K(!0),await i.getPagingListBerkas(C).then(D=>{let E=D.data.result;E.data&&(M(E.last_page),z(E.data),K(!1)),K(!1),V({...H,to:E.to,from:E.from,total:E.total})}).catch(D=>{var E;console.log({error:D}),((E=D.response)==null?void 0:E.status)==404&&z([]),K(!1),V({...H,to:0,from:!1,total:0})})},y=os((u,D,E=null)=>{if(E){let P=E.target;for(;P&&P.tagName!=="TD";)P=P.parentNode;if(P&&P.tagName==="TD"){const h=P.querySelector(".clear-input"),d=P.querySelector("input");D?h.classList.remove("hidden"):(h.classList.add("hidden"),d.value="")}}let J={...C};J.filters[u].value=D,J.page=1,k(J)},600),o=u=>{let D={...C};D.page=u,k(D),window.scrollTo({top:0,behavior:"smooth"})},F=u=>{let D={...C};D.rows=u,k(D)},x=u=>{let D={...C};D.sortField=u,C.sortField!=u?C.sortOrder==""&&(D.sortOrder=1):C.sortOrder==1?D.sortOrder=-1:(D.sortOrder="",D.sortField=""),D.page=1,k(D)},S=()=>{L(!1)},f=()=>{L(!0)};a.useEffect(()=>{I&&O(A.length==(I==null?void 0:I.length))},[I,A]);const R=()=>{G(X?[]:I)};return e.jsxs("div",{children:[e.jsxs(w,{container:!0,direction:"row",justifyContent:"space-between",alignItems:"center",mb:3,children:[e.jsx(ie,{px:3,pt:3,lineHeight:1,children:e.jsx(le,{variant:"h5",fontWeight:"medium",children:"Daftar Berkas"})}),!s&&e.jsx(ie,{px:3,pt:3,lineHeight:1,children:e.jsx(_e,{variant:"gradient",color:"info",onClick:f,disabled:!A.length,children:e.jsx("p",{children:"Verifikasi Penyerahan"})})})]}),e.jsx(w,{children:e.jsx("div",{className:"overflow-auto",children:e.jsxs("div",{className:"table px-6 pb-6 min-w-full",children:[e.jsx("div",{className:"flex items-center justify-end mb-1",children:e.jsx(pa,{config:C,handleClick:F})}),e.jsxs("table",{className:"w-full text-sm text-left !text-gray-700 dark:text-gray-400 table-bordered",children:[e.jsx("thead",{className:"text-xs text-gray-500 uppercase border-b-2 mb-1",children:e.jsxs("tr",{children:[!s&&e.jsx(q,{}),e.jsx(q,{text:"No",sortField:"no",sortOrder:C.sortOrder,config:C,handleClick:()=>x("no")}),e.jsx(q,{text:"Kode Klasifikasi / Nomor Berkas",sortField:"klasifikasi_kode",sortOrder:C.sortOrder,config:C,handleClick:()=>x("klasifikasi_kode")}),e.jsx(q,{text:"Berkas",sortField:"nama",sortOrder:C.sortOrder,config:C,handleClick:()=>x("nama")}),e.jsx(q,{text:"Kurun Waktu",sortField:"kurun",sortOrder:C.sortOrder,config:C,handleClick:()=>x("kurun")}),e.jsx(q,{text:"Jumlah",sortField:"jumlah",sortOrder:C.sortOrder,config:C,handleClick:()=>x("jumlah")}),e.jsx(q,{text:"Akhir Retensi Inktif",sortField:"tanggal_retensi_inaktif",sortOrder:C.sortOrder,config:C,handleClick:()=>x("tanggal_retensi_inaktif")}),e.jsx(q,{text:"Status"}),e.jsx(q,{text:"Catatan"}),(!s||n=="VERIFIKASI")&&e.jsx(q,{text:"Aksi",className:"flex justify-center min-w-[2rem]"})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{className:"border-b border-slate-300",children:[!s&&e.jsx("td",{className:"max-w-[20rem] px-6 py-6",children:n=="USUL"&&e.jsx("input",{type:"checkbox",className:"form-checkbox h-5 w-5 text-indigo-600",checked:X,onChange:R,disabled:s})}),e.jsx("td",{}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2"}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"nama",onSearch:y,placeholder:"Berkas",type:"input"})}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2"}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2"}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2"}),e.jsx("td",{}),e.jsx("td",{}),e.jsx("td",{}),(!s||n=="VERIFIKASI")&&e.jsx("td",{})]}),B?e.jsx("tr",{className:"border-b border-slate-300",children:e.jsx("td",{colSpan:9,children:e.jsx(ia,{})})}):e.jsx(e.Fragment,{}),I.length?I==null?void 0:I.map((u,D)=>e.jsxs("tr",{className:"border-b border-slate-300",children:[!s&&e.jsx("td",{className:"max-w-[20rem] px-6 py-6",children:((u==null?void 0:u.status)=="USUL"||n=="USUL")&&e.jsx("input",{type:"checkbox",className:"form-checkbox h-5 w-5 text-indigo-600",checked:A==null?void 0:A.some(E=>E.id===u.id),onChange:E=>{if(E.target.checked)G(J=>[...J,u]);else{let J=A==null?void 0:A.filter(P=>P.id!==(u==null?void 0:u.id));G(J)}},disabled:s})}),e.jsx("td",{className:"max-w-[20rem] px-6 py-6",children:u.no}),e.jsxs("td",{className:"max-w-[20rem] px-6 py-6",children:[u.klasifikasi_kode," / ",u.nomor]}),e.jsx("td",{className:"max-w-[20rem] px-6 py-6",children:u.nama??"-"}),e.jsx("td",{className:"max-w-[20rem] px-6 py-6",children:u.kurun}),e.jsx("td",{className:"max-w-[20rem] px-6 py-6",children:u.jumlah}),e.jsx("td",{className:"max-w-[20rem] px-6 py-6 ",children:u.tanggal_retensi_inaktif??"-"}),e.jsx("td",{className:"max-w-[20rem] px-6 py-6 text-center",children:!u.status||u.status=="USUL"?e.jsx(be,{badgeContent:"USUL",color:"secondary",container:!0}):u.status==="SETUJU"?e.jsx(be,{badgeContent:"SETUJU",color:"success",container:!0}):e.jsx(be,{badgeContent:"DITOLAK",color:"error",container:!0})}),e.jsx("td",{className:"max-w-[20rem] px-6 py-6",children:u.deskripsi??"-"}),(!s||n=="VERIFIKASI")&&e.jsx("td",{className:"max-w-[20rem] px-6 py-6",children:e.jsx("div",{className:"flex justify-center w-full",children:t&&ge("Berkas Aktif","is_read")&&e.jsx(Oa,{size:"1.5em",color:"#17c1e8",onClick:()=>_(u),className:"cursor-pointer",title:"Lihat"})})})]},D)):e.jsx(e.Fragment,{})]})]}),e.jsxs("nav",{className:"flex items-center justify-between p-4","aria-label":"Table navigation",children:[e.jsx("span",{className:"text-sm text-gray-400",children:H.from&&`Menampilkan ${Se(H.from)} sampai ${Se(H.to)} dari ${Se(H.total)} entri`}),e.jsx(xa,{currentPage:C.page,lastPage:$,displayCount:5,handleClick:o})]})]})})}),e.jsx(Hb,{open:T,onClose:S,selectedBerkas:A,fetchData:b})]})},Wb=({penyerahanId:r,refresh:s})=>{const n=new Tr;JSON.parse(Le.getItem("users"));const[t,i]=a.useState(!1),[l,m]=a.useState(null),[p,B]=a.useState(null),[K,W]=a.useState({total:0,from:1,to:1});let z=[];l==null?z=[]:z=l==null?void 0:l.map((V,A)=>({no:A+1,nama:V==null?void 0:V.nama,file:V==null?void 0:V.file,file_path:V==null?void 0:V.file_path,deskripsi:V==null?void 0:V.deskripsi}));const[T,L]=a.useState({penyerahan_id:r,page:1,rows:10,sortField:"",sortOrder:null,search:"",filters:{tanggal:{value:""},tipe_naskah:{value:""},jenis_naskah:{value:""},nomor:{value:""},hal:{value:""}}});a.useEffect(()=>{r&&$()},[T,r,s]);const $=async(V=!1)=>{V&&(T.page=1),i(!0),await n.getPagingItems(T).then(A=>{let G=A.data.result;G.data&&(B(G.lastPage),m(G.data),i(!1)),i(!1),W({...K,to:G.to,from:G.from,total:G.total})}).catch(A=>{console.log({error:A}),i(!1),W({...K,to:0,from:!1,total:0})})};os((V,A,G=null)=>{if(G){let O=G.target;for(;O&&O.tagName!=="TD";)O=O.parentNode;if(O&&O.tagName==="TD"){const I=O.querySelector(".clear-input"),_=O.querySelector("input");A?I.classList.remove("hidden"):(I.classList.add("hidden"),_.value="")}}let X={...T};X.filters[V].value=A,X.page=1,L(X)},600);const M=V=>{let A={...T};A.page=V,L(A),window.scrollTo({top:0,behavior:"smooth"})},H=V=>{let A={...T};A.rows=V,L(A)};return e.jsxs("div",{children:[e.jsx(w,{container:!0,direction:"row",justifyContent:"space-between",alignItems:"center",children:e.jsx(ie,{px:3,py:3,lineHeight:1,children:e.jsx(le,{variant:"h5",fontWeight:"medium",children:"Dokumen Pendukung"})})}),e.jsx("div",{className:"overflow-auto",children:e.jsxs("div",{className:"table px-6 pb-6 min-w-full",children:[e.jsx("div",{className:"flex items-center justify-end mb-1",children:e.jsx(pa,{config:T,handleClick:H})}),e.jsxs("table",{className:"w-full text-sm text-left !text-gray-700 dark:text-gray-400 table-bordered",children:[e.jsx("thead",{className:"text-xs text-gray-500 uppercase border-b-2 mb-1",children:e.jsxs("tr",{children:[e.jsx(q,{text:"No"}),e.jsx(q,{text:"Nama File"}),e.jsx(q,{text:"Deskripsi"})]})}),e.jsxs("tbody",{children:[t?e.jsx("tr",{className:"border-b border-slate-300",children:e.jsx("td",{colSpan:3,children:e.jsx(ia,{})})}):e.jsx(e.Fragment,{}),z.length?z==null?void 0:z.map((V,A)=>e.jsxs("tr",{className:"border-b border-slate-300",children:[e.jsx("td",{className:"w-8 px-6 py-4 text-center",children:V.no}),e.jsx("td",{className:"max-w-[20rem] px-6 py-4",children:e.jsx("span",{className:"cursor-pointer hover:text-blue-500",onClick:()=>Wa(V.file,V.file_path),children:V.nama})}),e.jsx("td",{className:"max-w-[20rem] px-6 py-4",children:V.deskripsi})]},A)):e.jsx(e.Fragment,{})]})]}),e.jsxs("nav",{className:"flex items-center justify-between p-4","aria-label":"Table navigation",children:[e.jsx("span",{className:"text-sm text-gray-400",children:K.from&&`Menampilkan ${Se(K.from)} sampai ${Se(K.to)} dari ${Se(K.total)} entri`}),e.jsx(xa,{currentPage:T.page,lastPage:p,displayCount:5,handleClick:M})]})]})})]})},jo=()=>{const r="Verifikasi Penyerahan",s=ge("Usul Penyerahan","is_create"),n=new Tr,t=ga(),i=ha(),l={id:t.state.id};a.useEffect(()=>{p(ge(r,"is_read",!0))},[]);const[m,p]=a.useState(!1),[B,K]=a.useState(!1),[W,z]=a.useState(!0),[T,L]=a.useState(null),[$,M]=a.useState(-1),[H,V]=a.useState(!0),[A,G]=a.useState(!1),[X,O]=a.useState([]),I="",[_,C]=a.useState(!0);a.useEffect(()=>{l.id&&(U.showLoading(),b(l.id).then(()=>{p(!0)}).catch(()=>{U.fire({title:"Data tidak ditemukan",text:"Kembali ke daftar",icon:"warning",backdrop:!0})}).finally(()=>{U.close()}))},[l.id,$]),a.useEffect(()=>{ge(r,"is_create")?V(!1):V(!0),(T==null?void 0:T.status)=="VERIFIKASI"?(ge(r,"is_create")||C(!1),V(!0),G(!0)):G(!1),(T==null?void 0:T.status)=="UPLOAD"&&V(!0)},[T]);const k=()=>{var F;(F=t.state)!=null&&F.from?i(I+t.state.from):i(I+"/proses-penyusutan/penyerahan")},b=async F=>{(F!=null||F!=null)&&await n.getDetail(F).then(x=>{L(x.data.result)})},y=()=>{l!=null&&l.id&&U.fire({title:"Selesaikan Verifikasi",text:"Apakah Anda yakin ingin menyelesaikan verifikasi penyerahan berkas?",icon:"question",showCancelButton:!0,confirmButtonText:"Ya, Selesaikan",cancelButtonText:"Batal",customClass:{confirmButton:"button button-success",cancelButton:"button button-info"}}).then(async F=>{F.isConfirmed&&(z(!1),await n.verify({id:l==null?void 0:l.id}).then(x=>{x.data.success&&(b(l==null?void 0:l.id),U.fire("Berhasil","Penyerahan Berkas Berhasil Diverifikasi","success"))}).catch(x=>{var f,R,u,D;const S=Oe((R=(f=x.response)==null?void 0:f.data)==null?void 0:R.result);U.fire("Gagal",S??((D=(u=x.response)==null?void 0:u.data)==null?void 0:D.message),"error")}).finally(()=>{z(!0)}))})},o=F=>{l!=null&&l.id&&U.fire({title:"Selesaikan Penyerahan",text:"Apakah Anda yakin ingin menyimpan dokumen dan menyelesaikan penyerahan berkas?",icon:"question",showCancelButton:!0,confirmButtonText:"Ya, Kirim",cancelButtonText:"Batal",customClass:{confirmButton:"button button-success",cancelButton:"button button-info"}}).then(async x=>{if(x.isConfirmed){const S={...F,lampirans:X};z(!1),await n.uploadFiles(S).then(f=>{f.data.success?(M($+1),U.fire("Berhasil","Berhasil Menyelesaikan Penyerahan Berkas","success"),b(l==null?void 0:l.id)):U.fire("Gagal","Gagal Menyelesaikan Penyerahan Berkas","warning")}).catch(f=>{var u,D,E,J;const R=Oe((D=(u=f.response)==null?void 0:u.data)==null?void 0:D.result);U.fire("Gagal",R??((J=(E=f.response)==null?void 0:E.data)==null?void 0:J.message),"error")}).finally(()=>{z(!0)})}})};return e.jsxs(aa,{children:[e.jsx(la,{}),m&&e.jsxs(e.Fragment,{children:[e.jsxs(ie,{pt:6,pb:3,className:"flex flex-col gap-10",children:[e.jsx(ie,{children:e.jsxs("div",{className:"flex justify-between p-3 items-center",children:[e.jsx(le,{variant:"h5",fontWeight:"medium",children:"Detail Penyerahan"}),e.jsxs("div",{className:"flex gap-2 items-center",children:[!H&&!A&&(T==null?void 0:T.status)!=="UPLOAD"&&e.jsx(Je,{submit:W,color:"success",onClick:y,text:"Selesaikan Verifikasi"}),A&&e.jsx(Je,{submit:W,color:"success",formId:"formDocs",text:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Mo,{}),e.jsx("p",{children:"Selesaikan Penyerahan"})]})}),e.jsxs(_e,{variant:"gradient",color:"secondary",onClick:k,children:[e.jsx(za,{size:"1.5em",className:"me-2"}),"Kembali"]})]})]})}),(T==null?void 0:T.status)&&e.jsxs("div",{className:`flex justify-between gap-3 p-5 items-center bg-gradient-to-r rounded-2xl ${(T==null?void 0:T.status)==="USUL"?"from-gray-400 to-gray-500":(T==null?void 0:T.status)==="VERIFIKASI"?"from-[#21d4fd] to-[#2152ff]":"from-teal-400 to-teal-500"}`,children:[e.jsx(qn,{size:"3em",className:"text-white"}),e.jsxs("div",{className:"text-right",children:[e.jsx(le,{variant:"h5",fontWeight:"medium",align:"right",color:"white",children:"Status Proses Penyerahan"}),e.jsx(le,{variant:"caption",fontWeight:"medium",align:"right",color:"light",children:(T==null?void 0:T.status)=="USUL"?"DIUSUL":(T==null?void 0:T.status)=="UPLOAD"?"SELESAI":T==null?void 0:T.status})]})]}),A&&e.jsxs("div",{className:"flex justify-between gap-3 p-5 items-center bg-gradient-to-r rounded-2xl from-[#eecd56] to-[#f3c51f]",children:[e.jsx(Qi,{size:"3em",className:"text-white"}),e.jsxs("div",{className:"text-right",children:[e.jsx(le,{variant:"h5",fontWeight:"medium",align:"right",color:"white",children:"Unggah Dokumen Penyerahan"}),e.jsx(le,{variant:"body",fontWeight:"medium",align:"right",color:"white",children:"Mohon unggah dokumen penyerahan pada form di bawah"})]})]}),T&&e.jsx(Me,{children:e.jsx(ie,{px:3,pt:3,lineHeight:1,children:e.jsx(Gb,{penyerahanId:l.id,visibleview:H||A,statusPenyerahan:T==null?void 0:T.status,viewDetail:_})})}),(l==null?void 0:l.id)&&e.jsx(Me,{children:e.jsx(ie,{px:3,py:3,lineHeight:1,children:e.jsx(Wb,{penyerahanId:l==null?void 0:l.id,refresh:$})})}),s&&(l==null?void 0:l.id)&&A&&e.jsx(Me,{children:e.jsx(ie,{px:3,pt:3,lineHeight:1,children:e.jsx(qb,{penyerahanId:l.id,handleUploadAndSend:o,lampiranList:X,setLampiranList:O})})})]}),e.jsx(ua,{})]})]})},Jb=()=>{var _;const r="Usul Penyerahan";JSON.parse(Le.getItem("users"));const s=ga(),n=new Tr,t=new ha,[i,l]=a.useState(!1),[m,p]=a.useState(!0),[B,K]=a.useState(1),[W,z]=a.useState(1),[T,L]=a.useState([]),$=100,[M,H]=a.useState(((_=s.state)==null?void 0:_.berkas_selected)||[]),V={berkas_selected:M,description:"",lampiran_wajib:"",desc_lampiran_wajib:"Surat Pengajuan Usul Serah Arsip"},[A,G]=a.useState([{id:1,file:V.lampiran_wajib,desc:V.desc_lampiran_wajib}]);a.useEffect(()=>{l(ge(r,"is_create"))},[]),a.useEffect(()=>{const C=(B-1)*$,k=C+$,b=M==null?void 0:M.slice(C,k);L(b)},[B,M]),a.useEffect(()=>{const C=Math.ceil((M==null?void 0:M.length)/$);z(C)},[M]);const X=C=>{K(C)},O=C=>{(M==null?void 0:M.length)>0&&A.length>0?U.fire({title:"Usul Serah Berkas",text:"Apakah Anda yakin ingin mengusulkan penyerahan berkas yang dipilih?",icon:"question",showCancelButton:!0,confirmButtonText:"Ya, Usulkan",cancelButtonText:"Batal",customClass:{confirmButton:"button button-success",cancelButton:"button button-info"}}).then(async k=>{if(k.isConfirmed){const b={...C,berkas_selected:M,lampirans:A.slice(1)};p(!1),await n.request(b).then(y=>{const o=y.data;o.success&&(setTimeout(()=>{var F;t("/proses-penyusutan/penyerahan/detail",{state:{id:(F=o==null?void 0:o.result)==null?void 0:F.id}})},500),H([]),U.fire("Berhasil","Penyerahan Berkas Berhasil Diusulkan","success"))}).catch(y=>{var F,x,S,f;const o=Oe((x=(F=y.response)==null?void 0:F.data)==null?void 0:x.result);U.fire("Gagal",o??((f=(S=y.response)==null?void 0:S.data)==null?void 0:f.message),"error")}).finally(()=>{p(!0)})}}):U.fire({title:"Oops!",text:"Anda belum memilih berkas untuk usul penyerahan",icon:"warning",showCancelButton:!1})},I=()=>{t("/pemeliharaan--arsip/pemberkasan-arsip-inaktif",{state:{berkas_selected:M}})};return e.jsxs(aa,{children:[e.jsx(la,{}),i&&e.jsx(e.Fragment,{children:e.jsx(ie,{pt:6,pb:3,className:"flex flex-col gap-10",children:e.jsx(Me,{children:e.jsxs(ie,{px:3,pt:3,lineHeight:1,children:[e.jsxs("div",{className:"flex justify-between  items-center mb-6",children:[e.jsx(le,{variant:"h5",fontWeight:"medium",children:"Form Pengajuan Penyerahan Arsip"}),e.jsx("div",{className:"flex justify-end",children:e.jsxs(_e,{variant:"gradient",color:"secondary",onClick:I,children:[e.jsx(za,{size:"1.5em",className:"me-2"}),"Kembali"]})})]}),e.jsx(ca,{initialValues:V,onSubmit:O,validateOnChange:!0,validationSchema:Ub,children:e.jsxs(da,{id:"formSerah",className:"text-sm",children:[e.jsxs(w,{children:[e.jsx(de,{text:"Berkas yang dipilih",required:!0}),e.jsxs("div",{className:"table min-w-full",children:[e.jsxs("table",{className:"w-full text-sm text-left !text-gray-700 dark:text-gray-400 table-bordered",children:[e.jsx("thead",{className:"text-xs text-gray-500 uppercase border-b-2 mb-1",children:e.jsxs("tr",{children:[e.jsx(q,{text:"No",className:"flex justify-center"}),e.jsx(q,{text:"Kode Klasifikasi / Nomor Berkas",className:"flex justify-center"}),e.jsx(q,{text:"Nama Berkas",className:"flex justify-center"}),e.jsx(q,{text:"Akhir Retensi Inaktif",className:"flex justify-center"})]})}),e.jsx("tbody",{children:(T==null?void 0:T.length)>0&&T.map((C,k)=>e.jsxs("tr",{className:"border-b border-slate-300 ",children:[e.jsx("td",{className:"px-6 py-2 text-center w-4",children:$*(B-1)+(k+1)}),e.jsxs("td",{className:"w-1/4 px-6 py-2 ",children:[C.klasifikasi_kode," / ",C.nomor]}),e.jsx("td",{className:"1-1/2 px-6 py-2",children:C.nama}),e.jsx("td",{className:"w-1/4 px-6 py-2",children:C.tanggal_retensi_inaktif?oa(C.tanggal_retensi_inaktif,"DD-MM-YYYY").format("DD MMMM YYYY"):"-"})]},C==null?void 0:C.id))})]}),e.jsx("nav",{className:"flex items-center justify-end pt-4 px-4","aria-label":"Table navigation",children:e.jsx(xa,{currentPage:B,lastPage:W,displayCount:$,handleClick:X})})]})]}),e.jsx(w,{mt:3,children:e.jsx(ce,{name:"description",children:({field:C,form:k,meta:b})=>e.jsxs(e.Fragment,{children:[e.jsx(de,{text:"Deskripsi",required:!1,error:b.error&&b.touched}),e.jsx("div",{className:"space-x-4 flex flex-row items-center",children:e.jsx(Ye,{...C,type:"text",placeholder:"Masukkan Deskripsi Penyerahan...",error:b.error&&b.touched})}),e.jsx(ue,{text:b.error,error:b.error&&b.touched})]})})}),e.jsx(w,{mb:2,mt:5,children:e.jsx(Ld,{lampiranList:A,setLampiranList:G,isRequiredFirst:!0,requiredFileTitle:"Surat Pengajuan Usul Serah Arsip",isRequiredFileDescEditable:!1})}),e.jsx("div",{className:"flex justify-end items-center w-full gap-5 my-10",children:e.jsx(Je,{submit:m,color:"success",formId:"formSerah",text:"Ajukan Penyerahan"})})]})})]})})})})]})},Pn="https://api.arsip.go.id/arsip/api/";class $d{constructor(){ae(this,"getPaging",async s=>{const n=Ce.serializeObjectToQueryString(s);return await se.get(`${Pn}berkas-serah/list?${n}`).then(l=>l)});ae(this,"getLaporan",async s=>{const n=Ce.serializeObjectToQueryString(s);return await se.get(`${Pn}laporan/arsip-serah?${n}`).then(l=>l)});ae(this,"downloadLaporanPdf",async s=>{const n=Ce.serializeObjectToQueryString(s);return await se.get(`${Pn}laporan/arsip-serah/pdf?${n}`,{responseType:"blob",headers:{"Content-Type":"application/pdf"}}).then(l=>l)});ae(this,"downloadLaporanExcel",async s=>{const n=Ce.serializeObjectToQueryString(s);return await se.get(`${Pn}laporan/arsip-serah/excel?${n}`,{responseType:"blob",headers:{"Content-Type":"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}}).then(l=>l)})}}const Yb=()=>{const r="Berkas Penyerahan",[s,n]=a.useState(!1);a.useEffect(()=>{n(ge(r,"is_read",!0))},[]);const t=JSON.parse(Le.getItem("users")),i=new $d,l=ga(),m=ha(),[p,B]=a.useState(!1),[K,W]=a.useState(null),[z,T]=a.useState({start_at:"",end_at:""}),[L,$]=a.useState(null),[M,H]=a.useState({total:0,from:1,to:1});let V=[];K==null?V=[]:V=K.map((y,o)=>{var F,x,S,f;return{no:o+M.from,id:y.id,klasifikasi_id:y.klasifikasi_id,nomor:y.nomor,klasifikasi_kode:y.klasifikasi_kode,nama:y.nama,tanggal_retensi_inaktif:y.tanggal_retensi_inaktif,tanggal_serah:(x=(F=y.berkas_penyerahan_serah)==null?void 0:F.penyerahan)==null?void 0:x.tanggal_serah,kurun:y.kurun,jumlah:y.jumlah,created_at:y.created_at,berkas_penyerahan:y==null?void 0:y.berkas_penyerahan,unit_pengolah:(f=(S=y.berkas_penyerahan_serah)==null?void 0:S.penyerahan)==null?void 0:f.organisasi_nama,action:e.jsx("div",{className:"flex gap-2 items-center justify-center w-full",children:e.jsx(Oa,{size:"1.5em",color:"#17c1e8",onClick:()=>b(y),className:"cursor-pointer",title:"Lihat"})})}});const[A,G]=a.useState({organisasi_id:t==null?void 0:t.organisasi_id,public_organisasi_id:t==null?void 0:t.public_organisasi_id,group_role_id:t==null?void 0:t.group_role,page:1,rows:10,sortField:"",sortOrder:null,search:"",filters:{kode:{value:""},nama:{value:""},tanggal_retensi_inaktif:{value:""},tanggal_serah:{value:""}}});a.useEffect(()=>{X()},[A]);const X=async(y=!1)=>{y&&(A.page=1),B(!0),await i.getPaging(A).then(o=>{let F=o.data.result;F.data&&($(F.last_page),W(F.data),B(!1)),B(!1),H({...M,to:F.to,from:F.from,total:F.total})}).catch(o=>{console.log({error:o}),B(!1),H({...M,to:0,from:!1,total:0})})},O=Da((y,o,F=null)=>{if(F){let S=F.target;for(;S&&S.tagName!=="TD";)S=S.parentNode;if(S&&S.tagName==="TD"){const f=S.querySelector(".clear-input"),R=S.querySelector("input");o?f.classList.remove("hidden"):(f.classList.add("hidden"),R.value="")}}let x={...A};x.filters[y].value=o,x.page=1,G(x)},600),I=y=>{let o={...A};o.page=y,G(o),window.scrollTo({top:0,behavior:"smooth"})},_=y=>{let o={...A};o.rows=y,o.page=1,G(o)},C=y=>{let o={...A};o.sortField=y,A.sortField!=y?A.sortOrder==""&&(o.sortOrder=1):A.sortOrder==1?o.sortOrder=-1:(o.sortOrder="",o.sortField=""),o.page=1,G(o)},k=()=>{const o=`/berkas-serah/laporan?${Ce.serializeObjectToQueryString({start_at:z==null?void 0:z.start_at,end_at:z==null?void 0:z.end_at})}`;window.open(o,"_blank","noopener,noreferrer")},b=y=>{var o;m("detail",{state:{formode:"Lihat",id:(o=y.berkas_penyerahan_serah)==null?void 0:o.penyerahan_id,from:l.pathname}})};return e.jsxs(aa,{children:[e.jsx(la,{}),s&&e.jsxs(e.Fragment,{children:[" ",e.jsx(ie,{pt:6,pb:3,children:e.jsxs(Me,{children:[e.jsxs(ie,{px:3,pt:3,lineHeight:1,children:[e.jsx(w,{container:!0,direction:"row",justifyContent:"space-between",alignItems:"center",mb:4,children:e.jsx(w,{item:!0,children:e.jsx(le,{variant:"h5",fontWeight:"medium",children:"Daftar Arsip Serah"})})}),(t==null?void 0:t.group_role)!==4&&e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4 md:gap-6 mb-4 mt-5 md:items-center md:justify-between",children:[e.jsx("div",{className:"w-60",children:e.jsx(le,{variant:"h6",fontWeight:"medium",children:e.jsx("p",{className:"whitespace-nowrap",children:"Laporan Daftar Arsip Serah"})})}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-center ",children:[e.jsx("div",{className:"w-full ",children:e.jsx(Zs,{onDateSelected:(y,o)=>{T(F=>({...F,start_at:y==null?void 0:y.toISOString(),end_at:o==null?void 0:o.toISOString()}))}})}),ge(r,"is_create",!1,!0)&&e.jsx("div",{className:"w-full md:w-fit text-right",children:e.jsxs(_e,{variant:"gradient",color:"success",size:"small",onClick:k,disabled:!z.start_at||!z.end_at,children:[e.jsx(Bs,{size:"2em",className:"pe-2"}),"Tampilkan"]})})]})]})})]}),e.jsx("div",{className:"overflow-auto",children:e.jsxs("div",{className:"table p-10 min-w-full",children:[e.jsx("div",{className:"flex justify-end mb-1",children:e.jsx(pa,{config:A,handleClick:_})}),e.jsxs("table",{className:"w-full text-sm text-left !text-gray-700 dark:text-gray-400 table-bordered",children:[e.jsx("thead",{className:"text-xs text-gray-500 uppercase border-b-2 mb-1",children:e.jsxs("tr",{children:[e.jsx(q,{text:"No",className:"flex justify-center"}),e.jsx(q,{text:"Kode Klasifikasi / Nomor Berkas"}),e.jsx(q,{text:"Berkas",sortField:"nama",sortOrder:A.sortOrder,config:A,handleClick:()=>C("nama")}),e.jsx(q,{text:"Tanggal Buat Berkas",sortField:"created_at",sortOrder:A.sortOrder,config:A,handleClick:()=>C("created_at")}),e.jsx(q,{text:"Kurun Waktu",sortField:"kurun",sortOrder:A.sortOrder,config:A,handleClick:()=>C("kurun")}),e.jsx(q,{text:"Jumlah Item",sortField:"jumlah",sortOrder:A.sortOrder,config:A,handleClick:()=>C("jumlah")}),e.jsx(q,{text:"Akhir Retensi Inaktif",sortField:"tanggal_retensi_inaktif",sortOrder:A.sortOrder,config:A,handleClick:()=>C("tanggal_retensi_inaktif")}),e.jsx(q,{text:"Tanggal Serah",sortField:"tanggal_serah",sortOrder:A.sortOrder,config:A,handleClick:()=>C("tanggal_serah")}),t.group_role==2&&e.jsx(q,{text:"Unit Pengolah"}),e.jsx(q,{text:"Aksi",className:"flex justify-center min-w-[2rem]"})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{className:"border-b border-slate-300",children:[e.jsx("td",{className:"max-w-[20rem] py-6"}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"kode",onSearch:O,placeholder:"Kode Klasifikasi / Nomor Berkas",type:"input"})}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"nama",onSearch:O,placeholder:"Berkas",type:"input"})}),e.jsx("td",{}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2"}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2"}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2"}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"tanggal_serah",onSearch:O,placeholder:"Tanggal",type:"input",isDate:!0})}),e.jsx("td",{}),e.jsx("td",{})]}),p?e.jsx("tr",{children:e.jsx("td",{colSpan:10,children:e.jsx(ia,{})})}):e.jsx(e.Fragment,{}),V.length?V.map((y,o)=>e.jsxs("tr",{className:"border-b border-slate-300",children:[e.jsx("td",{className:"px-6 py-6",children:e.jsx("div",{className:"flex justify-center",children:y.no})}),e.jsxs("td",{className:" max-w-[20rem] px-6 py-6",children:[y.klasifikasi_kode," / ",y.nomor]}),e.jsx("td",{className:" max-w-[20rem] px-6 py-6",children:y.nama}),e.jsx("td",{className:" max-w-[20rem] px-6 py-6 ",children:y.created_at?na(y.created_at,2):"-"}),e.jsx("td",{className:" max-w-[20rem] px-6 py-6 ",children:y.jumlah>0?y.kurun:e.jsx(be,{badgeContent:"BELUM ADA NASKAH YANG DIBERKASKAN",color:"warning",container:!0})}),e.jsx("td",{className:" max-w-[20rem] px-6 py-6 text-center",children:y.jumlah}),e.jsx("td",{className:" max-w-[20rem] px-6 py-6",children:y.tanggal_retensi_inaktif?oa(y.tanggal_retensi_inaktif,"DD-MM-YYYY").format("DD MMMM YYYY"):"-"}),e.jsx("td",{className:" max-w-[20rem] px-6 py-6",children:y.tanggal_serah?na(y.tanggal_serah):"-"}),t.group_role==2&&e.jsx("td",{className:" max-w-[20rem] px-6 py-6",children:y.unit_pengolah}),e.jsxs("td",{className:"px-3 text-right w-[2rem]",children:[" ",y.action," "]})]},o)):e.jsx(e.Fragment,{})]})]}),e.jsxs("nav",{className:"flex items-center justify-between p-4","aria-label":"Table navigation",children:[e.jsx("span",{className:"text-sm text-gray-400",children:M.from&&`Menampilkan ${Se(M.from)} sampai ${Se(M.to)} dari ${Se(M.total)} entri`}),e.jsx(xa,{currentPage:A.page,lastPage:L,displayCount:5,handleClick:I})]})]})})]})}),e.jsx(ua,{})]})]})},Qb=()=>{var y,o,F;const r="Berkas Penyerahan",s=ga(),n=new URLSearchParams(s.search).get("start_at"),t=new URLSearchParams(s.search).get("end_at");new URLSearchParams(s.search).get("status");const i=new URLSearchParams(s.search).get("unit_kerja_id"),[l,m]=a.useState(!1),p=JSON.parse(Le.getItem("users"));a.useEffect(()=>{m(ge(r,"is_read",!0,!0)),C(i)},[]);const B=new $d,K=new qa,[W,z]=a.useState(!1),[T,L]=a.useState(null),[$,M]=a.useState(null),[H,V]=a.useState(!1),[A,G]=a.useState(!1);let X=[];T==null?X=[]:X=T.map((x,S)=>{var f,R,u,D;return{no:S+1,klasifikasi_kode:x.klasifikasi_kode,nomor:x.nomor,nama:x.nama,created_at:x.created_at,kurun:x.kurun,jumlah:x.jumlah,retensi_aktif:x==null?void 0:x.retensi_aktif,retensi_inaktif:x==null?void 0:x.retensi_inaktif,tanggal_retensi_aktif:(x==null?void 0:x.tanggal_retensi_aktif)||"-",tanggal_retensi_inaktif:(x==null?void 0:x.tanggal_retensi_inaktif)||"-",tanggal_tutup:x==null?void 0:x.tanggal_tutup,tanggal_serah:(R=(f=x==null?void 0:x.berkas_penyerahan_serah)==null?void 0:f.penyerahan)==null?void 0:R.tanggal_serah,status_akhir:x.penyusutan_akhir_nama,skkad:x.klasifikasi_keamanan_nama,unit_pengolah:(D=(u=x==null?void 0:x.berkas_penyerahan_serah)==null?void 0:u.penyerahan)==null?void 0:D.organisasi_nama}});const[O,I]=a.useState({start_at:n,end_at:t});a.useEffect(()=>{_()},[O]);const _=async()=>{z(!0),await B.getLaporan(O).then(x=>{let S=x.data.result;S&&(L(S),z(!1)),z(!1)}).catch(x=>{z(!1)})},C=async x=>{x&&await K.detail("organisasi/instansi",x,"").then(S=>{M(S)})},k=async()=>{V(!0),await B.downloadLaporanPdf(O).then(x=>{const S=`Laporan Daftar Berkas Arsip Serah_${oa(O==null?void 0:O.start_at).format("YYYY-MM-DD")}_${oa(O==null?void 0:O.end_at).format("YYYY-MM-DD")}.pdf`;es(x.data,S)}).catch(x=>{console.log({error:x})}).finally(()=>V(!1))},b=async()=>{G(!0),await B.downloadLaporanExcel(O).then(x=>{const S=`Laporan Daftar Berkas Arsip Serah_${oa(O==null?void 0:O.start_at).format("YYYY-MM-DD")}_${oa(O==null?void 0:O.end_at).format("YYYY-MM-DD")}.xls`;es(x.data,S)}).catch(x=>{console.log({error:x})}).finally(()=>G(!1))};return e.jsx(e.Fragment,{children:e.jsxs(aa,{children:[l&&e.jsx(ie,{pt:6,pb:3,children:e.jsxs(Me,{children:[e.jsxs("div",{className:"flex gap-2 m-4",children:[e.jsx(Je,{color:"error",text:e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx(ts,{size:"2em",className:"pe-2"}),"PDF"]}),submit:!H,onClick:k,size:"small",className:"text-sm whitespace-nowrap"}),e.jsx(Je,{color:"success",text:e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx($s,{size:"2em",className:"pe-2"}),"Excel"]}),submit:!A,onClick:b,size:"small",className:"text-sm whitespace-nowrap"})]}),e.jsxs(ie,{px:3,pt:3,lineHeight:1,className:"flex flex-col items-center justify-center",children:[e.jsxs("div",{className:"mb-3 text-center",children:[e.jsx(le,{variant:"h3",fontWeight:"medium",children:"LAPORAN DAFTAR BERKAS ARSIP MUSNAH"}),e.jsxs(le,{variant:"h4",fontWeight:"medium",children:["PENCIPTA ARSIP: ",(y=p==null?void 0:p.desc_instansi)==null?void 0:y.toUpperCase()]})]}),e.jsxs(le,{variant:"h5",fontWeight:"medium",children:["PERIODE PEMUSNAHAN: ",(o=na(n,2))==null?void 0:o.toUpperCase()," -"," ",(F=na(t,2))==null?void 0:F.toUpperCase()]})]}),e.jsx("div",{className:"overflow-auto",children:e.jsxs("div",{className:"table p-10 min-w-full",children:[e.jsxs("table",{className:"w-full text-sm text-left !text-gray-700 dark:text-gray-400 table-bordered",children:[e.jsx("thead",{className:"text-xs text-gray-500 uppercase border-b-2 mb-1",children:e.jsxs("tr",{children:[e.jsx(q,{text:"No",className:"flex justify-center"}),e.jsx(q,{text:"Kode Klasifikasi / Nomor Berkas"}),e.jsx(q,{text:"Nama Berkas"}),e.jsx(q,{text:"Tanggal Buat Berkas"}),e.jsx(q,{text:"Kurun Waktu"}),e.jsx(q,{text:"Jumlah Item"}),e.jsx(q,{text:"Akhir Retensi Inaktif"}),e.jsx(q,{text:"Tanggal Serah"}),p.group_role==2&&e.jsx(q,{text:"Unit Pengolah"}),e.jsx(q,{text:"Keterangan"})]})}),e.jsxs("tbody",{children:[W?e.jsx("tr",{children:e.jsx("td",{colSpan:9,children:e.jsx(ia,{})})}):e.jsx(e.Fragment,{}),X.length?X.map((x,S)=>{var f;return e.jsxs("tr",{className:"border-b border-slate-300",children:[e.jsx("td",{className:" px-6 py-6 text-center",children:x.no}),e.jsx("td",{className:" max-w-[9rem] px-6 py-6",children:e.jsxs("div",{className:"flex-wrap",children:[x.klasifikasi_kode," / ",x.nomor]})}),e.jsx("td",{className:" max-w-[9rem] px-6 py-6",children:e.jsxs("div",{className:"flex-wrap",children:[x.nama," "]})}),e.jsx("td",{className:" max-w-[9rem] px-6 py-6",children:e.jsx("div",{className:"flex-wrap",children:x!=null&&x.created_at?oa(x.created_at).format("DD-MM-YYYY"):"-"})}),e.jsx("td",{className:" max-w-[9rem] px-6 py-6",children:e.jsx("div",{className:"flex-wrap",children:x.jumlah>0?x.kurun:"-"})}),e.jsx("td",{className:" max-w-[9rem] px-6 py-6",children:e.jsx("div",{className:"flex-wrap",children:x.jumlah})}),e.jsx("td",{className:" max-w-[9rem] px-6 py-6",children:e.jsx("div",{className:"flex-wrap",children:x.tanggal_retensi_inaktif})}),e.jsx("td",{className:" max-w-[9rem] px-6 py-6",children:e.jsx("div",{className:"flex-wrap",children:(f=oa(x.tanggal_serah,"yyyy-mm-DD HH:ss"))==null?void 0:f.format("DD-mm-yyyy HH.ss")})}),p.group_role==2&&e.jsx("td",{className:" max-w-[9rem] px-6 py-6",children:e.jsx("div",{className:"flex-wrap",children:x.unit_pengolah})}),e.jsx("td",{})]},S)}):e.jsx(e.Fragment,{})]})]}),e.jsx("nav",{className:"flex items-center justify-between p-4","aria-label":"Table navigation",children:e.jsxs("span",{className:"text-sm text-gray-400",children:["Menampilkan ",T==null?void 0:T.length," entri"]})})]})})]})}),e.jsx(ua,{})]})})},Wr="https://api.arsip.go.id/arsip/api/";class Rd{constructor(){ae(this,"getPaging",async s=>{const n=Ce.serializeObjectToQueryString(s);return await se.get(`${Wr}berkas-pindah/list?${n}`).then(l=>l)});ae(this,"getLaporan",async s=>{const n=Ce.serializeObjectToQueryString(s);return await se.get(`${Wr}laporan/arsip-pindah?${n}`).then(l=>l)});ae(this,"downloadLaporanPdf",async s=>{const n=Ce.serializeObjectToQueryString(s);return await se.get(`${Wr}laporan/arsip-pindah/pdf?${n}`,{responseType:"blob",headers:{"Content-Type":"application/pdf"}}).then(l=>l)});ae(this,"getDetail",async(s,n)=>{const t=Ce.serializeObjectToQueryString(n);return await se.get(`${Wr}pemindahan/show/${s}?${t}`).then(m=>m)});ae(this,"downloadLaporanExcel",async s=>{const n=Ce.serializeObjectToQueryString(s);return await se.get(`${Wr}laporan/arsip-pindah/excel?${n}`,{responseType:"blob",headers:{"Content-Type":"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}}).then(l=>l)})}}const Xb=()=>{const r="Berkas Pindah",[s,n]=a.useState(!1);a.useEffect(()=>{n(ge(r,"is_read",!0))},[]);const t=JSON.parse(Le.getItem("users")),i=new Rd,l=ha(),[m,p]=a.useState(!1),[B,K]=a.useState(null),[W,z]=a.useState({start_at:"",end_at:""}),[T,L]=a.useState(null),[$,M]=a.useState({total:0,from:1,to:1});let H=[];B==null?H=[]:H=B.map((b,y)=>{var o,F,x,S;return{no:y+$.from,id:b.id,klasifikasi_id:b.klasifikasi_id,nomor:b.nomor,klasifikasi_kode:b.klasifikasi_kode,nama:b.nama,tanggal_retensi_inaktif:b.tanggal_retensi_inaktif,tanggal_tutup:b==null?void 0:b.tanggal_tutup,tanggal_pindah:(F=(o=b.berkas_pemindahan_inaktif)==null?void 0:o.pemindahan)==null?void 0:F.tanggal_pindah,kurun:b.kurun,jumlah:b.jumlah,created_at:b.created_at,updated_at:b.updated_at,berkas_pemusnahan:b==null?void 0:b.berkas_pemusnahan,unit_pengolah:(S=(x=b==null?void 0:b.berkas_pemindahan_inaktif)==null?void 0:x.pemindahan)==null?void 0:S.from_organisasi_nama,action:e.jsx("div",{className:"flex gap-2 items-center justify-center w-full",children:e.jsx(Oa,{size:"1.5em",color:"#17c1e8",onClick:()=>V(b),className:"cursor-pointer",title:"Lihat"})})}});const V=async b=>{const y=b.berkas_pemindahan_inaktif.pemindahan_id;y!=null&&await i.getDetail(y).then(o=>{const F=o.data.result;l("/proses-penyusutan/pemindahan/detail",{state:{formode:"Lihat",id:y,detail:F}})}).catch(o=>{console.error("Failed to fetch detail:",o)})},[A,G]=a.useState({organisasi_id:t==null?void 0:t.organisasi_id,public_organisasi_id:t==null?void 0:t.public_organisasi_id,group_role_id:t==null?void 0:t.group_role,page:1,rows:10,sortField:"",sortOrder:null,search:"",filters:{kode:{value:""},nama:{value:""},tanggal_retensi_inaktif:{value:""},tanggal_pindah:{value:""}}});a.useEffect(()=>{X()},[A]);const X=async(b=!1)=>{b&&(A.page=1),p(!0),await i.getPaging(A).then(y=>{let o=y.data.result;o.data&&(L(o.last_page),K(o.data),p(!1)),p(!1),M({...$,to:o.to,from:o.from,total:o.total})}).catch(y=>{console.log({error:y}),p(!1),M({...$,to:0,from:!1,total:0})})},O=Da((b,y,o=null)=>{if(o){let x=o.target;for(;x&&x.tagName!=="TD";)x=x.parentNode;if(x&&x.tagName==="TD"){const S=x.querySelector(".clear-input"),f=x.querySelector("input");y?S.classList.remove("hidden"):(S.classList.add("hidden"),f.value="")}}let F={...A};F.filters[b].value=y,F.page=1,G(F)},600),I=b=>{let y={...A};y.page=b,G(y),window.scrollTo({top:0,behavior:"smooth"})},_=b=>{let y={...A};y.rows=b,y.page=1,G(y)},C=b=>{let y={...A};y.sortField=b,A.sortField!=b?A.sortOrder==""&&(y.sortOrder=1):A.sortOrder==1?y.sortOrder=-1:(y.sortOrder="",y.sortField=""),y.page=1,G(y)},k=()=>{const y=`/berkas-pindah/laporan?${Ce.serializeObjectToQueryString({start_at:W==null?void 0:W.start_at,end_at:W==null?void 0:W.end_at})}`;window.open(y,"_blank","noopener,noreferrer")};return e.jsxs(aa,{children:[e.jsx(la,{}),s&&e.jsxs(e.Fragment,{children:[" ",e.jsx(ie,{pt:6,pb:3,children:e.jsxs(Me,{children:[e.jsxs(ie,{px:3,pt:3,lineHeight:1,children:[e.jsx(w,{container:!0,direction:"row",justifyContent:"space-between",alignItems:"center",mb:4,children:e.jsx(w,{item:!0,children:e.jsx(le,{variant:"h5",fontWeight:"medium",children:"Daftar Arsip Inaktif"})})}),(t==null?void 0:t.group_role)!==4&&e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4 md:gap-6 mb-4 mt-5 md:items-center md:justify-between",children:[e.jsx("div",{className:"w-60",children:e.jsx(le,{variant:"h6",fontWeight:"medium",children:e.jsx("p",{className:"whitespace-nowrap",children:"Laporan Daftar Arsip Inaktif"})})}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-center ",children:[e.jsx("div",{className:"w-full ",children:e.jsx(Zs,{onDateSelected:(b,y)=>{z(o=>({...o,start_at:b==null?void 0:b.toISOString(),end_at:y==null?void 0:y.toISOString()}))}})}),ge(r,"is_create",!1,!0)&&e.jsx("div",{className:"w-full md:w-fit text-right",children:e.jsxs(_e,{variant:"gradient",color:"success",size:"small",onClick:k,disabled:!W.start_at||!W.end_at,children:[e.jsx(Bs,{size:"2em",className:"pe-2"}),"Tampilkan"]})})]})]})})]}),e.jsx("div",{className:"overflow-auto",children:e.jsxs("div",{className:"table p-10 min-w-full",children:[e.jsx("div",{className:"flex justify-end mb-1",children:e.jsx(pa,{config:A,handleClick:_})}),e.jsxs("table",{className:"w-full text-sm text-left !text-gray-700 dark:text-gray-400 table-bordered",children:[e.jsx("thead",{className:"text-xs text-gray-500 uppercase border-b-2 mb-1",children:e.jsxs("tr",{children:[e.jsx(q,{text:"No",className:"flex justify-center"}),e.jsx(q,{text:"Kode Klasifikasi / Nomor Berkas"}),e.jsx(q,{text:"Berkas",sortField:"nama",sortOrder:A.sortOrder,config:A,handleClick:()=>C("nama")}),e.jsx(q,{text:"Tanggal Buat Berkas",sortField:"created_at",sortOrder:A.sortOrder,config:A,handleClick:()=>C("created_at")}),e.jsx(q,{text:"Kurun Waktu",sortField:"kurun",sortOrder:A.sortOrder,config:A,handleClick:()=>C("kurun")}),e.jsx(q,{text:"Jumlah Item",sortField:"jumlah",sortOrder:A.sortOrder,config:A,handleClick:()=>C("jumlah")}),e.jsx(q,{text:"Akhir Retensi Inaktif",sortField:"tanggal_retensi_inaktif",sortOrder:A.sortOrder,config:A,handleClick:()=>C("tanggal_retensi_inaktif")}),e.jsx(q,{text:"Tanggal Pindah",sortField:"tanggal_pindah",sortOrder:A.sortOrder,config:A,handleClick:()=>C("tanggal_pindah")}),t.group_role==2&&e.jsx(q,{text:"Unit Pengolah"}),e.jsx(q,{text:"Aksi"})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{className:"border-b border-slate-300",children:[e.jsx("td",{className:"max-w-[20rem] py-6"}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"kode",onSearch:O,placeholder:"Kode Klasifikasi / Nomor Berkas",type:"input"})}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"nama",onSearch:O,placeholder:"Berkas",type:"input"})}),e.jsx("td",{}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2"}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2"}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2"}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2",children:e.jsx(we,{keyword:"tanggal_pindah",onSearch:O,placeholder:"Tanggal",type:"input",isDate:!0})}),e.jsx("td",{className:"max-w-[20rem] py-6 px-2"})]}),m?e.jsx("tr",{children:e.jsx("td",{colSpan:11,children:e.jsx(ia,{})})}):e.jsx(e.Fragment,{}),H.length?H.map((b,y)=>e.jsxs("tr",{className:"border-b border-slate-300",children:[e.jsx("td",{className:"px-6 py-6",children:e.jsx("div",{className:"flex justify-center",children:b.no})}),e.jsxs("td",{className:" max-w-[20rem] px-6 py-6",children:[b.klasifikasi_kode," / ",b.nomor]}),e.jsx("td",{className:" max-w-[20rem] px-6 py-6",children:b.nama}),e.jsx("td",{className:" max-w-[20rem] px-6 py-6 ",children:b.created_at?na(b.created_at,2):"-"}),e.jsx("td",{className:" max-w-[20rem] px-6 py-6 ",children:b.jumlah>0?b.kurun:e.jsx(be,{badgeContent:"BELUM ADA NASKAH YANG DIBERKASKAN",color:"warning",container:!0})}),e.jsx("td",{className:" max-w-[20rem] px-6 py-6 text-center",children:b.jumlah}),e.jsx("td",{className:" max-w-[20rem] px-6 py-6",children:b.tanggal_retensi_inaktif?oa(b.tanggal_retensi_inaktif,"DD-MM-YYYY").format("DD MMMM YYYY"):"-"}),e.jsx("td",{className:" max-w-[20rem] px-6 py-6",children:b.tanggal_pindah?na(b.tanggal_pindah,2):na(b.updated_at,2)}),t.group_role==2&&e.jsx("td",{className:" max-w-[20rem] px-6 py-6",children:b.unit_pengolah}),e.jsx("td",{className:" max-w-[20rem] px-6 py-6",children:b.action})]},y)):e.jsx(e.Fragment,{})]})]}),e.jsxs("nav",{className:"flex items-center justify-between p-4","aria-label":"Table navigation",children:[e.jsx("span",{className:"text-sm text-gray-400",children:$.from&&`Menampilkan ${Se($.from)} sampai ${Se($.to)} dari ${Se($.total)} entri`}),e.jsx(xa,{currentPage:A.page,lastPage:T,displayCount:5,handleClick:I})]})]})})]})}),e.jsx(ua,{})]})]})},Zb=()=>{var y,o,F;const r="Berkas Pindah",s=ga(),n=new URLSearchParams(s.search).get("start_at"),t=new URLSearchParams(s.search).get("end_at");new URLSearchParams(s.search).get("status");const i=new URLSearchParams(s.search).get("unit_kerja_id"),[l,m]=a.useState(!1),p=JSON.parse(Le.getItem("users"));a.useEffect(()=>{m(ge(r,"is_read",!0,!0)),C(i)},[]);const B=new Rd,K=new qa,[W,z]=a.useState(!1),[T,L]=a.useState(null),[$,M]=a.useState(null),[H,V]=a.useState(!1),[A,G]=a.useState(!1);let X=[];T==null?X=[]:X=T.map((x,S)=>{var f,R,u,D;return{no:S+1,klasifikasi_kode:x.klasifikasi_kode,nomor:x.nomor,nama:x.nama,created_at:x.created_at,kurun:x.kurun,jumlah:x.jumlah,retensi_aktif:x==null?void 0:x.retensi_aktif,retensi_inaktif:x==null?void 0:x.retensi_inaktif,tanggal_retensi_aktif:(x==null?void 0:x.tanggal_retensi_aktif)||"-",tanggal_retensi_inaktif:(x==null?void 0:x.tanggal_retensi_inaktif)||"-",tanggal_tutup:x==null?void 0:x.tanggal_tutup,tanggal_pindah:((R=(f=x.berkas_pemindahan_inaktif)==null?void 0:f.pemindahan)==null?void 0:R.tanggal_pindah)||x.updated_at,status_akhir:x.penyusutan_akhir_nama,skkad:x.klasifikasi_keamanan_nama,unit_pengolah:(D=(u=x==null?void 0:x.berkas_pemindahan_inaktif)==null?void 0:u.pemindahan)==null?void 0:D.from_organisasi_nama}});const[O,I]=a.useState({start_at:n,end_at:t});a.useEffect(()=>{_()},[O]);const _=async()=>{z(!0),await B.getLaporan(O).then(x=>{let S=x.data.result;S&&(L(S),z(!1)),z(!1)}).catch(x=>{z(!1)})},C=async x=>{x&&await K.detail("organisasi/instansi",x,"").then(S=>{M(S)})},k=async()=>{V(!0),await B.downloadLaporanPdf(O).then(x=>{const S=`Laporan Daftar Berkas Arsip Inaktif_${oa(O==null?void 0:O.start_at).format("YYYY-MM-DD")}_${oa(O==null?void 0:O.end_at).format("YYYY-MM-DD")}.pdf`;es(x.data,S)}).catch(x=>{console.log({error:x})}).finally(()=>V(!1))},b=async()=>{G(!0),await B.downloadLaporanExcel(O).then(x=>{const S=`Laporan Daftar Berkas Arsip Inaktif_${oa(O==null?void 0:O.start_at).format("YYYY-MM-DD")}_${oa(O==null?void 0:O.end_at).format("YYYY-MM-DD")}.xls`;es(x.data,S)}).catch(x=>{console.log({error:x})}).finally(()=>G(!1))};return e.jsx(e.Fragment,{children:e.jsxs(aa,{children:[l&&e.jsx(ie,{pt:6,pb:3,children:e.jsxs(Me,{children:[e.jsxs("div",{className:"flex gap-2 m-4",children:[e.jsx(Je,{color:"error",text:e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx(ts,{size:"2em",className:"pe-2"}),"PDF"]}),submit:!H,onClick:k,size:"small",className:"text-sm whitespace-nowrap"}),e.jsx(Je,{color:"success",text:e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx($s,{size:"2em",className:"pe-2"}),"Excel"]}),submit:!A,onClick:b,size:"small",className:"text-sm whitespace-nowrap"})]}),e.jsxs(ie,{px:3,pt:3,lineHeight:1,className:"flex flex-col items-center justify-center",children:[e.jsxs("div",{className:"mb-3 text-center",children:[e.jsx(le,{variant:"h3",fontWeight:"medium",children:"LAPORAN DAFTAR BERKAS ARSIP INAKTIF"}),e.jsxs(le,{variant:"h4",fontWeight:"medium",children:["PENCIPTA ARSIP: ",(y=p==null?void 0:p.desc_instansi)==null?void 0:y.toUpperCase()]})]}),e.jsxs(le,{variant:"h5",fontWeight:"medium",children:["PERIODE PEMINDAHAN: ",(o=na(n,2))==null?void 0:o.toUpperCase()," -"," ",(F=na(t,2))==null?void 0:F.toUpperCase()]})]}),e.jsx("div",{className:"overflow-auto",children:e.jsxs("div",{className:"table p-10 min-w-full",children:[e.jsxs("table",{className:"w-full text-sm text-left !text-gray-700 dark:text-gray-400 table-bordered",children:[e.jsx("thead",{className:"text-xs text-gray-500 uppercase border-b-2 mb-1",children:e.jsxs("tr",{children:[e.jsx(q,{text:"No",className:"flex justify-center"}),e.jsx(q,{text:"Kode Klasifikasi / Nomor Berkas"}),e.jsx(q,{text:"Nama Berkas"}),e.jsx(q,{text:"Tanggal Buat Berkas"}),e.jsx(q,{text:"Kurun Waktu"}),e.jsx(q,{text:"Jumlah Item"}),e.jsx(q,{text:"Akhir Retensi Inaktif"}),e.jsx(q,{text:"Tanggal Pindah"}),p.group_role==2&&e.jsx(q,{text:"Unit Pengolah"}),e.jsx(q,{text:"Keterangan"})]})}),e.jsxs("tbody",{children:[W?e.jsx("tr",{children:e.jsx("td",{colSpan:9,children:e.jsx(ia,{})})}):e.jsx(e.Fragment,{}),X.length?X.map((x,S)=>e.jsxs("tr",{className:"border-b border-slate-300",children:[e.jsx("td",{className:" px-6 py-6 text-center",children:x.no}),e.jsx("td",{className:" max-w-[9rem] px-6 py-6",children:e.jsxs("div",{className:"flex-wrap",children:[x.klasifikasi_kode," / ",x.nomor]})}),e.jsx("td",{className:" max-w-[9rem] px-6 py-6",children:e.jsxs("div",{className:"flex-wrap",children:[x.nama," "]})}),e.jsx("td",{className:" max-w-[9rem] px-6 py-6",children:e.jsx("div",{className:"flex-wrap",children:x!=null&&x.created_at?oa(x.created_at).format("DD-MM-YYYY"):"-"})}),e.jsx("td",{className:" max-w-[9rem] px-6 py-6",children:e.jsx("div",{className:"flex-wrap",children:x.jumlah>0?x.kurun:"-"})}),e.jsx("td",{className:" max-w-[9rem] px-6 py-6",children:e.jsx("div",{className:"flex-wrap",children:x.jumlah})}),e.jsx("td",{className:" max-w-[9rem] px-6 py-6",children:e.jsx("div",{className:"flex-wrap",children:x.tanggal_retensi_inaktif})}),e.jsx("td",{className:" max-w-[9rem] px-6 py-6",children:e.jsx("div",{className:"flex-wrap",children:oa(x.tanggal_pindah).format("DD-MM-YYYY HH.mm")})}),p.group_role==2&&e.jsx("td",{className:" max-w-[9rem] px-6 py-6",children:e.jsx("div",{className:"flex-wrap",children:x.unit_pengolah})}),e.jsx("td",{})]},S)):e.jsx(e.Fragment,{})]})]}),e.jsx("nav",{className:"flex items-center justify-between p-4","aria-label":"Table navigation",children:e.jsxs("span",{className:"text-sm text-gray-400",children:["Menampilkan ",T==null?void 0:T.length," entri"]})})]})})]})}),e.jsx(ua,{})]})})},Ze="",Cn=[{icon:e.jsx(xl,{size:"12px"}),name:"Root",key:"root",hidden:!0,route:"/maintenance",component:e.jsx(fk,{})},{type:"collapse",icon:e.jsx(xl,{size:"12px"}),name:"Beranda",key:"beranda",modul:"",bypass:!0,noCollapse:!0,route:Ze+"/beranda",component:e.jsx(Uk,{})},{name:"Profile",key:"profile",route:Ze+"/profile",modul:"Profile",component:e.jsx(mk,{})},{type:"title",title:"Penciptaan Arsip",key:"penciptaan-arsip",modul:"Penciptaan Arsip"},{type:"collapse",name:"Naskah Masuk",key:"penerimaan-naskah-masuk",icon:e.jsx(qu,{size:"12px"}),modul:"Penerimaan Naskah Masuk",collapse:[{name:"Registrasi Naskah Masuk",key:"registrasi-naskah-masuk",route:Ze+"/penerimaan-naskah-masuk/registrasi-naskah-masuk",modul:"Registrasi Naskah Masuk",component:e.jsx(Yf,{})},{name:"Daftar Naskah Masuk",key:"naskah-dinas-masuk",route:Ze+"/penerimaan-naskah-masuk/naskah-dinas-masuk",modul:"Naskah Dinas Masuk",component:e.jsx(rj,{}),hiddenCollapse:!0,collapse:[{hidden:!0,name:"Detail",key:"detail",route:Ze+"/penerimaan-naskah-masuk/naskah-dinas-masuk/detail",component:e.jsx(nj,{})},{hidden:!0,name:"Form",key:"form",route:Ze+"/penerimaan-naskah-masuk/naskah-dinas-masuk/form",component:e.jsx(ij,{})},{hidden:!0,name:"Laporan",key:"laporan",route:Ze+"/penerimaan-naskah-masuk/naskah-dinas-masuk/laporan",component:e.jsx(cj,{})}]},{name:"Tembusan",key:"naskah-tembusan",route:Ze+"/penerimaan-naskah-masuk/naskah-tembusan",modul:"Daftar Tembusan",component:e.jsx(lj,{}),hiddenCollapse:!0,collapse:[{hidden:!0,name:"Detail",key:"detail",modul:"Daftar Tembusan",route:Ze+"/penerimaan-naskah-masuk/naskah-tembusan/detail",component:e.jsx(oj,{})}]},{name:"Log Naskah Masuk",key:"log-naskah-masuk",route:Ze+"/penerimaan-naskah-masuk/log-naskah-masuk",modul:"Log Naskah Masuk",component:e.jsx(Qf,{}),hiddenCollapse:!0,collapse:[{hidden:!0,name:"Detail",key:"detail",modul:"Log Naskah Masuk",route:Ze+"/penerimaan-naskah-masuk/log-naskah-masuk/detail",component:e.jsx(tj,{})},{hidden:!0,name:"Form Log Naskah Masuk",key:"form",modul:"Log Naskah Masuk",route:Ze+"/penerimaan-naskah-masuk/log-naskah-masuk/form",component:e.jsx(ej,{})}]},{name:"Disposisi",key:"disposisi",route:Ze+"/penerimaan-naskah-masuk/disposisi",modul:"Daftar Disposisi",component:e.jsx(dj,{}),hiddenCollapse:!0,collapse:[{hidden:!0,name:"Detail",key:"detail",modul:"Daftar Disposisi",route:Ze+"/penerimaan-naskah-masuk/disposisi/detail",component:e.jsx(uj,{})}]},{name:"Koordinasi",key:"koordinasi",route:Ze+"/penerimaan-naskah-masuk/koordinasi",modul:"Naskah Koordinasi Masuk",component:e.jsx(xj,{}),hiddenCollapse:!0,collapse:[{hidden:!0,name:"Detail",key:"detail",modul:"Naskah Koordinasi Masuk",route:Ze+"/penerimaan-naskah-masuk/koordinasi/detail",component:e.jsx(pj,{})}]},{name:"Arahan",key:"arahan",route:Ze+"/penerimaan-naskah-masuk/arahan",modul:"Arahan Masuk",component:e.jsx(hj,{}),hiddenCollapse:!0,collapse:[{hidden:!0,name:"Detail",key:"detail",modul:"Arahan Masuk",route:Ze+"/penerimaan-naskah-masuk/arahan/detail",component:e.jsx(mj,{})}]},{name:"Log Disposisi",key:"log-disposisi",route:Ze+"/penerimaan-naskah-masuk/log-disposisi",modul:"Naskah Disposisi Keluar",component:e.jsx(jj,{})},{name:"Log Koordinasi",key:"log-koordinasi",route:Ze+"/penerimaan-naskah-masuk/log-koordinasi",modul:"Naskah Koordinasi Keluar",component:e.jsx(gj,{})},{name:"Log Arahan",key:"log-arahan",route:Ze+"/penerimaan-naskah-masuk/log-arahan",modul:"Arahan Keluar",component:e.jsx(fj,{})}]},{type:"collapse",name:"Naskah Keluar",key:"pembuatan-naskah-keluar",icon:e.jsx(Hu,{size:"12px"}),modul:"Pembuatan Naskah Keluar",collapse:[{name:"Registrasi Naskah Keluar",key:"registrasi-naskah-keluar",route:Ze+"/pembuatan-naskah-keluar/registrasi-naskah-keluar",modul:"Registrasi Naskah Keluar",component:e.jsx(df,{})},{name:"Daftar Naskah Keluar",key:"naskah-keluar",route:Ze+"/pembuatan-naskah-keluar/naskah-keluar",modul:"Daftar Naskah Keluar",component:e.jsx(bf,{}),hiddenCollapse:!0,collapse:[{hidden:!0,name:"Detail ",key:"detail",modul:"Daftar Naskah Keluar",route:Ze+"/pembuatan-naskah-keluar/naskah-keluar/detail",component:e.jsx(Lf,{})},{hidden:!0,name:"Form Naskah Keluar",key:"form",modul:"Daftar Naskah Keluar",route:Ze+"/pembuatan-naskah-keluar/naskah-keluar/form",component:e.jsx(Nn,{})},{hidden:!0,name:"Editor",key:"form/text-editor",route:Ze+"/pembuatan-naskah-keluar/naskah-keluar/form/text-editor",component:e.jsx(wn,{})},{hidden:!0,name:"Laporan",key:"laporan",route:Ze+"/pembuatan-naskah-keluar/naskah-keluar/laporan",component:e.jsx(Vf,{})}]},{name:"Log Naskah Keluar",key:"log-naskah-keluar",route:Ze+"/pembuatan-naskah-keluar/log-naskah-keluar",modul:"Log Naskah Keluar",component:e.jsx(ff,{}),hiddenCollapse:!0,collapse:[{hidden:!0,name:"Detail Log Naskah Keluar",key:"detail",modul:"Log Naskah Keluar",route:Ze+"/pembuatan-naskah-keluar/log-naskah-keluar/detail",component:e.jsx(Jj,{})},{hidden:!0,name:"Form Log Naskah Keluar",key:"form",modul:"Log Naskah Keluar",route:Ze+"/pembuatan-naskah-keluar/log-naskah-keluar/form",component:e.jsx(Nn,{})},{hidden:!0,name:"Editor",key:"form/text-editor",route:Ze+"/pembuatan-naskah-keluar/log-naskah-keluar/form/text-editor",component:e.jsx(wn,{})}]},{name:"Verifikasi Naskah",key:"verifikasi-naskah",route:Ze+"/pembuatan-naskah-keluar/verifikasi-naskah",modul:"Verifikasi Naskah",component:e.jsx(Rf,{}),noCollapse:!0,hiddenCollapse:!0,collapse:[{hidden:!0,name:"Detail",key:"detail",route:Ze+"/pembuatan-naskah-keluar/verifikasi-naskah/detail",component:e.jsx(Ef,{})},{hidden:!0,name:"Form",key:"form",route:Ze+"/pembuatan-naskah-keluar/verifikasi-naskah/form",component:e.jsx(Nn,{})},{hidden:!0,name:"Editor",key:"form/text-editor",route:Ze+"/pembuatan-naskah-keluar/verifikasi-naskah/form/text-editor",component:e.jsx(wn,{})}]},{name:"Tandatangan Naskah",key:"tandatangan-naskah",route:Ze+"/pembuatan-naskah-keluar/tandatangan-naskah",modul:"Tandatangan Naskah",component:e.jsx(Mf,{}),noCollapse:!0,hiddenCollapse:!0,collapse:[{hidden:!0,name:"Detail",key:"detail",modul:"Tandatangan Naskah",route:Ze+"/pembuatan-naskah-keluar/tandatangan-naskah/detail",component:e.jsx(Uf,{})},{hidden:!0,name:"Form Naskah Keluar",key:"form",modul:"Tandatangan Naskah",route:Ze+"/pembuatan-naskah-keluar/tandatangan-naskah/form",component:e.jsx(Nn,{})},{hidden:!0,name:"Editor",key:"form/text-editor",route:Ze+"/pembuatan-naskah-keluar/tandatangan-naskah/form/text-editor",component:e.jsx(wn,{})}]}]},{type:"title",title:"Master",key:"title-master",modul:"Master"},{type:"collapse",name:"Instansi",key:"instansi",icon:e.jsx(Gu,{size:"12px"}),modul:"Instansi",collapse:[{name:"Referensi Instansi",key:"daftar-referensi-instansi",route:Ze+"/instansi/daftar-referensi-instansi",modul:"Referensi Instansi",component:e.jsx(Ep,{})},{name:"Referensi Jenis Instansi",key:"daftar-referensi-jenis-instansi",route:Ze+"/instansi/daftar-referensi-jenis-instansi",modul:"Referensi Jenis Instansi",component:e.jsx(zp,{})},{name:"Daftar Instansi",key:"daftar-instansi",route:Ze+"/instansi/daftar-instansi",modul:"Daftar Instansi",component:e.jsx(Hp,{})},{name:"Unit Kerja",key:"unit-kerja",route:Ze+"/instansi/unit-kerja",modul:"Unit Kerja",component:e.jsx(tg,{})},{name:"Logo Instansi",key:"logo-instansi",route:Ze+"/instansi/logo-instansi",modul:"Logo Instansi",component:e.jsx(cg,{})}]},{type:"collapse",name:"Pengguna",key:"pengguna",modul:"Pengguna",icon:e.jsx(Hi,{size:"12px"}),collapse:[{name:"Jabatan",key:"daftar-jabatan",route:Ze+"/pengguna/daftar-jabatan",modul:"Jabatan",component:e.jsx(Fg,{})},{name:"Grup Jabatan",key:"daftar-grup-jabatan",route:Ze+"/pengguna/daftar-grup-jabatan",modul:"Grup Jabatan",component:e.jsx(Ig,{})},{name:"Tipe Pengguna",key:"daftar-tipe-pengguna",route:Ze+"/pengguna/daftar-tipe-pengguna",modul:"Tipe Pengguna",component:e.jsx(bj,{})},{name:"Daftar Pengguna",key:"daftar-pengguna",route:Ze+"/pengguna/daftar-pengguna",component:e.jsx(_j,{}),modul:"Daftar Pengguna",hiddenCollapse:!0,collapse:[{hidden:!0,name:"Form Pengguna",key:"form",route:Ze+"/pengguna/daftar-pengguna/form",component:e.jsx(wj,{})}]},{name:"Penandatangan",key:"daftar-penandatangan",route:Ze+"/pengguna/daftar-penandatangan",modul:"Penandatangan",component:e.jsx(Mj,{})},{name:"Tujuan Naskah",key:"daftar-tujuan-naskah",route:Ze+"/pengguna/daftar-tujuan-naskah",modul:"Tujuan Naskah",component:e.jsx(Dj,{})},{name:"Grup Tujuan Naskah",key:"grup-tujuan-naskah",route:Ze+"/pengguna/grup-tujuan-naskah",modul:"Grup Tujuan Naskah",component:e.jsx(Cj,{}),hiddenCollapse:!0,collapse:[{hidden:!0,name:"Form Grup Tujuan Naskah",key:"form",modul:"Grup Tujuan Naskah",route:Ze+"/pengguna/grup-tujuan-naskah/form",component:e.jsx(Gj,{})}]},{name:"Verifikator",key:"daftar-verifikator",route:Ze+"/pengguna/daftar-verifikator",modul:"Verifikator",component:e.jsx(Oj,{})},{name:"Tembusan",key:"daftar-tembusan",route:Ze+"/pengguna/daftar-tembusan",modul:"Tembusan",component:e.jsx(Uj,{})},{name:"Grup Tembusan",key:"daftar-grup-tembusan",route:Ze+"/pengguna/daftar-grup-tembusan",modul:"Group Tembusan",component:e.jsx(ik,{}),hiddenCollapse:!0,collapse:[{hidden:!0,name:"Form Grup Tembusan",key:"form",modul:"Group Tembusan",route:Ze+"/pengguna/daftar-grup-tembusan/form",component:e.jsx(lk,{})}]},{name:"Grup Tujuan Disposisi",key:"grup-tujuan-disposisi",route:Ze+"/pengguna/grup-tujuan-disposisi",modul:"Group Tujuan Disposisi",component:e.jsx(Hj,{}),hiddenCollapse:!0,collapse:[{hidden:!0,name:"Form Grup Tujuan Disposisi",key:"form",modul:"Group Tujuan Disposisi",route:Ze+"/pengguna/grup-tujuan-disposisi/form",component:e.jsx(Wj,{})}]},{name:"Hak Akses",key:"daftar-hak-akses",route:Ze+"/pengguna/daftar-hak-akses",component:e.jsx(Sj,{}),hiddenCollapse:!0,modul:"Hak Akses",collapse:[{hidden:!0,name:"Form Hak Akses",key:"form",route:Ze+"/pengguna/daftar-hak-akses/form",component:e.jsx(Pj,{})}]}]},{type:"title",title:"Instrumen Kearsipan",key:"title-instrumen-kearsipan",modul:"Instrumen Kearsipan"},{type:"collapse",name:"Klasifikasi Arsip",key:"klasifikasi-arsip",icon:e.jsx(Wu,{size:"12px"}),modul:"Klasifikasi Arsip",collapse:[{name:"Klasifikasi",key:"klasifikasi",route:Ze+"/klasifikasi-arsip/klasifikasi",modul:"Klasifikasi",component:e.jsx(Hg,{}),hiddenCollapse:!0,collapse:[{hidden:!0,name:"Form Klasifikasi",key:"form",modul:"Klasifikasi",route:Ze+"/klasifikasi-arsip/klasifikasi/form",component:e.jsx(Jg,{})}]},{name:"Penyusutan Akhir",key:"penyusutan-akhir",route:Ze+"/klasifikasi-arsip/penyusutan-akhir",modul:"Penyusutan Akhir",component:e.jsx(_g,{})},{name:"Kategori Berkas",key:"kategori-berkas",route:Ze+"/klasifikasi-arsip/kategori-berkas",modul:"Kategori Berkas",component:e.jsx(wg,{})},{name:"Referensi Arsiktektur Data",key:"referensi-arsitektur-data",route:Ze+"/klasifikasi-arsip/referensi-arsitektur-data",modul:"Referensi Arsiktektur Data",component:e.jsx(Pg,{})}]},{type:"collapse",icon:e.jsx(un,{size:"12px"}),name:"Klasifikasi Keamanan",key:"klasifikasi-keamanan",route:Ze+"/klasifikasi-keamanan",modul:"Klasifikasi Keamanan",noCollapse:!0,component:e.jsx(fg,{})},{type:"collapse",name:"Tata Naskah Dinas",key:"tata-naskah-dinas",icon:e.jsx(qi,{size:"12px"}),modul:"Tata Naskah Dinas",collapse:[{name:"Kop Surat",key:"kop-surat",route:Ze+"/tata-naskah-dinas/kop-surat",modul:"Kop Surat",component:e.jsx(xg,{})},{name:"Template Naskah",key:"template-naskah",route:Ze+"/tata-naskah-dinas/template-naskah",modul:"Template Naskah",component:e.jsx(qg,{}),hiddenCollapse:!0,collapse:[{hidden:!0,name:"Form Template Naskah",key:"form",route:Ze+"/tata-naskah-dinas/template-naskah/form",component:e.jsx(Rg,{})}]},{name:"Jenis Naskah Dinas",key:"jenis-naskah-dinas",route:Ze+"/tata-naskah-dinas/jenis-naskah-dinas",modul:"Jenis Naskah Dinas",component:e.jsx(Vg,{})},{name:"Sifat Naskah Dinas",key:"sifat-naskah-dinas",route:Ze+"/tata-naskah-dinas/sifat-naskah-dinas",modul:"Sifat Naskah Dinas",component:e.jsx(Bg,{})},{name:"Instruksi Disposisi",key:"intruksi-disposisi",route:Ze+"/tata-naskah-dinas/intruksi-disposisi",modul:"Instruksi Disposisi",component:e.jsx(Kg,{})},{name:"Penomoran Otomatis",key:"penomoran-otomatis",route:Ze+"/tata-naskah-dinas/penomoran-otomatis",modul:"Penomoran Otomatis",component:e.jsx(Yg,{}),hiddenCollapse:!0,collapse:[{hidden:!0,name:"Form Penomoran Otomatis",key:"form",modul:"Penomoran Otomatis",route:Ze+"/tata-naskah-dinas/penomoran-otomatis/form",component:e.jsx(Xg,{})}]}]},{type:"divider",modul:"Pengumuman"},{type:"collapse",icon:e.jsx(Ju,{size:"12px"}),name:"Pengumuman",key:"pengumuman",modul:"Pengumuman",route:Ze+"/pengumuman",noCollapse:!0,component:e.jsx(xk,{}),collapse:[{hidden:!0,name:"Form",key:"form",route:Ze+"/pengumuman/form",component:e.jsx(pk,{})}]},{type:"title",title:"Pemeliharaan Arsip",key:"pemeliharaan-arsip.",modul:"Pemeliharaan Arsip."},{type:"collapse",name:"Pemberkasan Arsip Aktif",key:"pemeliharaan-arsip",icon:e.jsx(Ci,{size:"12px"}),modul:"Berkas Aktif",route:Ze+"/pemeliharaan-arsip/pemberkasan-arsip-aktif",noCollapse:!0,hiddenCollapse:!0,component:e.jsx(Jk,{}),collapse:[{hidden:!0,name:"Detail",key:"detail",modul:"Berkas Aktif",route:Ze+"/pemeliharaan-arsip/pemberkasan-arsip-aktif/detail",component:e.jsx(eb,{})},{hidden:!0,name:"Form       ",key:"form",modul:"Berkas Aktif",route:Ze+"/pemeliharaan-arsip/pemberkasan-arsip-aktif/form",component:e.jsx(Qk,{})},{hidden:!0,name:"Laporan",key:"laporan",modul:"Berkas Aktif",route:Ze+"/pemeliharaan-arsip/pemberkasan-arsip-aktif/laporan",component:e.jsx(hb,{})},{hidden:!0,name:"Laporan Isi",key:"laporan-isi",modul:"Berkas Aktif",route:Ze+"/pemeliharaan-arsip/pemberkasan-arsip-aktif/laporan-isi",component:e.jsx(mb,{})},{hidden:!0,name:"Laporan Gabungan",key:"laporan-gabungan",modul:"Berkas Aktif",route:Ze+"/pemeliharaan-arsip/pemberkasan-arsip-aktif/laporan-gabungan",component:e.jsx(Rb,{})},{hidden:!0,name:"Laporan Gabungan Isi",key:"laporan-gabungan-isi",modul:"Berkas Aktif",route:Ze+"/pemeliharaan-arsip/pemberkasan-arsip-aktif/laporan-gabungan-isi",component:e.jsx(Eb,{})},{hidden:!0,name:"Form Naskah",key:"formNaskah",modul:"Berkas Aktif",route:Ze+"/pemeliharaan-arsip/pemberkasan-arsip-aktif/detail/form-naskah-aktif",component:e.jsx(ub,{})}]},{type:"collapse",name:"Penataan Arsip Inaktif",key:"pemeliharaan--arsip",icon:e.jsx(Ci,{size:"12px"}),modul:"Berkas Inaktif",route:Ze+"/pemeliharaan--arsip/pemberkasan-arsip-inaktif",noCollapse:!0,hiddenCollapse:!0,component:e.jsx(Sb,{}),collapse:[{hidden:!0,name:"Detail",key:"detail",modul:"Berkas Inaktif",route:Ze+"/pemeliharaan--arsip/pemberkasan-arsip-inaktif/detail",component:e.jsx(Pb,{})},{hidden:!0,name:"Laporan",key:"laporan-berkas-inaktif",modul:"Berkas Inaktif",route:Ze+"/pemeliharaan--arsip/pemberkasan-arsip-inaktif/laporan",component:e.jsx(Cb,{})},{hidden:!0,name:"Laporan Isi",key:"laporan-isi-berkas-inaktif",modul:"Berkas Inaktif",route:Ze+"/pemeliharaan--arsip/pemberkasan-arsip-inaktif/laporan-isi",component:e.jsx(Tb,{})}]},{type:"collapse",name:"Pemberkasan Mandiri",key:"pemeliharaan_arsip",icon:e.jsx(Yu,{size:"12px"}),modul:"Berkas Mandiri",route:Ze+"/pemeliharaan_arsip/pemberkasan-mandiri",noCollapse:!0,hiddenCollapse:!0,component:e.jsx(tb,{}),collapse:[{hidden:!0,name:"Detail",key:"detail",modul:"Berkas Mandiri",route:Ze+"/pemeliharaan_arsip/pemberkasan-mandiri/detail",component:e.jsx(rb,{})},{hidden:!0,name:"Laporan Mandiri",key:"laporan-mandiri",modul:"Berkas Mandiri",route:Ze+"/pemeliharaan_arsip/pemberkasan-mandiri/laporan-mandiri",component:e.jsx(nb,{})},{hidden:!0,name:"Laporan Mandiri Isi",key:"laporan-mandiri-isi",modul:"Berkas Mandiri",route:Ze+"/pemeliharaan_arsip/pemberkasan-mandiri/laporan-mandiri-isi",component:e.jsx(ib,{})},{hidden:!0,name:"Form",key:"form",modul:"Berkas Mandiri",route:Ze+"/pemeliharaan_arsip/pemberkasan-mandiri/form",component:e.jsx(lb,{})},{hidden:!0,name:"Form Naskah",key:"formNaskah",modul:"Berkas Mandiri",route:Ze+"/pemeliharaan_arsip/pemberkasan-mandiri/detail/form-naskah",component:e.jsx(cb,{})}]},{type:"title",title:"Penyusutan Arsip",key:"penyusutan-arsip.",modul:"Penyusutan Arsip."},{type:"collapse",name:"Verifikasi Penyusutan",key:"proses-penyusutan",icon:e.jsx(qn,{size:"12px"}),modul:"Berkas Inaktif",collapse:[{type:"collapse",name:"Pemindahan",key:"pemindahan",modul:"Verifikasi Pemindahan",route:Ze+"/proses-penyusutan/pemindahan",noCollapse:!0,hiddenCollapse:!0,component:e.jsx(xb,{}),collapse:[{hidden:!0,name:"Detail",key:"detail",modul:"Verifikasi Pemindahan",route:Ze+"/proses-penyusutan/pemindahan/detail",component:e.jsx(_b,{})},{hidden:!0,name:"Form Usul Pindah",key:"form",modul:"Usul Pemindahan",route:Ze+"/proses-penyusutan/pemindahan/form",component:e.jsx(Kb,{})}]},{type:"collapse",name:"Pemusnahan",key:"pemusnahan",modul:"Verifikasi Pemusnahan",route:Ze+"/proses-penyusutan/pemusnahan",noCollapse:!0,hiddenCollapse:!0,component:e.jsx(Db,{}),collapse:[{hidden:!0,name:"Detail",key:"detail",modul:"Verifikasi Pemusnahan",route:Ze+"/proses-penyusutan/pemusnahan/detail",component:e.jsx(fo,{})},{hidden:!0,name:"Form Usul Musnah",key:"formUsulMusnah",modul:"Usul Pemusnahan",route:Ze+"/proses-penyusutan/pemusnahan/form",component:e.jsx(Mb,{})}]},{type:"collapse",name:"Penyerahan",key:"penyerahan",modul:"Verifikasi Penyerahan",route:Ze+"/proses-penyusutan/penyerahan",noCollapse:!0,hiddenCollapse:!0,component:e.jsx(zb,{}),collapse:[{hidden:!0,name:"Detail",key:"detail",modul:"Verifikasi Penyerahan",route:Ze+"/proses-penyusutan/penyerahan/detail",component:e.jsx(jo,{})},{hidden:!0,name:"Form Usul Musnah",key:"formUsulMusnah",modul:"Usul Penyerahan",route:Ze+"/proses-penyusutan/penyerahan/form",component:e.jsx(Jb,{})}]}]},{type:"collapse",name:"Daftar Arsip Inaktif",key:"berkas-pindah",icon:e.jsx(pl,{size:"12px"}),modul:"Berkas Pindah",route:Ze+"/berkas-pindah",noCollapse:!0,hiddenCollapse:!0,component:e.jsx(Xb,{}),collapse:[{hidden:!0,name:"Laporan",key:"laporan-berkas-pindah",modul:"Berkas Pindah",route:Ze+"/berkas-pindah/laporan",component:e.jsx(Zb,{})}]},{type:"collapse",name:"Daftar Arsip Musnah",key:"berkas-musnah",icon:e.jsx(pl,{size:"12px"}),modul:"Berkas Pemusnahan",route:Ze+"/berkas-musnah",noCollapse:!0,hiddenCollapse:!0,component:e.jsx(Lb,{}),collapse:[{hidden:!0,name:"Laporan",key:"laporan-berkas-musnah",modul:"Berkas Pemusnahan",route:Ze+"/berkas-musnah/laporan",component:e.jsx($b,{})},{hidden:!0,name:"Detail",key:"detail",modul:"Verifikasi Pemusnahan",route:Ze+"/berkas-musnah/detail",component:e.jsx(fo,{})}]},{type:"collapse",name:"Daftar Arsip Serah",key:"berkas-serah",icon:e.jsx(Qu,{size:"12px"}),modul:"Berkas Penyerahan",route:Ze+"/berkas-serah",noCollapse:!0,hiddenCollapse:!0,component:e.jsx(Yb,{}),collapse:[{hidden:!0,name:"Laporan",key:"laporan-berkas-serah",modul:"Berkas Penyerahan",route:Ze+"/berkas-serah/laporan",component:e.jsx(Qb,{})},{hidden:!0,name:"Detail",key:"detail",modul:"Verifikasi Penyerahan",route:Ze+"/berkas-serah/detail",component:e.jsx(jo,{})}]},{type:"collapse",name:"Laporan",key:"laporan",icon:e.jsx(Xu,{size:"12px"}),modul:"Laporan",collapse:[]},{type:"collapse",name:"Pengaturan Akun",key:"pengaturan-akun",icon:e.jsx(Fo,{size:"12px"}),modul:"Pengaturan Akun",collapse:[]},{hidden:!0,name:"Auth",key:"auth",icon:e.jsx(un,{size:"12px"}),collapse:[{name:"Login",key:"login",route:Ze+"/auth/login",component:e.jsx(Sp,{})}]},{hidden:!0,name:"Privacy",key:"privacy.",icon:e.jsx(un,{size:"12px"}),collapse:[{name:"Privasi",key:"privacy",route:Ze+"/privacy-policy",component:e.jsx(Fb,{})}]},{hidden:!0,name:"Scan",key:"scan",icon:e.jsx(un,{size:"12px"}),collapse:[{name:"Scan PDF",key:"pdf",route:Ze+"/result-scan/:hash",component:e.jsx(po,{})},{name:"Scan PDF V2",key:"pdf_v2",route:Ze+"/result/:hash",component:e.jsx(po,{})}]}],e_="/assets/logo-ct-CkMmw3U3.png",a_="production",{Notification:ko}=window,s_=()=>{const r=JSON.parse(Le.getItem("users"));a.useEffect(()=>{"Notification"in window&&ko.permission!=="granted"&&ko.requestPermission().then(i=>{i==="granted"?Ln():console.log("Notification permission denied.")}),Eh(i=>{console.info("Received FCM message: ",i),t(i)});const t=i=>{r&&r.id&&(console.info("user ada"),i.data.env===a_&&(console.info("env bener"),i.data.user_id?(console.info("ada user"),i.data.user_id&&parseInt(i.data.user_id)===r.id&&(console.info("user sama"),i.data.role_id?(console.info("role gak null"),parseInt(i.data.role_id)===r.role&&(console.info("role sama"),s(i))):(console.info("role null"),s(i)))):(console.log("user_id gak null"),s(i))))};return()=>{Mh()}},[]);const s=n=>{Ta(n.notification.body,{isLoading:parseInt(n.data.loading)??!1,closeButton:!0,autoClose:parseInt(n.data.timeout)??500,type:n.data.status??"warning",pauseOnFocusLoss:!1})};return e.jsx(ah,{})};function t_(){const[r,s]=It(),{miniSidenav:n,direction:t,layout:i,openConfigurator:l,sidenavColor:m}=r,[p,B]=a.useState(!1),[K,W]=a.useState(null),{pathname:z,state:T}=ga(),L=ha(),$=JSON.parse(Le.getItem("users")),M=JSON.parse(Le.getItem("access_token")),H="",V="production",A=z.split("/")[1];a.useMemo(()=>{const k=xu({key:"rtl",stylisPlugins:[hu]});W(k)},[]);const G=()=>{n&&!p&&(kr(s,!1),B(!0))},X=()=>{p&&(kr(s,!0),B(!1))};a.useEffect(()=>{document.body.setAttribute("dir",t)},[t]),a.useEffect(()=>{O()},[]);const O=async()=>{try{await Ii.fetchAndActivate();const k=`maintenance_${V}`;if(Ii.getBoolean(k)){if("/"+A==H)return;A!="maintenance"&&L("/maintenance")}else A=="maintenance"&&L(H+"/")}catch{}};a.useEffect(()=>{document.documentElement.scrollTop=0,document.scrollingElement.scrollTop=0},[z]);const I=k=>k.map(b=>{let y=[];return b.collapse&&(y=I(b.collapse)),b.route&&($==null&&(b.route==H+"/auth/login"||b.route==H+"/privacy-policy"||b.route==H+"/beranda"||b.route=="/maintenance"||b.route==H+"/result-scan/:hash"||b.route==H+"/result/:hash")?y.push(e.jsx(dn,{exact:!0,path:b.route,element:b.component},b.key)):$&&y.push(e.jsx(dn,{exact:!0,path:b.route,element:b.component},b.key))),y}),_=e.jsx(e.Fragment,{}),C=()=>{M&&($!=null&&$.id||(Le.setItem("prev_user_id",$==null?void 0:$.id),Le.setItem("prev_location",z),Le.setItem("prev_state",T),L(H+"/auth/login")))};return e.jsx(xh,{children:t==="rtl"?e.jsx(pu,{value:K,children:e.jsxs(hl,{theme:pp,children:[e.jsx(ml,{}),i==="dashboard"&&e.jsxs(e.Fragment,{children:[e.jsx(Ai,{color:m,brand:e_,brandName:"SRIKANDI",routes:Cn,onMouseEnter:G,onMouseLeave:X}),e.jsx(hn,{}),_]}),i==="vr"&&e.jsx(hn,{}),e.jsxs(dl,{children:[I(Cn),C(),e.jsx(dn,{path:"*",element:e.jsx(ul,{to:H+"/beranda"})})]})]})}):e.jsxs(hl,{theme:xp,children:[e.jsx(ml,{}),e.jsx(s_,{}),i==="dashboard"&&Le.getItem("access_token")&&!z.includes("/text-editor")&&!z.includes("/privacy-policy")&&!z.includes("/maintenance")&&!z.includes("/result-scan")&&!z.includes("/result/")&&e.jsxs(e.Fragment,{children:[e.jsx(Ai,{color:m,brandName:"SRIKANDI",routes:Cn,onMouseEnter:G,onMouseLeave:X}),e.jsx(hn,{}),_]}),i==="vr"&&e.jsx(hn,{}),e.jsxs(dl,{children:[I(Cn),e.jsx(dn,{path:"*",element:e.jsx(ul,{to:H+"/beranda"})}),C()]})]})})}const r_=new ih({defaultOptions:{queries:{refetchOnWindowFocus:!1}}}),n_=Kd.createRoot(document.getElementById("root"));n_.render(e.jsx(Ud,{basename:void 0,children:e.jsx(lh,{client:r_,children:e.jsx(zo,{children:e.jsx(t_,{})})})}));
